/*! For license information please see ultra-card.js.LICENSE.txt */
(()=>{"use strict";var e,t,o={30:(e,t,o)=>{o.d(t,{m:()=>d});var i=o(183),a=o(662),n=o(914);o(768);class r{static render(e,t,o){const a=e.design||{},r=t=>{const i=Object.assign({},a);Object.keys(t).forEach((e=>{const o=t[e];""===o||null==o?delete i[e]:i[e]=o}));const n={design:i};Object.prototype.hasOwnProperty.call(t,"background_color")&&(n.background_color=t.background_color||void 0,n.background_color||delete n.background_color),console.log("🎨 Global Design Update:",{moduleId:e.id,updates:t,mergedDesign:i,combined:n}),o(n),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-design-update",{detail:{moduleId:e.id,updates:t}}))};return i.qy`
      <div class="uc-global-design-tab">
        ${n.Q.injectCleanFormStyles()}

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          ${n.Q.renderField("Padding","Spacing inside the module container (top/right/bottom/left).",t,{padding_top:a.padding_top||"",padding_right:a.padding_right||"",padding_bottom:a.padding_bottom||"",padding_left:a.padding_left||""},[n.Q.createSchemaItem("padding_top",{text:{}}),n.Q.createSchemaItem("padding_right",{text:{}}),n.Q.createSchemaItem("padding_bottom",{text:{}}),n.Q.createSchemaItem("padding_left",{text:{}})],(e=>r(e.detail.value)))}
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <!-- Background Color with Ultra Color Picker -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
              Background Color
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px;"
            >
              Background color for the module container.
            </div>
            <ultra-color-picker
              .value=${a.background_color||""}
              .defaultValue=${"transparent"}
              .hass=${t}
              @value-changed=${e=>r({background_color:e.detail.value})}
            ></ultra-color-picker>
          </div>

          <!-- Background Image Settings -->
          ${n.Q.renderField("Background Image","Background image for the module container.",t,{background_image_type:a.background_image_type||"none",background_image:a.background_image||"",background_image_entity:a.background_image_entity||"",background_repeat:a.background_repeat||"no-repeat",background_position:a.background_position||"center center"},[n.Q.createSchemaItem("background_image_type",{select:{options:[{value:"none",label:"None"},{value:"upload",label:"Upload/Local"},{value:"url",label:"URL"},{value:"entity",label:"Entity"}],mode:"dropdown"}}),n.Q.createSchemaItem("background_image",{text:{}}),n.Q.createSchemaItem("background_image_entity",{entity:{}}),n.Q.createSchemaItem("background_repeat",{select:{options:[{value:"no-repeat",label:"No Repeat"},{value:"repeat",label:"Repeat"},{value:"repeat-x",label:"Repeat X"},{value:"repeat-y",label:"Repeat Y"}],mode:"dropdown"}}),n.Q.createSchemaItem("background_position",{select:{options:[{value:"left top",label:"Left Top"},{value:"left center",label:"Left Center"},{value:"left bottom",label:"Left Bottom"},{value:"center top",label:"Center Top"},{value:"center center",label:"Center"},{value:"center bottom",label:"Center Bottom"},{value:"right top",label:"Right Top"},{value:"right center",label:"Right Center"},{value:"right bottom",label:"Right Bottom"}],mode:"dropdown"}})],(e=>r(e.detail.value)))}
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px;"
        >
          ${n.Q.renderField("Typography","Text color and font properties.",t,{color:a.color||"",font_size:a.font_size||"",font_family:a.font_family||"",font_weight:a.font_weight||""},[n.Q.createSchemaItem("color",{text:{}}),n.Q.createSchemaItem("font_size",{text:{}}),n.Q.createSchemaItem("font_family",{text:{}}),n.Q.createSchemaItem("font_weight",{text:{}})],(e=>r(e.detail.value)))}
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;"
        >
          ${n.Q.renderField("Border","Container border style.",t,{border_style:a.border_style||"none",border_width:a.border_width||0,border_color:a.border_color||"var(--divider-color)",border_radius:a.border_radius||0},[n.Q.createSchemaItem("border_style",{select:{options:[{value:"none",label:"None"},{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"},{value:"dotted",label:"Dotted"}]}}),n.Q.createSchemaItem("border_width",{number:{min:0,max:20}}),n.Q.createSchemaItem("border_color",{text:{}}),n.Q.createSchemaItem("border_radius",{number:{min:0,max:64}})],(e=>r(e.detail.value)))}
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;"
        >
          ${n.Q.renderField("Shadow","Box shadow properties.",t,{box_shadow_h:a.box_shadow_h||0,box_shadow_v:a.box_shadow_v||0,box_shadow_blur:a.box_shadow_blur||0,box_shadow_spread:a.box_shadow_spread||0,box_shadow_color:a.box_shadow_color||"rgba(0,0,0,0.2)"},[n.Q.createSchemaItem("box_shadow_h",{number:{min:-50,max:50}}),n.Q.createSchemaItem("box_shadow_v",{number:{min:-50,max:50}}),n.Q.createSchemaItem("box_shadow_blur",{number:{min:0,max:200}}),n.Q.createSchemaItem("box_shadow_spread",{number:{min:-50,max:50}}),n.Q.createSchemaItem("box_shadow_color",{text:{}})],(e=>r(e.detail.value)))}
        </div>
      </div>
      ${(()=>{try{const o=e.renderDesignExtensions;if("function"==typeof o)return o(t,(e=>r(e)))}catch(e){}return i.qy``})()}
    `}}var s=o(371),l=o(575);class d{constructor(){this.renderUcForm=(e,t,o,i,a=!0)=>l.U.renderForm(e,t,o,i,a),this.renderFieldSection=(e,t,o,i,a,n)=>l.U.renderFieldSection(e,t,o,i,a,n),this.renderSettingsSection=(e,t,o)=>l.U.renderSettingsSection(e,t,o),this.injectUcFormStyles=()=>l.U.injectCleanFormStyles(),this.entityField=l.U.entity,this.textField=l.U.text,this.selectField=l.U.select,this.iconField=l.U.icon,this.booleanField=l.U.boolean,this.numberField=l.U.number,this.colorField=l.U.color,this.gridField=l.U.grid,this.expandableField=l.U.expandable}renderActionsTab(e,t,o,i){return a.A.render(e,t,(e=>i(e)))}renderOtherTab(e,t,o,i){return s.X.render(e,t,(e=>i(e)))}renderDesignTab(e,t,o,i){return r.render(e,t,(e=>i(e)))}validate(e){const t=[];return e.id||t.push("Module ID is required"),e.type||t.push("Module type is required"),{valid:0===t.length,errors:t}}generateId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}renderFormField(e,t,o){return i.qy`
      <div class="form-field">
        <label class="form-label">${e}</label>
        ${t} ${o?i.qy`<div class="form-description">${o}</div>`:""}
      </div>
    `}renderColorPicker(e,t,o,a){return this.renderFormField(e,i.qy`
        <input
          type="color"
          .value=${t||"#000000"}
          @change=${e=>o(e.target.value)}
        />
      `,a)}renderNumberInput(e,t,o,a={},n){var r;const s=null!==(r=a.defaultValue)&&void 0!==r?r:0;return this.renderFormField(e,i.qy`
        <input
          type="number"
          .value=${null!=t?t:""}
          placeholder=${s.toString()}
          min=${a.min||0}
          max=${a.max||1e3}
          step=${a.step||1}
          @input=${e=>{const t=e.target.value.trim();o(""===t?s:Number(t))}}
        />
      `,n)}renderTextInput(e,t,o,a,n){return this.renderFormField(e,i.qy`
        <input
          type="text"
          .value=${t||""}
          placeholder=${a||""}
          @input=${e=>o(e.target.value)}
        />
      `,n)}renderEntityPicker(e,t,o,a,n,r,s){return this.renderFormField("",i.qy`
        <ha-form
          .hass=${a}
          .data=${{entity:t||""}}
          .schema=${[{name:"entity",selector:{entity:{}},label:e,description:r||""}]}
          .computeLabel=${e=>e.label||e.name}
          .computeDescription=${e=>e.description||""}
          @value-changed=${e=>o(e.detail.value.entity)}
        ></ha-form>
      `,"")}renderTextArea(e,t,o,a,n){return this.renderFormField(e,i.qy`
        <textarea
          .value=${t||""}
          placeholder=${a||""}
          rows="3"
          @input=${e=>o(e.target.value)}
        ></textarea>
      `,n)}renderSelect(e,t,o,a,n){return this.renderFormField(e,i.qy`
        <select
          .value=${t||""}
          @change=${e=>a(e.target.value)}
        >
          ${o.map((e=>i.qy`<option value="${e.value}">${e.label}</option>`))}
        </select>
      `,n)}renderCheckbox(e,t,o,a){return this.renderFormField("",i.qy`
        <label class="checkbox-wrapper">
          <input
            type="checkbox"
            .checked=${t||!1}
            @change=${e=>o(e.target.checked)}
          />
          ${e}
        </label>
      `,a)}renderConditionalFieldsGroup(e,t){return i.qy`
      <div class="conditional-fields-group">
        <div class="conditional-fields-header">${e}</div>
        <div class="conditional-fields-content">${t}</div>
      </div>
    `}}},57:(e,t,o)=>{o.d(t,{formatEntityState:()=>a});var i=o(340);const a=(e,t,o)=>{var a,n;const r=!1!==(null==o?void 0:o.includeUnit),s=null===(a=null==e?void 0:e.states)||void 0===a?void 0:a[t];if(!e||!s)return void 0!==(null==o?void 0:o.state)?String(o.state):"";const l=e.formatEntityState,d=l?l(s,void 0!==(null==o?void 0:o.state)?String(o.state):void 0):(0,i.nu)(e.localize,s,e.locale,null==o?void 0:o.state);if(r)return d;const c=null===(n=s.attributes)||void 0===n?void 0:n.unit_of_measurement;if(c&&"string"==typeof d){const e=` ${c}`;if(d.endsWith(e))return d.slice(0,-e.length)}return d}},70:(e,t,o)=>{o.d(t,{s:()=>d});var i=o(183),a=o(30),n=o(662),r=o(796),s=o(381),l=o(456);class d extends a.m{constructor(){super(...arguments),this.metadata={type:"markdown",title:"Markdown Module",description:"Display rich markdown content",author:"WJD Designs",version:"1.0.0",icon:"mdi:language-markdown",category:"content",tags:["markdown","content","rich-text","formatting","template"]}}createDefault(e,t){return{id:e||this.generateId("markdown"),type:"markdown",markdown_content:"# Welcome to Markdown\n\nThis is a **markdown** module that supports:\n\n- *Italic* and **bold** text\n- [Links](https://example.com)\n- `inline code`\n- Lists and more!\n\n## Features\n1. Headers (H1-H6)\n2. Tables\n3. Code blocks\n4. And much more...\n\n> This is a blockquote example",link:"",hide_if_no_link:!1,template_mode:!1,template:"",enable_html:!1,enable_tables:!0,enable_code_highlighting:!0,max_height:"none",overflow_behavior:"visible",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},enable_hover_effect:!0,hover_background_color:"var(--divider-color)"}}renderGeneralTab(e,t,o,a){var n;const r=e,s=(null===(n=null==t?void 0:t.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Content Section -->
        <div class="wpbakery-section">
          <h4>${(0,l.kg)("editor.markdown.content.title",s,"Markdown Content")}</h4>
          <div class="ha-form-field">
            <ha-form
              .hass=${t}
              .data=${{markdown_content:r.markdown_content||""}}
              .schema=${[{name:"markdown_content",label:(0,l.kg)("editor.markdown.content.label",s,"Content"),description:(0,l.kg)("editor.markdown.content.desc",s,"Enter your markdown content with full formatting support"),selector:{text:{multiline:!0}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>a({markdown_content:e.detail.value.markdown_content})}
            ></ha-form>
          </div>
        </div>

        <!-- Link & Behavior Section -->
        <div class="wpbakery-section">
          <h4>${(0,l.kg)("editor.markdown.link.title",s,"Link & Behavior")}</h4>
          <div class="two-column-grid">
            <div class="ha-form-field">
              <ha-form
                .hass=${t}
                .data=${{link:r.link||""}}
                .schema=${[{name:"link",label:(0,l.kg)("editor.markdown.link.url",s,"Link URL"),description:(0,l.kg)("editor.markdown.link.url_desc",s,"Optional URL to make the markdown clickable"),selector:{text:{}}}]}
                .computeLabel=${e=>e.label||e.name}
                .computeDescription=${e=>e.description||""}
                @value-changed=${e=>a({link:e.detail.value.link})}
              ></ha-form>
            </div>
            <div class="ha-form-field">
              <ha-form
                .hass=${t}
                .data=${{hide_if_no_link:r.hide_if_no_link||!1}}
                .schema=${[{name:"hide_if_no_link",label:(0,l.kg)("editor.markdown.hide_if_no_link",s,"Hide if No Link"),description:(0,l.kg)("editor.markdown.hide_if_no_link_desc",s,"Hide module when no link is provided"),selector:{boolean:{}}}]}
                .computeLabel=${e=>e.label||e.name}
                .computeDescription=${e=>e.description||""}
                @value-changed=${e=>a({hide_if_no_link:e.detail.value.hide_if_no_link})}
              ></ha-form>
            </div>
          </div>
        </div>

        <!-- Display Options Section -->
        <div class="wpbakery-section">
          <h4>${(0,l.kg)("editor.markdown.display.title",s,"Display Options")}</h4>
          <div class="two-column-grid">
            <div class="ha-form-field">
              <ha-form
                .hass=${t}
                .data=${{max_height:r.max_height||"none"}}
                .schema=${[{name:"max_height",label:(0,l.kg)("editor.markdown.max_height",s,"Max Height"),description:(0,l.kg)("editor.markdown.max_height_desc",s,"Maximum height (e.g., 300px, 50vh, none)"),selector:{text:{}}}]}
                .computeLabel=${e=>e.label||e.name}
                .computeDescription=${e=>e.description||""}
                @value-changed=${e=>a({max_height:e.detail.value.max_height})}
              ></ha-form>
            </div>
            <div class="ha-form-field">
              <ha-form
                .hass=${t}
                .data=${{overflow_behavior:r.overflow_behavior||"visible"}}
                .schema=${[{name:"overflow_behavior",label:(0,l.kg)("editor.markdown.overflow_behavior",s,"Overflow Behavior"),selector:{select:{options:[{value:"visible",label:(0,l.kg)("editor.markdown.overflow.visible",s,"Visible")},{value:"scroll",label:(0,l.kg)("editor.markdown.overflow.scroll",s,"Scroll")},{value:"hidden",label:(0,l.kg)("editor.markdown.overflow.hidden",s,"Hidden")}],mode:"dropdown"}}}]}
                .computeLabel=${e=>e.label||e.name}
                @value-changed=${e=>a({overflow_behavior:e.detail.value.overflow_behavior})}
              ></ha-form>
            </div>
          </div>

          <!-- Feature Toggles -->
          <div class="three-column-grid">
            <ha-form
              .hass=${t}
              .data=${{enable_html:r.enable_html||!1}}
              .schema=${[{name:"enable_html",label:"Enable HTML",description:"Allow HTML tags in markdown",selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>a({enable_html:e.detail.value.enable_html})}
            ></ha-form>

            <ha-form
              .hass=${t}
              .data=${{enable_tables:!1!==r.enable_tables}}
              .schema=${[{name:"enable_tables",label:"Enable Tables",description:"Support for markdown tables",selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>a({enable_tables:e.detail.value.enable_tables})}
            ></ha-form>

            <ha-form
              .hass=${t}
              .data=${{enable_code_highlighting:!1!==r.enable_code_highlighting}}
              .schema=${[{name:"enable_code_highlighting",label:"Code Highlighting",description:"Syntax highlighting for code blocks",selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>a({enable_code_highlighting:e.detail.value.enable_code_highlighting})}
            ></ha-form>
          </div>
        </div>

        <!-- Template Mode Section (standardized) -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            Template Mode
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:r.template_mode||!1}}
              .schema=${[{name:"template_mode",label:"Template Mode",description:"Use Home Assistant templating syntax to render content",selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>a({template_mode:e.detail.value.template_mode})}
            ></ha-form>
          </div>

          ${r.template_mode?i.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{template:r.template||""}}
                    .schema=${[{name:"template",label:"Value Template",description:"Template to render using Jinja2 syntax",selector:{text:{multiline:!0}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>a({template:e.detail.value.template})}
                  ></ha-form>
                </div>
              `:""}
        </div>
      </div>
    `}renderActionsTab(e,t,o,i){return n.A.render(e,t,(e=>i(e)))}renderPreview(e,t){const o=e;if(o.hide_if_no_link&&(!o.link||""===o.link.trim()))return i.qy`<div class="markdown-module-hidden">Hidden (no link)</div>`;const a=o,n=o.design||{},s={padding:n.padding_top||n.padding_bottom||n.padding_left||n.padding_right||a.padding_top||a.padding_bottom||a.padding_left||a.padding_right?`${this.addPixelUnit(n.padding_top||a.padding_top)||"8px"} ${this.addPixelUnit(n.padding_right||a.padding_right)||"0px"} ${this.addPixelUnit(n.padding_bottom||a.padding_bottom)||"8px"} ${this.addPixelUnit(n.padding_left||a.padding_left)||"0px"}`:"8px 0",margin:n.margin_top||n.margin_bottom||n.margin_left||n.margin_right||a.margin_top||a.margin_bottom||a.margin_left||a.margin_right?`${this.addPixelUnit(n.margin_top||a.margin_top)||"0px"} ${this.addPixelUnit(n.margin_right||a.margin_right)||"0px"} ${this.addPixelUnit(n.margin_bottom||a.margin_bottom)||"0px"} ${this.addPixelUnit(n.margin_left||a.margin_left)||"0px"}`:"0",background:n.background_color&&"transparent"!==n.background_color?n.background_color:a.background_color&&"transparent"!==a.background_color?a.background_color:"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},a),n),t),backgroundSize:n.background_size||a.background_size||"cover",backgroundPosition:n.background_position||a.background_position||"center",backgroundRepeat:n.background_repeat||a.background_repeat||"no-repeat",border:(n.border_style||a.border_style)&&"none"!==(n.border_style||a.border_style)?`${this.addPixelUnit(n.border_width||a.border_width)||"1px"} ${n.border_style||a.border_style} ${n.border_color||a.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(n.border_radius||a.border_radius)||"0",position:n.position||a.position||"static",top:n.top||a.top||"auto",bottom:n.bottom||a.bottom||"auto",left:n.left||a.left||"auto",right:n.right||a.right||"auto",zIndex:n.z_index||a.z_index||"auto",width:n.width||a.width||"100%",height:n.height||a.height||"auto",maxWidth:n.max_width||a.max_width||"100%",maxHeight:n.max_height||a.max_height||"none",minWidth:n.min_width||a.min_width||"none",minHeight:n.min_height||a.min_height||"auto",overflow:n.overflow||a.overflow||"visible",clipPath:n.clip_path||a.clip_path||"none",backdropFilter:n.backdrop_filter||a.backdrop_filter||"none",boxShadow:n.box_shadow_h&&n.box_shadow_v?`${n.box_shadow_h||"0"} ${n.box_shadow_v||"0"} ${n.box_shadow_blur||"0"} ${n.box_shadow_spread||"0"} ${n.box_shadow_color||"rgba(0,0,0,0.1)"}`:a.box_shadow_h&&a.box_shadow_v?`${a.box_shadow_h||"0"} ${a.box_shadow_v||"0"} ${a.box_shadow_blur||"0"} ${a.box_shadow_spread||"0"} ${a.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"},l={fontSize:n.font_size&&n.font_size||(a.font_size?`${a.font_size}px`:`${o.font_size||14}px`),fontFamily:n.font_family||a.font_family||o.font_family||"Roboto",color:n&&n.color||a.color||o.color||"var(--primary-text-color)",textAlign:(n.text_align&&"inherit"!==n.text_align?n.text_align:void 0)||a.text_align||o.alignment||"left",lineHeight:n.line_height||a.line_height||o.line_height||1.6,letterSpacing:n.letter_spacing||a.letter_spacing||o.letter_spacing||"normal",padding:n.padding_top||n.padding_bottom||n.padding_left||n.padding_right||a.padding_top||a.padding_bottom||a.padding_left||a.padding_right?`${this.addPixelUnit(n.padding_top||a.padding_top)||"8px"} ${this.addPixelUnit(n.padding_right||a.padding_right)||"0px"} ${this.addPixelUnit(n.padding_bottom||a.padding_bottom)||"8px"} ${this.addPixelUnit(n.padding_left||a.padding_left)||"0px"}`:"8px 0",maxHeight:(n.max_height&&"none"!==n.max_height?n.max_height:void 0)||(o.max_height&&"none"!==o.max_height?o.max_height:"none"),overflow:(n.max_height&&"none"!==n.max_height?n.overflow||"visible":void 0)||o.max_height&&"none"!==o.max_height&&o.overflow_behavior||"visible",textShadow:n.text_shadow_h&&n.text_shadow_v?`${n.text_shadow_h||"0"} ${n.text_shadow_v||"0"} ${n.text_shadow_blur||"0"} ${n.text_shadow_color||"rgba(0,0,0,0.5)"}`:a.text_shadow_h&&a.text_shadow_v?`${a.text_shadow_h||"0"} ${a.text_shadow_v||"0"} ${a.text_shadow_blur||"0"} ${a.text_shadow_color||"rgba(0,0,0,0.5)"}`:"none",boxShadow:n.box_shadow_h&&n.box_shadow_v?`${n.box_shadow_h||"0"} ${n.box_shadow_v||"0"} ${n.box_shadow_blur||"0"} ${n.box_shadow_spread||"0"} ${n.box_shadow_color||"rgba(0,0,0,0.1)"}`:a.box_shadow_h&&a.box_shadow_v?`${a.box_shadow_h||"0"} ${a.box_shadow_v||"0"} ${a.box_shadow_blur||"0"} ${a.box_shadow_spread||"0"} ${a.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none"},d=o.template_mode&&o.template?`Template: ${o.template}`:(e=>{if(!e)return"";let t=e.replace(/^#{6} (.*$)/gim,"<h6>$1</h6>").replace(/^#{5} (.*$)/gim,"<h5>$1</h5>").replace(/^#{4} (.*$)/gim,"<h4>$1</h4>").replace(/^#{3} (.*$)/gim,"<h3>$1</h3>").replace(/^#{2} (.*$)/gim,"<h2>$1</h2>").replace(/^#{1} (.*$)/gim,"<h1>$1</h1>").replace(/\*\*\*(.*?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>').replace(/^> (.*$)/gim,"<blockquote>$1</blockquote>").replace(/^---$/gim,"<hr>").replace(/^\*\*\*$/gim,"<hr>").replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br/>");return t="<p>"+t+"</p>",t=t.replace(/<p><\/p>/g,""),t=t.replace(/<p>(<h[1-6]>.*?<\/h[1-6]>)<\/p>/g,"$1"),t=t.replace(/<p>(<blockquote>.*?<\/blockquote>)<\/p>/g,"$1"),t=t.replace(/<p>(<hr>)<\/p>/g,"$1"),t=t.replace(/^[-*+] (.*$)/gim,"<li>$1</li>"),t=t.replace(/^(\d+)\. (.*$)/gim,"<li>$2</li>"),t=t.replace(/(<li>[\s\S]*?<\/li>(?:\s*<li>[\s\S]*?<\/li>)*)/g,"<ul>$1</ul>"),t})(o.markdown_content||"");let c=null,p=null,u=!1,h=0,m=0;const g=o.link&&""!==o.link.trim()?i.qy`<a href="${o.link}" style="color: inherit; text-decoration: inherit;">
            <div class="markdown-content" .innerHTML=${d}></div>
          </a>`:i.qy`<div class="markdown-content" .innerHTML=${d}></div>`;return i.qy`
      <div
        class="markdown-module-container"
        style="${this.styleObjectToCss(s)}; cursor: ${o.tap_action&&"nothing"!==o.tap_action.action||o.hold_action&&"nothing"!==o.hold_action.action||o.double_tap_action&&"nothing"!==o.double_tap_action.action?"pointer":"default"};"
        @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),u=!1,p=setTimeout((()=>{u=!0,o.hold_action&&"nothing"!==o.hold_action.action&&r.K.handleAction(o.hold_action,t,e.target)}),500)}}
        @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),p&&(clearTimeout(p),p=null),u)return void(u=!1);const i=Date.now();i-m<300&&1===h?(c&&(clearTimeout(c),c=null),h=0,o.double_tap_action&&"nothing"!==o.double_tap_action.action&&r.K.handleAction(o.double_tap_action,t,e.target)):(h=1,m=i,c=setTimeout((()=>{h=0,o.tap_action&&"nothing"!==o.tap_action.action&&r.K.handleAction(o.tap_action,t,e.target)}),300))}}
      >
        <div class="markdown-module-preview" style=${this.styleObjectToCss(l)}>
          ${g}
        </div>
      </div>
    `}validate(e){const t=e,o=[...super.validate(e).errors];if(t.markdown_content&&""!==t.markdown_content.trim()||o.push("Markdown content is required"),t.font_size&&(t.font_size<1||t.font_size>200)&&o.push("Font size must be between 1 and 200 pixels"),t.link&&""!==t.link.trim())try{new URL(t.link)}catch(e){t.link.startsWith("/")||t.link.startsWith("#")||o.push('Link must be a valid URL or start with "/" for relative paths')}return{valid:0===o.length,errors:o}}getStyles(){return"\n      .markdown-module-preview {\n        min-height: 20px;\n        word-wrap: break-word;\n      }\n      \n      .markdown-module-hidden {\n        color: var(--secondary-text-color);\n        font-style: italic;\n        text-align: center;\n        padding: 12px;\n        background: var(--secondary-background-color);\n        border-radius: 4px;\n      }\n\n      .markdown-content {\n        width: 100%;\n      }\n      \n             /* Module-specific grid layouts */\n       .two-column-grid {\n         display: grid;\n         grid-template-columns: 1fr 1fr;\n         gap: 20px;\n         margin-bottom: 20px;\n       }\n\n       .three-column-grid {\n         display: grid;\n         grid-template-columns: 1fr 1fr 1fr;\n         gap: 16px;\n         margin-bottom: 20px;\n       }\n       \n       @media (max-width: 768px) {\n         .two-column-grid,\n         .three-column-grid {\n           grid-template-columns: 1fr;\n           gap: 16px;\n         }\n       }\n\n      .markdown-content h1,\n      .markdown-content h2,\n      .markdown-content h3,\n      .markdown-content h4,\n      .markdown-content h5,\n      .markdown-content h6 {\n        margin: 16px 0 8px 0;\n        font-weight: 600;\n        line-height: 1.2;\n      }\n\n      .markdown-content h1 { font-size: 2em; }\n      .markdown-content h2 { font-size: 1.5em; }\n      .markdown-content h3 { font-size: 1.25em; }\n      .markdown-content h4 { font-size: 1.1em; }\n      .markdown-content h5 { font-size: 1em; font-weight: 700; }\n      .markdown-content h6 { font-size: 0.9em; font-weight: 700; }\n\n      .markdown-content p {\n        margin: 8px 0;\n        line-height: inherit;\n      }\n\n      .markdown-content ul,\n      .markdown-content ol {\n        margin: 8px 0;\n        padding-left: 20px;\n      }\n\n      .markdown-content li {\n        margin: 4px 0;\n        line-height: inherit;\n      }\n\n      .markdown-content code {\n        background: var(--secondary-background-color);\n        padding: 2px 4px;\n        border-radius: 3px;\n        font-family: 'Courier New', monospace;\n        font-size: 0.9em;\n      }\n\n      .markdown-content blockquote {\n        border-left: 4px solid var(--primary-color);\n        margin: 16px 0;\n        padding: 8px 16px;\n        background: var(--secondary-background-color);\n        font-style: italic;\n      }\n\n      .markdown-content a {\n        color: var(--primary-color);\n        text-decoration: none;\n      }\n\n      .markdown-content a:hover {\n        text-decoration: underline;\n      }\n\n      .markdown-content strong {\n        font-weight: 600;\n      }\n\n      .markdown-content em {\n        font-style: italic;\n      }\n\n      .markdown-content br {\n        line-height: inherit;\n      }\n      \n      .markdown-content hr {\n        border: none;\n        border-top: 1px solid var(--divider-color);\n        margin: 16px 0;\n      }\n      \n      .markdown-content table {\n        border-collapse: collapse;\n        width: 100%;\n        margin: 16px 0;\n      }\n      \n      .markdown-content th,\n      .markdown-content td {\n        border: 1px solid var(--divider-color);\n        padding: 8px 12px;\n        text-align: left;\n      }\n      \n      .markdown-content th {\n        background: var(--secondary-background-color);\n        font-weight: 600;\n      }\n    "}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}getBackgroundImageCSS(e,t){var o,i;const a=e.background_image_type,n=e.background_image,r=e.background_image_entity;if(!a||"none"===a)return"none";switch(a){case"upload":if(n)return`url("${(0,s.V)(t,n)}")`;break;case"url":if(n)return`url("${n}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const a=(null===(o=e.attributes)||void 0===o?void 0:o.entity_picture)||(null===(i=e.attributes)||void 0===i?void 0:i.image)||("string"==typeof e.state?e.state:"");if(a&&"unknown"!==a&&"unavailable"!==a)return`url("${(0,s.V)(t,a)}")`}}}return"none"}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}}},101:(e,t,o)=>{o.d(t,{b:()=>d});var i=o(183),a=o(30),n=o(796),r=o(381),s=o(341),l=o(456);class d extends a.m{constructor(){super(...arguments),this.metadata={type:"horizontal",title:"Horizontal Layout",description:"Arrange modules in rows with flexible horizontal and vertical alignment and spacing",author:"WJD Designs",version:"1.0.0",icon:"mdi:view-column",category:"layout",tags:["layout","horizontal","vertical","alignment","container","flexbox"]}}createDefault(e,t){return{id:e||this.generateId("horizontal"),type:"horizontal",gap:.7,wrap:!1,modules:[],tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"}}}renderGeneralTab(e,t,o,a){var n;const r=e,s=(null===(n=null==t?void 0:t.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}

      <div class="module-general-settings">
        <!-- Layout Configuration Section -->
        ${this.renderSettingsSection((0,l.kg)("editor.horizontal.layout.title",s,"Layout Configuration"),(0,l.kg)("editor.horizontal.layout.desc",s,"Configure how items are arranged horizontally within the container."),[{title:(0,l.kg)("editor.horizontal.alignment.horizontal",s,"Horizontal Alignment"),description:(0,l.kg)("editor.horizontal.alignment.horizontal_desc",s,"Choose how items are aligned horizontally within the container."),hass:t,data:{alignment:r.alignment||"left"},schema:[this.selectField("alignment",[{value:"left",label:(0,l.kg)("editor.common.left",s,"Left")},{value:"center",label:(0,l.kg)("editor.common.center",s,"Center")},{value:"right",label:(0,l.kg)("editor.common.right",s,"Right")},{value:"space-between",label:(0,l.kg)("editor.common.space_between",s,"Space Between")},{value:"space-around",label:(0,l.kg)("editor.common.space_around",s,"Space Around")},{value:"justify",label:(0,l.kg)("editor.common.justify",s,"Justify")}])],onChange:e=>a(e.detail.value)},{title:(0,l.kg)("editor.horizontal.alignment.vertical",s,"Vertical Alignment"),description:(0,l.kg)("editor.horizontal.alignment.vertical_desc",s,"Choose how items are aligned vertically within the container."),hass:t,data:{vertical_alignment:r.vertical_alignment||"top"},schema:[this.selectField("vertical_alignment",[{value:"top",label:(0,l.kg)("editor.common.top",s,"Top")},{value:"center",label:(0,l.kg)("editor.common.center",s,"Center")},{value:"bottom",label:(0,l.kg)("editor.common.bottom",s,"Bottom")},{value:"stretch",label:(0,l.kg)("editor.common.stretch",s,"Stretch")},{value:"baseline",label:(0,l.kg)("editor.common.baseline",s,"Baseline")}])],onChange:e=>a(e.detail.value)},{title:(0,l.kg)("editor.horizontal.wrapping.title",s,"Allow Wrapping"),description:(0,l.kg)("editor.horizontal.wrapping.desc",s,"Allow items to wrap to the next line when they exceed the container width."),hass:t,data:{wrap:r.wrap||!1},schema:[this.booleanField("wrap")],onChange:e=>a(e.detail.value)}])}

        <!-- Gap Between Items Field with Custom Slider -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,l.kg)("editor.horizontal.gap.title",s,"Gap Configuration")}
          </div>

          <div style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
            >
              ${(0,l.kg)("editor.horizontal.gap.between_items",s,"Gap Between Items")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
            >
              ${(0,l.kg)("editor.horizontal.gap.desc",s,"Set the spacing between horizontal items (in rem units). Use negative values to overlap items.")}
            </div>
            <div
              class="gap-control-container"
              style="display: flex; align-items: center; gap: 12px;"
            >
              <input
                type="range"
                class="gap-slider"
                min="-5"
                max="10"
                step="0.1"
                .value="${r.gap||.7}"
                @input=${e=>{const t=e.target,o=parseFloat(t.value);a({gap:o})}}
              />
              <input
                type="number"
                class="gap-input"
                style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                min="-5"
                max="10"
                step="0.1"
                .value="${r.gap||.7}"
                @input=${e=>{const t=e.target,o=parseFloat(t.value);isNaN(o)||a({gap:o})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseFloat(t.value)||.7,i="ArrowUp"===e.key?.1:-.1,n=Math.max(-5,Math.min(10,o+i)),r=Math.round(10*n)/10;a({gap:r})}}}
              />
              <button
                class="reset-btn"
                @click=${()=>a({gap:.7})}
                title="${(0,l.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","0.7")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    `}renderPreview(e,t){var o;const a=e,r=(null===(o=null==t?void 0:t.locale)||void 0===o?void 0:o.language)||"en",s=a,d=Object.assign(Object.assign({},s),s.design||{}),c=a.modules&&a.modules.length>0,p=!!a.wrap,u=a.gap||.7,h=void 0!==a.alignment&&null!==a.alignment?a.alignment:p?"center":"left",m={padding:this.getPaddingCSS(d),margin:this.getMarginCSS(d),background:this.getBackgroundCSS(d),backgroundImage:this.getBackgroundImageCSS(d,t),backgroundSize:d.background_size||"cover",backgroundPosition:d.background_position||"center",backgroundRepeat:d.background_repeat||"no-repeat",border:d.border_width?this.getBorderCSS(d):"none",borderRadius:this.addPixelUnit(d.border_radius)||"0",display:"flex",flexDirection:p?"column":"row",justifyContent:p?(_=a.vertical_alignment||"top","top"===_?"flex-start":"bottom"===_?"flex-end":"center"):this.getJustifyContent(h||d.text_align||"left"),gap:u>=0?`${u}rem`:"0",flexWrap:"nowrap",alignItems:p?(g=h||"center","left"===g?"flex-start":"right"===g?"flex-end":"center"===g?"center":"stretch"):this.getAlignItems(a.vertical_alignment||"top"),width:"100%",minHeight:"0",overflowX:"visible",overflowY:"visible",boxSizing:"border-box"};var g,_;let b=null,v=null,f=!1,y=0,x=0;return i.qy`
      <style>
        ${this.getStyles()}
      </style>
      <div class="horizontal-module-preview">
        <div
          class="horizontal-preview-content"
          style="${this.styleObjectToCss(m)}; cursor: ${a.tap_action&&"nothing"!==a.tap_action.action||a.hold_action&&"nothing"!==a.hold_action.action||a.double_tap_action&&"nothing"!==a.double_tap_action.action?"pointer":"default"};"
          data-wrap=${p?"true":"false"}
          @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),f=!1,v=setTimeout((()=>{f=!0,a.hold_action&&"nothing"!==a.hold_action.action&&n.K.handleAction(a.hold_action,t,e.target)}),500)}}
          @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),v&&(clearTimeout(v),v=null),f)return void(f=!1);const o=Date.now();o-x<300&&1===y?(b&&(clearTimeout(b),b=null),y=0,a.double_tap_action&&"nothing"!==a.double_tap_action.action&&n.K.handleAction(a.double_tap_action,t,e.target)):(y=1,x=o,b=setTimeout((()=>{y=0,a.tap_action&&"nothing"!==a.tap_action.action&&n.K.handleAction(a.tap_action,t,e.target)}),300))}}
        >
          ${c?a.modules.map(((e,o)=>{const n=u<0&&o>0?p?`${u}rem 0 0 0`:`0 0 0 ${u}rem`:"0",r=u<0,l="bar"===(null==e?void 0:e.type),d="justify"===a.alignment,c=p?0:l||d?1:0,h=p?0:l?1:0,m=p?"auto":l?"0":"content",g=p?"0":l?"80px":"0",_=p&&l?"100%":"auto",b=p&&l?"stretch":"auto";return i.qy`
                  <div
                    class="child-module-preview ${r?"negative-gap":""}"
                    style="
                          max-width: ${a.wrap?"100%":"none"};
                          overflow: visible;
                          flex-grow: ${c};
                          flex-shrink: ${h};
                          flex-basis: ${m};
                          min-width: ${g};
                          width: ${_};
                          align-self: ${b};
                          box-sizing: border-box;
                          margin: ${n};
                          ${r?"padding: 0; border: none; background: transparent;":""}
                        "
                  >
                    ${this._renderChildModulePreview(e,t,s)}
                  </div>
                `})):i.qy`
                <div class="empty-layout-message">
                  <span
                    >${(0,l.kg)("editor.horizontal.empty.no_modules",r,"No modules added yet")}</span
                  >
                  <small
                    >${(0,l.kg)("editor.horizontal.empty.add_modules",r,"Add modules in the layout builder to see them here")}</small
                  >
                </div>
              `}
        </div>
      </div>
    `}_renderChildModulePreview(e,t,o){let a=e;o&&(a=this.applyLayoutDesignToChild(e,o));const n=o;if(n&&n.alignment){const e=a;e.alignment||(e.alignment=n.alignment)}const r=(0,s.oD)().getModule(a.type);return r?r.renderPreview(a,t):i.qy`
      <div class="unknown-child-module">
        <ha-icon icon="mdi:help-circle"></ha-icon>
        <span>Unknown Module: ${a.type}</span>
      </div>
    `}applyLayoutDesignToChild(e,t){const o=Object.assign({},e);return t.color&&(o.color=t.color),t.font_size&&(o.font_size=t.font_size),t.font_family&&(o.font_family=t.font_family),t.font_weight&&(o.font_weight=t.font_weight),t.text_align&&(o.text_align=t.text_align),t.line_height&&(o.line_height=t.line_height),t.letter_spacing&&(o.letter_spacing=t.letter_spacing),t.text_transform&&(o.text_transform=t.text_transform),t.font_style&&(o.font_style=t.font_style),t.background_color&&(o.background_color=t.background_color),t.background_image&&(o.background_image=t.background_image),t.backdrop_filter&&(o.backdrop_filter=t.backdrop_filter),t.width&&(o.width=t.width),t.height&&(o.height=t.height),t.max_width&&(o.max_width=t.max_width),t.max_height&&(o.max_height=t.max_height),t.min_width&&(o.min_width=t.min_width),t.min_height&&(o.min_height=t.min_height),t.margin_top&&(o.margin_top=t.margin_top),t.margin_bottom&&(o.margin_bottom=t.margin_bottom),t.margin_left&&(o.margin_left=t.margin_left),t.margin_right&&(o.margin_right=t.margin_right),t.padding_top&&(o.padding_top=t.padding_top),t.padding_bottom&&(o.padding_bottom=t.padding_bottom),t.padding_left&&(o.padding_left=t.padding_left),t.padding_right&&(o.padding_right=t.padding_right),t.border_radius&&(o.border_radius=t.border_radius),t.border_style&&(o.border_style=t.border_style),t.border_width&&(o.border_width=t.border_width),t.border_color&&(o.border_color=t.border_color),t.text_shadow_h&&(o.text_shadow_h=t.text_shadow_h),t.text_shadow_v&&(o.text_shadow_v=t.text_shadow_v),t.text_shadow_blur&&(o.text_shadow_blur=t.text_shadow_blur),t.text_shadow_color&&(o.text_shadow_color=t.text_shadow_color),t.box_shadow_h&&(o.box_shadow_h=t.box_shadow_h),t.box_shadow_v&&(o.box_shadow_v=t.box_shadow_v),t.box_shadow_blur&&(o.box_shadow_blur=t.box_shadow_blur),t.box_shadow_spread&&(o.box_shadow_spread=t.box_shadow_spread),t.box_shadow_color&&(o.box_shadow_color=t.box_shadow_color),t.position&&(o.position=t.position),t.top&&(o.top=t.top),t.bottom&&(o.bottom=t.bottom),t.left&&(o.left=t.left),t.right&&(o.right=t.right),t.z_index&&(o.z_index=t.z_index),t.overflow&&(o.overflow=t.overflow),t.clip_path&&(o.clip_path=t.clip_path),t.animation_type&&(o.animation_type=t.animation_type),t.animation_entity&&(o.animation_entity=t.animation_entity),t.animation_trigger_type&&(o.animation_trigger_type=t.animation_trigger_type),t.animation_attribute&&(o.animation_attribute=t.animation_attribute),t.animation_state&&(o.animation_state=t.animation_state),t.intro_animation&&(o.intro_animation=t.intro_animation),t.outro_animation&&(o.outro_animation=t.outro_animation),t.animation_duration&&(o.animation_duration=t.animation_duration),t.animation_delay&&(o.animation_delay=t.animation_delay),t.animation_timing&&(o.animation_timing=t.animation_timing),t.alignment&&(o.alignment=t.alignment),o}validate(e){const t=e,o=[...super.validate(e).errors];if(t.gap&&(t.gap<-5||t.gap>10)&&o.push("Gap must be between -5 and 10 rem"),t.vertical_alignment&&!["top","center","bottom","stretch","baseline"].includes(t.vertical_alignment)&&o.push("Vertical alignment must be one of: top, center, bottom, stretch, baseline"),t.modules&&t.modules.length>0)for(const e of t.modules)"vertical"===e.type&&o.push("Vertical layout modules cannot be placed inside horizontal layout modules"),"horizontal"===e.type&&o.push("Horizontal layout modules cannot be nested inside other horizontal layout modules");return{valid:0===o.length,errors:o}}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"8px"} ${this.addPixelUnit(e.padding_right)||"8px"} ${this.addPixelUnit(e.padding_bottom)||"8px"} ${this.addPixelUnit(e.padding_left)||"8px"}`:"8px"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"0"} ${this.addPixelUnit(e.margin_right)||"0"} ${this.addPixelUnit(e.margin_bottom)||"0"} ${this.addPixelUnit(e.margin_left)||"0"}`:"0"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){var o,i;if(!e.background_image_type||"none"===e.background_image_type)return e.background_image?`url("${e.background_image}")`:"none";switch(e.background_image_type){case"upload":if(e.background_image)return`url("${(0,r.V)(t,e.background_image)}")`;break;case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const a=t.states[e.background_image_entity];let n="";if((null===(o=a.attributes)||void 0===o?void 0:o.entity_picture)?n=a.attributes.entity_picture:(null===(i=a.attributes)||void 0===i?void 0:i.image)?n=a.attributes.image:a.state&&"string"==typeof a.state&&(a.state.startsWith("/")||a.state.startsWith("http"))&&(n=a.state),n)return`url("${(0,r.V)(t,n)}")`}}return"none"}getBorderCSS(e){return`${this.addPixelUnit(e.border_width)||"0"} ${e.border_style||"solid"} ${e.border_color||"transparent"}`}getJustifyContent(e){switch(e){case"left":default:return"flex-start";case"center":return"center";case"right":return"flex-end";case"space-between":case"justify":return"space-between";case"space-around":return"space-around"}}getAlignItems(e){switch(e){case"top":default:return"flex-start";case"center":return"center";case"bottom":return"flex-end";case"stretch":return"stretch";case"baseline":return"baseline"}}getStyles(){return'\n      /* Horizontal Module Styles */\n      .horizontal-module-preview {\n        width: 100%;\n        min-height: 0;\n      }\n\n      .horizontal-preview-content {\n        background: transparent;\n        border-radius: 6px;\n        border: none;\n        transition: all 0.2s ease;\n      }\n\n      .child-module-preview {\n        background: transparent;\n        border: none;\n        border-radius: 4px;\n        padding: 0;\n        transition: all 0.2s ease;\n        /* Ensure modules maintain readable size */\n        min-width: max-content;\n        min-height: 0;\n        overflow: visible;\n        box-sizing: border-box;\n      }\n\n      .child-module-preview.negative-gap {\n        background: transparent !important;\n        border: none !important;\n        border-radius: 0 !important;\n        padding: 0 !important;\n      }\n\n      .child-module-preview.negative-gap:hover {\n        border: none !important;\n        box-shadow: none !important;\n      }\n\n      .child-module-preview:hover {\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n        transform: translateY(-1px);\n      }\n\n      .empty-layout-message {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 4px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n        text-align: center;\n        width: 100%;\n        padding: 20px;\n      }\n\n      .empty-layout-message span {\n        font-size: 14px;\n        font-weight: 500;\n      }\n\n      .empty-layout-message small {\n        font-size: 12px;\n        opacity: 0.8;\n      }\n\n      .unknown-child-module {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n      }\n\n      /* Ensure module defaults play nicely in a horizontal row */\n      .child-module-preview .icon-module-preview {\n        /* Icon modules should size to content in rows */\n        width: auto !important;\n        max-width: 100% !important;\n      }\n\n      .child-module-preview .icon-module-container {\n        /* Override any inline width from icon module when inside horizontal rows */\n        width: auto !important;\n        max-width: 100% !important;\n        flex: 0 0 auto !important;\n      }\n\n      .child-module-preview .bar-module-preview {\n        /* Bars should expand to available space in rows */\n        width: 100% !important;\n        max-width: 100% !important;\n      }\n\n      /* Special handling for compressed layouts */\n      .horizontal-preview-content:not([data-wrap="true"]) .child-module-preview {\n        flex-basis: 0;\n        flex-grow: 1;\n        max-width: none;\n      }\n\n      /* Ensure icons and text compress nicely, but don\'t hide overflow for positioned overlays */\n      .horizontal-preview-content:not([data-wrap="true"]) .child-module-preview * {\n        max-width: 100% !important;\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n        \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Custom Range Slider Styling */\n      input[type="range"] {\n        -webkit-appearance: none;\n        appearance: none;\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        outline: none;\n        opacity: 0.7;\n        transition: opacity 0.2s;\n      }\n\n      input[type="range"]:hover {\n        opacity: 1;\n      }\n\n      input[type="range"]::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        appearance: none;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-webkit-slider-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-moz-range-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-track {\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        border: none;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    '}}},183:(e,t,o)=>{o.d(t,{WF:()=>n,AH:()=>i.AH,qy:()=>a.qy,JW:()=>a.JW});var i=o(885),a=o(247);class n extends i.mN{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,a.XX)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return a.c0}}n._$litElement$=!0,n.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:n});const r=globalThis.litElementPolyfillSupport;r?.({LitElement:n}),(globalThis.litElementVersions??=[]).push("4.1.1")},201:(e,t,o)=>{o.d(t,{OA:()=>i,WL:()=>n,u$:()=>a});const i={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},a=e=>(...t)=>({_$litDirective$:e,values:t});class n{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}},247:(e,t,o)=>{o.d(t,{JW:()=>C,XX:()=>F,c0:()=>S,ge:()=>j,qy:()=>$,s6:()=>A});const i=globalThis,a=i.trustedTypes,n=a?a.createPolicy("lit-html",{createHTML:e=>e}):void 0,r="$lit$",s=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+s,d=`<${l}>`,c=document,p=()=>c.createComment(""),u=e=>null===e||"object"!=typeof e&&"function"!=typeof e,h=Array.isArray,m=e=>h(e)||"function"==typeof e?.[Symbol.iterator],g="[ \t\n\f\r]",_=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,b=/-->/g,v=/>/g,f=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),y=/'/g,x=/"/g,w=/^(?:script|style|textarea|title)$/i,k=e=>(t,...o)=>({_$litType$:e,strings:t,values:o}),$=k(1),C=k(2),S=(k(3),Symbol.for("lit-noChange")),A=Symbol.for("lit-nothing"),T=new WeakMap,z=c.createTreeWalker(c,129);function I(e,t){if(!h(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==n?n.createHTML(t):t}const D=(e,t)=>{const o=e.length-1,i=[];let a,n=2===t?"<svg>":3===t?"<math>":"",l=_;for(let t=0;t<o;t++){const o=e[t];let c,p,u=-1,h=0;for(;h<o.length&&(l.lastIndex=h,p=l.exec(o),null!==p);)h=l.lastIndex,l===_?"!--"===p[1]?l=b:void 0!==p[1]?l=v:void 0!==p[2]?(w.test(p[2])&&(a=RegExp("</"+p[2],"g")),l=f):void 0!==p[3]&&(l=f):l===f?">"===p[0]?(l=a??_,u=-1):void 0===p[1]?u=-2:(u=l.lastIndex-p[2].length,c=p[1],l=void 0===p[3]?f:'"'===p[3]?x:y):l===x||l===y?l=f:l===b||l===v?l=_:(l=f,a=void 0);const m=l===f&&e[t+1].startsWith("/>")?" ":"";n+=l===_?o+d:u>=0?(i.push(c),o.slice(0,u)+r+o.slice(u)+s+m):o+s+(-2===u?t:m)}return[I(e,n+(e[o]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),i]};class L{constructor({strings:e,_$litType$:t},o){let i;this.parts=[];let n=0,d=0;const c=e.length-1,u=this.parts,[h,m]=D(e,t);if(this.el=L.createElement(h,o),z.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=z.nextNode())&&u.length<c;){if(1===i.nodeType){if(i.hasAttributes())for(const e of i.getAttributeNames())if(e.endsWith(r)){const t=m[d++],o=i.getAttribute(e).split(s),a=/([.?@])?(.*)/.exec(t);u.push({type:1,index:n,name:a[2],strings:o,ctor:"."===a[1]?O:"?"===a[1]?U:"@"===a[1]?N:R}),i.removeAttribute(e)}else e.startsWith(s)&&(u.push({type:6,index:n}),i.removeAttribute(e));if(w.test(i.tagName)){const e=i.textContent.split(s),t=e.length-1;if(t>0){i.textContent=a?a.emptyScript:"";for(let o=0;o<t;o++)i.append(e[o],p()),z.nextNode(),u.push({type:2,index:++n});i.append(e[t],p())}}}else if(8===i.nodeType)if(i.data===l)u.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf(s,e+1));)u.push({type:7,index:n}),e+=s.length-1}n++}}static createElement(e,t){const o=c.createElement("template");return o.innerHTML=e,o}}function E(e,t,o=e,i){if(t===S)return t;let a=void 0!==i?o._$Co?.[i]:o._$Cl;const n=u(t)?void 0:t._$litDirective$;return a?.constructor!==n&&(a?._$AO?.(!1),void 0===n?a=void 0:(a=new n(e),a._$AT(e,o,i)),void 0!==i?(o._$Co??=[])[i]=a:o._$Cl=a),void 0!==a&&(t=E(e,a._$AS(e,t.values),a,i)),t}class M{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:o}=this._$AD,i=(e?.creationScope??c).importNode(t,!0);z.currentNode=i;let a=z.nextNode(),n=0,r=0,s=o[0];for(;void 0!==s;){if(n===s.index){let t;2===s.type?t=new P(a,a.nextSibling,this,e):1===s.type?t=new s.ctor(a,s.name,s.strings,this,e):6===s.type&&(t=new B(a,this,e)),this._$AV.push(t),s=o[++r]}n!==s?.index&&(a=z.nextNode(),n++)}return z.currentNode=c,i}p(e){let t=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class P{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,o,i){this.type=2,this._$AH=A,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=E(this,e,t),u(e)?e===A||null==e||""===e?(this._$AH!==A&&this._$AR(),this._$AH=A):e!==this._$AH&&e!==S&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):m(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==A&&u(this._$AH)?this._$AA.nextSibling.data=e:this.T(c.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:o}=e,i="number"==typeof o?this._$AC(e):(void 0===o.el&&(o.el=L.createElement(I(o.h,o.h[0]),this.options)),o);if(this._$AH?._$AD===i)this._$AH.p(t);else{const e=new M(i,this),o=e.u(this.options);e.p(t),this.T(o),this._$AH=e}}_$AC(e){let t=T.get(e.strings);return void 0===t&&T.set(e.strings,t=new L(e)),t}k(e){h(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,i=0;for(const a of e)i===t.length?t.push(o=new P(this.O(p()),this.O(p()),this,this.options)):o=t[i],o._$AI(a),i++;i<t.length&&(this._$AR(o&&o._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class R{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,o,i,a){this.type=1,this._$AH=A,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=a,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=A}_$AI(e,t=this,o,i){const a=this.strings;let n=!1;if(void 0===a)e=E(this,e,t,0),n=!u(e)||e!==this._$AH&&e!==S,n&&(this._$AH=e);else{const i=e;let r,s;for(e=a[0],r=0;r<a.length-1;r++)s=E(this,i[o+r],t,r),s===S&&(s=this._$AH[r]),n||=!u(s)||s!==this._$AH[r],s===A?e=A:e!==A&&(e+=(s??"")+a[r+1]),this._$AH[r]=s}n&&!i&&this.j(e)}j(e){e===A?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class O extends R{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===A?void 0:e}}class U extends R{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==A)}}class N extends R{constructor(e,t,o,i,a){super(e,t,o,i,a),this.type=5}_$AI(e,t=this){if((e=E(this,e,t,0)??A)===S)return;const o=this._$AH,i=e===A&&o!==A||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,a=e!==A&&(o===A||i);i&&this.element.removeEventListener(this.name,this,o),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class B{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){E(this,e)}}const j={M:r,P:s,A:l,C:1,L:D,R:M,D:m,V:E,I:P,H:R,N:U,U:N,B:O,F:B},H=i.litHtmlPolyfillSupport;H?.(L,P),(i.litHtmlVersions??=[]).push("3.2.1");const F=(e,t,o)=>{const i=o?.renderBefore??t;let a=i._$litPart$;if(void 0===a){const e=o?.renderBefore??null;i._$litPart$=a=new P(t.insertBefore(p(),e),e,void 0,o??{})}return a._$AI(e),a}},276:(e,t,o)=>{o.d(t,{EM:()=>i,MZ:()=>s,wk:()=>l});const i=e=>(t,o)=>{void 0!==o?o.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)};var a=o(885);const n={attribute:!0,type:String,converter:a.W3,reflect:!1,hasChanged:a.Ec},r=(e=n,t,o)=>{const{kind:i,metadata:a}=o;let r=globalThis.litPropertyMetadata.get(a);if(void 0===r&&globalThis.litPropertyMetadata.set(a,r=new Map),r.set(o.name,e),"accessor"===i){const{name:i}=o;return{set(o){const a=t.get.call(this);t.set.call(this,o),this.requestUpdate(i,a,e)},init(t){return void 0!==t&&this.P(i,void 0,e),t}}}if("setter"===i){const{name:i}=o;return function(o){const a=this[i];t.call(this,o),this.requestUpdate(i,a,e)}}throw Error("Unsupported decorator location: "+i)};function s(e){return(t,o)=>"object"==typeof o?r(e,t,o):((e,t,o)=>{const i=t.hasOwnProperty(o);return t.constructor.createProperty(o,i?{...e,wrapped:!0}:e),i?Object.getOwnPropertyDescriptor(t,o):void 0})(e,t,o)}function l(e){return s({...e,state:!0,attribute:!1})}},278:(e,t,o)=>{o.d(t,{O:()=>d});var i=o(183),a=o(30),n=o(914),r=o(662),s=o(796),l=o(456);class d extends a.m{constructor(){super(...arguments),this.metadata={type:"separator",title:"Separator Module",description:"Visual dividers and spacing",author:"WJD Designs",version:"1.0.0",icon:"mdi:minus",category:"content",tags:["separator","divider","spacing","layout"]}}createDefault(e,t){return{id:e||this.generateId("separator"),type:"separator",separator_style:"line",thickness:1,width_percent:100,color:"var(--divider-color)",show_title:!1,title:"",title_size:14,title_color:"var(--secondary-text-color)",title_bold:!1,title_italic:!1,title_uppercase:!1,title_strikethrough:!1,title_underline:!1,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},enable_hover_effect:!0,hover_background_color:"var(--divider-color)"}}renderGeneralTab(e,t,o,a){var r;const s=e,d=(null===(r=t.locale)||void 0===r?void 0:r.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Separator Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,l.kg)("editor.separator.config.title",d,"Separator Configuration")}
          </div>

          <!-- Separator Style -->
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,l.kg)("editor.separator.style.title",d,"Separator Style")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
          >
            ${(0,l.kg)("editor.separator.style.desc",d,"Choose the visual style of the separator line.")}
          </div>
          <ha-form
            .hass=${t}
            .data=${{separator_style:s.separator_style||"line"}}
            .schema=${[{name:"separator_style",selector:{select:{options:[{value:"line",label:(0,l.kg)("editor.separator.options.solid",d,"Solid Line")},{value:"double_line",label:(0,l.kg)("editor.separator.options.double",d,"Double Line")},{value:"dotted",label:(0,l.kg)("editor.separator.options.dotted",d,"Dotted Line")},{value:"double_dotted",label:(0,l.kg)("editor.separator.options.double_dotted",d,"Double Dotted")},{value:"shadow",label:(0,l.kg)("editor.separator.options.shadow",d,"Shadow")},{value:"blank",label:(0,l.kg)("editor.separator.options.blank",d,"Blank Space")}],mode:"dropdown"}},label:""}]}
            @value-changed=${e=>{const t=e.detail.value.separator_style,o={separator_style:t};"blank"===t&&(o.show_title=!1),a(o)}}
          ></ha-form>
        </div>

        <!-- Appearance Configuration -->
        ${"blank"!==s.separator_style?i.qy`
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
              >
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
                >
                  ${(0,l.kg)("editor.separator.appearance.title",d,"Appearance")}
                </div>

                <!-- Thickness -->
                <div class="field-container" style="margin-bottom: 24px;">
                  <div class="field-title">
                    ${(0,l.kg)("editor.separator.thickness",d,"Thickness (px)")}
                  </div>
                  <div class="field-description">
                    ${(0,l.kg)("editor.separator.thickness_desc",d,"Thickness of the separator line.")}
                  </div>
                  <div
                    class="gap-control-container"
                    style="display: flex; align-items: center; gap: 12px;"
                  >
                    <input
                      type="range"
                      class="gap-slider"
                      min="1"
                      max="20"
                      step="1"
                      .value="${s.thickness||1}"
                      @input=${e=>{const t=e.target,o=parseFloat(t.value);a({thickness:o})}}
                    />
                    <input
                      type="number"
                      class="gap-input"
                      min="1"
                      max="20"
                      step="1"
                      .value="${s.thickness||1}"
                      @input=${e=>{const t=e.target,o=parseFloat(t.value);isNaN(o)||a({thickness:o})}}
                      @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseFloat(t.value)||1,i="ArrowUp"===e.key?1:-1,n=Math.max(1,Math.min(20,o+i));a({thickness:n})}}}
                    />
                    <button
                      class="reset-btn"
                      @click=${()=>a({thickness:1})}
                      title=${(0,l.kg)("editor.fields.reset_default_value",d,"Reset to default ({value})").replace("{value}","1")}
                    >
                      <ha-icon icon="mdi:refresh"></ha-icon>
                    </button>
                  </div>
                </div>

                <!-- Width -->
                ${"shadow"===s.separator_style||"blank"===s.separator_style?i.qy``:i.qy`
                      <div class="field-container" style="margin-bottom: 24px;">
                        <div class="field-title">
                          ${(0,l.kg)("editor.separator.width",d,"Width (%)")}
                        </div>
                        <div class="field-description">
                          ${(0,l.kg)("editor.separator.width_desc",d,"Width of the separator as percentage of container.")}
                        </div>
                        <div
                          class="gap-control-container"
                          style="display: flex; align-items: center; gap: 12px;"
                        >
                          <input
                            type="range"
                            class="gap-slider"
                            min="10"
                            max="100"
                            step="5"
                            .value="${s.width_percent||100}"
                            @input=${e=>{const t=e.target,o=parseFloat(t.value);a({width_percent:o})}}
                          />
                          <input
                            type="number"
                            class="gap-input"
                            min="10"
                            max="100"
                            step="5"
                            .value="${s.width_percent||100}"
                            @input=${e=>{const t=e.target,o=parseFloat(t.value);isNaN(o)||a({width_percent:o})}}
                            @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseFloat(t.value)||100,i="ArrowUp"===e.key?5:-5,n=Math.max(10,Math.min(100,o+i));a({width_percent:n})}}}
                          />
                          <button
                            class="reset-btn"
                            @click=${()=>a({width_percent:100})}
                            title=${(0,l.kg)("editor.fields.reset_default_value",d,"Reset to default ({value})").replace("{value}","100")}
                          >
                            <ha-icon icon="mdi:refresh"></ha-icon>
                          </button>
                        </div>
                      </div>
                    `}

                <!-- Color -->
                <div class="field-group">
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    ${(0,l.kg)("editor.separator.color.title",d,"Color")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                  >
                    ${(0,l.kg)("editor.separator.color.desc",d,"Color of the separator line.")}
                  </div>
                  <ultra-color-picker
                    .label=${""}
                    .value=${s.color||""}
                    .defaultValue=${"var(--divider-color)"}
                    .hass=${t}
                    @value-changed=${e=>{const t=e.detail.value;a({color:t})}}
                  ></ultra-color-picker>
                </div>
              </div>
            `:""}
        ${"blank"!==s.separator_style?i.qy` <!-- Text in Separator -->
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
              >
                <div style="margin-bottom: 16px;">
                  ${n.Q.renderField((0,l.kg)("editor.separator.show_title",d,"Show Title"),(0,l.kg)("editor.separator.show_title_desc",d,"Add text in the middle of the separator line (e.g., ------ Text ------)"),t,{show_title:s.show_title||!1},[n.Q.createSchemaItem("show_title",{boolean:{}})],(e=>a({show_title:e.detail.value.show_title})))}
                </div>

                ${s.show_title?i.qy`
                      <!-- Text Content -->
                      <div class="field-group" style="margin-bottom: 16px;">
                        <div
                          class="field-title"
                          style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                        >
                          ${(0,l.kg)("editor.separator.text_content.title",d,"Text Content")}
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                        >
                          ${(0,l.kg)("editor.separator.text_content.desc",d,"Text to display in the middle of the separator.")}
                        </div>
                        <ha-form
                          .hass=${t}
                          .data=${{title:s.title||""}}
                          .schema=${[{name:"title",selector:{text:{}},label:""}]}
                          @value-changed=${e=>a({title:e.detail.value.title})}
                        ></ha-form>
                      </div>

                      <!-- Font Size -->
                      <div class="field-container" style="margin-bottom: 24px;">
                        <div class="field-title">
                          ${(0,l.kg)("editor.separator.font_size",d,"Font Size")}
                        </div>
                        <div class="field-description">
                          ${(0,l.kg)("editor.separator.font_size_desc",d,"Size of the text in pixels.")}
                        </div>
                        <div
                          class="gap-control-container"
                          style="display: flex; align-items: center; gap: 12px;"
                        >
                          <input
                            type="range"
                            class="gap-slider"
                            min="8"
                            max="48"
                            step="1"
                            .value="${s.title_size||14}"
                            @input=${e=>{const t=e.target,o=parseFloat(t.value);a({title_size:o})}}
                          />
                          <input
                            type="number"
                            class="gap-input"
                            min="8"
                            max="48"
                            step="1"
                            .value="${s.title_size||14}"
                            @input=${e=>{const t=e.target,o=parseFloat(t.value);isNaN(o)||a({title_size:o})}}
                            @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseFloat(t.value)||14,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(48,o+i));a({title_size:n})}}}
                          />
                          <button
                            class="reset-btn"
                            @click=${()=>a({title_size:14})}
                            title=${(0,l.kg)("editor.fields.reset_default_value",d,"Reset to default ({value})").replace("{value}","14")}
                          >
                            <ha-icon icon="mdi:refresh"></ha-icon>
                          </button>
                        </div>
                      </div>

                      <!-- Text Color -->
                      <div class="field-group" style="margin-bottom: 16px;">
                        <div
                          class="field-title"
                          style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                        >
                          ${(0,l.kg)("editor.separator.text_color.title",d,"Text Color")}
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                        >
                          ${(0,l.kg)("editor.separator.text_color.desc",d,"Color of the separator text.")}
                        </div>
                        <ultra-color-picker
                          .label=${""}
                          .value=${s.title_color||""}
                          .defaultValue=${"var(--secondary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>{const t=e.detail.value;a({title_color:t})}}
                        ></ultra-color-picker>
                      </div>

                      <!-- Text Formatting -->
                      <div class="field-group">
                        <div
                          class="field-title"
                          style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                        >
                          ${(0,l.kg)("editor.separator.text_format.title",d,"Text Formatting")}
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                        >
                          ${(0,l.kg)("editor.separator.text_format.desc",d,"Apply formatting styles to the separator text.")}
                        </div>
                        <div
                          class="format-buttons"
                          style="display: flex; gap: 8px; flex-wrap: wrap;"
                        >
                          <button
                            class="format-btn ${s.title_bold?"active":""}"
                            @click=${()=>a({title_bold:!s.title_bold})}
                            style="padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: ${s.title_bold?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${s.title_bold?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.bold",d,"Bold")}
                          >
                            <ha-icon icon="mdi:format-bold"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${s.title_italic?"active":""}"
                            @click=${()=>a({title_italic:!s.title_italic})}
                            style="padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: ${s.title_italic?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${s.title_italic?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.italic",d,"Italic")}
                          >
                            <ha-icon icon="mdi:format-italic"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${s.title_underline?"active":""}"
                            @click=${()=>a({title_underline:!s.title_underline})}
                            style="padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: ${s.title_underline?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${s.title_underline?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.underline",d,"Underline")}
                          >
                            <ha-icon icon="mdi:format-underline"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${s.title_uppercase?"active":""}"
                            @click=${()=>a({title_uppercase:!s.title_uppercase})}
                            style="padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: ${s.title_uppercase?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${s.title_uppercase?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.uppercase",d,"Uppercase")}
                          >
                            <ha-icon icon="mdi:format-letter-case-upper"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${s.title_strikethrough?"active":""}"
                            @click=${()=>a({title_strikethrough:!s.title_strikethrough})}
                            style="padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: ${s.title_strikethrough?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${s.title_strikethrough?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.strikethrough",d,"Strikethrough")}
                          >
                            <ha-icon icon="mdi:format-strikethrough"></ha-icon>
                          </button>
                        </div>
                      </div>
                    `:""}
              </div>`:i.qy`
              <!-- Spacer (Blank) Thickness Control -->
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
              >
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
                >
                  ${(0,l.kg)("editor.separator.spacer.title",d,"Spacer Height")}
                </div>
                <div class="field-container" style="margin-bottom: 24px;">
                  <div class="field-title">
                    ${(0,l.kg)("editor.separator.height",d,"Height (px)")}
                  </div>
                  <div class="field-description">
                    ${(0,l.kg)("editor.separator.height_desc",d,"Controls the visual gap for Blank Space.")}
                  </div>
                  <div
                    class="gap-control-container"
                    style="display: flex; align-items: center; gap: 12px;"
                  >
                    <input
                      type="range"
                      class="gap-slider"
                      min="1"
                      max="300"
                      step="1"
                      .value="${s.thickness||1}"
                      @input=${e=>{const t=e.target,o=parseInt(t.value);a({thickness:o})}}
                    />
                    <input
                      type="number"
                      class="gap-input"
                      min="1"
                      max="300"
                      step="1"
                      .value="${s.thickness||1}"
                      @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({thickness:o})}}
                    />
                    <button
                      class="reset-btn"
                      @click=${()=>a({thickness:1})}
                      title=${(0,l.kg)("editor.fields.reset_default_value",d,"Reset to default ({value})").replace("{value}","1")}
                    >
                      <ha-icon icon="mdi:refresh"></ha-icon>
                    </button>
                  </div>
                </div>
              </div>
            `}
      </div>
    `}renderActionsTab(e,t,o,i){return r.A.render(e,t,(e=>i(e)))}renderPreview(e,t){const o=e,a=o,n=o.design||{},r={padding:n.padding_top||n.padding_bottom||n.padding_left||n.padding_right||a.padding_top||a.padding_bottom||a.padding_left||a.padding_right?`${this.addPixelUnit(n.padding_top||a.padding_top)||"8px"} ${this.addPixelUnit(n.padding_right||a.padding_right)||"0px"} ${this.addPixelUnit(n.padding_bottom||a.padding_bottom)||"8px"} ${this.addPixelUnit(n.padding_left||a.padding_left)||"0px"}`:"8px 0",margin:n.margin_top||n.margin_bottom||n.margin_left||n.margin_right||a.margin_top||a.margin_bottom||a.margin_left||a.margin_right?`${this.addPixelUnit(n.margin_top||a.margin_top)||"0px"} ${this.addPixelUnit(n.margin_right||a.margin_right)||"0px"} ${this.addPixelUnit(n.margin_bottom||a.margin_bottom)||"0px"} ${this.addPixelUnit(n.margin_left||a.margin_left)||"0px"}`:"0",background:n.background_color||a.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},a),n),t),backgroundSize:n.background_size||a.background_size||"cover",backgroundPosition:n.background_position||a.background_position||"center",backgroundRepeat:n.background_repeat||a.background_repeat||"no-repeat",border:(n.border_style||a.border_style)&&"none"!==(n.border_style||a.border_style)?`${this.addPixelUnit(n.border_width||a.border_width)||"1px"} ${n.border_style||a.border_style} ${n.border_color||a.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(n.border_radius||a.border_radius)||"0",position:n.position||a.position||"relative",top:n.top||a.top||"auto",bottom:n.bottom||a.bottom||"auto",left:n.left||a.left||"auto",right:n.right||a.right||"auto",zIndex:n.z_index||a.z_index||"auto",width:n.width||a.width||"100%",height:n.height||a.height||"auto",maxWidth:n.max_width||a.max_width||"100%",maxHeight:n.max_height||a.max_height||"none",minWidth:n.min_width||a.min_width||"none",minHeight:n.min_height||a.min_height||"auto",overflow:n.overflow||a.overflow||"visible",clipPath:n.clip_path||a.clip_path||"none",backdropFilter:n.backdrop_filter||a.backdrop_filter||"none",boxShadow:n.box_shadow_h&&n.box_shadow_v?`${n.box_shadow_h||"0"} ${n.box_shadow_v||"0"} ${n.box_shadow_blur||"0"} ${n.box_shadow_spread||"0"} ${n.box_shadow_color||"rgba(0,0,0,0.1)"}`:a.box_shadow_h&&a.box_shadow_v?`${a.box_shadow_h||"0"} ${a.box_shadow_v||"0"} ${a.box_shadow_blur||"0"} ${a.box_shadow_spread||"0"} ${a.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};if("blank"===o.separator_style)return i.qy`
        <div class="separator-module-container" style=${this.styleObjectToCss(r)}>
          <div
            class="separator-preview blank-separator"
            style="height: ${o.thickness||1}px;"
          ></div>
        </div>
      `;const l=this.getSeparatorStyles(o);let d=null,c=null,p=!1,u=0,h=0;return i.qy`
      <div
        class="separator-module-container"
        style="${this.styleObjectToCss(r)}; cursor: ${o.tap_action&&"nothing"!==o.tap_action.action||o.hold_action&&"nothing"!==o.hold_action.action||o.double_tap_action&&"nothing"!==o.double_tap_action.action?"pointer":"default"};"
        @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),p=!1,c=setTimeout((()=>{p=!0,o.hold_action&&"nothing"!==o.hold_action.action&&s.K.handleAction(o.hold_action,t,e.target)}),500)}}
        @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),c&&(clearTimeout(c),c=null),p)return void(p=!1);const i=Date.now();i-h<300&&1===u?(d&&(clearTimeout(d),d=null),u=0,o.double_tap_action&&"nothing"!==o.double_tap_action.action&&s.K.handleAction(o.double_tap_action,t,e.target)):(u=1,h=i,d=setTimeout((()=>{u=0,o.tap_action&&"nothing"!==o.tap_action.action&&s.K.handleAction(o.tap_action,t,e.target)}),300))}}
      >
        <div class="separator-preview" style="width: 100%; text-align: center;">
          ${o.show_title&&o.title?i.qy`
                <div
                  class="separator-with-title"
                  style=${this.getTitleContainerStyles(o.design||{})}
                >
                  <div
                    class="separator-line-left"
                    style=${this.getSeparatorLineStyles(o,"left")}
                  ></div>
                  <div
                    class="separator-title"
                    style=${this.getTitleStyles(o,o.design||{})}
                  >
                    ${o.title}
                  </div>
                  <div
                    class="separator-line-right"
                    style=${this.getSeparatorLineStyles(o,"right")}
                  ></div>
                </div>
              `:i.qy` <div class="separator-line" style=${l}></div> `}
        </div>
      </div>
    `}validate(e){const t=e,o=[...super.validate(e).errors];return"blank"!==t.separator_style?t.thickness&&(t.thickness<1||t.thickness>50)&&o.push("Thickness must be between 1 and 50 pixels"):t.thickness&&(t.thickness<1||t.thickness>300)&&o.push("Spacer height must be between 1 and 300 pixels"),t.width_percent&&(t.width_percent<1||t.width_percent>100)&&o.push("Width must be between 1 and 100 percent"),!t.show_title||t.title&&""!==t.title.trim()||o.push("Title text is required when show title is enabled"),{valid:0===o.length,errors:o}}getStyles(){return"\n      .separator-preview {\n        min-height: 20px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      .blank-separator {\n        background: transparent;\n        display: block;\n        min-height: 0;\n      }\n      \n      .separator-with-title {\n        position: relative;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n      }\n      \n      .separator-title {\n        margin: 0;\n        line-height: 1.2;\n        background: var(--card-background-color);\n        padding: 0 8px;\n        position: relative;\n        z-index: 1;\n        white-space: nowrap;\n      }\n      \n      .separator-line,\n      .separator-line-left,\n      .separator-line-right {\n        display: block;\n      }\n      \n      .separator-line-left,\n      .separator-line-right {\n        flex: 1;\n      }\n      \n      /* Format button styles */\n      .format-buttons {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n      }\n      \n      .format-btn {\n        padding: 8px;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        min-width: 36px;\n        min-height: 36px;\n      }\n      \n      .format-btn:hover {\n        transform: translateY(-1px);\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n      }\n      \n      .format-btn ha-icon {\n        font-size: 16px;\n      }\n      \n      /* Settings section styling */\n      .settings-section {\n        background: var(--secondary-background-color);\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 32px;\n      }\n      \n      .section-title {\n        font-size: 18px;\n        font-weight: 700;\n        text-transform: uppercase;\n        color: var(--primary-color);\n        margin-bottom: 16px;\n        padding-bottom: 0;\n        border-bottom: none;\n        letter-spacing: 0.5px;\n      }\n      \n      .field-title {\n        font-size: 16px;\n        font-weight: 600;\n        margin-bottom: 4px;\n      }\n      \n      .field-description {\n        font-size: 13px;\n        font-weight: 400;\n        margin-bottom: 12px;\n        color: var(--secondary-text-color);\n      }\n      \n      .field-group {\n        margin-bottom: 16px;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    "}getSeparatorStyles(e){const t={width:`${e.width_percent||100}%`,height:`${e.thickness||1}px`,margin:"0 auto"};switch(e.separator_style||"line"){case"line":t.backgroundColor=e.color||"var(--divider-color)";break;case"double_line":t.borderTop=`${e.thickness||1}px solid ${e.color||"var(--divider-color)"}`,t.borderBottom=`${e.thickness||1}px solid ${e.color||"var(--divider-color)"}`,t.height=3*(e.thickness||1)+"px";break;case"dotted":t.borderTop=`${e.thickness||1}px dotted ${e.color||"var(--divider-color)"}`,t.height="0";break;case"double_dotted":t.borderTop=`${e.thickness||1}px dotted ${e.color||"var(--divider-color)"}`,t.borderBottom=`${e.thickness||1}px dotted ${e.color||"var(--divider-color)"}`,t.height=3*(e.thickness||1)+"px";break;case"shadow":{const o=e.thickness||1,i=Math.max(8*o,14),a=this._colorWithAlpha(e.color||"#000000",.35);t.width="calc(100% + (var(--ha-card-padding, 16px) * 2))",t.margin="0 calc(var(--ha-card-padding, 16px) * -1)",t.height=`${i}px`,t.background=`linear-gradient(to bottom, ${a} 0%, rgba(0,0,0,0) 100%)`;break}}return Object.entries(t).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}getSeparatorLineStyles(e,t){const o={flex:"1",height:`${e.thickness||1}px`,margin:"left"===t?"0 8px 0 0":"0 0 0 8px"},i=(e.design||{}).text_align;switch(i&&"inherit"!==i&&(o.flex="left"===i?"left"===t?"0 0 12px":"1":"right"===i&&"right"===t?"0 0 12px":"1"),e.separator_style||"line"){case"line":o.backgroundColor=e.color||"var(--divider-color)";break;case"double_line":o.borderTop=`${e.thickness||1}px solid ${e.color||"var(--divider-color)"}`,o.borderBottom=`${e.thickness||1}px solid ${e.color||"var(--divider-color)"}`,o.height=3*(e.thickness||1)+"px";break;case"dotted":o.borderTop=`${e.thickness||1}px dotted ${e.color||"var(--divider-color)"}`,o.height="0";break;case"double_dotted":o.borderTop=`${e.thickness||1}px dotted ${e.color||"var(--divider-color)"}`,o.borderBottom=`${e.thickness||1}px dotted ${e.color||"var(--divider-color)"}`,o.height=3*(e.thickness||1)+"px";break;case"shadow":{const t=e.thickness||1,i=Math.max(8*t,14),a=this._colorWithAlpha(e.color||"#000000",.35),n=this._colorWithAlpha(e.color||"#000000",.22),r=this._colorWithAlpha(e.color||"#000000",.25);o.height=`${i}px`,o.margin="0",o.background=`\n          linear-gradient(to bottom, ${r}, rgba(0,0,0,0) 66%) top/100% 2px no-repeat,\n          radial-gradient(ellipse at center, ${a} 0%, ${n} 55%, rgba(0,0,0,0) 80%) bottom/120% 100% no-repeat\n        `;break}}return Object.entries(o).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}getTitleContainerStyles(e={}){const t=(null==e?void 0:e.text_align)&&"inherit"!==e.text_align?e.text_align:"center",o={position:"relative",display:"flex",alignItems:"center",justifyContent:"left"===t?"flex-start":"right"===t?"flex-end":"center",width:"100%"};return Object.entries(o).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}getTitleStyles(e,t={}){const o={fontSize:void 0!==t.font_size&&null!==t.font_size?"number"==typeof t.font_size?`${t.font_size}px`:String(t.font_size):`${e.title_size||14}px`,color:t.color||e.title_color||"var(--secondary-text-color)",fontWeight:t.font_weight||(e.title_bold?"bold":"normal"),fontStyle:t.font_style||(e.title_italic?"italic":"normal"),textTransform:t.text_transform||(e.title_uppercase?"uppercase":"none"),letterSpacing:t.letter_spacing||void 0,lineHeight:t.line_height||void 0,textAlign:t.text_align||void 0,margin:"0",padding:"0 8px",backgroundColor:"transparent",position:"relative",zIndex:"1"},i=[];return e.title_strikethrough&&i.push("line-through"),e.title_underline&&i.push("underline"),o.textDecoration=i.length>0?i.join(" "):"none",t.text_shadow_h&&t.text_shadow_v&&(o.textShadow=`${t.text_shadow_h||"0"} ${t.text_shadow_v||"0"} ${t.text_shadow_blur||"0"} ${t.text_shadow_color||"rgba(0,0,0,0.25)"}`),Object.entries(o).filter((([e,t])=>null!=t&&""!==t)).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}_colorWithAlpha(e,t){if(!e)return`rgba(0,0,0,${t})`;if(e.startsWith("rgba(")){const o=e.replace("rgba(","").replace(")","").split(",").map((e=>e.trim())),[i,a,n]=o.map(((e,t)=>t<3?Number(e):e));return`rgba(${i||0}, ${a||0}, ${n||0}, ${t})`}if(e.startsWith("rgb(")){const o=e.replace("rgb(","").replace(")","").split(",").map((e=>Number(e.trim()))),[i,a,n]=o;return`rgba(${i||0}, ${a||0}, ${n||0}, ${t})`}if(e.startsWith("#")){const o=e.replace("#",""),i=parseInt(3===o.length?o.split("").map((e=>e+e)).join(""):o,16);return`rgba(${i>>16&255}, ${i>>8&255}, ${255&i}, ${t})`}return`rgba(0,0,0,${t})`}getBackgroundImageCSS(e,t){var o,i;if(!e.background_image_type||"none"===e.background_image_type)return"none";switch(e.background_image_type){case"upload":case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const a=t.states[e.background_image_entity];let n="";if((null===(o=a.attributes)||void 0===o?void 0:o.entity_picture)?n=a.attributes.entity_picture:(null===(i=a.attributes)||void 0===i?void 0:i.image)?n=a.attributes.image:a.state&&"string"==typeof a.state&&(a.state.startsWith("/")||a.state.startsWith("http"))&&(n=a.state),n)return n.startsWith("/local/")||n.startsWith("/media/")||n.startsWith("/"),`url("${n}")`}}return"none"}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}}},340:(e,t,o)=>{o.d(t,{nu:()=>_,rC:()=>b});var i,a,n,r=function(e,t){return s(t).format(e)},s=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric"})};(n=i||(i={})).language="language",n.system="system",n.comma_decimal="comma_decimal",n.decimal_comma="decimal_comma",n.space_comma="space_comma",n.none="none",function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(a||(a={}));var l=function(e){if(e.time_format===a.language||e.time_format===a.system){var t=e.time_format===a.language?e.language:void 0,o=(new Date).toLocaleString(t);return o.includes("AM")||o.includes("PM")}return e.time_format===a.am_pm},d=function(e,t){return c(t).format(e)},c=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:l(e)?"numeric":"2-digit",minute:"2-digit",hour12:l(e)})},p=function(e,t){return u(t).format(e)},u=function(e){return new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hour12:l(e)})};function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}var m=function(e,t,o){var a=t?function(e){switch(e.number_format){case i.comma_decimal:return["en-US","en"];case i.decimal_comma:return["de","es","it"];case i.space_comma:return["fr","sv","cs"];case i.system:return;default:return e.language}}(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==i.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(a,g(e,o)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,g(e,o)).format(Number(e))}return"string"==typeof e?e:function(e,t){return void 0===t&&(t=2),Math.round(e*Math.pow(10,t))/Math.pow(10,t)}(e,null==o?void 0:o.maximumFractionDigits).toString()+("currency"===(null==o?void 0:o.style)?" "+o.currency:"")},g=function(e,t){var o=h({maximumFractionDigits:2},t);if("string"!=typeof e)return o;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var i=e.indexOf(".")>-1?e.split(".")[1].length:0;o.minimumFractionDigits=i,o.maximumFractionDigits=i}return o},_=function(e,t,o,i){var a=void 0!==i?i:t.state;if("unknown"===a||"unavailable"===a)return e("state.default."+a);if(function(e){return!!e.attributes.unit_of_measurement||!!e.attributes.state_class}(t)){if("monetary"===t.attributes.device_class)try{return m(a,o,{style:"currency",currency:t.attributes.unit_of_measurement})}catch(e){}return m(a,o)+(t.attributes.unit_of_measurement?" "+t.attributes.unit_of_measurement:"")}var n=function(e){return function(e){return e.substr(0,e.indexOf("."))}(e.entity_id)}(t);if("input_datetime"===n){var s;if(void 0===i)return t.attributes.has_date&&t.attributes.has_time?(s=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),d(s,o)):t.attributes.has_date?(s=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),r(s,o)):t.attributes.has_time?((s=new Date).setHours(t.attributes.hour,t.attributes.minute),p(s,o)):t.state;try{var l=i.split(" ");if(2===l.length)return d(new Date(l.join("T")),o);if(1===l.length){if(i.includes("-"))return r(new Date(i+"T00:00"),o);if(i.includes(":")){var c=new Date;return p(new Date(c.toISOString().split("T")[0]+"T"+i),o)}}return i}catch(e){return i}}return"humidifier"===n&&"on"===a&&t.attributes.humidity?t.attributes.humidity+" %":"counter"===n||"number"===n||"input_number"===n?m(a,o):t.attributes.device_class&&e("component."+n+".state."+t.attributes.device_class+"."+a)||e("component."+n+".state._."+a)||a},b=(new Set(["fan","input_boolean","light","switch","group","automation"]),function(e,t,o,i){i=i||{},o=null==o?{}:o;var a=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return a.detail=o,e.dispatchEvent(a),a});new Set(["call-service","divider","section","weblink","cast","select"])},341:(e,t,o)=>{o.d(t,{oD:()=>I});var i=o(504),a=o(278),n=o(884),r=o(649),s=o(679),l=o(866),d=o(790),c=o(70),p=o(101),u=o(863),h=o(183),m=o(30),g=o(914),_=o(662),b=o(796),v=o(456);class f extends m.m{constructor(){super(...arguments),this.metadata={type:"camera",title:"Camera Module",description:"Display live camera feeds with comprehensive control options",author:"WJD Designs",version:"1.0.0",icon:"mdi:camera",category:"content",tags:["camera","live","feed","security","surveillance"]},this.clickTimeout=null,this.holdTimeout=null,this.isHolding=!1}createDefault(e,t){return{id:e||this.generateId("camera"),type:"camera",entity:"",camera_name:"",show_name:!0,name_position:"top-left",aspect_ratio_linked:!0,aspect_ratio_value:1.778,image_fit:"cover",crop_left:0,crop_top:0,crop_right:0,crop_bottom:0,show_controls:!1,live_view:!0,auto_refresh:!0,refresh_interval:30,image_quality:"high",show_unavailable:!0,fallback_image:"",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},template_mode:!1,template:"",enable_hover_effect:!0,hover_background_color:"var(--divider-color)",design:{border_radius:"20px"}}}renderGeneralTab(e,t,o,i){var a;const n=e,r=(null===(a=t.locale)||void 0===a?void 0:a.language)||"en";return h.qy`
      ${this.injectUcFormStyles()}
      <div class="camera-module-settings">
        <!-- Camera Configuration Section -->
        ${this.renderSettingsSection((0,v.kg)("editor.camera.config.title",r,"Camera Configuration"),(0,v.kg)("editor.camera.config.desc",r,"Configure the camera entity and display settings."),[{title:(0,v.kg)("editor.camera.entity",r,"Camera Entity"),description:(0,v.kg)("editor.camera.entity_desc",r,"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant."),hass:t,data:{entity:n.entity||""},schema:[this.entityField("entity",["camera"])],onChange:e=>i(e.detail.value)},{title:(0,v.kg)("editor.camera.name",r,"Camera Name"),description:(0,v.kg)("editor.camera.name_desc",r,"Custom name for the camera. Leave empty to use entity name."),hass:t,data:{camera_name:n.camera_name||""},schema:[this.textField("camera_name")],onChange:e=>i(e.detail.value)},{title:(0,v.kg)("editor.camera.show_name",r,"Show Camera Name"),description:(0,v.kg)("editor.camera.show_name_desc",r,"Display the camera name on the feed"),hass:t,data:{show_name:!1!==n.show_name},schema:[this.booleanField("show_name")],onChange:e=>i(e.detail.value)}])}

          ${!1!==n.show_name?h.qy`
                  <div style="margin-top: 16px;">
                    ${this.renderConditionalFieldsGroup((0,v.kg)("editor.camera.name_position.group_title",r,"Camera Name Position"),h.qy`
                        ${this.renderFieldSection((0,v.kg)("editor.camera.name_position.title",r,"Name Position"),(0,v.kg)("editor.camera.name_position.desc",r,"Choose where the camera name appears as an overlay on the camera image."),t,{name_position:n.name_position||"top-left"},[this.selectField("name_position",[{value:"top-left",label:(0,v.kg)("editor.camera.name_position.options.top_left",r,"Top Left")},{value:"top-right",label:(0,v.kg)("editor.camera.name_position.options.top_right",r,"Top Right")},{value:"center",label:(0,v.kg)("editor.camera.name_position.options.center",r,"Center")},{value:"bottom-left",label:(0,v.kg)("editor.camera.name_position.options.bottom_left",r,"Bottom Left")},{value:"bottom-right",label:(0,v.kg)("editor.camera.name_position.options.bottom_right",r,"Bottom Right")}])],(e=>i(e.detail.value)))}
                      `)}
                  </div>
                `:""}
        </div>

        <!-- Display Settings Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 32px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,v.kg)("editor.camera.display.title",r,"Display Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,v.kg)("editor.camera.live_view.title",r,"Live View"),(0,v.kg)("editor.camera.live_view.desc",r,"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."),t,{live_view:!1!==n.live_view},[this.booleanField("live_view")],(e=>i(e.detail.value)))}
          </div>

          ${!1===n.live_view?h.qy`
                  <div style="margin-top: 24px;">
                    ${this.renderConditionalFieldsGroup((0,v.kg)("editor.camera.auto_refresh.section_title",r,"Auto Refresh Settings"),h.qy`
                        <div style="margin-bottom: 16px;">
                          ${g.Q.renderField((0,v.kg)("editor.camera.auto_refresh.title",r,"Auto Refresh"),(0,v.kg)("editor.camera.auto_refresh.desc",r,"Automatically refresh the camera image at regular intervals"),t,{auto_refresh:!1!==n.auto_refresh},[g.Q.createSchemaItem("auto_refresh",{boolean:{}})],(e=>i({auto_refresh:e.detail.value.auto_refresh})))}
                        </div>

                        ${!1!==n.auto_refresh?h.qy`
                              ${g.Q.renderField((0,v.kg)("editor.camera.refresh_interval.title",r,"Refresh Interval (seconds)"),(0,v.kg)("editor.camera.refresh_interval.desc",r,"How often to refresh the camera image automatically."),t,{refresh_interval:n.refresh_interval||30},[g.Q.createSchemaItem("refresh_interval",{number:{min:5,max:300,mode:"box"}})],(e=>i({refresh_interval:e.detail.value.refresh_interval})))}
                            `:""}
                      `)}
                  </div>
                `:""}

          <!-- Dimensions Section -->
          <div style="margin-bottom: 32px;">
            <div
              class="field-title"
              style="font-size: 18px; font-weight: 700; margin-bottom: 16px; color: var(--primary-color);"
            >
              ${(0,v.kg)("editor.camera.dimensions.title",r,"Dimensions")}
            </div>

            <style>
              .number-range-control {
                display: flex;
                gap: 8px;
                align-items: center;
              }

              .range-slider {
                flex: 0 0 65%;
                height: 6px;
                background: var(--divider-color);
                border-radius: 3px;
                outline: none;
                appearance: none;
                -webkit-appearance: none;
                cursor: pointer;
                transition: all 0.2s ease;
                min-width: 0;
              }

              .range-slider::-webkit-slider-thumb {
                appearance: none;
                -webkit-appearance: none;
                width: 18px;
                height: 18px;
                background: var(--primary-color);
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
              }

              .range-slider::-moz-range-thumb {
                width: 18px;
                height: 18px;
                background: var(--primary-color);
                border-radius: 50%;
                cursor: pointer;
                border: none;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
              }

              .range-slider:hover {
                background: var(--primary-color);
                opacity: 0.7;
              }

              .range-slider:hover::-webkit-slider-thumb {
                transform: scale(1.1);
              }

              .range-slider:hover::-moz-range-thumb {
                transform: scale(1.1);
              }

              .range-input {
                flex: 0 0 20%;
                padding: 6px 8px !important;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                background: var(--secondary-background-color);
                color: var(--primary-text-color);
                font-size: 13px;
                text-align: center;
                transition: all 0.2s ease;
                box-sizing: border-box;
              }

              .range-input:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
              }

              .range-reset-btn {
                width: 32px;
                height: 32px;
                padding: 0;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                background: var(--secondary-background-color);
                color: var(--primary-text-color);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s ease;
                flex-shrink: 0;
              }

              .range-reset-btn:hover {
                background: var(--primary-color);
                color: var(--text-primary-color);
                border-color: var(--primary-color);
              }

              .range-reset-btn ha-icon {
                font-size: 14px;
              }

              .aspect-ratio-link-btn {
                width: 40px;
                height: 40px;
                padding: 0;
                border: 2px solid var(--divider-color);
                border-radius: 50%;
                background: var(--secondary-background-color);
                color: var(--primary-text-color);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                flex-shrink: 0;
                margin: 0 auto;
                position: relative;
              }

              .aspect-ratio-link-btn.linked {
                border-color: var(--primary-color);
                background: var(--primary-color);
                color: white;
                transform: scale(1.05);
              }

              .aspect-ratio-link-btn:hover {
                transform: scale(1.1);
                border-color: var(--primary-color);
              }

              .aspect-ratio-link-btn.linked:hover {
                background: var(--primary-color);
                opacity: 0.9;
              }

              .aspect-ratio-link-btn ha-icon {
                font-size: 20px;
                transition: transform 0.2s ease;
              }

              .dimensions-container {
                display: flex;
                flex-direction: column;
                gap: 16px;
              }

              .dimension-group {
                display: flex;
                flex-direction: column;
                gap: 8px;
              }
            </style>

            <div class="dimensions-container">
              <div class="dimension-group">
                <div class="field-title">${(0,v.kg)("editor.camera.width",r,"Width (px)")}</div>
                <div class="field-description">
                  ${(0,v.kg)("editor.camera.width_desc",r,"Set the width of the camera display. Range: 100-1000px")}
                </div>
                <div class="number-range-control">
                  <input
                    type="range"
                    class="range-slider"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${n.width||320}"
                    @input=${e=>{const t=e.target,o=parseInt(t.value);this._handleDimensionChange(n,"width",o,i)}}
                  />
                  <input
                    type="number"
                    class="range-input"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${n.width||320}"
                    @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||this._handleDimensionChange(n,"width",o,i)}}
                    @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||320,a="ArrowUp"===e.key?1:-1,r=Math.max(100,Math.min(1e3,o+a));this._handleDimensionChange(n,"width",r,i)}}}
                  />
                  <button
                    class="range-reset-btn"
                    @click=${()=>this._handleDimensionChange(n,"width",320,i)}
                    title=${(0,v.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","320")}
                  >
                    <ha-icon icon="mdi:refresh"></ha-icon>
                  </button>
                </div>
              </div>

              <!-- Link/Unlink Button -->
              <div style="display: flex; justify-content: center; margin: 8px 0;">
                <button
                  class="aspect-ratio-link-btn ${!1!==n.aspect_ratio_linked?"linked":""}"
                  @click=${()=>{const e=!n.aspect_ratio_linked,t={aspect_ratio_linked:e};if(e){const e=n.width||320,o=n.height||180;t.aspect_ratio_value=e/o}i(t)}}
                  title="${!1!==n.aspect_ratio_linked?(0,v.kg)("editor.camera.unlink_aspect",r,"Unlink aspect ratio"):(0,v.kg)("editor.camera.link_aspect",r,"Link aspect ratio")}"
                >
                  <ha-icon
                    icon="${!1!==n.aspect_ratio_linked?"mdi:link-variant":"mdi:link-variant-off"}"
                  ></ha-icon>
                </button>
              </div>

              <div class="dimension-group">
                <div class="field-title">${(0,v.kg)("editor.camera.height",r,"Height (px)")}</div>
                <div class="field-description">
                  ${(0,v.kg)("editor.camera.height_desc",r,"Set the height of the camera display. Range: 100-1000px")}
                </div>
                <div class="number-range-control">
                  <input
                    type="range"
                    class="range-slider"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${n.height||180}"
                    @input=${e=>{const t=e.target,o=parseInt(t.value);this._handleDimensionChange(n,"height",o,i)}}
                  />
                  <input
                    type="number"
                    class="range-input"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${n.height||180}"
                    @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||this._handleDimensionChange(n,"height",o,i)}}
                    @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||180,a="ArrowUp"===e.key?1:-1,r=Math.max(100,Math.min(1e3,o+a));this._handleDimensionChange(n,"height",r,i)}}}
                  />
                  <button
                    class="range-reset-btn"
                    @click=${()=>this._handleDimensionChange(n,"height",180,i)}
                    title=${(0,v.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","180")}
                  >
                    <ha-icon icon="mdi:refresh"></ha-icon>
                  </button>
                </div>
              </div>
            </div>

            ${!1!==n.aspect_ratio_linked?h.qy`
                    <div
                      style="margin-top: 12px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.1); border-radius: 8px; border-left: 4px solid var(--primary-color);"
                    >
                      <div
                        style="font-size: 13px; color: var(--primary-color); font-weight: 500; margin-bottom: 4px;"
                      >
                        <ha-icon
                          icon="mdi:link-variant"
                          style="font-size: 14px; margin-right: 6px;"
                        ></ha-icon>
                        ${(0,v.kg)("editor.camera.aspect_linked.title",r,"Aspect Ratio Linked")}
                      </div>
                      <div
                        style="font-size: 12px; color: var(--secondary-text-color); line-height: 1.4;"
                      >
                        ${(0,v.kg)("editor.camera.aspect_linked.desc",r,"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions.").replace("{ratio}",`${(1*(n.aspect_ratio_value||1.778)).toFixed(2)}`)}
                      </div>
                    </div>
                  `:h.qy`
                    <div
                      style="margin-top: 12px; padding: 12px; background: rgba(var(--rgb-secondary-text-color), 0.1); border-radius: 8px; border-left: 4px solid var(--secondary-text-color);"
                    >
                      <div
                        style="font-size: 13px; color: var(--secondary-text-color); font-weight: 500; margin-bottom: 4px;"
                      >
                        <ha-icon
                          icon="mdi:link-variant-off"
                          style="font-size: 14px; margin-right: 6px;"
                        ></ha-icon>
                        ${(0,v.kg)("editor.camera.aspect_independent.title",r,"Independent Dimensions")}
                      </div>
                      <div
                        style="font-size: 12px; color: var(--secondary-text-color); line-height: 1.4;"
                      >
                        ${(0,v.kg)("editor.camera.aspect_independent.desc",r,"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio.")}
                      </div>
                    </div>
                  `}
          </div>


        </div>

        <!-- Crop & Position Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,v.kg)("editor.camera.crop.title",r,"Crop & Position")}
          </div>
          <div
            class="field-description"
            style="margin-bottom: 20px; color: var(--secondary-text-color); font-style: italic;"
          >
            ${(0,v.kg)("editor.camera.crop.desc",r,"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.")}
          </div>

          <div style="display: flex; flex-direction: column; gap: 20px;">
            <!-- Left Crop -->
            <div class="field-container">
              <div class="field-title">${(0,v.kg)("editor.camera.crop.left_title",r,"Left Crop (%)")}</div>
              <div class="field-description">
                ${(0,v.kg)("editor.camera.crop.left_desc",r,"Crop from the left edge. Higher values show less of the left side.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_left||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);i({crop_left:o})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_left||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||i({crop_left:o})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>i({crop_left:0})}
                  title=${(0,v.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Right Crop -->
            <div class="field-container">
              <div class="field-title">${(0,v.kg)("editor.camera.crop.right_title",r,"Right Crop (%)")}</div>
              <div class="field-description">
                ${(0,v.kg)("editor.camera.crop.right_desc",r,"Crop from the right edge. Higher values show less of the right side.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_right||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);i({crop_right:o})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_right||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||i({crop_right:o})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>i({crop_right:0})}
                  title=${(0,v.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Top Crop -->
            <div class="field-container">
              <div class="field-title">${(0,v.kg)("editor.camera.crop.top_title",r,"Top Crop (%)")}</div>
              <div class="field-description">
                ${(0,v.kg)("editor.camera.crop.top_desc",r,"Crop from the top edge. Higher values show less of the top area.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_top||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);i({crop_top:o})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_top||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||i({crop_top:o})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>i({crop_top:0})}
                  title=${(0,v.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Bottom Crop -->
            <div class="field-container">
              <div class="field-title">${(0,v.kg)("editor.camera.crop.bottom_title",r,"Bottom Crop (%)")}</div>
              <div class="field-description">
                ${(0,v.kg)("editor.camera.crop.bottom_desc",r,"Crop from the bottom edge. Higher values show less of the bottom area.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_bottom||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);i({crop_bottom:o})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${n.crop_bottom||0}"
                  @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||i({crop_bottom:o})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>i({crop_bottom:0})}
                  title=${(0,v.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>
          </div>

          <!-- Crop Status -->
          ${(n.crop_left||0)+(n.crop_top||0)+(n.crop_right||0)+(n.crop_bottom||0)>0?h.qy`
                  <div
                    style="margin-top: 16px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.1); border-radius: 8px; border-left: 4px solid var(--primary-color);"
                  >
                    <div
                      style="font-size: 13px; color: var(--primary-color); font-weight: 500; margin-bottom: 4px;"
                    >
                      <ha-icon
                        icon="mdi:crop"
                        style="font-size: 14px; margin-right: 6px;"
                      ></ha-icon>
                      ${(0,v.kg)("editor.camera.crop.active_applied",r,"Active Crops Applied")}
                    </div>
                    <div
                      style="font-size: 12px; color: var(--secondary-text-color); line-height: 1.4;"
                    >
                      L: ${n.crop_left||0}% | T: ${n.crop_top||0}% | R:
                      ${n.crop_right||0}% | B: ${n.crop_bottom||0}%
                    </div>
                  </div>
                `:""}

          <!-- Reset All Crops Button -->
          <div style="margin-top: 20px; text-align: center;">
            <button
              style="
                padding: 8px 16px;
                border: 1px solid var(--primary-color);
                border-radius: 6px;
                background: transparent;
                color: var(--primary-color);
                cursor: pointer;
                font-size: 13px;
                font-weight: 500;
                transition: all 0.2s ease;
              "
              @click=${()=>i({crop_left:0,crop_top:0,crop_right:0,crop_bottom:0})}
              @mouseover=${e=>{const t=e.target;t.style.background="var(--primary-color)",t.style.color="white"}}
              @mouseout=${e=>{const t=e.target;t.style.background="transparent",t.style.color="var(--primary-color)"}}
            >
              <ha-icon icon="mdi:crop-free" style="margin-right: 6px; font-size: 14px;"></ha-icon>
              ${(0,v.kg)("editor.camera.crop.reset_all",r,"Reset All Crops")}
            </button>
          </div>
        </div>



        <!-- Link configuration intentionally omitted for Camera module per design guidelines -->

        <!-- Template Mode Section -->
        <div
          class="settings-section template-mode-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,v.kg)("editor.camera.template.title",r,"Template Mode")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,v.kg)("editor.camera.template.desc",r,"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:n.template_mode||!1}}
              .schema=${[{name:"template_mode",label:(0,v.kg)("editor.camera.template.mode_label",r,"Template Mode"),description:(0,v.kg)("editor.camera.template.mode_desc",r,"Use Home Assistant templating syntax to dynamically select camera entity"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>i({template_mode:e.detail.value.template_mode})}
            ></ha-form>
          </div>

          ${n.template_mode?h.qy`
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{template:n.template||""}}
                      .schema=${[{name:"template",label:(0,v.kg)("editor.camera.template.camera_template_label",r,"Camera Template"),description:(0,v.kg)("editor.camera.template.camera_template_desc",r,"Template to dynamically set the camera entity using Jinja2 syntax"),selector:{text:{multiline:!0}}}]}
                      .computeLabel=${e=>e.label||e.name}
                      .computeDescription=${e=>e.description||""}
                      @value-changed=${e=>i({template:e.detail.value.template})}
                    ></ha-form>
                  </div>

                  <div class="template-examples">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                    >
                      ${(0,v.kg)("editor.camera.template.examples_title",r,"Common Examples:")}
                    </div>

                    <div class="example-item" style="margin-bottom: 16px;">
                      <div
                        class="example-code"
                        style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                      >
                        'camera.outdoor' if is_state('weather.home', 'sunny') else ''
                      </div>
                      <div
                        class="example-description"
                        style="font-size: 12px; color: var(--secondary-text-color);"
                      >
                        ${(0,v.kg)("editor.camera.template.example1_desc",r,"Show camera when weather is sunny")}
                      </div>
                    </div>

                    <div class="example-item" style="margin-bottom: 16px;">
                      <div
                        class="example-code"
                        style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                      >
                        'camera.front_door' if is_state('input_boolean.show_front', 'on') else
                        'camera.back_yard'
                      </div>
                      <div
                        class="example-description"
                        style="font-size: 12px; color: var(--secondary-text-color);"
                      >
                        ${(0,v.kg)("editor.camera.template.example2_desc",r,"Switch between cameras based on input boolean")}
                      </div>
                    </div>

                    <div class="example-item" style="margin-bottom: 16px;">
                      <div
                        class="example-code"
                        style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                      >
                        states('input_select.active_camera')
                      </div>
                      <div
                        class="example-description"
                        style="font-size: 12px; color: var(--secondary-text-color);"
                      >
                        ${(0,v.kg)("editor.camera.template.example3_desc",r,"Use input select to choose camera entity")}
                      </div>
                    </div>
                  </div>
                `:""}
        </div>
      </div>
    `}renderActionsTab(e,t,o,i){return _.A.render(e,t,(e=>i(e)))}renderPreview(e,t){const o=e,i=o,a=i.design||{};let n=o.entity;if(o.template_mode&&o.template)try{let e=o.template;const i=e.match(/states\(['"]([^'"]+)['"]\)/g);i&&i.forEach((o=>{const i=o.match(/states\(['"]([^'"]+)['"]\)/)[1],a=null==t?void 0:t.states[i],n=a?a.state:"unknown";e=e.replace(o,`'${n}'`)}));const a=e.match(/is_state\(['"]([^'"]+)['"],\s*['"]([^'"]+)['"]\)/g);a&&a.forEach((o=>{const[,i,a]=o.match(/is_state\(['"]([^'"]+)['"],\s*['"]([^'"]+)['"]\)/),n=null==t?void 0:t.states[i],r=n&&n.state===a;e=e.replace(o,r?"True":"False")}));const r=e.match(/['"]([^'"]+)['"] if (.+?) else ['"]([^'"]+)['"]/);if(r){const[,e,t,o]=r;n=t.includes("True")?e:o}else{const t=e.match(/['"]([^'"]+)['"]/);t&&(n=t[1])}}catch(e){console.error("Template evaluation error:",e),n=o.entity}const r=n?t.states[n]:null,s=!r||"unavailable"===r.state,l=o.camera_name||(r?r.attributes.friendly_name||r.entity_id:"Camera"),d={width:"100%",maxWidth:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"left"===a.alignment?"flex-start":"right"===a.alignment?"flex-end":"center",justifyContent:"center",color:a.color||this.getTextColor(i),fontFamily:a.font_family||this.getTextFont(i),fontSize:a.font_size?"number"==typeof a.font_size?`${a.font_size}px`:a.font_size:this.getTextSize(i),fontWeight:a.font_weight||this.getTextWeight(i),textTransform:a.text_transform||void 0,letterSpacing:a.letter_spacing||void 0,lineHeight:a.line_height||void 0,textShadow:a.text_shadow||void 0},c=o.crop_left||0,p=o.crop_right||0,u=o.crop_top||0,m=o.crop_bottom||0,g=o.width||320,_=o.height||180,b=g*(100-c-p)/100,v=_*(100-u-m)/100,f={objectFit:"cover",width:`${g}px`,height:`${_}px`,display:"block",position:"absolute",left:-g*c/100+"px",top:-_*u/100+"px",transition:"all 0.3s ease",borderRadius:a.border_radius||"0px"},y={width:a.width||`${Math.max(50,b)}px`,height:a.height||`${Math.max(50,v)}px`,maxWidth:a.max_width||void 0,minWidth:a.min_width||void 0,maxHeight:a.max_height||void 0,minHeight:a.min_height||void 0,position:"relative",overflow:a.overflow||"hidden",borderRadius:a.border_radius||"0px",background:a.background_color||"transparent",backgroundImage:this.getBackgroundImageWithDesign(a,i,t)||void 0,border:this.getBorderWithDesign(a,i)||void 0,padding:"0",margin:this.getMarginWithDesign(a,i),boxShadow:a.box_shadow||void 0,backdropFilter:a.backdrop_filter||void 0,clipPath:a.clip_path||void 0},x=o.name_position||"top-left",w=this.getCameraNamePositionStyles(x,i,a),k=h.qy`
      <div class="camera-module-container" style=${this.styleObjectToCss(d)}>
        <div class="camera-image-container" style=${this.styleObjectToCss(y)}>
          ${n?s?h.qy`
                  <div
                    class="camera-unavailable"
                    style=${this.styleObjectToCss(Object.assign(Object.assign({},f),{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"var(--error-color, #f44336)",color:a.color||this.getTextColor(i),position:"static",left:"auto",top:"auto",fontFamily:a.font_family||this.getTextFont(i)}))}
                  >
                    ${o.fallback_image?h.qy`
                          <img
                            src=${o.fallback_image}
                            alt="Fallback"
                            style="max-width: 100%; max-height: 100%; object-fit: cover;"
                          />
                        `:h.qy`
                          <ha-icon
                            icon="mdi:camera-off"
                            style="font-size: 48px; margin-bottom: 8px;"
                          ></ha-icon>
                          <span
                            style="font-weight: ${a.font_weight||this.getTextWeight(i)}; font-size: ${a.font_size?"number"==typeof a.font_size?`${a.font_size}px`:a.font_size:this.getTextSize(i)};"
                            >Camera Unavailable</span
                          >
                          <span
                            style="font-size: ${a.font_size&&"number"==typeof a.font_size?`${Math.max(10,a.font_size-2)}px`:this.getSmallTextSize(i)}; margin-top: 4px; opacity: 0.9;"
                            >Entity: ${n}</span
                          >
                        `}
                  </div>
                  ${!1!==o.show_name?h.qy`
                        <div
                          class="camera-name-overlay"
                          style=${this.styleObjectToCss(w)}
                        >
                          ${l}
                        </div>
                      `:""}
                `:h.qy`
                  <!-- Use HA's native camera image component - same as picture-glance card -->
                  <hui-image
                    .hass=${t}
                    .cameraImage=${n}
                    .cameraView=${o.live_view?"live":"auto"}
                    style=${this.styleObjectToCss(f)}
                    class="camera-image"
                    @error=${()=>{}}
                    @load=${()=>{}}
                  ></hui-image>
                  ${!1!==o.show_name?h.qy`
                        <div
                          class="camera-name-overlay"
                          style=${this.styleObjectToCss(w)}
                        >
                          ${l}
                        </div>
                      `:""}
                `:h.qy`
                <div
                  class="camera-unavailable"
                  style=${this.styleObjectToCss(Object.assign(Object.assign({},f),{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"var(--warning-color, #ff9800)",color:a.color||this.getTextColor(i),position:"static",left:"auto",top:"auto",fontFamily:a.font_family||this.getTextFont(i)}))}
                >
                  <ha-icon
                    icon="mdi:camera-plus"
                    style="font-size: 48px; margin-bottom: 8px;"
                  ></ha-icon>
                  <span
                    style="font-weight: ${a.font_weight||this.getTextWeight(i)}; font-size: ${a.font_size?"number"==typeof a.font_size?`${a.font_size}px`:a.font_size:this.getTextSize(i)};"
                    >No Camera Selected</span
                  >
                  <span
                    style="font-size: ${a.font_size&&"number"==typeof a.font_size?`${Math.max(10,a.font_size-2)}px`:this.getSmallTextSize(i)}; margin-top: 4px; opacity: 0.9;"
                    >Choose a camera entity below</span
                  >
                </div>
                ${!1!==o.show_name?h.qy`
                      <div
                        class="camera-name-overlay"
                        style=${this.styleObjectToCss(w)}
                      >
                        ${l}
                      </div>
                    `:""}
              `}
        </div>
      </div>
    `;return this.hasActiveLink(o)?h.qy`<div
          class="camera-module-clickable"
          @click=${e=>this.handleClick(e,o,t)}
          @dblclick=${e=>this.handleDoubleClick(e,o,t)}
          @mousedown=${e=>this.handleMouseDown(e,o,t)}
          @mouseup=${e=>this.handleMouseUp(e,o,t)}
          @mouseleave=${e=>this.handleMouseLeave(e,o,t)}
          @touchstart=${e=>this.handleTouchStart(e,o,t)}
          @touchend=${e=>this.handleTouchEnd(e,o,t)}
        >
          ${k}
        </div>`:k}validate(e){const t=e,o=[...super.validate(e).errors];return t.template_mode||t.entity&&""!==t.entity.trim()||o.push("Camera entity is required when not using template mode"),!t.template_mode||t.template&&""!==t.template.trim()||o.push("Template code is required when template mode is enabled"),!1!==t.auto_refresh&&t.refresh_interval&&(t.refresh_interval<5||t.refresh_interval>300)&&o.push("Refresh interval must be between 5 and 300 seconds"),t.border_radius&&isNaN(Number(t.border_radius))&&o.push("Border radius must be a number"),t.tap_action&&t.tap_action.action&&o.push(...this.validateAction(t.tap_action)),t.hold_action&&t.hold_action.action&&o.push(...this.validateAction(t.hold_action)),t.double_tap_action&&t.double_tap_action.action&&o.push(...this.validateAction(t.double_tap_action)),{valid:0===o.length,errors:o}}handleClick(e,t,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,o)}),300)}handleDoubleClick(e,t,o){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,o)}handleMouseDown(e,t,o){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,o)}),500)}handleMouseUp(e,t,o){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null)}handleMouseLeave(e,t,o){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTouchStart(e,t,o){this.handleMouseDown(e,t,o)}handleTouchEnd(e,t,o){this.handleMouseUp(e,t,o)}handleTapAction(e,t,o){if(!this.isHolding)if(t.tap_action){const i="default"===t.tap_action.action?{action:"more-info",entity:t.entity}:t.tap_action;b.K.handleAction(i,o,e.target)}else t.entity&&b.K.handleAction({action:"more-info",entity:t.entity},o,e.target)}handleHoldAction(e,t,o){t.hold_action&&"nothing"!==t.hold_action.action&&b.K.handleAction(t.hold_action,o,e.target)}handleDoubleAction(e,t,o){t.double_tap_action&&"nothing"!==t.double_tap_action.action&&b.K.handleAction(t.double_tap_action,o,e.target)}_handleDimensionChange(e,t,o,i){const a={};if(!1!==e.aspect_ratio_linked){const i=e.aspect_ratio_value||1.778;"width"===t?(a.width=o,a.height=Math.round(o/i)):(a.height=o,a.width=Math.round(o*i)),a.width&&(a.width<100||a.width>1e3)&&(a.width=Math.max(100,Math.min(1e3,a.width)),a.height=Math.round(a.width/i)),a.height&&(a.height<100||a.height>1e3)&&(a.height=Math.max(100,Math.min(1e3,a.height)),a.width=Math.round(a.height*i))}else a[t]=o;i(a)}getCameraNamePositionStyles(e,t,o={}){const i={position:"absolute",padding:"6px 12px",background:"rgba(0, 0, 0, 0.7)",color:o.color||this.getTextColor(t),fontSize:o.font_size?"number"==typeof o.font_size?`${o.font_size}px`:o.font_size:this.getTextSize(t),fontWeight:o.font_weight||this.getTextWeight(t),fontFamily:o.font_family||this.getTextFont(t),borderRadius:"4px",textTransform:o.text_transform||void 0,letterSpacing:o.letter_spacing||void 0,lineHeight:o.line_height||void 0,zIndex:"10",pointerEvents:"none",backdropFilter:"blur(4px)",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textShadow:o.text_shadow||"0 1px 2px rgba(0, 0, 0, 0.8)",transition:"all 0.2s ease"};switch(e){case"top-left":default:return Object.assign(Object.assign({},i),{top:"8px",left:"8px"});case"top-right":return Object.assign(Object.assign({},i),{top:"8px",right:"8px"});case"center":return Object.assign(Object.assign({},i),{top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"});case"bottom-left":return Object.assign(Object.assign({},i),{bottom:"8px",left:"8px"});case"bottom-right":return Object.assign(Object.assign({},i),{bottom:"8px",right:"8px"})}}hasActiveLink(e){const t=e.tap_action&&"nothing"!==e.tap_action.action,o=e.hold_action&&"nothing"!==e.hold_action.action,i=e.double_tap_action&&"nothing"!==e.double_tap_action.action;return t||o||i||!!e.entity}refreshCamera(e,t){document.querySelectorAll('hui-image[class*="camera-image"]').forEach((o=>{o.cameraImage===e&&o.hass===t&&(o.hass=Object.assign({},t),o.requestUpdate())}))}getCameraImageUrl(e,t,o){if(!e||!t)return"";let i;try{i=t.hassUrl?`${t.hassUrl()}/api/camera_proxy/${e}`:`/api/camera_proxy/${e}`;const o=i.includes("?")?"&":"?";i+=`${o}token=${Date.now()}`}catch(t){i=`/api/camera_proxy/${e}?token=${Date.now()}`}return i}async getCameraImageBlob(e,t,o){try{const o=`/api/camera_proxy/${e}?t=${Date.now()}`,i=await fetch(o,{method:"GET",credentials:"include",headers:{Accept:"image/*","Cache-Control":"no-cache",Pragma:"no-cache"}});if(!i.ok)return await this.getCameraImageViaWebSocket(e,t);const a=await i.blob();return URL.createObjectURL(a)}catch(o){return await this.getCameraImageViaWebSocket(e,t)}}async getCameraImageViaWebSocket(e,t){try{const o=t.connection;if(!o)throw new Error("No WebSocket connection available");const i=await o.sendMessagePromise({type:"camera_thumbnail",entity_id:e});if(i&&i.content){const e=atob(i.content),t=new Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);const o=new Uint8Array(t),a=new Blob([o],{type:"image/jpeg"});return URL.createObjectURL(a)}throw new Error("No image content received from WebSocket")}catch(e){return""}}async handleImageError(e,t){var o,i,a,n,r,s,l,d,c,p;const u=e.target;if(!u.dataset.triedBlob&&t.entity){u.dataset.triedBlob="true";try{const e=(null===(o=document.querySelector("home-assistant"))||void 0===o?void 0:o.hass)||(null===(i=document.querySelector("ha-panel-lovelace"))||void 0===i?void 0:i.hass)||(null===(a=window.hassConnection)||void 0===a?void 0:a.hass);if(e){const o=await this.getCameraImageBlob(t.entity,e,t.image_quality);if(o)return void(u.src=o)}}catch(e){}}if(t.fallback_image)u.src=t.fallback_image;else{u.style.display="none";const e=u.closest(".camera-image-container");if(e){const o=t.entity?null===(s=null===(r=null===(n=document.querySelector("home-assistant"))||void 0===n?void 0:n.hass)||void 0===r?void 0:r.states)||void 0===s?void 0:s[t.entity]:null,i=(null===(l=null==o?void 0:o.attributes)||void 0===l?void 0:l.brand)||(null===(d=null==o?void 0:o.attributes)||void 0===d?void 0:d.model)||"Unknown",a=(null===(c=document.querySelector("home-assistant"))||void 0===c||c.hass,t);if(e.innerHTML=`\n          <div style="\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            background-color: var(--warning-color, #ff9800);\n            color: ${this.getTextColor(a)};\n            padding: 20px;\n            border-radius: 8px;\n            text-align: center;\n            min-height: 150px;\n            border: 1px solid rgba(255,255,255,0.2);\n            font-family: ${this.getTextFont(a)};\n          ">\n            <ha-icon icon="mdi:camera-off" style="font-size: 48px; margin-bottom: 12px; opacity: 0.9;"></ha-icon>\n            <span style="font-weight: ${this.getTextWeight(a)}; font-size: ${this.getTextSize(a)}; margin-bottom: 8px;">Camera Load Failed</span>\n            <span style="font-size: ${this.getSmallTextSize(a)}; margin-bottom: 8px; opacity: 0.9;">Entity: ${t.entity}</span>\n            <span style="font-size: ${this.getSmallTextSize(a)}; margin-bottom: 12px; opacity: 0.8;">Camera Type: ${i}</span>\n            <div style="font-size: ${this.getSmallTextSize(a)}; opacity: 0.8; line-height: 1.4; margin-bottom: 12px;">\n              <div style="margin-bottom: 6px;">• Check camera entity is working in HA</div>\n              <div style="margin-bottom: 6px;">• Verify RTSP credentials in HA config</div>\n              <div>• Try refreshing the browser</div>\n            </div>\n            <button \n              onclick="window.retryCamera_${null===(p=t.entity)||void 0===p?void 0:p.replace(/\./g,"_")}"\n              style="\n                background: rgba(255,255,255,0.2);\n                border: 1px solid rgba(255,255,255,0.3);\n                color: white;\n                padding: 8px 16px;\n                border-radius: 4px;\n                cursor: pointer;\n                font-size: ${this.getSmallTextSize(a)};\n                font-family: ${this.getTextFont(a)};\n                transition: all 0.2s ease;\n              "\n              onmouseover="this.style.background='rgba(255,255,255,0.3)'"\n              onmouseout="this.style.background='rgba(255,255,255,0.2)'"\n            >\n              🔄 Retry Camera Load\n            </button>\n          </div>\n        `,t.entity){const o=`retryCamera_${t.entity.replace(/\./g,"_")}`;window[o]=async()=>{var o;if(null===(o=document.querySelector("home-assistant"))||void 0===o?void 0:o.hass)try{const o=Date.now(),i=`/api/camera_proxy/${t.entity}?t=${o}`,n=document.createElement("img");n.className="camera-image",n.style.cssText=`\n                  position: absolute;\n                  top: 0;\n                  left: 0;\n                  width: 100%;\n                  height: 100%;\n                  object-fit: ${t.image_fit||"cover"};\n                  border-radius: inherit;\n                `,n.onerror=e=>{"string"!=typeof e&&this.handleImageError(e,t)},n.onload=()=>{e&&(e.innerHTML="",e.appendChild(n))},n.src=i,e&&(e.innerHTML=`\n                    <div style="\n                      display: flex;\n                      align-items: center;\n                      justify-content: center;\n                      flex-direction: column;\n                      background-color: var(--primary-color);\n                      color: ${this.getTextColor(a)};\n                      padding: 20px;\n                      border-radius: 8px;\n                      text-align: center;\n                      min-height: 150px;\n                      font-family: ${this.getTextFont(a)};\n                    ">\n                      <div style="\n                        width: 32px;\n                        height: 32px;\n                        border: 3px solid rgba(255,255,255,0.3);\n                        border-top: 3px solid white;\n                        border-radius: 50%;\n                        animation: spin 1s linear infinite;\n                        margin-bottom: 12px;\n                      "></div>\n                      <span style="font-weight: ${this.getTextWeight(a)}; font-size: ${this.getTextSize(a)};">Retrying Camera Load...</span>\n                      <style>\n                        @keyframes spin {\n                          0% { transform: rotate(0deg); }\n                          100% { transform: rotate(360deg); }\n                        }\n                      </style>\n                    </div>\n                  `)}catch(e){console.error("🎥 Retry failed:",e)}}}}}}renderConditionalFieldsGroup(e,t){return h.qy`
      <div
        class="conditional-fields-group"
        style="margin-top: 16px; padding: 16px; border-left: 4px solid var(--primary-color); background: rgba(var(--rgb-primary-color), 0.08); border-radius: 0 8px 8px 0;"
      >
        <div
          style="font-weight: 600; color: var(--primary-color); margin-bottom: 12px; font-size: 14px;"
        >
          ${e}
        </div>
        ${t}
      </div>
    `}getTextColor(e){return e.text_color||"white"}getTextSize(e){const t=e.text_size||14;return"number"==typeof t?`${t}px`:t}getSmallTextSize(e){const t=e.text_size||14;return`${"number"==typeof t?Math.max(10,t-2):12}px`}getTextWeight(e){return e.text_weight||"500"}getTextFont(e){return e.text_font||'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}styleObjectToCss(e){return Object.entries(e).filter((([e,t])=>null!=t&&""!==t)).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e&&/^\d+$/.test(e)?`${e}px`:e}getPaddingWithDesign(e,t){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${e.padding_top||"8px"} ${e.padding_right||"12px"} ${e.padding_bottom||"8px"} ${e.padding_left||"12px"}`:this.getPaddingCSS(t)}getMarginWithDesign(e,t){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${e.margin_top||"0px"} ${e.margin_right||"0px"} ${e.margin_bottom||"0px"} ${e.margin_left||"0px"}`:this.getMarginCSS(t)}getBorderWithDesign(e,t){return e.border_width&&e.border_style&&e.border_color?`${e.border_width} ${e.border_style} ${e.border_color}`:this.getBorderCSS(t)}getBackgroundImageWithDesign(e,t,o){return"url"===e.background_image_type&&e.background_image?`url('${e.background_image}')`:"entity"===e.background_image_type&&e.background_image_entity&&o.states[e.background_image_entity]?`url('/api/camera_proxy/${e.background_image_entity}')`:this.getBackgroundImageCSS(t,o)}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"8px"} ${this.addPixelUnit(e.padding_right)||"12px"} ${this.addPixelUnit(e.padding_bottom)||"8px"} ${this.addPixelUnit(e.padding_left)||"12px"}`:"8px 12px"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"0px"} ${this.addPixelUnit(e.margin_right)||"0px"} ${this.addPixelUnit(e.margin_bottom)||"0px"} ${this.addPixelUnit(e.margin_left)||"0px"}`:"0px"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){return"url"===e.background_image_type&&e.background_image?`url('${e.background_image}')`:"entity"===e.background_image_type&&e.background_image_entity&&t.states[e.background_image_entity]?`url('/api/camera_proxy/${e.background_image_entity}')`:""}getBorderCSS(e){return e.border_width&&e.border_style&&e.border_color?`${e.border_width} ${e.border_style} ${e.border_color}`:""}validateAction(e){const t=[];return"navigate"!==e.action||e.navigation_path||t.push("Navigation path is required for navigate action"),"call-service"!==e.action||e.service&&e.service_data||t.push("Service and service data are required for call-service action"),t}getStyles(){return"\n      .camera-module-container {\n        width: 100%;\n        box-sizing: border-box;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-name-overlay {\n        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n        backdrop-filter: blur(4px);\n        -webkit-backdrop-filter: blur(4px);\n        transition: all 0.2s ease;\n      }\n      \n      .camera-image-container {\n        position: relative;\n        overflow: hidden;\n        margin: 0 auto;\n        flex-shrink: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-image {\n        width: 100%;\n        height: 100%;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-unavailable {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n        background-color: var(--disabled-color, #f5f5f5);\n        color: var(--secondary-text-color);\n        min-height: 150px;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-module-clickable {\n        cursor: pointer;\n        transition: transform 0.2s ease;\n      }\n      \n      .camera-module-clickable:hover {\n        transform: scale(1.02);\n      }\n      \n      .camera-module-clickable:active {\n        transform: scale(0.98);\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n     \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Conditional fields grouping */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      @keyframes slideInFromLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n\n      /* Global design responsive text */\n      .camera-module-container * {\n        transition: font-size 0.3s ease, color 0.3s ease, font-weight 0.3s ease;\n      }\n\n      /* Enhanced animations for global design changes */\n      @keyframes textSizeChange {\n        0% { transform: scale(1); }\n        50% { transform: scale(1.02); }\n        100% { transform: scale(1); }\n      }\n\n      .camera-module-container.design-updating {\n        animation: textSizeChange 0.3s ease;\n      }\n    "}}var y=o(345),x=o(371),w=o(276),k=o(340),$=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};let C=class extends h.WF{static get styles(){return h.AH`
      ha-entity-picker {
        width: 100%;
        display: block;
      }
    `}render(){return h.qy`
      <ha-entity-picker
        .hass=${this.hass}
        .label=${this.label}
        .value=${this.value||""}
        .entityFilter=${this.entityFilter}
        @value-changed=${this._valueChanged}
        allow-custom-entity
      ></ha-entity-picker>
    `}_valueChanged(e){e.stopPropagation();const t=e.detail.value;t!==this.value&&(this.value=t,(0,k.rC)(this,"value-changed",{value:t}))}};$([(0,w.MZ)({attribute:!1})],C.prototype,"hass",void 0),$([(0,w.MZ)()],C.prototype,"label",void 0),$([(0,w.MZ)()],C.prototype,"value",void 0),$([(0,w.MZ)()],C.prototype,"entityFilter",void 0),C=$([(0,w.EM)("ultra-card-entity-picker")],C),o(768);var S=o(381),A=o(57);class T extends m.m{constructor(){super(...arguments),this.metadata={type:"graphs",title:"Graphs",description:"Display interactive charts and graphs with Home Assistant data",author:"WJD Designs",version:"1.0.0",icon:"mdi:chart-line",category:"data",tags:["charts","graphs","data","visualization","statistics","analytics"]},this._updateInterval=null,this._historyData={},this._historyError={},this._historyLoading={},this._deferredHistoryScheduled={},this.clickTimeout=null,this.holdTimeout=null,this.isHolding=!1,this.expandedEntities=new Set}_getCacheStore(){const e=window;if(!e.__ultraGraphsCache)try{const t=localStorage.getItem("__ultraGraphsCache");e.__ultraGraphsCache=t?JSON.parse(t):{}}catch(t){e.__ultraGraphsCache={}}return e.__ultraGraphsCache}_persistCacheStore(e){try{localStorage.setItem("__ultraGraphsCache",JSON.stringify(e))}catch(e){}}_makeCacheKey(e){return`${(e.entities||[]).filter((e=>e.entity)).map((e=>`${e.entity}|${e.attribute||"state"}`)).join(";")}::${e.time_period}`}_tryReadCache(e){const t=this._getCacheStore(),o=this._makeCacheKey(e),i=t[o];if(!i)return null;const a=Date.now();return i.expiresAt&&i.expiresAt>a&&i.data?i.data:(delete t[o],this._persistCacheStore(t),null)}_writeCache(e,t){const o=this._getCacheStore();o[this._makeCacheKey(e)]={expiresAt:Date.now()+3e5,data:t},this._persistCacheStore(o)}createDefault(e,t){return{id:e||this.generateId("graphs"),type:"graphs",name:"New Graph",chart_type:"line",entities:[],time_period:"24h",title:"Chart",chart_width:"100%",chart_width_percent:100,chart_height:345,background_color:"transparent",show_title:!0,chart_alignment:"center",show_display_name:!0,show_entity_value:!0,info_position:"top_left",show_legend:!0,legend_position:"bottom_left",show_grid:!0,smooth_curves:!0,show_tooltips:!0,show_slice_labels:!0,tap_action:{action:"default"},hold_action:{action:"default"},double_tap_action:{action:"default"},template_mode:!1,template:"",enable_hover_effect:!1}}getChartTypeOptions(e){return[{value:"line",label:(0,v.kg)("editor.graphs.types.line",e,"Line Chart")},{value:"bar",label:(0,v.kg)("editor.graphs.types.bar",e,"Bar Chart")},{value:"pie",label:(0,v.kg)("editor.graphs.types.pie",e,"Pie Chart")},{value:"donut",label:(0,v.kg)("editor.graphs.types.donut",e,"Donut Chart")}]}getTimePeriodOptions(e){return[{value:"1h",label:(0,v.kg)("editor.graphs.period.1h",e,"Last Hour")},{value:"3h",label:(0,v.kg)("editor.graphs.period.3h",e,"Last 3 Hours")},{value:"6h",label:(0,v.kg)("editor.graphs.period.6h",e,"Last 6 Hours")},{value:"12h",label:(0,v.kg)("editor.graphs.period.12h",e,"Last 12 Hours")},{value:"24h",label:(0,v.kg)("editor.graphs.period.24h",e,"Last 24 Hours")},{value:"2d",label:(0,v.kg)("editor.graphs.period.2d",e,"Last 2 Days")},{value:"7d",label:(0,v.kg)("editor.graphs.period.7d",e,"Last Week")},{value:"30d",label:(0,v.kg)("editor.graphs.period.30d",e,"Last Month")},{value:"90d",label:(0,v.kg)("editor.graphs.period.90d",e,"Last 3 Months")},{value:"365d",label:(0,v.kg)("editor.graphs.period.365d",e,"Last Year")}]}getAggregationOptions(e){return[{value:"mean",label:(0,v.kg)("editor.graphs.agg.mean",e,"Average")},{value:"sum",label:(0,v.kg)("editor.graphs.agg.sum",e,"Sum")},{value:"min",label:(0,v.kg)("editor.graphs.agg.min",e,"Minimum")},{value:"max",label:(0,v.kg)("editor.graphs.agg.max",e,"Maximum")},{value:"median",label:(0,v.kg)("editor.graphs.agg.median",e,"Median")},{value:"first",label:(0,v.kg)("editor.graphs.agg.first",e,"First Value")},{value:"last",label:(0,v.kg)("editor.graphs.agg.last",e,"Last Value")},{value:"count",label:(0,v.kg)("editor.graphs.agg.count",e,"Count")},{value:"delta",label:(0,v.kg)("editor.graphs.agg.delta",e,"Change")}]}getLegendPositionOptions(e){return[{value:"top",label:(0,v.kg)("editor.graphs.position.top",e,"Top")},{value:"bottom",label:(0,v.kg)("editor.graphs.position.bottom",e,"Bottom")},{value:"left",label:(0,v.kg)("editor.graphs.position.left",e,"Left")},{value:"right",label:(0,v.kg)("editor.graphs.position.right",e,"Right")},{value:"none",label:(0,v.kg)("editor.graphs.position.hidden",e,"Hidden")}]}renderGeneralTab(e,t,o,i){var a,n,r,s,l,d,c;const p=e,u=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return h.qy`
      <div class="uc-graphs-general-tab">
        ${g.Q.injectCleanFormStyles()}

        <!-- Chart Type Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;"
          >
            <ha-icon icon="mdi:chart-line" style="color: var(--primary-color);"></ha-icon>
            ${(0,v.kg)("editor.graphs.chart_type.title",u,"Chart Type")}
          </div>

          ${g.Q.renderField((0,v.kg)("editor.graphs.chart_type.type",u,"Type"),(0,v.kg)("editor.graphs.chart_type.desc",u,"Select the visualization style for your data."),t,{chart_type:p.chart_type},[g.Q.createSchemaItem("chart_type",{select:{options:this.getChartTypeOptions(u),mode:"dropdown"}})],(e=>i({chart_type:e.detail.value.chart_type})))}
        </div>

        <!-- Data Sources Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;"
          >
            <ha-icon icon="mdi:database" style="color: var(--primary-color);"></ha-icon>
            ${(0,v.kg)("editor.graphs.data_sources.title",u,"Data Sources")}
          </div>

          <div class="entities-grid" style="display: grid; gap: 12px;">
            ${(null===(n=p.entities)||void 0===n?void 0:n.map(((e,o)=>{var a,n,r;return h.qy`
                <div
                  class="entity-card"
                  style="
                    background: var(--primary-background-color); 
                    border-radius: 8px; 
                    padding: 16px; 
                    border-left: 4px solid ${e.color||this._getDefaultColor(o)};
                    position: relative;
                    transition: all 0.2s ease;
                  "
                >
                  ${((null===(a=p.entities)||void 0===a?void 0:a.length)||0)>1?h.qy`
                        <ha-icon-button
                          @click=${()=>this._removeEntity(p,o,i)}
                          style="
                        position: absolute;
                        top: 8px;
                        right: 8px;
                        --mdc-icon-button-size: 32px;
                        --mdc-icon-size: 16px;
                        color: var(--error-color);
                      "
                        >
                          <ha-icon icon="mdi:close"></ha-icon>
                        </ha-icon-button>
                      `:""}

                  <div
                    style="display: grid; gap: 12px; margin-top: ${((null===(n=p.entities)||void 0===n?void 0:n.length)||0)>1?"20px":"0"};"
                  >
                    <!-- Entity Header -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                      <div style="flex: 1; display: flex; align-items: center; gap: 8px;">
                        <div
                          style="
                             width: 12px;
                             height: 12px;
                             background: ${e.color||this._getDefaultColor(o)};
                             border-radius: 2px;
                             flex-shrink: 0;
                           "
                        ></div>
                        <span
                          style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                        >
                          ${e.name||(e.entity?(null===(r=t.states[e.entity])||void 0===r?void 0:r.attributes.friendly_name)||e.entity.split(".")[1]:`Entity ${o+1}`)}
                        </span>
                      </div>
                    </div>

                    <!-- Basic Settings (Always Visible) -->
                    <div style="display: grid; gap: 12px;">
                      <!-- Entity Picker -->
                      ${g.Q.renderField("Entity","Select an entity to plot.",t,{entity:e.entity||""},[g.Q.createSchemaItem("entity",{entity:{}})],(e=>{var t,a;this._updateEntity(p,o,{entity:(null===(t=e.detail.value)||void 0===t?void 0:t.entity)||(null===(a=e.detail.value)||void 0===a?void 0:a.entity)||e.detail.value},i)}))}

                      <!-- Display Name -->
                      <input
                        type="text"
                        .value=${e.name||""}
                        placeholder="${(0,v.kg)("editor.graphs.entity.display_name_placeholder",u,"Display name (optional)")}"
                        @input=${e=>{const t=e.target;this._updateEntity(p,o,{name:t.value},i)}}
                        style="
                          padding: 10px 12px;
                          border: 1px solid var(--divider-color);
                          border-radius: 6px;
                          background: var(--secondary-background-color);
                          color: var(--primary-text-color);
                          font-size: 14px;
                          transition: border-color 0.2s ease;
                        "
                      />

                      <!-- Series Color (below name) -->
                      <div style="margin-top: 4px;">
                        <ultra-color-picker
                          .value=${e.color||this._getDefaultColor(o)}
                          @value-changed=${e=>{this._updateEntity(p,o,{color:e.detail.value},i)}}
                          style="width: 100%; height: 40px;"
                        ></ultra-color-picker>
                      </div>

                      <!-- Primary entity toggle -->
                      <label
                        style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px; background: var(--primary-background-color);"
                      >
                        <ha-switch
                          .checked=${!0===e.is_primary||0===o&&!(p.entities||[]).some((e=>e.is_primary))}
                          @change=${e=>{const t=e.target,a=p.entities||[];let n;n=t.checked?a.map(((e,t)=>Object.assign(Object.assign({},e),{is_primary:t===o}))):a.some(((e,t)=>t!==o&&e.is_primary))?a.map(((e,t)=>t===o?Object.assign(Object.assign({},e),{is_primary:!1}):e)):a.map(((e,t)=>Object.assign(Object.assign({},e),{is_primary:t===o}))),i({entities:n})}}
                        ></ha-switch>
                        <span style="font-size:13px; color: var(--primary-text-color);"
                          >Use as card info</span
                        >
                      </label>
                    </div>

                    <!-- Advanced Options (Collapsible) -->
                    <div
                      class="entity-advanced-options"
                      style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.3s ease, opacity 0.2s ease;
                        opacity: 0;
                        border-top: none;
                        margin-top: 0;
                      "
                    >
                      <div style="padding-top: 16px; display: grid; gap: 16px;">
                        <!-- Attribute Selection -->
                        ${g.Q.renderField("Attribute","Use entity state or select a specific attribute to track.",t,{attribute:e.attribute||""},[g.Q.createSchemaItem("attribute",{select:{options:[{value:"",label:"State (default)"},...this._getEntityAttributes(e.entity,t)],mode:"dropdown"}})],(e=>{this._updateEntity(p,o,{attribute:e.detail.value.attribute},i)}))}

                        <!-- Line Chart Specific Options -->
                        ${["line","area"].includes(p.chart_type)?h.qy`
                              <div
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;"
                              >
                                <label
                                  style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                                >
                                  <ha-switch
                                    .checked=${!1!==e.show_points}
                                    @change=${e=>{const t=e.target;this._updateEntity(p,o,{show_points:t.checked},i)}}
                                  ></ha-switch>
                                  <span style="font-size: 13px; color: var(--primary-text-color);"
                                    >${(0,v.kg)("editor.graphs.line.show_points",u,"Show Points")}</span
                                  >
                                </label>

                                <label
                                  style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                                >
                                  <ha-switch
                                    .checked=${!0===e.fill_area}
                                    @change=${e=>{const t=e.target;this._updateEntity(p,o,{fill_area:t.checked},i)}}
                                  ></ha-switch>
                                  <span style="font-size: 13px; color: var(--primary-text-color);"
                                    >${(0,v.kg)("editor.graphs.line.fill_area",u,"Fill Area")}</span
                                  >
                                </label>
                              </div>

                              <!-- Line Width and Style -->
                              <div
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;"
                              >
                                <div>
                                  <label
                                    style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                                  >
                                    ${(0,v.kg)("editor.graphs.line.line_width",u,"Line Width")}:
                                    ${e.line_width||2}px
                                  </label>
                                  <input
                                    type="range"
                                    min="1"
                                    max="8"
                                    step="1"
                                    .value=${e.line_width||2}
                                    @input=${e=>{const t=e.target;this._updateEntity(p,o,{line_width:parseInt(t.value)},i)}}
                                    style="
                                      width: 100%;
                                      height: 4px;
                                      background: var(--divider-color);
                                      border-radius: 2px;
                                      outline: none;
                                      -webkit-appearance: none;
                                    "
                                  />
                                </div>

                                ${g.Q.renderField("Line Style","",t,{line_style:e.line_style||"solid"},[g.Q.createSchemaItem("line_style",{select:{options:[{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"},{value:"dotted",label:"Dotted"}],mode:"dropdown"}})],(e=>{this._updateEntity(p,o,{line_style:e.detail.value.line_style},i)}))}
                              </div>
                            `:""}
                        ${["pie","donut"].includes(p.chart_type)?h.qy`
                              <label
                                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                              >
                                <ha-switch
                                  .checked=${!1!==e.label_show_name}
                                  @change=${e=>{const t=e.target;this._updateEntity(p,o,{label_show_name:t.checked},i)}}
                                ></ha-switch>
                                <span style="font-size: 13px; color: var(--primary-text-color);"
                                  >${(0,v.kg)("editor.graphs.pie.show_title",u,"Show Title in Slice")}</span
                                >
                              </label>
                              <label
                                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                              >
                                <ha-switch
                                  .checked=${!1!==e.label_show_value}
                                  @change=${e=>{const t=e.target;this._updateEntity(p,o,{label_show_value:t.checked},i)}}
                                ></ha-switch>
                                <span style="font-size: 13px; color: var(--primary-text-color);"
                                  >${(0,v.kg)("editor.graphs.pie.show_value",u,"Show Value in Slice")}</span
                                >
                              </label>
                            `:""}
                      </div>
                    </div>

                    <!-- Expand/Collapse Button -->
                    <div style="display:flex; justify-content:center; margin-top: 12px;">
                      <ha-button
                        @click=${e=>this._toggleEntityOptions(e,o)}
                        style="--mdc-theme-primary: var(--secondary-text-color); background: transparent;"
                      >
                        <span style="display:inline-flex; align-items:center; gap:6px;">
                          <ha-icon
                            icon="mdi:chevron-down"
                            class="entity-toggle-btn"
                            style="--mdc-icon-size:20px;"
                          ></ha-icon>
                          <span>Expand Options</span>
                        </span>
                      </ha-button>
                    </div>
                  </div>
                </div>
              `})))||""}
            ${0===((null===(r=p.entities)||void 0===r?void 0:r.length)||0)?h.qy`
                  <div
                    style="
                  text-align: center; 
                  padding: 40px 20px; 
                  color: var(--secondary-text-color); 
                  background: var(--primary-background-color); 
                  border-radius: 8px; 
                  border: 2px dashed var(--divider-color);
                "
                  >
                    <ha-icon
                      icon="mdi:chart-line"
                      style="font-size: 48px; margin-bottom: 12px; opacity: 0.5;"
                    ></ha-icon>
                    <div style="font-size: 16px; margin-bottom: 4px; font-weight: 500;">
                      ${(0,v.kg)("editor.graphs.data_sources.no_entities",u,"No entities added")}
                    </div>
                    <div style="font-size: 14px; opacity: 0.7;">
                      ${(0,v.kg)("editor.graphs.data_sources.add_first_entity",u,"Add your first entity to create a chart")}
                    </div>
                  </div>
                `:""}

            <ha-button
              @click=${()=>this._addEntity(p,i)}
              style="
                margin-top: 8px; 
                width: 100%;
                --mdc-theme-primary: var(--primary-color);
                --mdc-button-outline-color: var(--primary-color);
              "
            >
              <ha-icon icon="mdi:plus" slot="icon"></ha-icon>
              ${(0,v.kg)("editor.graphs.data_sources.add_entity",u,"Add Entity")}
            </ha-button>
          </div>
        </div>

        <!-- Display Options Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 20px; display: flex; align-items: center; gap: 8px;"
          >
            <ha-icon icon="mdi:cog" style="color: var(--primary-color);"></ha-icon>
            ${(0,v.kg)("editor.graphs.display.title",u,"Display Options")}
          </div>

          <div style="display: grid; gap: 16px;">
            <!-- Show Graph Title Toggle -->
            <label
              style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
            >
              <ha-switch
                .checked=${!1!==p.show_title}
                @change=${e=>{const t=e.target;i({show_title:t.checked})}}
              ></ha-switch>
              <span>${(0,v.kg)("editor.graphs.display.show_title",u,"Show Graph Title")}</span>
            </label>

            <!-- Show Graph Value Toggle -->
            <label
              style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
            >
              <ha-switch
                .checked=${!1!==p.show_entity_value}
                @change=${e=>{const t=e.target;i({show_entity_value:t.checked})}}
              ></ha-switch>
              <span>${(0,v.kg)("editor.graphs.display.show_value",u,"Show Graph Value")}</span>
            </label>

            <!-- Chart Title -->
            ${!1!==p.show_title?h.qy`<div>
                  <label
                    style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                  >
                    ${(0,v.kg)("editor.graphs.display.chart_title",u,"Chart Title")}
                  </label>
                  <input
                    type="text"
                    .value=${p.title||""}
                    placeholder="${(0,v.kg)("editor.graphs.display.chart_title_placeholder",u,"Enter chart title")}"
                    @input=${e=>{const t=e.target;i({title:t.value})}}
                    style="
                      width: 100%;
                      padding: 10px 12px;
                      border: 1px solid var(--divider-color);
                      border-radius: 6px;
                      background: var(--secondary-background-color);
                      color: var(--primary-text-color);
                      font-size: 14px;
                      transition: border-color 0.2s ease;
                      box-sizing: border-box;
                    "
                  />
                </div>`:""}

            <!-- Time Period -->
            ${g.Q.renderField("Time Period","How much historical data to show.",t,{time_period:p.time_period},[g.Q.createSchemaItem("time_period",{select:{options:this.getTimePeriodOptions(u),mode:"dropdown"}})],(e=>{const o=e.detail.value.time_period;i({time_period:o}),delete this._historyData[p.id],delete this._historyError[p.id],delete this._historyLoading[p.id],delete this._deferredHistoryScheduled[p.id];const a=Object.assign(Object.assign({},p),{time_period:o});this._loadHistoryData(a,t),this._triggerHistoryLoad(a,t),this.requestUpdate()}))}

            <!-- Normalize Values Toggle -->
            <div style="margin-bottom: 16px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <ha-switch
                  .checked=${p.normalize_values||!1}
                  @change=${e=>i({normalize_values:e.target.checked})}
                ></ha-switch>
                <span style="font-size: 14px;"
                  >${(0,v.kg)("editor.graphs.display.normalize_values",u,"Normalize values to same scale")}</span
                >
              </label>
              <div
                style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px; margin-left: 40px;"
              >
                Useful when comparing entities with different units (e.g., % vs miles)
              </div>
            </div>

            <!-- Chart Height -->
            <div>
              <label
                style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
              >
                ${(0,v.kg)("editor.graphs.display.chart_height",u,"Chart Height")}
              </label>
              <div
                style="display: grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items: center;"
              >
                <input
                  type="range"
                  min="80"
                  max="400"
                  step="5"
                  .value=${null!==(s=p.chart_height)&&void 0!==s?s:345}
                  @input=${e=>{const t=e.target,o=parseInt(t.value);i({chart_height:o})}}
                  style="
                    width: 100%;
                    height: 4px;
                    background: var(--divider-color);
                    border-radius: 2px;
                    outline: none;
                    -webkit-appearance: none;
                  "
                />
                <span
                  style="font-size: 13px; color: var(--secondary-text-color); min-width: 56px; text-align: right;"
                  >${null!==(l=p.chart_height)&&void 0!==l?l:345}px</span
                >
                <button
                  @click=${()=>i({chart_height:345})}
                  title="${(0,v.kg)("editor.fields.reset_default_value",u,"Reset to default ({value})").replace("{value}","345px")}"
                  style="
                    width: 32px;
                    height: 32px;
                    padding: 0;
                    border: 1px solid var(--divider-color);
                    border-radius: 4px;
                    background: var(--secondary-background-color);
                    color: var(--primary-text-color);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.2s ease;
                    flex-shrink: 0;
                  "
                  @mouseenter=${e=>{const t=e.target;t.style.background="var(--primary-color)",t.style.color="var(--text-primary-color)",t.style.borderColor="var(--primary-color)"}}
                  @mouseleave=${e=>{const t=e.target;t.style.background="var(--secondary-background-color)",t.style.color="var(--primary-text-color)",t.style.borderColor="var(--divider-color)"}}
                >
                  <ha-icon icon="mdi:refresh" style="font-size: 18px;"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Chart Width (%) -->
            <div>
              <label
                style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
              >
                Chart Width (%)
              </label>
              <div
                style="display: grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items: center;"
              >
                <input
                  type="range"
                  min="10"
                  max="100"
                  step="1"
                  .value=${null!==(d=p.chart_width_percent)&&void 0!==d?d:100}
                  @input=${e=>{const t=e.target,o=Math.max(10,Math.min(100,parseInt(t.value)));i({chart_width_percent:o})}}
                  style="
                    width: 100%;
                    height: 4px;
                    background: var(--divider-color);
                    border-radius: 2px;
                    outline: none;
                    -webkit-appearance: none;
                  "
                />
                <span
                  style="font-size: 13px; color: var(--secondary-text-color); min-width: 56px; text-align: right;"
                  >${null!==(c=p.chart_width_percent)&&void 0!==c?c:100}%</span
                >
                <button
                  @click=${()=>i({chart_width_percent:100})}
                  title="Reset to default (100%)"
                  style="
                    width: 32px;
                    height: 32px;
                    padding: 0;
                    border: 1px solid var(--divider-color);
                    border-radius: 4px;
                    background: var(--secondary-background-color);
                    color: var(--primary-text-color);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.2s ease;
                    flex-shrink: 0;
                  "
                  @mouseenter=${e=>{const t=e.target;t.style.background="var(--primary-color)",t.style.color="var(--text-primary-color)",t.style.borderColor="var(--primary-color)"}}
                  @mouseleave=${e=>{const t=e.target;t.style.background="var(--secondary-background-color)",t.style.color="var(--primary-text-color)",t.style.borderColor="var(--divider-color)"}}
                >
                  <ha-icon icon="mdi:refresh" style="font-size: 18px;"></ha-icon>
                </button>
              </div>
              <div style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;">
                Percentage of the available module width. Alignment controls placement.
              </div>
            </div>
            ${g.Q.renderField("Info Position","Position of the overlay showing the name/value.",t,{info_position:p.info_position||"top_left"},[g.Q.createSchemaItem("info_position",{select:{options:[{value:"top_left",label:"Top Left"},{value:"top_right",label:"Top Right"},{value:"bottom_left",label:"Bottom Left"},{value:"bottom_right",label:"Bottom Right"},{value:"middle",label:"Middle"}],mode:"dropdown"}})],(e=>i({info_position:e.detail.value.info_position})))}

            <!-- Legend Position -->
            ${!1!==p.show_legend?g.Q.renderField("Legend Position","Where to place the legend when enabled.",t,{legend_position:p.legend_position||"bottom_left"},[g.Q.createSchemaItem("legend_position",{select:{options:[{value:"bottom_left",label:"Bottom Left"},{value:"bottom_right",label:"Bottom Right"},{value:"top_left",label:"Top Left"},{value:"top_right",label:"Top Right"}],mode:"dropdown"}})],(e=>i({legend_position:e.detail.value.legend_position}))):""}

            <!-- Chart Alignment -->
            ${g.Q.renderField("Chart Alignment","Alignment of the chart within its container.",t,{chart_alignment:p.chart_alignment||"center"},[g.Q.createSchemaItem("chart_alignment",{select:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}],mode:"dropdown"}})],(e=>i({chart_alignment:e.detail.value.chart_alignment})))}

            <!-- Background Color -->
            <div>
              <label
                style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
              >
                Background Color
              </label>
              <ultra-color-picker
                .value=${p.background_color||"transparent"}
                @value-changed=${e=>{i({background_color:e.detail.value})}}
                style="width: 100%; height: 40px;"
              ></ultra-color-picker>
            </div>

            <!-- Chart Options -->
            <label
              style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 8px;"
              >Chart Options</label
            >
            <label
              style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
            >
              <ha-switch
                .checked=${!1!==p.show_legend}
                @change=${e=>{const t=e.target;i({show_legend:t.checked})}}
              ></ha-switch>
              <span>Show Legend</span>
            </label>
            ${"line"===p.chart_type?h.qy`<label
                  style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                >
                  <ha-switch
                    .checked=${!1!==p.show_grid}
                    @change=${e=>{const t=e.target;i({show_grid:t.checked})}}
                  ></ha-switch>
                  <span>Show Grid</span>
                </label>`:""}
            ${["pie","donut"].includes(p.chart_type)?h.qy`
                  <label
                    style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                  >
                    <ha-switch
                      .checked=${Number(p.slice_gap||0)>0}
                      @change=${e=>{const t=e.target,o=(p.entities||[]).filter((e=>null==e?void 0:e.entity)).length,a=Math.max(2,Math.min(4,Math.round(360/Math.max(30*o,1))));i({slice_gap:t.checked?a:0})}}
                    ></ha-switch>
                    <span>Add Slice Gap</span>
                  </label>
                `:""}
            ${"line"===p.chart_type?h.qy`
                  <label
                    style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                  >
                    <ha-switch
                      .checked=${!1!==p.smooth_curves}
                      @change=${e=>{const t=e.target;i({smooth_curves:t.checked})}}
                    ></ha-switch>
                    <span>Smooth Lines</span>
                  </label>
                `:""}
            ${"line"===p.chart_type?h.qy`<label
                  style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                >
                  <ha-switch
                    .checked=${!1!==p.show_tooltips}
                    @change=${e=>{const t=e.target;i({show_tooltips:t.checked})}}
                  ></ha-switch>
                  <span>Show Tooltips</span>
                </label>`:""}
          </div>
        </div>
      </div>
    `}renderActionsTab(e,t,o,i){const a=e;return _.A.render(a,t,(e=>i(e)))}renderOtherTab(e,t,o,i){const a=e;return x.X.render(a,t,(e=>i(e)))}renderPreview(e,t){var o,i,a,n;const r=e,s=r,l=r.design||{};r.template_mode&&r.template&&(this._templateService||(this._templateService=new y.I(t))),this._loadHistoryData(r,t);const d=l.color||s.color||"var(--primary-text-color)",c=l.font_size||s.font_size||void 0,p=l.font_family||s.font_family||void 0,u=l.font_weight||s.font_weight||void 0,m=l.text_transform||s.text_transform||void 0,g=l.font_style||s.font_style||void 0,_=l.letter_spacing||s.letter_spacing||void 0,b=l.line_height||s.line_height||void 0,v=(()=>{const e=l.text_shadow_h||s.text_shadow_h,t=l.text_shadow_v||s.text_shadow_v,o=l.text_shadow_blur||s.text_shadow_blur,i=l.text_shadow_color||s.text_shadow_color;if(e||t||o||i)return`${e||"0px"} ${t||"0px"} ${o||"0px"} ${i||"rgba(0,0,0,0.2)"}`})(),f=l.background_color||s.background_color,x=(e={})=>{const t=[],o=e.color||d;o&&t.push(`color: ${o}`);const i=e.fontSize||c;return i&&t.push(`font-size: ${i}`),p&&t.push(`font-family: ${p}`),u&&t.push(`font-weight: ${u}`),m&&t.push(`text-transform: ${m}`),g&&t.push(`font-style: ${g}`),_&&t.push(`letter-spacing: ${_}`),b&&t.push(`line-height: ${b}`),v&&t.push(`text-shadow: ${v}`),t.join("; ")};let w={padding:l.padding_top||l.padding_bottom||l.padding_left||l.padding_right||s.padding_top||s.padding_bottom||s.padding_left||s.padding_right?`${this.addPixelUnit(l.padding_top||s.padding_top)||"0px"} ${this.addPixelUnit(l.padding_right||s.padding_right)||"0px"} ${this.addPixelUnit(l.padding_bottom||s.padding_bottom)||"0px"} ${this.addPixelUnit(l.padding_left||s.padding_left)||"0px"}`:"0",margin:l.margin_top||l.margin_bottom||l.margin_left||l.margin_right||s.margin_top||s.margin_bottom||s.margin_left||s.margin_right?`${this.addPixelUnit(l.margin_top||s.margin_top)||"0px"} ${this.addPixelUnit(l.margin_right||s.margin_right)||"0px"} ${this.addPixelUnit(l.margin_bottom||s.margin_bottom)||"0px"} ${this.addPixelUnit(l.margin_left||s.margin_left)||"0px"}`:"0",background:l.background_color&&"transparent"!==l.background_color?l.background_color:s.background_color&&"transparent"!==s.background_color?s.background_color:"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},s),l),t),backgroundSize:l.background_size||s.background_size||"cover",backgroundPosition:l.background_position||s.background_position||"center",backgroundRepeat:l.background_repeat||s.background_repeat||"no-repeat",backdropFilter:l.backdrop_filter||s.backdrop_filter||"",border:l.border_style?`${l.border_width||"1px"} ${l.border_style} ${l.border_color||"var(--divider-color)"}`:this.getBorderCSS(s),borderRadius:this.addPixelUnit(l.border_radius||s.border_radius)||"0",width:l.width||s.width||"100%",height:l.height||s.height||"",maxWidth:l.max_width||s.max_width||"",maxHeight:l.max_height||s.max_height||"",minWidth:l.min_width||s.min_width||"",minHeight:l.min_height||s.min_height||"",overflow:l.overflow||s.overflow||"",clipPath:l.clip_path||s.clip_path||"",position:l.position||s.position||"",top:l.top||s.top||"",right:l.right||s.right||"",bottom:l.bottom||s.bottom||"",left:l.left||s.left||"",zIndex:l.z_index||s.z_index||"",boxShadow:l.box_shadow_h||l.box_shadow_v||l.box_shadow_blur||l.box_shadow_spread||l.box_shadow_color?`${l.box_shadow_h||"0px"} ${l.box_shadow_v||"0px"} ${l.box_shadow_blur||"0px"} ${l.box_shadow_spread||"0px"} ${l.box_shadow_color||"rgba(0,0,0,0.2)"}`:"",boxSizing:"border-box",display:"block"};if("line"===r.chart_type&&(w.padding="0"),!(r.entities&&r.entities.length>0&&r.entities.some((e=>e.entity)))){const e=f;return h.qy`
        <div class="uc-graphs-module" style="${this.styleObjectToCss(w)}">
          <div
            class="chart-placeholder"
            style="
              height: ${Math.min(200,"number"==typeof r.chart_height?r.chart_height:parseInt(String(r.chart_height))||160)}px;
              background: ${this._formatColor(e)||"rgba(0, 0, 0, 0.2)"};
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            ${x({color:d})};
            font-size: 14px;
          "
          >
            <div style="text-align: center;">
              <ha-icon icon="mdi:chart-line" style="font-size: 48px; opacity: 0.5;"></ha-icon>
              <div style="margin-top: 8px;">No entities configured</div>
              <div style="font-size: 12px; opacity: 0.7;">Add entities to display chart</div>
            </div>
          </div>
        </div>
      `}const k=r.entities.find((e=>e.is_primary&&e.entity))||r.entities.find((e=>e.entity)),$=k?t.states[k.entity]:void 0,C=r.title||(null==k?void 0:k.name)||(null===(o=null==$?void 0:$.attributes)||void 0===o?void 0:o.friendly_name)||"Chart Title",S=((null==k?void 0:k.attribute)?null===(i=null==$?void 0:$.attributes)||void 0===i?void 0:i.unit_of_measurement:null===(a=null==$?void 0:$.attributes)||void 0===a?void 0:a.unit_of_measurement)||"",T=k?k.attribute?null===(n=null==$?void 0:$.attributes)||void 0===n?void 0:n[k.attribute]:null==$?void 0:$.state:void 0,z="number"==typeof T?T:parseFloat(T),I=this._prepareSimpleChartData(r,t),D=r.info_position||"top_left",L=(()=>{if(!k||!$)return"";try{const e=void 0!==T?String(T):$.state;return(0,A.formatEntityState)(t,k.entity,{state:e,includeUnit:!0})}catch(e){return`${isNaN(z)?"":z}${S?` ${S}`:""}`}})(),E=["pie","donut"].includes(r.chart_type)?h.qy``:h.qy`
          <div style="position:absolute; ${{top_left:"top:12px; left:16px; text-align:left;",top_right:"top:12px; right:16px; text-align:right;",bottom_left:"bottom:12px; left:16px; text-align:left;",bottom_right:"bottom:12px; right:16px; text-align:right;",middle:"top:50%; left:50%; transform: translate(-50%, -50%); text-align:center;"}[D]}; pointer-events:none; z-index:2;">
            ${!1!==r.show_display_name&&!1!==r.show_title?h.qy`<div
                  style="${x({fontSize:c||"18px"})}; font-weight: 600; ${l.text_align?`text-align:${l.text_align};`:""}"
                >
                  ${C}
                </div>`:""}
            ${!1!==r.show_entity_value?h.qy`<div
                  style="${x({fontSize:c||"28px"})}; line-height: 1.1; font-weight: 600; margin-top: 6px; ${l.text_align?`text-align:${l.text_align};`:""}"
                >
                  ${L}
                </div>`:""}
          </div>
        `,M=this._historyData[r.id],P=!0===this._historyLoading[r.id]&&!M,R=(this.getBackgroundImageCSS(Object.assign(Object.assign({},s),l),t),r.chart_alignment||"center"),O="left"===R?"flex-start":"right"===R?"flex-end":"center",U=this._resolveChartWidth(r),N=h.qy`
      <div class="uc-graphs-module" style="${this.styleObjectToCss(w)}">
        <uc-preview-container
          .alignment=${r.chart_alignment||"center"}
          .height=${"number"==typeof r.chart_height?r.chart_height:parseInt(String(r.chart_height))||200}
        >
          <div style="display:flex; width:100%; justify-content:${O}">
            <div style="width:${U}; max-width:100%;">
              ${this._renderSimpleChart(r,I,t,(()=>{const e=r,t=r.design||{},o=t.color||e.color||"var(--primary-text-color)",i=[];return o&&i.push(`color: ${o}`),(t.font_size||e.font_size)&&i.push(`font-size: ${t.font_size||e.font_size}`),(t.font_family||e.font_family)&&i.push(`font-family: ${t.font_family||e.font_family}`),(t.font_weight||e.font_weight)&&i.push(`font-weight: ${t.font_weight||e.font_weight}`),(t.text_transform||e.text_transform)&&i.push(`text-transform: ${t.text_transform||e.text_transform}`),(t.font_style||e.font_style)&&i.push(`font-style: ${t.font_style||e.font_style}`),(t.letter_spacing||e.letter_spacing)&&i.push(`letter-spacing: ${t.letter_spacing||e.letter_spacing}`),(t.line_height||e.line_height)&&i.push(`line-height: ${t.line_height||e.line_height}`),i.join("; ")})(),R)}
            </div>
          </div>
        </uc-preview-container>
        ${E}
        ${!1!==r.show_legend?this._renderLegend(I,r.legend_position||"bottom_left",x({})):""}
        ${P?h.qy`<div
              style="
                position: absolute;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                pointer-events: none;
                background: linear-gradient(
                  to bottom,
                  rgba(0,0,0,0.18),
                  rgba(0,0,0,0.12)
                );
              "
            >
              <div
                style="
                  background: rgba(0,0,0,0.35);
                  backdrop-filter: blur(2px);
                  border: 1px solid var(--divider-color);
                  border-radius: 10px;
                  padding: 10px 14px;
                  display: inline-flex;
                  align-items: center;
                  gap: 10px;
                  color: var(--secondary-text-color);
                  box-shadow: 0 2px 8px rgba(0,0,0,0.25);
                "
              >
                <ha-circular-progress active size="small"></ha-circular-progress>
                <span style="font-size: 13px;">Loading history…</span>
              </div>
            </div>`:""}
      </div>
    `;return this.hasActiveLink(r)?h.qy`<div
          class="graphs-module-clickable ${!0===r.enable_hover_effect?"hover-enabled":""}"
          style="cursor: pointer; transition: all 0.2s ease; border-radius: 4px;"
          @click=${e=>this.handleClick(e,r,t)}
          @dblclick=${e=>this.handleDoubleClick(e,r,t)}
          @mousedown=${e=>this.handleMouseDown(e,r,t)}
          @mouseup=${e=>this.handleMouseUp(e,r,t)}
          @mouseleave=${e=>this.handleMouseLeave(e,r,t)}
          @touchstart=${e=>this.handleTouchStart(e,r,t)}
          @touchend=${e=>this.handleTouchEnd(e,r,t)}
        >
          ${N}
        </div>`:N}_prepareSimpleChartData(e,t){var o;const i=[];for(let a=0;a<e.entities.length;a++){const n=e.entities[a];if(!n.entity)continue;const r=t.states[n.entity];if(!r)continue;const s=n.attribute?r.attributes[n.attribute]:r.state,l=parseFloat(s);i.push({name:n.name||r.attributes.friendly_name||n.entity,value:isNaN(l)?0:l,color:this._formatColor(n.color)||this._getDefaultColor(a),unit:r.attributes.unit_of_measurement||"",lineWidth:null!==(o=n.line_width)&&void 0!==o?o:2,showPoints:!1!==n.show_points,fillArea:!0===n.fill_area,lineStyle:n.line_style||"solid",entityId:n.entity})}return i}_formatColor(e){if(!e)return this._getDefaultColor(0);if(Array.isArray(e)&&e.length>=3){const[t,o,i]=e;return isNaN(t)||isNaN(o)||isNaN(i)?this._getDefaultColor(0):`rgb(${Math.round(t)}, ${Math.round(o)}, ${Math.round(i)})`}return"string"==typeof e&&e.startsWith("#")||"string"==typeof e&&e.startsWith("rgb")?e:"string"!=typeof e||!e.startsWith("var(")&&"transparent"!==e?("string"==typeof e&&e.includes("NaN"),this._getDefaultColor(0)):e}_renderSimpleChart(e,t,o,i,a){if(0===t.length)return h.qy` <div style="color: var(--secondary-text-color);">No data available</div> `;const n=("number"==typeof e.chart_height?e.chart_height:parseInt(String(e.chart_height))||345)-80;return["pie","donut"].includes(e.chart_type)?this._renderPieChart(e,t,n,i,o,a):["line","area"].includes(e.chart_type)?this._renderLineChart(e,t,n,o):this._renderBarChart(e,t,n,i,o)}_renderPieChart(e,t,o,i,a,n){const r=t.reduce(((e,t)=>e+t.value),0),s=Math.max(120,Math.min(o,260)),l=s/2,d="donut"===e.chart_type,c=Number(e.slice_gap)||0,p=d?Math.floor(.72*l):c>0?Math.max(2,Math.floor(.04*l)):0,u=l-p;let m=0;const g=t.map((e=>{const t=r>0?m/r*360:0,o=t+(r>0?e.value/r*360:0);return m+=e.value,{startDeg:t,endDeg:o,color:e.color,name:e.name,value:e.value,unit:e.unit,entityId:e.entityId}})),_="left"===n?"0 auto 0 0":"right"===n?"0 0 0 auto":"0 auto";return h.qy`
      <div style="display:block;width:${s}px;height:${s}px;margin:${_};">
        <svg
          width="${s}"
          height="${s}"
          viewBox="${-l} ${-l} ${s} ${s}"
          style="display:block;"
        >
          ${g.map((e=>{const t=((e,t,o,i)=>{const a=e=>e*Math.PI/180,n=Math.cos(a(o))*e,r=Math.sin(a(o))*e,s=Math.cos(a(i))*e,l=Math.sin(a(i))*e,d=i-o>180?1:0;return t<=0?`M0,0 L${n},${r} A${e},${e} 0 ${d} 1 ${s},${l} Z`:`M${n},${r} A${e},${e} 0 ${d} 1 ${s},${l} L${Math.cos(a(i))*t},${Math.sin(a(i))*t} A${t},${t} 0 ${d} 0 ${Math.cos(a(o))*t},${Math.sin(a(o))*t} Z`})(l,p,e.startDeg,e.endDeg);return h.JW`<path d="${t}" fill="${e.color}" stroke="none" />`}))}
          ${c>0?(()=>{const e=e=>e*Math.PI/180,t=Math.max(2,Math.min(6,Math.round(.012*s)));return h.JW`${g.map((o=>{const i=Math.cos(e(o.startDeg)),a=Math.sin(e(o.startDeg)),n=i*(p>0?p:t),r=a*(p>0?p:t),s=i*l,d=a*l;return h.JW`<line x1="${n}" y1="${r}" x2="${s}" y2="${d}" stroke="${"var(--card-background-color)"}" stroke-width="${t}" stroke-linecap="butt" />`}))}`})():""}
          ${""}
          ${g.map((t=>{const o=(t.startDeg+t.endDeg)/2,n=e=>e*Math.PI/180,r=d||p>0?p+.55*u:.55*l,s=Math.cos(n(o))*r,c=Math.sin(n(o))*r,m=t.endDeg-t.startDeg;let g=`${t.value}${t.unit||""}`;if(a&&t.entityId)try{g=(0,A.formatEntityState)(a,t.entityId,{state:t.value,includeUnit:!0})}catch(e){}const _=(e.entities||[]).find((e=>e&&e.entity===t.entityId)),b=(!_||!1!==_.label_show_name)&&m>=15,v=!_||!1!==_.label_show_value;return h.JW`<g transform="translate(${s}, ${c})" style="pointer-events:none;">
            ${b?h.JW`<text text-anchor="middle" style="${i||""}; font-size:12px; font-weight:700; fill: currentColor;">${t.name}</text>`:""}
            ${v?h.JW`<text y="${b?14:0}" text-anchor="middle" style="${i||""}; font-size:12px; fill: currentColor;">${g}</text>`:""}
          </g>`}))}
        </svg>
      </div>
    `}_renderLineChart(e,t,o,i){const a=this._historyData[e.id];let n,r;this._historyError[e.id],this._historyLoading[e.id],a?(n=a.timePoints,r=a.datasets):(n=this._generateTimePoints(e.time_period),r=t.map(((t,o)=>{e.entities[o];const i=t.value||0,a=new Array(n.length).fill(i);return{name:t.name,color:t.color,values:a,lineWidth:t.lineWidth,showPoints:t.showPoints,fillArea:t.fillArea,lineStyle:t.lineStyle,unit:t.unit||"",entityId:t.entityId}}))),r=r.map(((t,o)=>{var i,a,n;const r=null===(i=e.entities)||void 0===i?void 0:i[o];return Object.assign(Object.assign({},t),{color:this._formatColor(null==r?void 0:r.color)||t.color||this._getDefaultColor(o),lineWidth:null!==(n=null!==(a=null==r?void 0:r.line_width)&&void 0!==a?a:t.lineWidth)&&void 0!==n?n:2,showPoints:!1!==(null==r?void 0:r.show_points),fillArea:!0===(null==r?void 0:r.fill_area),lineStyle:(null==r?void 0:r.line_style)||t.lineStyle||"solid"})}));let s=r;e.normalize_values&&(s=r.map((e=>{const t=Math.max(...e.values),o=Math.min(...e.values),i=t-o||1;return Object.assign(Object.assign({},e),{originalValues:e.values,values:e.values.map((e=>(e-o)/i*100)),normalizedMin:o,normalizedMax:t})})));const l=Math.max(...s.flatMap((e=>e.values))),d=Math.min(...s.flatMap((e=>e.values))),c=l-d,p=!1!==e.show_grid,u=e;let m=(e.design||{}).background_color||u.background_color;return m="transparent"===m?"var(--card-background-color)":m?this._formatColor(m):"var(--card-background-color, transparent)",Boolean(a&&"history"===a.source),h.qy`
      <div
        style="width: 100%; height: ${o}px; position: relative; box-sizing: border-box; margin: 0; padding: 0;"
      >
        <!-- Debug info badge with refresh button -->

        ${!1!==e.show_tooltips?h.qy`
              <div
                id="graph-tooltip-${e.id}"
                style="
              position: absolute;
              display: none;
              background: var(--card-background-color);
              border: 1px solid var(--divider-color);
              border-radius: 4px;
              padding: 8px 12px;
              font-size: 14px;
              color: var(--primary-text-color);
              box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
              pointer-events: none;
              z-index: 1000;
              white-space: nowrap;
            "
              ></div>
            `:""}
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 300 100"
          preserveAspectRatio="none"
          style="display: block; width: 100%; height: 100%; margin: 0; padding: 0;"
        >
          ${p?h.JW`${Array.from({length:4},((e,t)=>{const o=100*(t+1)/5;return h.JW`<line x1="0" y1="${o}" x2="300" y2="${o}" stroke="rgba(255,255,255,.08)" stroke-width="0.5" />`}))}`:""}
          ${(()=>s.map((t=>{var o;const a=t.values.map(((e,t)=>`${t/(n.length-1)*300},${c>0?8+(l-e)/c*92:100}`)),s=(t=>{if(!e.smooth_curves)return t.map(((e,t)=>{const[o,i]=e.split(",");return`${0===t?"M":"L"} ${o} ${i}`})).join(" ");if(t.length<2){const[e,o]=t[0].split(",");return`M ${e} ${o}`}let o="";const i=t.map((e=>{const[t,o]=e.split(",");return{x:parseFloat(t),y:parseFloat(o)}}));o=`M ${i[0].x} ${i[0].y}`;for(let e=0;e<i.length-1;e++){const t=i[Math.max(0,e-1)],a=i[e],n=i[e+1],r=i[Math.min(i.length-1,e+2)],s=.5;o+=` C ${a.x+(n.x-t.x)/6*s} ${a.y+(n.y-t.y)/6*s}, ${n.x-(r.x-a.x)/6*s} ${n.y-(r.y-a.y)/6*s}, ${n.x} ${n.y}`}return o})(a),d=a[a.length-1].split(",")[0],p=this._colorWithAlpha(t.color,.25),u="dashed"===t.lineStyle?"4 3":"dotted"===t.lineStyle?"1 3":"none";return h.JW`<g>
                ${!0===t.fillArea?h.JW`<path d="${s} L ${d} 100 L 0 100 Z" fill="${p}" stroke="none" />`:""}
                <path d="${s}" stroke="${t.color}" stroke-width="${null!==(o=t.lineWidth)&&void 0!==o?o:2}" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="${u}" />
                ${!1!==t.showPoints?h.JW`${t.values.map(((o,a)=>{const s=a/(n.length-1)*300,d=c>0?8+(l-o)/c*92:100,p="transparent"===m?"var(--card-background-color)":m,u=`point-${e.id}-${a}-${r.indexOf(t)}`;return h.JW`
                          <circle 
                            id="${u}"
                            cx="${s}" 
                            cy="${d}" 
                            r="3" 
                            fill="${p}" 
                            stroke="${t.color}" 
                            stroke-width="1.5"
                            style="cursor: ${!1!==e.show_tooltips?"pointer":"default"};"
                            @mouseenter=${!1!==e.show_tooltips?r=>{const s=t.originalValues?t.originalValues[a]:o;let l=`${s}${t.unit||""}`;t.entityId&&(l=(0,A.formatEntityState)(i,t.entityId,{state:s,includeUnit:!0})),this._showTooltip(r,e.id,t.name,l,n[a])}:null}
                            @mouseleave=${!1!==e.show_tooltips?t=>this._hideTooltip(e.id,t):null}
                          >
                            ${!1!==e.show_tooltips?h.JW`
                              <animate 
                                attributeName="r" 
                                begin="mouseenter" 
                                dur="0.2s" 
                                from="3" 
                                to="5" 
                                fill="freeze" 
                              />
                              <animate 
                                attributeName="r" 
                                begin="mouseleave" 
                                dur="0.2s" 
                                from="5" 
                                to="3" 
                                fill="freeze" 
                              />
                            `:""}
                          </circle>
                        `}))}`:""}
              </g>`})))()}
        </svg>
      </div>
    `}_renderLegend(e,t,o){return h.qy`<div
      style="position:absolute; ${{top_left:"top:8px; left:8px; justify-content:flex-start;",top_right:"top:8px; right:8px; justify-content:flex-end;",bottom_left:"bottom:8px; left:8px; justify-content:flex-start;",bottom_right:"bottom:8px; right:8px; justify-content:flex-end;"}[t]}; display:flex; gap:12px; flex-wrap:wrap; font-size:12px; ${o||""}; z-index:2;"
    >
      ${e.map((e=>h.qy`<div style="display:flex; align-items:center; gap:6px;">
            <span style="width:10px; height:10px; background:${e.color}; border-radius:2px;"></span
            ><span>${e.name}</span>
          </div>`))}
    </div>`}_colorWithAlpha(e,t){if(!e)return`rgba(33, 150, 243, ${t})`;if(e.startsWith("#")){const o=e.replace("#",""),i=parseInt(3===o.length?o.split("").map((e=>e+e)).join(""):o,16);return`rgba(${i>>16&255}, ${i>>8&255}, ${255&i}, ${t})`}return e.startsWith("rgb(")?e.replace("rgb(","rgba(").replace(")",`, ${t})`):e}_renderBarChart(e,t,o,i,a){const n=Math.max(...t.map((e=>e.value)));return h.qy`
      <div
        style="width:100%; height:${o}px; display:flex; align-items:center; justify-content:${(()=>{const t=e.chart_alignment||"center";return"left"===t?"flex-start":"right"===t?"flex-end":"center"})()};"
      >
        <div
          style="
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-end;
            justify-content: ${(()=>{const t=e.chart_alignment||"center";return"left"===t?"flex-start":"right"===t?"flex-end":"center"})()};
            gap: 10px;
            padding: 10px 0;
          "
        >
          ${t.map((e=>{const t=n>0?e.value/n*(o-40):0;return h.qy`
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  flex: 0 0 auto;
                  width: 64px;
                "
              >
                <div
                  style="
                  font-size: 12px;
                  ${i||""};
                  margin-bottom: 5px;
                "
                >
                  ${(()=>{let t=`${e.value}${e.unit||""}`;if(a&&e.entityId)try{t=(0,A.formatEntityState)(a,e.entityId,{state:e.value,includeUnit:!0})}catch(e){}return t})()}
                </div>
                <div
                  style="
                  width: 100%;
                  height: ${t}px;
                  background: ${e.color};
                  border-radius: 4px 4px 0 0;
                  transition: height 0.3s ease;
                "
                ></div>
                <div
                  style="
                  font-size: 10px;
                  ${i||""};
                  opacity: 0.8;
                  margin-top: 5px;
                  text-align: center;
                  overflow: hidden;
                  text-overflow: ellipsis;
                  white-space: nowrap;
                  width: 100%;
                "
                >
                  ${e.name}
                </div>
              </div>
            `}))}
        </div>
      </div>
    `}_showTooltip(e,t,o,i,a){const n=e.target,r=n.closest("div"),s=null==r?void 0:r.querySelector(`#graph-tooltip-${t}`);if(!s||!r)return;s.innerHTML=`\n      <div style="font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;">${o}</div>\n      <div style="color: var(--secondary-text-color); font-size: 12px;">${a}</div>\n      <div style="font-size: 16px; margin-top: 4px;">${i}</div>\n    `;const l=r.getBoundingClientRect(),d=n.getBoundingClientRect(),c=d.left-l.left+d.width/2,p=d.top-l.top;s.style.display="block",s.style.left=`${c}px`,s.style.top=p-10+"px",s.style.transform="translate(-50%, -100%)"}_hideTooltip(e,t){if(t){const o=t.currentTarget,i=null==o?void 0:o.closest("div"),a=null==i?void 0:i.querySelector(`#graph-tooltip-${e}`);if(a)return void(a.style.display="none")}document.querySelectorAll(`#graph-tooltip-${e}`).forEach((e=>{e.style.display="none"}))}_generateTimePoints(e){const t=[],o=new Date;let i=12,a="hour";switch(e){case"1h":i=12,a="5min";break;case"24h":i=24,a="hour";break;case"7d":i=7,a="day";break;case"30d":i=30,a="day";break;case"90d":i=12,a="week";break;case"365d":i=12,a="month"}for(let e=i-1;e>=0;e--){const i=new Date(o);"5min"===a?(i.setMinutes(i.getMinutes()-5*e),t.push(i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))):"hour"===a?(i.setHours(i.getHours()-e),t.push(i.toLocaleTimeString([],{hour:"2-digit"}))):"day"===a?(i.setDate(i.getDate()-e),t.push(i.toLocaleDateString([],{month:"short",day:"numeric"}))):"week"===a?(i.setDate(i.getDate()-7*e),t.push(i.toLocaleDateString([],{month:"short",day:"numeric"}))):"month"===a&&(i.setMonth(i.getMonth()-e),t.push(i.toLocaleDateString([],{month:"short"})))}return t}_generateTimeSeriesData(e,t,o){const i=[];let a=isNaN(e)?50:e;const n=o.toLowerCase().includes("odometer")||o.toLowerCase().includes("counter")||o.toLowerCase().includes("total")||o.toLowerCase().includes("mileage"),r=o.toLowerCase().includes("energy")||o.toLowerCase().includes("kwh");let s=this._hashString(o);n&&a>1e3&&(a*=.95);for(let o=0;o<t;o++){const o=(s=1664525*s+1013904223>>>0,(4294967295&s)/4294967296);if(n){const i=.05*e/t;a=a+i+o*i*.5}else if(r)a+=.1*e/t*o;else{const e=(o-.5)*a*.1;a=Math.max(0,a+e)}i.push(Math.round(10*a)/10)}return i}_hashString(e){let t=2166136261;for(let o=0;o<e.length;o++)t^=e.charCodeAt(o),t=Math.imul(t,16777619);return t>>>0}_triggerHistoryLoad(e,t){this._historyLoading[e.id]||(this._historyLoading[e.id]=!0,this._deferredHistoryScheduled[e.id]=!0,this._fetchHistoryDataAsync(e,t))}_loadHistoryData(e,t){if(e.entities&&0!==e.entities.length){if(!this._historyData[e.id]){const t=this._tryReadCache(e);t&&(this._historyData[e.id]=Object.assign(Object.assign({},t),{source:"cache"}))}if(!this._historyData[e.id]){const o=this._tryFastHistoryPath(e,t);o&&(this._historyData[e.id]=o)}this._historyLoading[e.id]||this._deferredHistoryScheduled[e.id]||(this._deferredHistoryScheduled[e.id]=!0,this._historyLoading[e.id]=!0,this._fetchHistoryDataAsync(e,t))}}_tryFastHistoryPath(e,t){try{if(0===e.entities.filter((e=>e.entity)).map((e=>e.entity)).length)return null;const o=this._generateTimePoints(e.time_period),i=e.entities.filter((e=>e.entity)).map(((e,i)=>{var a;const n=t.states[e.entity];if(!n)return null;let r=0;r=e.attribute&&n.attributes[e.attribute]?parseFloat(n.attributes[e.attribute])||0:parseFloat(n.state)||0;const s=new Array(o.length).fill(r);return{name:e.name||n.attributes.friendly_name||e.entity,color:this._formatColor(e.color)||this._getDefaultColor(i),values:s,lineWidth:null!==(a=e.line_width)&&void 0!==a?a:2,showPoints:!1!==e.show_points,fillArea:!0===e.fill_area,lineStyle:e.line_style||"solid",unit:(null==n?void 0:n.attributes.unit_of_measurement)||"",entityId:e.entity}})).filter((e=>null!==e));if(0===i.length)return null;const a=i.flatMap((e=>e.values));return{timePoints:o,datasets:i,min:Math.min(...a),max:Math.max(...a),lastUpdated:Date.now(),source:"fast-path"}}catch(e){return null}}async _fetchHistoryDataAsync(e,t){try{const o=new Date;let i=24;switch(e.time_period){case"1h":i=1;break;case"3h":i=3;break;case"6h":i=6;break;case"12h":i=12;break;case"24h":default:i=24;break;case"2d":i=48;break;case"7d":i=168;break;case"30d":i=720;break;case"90d":i=2160;break;case"365d":i=8760}const a=new Date(o.getTime()-60*i*60*1e3),n=e.entities.filter((e=>e.entity)).map((e=>e.entity));if(0===n.length)return;window.ultraCardGraphDebug={entityIds:n,startTime:a.toISOString(),endTime:o.toISOString(),status:"fetching"},Math.min(100,4*i),n.forEach((e=>{t.states[e]}));let r={};try{let e,i;try{i=await t.callWS({type:"history/history_during_period",start_time:a.toISOString(),end_time:o.toISOString(),entity_ids:n,include_start_time_state:!0,significant_changes_only:!1,minimal_response:!1}),e=i&&"object"==typeof i?n.map((e=>i[e]||[])).filter((e=>e.length>0)):[]}catch(i){const r=a.toISOString();e=await t.callApi("GET",`history/period/${r}`,{filter_entity_id:n.join(","),end_time:o.toISOString()})}if(window.ultraCardGraphDebug.response=e,window.ultraCardGraphDebug.status="success",i&&"object"==typeof i&&!Array.isArray(i)?Object.entries(i).forEach((([e,t])=>{Array.isArray(t)&&t.length>0&&(r[e]=t)})):Array.isArray(e)&&e.forEach((e=>{if(Array.isArray(e)&&e.length>0){const t=e[0].entity_id;r[t]=e}})),0===Object.keys(r).length)throw new Error("No history data returned from API")}catch(e){window.ultraCardGraphDebug.error=e,window.ultraCardGraphDebug.errorDetails={message:e.message,status:e.status,statusText:e.statusText,body:e.body,stack:e.stack},window.ultraCardGraphDebug.status="error";for(const e of n){const o=t.states[e];o&&(r[e]=[{entity_id:e,state:o.state,last_changed:(new Date).toISOString(),last_updated:(new Date).toISOString(),attributes:o.attributes}])}}const s=this._generateTimePoints(e.time_period),l=e.entities.map(((e,i)=>{var n;if(!e.entity)return null;let l;if(Array.isArray(r))l=r;else{if(!r[e.entity])return null;l=r[e.entity]}const d=t.states[e.entity],c=this._processHistoryData(l,s,e.attribute,a,o);return{name:e.name||(null==d?void 0:d.attributes.friendly_name)||e.entity,color:this._formatColor(e.color)||this._getDefaultColor(i),values:c,lineWidth:null!==(n=e.line_width)&&void 0!==n?n:2,showPoints:!1!==e.show_points,fillArea:!0===e.fill_area,lineStyle:e.line_style||"solid",unit:(null==d?void 0:d.attributes.unit_of_measurement)||"",entityId:e.entity}})).filter((e=>null!==e)),d=l.flatMap((e=>e.values)),c=Math.min(...d),p=Math.max(...d);this._historyData[e.id]={timePoints:s,datasets:l,min:c,max:p,lastUpdated:Date.now(),source:"history"},this._historyLoading[e.id]=!1,this._writeCache(e,this._historyData[e.id]),this.requestUpdate()}catch(t){this._historyError[e.id]="Failed to load history data",this._historyLoading[e.id]=!1,this.requestUpdate()}}_processHistoryData(e,t,o,i,a){if(!e||0===e.length)return new Array(t.length).fill(0);const n=[],r=e=>{if(null==e)return null;if("number"==typeof e&&isFinite(e))return e;const t=String(e).trim().toLowerCase();if("unknown"===t||"unavailable"===t||"none"===t||"null"===t)return null;const o=parseFloat(t);return isNaN(o)?null:o},s=(null==i?void 0:i.getTime())||Date.now()-864e5,l=((null==a?void 0:a.getTime())||Date.now())-s,d=e.map((e=>{let t;if(void 0!==e.s&&void 0!==e.lu)t={state:e.s,attributes:e.a||{},timestamp:1e3*e.lu};else{if(void 0===e.state||void 0===e.last_changed)return null;t={state:e.state,attributes:e.attributes||{},timestamp:new Date(e.last_changed).getTime()}}return"unavailable"===t.state||"unknown"===t.state?null:t})).filter((e=>null!==e)).sort(((e,t)=>e.timestamp-t.timestamp));return t.forEach(((e,i)=>{const a=i/(t.length-1),c=s+l*a;let p=null;for(let e=d.length-1;e>=0;e--){const t=d[e];if(t.timestamp<=c){const e=o?t.attributes[o]:t.state,i=r(e);if(null!==i){p=i;break}}}if(null===p)for(let e=d.length-1;e>=0;e--){const t=d[e],i=o?t.attributes[o]:t.state,a=r(i);if(null!==a){p=a;break}}n.push(null!=p?p:0)})),n}_coerceNumber(e){if(null==e)return null;if("number"==typeof e&&isFinite(e))return e;const t=String(e).trim().toLowerCase();if("unknown"===t||"unavailable"===t||"none"===t||"null"===t)return null;const o=parseFloat(t);return isNaN(o)?null:o}_getDefaultColor(e){const t=["#2196F3","#4CAF50","#FF9800","#F44336","#9C27B0","#00BCD4","#FFEB3B","#795548","#607D8B","#E91E63"];return t[e%t.length]}_addEntity(e,t){var o;const i={id:this.generateId("entity"),entity:"",name:"",attribute:"",color:this._getDefaultColor((null===(o=e.entities)||void 0===o?void 0:o.length)||0),show_points:!0,fill_area:!0,line_width:2,line_style:"solid"};t({entities:[...e.entities||[],i]})}_removeEntity(e,t,o){const i=[...e.entities||[]];i.splice(t,1),o({entities:i})}_updateEntity(e,t,o,i){const a=[...e.entities||[]];a[t]=Object.assign(Object.assign({},a[t]),o),delete this._historyData[e.id],delete this._historyError[e.id],delete this._historyLoading[e.id],delete this._deferredHistoryScheduled[e.id],i({entities:a})}_toggleEntityOptions(e,t){var o;e.stopPropagation();const i=null===(o=e.target)||void 0===o?void 0:o.closest(".entity-card"),a=null==i?void 0:i.querySelector(".entity-advanced-options"),n=null==i?void 0:i.querySelector(".entity-toggle-btn");a&&n&&(this.expandedEntities.has(t)?(this.expandedEntities.delete(t),a.style.maxHeight="0",a.style.opacity="0",a.style.marginTop="0",a.style.borderTop="none",n.style.transform="rotate(0deg)"):(this.expandedEntities.add(t),a.style.maxHeight=a.scrollHeight+"px",a.style.opacity="1",a.style.marginTop="16px",a.style.borderTop="1px solid var(--divider-color)",n.style.transform="rotate(180deg)"))}_getEntityAttributes(e,t){if(!e||!t.states[e])return[];const o=t.states[e].attributes;return Object.keys(o).filter((e=>!["friendly_name","icon","entity_picture"].includes(e))).map((e=>({value:e,label:e})))}_renderSizeControl(e,t,o,i,a,n,r,s,l,d){return h.qy`
      <div class="field-container" style="margin-bottom: 16px;">
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
        >
          ${l}
        </div>
        <div
          class="field-description"
          style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px;"
        >
          ${d}
        </div>
        <style>
          .number-range-control {
            display: flex;
            gap: 8px;
            align-items: center;
          }

          .range-slider {
            flex: 0 0 65%;
            height: 6px;
            background: var(--divider-color);
            border-radius: 3px;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 0;
          }

          .range-slider::-webkit-slider-thumb {
            appearance: none;
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
          }

          .range-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
          }

          .range-slider:hover {
            background: var(--primary-color);
            opacity: 0.7;
          }

          .range-slider:hover::-webkit-slider-thumb {
            transform: scale(1.1);
          }

          .range-slider:hover::-moz-range-thumb {
            transform: scale(1.1);
          }

          .range-input {
            flex: 0 0 20%;
            padding: 6px 8px !important;
            border: 1px solid var(--divider-color);
            border-radius: 4px;
            background: var(--secondary-background-color);
            color: var(--primary-text-color);
            font-size: 13px;
            text-align: center;
            transition: all 0.2s ease;
            box-sizing: border-box;
          }

          .range-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
          }

          .range-reset-btn {
            width: 32px;
            height: 32px;
            padding: 0;
            border: 1px solid var(--divider-color);
            border-radius: 4px;
            background: var(--secondary-background-color);
            color: var(--primary-text-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            flex-shrink: 0;
          }

          .range-reset-btn:hover {
            background: var(--primary-color);
            color: var(--text-primary-color);
            border-color: var(--primary-color);
          }

          .range-reset-btn ha-icon {
            font-size: 14px;
          }
        </style>
        <div class="number-range-control">
          <input
            type="range"
            class="range-slider"
            min="${n}"
            max="${r}"
            step="1"
            .value="${a}"
            @input=${a=>{const n=a.target,r=parseInt(n.value);t>=0?this._updateEntity(e,t,{[i]:r},o):o({[i]:r})}}
          />
          <input
            type="number"
            class="range-input"
            min="${n}"
            max="${r}"
            step="1"
            .value="${a}"
            @input=${a=>{const n=a.target,r=parseInt(n.value);isNaN(r)||(t>=0?this._updateEntity(e,t,{[i]:r},o):o({[i]:r}))}}
            @keydown=${a=>{if("ArrowUp"===a.key||"ArrowDown"===a.key){a.preventDefault();const l=a.target,d=parseInt(l.value)||s,c="ArrowUp"===a.key?1:-1,p=Math.max(n,Math.min(r,d+c));t>=0?this._updateEntity(e,t,{[i]:p},o):o({[i]:p})}}}
          />
          <button
            class="range-reset-btn"
            @click=${()=>{t>=0?this._updateEntity(e,t,{[i]:s},o):o({[i]:s})}}
            title="Reset to default (${s})"
          >
            <ha-icon icon="mdi:refresh"></ha-icon>
          </button>
        </div>
      </div>
    `}hasActiveLink(e){const t=e.tap_action&&"default"!==e.tap_action.action&&"nothing"!==e.tap_action.action,o=e.hold_action&&"default"!==e.hold_action.action&&"nothing"!==e.hold_action.action,i=e.double_tap_action&&"default"!==e.double_tap_action.action&&"nothing"!==e.double_tap_action.action;return t||o||i}handleClick(e,t,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,o)}),300)}handleDoubleClick(e,t,o){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,o)}handleMouseDown(e,t,o){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,o)}),500)}handleMouseUp(e,t,o){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null)}handleMouseLeave(e,t,o){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTouchStart(e,t,o){this.handleMouseDown(e,t,o)}handleTouchEnd(e,t,o){this.handleMouseUp(e,t,o)}handleTapAction(e,t,o){if(!this.isHolding&&t.tap_action&&"default"!==t.tap_action.action&&"nothing"!==t.tap_action.action){const i=Object.assign({},t.tap_action);b.K.handleAction(i,o,e.target)}}handleHoldAction(e,t,o){if(t.hold_action&&"default"!==t.hold_action.action&&"nothing"!==t.hold_action.action){const i=Object.assign({},t.hold_action);b.K.handleAction(i,o,e.target)}}handleDoubleAction(e,t,o){if(t.double_tap_action&&"default"!==t.double_tap_action.action&&"nothing"!==t.double_tap_action.action){const i=Object.assign({},t.double_tap_action);b.K.handleAction(i,o,e.target)}}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}_resolveChartWidth(e){const t=e.chart_width_percent;if("number"==typeof t&&isFinite(t))return`${Math.max(10,Math.min(100,Math.round(t)))}%`;const o=e.chart_width;return"string"==typeof o&&""!==o.trim()?o.trim():"100%"}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"0px"} ${this.addPixelUnit(e.padding_right)||"0px"} ${this.addPixelUnit(e.padding_bottom)||"0px"} ${this.addPixelUnit(e.padding_left)||"0px"}`:"0"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"0px"} ${this.addPixelUnit(e.margin_right)||"0px"} ${this.addPixelUnit(e.margin_bottom)||"0px"} ${this.addPixelUnit(e.margin_left)||"0px"}`:"0"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){var o,i;const a=e.background_image_type,n=e.background_image,r=e.background_image_entity;if(!a||"none"===a)return"none";switch(a){case"upload":if(n)return`url("${(0,S.V)(t,n)}")`;break;case"url":if(n)return`url("${n}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const a=(null===(o=e.attributes)||void 0===o?void 0:o.entity_picture)||(null===(i=e.attributes)||void 0===i?void 0:i.image)||("string"==typeof e.state?e.state:"");if(a&&"unknown"!==a&&"unavailable"!==a)return`url("${(0,S.V)(t,a)}")`}}}return"none"}getBorderCSS(e){const t=e.border;return t&&"none"!==t.style?`${t.width||1}px ${t.style||"solid"} ${t.color||"#ccc"}`:"none"}validate(e){const t=e,o=[...super.validate(e).errors];return t.chart_type||o.push("Chart type is required"),t.entities&&0!==t.entities.length?t.entities.forEach(((e,t)=>{e.entity||o.push(`Entity ${t+1}: Entity selection is required`)})):o.push("At least one entity is required"),"custom"===t.time_period&&(t.custom_time_start||o.push("Custom start time is required"),t.custom_time_end||o.push("Custom end time is required")),!t.template_mode||t.template&&""!==t.template.trim()||o.push("Template code is required when template mode is enabled"),{valid:0===o.length,errors:o}}getStyles(){return'\n      .uc-graphs-module {\n        width: 100%;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n      }\n\n      .entity-card {\n        transition: all 0.2s ease;\n      }\n\n      .entity-card:hover {\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .entity-advanced-options {\n        transition: max-height 0.3s ease, opacity 0.2s ease;\n        opacity: 0;\n      }\n\n      .entity-advanced-options[data-expanded="true"] {\n        opacity: 1;\n      }\n\n      .entity-toggle-button ha-icon {\n        transition: transform 0.2s ease;\n      }\n\n      .entity-header {\n        cursor: pointer;\n      }\n\n      .entity-header:hover .entity-toggle-button {\n        color: var(--primary-color);\n      }\n\n      .uc-graphs-general-tab,\n      .uc-graphs-actions-tab,\n      .uc-graphs-other-tab {\n        padding: 16px;\n      }\n\n      .entities-repeater {\n        margin: 16px 0;\n      }\n\n      .entity-item {\n        background: var(--card-background-color);\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 12px;\n      }\n\n      .entity-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 12px;\n      }\n\n      .entity-number {\n        font-weight: 500;\n        color: var(--primary-text-color);\n      }\n\n      .chart-container {\n        position: relative;\n        width: 100%;\n        margin: 0 !important;\n        padding: 0 !important;\n        box-sizing: border-box;\n      }\n\n      .chart-title {\n        font-weight: 500;\n        margin-bottom: 8px;\n      }\n\n      .chart-legend {\n        margin-top: 12px;\n      }\n\n      .chart-legend.legend-top {\n        margin-top: 0;\n        margin-bottom: 12px;\n      }\n\n      .chart-legend.legend-left,\n      .chart-legend.legend-right {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n      }\n\n      .chart-legend.legend-left {\n        left: 0;\n      }\n\n      .chart-legend.legend-right {\n        right: 0;\n      }\n\n      .graphs-module-clickable {\n        cursor: pointer;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      .graphs-module-clickable.hover-enabled:hover {\n        transform: scale(1.02);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n    \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Conditional fields grouping */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      @keyframes slideInFromLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n\n      /* Number range control styles */\n      .number-range-control {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n      }\n\n      .range-slider {\n        flex: 0 0 65%;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        min-width: 0;\n      }\n\n      .range-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 18px;\n        height: 18px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .range-slider::-moz-range-thumb {\n        width: 18px;\n        height: 18px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .range-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .range-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .range-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .range-input {\n        flex: 0 0 20%;\n        padding: 6px 8px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        box-sizing: border-box;\n      }\n\n      .range-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .range-reset-btn {\n        width: 32px;\n        height: 32px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .range-reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .range-reset-btn ha-icon {\n        font-size: 14px;\n      }\n\n      /* Responsive styles */\n      @media (max-width: 768px) {\n        .chart-container {\n          min-height: 200px;\n        }\n      }\n\n      /* Animation styles */\n      .uc-graphs-module[data-animation="true"] {\n        animation: fadeIn 0.5s ease-in-out;\n      }\n\n      @keyframes fadeIn {\n        from {\n          opacity: 0;\n          transform: translateY(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n\n      /* Hover effects */\n      .uc-graphs-module:hover {\n        transition: box-shadow 0.3s ease;\n      }\n\n      /* Loading state */\n      .chart-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        color: var(--secondary-text-color);\n      }\n\n      .chart-error {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        color: var(--error-color);\n        text-align: center;\n        padding: 20px;\n      }\n    '}cleanup(){this.clickTimeout&&clearTimeout(this.clickTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this._updateInterval&&clearInterval(this._updateInterval)}requestUpdate(){"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-update"))}}class z{constructor(){this.modules=new Map,this.modulesByCategory=new Map,this.registerCoreModules()}static getInstance(){return z.instance||(z.instance=new z),z.instance}registerCoreModules(){this.registerModule(new i.o),this.registerModule(new a.O),this.registerModule(new n.Y),this.registerModule(new r.f),this.registerModule(new s.Q),this.registerModule(new l.k),this.registerModule(new d.R),this.registerModule(new c.s),this.registerModule(new p.b),this.registerModule(new u.j),this.registerModule(new f),this.registerModule(new T)}registerModule(e){const t=e.metadata.type;this.modules.has(t)&&console.warn(`Module with type "${t}" is already registered. Overriding...`),this.modules.set(t,e),this.updateCategoryMap(e)}unregisterModule(e){return!!this.modules.get(e)&&(this.modules.delete(e),this.updateCategoryMaps(),console.log(`❌ Unregistered module: ${e}`),!0)}getModule(e){return this.modules.get(e)}getAllModules(){return Array.from(this.modules.values())}getModulesByCategory(e){return this.modulesByCategory.get(e)||[]}getCategories(){return Array.from(this.modulesByCategory.keys())}getAllModuleMetadata(){return this.getAllModules().map((e=>e.metadata))}searchModules(e){const t=e.toLowerCase();return this.getAllModules().filter((e=>{const o=e.metadata;return o.title.toLowerCase().includes(t)||o.description.toLowerCase().includes(t)||o.tags.some((e=>e.toLowerCase().includes(t)))||o.type.toLowerCase().includes(t)}))}createDefaultModule(e,t,o){console.log(`Creating default module for type: ${e}`);const i=this.getModule(e);if(!i)return console.error(`Module type "${e}" not found in registry`),console.log("Available module types:",Array.from(this.modules.keys())),null;try{const e=i.createDefault(t,o);return console.log("Successfully created default module:",e),e}catch(t){return console.error(`Error creating default module for type "${e}":`,t),null}}validateModule(e){const t=this.getModule(e.type);return t?t.validate(e):{valid:!1,errors:[`Unknown module type: ${e.type}`]}}getAllModuleStyles(){let e="";for(const t of this.getAllModules())t.getStyles&&(e+=`\n/* Styles for ${t.metadata.title} */\n`,e+=t.getStyles(),e+="\n");return e+=this.getCommonFormStyles(),e}isModuleRegistered(e){return this.modules.has(e)}getRegistryStats(){const e=this.getAllModules(),t={},o=new Set;return e.forEach((e=>{const i=e.metadata.category;t[i]=(t[i]||0)+1,o.add(e.metadata.author)})),{totalModules:e.length,modulesByCategory:t,authors:Array.from(o)}}updateCategoryMap(e){const t=e.metadata.category;this.modulesByCategory.has(t)||this.modulesByCategory.set(t,[]);const o=this.modulesByCategory.get(t),i=o.findIndex((t=>t.metadata.type===e.metadata.type));i>=0?o[i]=e:o.push(e)}updateCategoryMaps(){this.modulesByCategory.clear(),this.getAllModules().forEach((e=>this.updateCategoryMap(e)))}getCommonFormStyles(){return'\n      /* Common form styles for all modules */\n      .module-general-settings {\n        padding: 0;\n      }\n      \n      .form-field {\n        margin-bottom: 16px;\n      }\n      \n      .form-label {\n        display: block;\n        font-weight: 500;\n        margin-bottom: 4px;\n        font-size: 14px;\n        color: var(--primary-text-color);\n      }\n      \n      .form-description {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        margin-top: 4px;\n        line-height: 1.3;\n      }\n\n      /* Container Module Global Styles */\n      .container-module {\n        --container-drag-handle-opacity: 0.8;\n        --container-badge-opacity: 0.9;\n      }\n\n      .container-module:hover {\n        --container-drag-handle-opacity: 1;\n        --container-badge-opacity: 1;\n      }\n\n      /* Container-specific colors that can be overridden by individual modules */\n      .horizontal-module-preview.container-module {\n        --container-primary-color: #9c27b0; /* Purple for horizontal */\n        --container-secondary-color: #e1bee7;\n        --container-accent-color: #7b1fa2;\n        --container-border-color: #ba68c8;\n      }\n\n      .vertical-module-preview.container-module {\n        --container-primary-color: #3f51b5; /* Indigo for vertical */\n        --container-secondary-color: #c5cae9;\n        --container-accent-color: #303f9f;\n        --container-border-color: #7986cb;\n      }\n      \n      .form-field input[type="text"],\n      .form-field input[type="number"],\n      .form-field select,\n      .form-field textarea {\n        width: 100%;\n        padding: 8px 12px;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 14px;\n        font-family: inherit;\n        box-sizing: border-box;\n      }\n      \n      .form-field input[type="color"] {\n        width: 60px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        cursor: pointer;\n        background: none;\n      }\n      \n      .form-field input:focus,\n      .form-field select:focus,\n      .form-field textarea:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 1px var(--primary-color);\n      }\n      \n      .form-field textarea {\n        resize: vertical;\n        min-height: 60px;\n        font-family: monospace;\n      }\n      \n      .checkbox-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 14px;\n        cursor: pointer;\n        color: var(--primary-text-color);\n      }\n      \n      .checkbox-wrapper input[type="checkbox"] {\n        margin: 0;\n        cursor: pointer;\n      }\n      \n      .checkbox-group {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n        gap: 8px;\n        margin-top: 8px;\n      }\n    '}}const I=()=>z.getInstance()},345:(e,t,o)=>{o.d(t,{I:()=>i});class i{constructor(e){this.hass=e,this._templateSubscriptions=new Map,this._templateResults=new Map,this._evaluationCache=new Map,this.CACHE_TTL=1e3}getTemplateResult(e){const t=this._evaluationCache.get(e);return t&&Date.now()-t.timestamp<this.CACHE_TTL?t.value:this._templateResults.get(e)}hasTemplateSubscription(e){return this._templateSubscriptions.has(e)}getAllTemplateResults(){return this._templateResults}async evaluateTemplate(e){var t;if(!e||!this.hass)return!1;const o=e.trim();if(!o)return!1;const i=`eval_${o}`,a=this._evaluationCache.get(i);if(a&&Date.now()-a.timestamp<this.CACHE_TTL)return a.value;try{const e=await this.hass.callApi("POST","template",{template:o}),t=e.toLowerCase().trim();let a;if(["true","on","yes","1"].includes(t))a=!0;else if(["false","off","no","0","unavailable","unknown","none",""].includes(t))a=!1;else{const o=parseFloat(t);isNaN(o)?(console.warn(`[UltraVehicleCard] Template evaluated to ambiguous string '${e}', interpreting as false.`),a=!1):a=0!==o}return this._evaluationCache.set(i,{value:a,timestamp:Date.now(),stringValue:e}),a}catch(e){const i=(null===(t=e.error)||void 0===t?void 0:t.message)||e.message||String(e);return console.error(`[UltraVehicleCard] Error evaluating template via API: ${o}. Error: ${i}`),!1}}async subscribeToTemplate(e,t,o){if(e&&this.hass){if(this._templateSubscriptions.has(t)){try{const e=this._templateSubscriptions.get(t);if(e){const t=await e;t&&"function"==typeof t&&await t()}}catch(e){}this._templateSubscriptions.delete(t)}try{const i=new Promise(((i,a)=>{i(this.hass.connection.subscribeMessage((e=>{const i=e.result;this.hass.__uvc_template_strings||(this.hass.__uvc_template_strings={}),this.hass.__uvc_template_strings[t]=i;const a=this.parseTemplateResult(i,t);a!==this._templateResults.get(t)&&o&&o(),this._templateResults.set(t,a),this._evaluationCache.set(t,{value:a,timestamp:Date.now(),stringValue:i})}),{type:"render_template",template:e}))}));this._templateSubscriptions.set(t,i)}catch(t){console.error(`[UltraVehicleCard] Failed to subscribe to template: ${e}`,t)}}}parseTemplateResult(e,t){if(t&&t.startsWith("info_entity_"))return!0;if(t&&t.startsWith("state_text_"))return!0;if(null==e)return!1;if("boolean"==typeof e)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){const t=e.toLowerCase().trim();return"true"===t||"on"===t||"yes"===t||"active"===t||"home"===t||"1"===t||"open"===t||"unlocked"===t||"false"!==t&&"off"!==t&&"no"!==t&&"inactive"!==t&&"not_home"!==t&&"away"!==t&&"0"!==t&&"closed"!==t&&"locked"!==t&&"unavailable"!==t&&"unknown"!==t&&""!==t}return console.warn(`[UltraVehicleCard] Template evaluated to ambiguous type '${typeof e}', interpreting as false.`),!1}async unsubscribeAllTemplates(){for(const[e,t]of this._templateSubscriptions.entries())try{if(t){const e=await Promise.resolve(t).catch((e=>null));if(e&&"function"==typeof e)try{await e()}catch(e){}}}catch(e){}this._templateSubscriptions.clear(),this._templateResults.clear(),this._evaluationCache.clear()}updateHass(e){this.hass=e,this._evaluationCache.clear()}}},371:(e,t,o)=>{o.d(t,{X:()=>n});var i=o(183),a=o(914);class n{static render(e,t,o){const n=Object.prototype.hasOwnProperty.call(e,"template_mode")||Object.prototype.hasOwnProperty.call(e,"template"),r=Object.prototype.hasOwnProperty.call(e,"enable_hover_effect");return i.qy`
      <div class="uc-global-logic-tab">
        ${a.Q.injectCleanFormStyles()}
        ${n?i.qy`
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
              >
                <div
                  style="display:flex; align-items:center; justify-content: space-between; margin-bottom: 10px;"
                >
                  <div
                    style="font-size: 16px; font-weight: 700; color: var(--primary-color); letter-spacing: .4px;"
                  >
                    Template Mode
                  </div>
                  ${a.Q.renderField("","",t,{template_mode:!0===e.template_mode},[a.Q.createSchemaItem("template_mode",{boolean:{}})],(e=>o({template_mode:e.detail.value.template_mode})))}
                </div>
                ${e.template_mode?i.qy`${a.Q.renderField("Template","Jinja2 template evaluated to a value used by the module.",t,{template:e.template||""},[a.Q.createSchemaItem("template",{text:{multiline:!0}})],(e=>o({template:e.detail.value.template})))}`:i.qy`<div style="font-size: 13px; color: var(--secondary-text-color);">
                      Enable template mode to add dynamic content with Jinja2
                    </div>`}
              </div>
            `:""}
        ${r?i.qy`
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px;"
              >
                <div
                  style="display:flex; align-items:center; justify-content: space-between; margin-bottom: 8px;"
                >
                  <div style="font-size: 16px; font-weight: 700;">Hover Effects</div>
                  ${a.Q.renderField("","",t,{enable_hover_effect:!0===e.enable_hover_effect},[a.Q.createSchemaItem("enable_hover_effect",{boolean:{}})],(e=>o({enable_hover_effect:e.detail.value.enable_hover_effect})))}
                </div>
                <div style="font-size: 13px; color: var(--secondary-text-color);">
                  Add subtle scaling/shadow when hovering over the module preview.
                </div>
              </div>
            `:""}
        ${n||r?"":i.qy`<div style="color: var(--secondary-text-color); font-size: 13px;">
              No logic settings available for this module.
            </div>`}
      </div>
    `}}},381:(e,t,o)=>{async function i(e,t){var o;if(!t)throw console.error("[UPLOAD] Missing file."),new Error("No file provided for upload.");if(!(e&&e.auth&&e.auth.data&&e.auth.data.access_token))throw console.error("[UPLOAD] Missing Home Assistant authentication details."),new Error("Authentication details are missing.");const i=new FormData;i.append("file",t);let a="";a=e.connection&&"string"==typeof(null===(o=e.connection.options)||void 0===o?void 0:o.url)?e.connection.options.url.replace(/^ws/,"http"):"function"==typeof e.hassUrl?e.hassUrl():`${window.location.protocol}//${window.location.host}`;const n=`${a.replace(/\/$/,"")}/api/image/upload`;try{const t=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${e.auth.data.access_token}`},body:i});if(!t.ok){const e=await t.text();throw console.error(`[UPLOAD] Failed to upload image via ${n}: ${t.status} ${t.statusText}`,e),new Error(`Failed to upload image via ${n}: ${t.statusText}`)}const o=await t.json();if(!o||!o.id)throw console.error(`[UPLOAD] Invalid response from ${n}: missing id`,o),new Error(`Invalid response from ${n}: missing id`);return`/api/image/serve/${o.id}`}catch(e){throw console.error(`[UPLOAD] Error during fetch to ${n}:`,e),new Error(`Upload via ${n} failed: ${e instanceof Error?e.message:"Unknown network error"}`)}}function a(e,t){if(!t)return"";if(t.startsWith("http"))return t;if(t.startsWith("data:image/"))return t;if(t.includes("/api/image/serve/")){const o=t.match(/\/api\/image\/serve\/([^\/]+)/);if(o&&o[1]){const i=o[1];try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/api/image/serve/${i}/original`}catch(e){return t}}return t}if(t.startsWith("local/")||t.includes("/local/")||t.startsWith("media-source://")){const o=t.replace(/^\/?local\//,"").replace(/^media-source:\/\/media_source\/local\//,"");return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/local/${o}`}return t.startsWith("/")?`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}${t}`:t}o.d(t,{V:()=>a,m:()=>i})},397:(e,t,o)=>{o.d(t,{S:()=>n});var i=o(345);class a{constructor(){this.hass=null,this.templateService=null}static getInstance(){return a.instance||(a.instance=new a),a.instance}setHass(e){this.hass=e,e&&(this.templateService=new i.I(e))}evaluateDisplayConditions(e,t="always"){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;if("always"===t||!e||0===e.length)return!0;const o=e.map((e=>this.evaluateSingleCondition(e)));switch(t){case"every":return o.every((e=>e));case"any":return o.some((e=>e));default:return!0}}evaluateModuleVisibility(e){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;if(e.template_mode&&e.template){const t={id:`template_${e.id}`,type:"template",template:e.template};return this.evaluateTemplateCondition(t)}return this.evaluateDisplayConditions(e.display_conditions||[],e.display_mode||"always")}evaluateRowVisibility(e){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;if(e.template_mode&&e.template){const t={id:`template_${e.id}`,type:"template",template:e.template};return this.evaluateTemplateCondition(t)}return this.evaluateDisplayConditions(e.display_conditions||[],e.display_mode||"always")}evaluateColumnVisibility(e){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;if(e.template_mode&&e.template){const t={id:`template_${e.id}`,type:"template",template:e.template};return this.evaluateTemplateCondition(t)}return this.evaluateDisplayConditions(e.display_conditions||[],e.display_mode||"always")}evaluateSingleCondition(e){if(!1===e.enabled)return!0;switch(e.type){case"entity_state":return this.evaluateEntityStateCondition(e);case"entity_attribute":return this.evaluateEntityAttributeCondition(e);case"time":return this.evaluateTimeCondition(e);case"template":return this.evaluateTemplateCondition(e);case"entity":return console.log("[LogicService] Migrating legacy entity condition to entity_state"),this.evaluateEntityStateCondition(e);default:return console.warn("[LogicService] Unknown condition type:",e.type),!0}}evaluateEntityStateCondition(e){if(!e.entity||!this.hass)return!0;const t=this.hass.states[e.entity];if(!t)return console.warn(`[LogicService] Entity not found: ${e.entity}`),!0;const o=e.operator||"=",i=e.value,a=t.state;switch(o){case"=":return a===String(i);case"!=":return a!==String(i);case">":const e=this.tryParseNumber(a),t=this.tryParseNumber(i);return null!==e&&null!==t&&e>t;case">=":const n=this.tryParseNumber(a),r=this.tryParseNumber(i);return null!==n&&null!==r&&n>=r;case"<":const s=this.tryParseNumber(a),l=this.tryParseNumber(i);return null!==s&&null!==l&&s<l;case"<=":const d=this.tryParseNumber(a),c=this.tryParseNumber(i);return null!==d&&null!==c&&d<=c;case"contains":return String(a).toLowerCase().includes(String(i).toLowerCase());case"not_contains":return!String(a).toLowerCase().includes(String(i).toLowerCase());case"has_value":return null!=a&&""!==a;case"no_value":return null==a||""===a;default:return console.warn(`[LogicService] Unknown operator: ${o}`),!0}}evaluateEntityAttributeCondition(e){if(!e.entity||!e.attribute||!this.hass)return!0;const t=this.hass.states[e.entity];if(!t)return console.warn(`[LogicService] Entity not found: ${e.entity}`),!0;const o=t.attributes[e.attribute];if(void 0===o)return console.warn(`[LogicService] Attribute '${e.attribute}' not found on entity '${e.entity}'`),!0;const i=e.operator||"=",a=e.value,n=o;switch(i){case"=":return String(n)===String(a);case"!=":return String(n)!==String(a);case">":const e=this.tryParseNumber(n),t=this.tryParseNumber(a);return null!==e&&null!==t&&e>t;case">=":const o=this.tryParseNumber(n),r=this.tryParseNumber(a);return null!==o&&null!==r&&o>=r;case"<":const s=this.tryParseNumber(n),l=this.tryParseNumber(a);return null!==s&&null!==l&&s<l;case"<=":const d=this.tryParseNumber(n),c=this.tryParseNumber(a);return null!==d&&null!==c&&d<=c;case"contains":return String(n).toLowerCase().includes(String(a).toLowerCase());case"not_contains":return!String(n).toLowerCase().includes(String(a).toLowerCase());case"has_value":return null!=n&&""!==n;case"no_value":return null==n||""===n;default:return console.warn(`[LogicService] Unknown operator: ${i}`),!0}}evaluateTimeCondition(e){if(!e.time_from||!e.time_to)return!0;const t=new Date,o=60*t.getHours()+t.getMinutes(),[i,a]=e.time_from.split(":").map(Number),[n,r]=e.time_to.split(":").map(Number),s=60*i+a,l=60*n+r;return s<=l?o>=s&&o<=l:o>=s||o<=l}evaluateTemplateCondition(e){if(!e.template||!this.hass)return!0;try{const t=`logic_condition_${e.id}_${e.template}`;if(this.templateService)if(this.templateService.hasTemplateSubscription(t)){const e=this.templateService.getTemplateResult(t);if(void 0!==e)return e}else this.templateService.subscribeToTemplate(e.template,t,(()=>{}));this.hass.callApi&&this.hass.callApi("POST","template",{template:e.template}).then((e=>{const o=e.toLowerCase().trim();let i;if(["true","on","yes","1"].includes(o))i=!0;else if(["false","off","no","0","unavailable","unknown","none",""].includes(o))i=!1;else{const e=parseFloat(o);i=!isNaN(e)&&0!==e}this.templateService&&this.templateService._templateResults.set(t,i)})).catch((e=>{console.warn("[LogicService] Error evaluating template via API:",e)}));const o=e.template;if(o.includes("{% if ")&&o.includes(" %}")){const e=o.match(/\{\%\s*if\s+(.+?)\s*\%\}/);if(e){const t=e[1].match(/states\(['"]([^'"]+)['"]\)\s*(==|!=)\s*['"]([^'"]+)['"]/);if(t){const e=t[1],o=t[2],i=t[3],a=this.hass.states[e];if(a){const e=a.state;if("=="===o)return e===i;if("!="===o)return e!==i}}}}const i=/\{\{\s*states\(['"]([^'"]+)['"]\)\s*\}\}/g;let a,n=o;for(;null!==(a=i.exec(o));){const e=a[1],t=this.hass.states[e],o=t?t.state:"unknown";n=n.replace(a[0],o)}if(n!==o){const e=n.toLowerCase().trim();if(["true","on","yes","1"].includes(e))return!0;if(["false","off","no","0","unavailable","unknown","none",""].includes(e))return!1}return console.log(`[LogicService] Template condition evaluation fallback for: ${o}`),!0}catch(e){return console.warn("[LogicService] Error evaluating template condition:",e),!0}}tryParseNumber(e){if("number"==typeof e)return e;if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?null:t}return null}evaluateLogicProperties(e){if(!e.logic_entity||!this.hass)return!0;const t={id:"logic-property",type:e.logic_attribute?"entity_attribute":"entity_state",entity:e.logic_entity,attribute:e.logic_attribute,operator:e.logic_operator||"=",value:e.logic_value};return this.evaluateSingleCondition(t)}}const n=a.getInstance()},400:(e,t,o)=>{o.d(t,{s:()=>i});class i{static getEntityIcon(e,t){if(!e||!(null==t?void 0:t.states[e]))return null;const o=t.states[e];return this._getHomeAssistantComputedIcon(e,o,t)||this._getEnhancedIconForEntity(e,o)}static _getHomeAssistantComputedIcon(e,t,o){var i,a,n,r,s;if(null===(i=t.attributes)||void 0===i?void 0:i.icon)return t.attributes.icon;try{if(null===(n=null===(a=window.customCards)||void 0===a?void 0:a.helpers)||void 0===n?void 0:n.stateIcon){const e=window.customCards.helpers.stateIcon(t);if(e)return e}const i=[window.stateIcon,window.computeStateIcon,window.computeEntityIcon,null===(r=window.hassIcons)||void 0===r?void 0:r.stateIcon,null===(s=window.hassIcons)||void 0===s?void 0:s.computeStateIcon,o.stateIcon,o.computeStateIcon,o.computeEntityIcon];for(const e of i)if("function"==typeof e)try{const o=e(t);if(o)return o}catch(e){}if(o.entities&&o.entities[e]){const t=o.entities[e];if(t.icon)return t.icon}if(e.startsWith("weather.")){const e={"clear-night":"mdi:weather-night",cloudy:"mdi:weather-cloudy",fog:"mdi:weather-fog",hail:"mdi:weather-hail",lightning:"mdi:weather-lightning","lightning-rainy":"mdi:weather-lightning-rainy",partlycloudy:"mdi:weather-partly-cloudy",pouring:"mdi:weather-pouring",rainy:"mdi:weather-rainy",snowy:"mdi:weather-snowy","snowy-rainy":"mdi:weather-snowy-rainy",sunny:"mdi:weather-sunny",windy:"mdi:weather-windy","windy-variant":"mdi:weather-windy-variant",exceptional:"mdi:weather-exceptional"},o=t.state;if(e[o])return e[o]}}catch(e){console.debug("Failed to compute HA icon, falling back to enhanced detection:",e)}return null}static _getEnhancedIconForEntity(e,t){var o,i,a;const n=e.split(".")[0],r=e.split(".")[1]||"",s=null===(o=t.attributes)||void 0===o?void 0:o.device_class,l=null===(i=t.attributes)||void 0===i?void 0:i.unit_of_measurement,d=(null===(a=t.attributes)||void 0===a?void 0:a.friendly_name)||"",c=t.state,p=r.toLowerCase(),u=d.toLowerCase();return this._isBatteryRelated(p,u,s,l)?this._isChargingRelated(p,u)?this._getChargingBatteryIcon(c,l):this._getBatteryIcon(c,l):this._isTemperatureRelated(p,u,s,l)?"mdi:thermometer":this._isHumidityRelated(p,u,s,l)?"mdi:water-percent":this._isPowerRelated(p,u,s,l)?"mdi:flash":this._isSignalRelated(p,u)?"mdi:wifi":"binary_sensor"===n&&this._isDoorWindowRelated(p,u)?"on"===c?"mdi:door-open":"mdi:door-closed":"binary_sensor"===n&&this._isMotionRelated(p,u)?"on"===c?"mdi:motion-sensor":"mdi:motion-sensor-off":this._isIlluminanceRelated(p,u,s,l)?"mdi:brightness-5":this._isPressureRelated(p,u,s,l)?"mdi:gauge":this._getDefaultIconForDomain(n,s,c)}static _isBatteryRelated(e,t,o,i){return"battery"===o||e.includes("battery")||e.includes("charge")||e.includes("power_level")||t.includes("battery")||t.includes("charge")||"%"===i}static _isChargingRelated(e,t){return["charging","charge_target","charging_target","charge_limit"].some((o=>e.includes(o)||t.toLowerCase().includes(o)))}static _getBatteryIcon(e,t){const o=parseFloat(e);return isNaN(o)?"mdi:battery-unknown":o>=95?"mdi:battery":o>=85?"mdi:battery-90":o>=75?"mdi:battery-80":o>=65?"mdi:battery-70":o>=55?"mdi:battery-60":o>=45?"mdi:battery-50":o>=35?"mdi:battery-40":o>=25?"mdi:battery-30":o>=15?"mdi:battery-20":o>=5?"mdi:battery-10":"mdi:battery-alert"}static _getChargingBatteryIcon(e,t){const o=parseFloat(e);return isNaN(o)?"mdi:battery-charging":o>=95?"mdi:battery-charging-100":o>=85?"mdi:battery-charging-90":o>=75?"mdi:battery-charging-80":o>=65?"mdi:battery-charging-70":o>=55?"mdi:battery-charging-60":o>=45?"mdi:battery-charging-50":o>=35?"mdi:battery-charging-40":o>=25?"mdi:battery-charging-30":o>=15?"mdi:battery-charging-20":o>=5?"mdi:battery-charging-10":"mdi:battery-charging-outline"}static _isTemperatureRelated(e,t,o,i){return"temperature"===o||e.includes("temp")||t.includes("temperature")||"°C"===i||"°F"===i||"K"===i}static _isHumidityRelated(e,t,o,i){return"humidity"===o||e.includes("humidity")||t.includes("humidity")||"%"===i&&(e.includes("humid")||t.includes("humid"))}static _isPowerRelated(e,t,o,i){return"power"===o||"energy"===o||e.includes("power")||e.includes("energy")||e.includes("consumption")||"W"===i||"kW"===i||"kWh"===i||"Wh"===i}static _isSignalRelated(e,t){return["signal","rssi","wifi","network"].some((o=>e.includes(o)||t.toLowerCase().includes(o)))}static _isDoorWindowRelated(e,t){return["door","window","gate"].some((o=>e.includes(o)||t.toLowerCase().includes(o)))}static _isMotionRelated(e,t){return["motion","movement","occupancy","presence"].some((o=>e.includes(o)||t.toLowerCase().includes(o)))}static _isIlluminanceRelated(e,t,o,i){return"illuminance"===o||e.includes("illuminance")||e.includes("brightness")||e.includes("lux")||"lx"===i||"lux"===i}static _isPressureRelated(e,t,o,i){return"pressure"===o||e.includes("pressure")||t.includes("pressure")||"hPa"===i||"mbar"===i||"Pa"===i||"psi"===i}static _getDefaultIconForDomain(e,t,o){return{alarm_control_panel:"mdi:shield",automation:"mdi:robot",binary_sensor:"mdi:radiobox-blank",button:"mdi:button-pointer",calendar:"mdi:calendar",camera:"mdi:video",climate:"mdi:thermostat",cover:"mdi:window-shutter",device_tracker:"mdi:account",fan:"mdi:fan",group:"mdi:google-circles-communities",humidifier:"mdi:air-humidifier",input_boolean:"mdi:toggle-switch",input_button:"mdi:button-pointer",input_datetime:"mdi:calendar-clock",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:form-textbox",light:"mdi:lightbulb",lock:"mdi:lock",media_player:"mdi:speaker",number:"mdi:ray-vertex",person:"mdi:account",plant:"mdi:flower",remote:"mdi:remote",scene:"mdi:palette",script:"mdi:script-text",select:"mdi:format-list-bulleted",sensor:"mdi:eye",siren:"mdi:bullhorn",sun:"mdi:white-balance-sunny",switch:"mdi:toggle-switch",timer:"mdi:timer",vacuum:"mdi:robot-vacuum",water_heater:"mdi:thermometer",weather:"mdi:weather-partly-cloudy",zone:"mdi:map-marker"}[e]||"mdi:eye"}}},456:(e,t,o)=>{o.d(t,{kg:()=>E});const i=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","child_module_settings_title":"Child Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Link Configuration","description":"Configure what happens when users interact with this element. Choose different actions for tap, hold, and double-tap gestures.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":"Icon","colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text","actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"}},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var a=o.t(i,2);const n=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var r=o.t(n,2);const s=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var l=o.t(s,2);const d=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var c=o.t(d,2);const p=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behaviour."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Colour","card_background_color_desc":"The background colour of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var u=o.t(p,2);const h=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"reset_default_value":"Restablecer al valor predeterminado ({value})","card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Vista previa","toggle_preview":"Mostrar/ocultar vista previa","drag_to_move_module":"Arrastrar para mover módulo","edit_module":"Editar módulo","duplicate_module":"Duplicar módulo","delete_module":"Eliminar módulo","drag_to_move_layout":"Arrastrar para mover el diseño","horizontal_layout":"Diseño Horizontal","vertical_layout":"Diseño Vertical","add_module_to_layout":"Añadir módulo al diseño","layout_settings":"Ajustes de diseño","duplicate_layout":"Duplicar diseño","delete_layout":"Eliminar diseño","click_to_add_module":"Clic para añadir un módulo","drop_modules_here":"Suelta módulos aquí","drag_to_reorder":"Arrastrar para reordenar","edit_child_module":"Editar módulo hijo","duplicate_child_module":"Duplicar módulo hijo","delete_child_module":"Eliminar módulo hijo","module_settings_title":"Ajustes del módulo","child_module_settings_title":"Ajustes del módulo hijo","general_tab":"General","actions_tab":"Acciones","other_tab":"Otro","logic_tab":"Lógica","design_tab":"Diseño","drag_to_resize":"Arrastrar para redimensionar","hidden_by_logic":"Oculto por lógica","add_row":"Añadir fila","add_row_tooltip":"Añadir una nueva fila a tu diseño"},"common":{"left":"Izquierda","center":"Centro","right":"Derecha","top":"Arriba","bottom":"Abajo","none":"Ninguno","state":"Estado","attribute":"Atributo","attribute_name":"Nombre del atributo","entity":"Entidad","space_between":"Espacio entre","space_around":"Espacio alrededor","justify":"Justificar","stretch":"Estirar","baseline":"Línea base"},"horizontal":{"layout":{"title":"Configuración de diseño","desc":"Configura cómo se organizan los elementos horizontalmente dentro del contenedor."},"alignment":{"horizontal":"Alineación horizontal","horizontal_desc":"Elige cómo se alinean los elementos horizontalmente dentro del contenedor.","vertical":"Alineación vertical","vertical_desc":"Elige cómo se alinean los elementos verticalmente dentro del contenedor."},"wrapping":{"title":"Permitir ajuste","desc":"Permite que los elementos se ajusten a la siguiente línea cuando excedan el ancho del contenedor."},"gap":{"title":"Configuración de espacio","between_items":"Espacio entre elementos","desc":"Establece el espaciado entre elementos horizontales (en unidades rem). Usa valores negativos para superponer elementos."},"empty":{"no_modules":"Aún no se han añadido módulos","add_modules":"Añade módulos en el constructor de diseño para verlos aquí"}},"vertical":{"layout":{"title":"Configuración de diseño","desc":"Configura cómo se organizan los elementos verticalmente dentro del contenedor."},"alignment":{"vertical":"Alineación vertical","vertical_desc":"Elige cómo se alinean los elementos verticalmente dentro del contenedor."},"gap":{"title":"Configuración de espacio","between_items":"Espacio entre elementos","desc":"Establece el espaciado entre elementos verticales (en unidades rem). Usa valores negativos para superponer elementos."},"empty":{"no_modules":"Aún no se han añadido módulos","add_modules":"Añade módulos en el constructor de diseño para verlos aquí"}},"layout_extra":{"module_name":"Nombre del módulo:","module_name_placeholder":"Asigna un nombre para identificarlo fácilmente en el editor.","module_name_help":"Asigna un nombre para identificarlo fácilmente en el editor."},"layout_logic":{"display_title":"Mostrar este elemento","display_desc":"Controla cuándo se muestra este elemento. Elige \\"Siempre\\" para mantenerlo visible. Selecciona \\"Si TODAS las condiciones se cumplen\\" o \\"Si CUALQUIER condición se cumple\\" para mostrarlo solo cuando las condiciones añadidas se evalúen como verdaderas.","always":"Siempre","every":"Si TODAS las condiciones se cumplen","any":"Si CUALQUIER condición se cumple","conditions":"Condiciones","add_condition":"Añadir condición","no_conditions":"Aún no hay condiciones. Haz clic en \\"Añadir condición\\" para empezar."},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Configuración de enlaces","description":"Configura qué sucede cuando los usuarios interactúan con este elemento. Elige diferentes acciones para gestos de toque, mantener presionado y doble toque.","tap_action":"Acción de toque","tap_action_desc":"Acción realizada al tocar/hacer clic en el módulo","hold_action":"Acción de mantener presionado","hold_action_desc":"Acción realizada al mantener presionado el módulo","double_tap_action":"Acción de doble toque","double_tap_action_desc":"Acción realizada al hacer doble toque en el módulo","tap_behavior":"Comportamiento de toque","tap_behavior_desc":"Acción a realizar cuando se toca/hace clic en el elemento.","hold_behavior":"Comportamiento de mantener presionado","hold_behavior_desc":"Acción a realizar cuando se presiona y mantiene el elemento.","double_tap_behavior":"Comportamiento de doble toque","double_tap_behavior_desc":"Acción a realizar cuando se hace doble toque/clic en el elemento."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Configuración de contenido","desc":"Configura el contenido de texto y los ajustes básicos de este módulo."},"text_content":"Contenido de texto","text_content_desc":"Introduce el texto que se mostrará en este módulo.","icon_section":{"title":"Configuración del icono","desc":"Elige un icono para mostrar junto al texto."},"icon":"Icono","icon_desc":"Elige un icono para mostrar junto al texto. Déjalo vacío para no mostrar icono.","icon_position":"Posición del icono","icon_position_desc":"Elige dónde posicionar el icono respecto al texto.","before_text":"Antes del texto","after_text":"Después del texto","template_mode":"Modo plantilla","template_mode_desc":"Usa la sintaxis de plantillas de Home Assistant para renderizar el texto","value_template":"Plantilla de valor","value_template_desc":"Plantilla para renderizar el texto usando sintaxis Jinja2","examples_title":"Ejemplos comunes:","example_basic":"Valor básico","example_percent":"Con porcentaje"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Plantilla de porcentaje","percentage_template_desc":"Ingresa una plantilla Jinja2 que devuelva un número entre 0-100 para el porcentaje. Ejemplo: {{ (states(\'sensor.battery_level\') | float) * 100 }}","attr_config":{"title":"Configuración de atributo de entidad","desc":"Configura los ajustes del atributo de entidad","attribute_entity":"Entidad del atributo","attribute_entity_desc":"Selecciona la entidad que contiene el atributo con el valor del porcentaje","attribute_name":"Nombre del atributo","attribute_name_desc":"Ingresa el nombre del atributo que contiene el valor del porcentaje (ej., \\"battery_level\\")"},"diff_config":{"title":"Configuración de cálculo de diferencia","desc":"Configura los ajustes del cálculo de diferencia","current_entity":"Entidad de valor actual","current_entity_desc":"Entidad que representa la cantidad actual/usada (ej., combustible usado, batería consumida)","total_entity":"Entidad de valor total","total_entity_desc":"Entidad que representa la cantidad total/máxima (ej., capacidad de combustible, capacidad de batería)"},"template_config":{"title":"Configuración de plantilla","desc":"Configura los ajustes de plantilla","percentage_template":"Plantilla de porcentaje","percentage_template_desc":"Ingresa una plantilla Jinja2 que devuelva un número entre 0-100 para el porcentaje. Ejemplo: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"entity":{"title":"Entidad de porcentaje de barra","desc_present":"La entidad que proporciona el valor del porcentaje para la barra.","desc_empty":"Selecciona una entidad que proporcione un valor de porcentaje (0-100). Los sensores de batería son ideales para barras.","no_entity_warning":"No se seleccionó entidad - Por favor elige un sensor con valores entre 0-100"},"limit_entity":{"title":"Entidad de valor límite (opcional)","desc":"Opcional: Añade una línea indicadora vertical en la barra (ej. límite de carga para batería EV)."},"appearance":{"title":"Apariencia de la barra","height":"Altura de la barra","height_desc":"Ajusta el grosor de la barra de progreso en píxeles.","border_radius":"Radio del borde","border_radius_desc":"Controla las esquinas redondeadas de la barra.","style":"Estilo de barra","style_desc":"Elige el estilo visual de la barra de progreso.","style_flat":"Plano (Predeterminado)","style_glossy":"Brillante","style_embossed":"Relieve","style_inset":"Hundido","style_gradient":"Superposición de gradiente","style_neon":"Resplandor neón","style_outline":"Contorno","style_glass":"Cristal","style_metallic":"Metálico","style_neumorphic":"Neumórfico","style_dashed":"Punteado","style_dots":"Puntos","width":"Ancho de barra","width_desc":"Establece el ancho de la barra como porcentaje del contenedor.","alignment":"Alineación de barra","alignment_desc":"Elige cómo alinear la barra cuando es menos del 100% de ancho."},"labels":{"alignment":"Alineación de etiquetas","alignment_desc":"Controla cómo se posicionan las etiquetas izquierda y derecha."},"percentage":{"title":"Visualización de texto de porcentaje","desc":"Controla la visibilidad y apariencia de los valores de porcentaje mostrados directamente en la barra. Estos números proporcionan un indicador visual claro del nivel actual.","text_size":"Tamaño del texto","text_size_desc":"Ajusta el tamaño del texto de porcentaje mostrado en la barra.","text_alignment":"Alineación del texto de porcentaje"},"left":{"title":"Lado izquierdo","desc":"Configura el título y valor de entidad mostrado en el lado izquierdo de la barra. Esto es útil para mostrar etiquetas como \'Rango\' o \'Batería\' junto con sus valores.","title_size":"Tamaño del título","value_size":"Tamaño del valor","template_mode":"Modo plantilla","template_desc":"Usa una plantilla para formatear el valor mostrado. Las plantillas usan la sintaxis Jinja2 de Home Assistant.","value_template":"Plantilla de valor","value_template_desc":"Plantilla para formatear el valor del lado izquierdo usando sintaxis Jinja2","enable_toggle":"Activa el interruptor arriba para configurar los ajustes del lado izquierdo"},"right":{"title":"Lado derecho","desc":"Configura el título y valor de entidad mostrado en el lado derecho de la barra. Esto es ideal para información complementaria como \'Tiempo hasta lleno\' o mediciones secundarias.","title_size":"Tamaño del título","value_size":"Tamaño del valor","template_mode":"Modo plantilla","template_desc":"Usa una plantilla para formatear el valor mostrado. Las plantillas usan la sintaxis Jinja2 de Home Assistant.","value_template":"Plantilla de valor","value_template_desc":"Plantilla para formatear el valor del lado derecho usando sintaxis Jinja2","enable_toggle":"Activa el interruptor arriba para configurar los ajustes del lado derecho"},"colors":{"title":"Colores","bar_color":"Color de la barra","background_color":"Color de fondo","border_color":"Color del borde","limit_indicator":"Indicador de límite","percentage_text":"Texto de porcentaje","left_side":"Colores del lado izquierdo","right_side":"Colores del lado derecho","title_color":"Color del título","value_color":"Color del valor"},"gradient":{"title":"Modo gradiente","desc":"Aplica un gradiente de color al relleno de la barra. Cuando está habilitado, elige cómo se muestra el gradiente y personaliza las paradas de color abajo.","full":"Completo","cropped":"Recortado","value_based":"Basado en valor"},"animation":{"title":"Animación de barra","desc":"Anima el relleno de la barra usando presets como rayas de carga, pulso, brillo y más. Puedes activar animaciones basadas en el estado o atributo de una entidad, y opcionalmente anular la animación cuando se cumple otra condición.","trigger":{"title":"Disparador de animación","desc":"Selecciona una entidad para observar y define el valor + animación a aplicar cuando coincida.","entity_desc":"Entidad para evaluar el disparador de animación","type":"Tipo de disparador","type_desc":"Elige si comparar el estado de la entidad o un atributo","attribute_name_desc":"Nombre del atributo a comparar (ej., charging_status)","match_value":"Valor de coincidencia","match_value_desc":"Texto para comparar contra el estado o atributo (la comparación es basada en texto)."},"type":"Tipo de animación","type_desc":"Selecciona cómo debe animarse la barra cuando se activa.","types":{"charging":"Carga (Líneas diagonales)","pulse":"Pulso","blinking":"Parpadeo","bouncing":"Rebote","glow":"Resplandor","rainbow":"Arcoíris","bubbles":"Burbujas","fill":"Relleno","ripple":"Ondulación","traffic":"Tráfico (Poste de barbero)","heartbeat":"Latido","flicker":"Parpadeo","shimmer":"Brillo","vibrate":"Vibración"},"override":{"title":"Anulación de animación de acción","desc":"Selecciona una entidad de acción y estado para definir cuándo esta animación debe anular la animación regular","entity_desc":"Entidad para evaluar el disparador de anulación","type_desc":"Animación a usar cuando la condición de anulación coincide.","attribute_name_desc":"Nombre del atributo a comparar","match_value":"Valor de coincidencia de anulación","match_value_desc":"Comparación de texto contra estado o atributo","type":"Tipo de animación de anulación"}}},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Elige cómo quieres especificar la fuente de la imagen.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Ingresa la URL directa de la imagen que quieres mostrar.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Haz clic para subir un archivo de imagen desde tu dispositivo.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Selecciona la entidad que contiene la URL de la imagen en uno de sus atributos.","attribute_name":"Attribute Name","attribute_name_desc":"Ingresa la ruta del atributo que contiene la URL de la imagen (notación de punto soportada, ej., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Establece el ancho como porcentaje del contenedor.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Controla cómo se ajusta la imagen dentro de su contenedor.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Controla las esquinas redondeadas de la imagen.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Ajusta el brillo de tu imagen.","contrast":"Contrast (%)","contrast_desc":"Modifica el contraste de tu imagen.","saturation":"Saturation (%)","saturation_desc":"Ajusta la saturación de tu imagen."},"hover":{"title":"Efectos al pasar el cursor","effect_type":"Tipo de efecto","effect_type_desc":"Elige el tipo de efecto al pasar el cursor.","scale":"Escala (zoom in/out)","rotate":"Rotar","fade":"Desvanecer (cambio de opacidad)","blur":"Desenfocar","brightness":"Brillo","glow":"Resplandor (sombra de caja)","slide":"Deslizar (trasladar)","scale_amount":"Escala (%)","scale_amount_desc":"Ajusta la escala de la imagen al pasar el cursor.","rotate_amount":"Rotación (°)","rotate_amount_desc":"Rota la imagen al pasar el cursor.","opacity":"Opacidad (%)","opacity_desc":"Cambia la opacidad de la imagen al pasar el cursor.","blur_amount":"Desenfoque (px)","blur_amount_desc":"Aplica un efecto de desenfoque a la imagen al pasar el cursor.","brightness_amount":"Brillo (%)","brightness_amount_desc":"Ajusta el brillo de la imagen al pasar el cursor.","glow_intensity":"Intensidad del resplandor","glow_intensity_desc":"Elige la intensidad del efecto de resplandor al pasar el cursor.","glow_light":"Resplandor ligero","glow_medium":"Resplandor medio","glow_heavy":"Resplandor intenso","glow_custom":"Sombra personalizada","translate_x":"Horizontal (px)","translate_x_desc":"Traslada la imagen horizontalmente al pasar el cursor.","translate_y":"Vertical (px)","translate_y_desc":"Traslada la imagen verticalmente al pasar el cursor."},"alt":"Imagen","no_source":"No hay fuente de imagen configurada"},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Tamaño del texto del nombre de la entidad en píxeles","value_size":"Value Size","value_size_desc":"Tamaño del texto del valor de la entidad en píxeles","icon_gap":"Icon Gap","icon_gap_desc":"Espacio entre el icono y el contenido en píxeles","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Apariencia"},"thickness":"Thickness (px)","thickness_desc":"Grosor de la línea separadora.","width":"Width (%)","width_desc":"Ancho del separador como porcentaje del contenedor.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Tamaño del texto en píxeles.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"desc":"Aplica estilos de formato al texto del separador.","title":"Text Formatting","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Altura (px)","height_desc":"Controla el espacio visual para el Espacio en blanco."},"design":{"copy":"Copiar","paste":"Pegar","reset_all":"Restablecer todo","copy_tooltip":"Copiar configuración de diseño actual (funciona en todas las Ultra Cards)","paste_tooltip_has":"Pegar configuración de diseño copiada (desde portapapeles)","paste_tooltip_none":"No hay configuración de diseño en el portapapeles","reset_all_tooltip":"Restablecer toda la configuración de diseño por defecto","text_section":"Texto","text_color":"Color del texto","alignment":"Alineación","inherit_alignment":"Heredar (sin alineación)","font_size":"Tamaño de fuente","font_size_placeholder":"16px (por defecto), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Restablecer tamaño de fuente por defecto","line_height":"Altura de línea","line_height_placeholder":"0 (por defecto), 28px, 1.7","reset_line_height":"Restablecer altura de línea por defecto","letter_spacing":"Espaciado de letras","letter_spacing_placeholder":"auto (por defecto), 1px, -0.04em","reset_letter_spacing":"Restablecer espaciado de letras por defecto","font":"Fuente","font_weight":"Grosor de fuente","text_transform":"Transformación de texto","font_style":"Estilo de fuente","default_option":"– Por defecto –","weight_thin":"100 - Fino","weight_light":"300 - Ligero","weight_normal":"400 - Normal","weight_medium":"500 - Medio","weight_semi_bold":"600 - Semi negrita","weight_bold":"700 - Negrita","weight_black":"900 - Negro","transform_none":"Ninguno","transform_uppercase":"MAYÚSCULAS","transform_lowercase":"minúsculas","transform_capitalize":"Capitalizar","style_normal":"Normal","style_italic":"Cursiva","style_oblique":"Oblicua","background_section":"Fondo","background_color":"Color de fondo","background_image_type":"Tipo de imagen de fondo","bg_none":"Ninguno","bg_upload":"Subir imagen","bg_entity":"Imagen de entidad","bg_url":"URL de imagen","sizes_section":"Tamaños","spacing_section":"Espaciado","border_section":"Borde","text_shadow_section":"Sombra de texto","box_shadow_section":"Sombra de caja","position_section":"Posición","overflow_section":"Desbordamiento","animations_section":"Animaciones","width":"Ancho","height":"Alto","max_width":"Ancho máximo","max_height":"Alto máximo","min_width":"Ancho mínimo","min_height":"Alto mínimo","border_radius":"Radio del borde","border_style":"Estilo del borde","border_width":"Grosor del borde","border_color":"Color del borde","margin":"Margen","padding":"Relleno","top":"Arriba","right":"Derecha","bottom":"Abajo","left":"Izquierda","unlock_sides":"Desbloquear para editar lados independientemente","lock_sides":"Bloquear para editar todos los lados juntos","horizontal_shift":"Desplazamiento horizontal","vertical_shift":"Desplazamiento vertical","blur":"Desenfoque","text_shadow_color":"Color de sombra del texto","box_shadow_color":"Color de sombra de caja","overflow":"Desbordamiento","clip_path":"Ruta de recorte","upload_bg_image":"Subir imagen de fondo","bg_image_entity":"Entidad de imagen de fondo","bg_image_url":"URL de imagen de fondo","choose_file":"Elegir archivo","no_file_chosen":"Ningún archivo elegido"},"modules":{"text":"Módulo de texto","image":"Módulo de imagen","icon":"Módulo de icono","bar":"Módulo de barra","info":"Módulo de información","button":"Módulo de botón","separator":"Módulo separador","markdown":"Módulo de markdown","camera":"Módulo de cámara","graphs":"Módulo de gráficos","no_text_configured":"Sin texto configurado","no_image_configured":"Sin imagen configurada","uploaded_image":"Imagen subida","icons_configured":"{count} iconos configurados","no_icons_configured":"Sin iconos configurados","default_entity_suggestion":"Entidad: sensor.battery_level","sample_text":"Texto de ejemplo"}}}');var m=o.t(h,2);const g=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var _=o.t(g,2);const b=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var v=o.t(b,2);const f=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var y=o.t(f,2);const x=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var w=o.t(x,2);const k=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var $=o.t(k,2);const C=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var S=o.t(C,2);const A=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var T=o.t(A,2);const z=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","child_module_settings_title":"Child Module Settings","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout"},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"GitHub Repository","version":"Version"},"actions":{"title":"Actions Configuration","description":"Configure how this module responds to user interactions. Uses Home Assistant\'s native action system for consistent behavior across your dashboard.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked."},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."}},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources"},"entity":"Entity","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text"},"colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text"},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}'),I={en:a,cs:r,da:l,de:c,"en-GB":u,es:m,fr:_,it:v,nb:y,nl:w,nn:$,no:S,pl:T,sv:o.t(z,2)},D="en";function L(e,t){try{const o=I[t];if(!o)return;return e.split(".").reduce(((e,t)=>null==e?void 0:e[t]),o)}catch(e){return}}function E(e,t,o){let i=L(e,t);if(i)return i;const a=t.includes("-")||t.includes("_")?t.split(/[-_]/)[0]:t;if(a&&a!==t&&(i=L(e,a),i))return i;if(a!==D){const t=L(e,D);if(t)return t}return o||e}},461:(e,t,o)=>{var i=o(183),a=o(276),n=o(247),r=o(201);class s extends r.WL{constructor(e){if(super(e),this.it=n.s6,e.type!==r.OA.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===n.s6||null==e)return this._t=void 0,this.it=e;if(e===n.c0)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}}s.directiveName="unsafeHTML",s.resultType=1;const l=(0,r.u$)(s);o(768);var d,c=o(341),p=o(30),u=o(381),h=o(456),m=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};let g=d=class extends i.WF{constructor(){super(...arguments),this.designProperties={},this._expandedSections=new Set,this._marginLocked=!1,this._paddingLocked=!1,this._clipboardProperties=null}connectedCallback(){super.connectedCallback(),this._loadClipboardFromStorage(),this._storageEventListener=this._handleStorageEvent.bind(this),window.addEventListener("storage",this._storageEventListener)}disconnectedCallback(){super.disconnectedCallback(),this._storageEventListener&&window.removeEventListener("storage",this._storageEventListener)}_handleStorageEvent(e){e.key===d.CLIPBOARD_KEY&&this._loadClipboardFromStorage()}_loadClipboardFromStorage(){try{const e=localStorage.getItem(d.CLIPBOARD_KEY);if(e){const t=JSON.parse(e);t&&"object"==typeof t&&(this._clipboardProperties=t,this.requestUpdate())}}catch(e){console.warn("Failed to load design clipboard from localStorage:",e),this._clipboardProperties=null}}_saveClipboardToStorage(e){try{localStorage.setItem(d.CLIPBOARD_KEY,JSON.stringify(e))}catch(e){console.warn("Failed to save design clipboard to localStorage:",e)}}_clearClipboardFromStorage(){try{localStorage.removeItem(d.CLIPBOARD_KEY)}catch(e){console.warn("Failed to clear design clipboard from localStorage:",e)}}_toggleSection(e){this._expandedSections.has(e)?this._expandedSections.delete(e):(this._expandedSections.clear(),this._expandedSections.add(e)),this.requestUpdate()}_updateProperty(e,t){const o={[e]:t};if(console.log(`🔧 GlobalDesignTab: Updating property ${e} =`,t),console.log("🔧 GlobalDesignTab: onUpdate callback exists:",!!this.onUpdate),this.designProperties=Object.assign(Object.assign({},this.designProperties||{}),{[e]:t}),this.requestUpdate(),this.onUpdate)console.log("🔧 GlobalDesignTab: Using callback approach for property update"),this.onUpdate(o);else{console.log("🔧 GlobalDesignTab: Using event approach for property update");const e=new CustomEvent("design-changed",{detail:o,bubbles:!0,composed:!0});console.log("🔧 GlobalDesignTab: Dispatching design-changed event:",e),this.dispatchEvent(e)}console.log(`🔧 GlobalDesignTab: Property update complete for ${e}`)}_updateSpacing(e,t,o){const i="margin"===e?this._marginLocked:this._paddingLocked;let a;if(a=i?{[`${e}_top`]:o,[`${e}_bottom`]:o,[`${e}_left`]:o,[`${e}_right`]:o}:{[`${e}_${t}`]:o},console.log(`🔧 GlobalDesignTab: Updating spacing ${e}-${t} =`,o,`(locked: ${i})`),console.log("🔧 GlobalDesignTab: Spacing updates:",a),console.log("🔧 GlobalDesignTab: onUpdate callback exists:",!!this.onUpdate),this.onUpdate)console.log("🔧 GlobalDesignTab: Using callback approach for spacing update"),this.onUpdate(a);else{console.log("🔧 GlobalDesignTab: Using event approach for spacing update");const e=new CustomEvent("design-changed",{detail:a,bubbles:!0,composed:!0});console.log("🔧 GlobalDesignTab: Dispatching spacing design-changed event:",e),this.dispatchEvent(e)}}_handleNumericKeydown(e,t,o){if("ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;e.preventDefault();const i=t.match(/^(-?\d*\.?\d*)(.*)$/);if(!i)return;const a=i[1],n=i[2].trim()||"px";let r=parseFloat(a)||0,s=1;"rem"===n||"em"===n?s=.1:"%"===n?s=5:"px"===n&&(s=1),e.shiftKey?s*=10:e.altKey&&(s/=10),"ArrowUp"===e.key?r+=s:r-=s;let l=0;"rem"===n||"em"===n?l=e.altKey?3:1:"%"===n&&e.altKey&&(l=1),o(`${parseFloat(r.toFixed(l))}${n}`)}_toggleSpacingLock(e){"margin"===e?this._marginLocked=!this._marginLocked:this._paddingLocked=!this._paddingLocked,this.requestUpdate()}_resetSection(e){console.log(`🔄 GlobalDesignTab: RESET SECTION CALLED for: ${e}`),console.log("🔄 GlobalDesignTab: Current designProperties:",this.designProperties),console.log("🔄 GlobalDesignTab: onUpdate callback exists:",!!this.onUpdate);const t={};switch(e){case"text":t.color=void 0,t.text_align=void 0,t.font_size=void 0,t.line_height=void 0,t.letter_spacing=void 0,t.font_family=void 0,t.font_weight=void 0,t.text_transform=void 0,t.font_style=void 0;break;case"background":t.background_color=void 0,t.background_image=void 0,t.background_image_type=void 0,t.background_image_entity=void 0,t.background_size=void 0,t.background_repeat=void 0,t.background_position=void 0,t.backdrop_filter=void 0;break;case"sizes":t.width=void 0,t.height=void 0,t.max_width=void 0,t.max_height=void 0,t.min_width=void 0,t.min_height=void 0;break;case"spacing":t.margin_top=void 0,t.margin_bottom=void 0,t.margin_left=void 0,t.margin_right=void 0,t.padding_top=void 0,t.padding_bottom=void 0,t.padding_left=void 0,t.padding_right=void 0;break;case"border":t.border_radius=void 0,t.border_style=void 0,t.border_width=void 0,t.border_color=void 0;break;case"position":t.position=void 0,t.top=void 0,t.bottom=void 0,t.left=void 0,t.right=void 0,t.z_index=void 0;break;case"text-shadow":t.text_shadow_h=void 0,t.text_shadow_v=void 0,t.text_shadow_blur=void 0,t.text_shadow_color=void 0;break;case"box-shadow":t.box_shadow_h=void 0,t.box_shadow_v=void 0,t.box_shadow_blur=void 0,t.box_shadow_spread=void 0,t.box_shadow_color=void 0;break;case"overflow":t.overflow=void 0,t.clip_path=void 0;break;case"animations":t.animation_type=void 0,t.animation_entity=void 0,t.animation_trigger_type=void 0,t.animation_attribute=void 0,t.animation_state=void 0,t.intro_animation=void 0,t.outro_animation=void 0,t.animation_duration=void 0,t.animation_delay=void 0,t.animation_timing=void 0}if(console.log(`🔄 GlobalDesignTab: Reset properties for ${e}:`,t),this.designProperties=Object.assign(Object.assign({},this.designProperties||{}),t),this.requestUpdate(),this.onUpdate){console.log("🔄 GlobalDesignTab: Using callback approach for section reset");try{this.onUpdate(t),console.log(`🔄 GlobalDesignTab: Callback executed successfully for ${e}`)}catch(t){console.error(`🔄 GlobalDesignTab: Callback error for ${e}:`,t)}}else{console.log("🔄 GlobalDesignTab: Using event approach for section reset");const e=new CustomEvent("design-changed",{detail:t,bubbles:!0,composed:!0});console.log("🔄 GlobalDesignTab: Dispatching reset design-changed event:",e);const o=this.dispatchEvent(e);console.log("🔄 GlobalDesignTab: Event dispatched successfully:",o)}console.log(`🔄 GlobalDesignTab: Requesting update for section ${e}`),this.requestUpdate(),setTimeout((()=>{console.log(`🔄 GlobalDesignTab: Delayed update for section ${e} UI indicators`),this.requestUpdate()}),50),console.log(`✅ GlobalDesignTab: Reset complete for ${e}`)}_copyDesign(){this._clipboardProperties=Object.assign({},this.designProperties),this._saveClipboardToStorage(this._clipboardProperties);const e=Object.keys(this._clipboardProperties).filter((e=>this._clipboardProperties[e])).length;console.log(`Design properties copied to cross-card clipboard (${e} properties)`),this.requestUpdate()}_pasteDesign(){this._clipboardProperties||this._loadClipboardFromStorage(),this._clipboardProperties?(this.onUpdate?this.onUpdate(this._clipboardProperties):this.dispatchEvent(new CustomEvent("design-changed",{detail:this._clipboardProperties,bubbles:!0,composed:!0})),console.log("Design properties pasted from cross-card clipboard")):console.log("No design properties in cross-card clipboard")}_resetAllDesign(){console.log("🔄 GlobalDesignTab: RESET ALL DESIGN CALLED"),console.log("🔄 GlobalDesignTab: Current designProperties:",this.designProperties),console.log("🔄 GlobalDesignTab: onUpdate callback exists:",!!this.onUpdate);const e={color:void 0,text_align:void 0,font_size:void 0,line_height:void 0,letter_spacing:void 0,font_family:void 0,font_weight:void 0,text_transform:void 0,font_style:void 0,background_color:void 0,background_image:void 0,background_image_type:void 0,background_image_entity:void 0,backdrop_filter:void 0,width:void 0,height:void 0,max_width:void 0,max_height:void 0,min_width:void 0,min_height:void 0,margin_top:void 0,margin_bottom:void 0,margin_left:void 0,margin_right:void 0,padding_top:void 0,padding_bottom:void 0,padding_left:void 0,padding_right:void 0,border_radius:void 0,border_style:void 0,border_width:void 0,border_color:void 0,position:void 0,top:void 0,bottom:void 0,left:void 0,right:void 0,z_index:void 0,text_shadow_h:void 0,text_shadow_v:void 0,text_shadow_blur:void 0,text_shadow_color:void 0,box_shadow_h:void 0,box_shadow_v:void 0,box_shadow_blur:void 0,box_shadow_spread:void 0,box_shadow_color:void 0,overflow:void 0,clip_path:void 0,animation_type:void 0,animation_entity:void 0,animation_trigger_type:void 0,animation_attribute:void 0,animation_state:void 0,intro_animation:void 0,outro_animation:void 0,animation_duration:void 0,animation_delay:void 0,animation_timing:void 0};if(console.log("🔄 GlobalDesignTab: Reset properties for ALL sections:",e),this.onUpdate){console.log("🔄 GlobalDesignTab: Using callback approach for reset all");try{this.onUpdate(e),console.log("🔄 GlobalDesignTab: Reset all callback executed successfully")}catch(e){console.error("🔄 GlobalDesignTab: Reset all callback error:",e)}}else{console.log("🔄 GlobalDesignTab: Using event approach for reset all");const t=new CustomEvent("design-changed",{detail:e,bubbles:!0,composed:!0});console.log("🔄 GlobalDesignTab: Dispatching reset all design-changed event:",t);const o=this.dispatchEvent(t);console.log("🔄 GlobalDesignTab: Reset all event dispatched successfully:",o)}console.log("🔄 GlobalDesignTab: Requesting update for reset all"),this.requestUpdate(),setTimeout((()=>{console.log("🔄 GlobalDesignTab: Delayed update for reset all UI indicators"),this.requestUpdate()}),50),console.log("✅ GlobalDesignTab: All design properties reset to default")}_clearClipboard(){this._clipboardProperties=null,this._clearClipboardFromStorage(),console.log("Cross-card clipboard cleared"),this.requestUpdate()}async _handleBackgroundImageUpload(e){var t;const o=null===(t=e.target.files)||void 0===t?void 0:t[0];if(o&&this.hass)try{const e={background_image:await(0,u.m)(this.hass,o),background_image_type:"upload"};this.onUpdate?this.onUpdate(e):this.dispatchEvent(new CustomEvent("design-changed",{detail:e,bubbles:!0,composed:!0}))}catch(e){console.error("Background image upload failed:",e),alert(`Upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}}_truncatePath(e){return e?e.length<=30?e:"..."+e.slice(-27):""}_getStateValueHint(e){if(!this.hass||!e)return"Enter the state value to trigger animation";const t=this.hass.states[e];return t?t.state&&"unknown"!==t.state&&"unavailable"!==t.state?`Current state: ${t.state}`:"Enter the state value to trigger animation":"Entity not found"}_getAttributeNameHint(e){if(!this.hass||!e)return"Enter the attribute name to monitor";const t=this.hass.states[e];if(!t||!t.attributes)return"Entity not found or has no attributes";const o=Object.keys(t.attributes).filter((e=>!e.startsWith("_")&&"object"!=typeof t.attributes[e])).slice(0,3);return o.length>0?`Available attributes: ${o.join(", ")}${Object.keys(t.attributes).length>3?", ...":""}`:"Enter the attribute name to monitor"}_getAttributeValueHint(e,t){if(!this.hass||!e)return"Enter the attribute value to trigger animation";if(!t)return"Select an attribute first";const o=this.hass.states[e];if(!o||!o.attributes)return"Entity not found or has no attributes";const i=o.attributes[t];if(null!=i){const e=String(i);return`Current value: ${e.length>30?`${e.slice(0,27)}...`:e}`}return"Attribute not found - check the attribute name"}_hasModifiedProperties(e){const t=this.designProperties,o=e=>null!=e&&""!==e;switch(e){case"text":return!!(o(t.color)||o(t.text_align)||o(t.font_size)||o(t.line_height)||o(t.letter_spacing)||o(t.font_family)||o(t.font_weight)||o(t.text_transform)||o(t.font_style));case"background":return!!(o(t.background_color)||o(t.background_image)||o(t.background_image_type)||o(t.background_image_entity)||o(t.background_size)||o(t.background_repeat)||o(t.background_position)||o(t.backdrop_filter));case"sizes":return!!(o(t.width)||o(t.height)||o(t.max_width)||o(t.max_height)||o(t.min_width)||o(t.min_height));case"spacing":return!!(o(t.margin_top)||o(t.margin_bottom)||o(t.margin_left)||o(t.margin_right)||o(t.padding_top)||o(t.padding_bottom)||o(t.padding_left)||o(t.padding_right));case"border":return!!(o(t.border_radius)||o(t.border_style)||o(t.border_width)||o(t.border_color));case"position":return!!(o(t.position)||o(t.top)||o(t.bottom)||o(t.left)||o(t.right)||o(t.z_index));case"text-shadow":return!!(o(t.text_shadow_h)||o(t.text_shadow_v)||o(t.text_shadow_blur)||o(t.text_shadow_color));case"box-shadow":return!!(o(t.box_shadow_h)||o(t.box_shadow_v)||o(t.box_shadow_blur)||o(t.box_shadow_spread)||o(t.box_shadow_color));case"overflow":return!(!o(t.overflow)&&!o(t.clip_path));case"animations":return!!(o(t.animation_type)&&"none"!==t.animation_type||o(t.animation_entity)||o(t.animation_trigger_type)||o(t.animation_attribute)||o(t.animation_state)||o(t.intro_animation)&&"none"!==t.intro_animation||o(t.outro_animation)&&"none"!==t.outro_animation||o(t.animation_duration)||o(t.animation_delay)||o(t.animation_timing)&&"ease"!==t.animation_timing);default:return!1}}_renderAccordion(e,t,o){const a=this._expandedSections.has(o),n=this._hasModifiedProperties(o);return i.qy`
      <div class="accordion-section">
        <div class="accordion-header ${a?"expanded":""}">
          <button class="accordion-toggle" @click=${()=>this._toggleSection(o)}>
            <span class="accordion-title">
              ${e} ${n?i.qy`<span class="edit-indicator"></span>`:""}
            </span>
          </button>
          <div class="accordion-actions">
            ${n?i.qy`
                  <button
                    class="reset-button"
                    @click=${e=>{e.stopPropagation(),this._resetSection(o)}}
                    title="Reset ${e} settings to default"
                  >
                    <ha-icon icon="mdi:refresh"></ha-icon>
                  </button>
                `:""}
            <button class="expand-button" @click=${()=>this._toggleSection(o)}>
              <ha-icon icon="mdi:chevron-${a?"up":"down"}"></ha-icon>
            </button>
          </div>
        </div>
        ${a?i.qy`<div class="accordion-content">${t}</div>`:""}
      </div>
    `}render(){var e,t;const o=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return i.qy`
      <div class="global-design-tab">
        <!-- Design Actions Toolbar -->
        <div class="design-toolbar">
          <button
            class="toolbar-button copy-button"
            @click=${this._copyDesign}
            title="${(0,h.kg)("editor.design.copy_tooltip",o,"Copy current design settings (works across all Ultra Cards)")}"
          >
            <ha-icon icon="mdi:content-copy"></ha-icon>
            <span>${(0,h.kg)("editor.design.copy",o,"Copy")}</span>
          </button>

          <button
            class="toolbar-button paste-button ${this._clipboardProperties?"has-content":""}"
            @click=${this._pasteDesign}
            ?disabled=${!this._clipboardProperties}
            title="${this._clipboardProperties?(0,h.kg)("editor.design.paste_tooltip_has",o,"Paste copied design settings (from cross-card clipboard)"):(0,h.kg)("editor.design.paste_tooltip_none",o,"No design settings in cross-card clipboard")}"
          >
            <ha-icon icon="mdi:content-paste"></ha-icon>
            <span>${(0,h.kg)("editor.design.paste",o,"Paste")}</span>
          </button>

          <button
            class="toolbar-button reset-all-button"
            @click=${this._resetAllDesign}
            title="${(0,h.kg)("editor.design.reset_all_tooltip",o,"Reset all design settings to default")}"
          >
            <ha-icon icon="mdi:refresh"></ha-icon>
            <span>${(0,h.kg)("editor.design.reset_all",o,"Reset All")}</span>
          </button>
        </div>

        ${this._renderAccordion((0,h.kg)("editor.design.text_section",o,"Text"),i.qy`
            <div class="property-group">
              <ultra-color-picker
                .label=${(0,h.kg)("editor.design.text_color",o,"Text Color")}
                .value=${this.designProperties.color||""}
                .defaultValue=${"var(--primary-text-color)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("color",e.detail.value)}
              ></ultra-color-picker>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.alignment",o,"Alignment:")}:</label>
              <div class="button-group">
                ${[{value:"inherit",icon:"mdi:circle-off-outline"},{value:"left",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"right",icon:"mdi:format-align-right"},{value:"justify",icon:"mdi:format-align-justify"}].map((e=>i.qy`
                    <button
                      class="property-btn ${(this.designProperties.text_align||"inherit")===e.value?"active":""}"
                      @click=${()=>this._updateProperty("text_align","inherit"===e.value?void 0:e.value)}
                      title=${"inherit"===e.value?(0,h.kg)("editor.design.inherit_alignment",o,"Inherit (no alignment)"):e.value}
                    >
                      <ha-icon icon="${e.icon}"></ha-icon>
                    </button>
                  `))}
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.font_size",o,"Font Size:")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.font_size||""}
                  @input=${e=>this._updateProperty("font_size",e.target.value)}
                  placeholder="${(0,h.kg)("editor.design.font_size_placeholder",o,"16px (default), 1.2rem, max(1rem, 1.5vw)")}"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("font_size","")}
                  title="${(0,h.kg)("editor.design.reset_font_size",o,"Reset font size to default")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.line_height",o,"Line Height:")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.line_height||""}
                  @input=${e=>this._updateProperty("line_height",e.target.value)}
                  placeholder="${(0,h.kg)("editor.design.line_height_placeholder",o,"0 (default), 28px, 1.7")}"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("line_height","")}
                  title="${(0,h.kg)("editor.design.reset_line_height",o,"Reset line height to default")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.letter_spacing",o,"Letter Spacing:")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.letter_spacing||""}
                  @input=${e=>this._updateProperty("letter_spacing",e.target.value)}
                  placeholder="${(0,h.kg)("editor.design.letter_spacing_placeholder",o,"auto (default), 1px, -0.04em")}"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("letter_spacing","")}
                  title="${(0,h.kg)("editor.design.reset_letter_spacing",o,"Reset letter spacing to default")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.font",o,"Font")}:</label>
              <select
                .value=${this.designProperties.font_family||""}
                @change=${e=>this._updateProperty("font_family",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,h.kg)("editor.design.default_option",o,"– Default –")}
                </option>
                <option value="Arial, sans-serif">Arial</option>
                <option value="Helvetica, sans-serif">Helvetica</option>
                <option value="Times New Roman, serif">Times New Roman</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="Verdana, sans-serif">Verdana</option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.font_weight",o,"Font Weight")}:</label>
              <select
                .value=${this.designProperties.font_weight||""}
                @change=${e=>this._updateProperty("font_weight",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,h.kg)("editor.design.default_option",o,"– Default –")}
                </option>
                <option value="100">
                  ${(0,h.kg)("editor.design.weight_thin",o,"100 - Thin")}
                </option>
                <option value="300">
                  ${(0,h.kg)("editor.design.weight_light",o,"300 - Light")}
                </option>
                <option value="400">
                  ${(0,h.kg)("editor.design.weight_normal",o,"400 - Normal")}
                </option>
                <option value="500">
                  ${(0,h.kg)("editor.design.weight_medium",o,"500 - Medium")}
                </option>
                <option value="600">
                  ${(0,h.kg)("editor.design.weight_semi_bold",o,"600 - Semi Bold")}
                </option>
                <option value="700">
                  ${(0,h.kg)("editor.design.weight_bold",o,"700 - Bold")}
                </option>
                <option value="900">
                  ${(0,h.kg)("editor.design.weight_black",o,"900 - Black")}
                </option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.text_transform",o,"Text Transform")}:</label>
              <select
                .value=${this.designProperties.text_transform||""}
                @change=${e=>this._updateProperty("text_transform",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,h.kg)("editor.design.default_option",o,"– Default –")}
                </option>
                <option value="none">
                  ${(0,h.kg)("editor.design.transform_none",o,"None")}
                </option>
                <option value="uppercase">
                  ${(0,h.kg)("editor.design.transform_uppercase",o,"UPPERCASE")}
                </option>
                <option value="lowercase">
                  ${(0,h.kg)("editor.design.transform_lowercase",o,"lowercase")}
                </option>
                <option value="capitalize">
                  ${(0,h.kg)("editor.design.transform_capitalize",o,"Capitalize")}
                </option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.font_style",o,"Font Style")}:</label>
              <select
                .value=${this.designProperties.font_style||""}
                @change=${e=>this._updateProperty("font_style",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,h.kg)("editor.design.default_option",o,"– Default –")}
                </option>
                <option value="normal">
                  ${(0,h.kg)("editor.design.style_normal",o,"Normal")}
                </option>
                <option value="italic">
                  ${(0,h.kg)("editor.design.style_italic",o,"Italic")}
                </option>
                <option value="oblique">
                  ${(0,h.kg)("editor.design.style_oblique",o,"Oblique")}
                </option>
              </select>
            </div>
          `,"text")}
        ${this._renderAccordion((0,h.kg)("editor.design.background_section",o,"Background"),i.qy`
            <div class="property-group">
              <ultra-color-picker
                .label=${(0,h.kg)("editor.design.background_color",o,"Background Color")}
                .value=${this.designProperties.background_color||""}
                .defaultValue=${"transparent"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("background_color",e.detail.value)}
              ></ultra-color-picker>
            </div>

            <div class="property-group">
              <label
                >${(0,h.kg)("editor.design.background_image_type",o,"Background Image Type")}:</label
              >
              <select
                .value=${this.designProperties.background_image_type||"none"}
                @change=${e=>this._updateProperty("background_image_type",e.target.value)}
                class="property-select"
              >
                <option value="none">${(0,h.kg)("editor.design.bg_none",o,"None")}</option>
                <option value="upload">
                  ${(0,h.kg)("editor.design.bg_upload",o,"Upload Image")}
                </option>
                <option value="entity">
                  ${(0,h.kg)("editor.design.bg_entity",o,"Entity Image")}
                </option>
                <option value="url">${(0,h.kg)("editor.design.bg_url",o,"Image URL")}</option>
              </select>
            </div>

            ${"upload"===this.designProperties.background_image_type?i.qy`
                  <div class="property-group">
                    <label
                      >${(0,h.kg)("editor.design.upload_bg_image",o,"Upload Background Image")}:</label
                    >
                    <div class="upload-container">
                      <div class="file-upload-row">
                        <label class="file-upload-button">
                          <div class="button-content">
                            <ha-icon icon="mdi:upload"></ha-icon>
                            <span class="button-label"
                              >${(0,h.kg)("editor.design.choose_file",o,"Choose File")}</span
                            >
                          </div>
                          <input
                            type="file"
                            accept="image/*"
                            @change=${this._handleBackgroundImageUpload}
                            style="display: none"
                          />
                        </label>
                        <div class="path-display">
                          ${this.designProperties.background_image?i.qy`<span
                                class="uploaded-path"
                                title="${this.designProperties.background_image}"
                              >
                                ${this._truncatePath(this.designProperties.background_image)}
                              </span>`:i.qy`<span class="no-file"
                                >${(0,h.kg)("editor.design.no_file_chosen",o,"No file chosen")}</span
                              >`}
                        </div>
                      </div>
                    </div>
                  </div>
                `:""}
            ${"entity"===this.designProperties.background_image_type?i.qy`
                  <div class="property-group">
                    <label
                      >${(0,h.kg)("editor.design.bg_image_entity",o,"Background Image Entity")}:</label
                    >
                    <ha-entity-picker
                      .hass=${this.hass}
                      .value=${this.designProperties.background_image_entity||""}
                      @value-changed=${e=>this._updateProperty("background_image_entity",e.detail.value)}
                      .label=${"Select entity with image attribute"}
                      allow-custom-entity
                    ></ha-entity-picker>
                  </div>
                `:""}
            ${"url"===this.designProperties.background_image_type?i.qy`
                  <div class="property-group">
                    <label
                      >${(0,h.kg)("editor.design.bg_image_url",o,"Background Image URL")}:</label
                    >
                    <input
                      type="text"
                      .value=${this.designProperties.background_image||""}
                      @input=${e=>this._updateProperty("background_image",e.target.value)}
                      placeholder="https://example.com/image.jpg"
                      class="property-input"
                    />
                  </div>
                `:""}
            ${this.designProperties.background_image_type&&"none"!==this.designProperties.background_image_type?i.qy`
                  <div class="property-group">
                    <label>Background Size:</label>
                    <select
                      .value=${this.designProperties.background_size||"cover"}
                      @change=${e=>this._updateProperty("background_size",e.target.value)}
                      class="property-select"
                    >
                      <option value="cover">Cover</option>
                      <option value="contain">Contain</option>
                      <option value="auto">Auto</option>
                    </select>
                  </div>

                  <div class="property-group">
                    <label>Background Repeat:</label>
                    <select
                      .value=${this.designProperties.background_repeat||"no-repeat"}
                      @change=${e=>this._updateProperty("background_repeat",e.target.value)}
                      class="property-select"
                    >
                      <option value="no-repeat">No Repeat</option>
                      <option value="repeat">Repeat</option>
                      <option value="repeat-x">Repeat X</option>
                      <option value="repeat-y">Repeat Y</option>
                    </select>
                  </div>

                  <div class="property-group">
                    <label>Background Position:</label>
                    <select
                      .value=${this.designProperties.background_position||"center center"}
                      @change=${e=>this._updateProperty("background_position",e.target.value)}
                      class="property-select"
                    >
                      <option value="left top">Left Top</option>
                      <option value="left center">Left Center</option>
                      <option value="left bottom">Left Bottom</option>
                      <option value="center top">Center Top</option>
                      <option value="center center">Center</option>
                      <option value="center bottom">Center Bottom</option>
                      <option value="right top">Right Top</option>
                      <option value="right center">Right Center</option>
                      <option value="right bottom">Right Bottom</option>
                    </select>
                  </div>
                `:""}

            <div class="property-group">
              <label>Backdrop Filter:</label>
              <input
                type="text"
                .value=${this.designProperties.backdrop_filter||""}
                @input=${e=>this._updateProperty("backdrop_filter",e.target.value)}
                placeholder="blur(10px), grayscale(100%), invert(75%)"
                class="property-input"
              />
            </div>
          `,"background")}
        ${this._renderAccordion((0,h.kg)("editor.design.sizes_section",o,"Sizes"),i.qy`
            <div class="property-group">
              <label>${(0,h.kg)("editor.design.width",o,"Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.width||""}
                  @input=${e=>this._updateProperty("width",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.width||"",(e=>this._updateProperty("width",e)))}
                  placeholder="auto (default), 200px, 100%, 14rem, 10vw"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("width","")}
                  title="Reset width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.height",o,"Height")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.height||""}
                  @input=${e=>this._updateProperty("height",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.height||"",(e=>this._updateProperty("height",e)))}
                  placeholder="auto (default), 200px, 15rem, 10vh"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("height","")}
                  title="Reset height to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.max_width",o,"Max Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.max_width||""}
                  @input=${e=>this._updateProperty("max_width",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.max_width||"",(e=>this._updateProperty("max_width",e)))}
                  placeholder="200px, 100%, 14rem, 10vw"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("max_width","")}
                  title="Reset max width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.max_height",o,"Max Height")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.max_height||""}
                  @input=${e=>this._updateProperty("max_height",e.target.value)}
                  placeholder="200px, 15rem, 10vh"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("max_height","")}
                  title="Reset max height to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.min_width",o,"Min Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.min_width||""}
                  @input=${e=>this._updateProperty("min_width",e.target.value)}
                  placeholder="200px, 100%, 14rem, 10vw"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("min_width","")}
                  title="Reset min width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.min_height",o,"Min Height")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.min_height||""}
                  @input=${e=>this._updateProperty("min_height",e.target.value)}
                  placeholder="200px, 15rem, 10vh"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("min_height","")}
                  title="Reset min height to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>
          `,"sizes")}
        ${this._renderAccordion((0,h.kg)("editor.design.spacing_section",o,"Spacing"),i.qy`
            <div class="spacing-group">
              <div class="spacing-header">
                <h4>Margin</h4>
                <button
                  type="button"
                  class="lock-button ${this._marginLocked?"locked":""}"
                  @click=${()=>this._toggleSpacingLock("margin")}
                  title="${this._marginLocked?"Unlock to edit sides independently":"Lock to edit all sides together"}"
                >
                  <ha-icon icon="${this._marginLocked?"mdi:lock":"mdi:lock-open"}"></ha-icon>
                </button>
              </div>
              <div class="spacing-fields-desktop">
                <div class="spacing-field">
                  <label>Top</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.margin_top||""}
                    @input=${e=>this._updateSpacing("margin","top",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.margin_top||"",(e=>this._updateSpacing("margin","top",e)))}
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Right</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.margin_right||""}
                    @input=${e=>this._updateSpacing("margin","right",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.margin_right||"",(e=>this._updateSpacing("margin","right",e)))}
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Bottom</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.margin_bottom||""}
                    @input=${e=>this._updateSpacing("margin","bottom",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.margin_bottom||"",(e=>this._updateSpacing("margin","bottom",e)))}
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Left</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.margin_left||""}
                    @input=${e=>this._updateSpacing("margin","left",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.margin_left||"",(e=>this._updateSpacing("margin","left",e)))}
                    class="spacing-input"
                  />
                </div>
              </div>
            </div>

            <div class="spacing-group">
              <div class="spacing-header">
                <h4>Padding</h4>
                <button
                  type="button"
                  class="lock-button ${this._paddingLocked?"locked":""}"
                  @click=${()=>this._toggleSpacingLock("padding")}
                  title="${this._paddingLocked?"Unlock to edit sides independently":"Lock to edit all sides together"}"
                >
                  <ha-icon icon="${this._paddingLocked?"mdi:lock":"mdi:lock-open"}"></ha-icon>
                </button>
              </div>
              <div class="spacing-fields-desktop">
                <div class="spacing-field">
                  <label>Top</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.padding_top||""}
                    @input=${e=>this._updateSpacing("padding","top",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.padding_top||"",(e=>this._updateSpacing("padding","top",e)))}
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Right</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.padding_right||""}
                    @input=${e=>this._updateSpacing("padding","right",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.padding_right||"",(e=>this._updateSpacing("padding","right",e)))}
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Bottom</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.padding_bottom||""}
                    @input=${e=>this._updateSpacing("padding","bottom",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.padding_bottom||"",(e=>this._updateSpacing("padding","bottom",e)))}
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Left</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.padding_left||""}
                    @input=${e=>this._updateSpacing("padding","left",e.target.value)}
                    @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.padding_left||"",(e=>this._updateSpacing("padding","left",e)))}
                    class="spacing-input"
                  />
                </div>
              </div>
            </div>
          `,"spacing")}
        ${this._renderAccordion((0,h.kg)("editor.design.border_section",o,"Border"),i.qy`
            <div class="property-group">
              <label>${(0,h.kg)("editor.design.border_radius",o,"Border Radius")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.border_radius||""}
                  @input=${e=>this._updateProperty("border_radius",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.border_radius||"",(e=>this._updateProperty("border_radius",e)))}
                  placeholder="5px, 50%, 0.3em, 12px 0"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("border_radius","")}
                  title="Reset border radius to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.border_style",o,"Border Style")}:</label>
              <select
                .value=${this.designProperties.border_style||""}
                @change=${e=>this._updateProperty("border_style",e.target.value)}
                class="property-select"
              >
                <option value="">None</option>
                <option value="solid">Solid</option>
                <option value="dashed">Dashed</option>
                <option value="dotted">Dotted</option>
                <option value="double">Double</option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.border_width",o,"Border Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.border_width||""}
                  @input=${e=>this._updateProperty("border_width",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.border_width||"",(e=>this._updateProperty("border_width",e)))}
                  placeholder="1px, 2px, 0.125rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("border_width","")}
                  title="Reset border width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <ultra-color-picker
                .label=${(0,h.kg)("editor.design.border_color",o,"Border Color")}
                .value=${this.designProperties.border_color||""}
                .defaultValue=${"var(--divider-color)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("border_color",e.detail.value)}
              ></ultra-color-picker>
            </div>
          `,"border")}
        ${this._renderAccordion((0,h.kg)("editor.design.position_section",o,"Position"),i.qy`
            <div class="property-group">
              <label>Position:</label>
              <select
                .value=${this.designProperties.position||""}
                @change=${e=>this._updateProperty("position",e.target.value)}
                class="property-select"
              >
                <option value="">– Default –</option>
                <option value="static">Static</option>
                <option value="relative">Relative</option>
                <option value="absolute">Absolute</option>
                <option value="fixed">Fixed</option>
                <option value="sticky">Sticky</option>
              </select>
            </div>

            ${this.designProperties.position&&"static"!==this.designProperties.position?i.qy`
                  <div class="position-grid">
                    <input
                      type="text"
                      placeholder="Top"
                      .value=${this.designProperties.top||""}
                      @input=${e=>this._updateProperty("top",e.target.value)}
                      @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.top||"",(e=>this._updateProperty("top",e)))}
                    />
                    <div class="position-row">
                      <input
                        type="text"
                        placeholder="Left"
                        .value=${this.designProperties.left||""}
                        @input=${e=>this._updateProperty("left",e.target.value)}
                        @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.left||"",(e=>this._updateProperty("left",e)))}
                      />
                      <div class="position-center">POS</div>
                      <input
                        type="text"
                        placeholder="Right"
                        .value=${this.designProperties.right||""}
                        @input=${e=>this._updateProperty("right",e.target.value)}
                        @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.right||"",(e=>this._updateProperty("right",e)))}
                      />
                    </div>
                    <input
                      type="text"
                      placeholder="Bottom"
                      .value=${this.designProperties.bottom||""}
                      @input=${e=>this._updateProperty("bottom",e.target.value)}
                      @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.bottom||"",(e=>this._updateProperty("bottom",e)))}
                    />
                  </div>

                  <div class="property-group">
                    <label>Z-Index:</label>
                    <input
                      type="text"
                      .value=${this.designProperties.z_index||""}
                      @input=${e=>this._updateProperty("z_index",e.target.value)}
                      @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.z_index||"",(e=>this._updateProperty("z_index",e)))}
                      placeholder="-1, 1, 3, 50"
                      class="property-input"
                    />
                  </div>
                `:""}
          `,"position")}
        ${this._renderAccordion((0,h.kg)("editor.design.text_shadow_section",o,"Text Shadow"),i.qy`
            <div class="property-group">
              <label>Horizontal Shift:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.text_shadow_h||""}
                  @input=${e=>this._updateProperty("text_shadow_h",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.text_shadow_h||"",(e=>this._updateProperty("text_shadow_h",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("text_shadow_h","")}
                  title="Reset horizontal shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>Vertical Shift:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.text_shadow_v||""}
                  @input=${e=>this._updateProperty("text_shadow_v",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.text_shadow_v||"",(e=>this._updateProperty("text_shadow_v",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("text_shadow_v","")}
                  title="Reset vertical shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>Blur:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.text_shadow_blur||""}
                  @input=${e=>this._updateProperty("text_shadow_blur",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.text_shadow_blur||"",(e=>this._updateProperty("text_shadow_blur",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("text_shadow_blur","")}
                  title="Reset shadow blur to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <ultra-color-picker
                .label=${(0,h.kg)("editor.design.text_shadow_color",o,"Text Shadow Color")}
                .value=${this.designProperties.text_shadow_color||""}
                .defaultValue=${"rgba(0,0,0,0.5)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("text_shadow_color",e.detail.value)}
              ></ultra-color-picker>
            </div>
          `,"text-shadow")}
        ${this._renderAccordion((0,h.kg)("editor.design.box_shadow_section",o,"Box Shadow"),i.qy`
            <div class="property-group">
              <label>Horizontal Shift:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_h||""}
                  @input=${e=>this._updateProperty("box_shadow_h",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_h||"",(e=>this._updateProperty("box_shadow_h",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_h","")}
                  title="Reset horizontal box shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>Vertical Shift:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_v||""}
                  @input=${e=>this._updateProperty("box_shadow_v",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_v||"",(e=>this._updateProperty("box_shadow_v",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_v","")}
                  title="Reset vertical box shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>Blur:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_blur||""}
                  @input=${e=>this._updateProperty("box_shadow_blur",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_blur||"",(e=>this._updateProperty("box_shadow_blur",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_blur","")}
                  title="Reset box shadow blur to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>Spread:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_spread||""}
                  @input=${e=>this._updateProperty("box_shadow_spread",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_spread||"",(e=>this._updateProperty("box_shadow_spread",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_spread","")}
                  title="Reset box shadow spread to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <ultra-color-picker
                .label=${(0,h.kg)("editor.design.box_shadow_color",o,"Box Shadow Color")}
                .value=${this.designProperties.box_shadow_color||""}
                .defaultValue=${"rgba(0,0,0,0.1)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("box_shadow_color",e.detail.value)}
              ></ultra-color-picker>
            </div>
          `,"box-shadow")}
        ${this._renderAccordion((0,h.kg)("editor.design.overflow_section",o,"Overflow"),i.qy`
            <div class="property-group">
              <label>${(0,h.kg)("editor.design.overflow",o,"Overflow")}:</label>
              <select
                .value=${this.designProperties.overflow||"visible"}
                @change=${e=>this._updateProperty("overflow",e.target.value)}
                class="property-select"
              >
                <option value="visible">Visible (Default)</option>
                <option value="hidden">Hidden</option>
                <option value="scroll">Scroll</option>
                <option value="auto">Auto</option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,h.kg)("editor.design.clip_path",o,"Clip-path")}:</label>
              <input
                type="text"
                .value=${this.designProperties.clip_path||""}
                @input=${e=>this._updateProperty("clip_path",e.target.value)}
                placeholder="ellipse(75% 100% at bottom)"
                class="property-input"
              />
              <small class="property-hint"
                >Examples:<br />
                ellipse(75% 100% at bottom)<br />
                polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%)<br />
                polygon(100% 50%, 75% 93.3%, 25% 93.3%, 0% 50%, 25% 6.7%, 75% 6.7%)
              </small>
            </div>
          `,"overflow")}
        ${this._renderAccordion((0,h.kg)("editor.design.animations_section",o,"Animations"),i.qy`
            <!-- State-based Animation -->
            <div class="property-section">
              <h5>State-based Animation</h5>
              <div class="property-group">
                <label>Animation Type:</label>
                <select
                  .value=${this.designProperties.animation_type||"none"}
                  @change=${e=>this._updateProperty("animation_type",e.target.value)}
                  class="property-select"
                >
                  <option value="none">None</option>
                  <option value="pulse">Pulse</option>
                  <option value="vibrate">Vibrate</option>
                  <option value="rotate-left">Rotate Left</option>
                  <option value="rotate-right">Rotate Right</option>
                  <option value="hover">Hover</option>
                  <option value="fade">Fade</option>
                  <option value="scale">Scale</option>
                  <option value="bounce">Bounce</option>
                  <option value="shake">Shake</option>
                  <option value="tada">Tada</option>
                </select>
              </div>

              <div class="property-group">
                <label>Animation Duration:</label>
                <input
                  type="text"
                  .value=${this.designProperties.animation_duration||"2s"}
                  @input=${e=>this._updateProperty("animation_duration",e.target.value)}
                  placeholder="2s, 500ms, 1.5s"
                  class="property-input"
                />
                <small class="property-hint">
                  Duration for the animation (e.g., 2s, 500ms, 1.5s)
                </small>
              </div>

              ${this.designProperties.animation_type&&"none"!==this.designProperties.animation_type?i.qy`
                    <div class="property-group">
                      <label>Entity to Monitor:</label>
                      <ha-form
                        .hass=${this.hass}
                        .data=${{entity:this.designProperties.animation_entity||""}}
                        .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
                        @value-changed=${e=>this._updateProperty("animation_entity",e.detail.value.entity)}
                      ></ha-form>
                    </div>

                    ${this.designProperties.animation_entity?i.qy`
                          <div class="property-group">
                            <label>Animation Trigger Type:</label>
                            <select
                              id="animation-trigger-type-select"
                              .value=${this.designProperties.animation_trigger_type||"state"}
                              @change=${e=>{const t=e.target.value;console.log("Animation trigger type changing to:",t);const o={animation_trigger_type:t,animation_state:"",animation_attribute:""};this.onUpdate?this.onUpdate(o):this.dispatchEvent(new CustomEvent("design-changed",{detail:o,bubbles:!0,composed:!0})),this.designProperties=Object.assign(Object.assign({},this.designProperties),o),this.requestUpdate()}}
                              class="property-select ${"attribute"===this.designProperties.animation_trigger_type?"attribute-mode":"state-mode"}"
                            >
                              <option value="state">Entity State</option>
                              <option value="attribute">Entity Attribute</option>
                            </select>
                            <div
                              class="trigger-type-indicator ${"attribute"===this.designProperties.animation_trigger_type?"attribute-mode-indicator":"state-mode-indicator"}"
                            >
                              <ha-icon
                                icon="${"attribute"===this.designProperties.animation_trigger_type?"mdi:format-list-checks":"mdi:state-machine"}"
                              ></ha-icon>
                              <span
                                >${"attribute"===this.designProperties.animation_trigger_type?"Attribute mode: select an attribute and its value to trigger the animation":"State mode: enter a state value to trigger the animation"}</span
                              >
                            </div>
                          </div>

                          ${(()=>{const e=this.designProperties.animation_trigger_type||"state",t="attribute"===e;return console.log("TRIGGER TYPE DETECTION:",{currentTriggerType:e,isAttributeMode:t,entitySelected:!!this.designProperties.animation_entity,attributeSelected:!!this.designProperties.animation_attribute,stateValue:this.designProperties.animation_state}),t?(console.log("🟢 RENDERING ATTRIBUTE MODE UI"),console.log("Rendering attribute mode UI"),i.qy`
                                <div class="property-group attribute-mode-container">
                                  <div class="property-group">
                                    <label>
                                      <ha-icon icon="mdi:format-list-checks"></ha-icon>
                                      Attribute Name:
                                    </label>
                                    <input
                                      type="text"
                                      .value=${this.designProperties.animation_attribute||""}
                                      @input=${e=>{const t=e.target.value;console.log("Animation attribute changed to:",t),console.log("Current entity:",this.designProperties.animation_entity),console.log("Current trigger type:",this.designProperties.animation_trigger_type);const o=e.target;o.classList.add("change-success");const i={animation_attribute:t,animation_state:""};this.onUpdate?this.onUpdate(i):this.dispatchEvent(new CustomEvent("design-changed",{detail:i,bubbles:!0,composed:!0})),setTimeout((()=>{console.log("First UI refresh after attribute change (50ms)"),this.requestUpdate()}),50),setTimeout((()=>{console.log("Second UI refresh after attribute change (150ms)"),this.requestUpdate()}),150),setTimeout((()=>{console.log("Third UI refresh after attribute change (300ms)"),this.requestUpdate()}),300),setTimeout((()=>{console.log("Final UI refresh after attribute change (500ms)"),this.requestUpdate(),o.classList.remove("change-success")}),500)}}
                                      placeholder="friendly_name, device_class, state, etc."
                                      class="property-input attribute-mode-input"
                                    />
                                    <small class="property-hint">
                                      Enter the attribute name manually (e.g., friendly_name,
                                      device_class, state, battery_level)
                                    </small>
                                  </div>

                                  <div class="property-group">
                                    <label>
                                      <ha-icon icon="mdi:format-text"></ha-icon>
                                      Attribute Value:
                                    </label>
                                    <input
                                      type="text"
                                      .value=${this.designProperties.animation_state||""}
                                      @input=${e=>this._updateProperty("animation_state",e.target.value)}
                                      placeholder="blue, 255, heating, on, off, etc."
                                      class="property-input attribute-value-input"
                                    />
                                    <small class="property-hint">
                                      Enter the attribute value that will trigger the animation
                                    </small>
                                  </div>
                                </div>
                              `):(console.log("🔵 RENDERING STATE MODE UI"),i.qy`
                                <div
                                  class="property-group state-value-container"
                                  style="display: ${"attribute"!==String(this.designProperties.animation_trigger_type)?"block !important":"none !important"}"
                                  data-mode="state"
                                >
                                  <label>
                                    <ha-icon icon="mdi:state-machine"></ha-icon>
                                    State Value:
                                  </label>
                                  <input
                                    type="text"
                                    .value=${this.designProperties.animation_state||""}
                                    @input=${e=>this._updateProperty("animation_state",e.target.value)}
                                    placeholder="on, off, playing, idle, etc."
                                    class="property-input state-value-input"
                                  />
                                  <small class="property-hint">
                                    Enter the exact state value that will trigger the animation
                                  </small>
                                  <div class="property-hint state-value-hint">
                                    <ha-icon icon="mdi:information-outline"></ha-icon>
                                    <span>
                                      ${this._getStateValueHint(this.designProperties.animation_entity)}
                                    </span>
                                  </div>
                                </div>
                              `)})()}
                        `:i.qy`
                          <div class="property-group">
                            <label>Trigger Type:</label>
                            <select disabled class="property-select">
                              <option>Select an entity first</option>
                            </select>
                            <small class="property-hint">
                              Select an entity first to configure trigger conditions
                            </small>
                          </div>
                        `}
                  `:""}
            </div>

            <!-- Intro/Outro Animations -->
            <div class="property-section">
              <h5>Intro & Outro Animations</h5>
              <div class="two-column-grid">
                <div class="property-group">
                  <label>Intro Animation:</label>
                  <select
                    .value=${this.designProperties.intro_animation||"none"}
                    @change=${e=>this._updateProperty("intro_animation",e.target.value)}
                    class="property-select"
                  >
                    <option value="none">None</option>
                    <option value="fadeIn">Fade In</option>
                    <option value="slideInUp">Slide In Up</option>
                    <option value="slideInDown">Slide In Down</option>
                    <option value="slideInLeft">Slide In Left</option>
                    <option value="slideInRight">Slide In Right</option>
                    <option value="zoomIn">Zoom In</option>
                    <option value="bounceIn">Bounce In</option>
                    <option value="flipInX">Flip In X</option>
                    <option value="flipInY">Flip In Y</option>
                    <option value="rotateIn">Rotate In</option>
                  </select>
                </div>

                <div class="property-group">
                  <label>Outro Animation:</label>
                  <select
                    .value=${this.designProperties.outro_animation||"none"}
                    @change=${e=>this._updateProperty("outro_animation",e.target.value)}
                    class="property-select"
                  >
                    <option value="none">None</option>
                    <option value="fadeOut">Fade Out</option>
                    <option value="slideOutUp">Slide Out Up</option>
                    <option value="slideOutDown">Slide Out Down</option>
                    <option value="slideOutLeft">Slide Out Left</option>
                    <option value="slideOutRight">Slide Out Right</option>
                    <option value="zoomOut">Zoom Out</option>
                    <option value="bounceOut">Bounce Out</option>
                    <option value="flipOutX">Flip Out X</option>
                    <option value="flipOutY">Flip Out Y</option>
                    <option value="rotateOut">Rotate Out</option>
                  </select>
                </div>
              </div>

              <!-- Animation Settings -->
              <div class="three-column-grid">
                <div class="property-group">
                  <label>Duration:</label>
                  <input
                    type="text"
                    .value=${this.designProperties.animation_duration||""}
                    @input=${e=>this._updateProperty("animation_duration",e.target.value)}
                    placeholder="0.3s, 500ms"
                    class="property-input"
                  />
                </div>

                <div class="property-group">
                  <label>Delay:</label>
                  <input
                    type="text"
                    .value=${this.designProperties.animation_delay||""}
                    @input=${e=>this._updateProperty("animation_delay",e.target.value)}
                    placeholder="0s, 100ms"
                    class="property-input"
                  />
                </div>

                <div class="property-group">
                  <label>Timing:</label>
                  <select
                    .value=${this.designProperties.animation_timing||"ease"}
                    @change=${e=>this._updateProperty("animation_timing",e.target.value)}
                    class="property-select"
                  >
                    <option value="ease">Ease</option>
                    <option value="linear">Linear</option>
                    <option value="ease-in">Ease In</option>
                    <option value="ease-out">Ease Out</option>
                    <option value="ease-in-out">Ease In Out</option>
                    <option value="cubic-bezier(0.25,0.1,0.25,1)">Custom Cubic</option>
                  </select>
                </div>
              </div>
            </div>
          `,"animations")}
      </div>
    `}static get styles(){return i.AH`
      .global-design-tab {
        display: flex;
        flex-direction: column;
        gap: 8px;
        box-sizing: border-box;
        overflow: hidden;
      }

      .design-toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        margin-bottom: 8px;
        box-sizing: border-box;
        overflow: hidden;
      }

      .toolbar-button {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
        font-weight: 500;
        min-width: 0;
        flex: 1;
        justify-content: center;
      }

      .toolbar-button:hover:not(:disabled) {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .toolbar-button:active:not(:disabled) {
        transform: translateY(0);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .toolbar-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: var(--disabled-background-color, #f5f5f5);
        color: var(--disabled-text-color, #999);
        border-color: var(--disabled-border-color, #ddd);
      }

      .toolbar-button ha-icon {
        font-size: 16px;
        flex-shrink: 0;
      }

      .toolbar-button span {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Specific button styling */
      .copy-button:hover:not(:disabled) {
        border-color: var(--info-color, #2196f3);
        background: var(--info-color, #2196f3);
      }

      .paste-button.has-content {
        border-color: var(--success-color, #4caf50);
        background: rgba(76, 175, 80, 0.1);
      }

      .paste-button.has-content:hover:not(:disabled) {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
      }

      .reset-all-button:hover:not(:disabled) {
        border-color: var(--error-color, #f44336);
        background: var(--error-color, #f44336);
      }

      /* Responsive design for smaller screens */
      @media (max-width: 768px) {
        .design-toolbar {
          flex-direction: column;
          gap: 8px;
        }

        .toolbar-button {
          width: 100%;
          justify-content: center;
        }
      }

      @media (max-width: 480px) {
        .toolbar-button span {
          display: none;
        }

        .toolbar-button {
          min-width: 44px;
          padding: 8px;
          justify-content: center;
        }

        .design-toolbar {
          flex-direction: row;
          justify-content: space-around;
        }
      }

      .accordion-section {
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        overflow: hidden;
        box-sizing: border-box;
      }

      .accordion-header {
        width: 100%;
        padding: 12px 16px;
        background: var(--secondary-background-color);
        border: none;
        border-radius: 8px 8px 0 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 500;
        color: var(--primary-text-color);
        transition: background-color 0.2s ease;
        box-sizing: border-box;
      }

      .accordion-header:hover {
        background: var(--primary-color);
        color: white;
      }

      .accordion-header.expanded {
        background: var(--primary-color);
        color: white;
        border-radius: 8px 8px 0 0;
      }

      .accordion-header:not(.expanded) {
        border-radius: 8px;
      }

      .accordion-toggle {
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        cursor: pointer;
        display: flex;
        align-items: center;
        flex: 1;
        text-align: left;
        padding: 0;
      }

      .accordion-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .reset-button,
      .expand-button {
        background: none;
        border: none;
        color: inherit;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.2s ease;
        min-width: 24px;
        height: 24px;
      }

      .reset-button:hover,
      .expand-button:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .accordion-header:not(.expanded) .reset-button:hover,
      .accordion-header:not(.expanded) .expand-button:hover {
        background: rgba(0, 0, 0, 0.1);
      }

      .accordion-title {
        position: relative;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .edit-indicator {
        width: 8px;
        height: 8px;
        background: var(--primary-color);
        border-radius: 50%;
        display: inline-block;
        animation: pulse 2s ease-in-out infinite;
      }

      .accordion-header.expanded .edit-indicator {
        background: white;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
      }

      .accordion-content {
        padding: 20px;
        background: var(--card-background-color, #fff);
        border-top: 1px solid var(--divider-color);
        border-radius: 0 0 8px 8px;
        position: relative;
        box-sizing: border-box;
        overflow: hidden;
      }

      .property-group {
        margin-bottom: 16px;
        box-sizing: border-box;
        overflow: hidden;
      }

      .property-group:last-child {
        margin-bottom: 0;
      }

      .property-group label {
        display: block;
        font-weight: 500;
        margin-bottom: 4px;
        color: var(--primary-text-color);
      }

      .property-input,
      .property-select {
        width: 100%;
        padding: 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        box-sizing: border-box;
        max-width: 100%;
      }

      .property-input:focus,
      .property-select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .property-hint {
        display: block;
        font-size: 11px;
        color: var(--secondary-text-color);
        margin-top: 4px;
        line-height: 1.3;
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: var(--secondary-text-color);
        cursor: pointer;
      }

      .button-group {
        display: flex;
        gap: 4px;
      }

      .property-btn {
        flex: 1;
        padding: 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .property-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .property-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .spacing-group {
        margin-bottom: 20px;
      }

      .spacing-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .spacing-group h4 {
        margin: 0;
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      .lock-button {
        padding: 6px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 32px;
        height: 32px;
      }

      .lock-button:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .lock-button.locked {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .spacing-fields-desktop {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
      }

      .spacing-field {
        display: flex;
        flex-direction: column;
      }

      .spacing-field label {
        font-size: 12px;
        font-weight: 500;
        color: var(--secondary-text-color);
        margin-bottom: 4px;
        text-align: center;
      }

      .spacing-input {
        width: 100%;
        padding: 6px 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 12px;
        text-align: center;
        box-sizing: border-box;
        max-width: 100%;
      }

      .spacing-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      @media (max-width: 768px) {
        .spacing-fields-desktop {
          grid-template-columns: 1fr 1fr;
          gap: 8px;
        }
      }

      .spacing-grid,
      .position-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
        align-items: center;
        max-width: 150px;
        margin: 0 auto;
      }

      .spacing-row,
      .position-row {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 8px;
        align-items: center;
      }

      .spacing-center,
      .position-center {
        width: 40px;
        height: 32px;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        font-weight: bold;
        font-size: 11px;
      }

      .spacing-grid input,
      .position-grid input {
        width: 100%;
        text-align: center;
        padding: 4px 8px;
        font-size: 12px;
      }

      /* Property sections */
      .property-section {
        margin-bottom: 24px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--divider-color);
      }

      .property-section:last-child {
        border-bottom: none;
        margin-bottom: 0;
      }

      .property-section h5 {
        margin: 0 0 16px 0;
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-text-color);
        padding-bottom: 8px;
        border-bottom: 1px solid var(--primary-color);
        display: inline-block;
      }

      /* Grid layouts */
      .two-column-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 16px;
      }

      .three-column-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
        margin-bottom: 16px;
      }

      @media (max-width: 768px) {
        .two-column-grid,
        .three-column-grid {
          grid-template-columns: 1fr;
          gap: 12px;
        }
      }

      /* Animation keyframes for intro/outro animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }

      @keyframes slideInUp {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideOutUp {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInDown {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideOutDown {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(100%);
          opacity: 0;
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutLeft {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      @keyframes zoomIn {
        from {
          transform: scale(0.3);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes zoomOut {
        from {
          transform: scale(1);
          opacity: 1;
        }
        to {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes bounceOut {
        20% {
          transform: scale(0.9);
        }
        50%,
        55% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes flipInX {
        from {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateX(-20deg);
        }
        60% {
          transform: perspective(400px) rotateX(10deg);
        }
        80% {
          transform: perspective(400px) rotateX(-5deg);
        }
        to {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutX {
        from {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
      }

      @keyframes flipInY {
        from {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateY(-20deg);
        }
        60% {
          transform: perspective(400px) rotateY(10deg);
        }
        80% {
          transform: perspective(400px) rotateY(-5deg);
        }
        to {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutY {
        from {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
      }

      @keyframes rotateIn {
        from {
          transform: rotate(-200deg);
          opacity: 0;
        }
        to {
          transform: rotate(0deg);
          opacity: 1;
        }
      }

      @keyframes rotateOut {
        from {
          transform: rotate(0deg);
          opacity: 1;
        }
        to {
          transform: rotate(200deg);
          opacity: 0;
        }
      }

      /* Color picker z-index fix */
      ultra-color-picker {
        position: relative;
        z-index: 1000;
      }

      /* Upload button styling */
      .upload-container {
        width: 100%;
      }

      .file-upload-row {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
      }

      .file-upload-button {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 120px;
      }

      .file-upload-button:hover {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      .button-content {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .button-label {
        font-size: 14px;
        font-weight: 500;
      }

      .path-display {
        flex: 1;
        min-width: 0;
      }

      .uploaded-path {
        color: var(--primary-text-color);
        font-size: 12px;
        word-break: break-all;
      }

      .no-file {
        color: var(--secondary-text-color);
        font-size: 12px;
        font-style: italic;
      }

      /* Attribute value selection styling */
      .attribute-value-selection {
        display: flex;
        flex-direction: column;
        gap: 8px;
        position: relative;
        margin-bottom: 8px;
      }

      .attribute-value-select {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--primary-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        box-sizing: border-box;
        appearance: menulist;
        cursor: pointer;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
        max-height: 200px;
        overflow-y: auto;
      }

      .attribute-value-select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
      }

      .attribute-value-select option {
        padding: 8px;
      }

      /* Enhanced attribute mode styling */
      .attribute-mode {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .attribute-mode-container {
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        padding: 12px;
        border-radius: 4px;
        border-left: 3px solid var(--primary-color);
        margin-bottom: 16px;
      }

      .trigger-type-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        margin: 8px 0;
        border-radius: 4px;
        font-weight: 500;
      }

      .attribute-mode-indicator {
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.1);
        border-left: 3px solid var(--primary-color);
        color: var(--primary-color);
      }

      .state-mode-indicator {
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.1);
        border-left: 3px solid var(--info-color, #03a9f4);
        color: var(--info-color, #03a9f4);
      }

      .attribute-mode-select {
        border-color: var(--primary-color);
      }

      .attribute-value-container {
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        padding: 16px;
        border-radius: 8px;
        border-left: 3px solid var(--primary-color);
        margin-top: 16px;
      }

      .attribute-value-container label {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--primary-color);
        font-weight: 600;
        margin-bottom: 8px;
      }

      .attribute-value-selection {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 12px;
        border: 1px solid var(--primary-color);
        border-radius: 4px;
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        margin-top: 8px;
      }

      .attribute-value-input {
        border-color: var(--primary-color);
        border-width: 2px;
      }

      .attribute-value-dropdown-container {
        background: white;
        padding: 12px;
        border-radius: 4px;
        border: 1px dashed var(--primary-color);
        position: relative;
        overflow: hidden;
      }

      .attribute-value-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--primary-color);
        margin-bottom: 4px;
      }

      .attribute-value-hint {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        margin-top: 8px;
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        padding: 8px;
        border-radius: 4px;
      }

      /* State mode styling */
      .state-value-container {
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.05);
        padding: 16px;
        border-radius: 8px;
        border-left: 3px solid var(--info-color, #03a9f4);
        margin-top: 16px;
      }

      .state-value-container label {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--info-color, #03a9f4);
        font-weight: 600;
        margin-bottom: 8px;
      }

      .state-value-selection {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 12px;
        border: 1px solid var(--info-color, #03a9f4);
        border-radius: 4px;
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.05);
        margin-top: 8px;
      }

      .state-value-input {
        border-color: var(--info-color, #03a9f4);
        border-width: 2px;
      }

      .state-value-dropdown-container {
        background: white;
        padding: 12px;
        border-radius: 4px;
        border: 1px dashed var(--info-color, #03a9f4);
        position: relative;
        overflow: hidden;
      }

      .state-value-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--info-color, #03a9f4);
        margin-bottom: 4px;
      }

      .state-value-hint {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        margin-top: 8px;
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.05);
        padding: 8px;
        border-radius: 4px;
      }

      .state-value-hint ha-icon {
        color: var(--info-color, #03a9f4);
        flex-shrink: 0;
      }

      .attribute-value-hint ha-icon,
      .state-value-hint ha-icon {
        color: currentColor;
        flex-shrink: 0;
      }

      /* Visual feedback animations */
      @keyframes success-pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(var(--rgb-success-color, 76, 175, 80), 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(var(--rgb-success-color, 76, 175, 80), 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(var(--rgb-success-color, 76, 175, 80), 0);
        }
      }

      .change-success {
        animation: success-pulse 0.5s ease-in-out;
        border-color: var(--success-color, #4caf50) !important;
        box-shadow: 0 0 0 1px var(--success-color, #4caf50);
        transition: all 0.3s ease;
      }

      .attribute-mode-select.change-success,
      .state-mode-select.change-success {
        border-width: 2px;
      }

      .select-attribute-first {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px;
        color: var(--warning-color, #ff9800);
        font-style: italic;
        text-align: center;
        background: rgba(var(--rgb-warning-color, 255, 152, 0), 0.05);
        border: 1px dashed var(--warning-color, #ff9800);
        border-radius: 4px;
      }

      /* Mode switch animation */
      @keyframes highlight-fade {
        0% {
          background-color: rgba(var(--rgb-success-color, 76, 175, 80), 0.2);
        }
        100% {
          background-color: transparent;
        }
      }

      .trigger-type-indicator {
        animation: highlight-fade 1.5s ease-out;
      }

      /* Additional highlight animation for mode switches */
      @keyframes border-pulse {
        0% {
          border-left-width: 3px;
        }
        50% {
          border-left-width: 6px;
        }
        100% {
          border-left-width: 3px;
        }
      }

      .attribute-mode-indicator {
        animation: border-pulse 1s ease-in-out;
      }

      .state-mode-indicator {
        animation: border-pulse 1s ease-in-out;
      }

      /* Visual transitions for UI state changes */
      .property-select,
      .property-input,
      .attribute-value-select,
      .state-value-select {
        transition:
          border-color 0.3s ease,
          box-shadow 0.3s ease,
          background-color 0.3s ease;
      }

      /* Value selection feedback */
      .attribute-value-select:focus,
      .state-value-select:focus {
        border-width: 2px;
        transform: translateY(-1px);
      }

      /* Attribute mode specific animations */
      .attribute-mode-select::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.1);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .attribute-mode-select:focus::after {
        opacity: 1;
      }

      /* State mode specific animations */
      .state-value-select::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.1);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .state-value-select:focus::after {
        opacity: 1;
      }

      /* Animation classes */
      .fadeIn {
        animation: fadeIn var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .fadeOut {
        animation: fadeOut var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInUp {
        animation: slideInUp var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutUp {
        animation: slideOutUp var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInDown {
        animation: slideInDown var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutDown {
        animation: slideOutDown var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInLeft {
        animation: slideInLeft var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutLeft {
        animation: slideOutLeft var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInRight {
        animation: slideInRight var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutRight {
        animation: slideOutRight var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .zoomIn {
        animation: zoomIn var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .zoomOut {
        animation: zoomOut var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .bounceIn {
        animation: bounceIn var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .bounceOut {
        animation: bounceOut var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipInX {
        animation: flipInX var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipOutX {
        animation: flipOutX var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipInY {
        animation: flipInY var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipOutY {
        animation: flipOutY var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .rotateIn {
        animation: rotateIn var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .rotateOut {
        animation: rotateOut var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }

      /* Input with reset button styles */
      .input-with-reset {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
      }

      .input-with-reset .property-input {
        flex: 1;
      }

      .reset-btn {
        width: 32px;
        height: 32px;
        min-width: 32px;
        padding: 0;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .reset-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .reset-btn ha-icon {
        font-size: 16px;
      }
    `}};g.CLIPBOARD_KEY="ultra-card-design-clipboard",g._lastAnimationTriggerType=null,m([(0,a.MZ)({attribute:!1})],g.prototype,"hass",void 0),m([(0,a.MZ)({attribute:!1})],g.prototype,"designProperties",void 0),m([(0,a.MZ)({type:Function})],g.prototype,"onUpdate",void 0),m([(0,a.wk)()],g.prototype,"_expandedSections",void 0),m([(0,a.wk)()],g.prototype,"_marginLocked",void 0),m([(0,a.wk)()],g.prototype,"_paddingLocked",void 0),m([(0,a.wk)()],g.prototype,"_clipboardProperties",void 0),g=d=m([(0,a.EM)("ultra-global-design-tab")],g);var _=o(397);e=o.hmd(e);var b=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};const v=[{value:"default",label:"– Default –",category:"default"}],f=[{value:"Montserrat",label:"Montserrat (used as default font)",category:"typography"}],y=[{value:"Georgia, serif",label:"Georgia, serif",category:"websafe"},{value:"Palatino Linotype, Book Antiqua, Palatino, serif",label:"Palatino Linotype, Book Antiqua, Palatino, serif",category:"websafe"},{value:"Times New Roman, Times, serif",label:"Times New Roman, Times, serif",category:"websafe"},{value:"Arial, Helvetica, sans-serif",label:"Arial, Helvetica, sans-serif",category:"websafe"},{value:"Impact, Charcoal, sans-serif",label:"Impact, Charcoal, sans-serif",category:"websafe"},{value:"Lucida Sans Unicode, Lucida Grande, sans-serif",label:"Lucida Sans Unicode, Lucida Grande, sans-serif",category:"websafe"},{value:"Tahoma, Geneva, sans-serif",label:"Tahoma, Geneva, sans-serif",category:"websafe"},{value:"Trebuchet MS, Helvetica, sans-serif",label:"Trebuchet MS, Helvetica, sans-serif",category:"websafe"},{value:"Verdana, Geneva, sans-serif",label:"Verdana, Geneva, sans-serif",category:"websafe"},{value:"Courier New, Courier, monospace",label:"Courier New, Courier, monospace",category:"websafe"},{value:"Lucida Console, Monaco, monospace",label:"Lucida Console, Monaco, monospace",category:"websafe"}];let x=class extends i.WF{constructor(){super(...arguments),this._showModuleSelector=!1,this._selectedRowIndex=-1,this._selectedColumnIndex=-1,this._showModuleSettings=!1,this._selectedModule=null,this._activeModuleTab="general",this._activeDesignSubtab="text",this._showRowSettings=!1,this._selectedRowForSettings=-1,this._activeRowTab="general",this._showColumnSettings=!1,this._selectedColumnForSettings=null,this._activeColumnTab="general",this._showColumnLayoutSelector=!1,this._selectedRowForLayout=-1,this._isPreviewCollapsed=!1,this._collapsedConditionIds=new Set,this._draggingCondition=null,this._draggedItem=null,this._dropTarget=null,this._selectedLayoutModuleIndex=-1,this._showLayoutChildSettings=!1,this._selectedLayoutChild=null,this._popupDragState={isDragging:!1,dragStartX:0,dragStartY:0,initialX:0,initialY:0,element:null},this._popupResizeState={isResizing:!1,resizeStartX:0,resizeStartY:0,initialWidth:0,initialHeight:0,element:null},this._handlePopupDrag=e=>{if(!this._popupDragState.isDragging||!this._popupDragState.element)return;const t=e.clientX-this._popupDragState.dragStartX,o=e.clientY-this._popupDragState.dragStartY,i=this._popupDragState.initialX+t,a=this._popupDragState.initialY+o,n=window.innerWidth-this._popupDragState.element.offsetWidth,r=window.innerHeight-this._popupDragState.element.offsetHeight,s=Math.max(0,Math.min(i,n)),l=Math.max(0,Math.min(a,r));this._popupDragState.element.style.left=`${s}px`,this._popupDragState.element.style.top=`${l}px`,this._popupDragState.element.style.transform="none"},this._endPopupDrag=()=>{this._popupDragState.element&&this._popupDragState.element.classList.remove("popup-dragging"),this._popupDragState={isDragging:!1,dragStartX:0,dragStartY:0,initialX:0,initialY:0,element:null},document.removeEventListener("mousemove",this._handlePopupDrag),document.removeEventListener("mouseup",this._endPopupDrag)},this._handlePopupResize=e=>{if(!this._popupResizeState.isResizing||!this._popupResizeState.element)return;const t=e.clientX-this._popupResizeState.resizeStartX,o=e.clientY-this._popupResizeState.resizeStartY,i=this._popupResizeState.initialWidth+t,a=this._popupResizeState.initialHeight+o,n=.9*window.innerWidth,r=.9*window.innerHeight,s=Math.min(i,n),l=Math.min(a,r);this._popupResizeState.element.style.setProperty("width",`${s}px`,"important"),this._popupResizeState.element.style.setProperty("height",`${l}px`,"important")},this._endPopupResize=()=>{this._popupResizeState.element&&this._popupResizeState.element.classList.remove("popup-resizing"),this._popupResizeState={isResizing:!1,resizeStartX:0,resizeStartY:0,initialWidth:0,initialHeight:0,element:null},document.removeEventListener("mousemove",this._handlePopupResize),document.removeEventListener("mouseup",this._endPopupResize)},this.COLUMN_LAYOUTS=[{id:"1-col",name:"1",proportions:[1],columnCount:1},{id:"1-2-1-2",name:"1/2 + 1/2",proportions:[1,1],columnCount:2},{id:"1-3-2-3",name:"1/3 + 2/3",proportions:[1,2],columnCount:2},{id:"2-3-1-3",name:"2/3 + 1/3",proportions:[2,1],columnCount:2},{id:"2-5-3-5",name:"2/5 + 3/5",proportions:[2,3],columnCount:2},{id:"3-5-2-5",name:"3/5 + 2/5",proportions:[3,2],columnCount:2},{id:"1-3-1-3-1-3",name:"1/3 + 1/3 + 1/3",proportions:[1,1,1],columnCount:3},{id:"1-4-1-2-1-4",name:"1/4 + 1/2 + 1/4",proportions:[1,2,1],columnCount:3},{id:"1-5-3-5-1-5",name:"1/5 + 3/5 + 1/5",proportions:[1,3,1],columnCount:3},{id:"1-6-2-3-1-6",name:"1/6 + 2/3 + 1/6",proportions:[1,4,1],columnCount:3},{id:"1-4-1-4-1-4-1-4",name:"1/4 + 1/4 + 1/4 + 1/4",proportions:[1,1,1,1],columnCount:4},{id:"1-5-1-5-1-5-1-5",name:"1/5 + 1/5 + 1/5 + 1/5",proportions:[1,1,1,1],columnCount:4},{id:"1-6-1-6-1-6-1-6",name:"1/6 + 1/6 + 1/6 + 1/6",proportions:[1,1,1,1],columnCount:4},{id:"1-8-1-4-1-4-1-8",name:"1/8 + 1/4 + 1/4 + 1/8",proportions:[1,2,2,1],columnCount:4},{id:"1-5-1-5-1-5-1-5-1-5",name:"1/5 + 1/5 + 1/5 + 1/5 + 1/5",proportions:[1,1,1,1,1],columnCount:5},{id:"1-6-1-6-1-3-1-6-1-6",name:"1/6 + 1/6 + 1/3 + 1/6 + 1/6",proportions:[1,1,2,1,1],columnCount:5},{id:"1-8-1-4-1-4-1-4-1-8",name:"1/8 + 1/4 + 1/4 + 1/4 + 1/8",proportions:[1,2,2,2,1],columnCount:5},{id:"1-6-1-6-1-6-1-6-1-6-1-6",name:"1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6",proportions:[1,1,1,1,1,1],columnCount:6}]}connectedCallback(){super.connectedCallback(),this._templateUpdateListener=()=>{this.requestUpdate()},window.addEventListener("ultra-card-template-update",this._templateUpdateListener)}_isMobileDevice(){const e=window.innerWidth<=768,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return e||t}_togglePreviewCollapsed(e){e&&e.stopPropagation(),this._isPreviewCollapsed=!this._isPreviewCollapsed}_toggleConditionExpanded(e){const t=new Set(this._collapsedConditionIds);t.has(e)?t.delete(e):t.add(e),this._collapsedConditionIds=t}_reorderArray(e,t,o){if(t===o)return e;const i=[...e],[a]=i.splice(t,1),n=t<o?o-1:o;return i.splice(n,0,a),i}_onConditionDragStart(e,t,o){e.stopPropagation(),this._draggingCondition={scope:t,fromIndex:o},e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",String(o)))}_onConditionDragOver(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}_onConditionDrop(e,t,o,i,a){if(e.preventDefault(),e.stopPropagation(),!this._draggingCondition||this._draggingCondition.scope!==t)return void(this._draggingCondition=null);const n=this._draggingCondition.fromIndex,r=i()||[];a(this._reorderArray(r,n,o)),this._draggingCondition=null}_resolvePreviewBackgroundImageCSS(e){var t,o;const i=this.hass,a=null==e?void 0:e.background_image_type,n=null==e?void 0:e.background_image;if(!a||"none"===a)return n?`url("${i?(0,u.V)(i,n):n}")`:"none";if("upload"===a||"url"===a)return n?`url("${i?(0,u.V)(i,n):n}")`:"none";if("entity"===a){const a=null==e?void 0:e.background_image_entity;if(a&&i&&i.states[a]){const e=i.states[a];let n="";if((null===(t=e.attributes)||void 0===t?void 0:t.entity_picture)?n=e.attributes.entity_picture:(null===(o=e.attributes)||void 0===o?void 0:o.image)?n=e.attributes.image:"string"==typeof e.state&&(n=e.state),n)return`url("${(0,u.V)(i,n)}")`}return"none"}return"none"}disconnectedCallback(){super.disconnectedCallback(),this._endPopupDrag(),this._endPopupResize(),this._templateUpdateListener&&(window.removeEventListener("ultra-card-template-update",this._templateUpdateListener),this._templateUpdateListener=void 0)}_startPopupDrag(e,t){if(this._isMobileDevice())return;e.preventDefault();const o=t.getBoundingClientRect();t.style.left=`${o.left}px`,t.style.top=`${o.top}px`,t.style.transform="none",t.style.marginLeft="0",t.style.marginTop="0",this._popupDragState={isDragging:!0,dragStartX:e.clientX,dragStartY:e.clientY,initialX:o.left,initialY:o.top,element:t},document.addEventListener("mousemove",this._handlePopupDrag),document.addEventListener("mouseup",this._endPopupDrag),t.classList.add("popup-dragging")}_startPopupResize(e,t){if(this._isMobileDevice())return;e.preventDefault(),e.stopPropagation();const o=window.getComputedStyle(t),i=o.transform&&"none"!==o.transform,a=t.getBoundingClientRect();i&&(t.style.left=`${a.left}px`,t.style.top=`${a.top}px`,t.style.transform="none",t.style.marginLeft="0",t.style.marginTop="0"),this._popupResizeState={isResizing:!0,resizeStartX:e.clientX,resizeStartY:e.clientY,initialWidth:a.width,initialHeight:a.height,element:t},document.addEventListener("mousemove",this._handlePopupResize),document.addEventListener("mouseup",this._endPopupResize),t.classList.add("popup-resizing")}_createColumnIconHTML(e){const t=e.reduce(((e,t)=>e+t),0);return`<div style="display: flex; width: 100%; height: 16px; gap: 2px;">${e.map(((e,o)=>`<div style="width: ${e/t*100}%; height: 16px; background: #2196F3; border-radius: 2px; ${o>0?"margin-left: 2px;":""}"></div>`)).join("")}</div>`}_createSimpleIcon(e){return e.map((e=>"█".repeat(e))).join(" ")}_getLayoutsForColumnCount(e){const t=Math.min(e,6);return this.COLUMN_LAYOUTS.filter((e=>e.columnCount===t))}_migrateLegacyLayoutId(e){return{"50-50":"1-2-1-2","30-70":"1-3-2-3","70-30":"2-3-1-3","33-33-33":"1-3-1-3-1-3","25-50-25":"1-4-1-2-1-4","20-60-20":"1-5-3-5-1-5","25-25-25-25":"1-4-1-4-1-4-1-4"}[e]||e}_ensureLayout(){return this.config.layout&&this.config.layout.rows?this.config.layout:{rows:[{id:`row-${Date.now()}`,columns:[{id:`col-${Date.now()}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"}],column_layout:"1-col"}]}}_updateConfig(e){const t=Object.assign(Object.assign({},this.config),e),o=new CustomEvent("config-changed",{detail:{config:t},bubbles:!0,composed:!0});this.dispatchEvent(o)}_updateLayout(e){this._updateConfig({layout:e})}_addRow(){console.log("Adding new row...");const e=this._ensureLayout(),t={id:`row-${Date.now()}`,columns:[],column_layout:"1-col"},o={rows:[...e.rows,t]};this._updateLayout(o),console.log("Row added successfully (empty row)")}_deleteRow(e){console.log("Deleting row:",e);const t=this._ensureLayout();if(t.rows.length>1){const o={rows:t.rows.filter(((t,o)=>o!==e))};this._updateLayout(o),console.log("Row deleted successfully")}else console.log("Cannot delete the last remaining row")}_duplicateRow(e){console.log("Duplicating row:",e);const t=this._ensureLayout(),o=t.rows[e];if(!o)return void console.error("Row to copy not found at index:",e);const i=Object.assign(Object.assign({},JSON.parse(JSON.stringify(o))),{id:`row-${Date.now()}`,columns:o.columns.map(((e,t)=>Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:`col-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`,modules:e.modules.map(((e,t)=>Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:`${e.type}-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`})))})))}),a=JSON.parse(JSON.stringify(t));a.rows.splice(e+1,0,i),this._updateLayout(a),console.log("Row duplicated successfully. New layout has",a.rows.length,"rows")}_addColumn(e){console.log("Adding column to row:",e);const t=this._ensureLayout(),o=t.rows[e];if(!o)return void console.error("Row not found at index:",e);if(o.columns.length>=6)return void console.log("Cannot add more than 6 columns to a row");const i={id:`col-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"},a={rows:t.rows.map(((t,o)=>o===e?Object.assign(Object.assign({},t),{columns:[...t.columns,i]}):t))};this._updateLayout(a),console.log("Column added successfully. Row now has",a.rows[e].columns.length,"columns")}_addColumnAfter(e,t){console.log("Adding column after:",e,t);const o=this._ensureLayout(),i=o.rows[e];if(!i)return;if(i.columns.length>=6)return void console.log("Cannot add more than 6 columns to a row");const a={id:`col-${Date.now()}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"},n={rows:o.rows.map(((o,i)=>{if(i===e){const e=[...o.columns];return e.splice(t+1,0,a),Object.assign(Object.assign({},o),{columns:e})}return o}))};this._updateLayout(n),console.log("Column added after successfully")}_duplicateColumn(e,t){console.log("Duplicating column:",e,t);const o=this._ensureLayout(),i=o.rows[e];if(!i||!i.columns[t])return void console.error("Row or column not found:",e,t);if(i.columns.length>=6)return void console.log("Cannot duplicate column: maximum 6 columns already reached");const a=i.columns[t],n=Object.assign(Object.assign({},JSON.parse(JSON.stringify(a))),{id:`col-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,modules:a.modules.map(((e,t)=>Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:`${e.type}-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`})))}),r=JSON.parse(JSON.stringify(o));r.rows[e].columns.splice(t+1,0,n),this._updateLayout(r),console.log("Column duplicated successfully. Row now has",r.rows[e].columns.length,"columns")}_deleteColumn(e,t){console.log("Deleting column:",e,t);const o=this._ensureLayout(),i=o.rows[e];if(!i)return void console.error("Row not found at index:",e);if(!i.columns[t])return void console.error("Column not found at index:",t);const a={rows:o.rows.map(((o,i)=>i===e?Object.assign(Object.assign({},o),{columns:o.columns.filter(((e,o)=>o!==t))}):o))};this._updateLayout(a),console.log("Column deleted successfully. Row now has",a.rows[e].columns.length,"columns")}_openColumnLayoutSelector(e){this._selectedRowForLayout=e,this._showColumnLayoutSelector=!0}_changeColumnLayout(e){if(-1===this._selectedRowForLayout)return;const t=this._ensureLayout(),o=t.rows[this._selectedRowForLayout];if(!o)return;const i=this.COLUMN_LAYOUTS.find((t=>t.id===e));if(!i)return;const a=i.columnCount,n=o.columns.length;console.log(`Changing layout from ${n} to ${a} columns`);const r=JSON.parse(JSON.stringify(t)),s=r.rows[this._selectedRowForLayout];if(a===n)s.column_layout=e;else if(a>n){const t=[...s.columns];for(let e=n;e<a;e++)t.push({id:`col-${Date.now()}-${e}-${Math.random().toString(36).substr(2,9)}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"});s.columns=t,s.column_layout=e}else{const t=[],o=[];s.columns.forEach((e=>{e.modules&&e.modules.length>0&&o.push(...e.modules)}));for(let e=0;e<a;e++)e<n?t.push(Object.assign(Object.assign({},s.columns[e]),{modules:[]})):t.push({id:`col-${Date.now()}-${e}-${Math.random().toString(36).substr(2,9)}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"});o.length>0&&(1===a?t[0].modules=o:o.forEach(((e,o)=>{t[o%a].modules.push(e)}))),s.columns=t,s.column_layout=e}this._updateLayout(r),console.log(`Layout changed successfully. Row now has ${a} columns`),this._showColumnLayoutSelector=!1,this._selectedRowForLayout=-1}_getCurrentLayoutDisplay(e){const t=e.columns.length,o=e.column_layout,i=this.COLUMN_LAYOUTS.find((e=>e.id===o));if(i)return this._createSimpleIcon(i.proportions);switch(t){case 1:return"█";case 2:return"█ █";case 3:return"█ █ █";case 4:return"█ █ █ █";default:return"█ ".repeat(Math.min(t,6)).trim()}}_openModuleSelector(e,t){console.log("Opening module selector for:",{rowIndex:e,columnIndex:t});const o=this._ensureLayout().rows[e];o&&o.columns&&0!==o.columns.length||(console.log("Row has no columns, automatically adding one"),this._addColumn(e),t=0),this._selectedRowIndex=e,this._selectedColumnIndex=t,this._showModuleSelector=!0}_addModule(e){var t,o;if(console.log("Adding module of type:",e),-1===this._selectedRowIndex||-1===this._selectedColumnIndex)return void console.error("No row or column selected");const i=this._ensureLayout();if(!i.rows[this._selectedRowIndex])return void console.error("Selected row does not exist:",this._selectedRowIndex);const a=i.rows[this._selectedRowIndex];if(!a.columns[this._selectedColumnIndex])return void console.error("Selected column does not exist:",this._selectedColumnIndex);const n=a.columns[this._selectedColumnIndex],r=(null===(o=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===o?void 0:o.language)||"en";let s,l;switch(e){case"text":s={id:`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"text",text:(0,h.kg)("editor.modules.sample_text",r,"Sample Text"),font_size:16,color:"var(--primary-text-color)"},delete s.name,delete s.title;break;case"separator":s={id:`separator-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"separator",thickness:1,color:"var(--divider-color)"},delete s.name,delete s.title,delete s.label;break;case"image":s={id:`image-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"image",image_type:"none"},delete s.name,delete s.title,delete s.label;break;case"markdown":s={id:`markdown-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"markdown",content:"This is a markdown module that supports:\n\n- Italic and bold text\n- Links\n- inline code\n- Lists and more!",markdown_content:"This is a markdown module that supports:\n\n- Italic and bold text\n- Links\n- inline code\n- Lists and more!"},delete s.name,delete s.title,delete s.label;break;case"bar":s={id:`bar-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"bar",entity:"sensor.battery_level",bar_color:"var(--primary-color)",background_color:"transparent",height:20,show_value:!0},delete s.name,delete s.title,delete s.label;break;case"button":s={id:`button-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"button",label:"Click Me",button_text:"Click Me",tap_action:{action:"more-info"}},delete s.name,delete s.title;break;case"info":s={id:`info-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"info",info_entities:[{entity:"sensor.temperature",name:"Temperature",icon:"mdi:thermometer"}]},delete s.name,delete s.title,delete s.label;break;default:try{const t=(0,c.oD)().createDefaultModule(e);if(t){s=t,delete s.name,delete s.title,delete s.label;break}}catch(e){console.error("Module registry failed:",e)}s={id:`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"text",text:"Unknown Module Type",font_size:16,color:"var(--primary-text-color)"}}if(console.log("Created module:",s),l=this._selectedLayoutModuleIndex>=0?{rows:i.rows.map(((e,t)=>t===this._selectedRowIndex?Object.assign(Object.assign({},e),{columns:e.columns.map(((e,t)=>t===this._selectedColumnIndex?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===this._selectedLayoutModuleIndex){const t=e;return Object.assign(Object.assign({},t),{modules:[...t.modules||[],s]})}return e}))}):e))}):e))}:{rows:i.rows.map(((e,t)=>t===this._selectedRowIndex?Object.assign(Object.assign({},e),{columns:e.columns.map(((e,t)=>t===this._selectedColumnIndex?Object.assign(Object.assign({},e),{modules:[...e.modules||[],s]}):e))}):e))},this._updateLayout(l),this._showModuleSelector=!1,this._shouldAutoOpenSettings(e))if(this._selectedLayoutModuleIndex>=0);else{const e=n.modules.length;this._openModuleSettings(this._selectedRowIndex,this._selectedColumnIndex,e)}this._selectedRowIndex=-1,this._selectedColumnIndex=-1,this._selectedLayoutModuleIndex=-1,console.log("Module added successfully")}_duplicateModule(e,t,o){console.log("Duplicating module:",e,t,o);const i=this._ensureLayout(),a=i.rows[e];if(!a||!a.columns[t])return;const n=a.columns[t];if(!n.modules||!n.modules[o])return;const r=n.modules[o],s=Object.assign(Object.assign({},JSON.parse(JSON.stringify(r))),{id:`${r.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}),l={rows:i.rows.map(((i,a)=>a===e?Object.assign(Object.assign({},i),{columns:i.columns.map(((e,i)=>{if(i===t){const t=[...e.modules];return t.splice(o+1,0,s),Object.assign(Object.assign({},e),{modules:t})}return e}))}):i))};this._updateLayout(l),console.log("Module duplicated successfully")}_deleteModule(e,t,o){console.log("Deleting module:",e,t,o);const i=this._ensureLayout(),a=i.rows[e];if(!a||!a.columns[t])return;const n=a.columns[t];if(!n.modules||!n.modules[o])return;const r={rows:i.rows.map(((i,a)=>a===e?Object.assign(Object.assign({},i),{columns:i.columns.map(((e,i)=>i===t?Object.assign(Object.assign({},e),{modules:e.modules.filter(((e,t)=>t!==o))}):e))}):i))};this._updateLayout(r)}_openModuleSettings(e,t,o){this._selectedModule={rowIndex:e,columnIndex:t,moduleIndex:o},this._showModuleSettings=!0}_updateModule(e){if(!this._selectedModule)return;const t=this._ensureLayout(),{rowIndex:o,columnIndex:i,moduleIndex:a}=this._selectedModule,n={rows:t.rows.map(((t,n)=>n===o?Object.assign(Object.assign({},t),{columns:t.columns.map(((t,o)=>o===i?Object.assign(Object.assign({},t),{modules:t.modules.map(((t,o)=>{if(o===a){const o=Object.assign({},t);for(const[t,i]of Object.entries(e))void 0===i?delete o[t]:o[t]=i;return o}return t}))}):t))}):t))};this._updateLayout(n)}_updateLayoutChildModule(e){if(!this._selectedLayoutChild)return;const{parentRowIndex:t,parentColumnIndex:o,parentModuleIndex:i,childIndex:a}=this._selectedLayoutChild,n=this._ensureLayout(),r=JSON.parse(JSON.stringify(n)),s=r.rows[t];if(!s||!s.columns[o])return;const l=s.columns[o];if(!l.modules||!l.modules[i])return;const d=l.modules[i];if(!d.modules||!d.modules[a])return;const c=d.modules[a],p=Object.assign({},c);if(e.hasOwnProperty("design")){const t=e.design||{},o=p.design||{},i=Object.assign({},o);for(const[e,o]of Object.entries(t))void 0===o?delete i[e]:i[e]=o;p.design=i}for(const[t,o]of Object.entries(e))"design"!==t&&(void 0===o?delete p[t]:p[t]=o);d.modules[a]=p,this._updateLayout(r)}_updateModuleDesign(e){var t,o,i,a,n,r,s,l,d,c,p,u,h,m,g,_,b,v,f,y,x,w,k,$,C,S,A,T,z,I,D,L,E,M;const P=!this._selectedModule&&!!this._selectedLayoutChild;if(!this._selectedModule&&!this._selectedLayoutChild)return;const R={};if(e.hasOwnProperty("color")&&(R.color=e.color),e.hasOwnProperty("text_align")){const s=this._ensureLayout();let l=null;if(P){const{parentRowIndex:e,parentColumnIndex:n,parentModuleIndex:r,childIndex:d}=this._selectedLayoutChild;l=null===(a=null===(i=null===(o=null===(t=s.rows[e])||void 0===t?void 0:t.columns[n])||void 0===o?void 0:o.modules[r])||void 0===i?void 0:i.modules)||void 0===a?void 0:a[d]}else{const{rowIndex:e,columnIndex:t,moduleIndex:o}=this._selectedModule;l=null===(r=null===(n=s.rows[e])||void 0===n?void 0:n.columns[t])||void 0===r?void 0:r.modules[o]}l&&"text"===l.type?(R.design||(R.design=Object.assign({},l.design||{})),R.design.text_align=e.text_align):R.text_align=e.text_align}if(e.hasOwnProperty("font_size")&&(R.font_size=e.font_size?parseFloat(e.font_size):void 0),e.hasOwnProperty("line_height")&&(R.line_height=e.line_height),e.hasOwnProperty("letter_spacing")&&(R.letter_spacing=e.letter_spacing),e.hasOwnProperty("font_family")&&(R.font_family=e.font_family),e.hasOwnProperty("font_weight")&&(R.font_weight=e.font_weight),e.hasOwnProperty("text_transform")&&(R.text_transform=e.text_transform),e.hasOwnProperty("font_style")&&(R.font_style=e.font_style),e.hasOwnProperty("background_color")){const t=this._ensureLayout();let o=null;if(P){const{parentRowIndex:e,parentColumnIndex:i,parentModuleIndex:a,childIndex:n}=this._selectedLayoutChild;o=null===(c=null===(d=null===(l=null===(s=t.rows[e])||void 0===s?void 0:s.columns[i])||void 0===l?void 0:l.modules[a])||void 0===d?void 0:d.modules)||void 0===c?void 0:c[n]}else this._selectedModule&&(o=null===(u=null===(p=t.rows[this._selectedModule.rowIndex])||void 0===p?void 0:p.columns[this._selectedModule.columnIndex])||void 0===u?void 0:u.modules[this._selectedModule.moduleIndex]);R.design||(R.design=Object.assign({},(null==o?void 0:o.design)||{})),R.design.background_color=e.background_color,R.background_color=e.background_color}if(e.hasOwnProperty("background_image")&&(R.background_image=e.background_image),e.hasOwnProperty("background_image_type")&&(R.background_image_type=e.background_image_type),e.hasOwnProperty("background_image_entity")&&(R.background_image_entity=e.background_image_entity),e.hasOwnProperty("backdrop_filter")&&(R.backdrop_filter=e.backdrop_filter),e.hasOwnProperty("width")&&(R.width=e.width),e.hasOwnProperty("height")&&(R.height=e.height),e.hasOwnProperty("max_width")&&(R.max_width=e.max_width),e.hasOwnProperty("max_height")&&(R.max_height=e.max_height),e.hasOwnProperty("min_width")&&(R.min_width=e.min_width),e.hasOwnProperty("min_height")&&(R.min_height=e.min_height),e.hasOwnProperty("position")&&(R.position=e.position),e.hasOwnProperty("top")&&(R.top=e.top),e.hasOwnProperty("bottom")&&(R.bottom=e.bottom),e.hasOwnProperty("left")&&(R.left=e.left),e.hasOwnProperty("right")&&(R.right=e.right),e.hasOwnProperty("z_index")&&(R.z_index=e.z_index),e.hasOwnProperty("text_shadow_h")&&(R.text_shadow_h=e.text_shadow_h),e.hasOwnProperty("text_shadow_v")&&(R.text_shadow_v=e.text_shadow_v),e.hasOwnProperty("text_shadow_blur")&&(R.text_shadow_blur=e.text_shadow_blur),e.hasOwnProperty("text_shadow_color")&&(R.text_shadow_color=e.text_shadow_color),e.hasOwnProperty("box_shadow_h")&&(R.box_shadow_h=e.box_shadow_h),e.hasOwnProperty("box_shadow_v")&&(R.box_shadow_v=e.box_shadow_v),e.hasOwnProperty("box_shadow_blur")&&(R.box_shadow_blur=e.box_shadow_blur),e.hasOwnProperty("box_shadow_spread")&&(R.box_shadow_spread=e.box_shadow_spread),e.hasOwnProperty("box_shadow_color")&&(R.box_shadow_color=e.box_shadow_color),e.hasOwnProperty("overflow")&&(R.overflow=e.overflow),e.hasOwnProperty("clip_path")&&(R.clip_path=e.clip_path),e.hasOwnProperty("margin_top")&&(R.margin_top=e.margin_top),e.hasOwnProperty("margin_bottom")&&(R.margin_bottom=e.margin_bottom),e.hasOwnProperty("margin_left")&&(R.margin_left=e.margin_left),e.hasOwnProperty("margin_right")&&(R.margin_right=e.margin_right),e.hasOwnProperty("padding_top")&&(R.padding_top=e.padding_top),e.hasOwnProperty("padding_bottom")&&(R.padding_bottom=e.padding_bottom),e.hasOwnProperty("padding_left")&&(R.padding_left=e.padding_left),e.hasOwnProperty("padding_right")&&(R.padding_right=e.padding_right),e.hasOwnProperty("border_radius")&&(R.border_radius=e.border_radius),e.hasOwnProperty("border_style")&&(R.border_style=e.border_style),e.hasOwnProperty("border_width")&&(R.border_width=e.border_width),e.hasOwnProperty("border_color")&&(R.border_color=e.border_color),e.hasOwnProperty("animation_type")&&(R.animation_type=e.animation_type),e.hasOwnProperty("animation_entity")&&(R.animation_entity=e.animation_entity),e.hasOwnProperty("animation_trigger_type")&&(R.animation_trigger_type=e.animation_trigger_type),e.hasOwnProperty("animation_attribute")&&(R.animation_attribute=e.animation_attribute),e.hasOwnProperty("animation_state")&&(R.animation_state=e.animation_state),e.hasOwnProperty("intro_animation")&&(R.intro_animation=e.intro_animation),e.hasOwnProperty("outro_animation")&&(R.outro_animation=e.outro_animation),e.hasOwnProperty("animation_duration")&&(R.animation_duration=e.animation_duration),e.hasOwnProperty("animation_delay")&&(R.animation_delay=e.animation_delay),e.hasOwnProperty("animation_timing")&&(R.animation_timing=e.animation_timing),e.hasOwnProperty("margin_top")||e.hasOwnProperty("margin_bottom")||e.hasOwnProperty("margin_left")||e.hasOwnProperty("margin_right")){const t=this._ensureLayout();let o=null;if(P){const{parentRowIndex:e,parentColumnIndex:i,parentModuleIndex:a,childIndex:n}=this._selectedLayoutChild;o=null===(_=null===(g=null===(m=null===(h=t.rows[e])||void 0===h?void 0:h.columns[i])||void 0===m?void 0:m.modules[a])||void 0===g?void 0:g.modules)||void 0===_?void 0:_[n]}else if(this._selectedModule){const{rowIndex:e,columnIndex:i,moduleIndex:a}=this._selectedModule;o=null===(v=null===(b=t.rows[e])||void 0===b?void 0:b.columns[i])||void 0===v?void 0:v.modules[a]}if(o){const t=e.hasOwnProperty("margin_top")?e.margin_top:null===(f=o.margin)||void 0===f?void 0:f.top,i=e.hasOwnProperty("margin_bottom")?e.margin_bottom:null===(y=o.margin)||void 0===y?void 0:y.bottom,a=e.hasOwnProperty("margin_left")?e.margin_left:null===(x=o.margin)||void 0===x?void 0:x.left,n=e.hasOwnProperty("margin_right")?e.margin_right:null===(w=o.margin)||void 0===w?void 0:w.right;if(void 0===t&&void 0===i&&void 0===a&&void 0===n)R.margin=void 0;else{const e=o.margin||{};R.margin={top:void 0!==t?parseFloat(t)||0:e.top||0,bottom:void 0!==i?parseFloat(i)||0:e.bottom||0,left:void 0!==a?parseFloat(a)||0:e.left||0,right:void 0!==n?parseFloat(n)||0:e.right||0}}}}if(e.hasOwnProperty("padding_top")||e.hasOwnProperty("padding_bottom")||e.hasOwnProperty("padding_left")||e.hasOwnProperty("padding_right")){const{rowIndex:t,columnIndex:o,moduleIndex:i}=this._selectedModule,a=null===($=null===(k=this._ensureLayout().rows[t])||void 0===k?void 0:k.columns[o])||void 0===$?void 0:$.modules[i];if(a){const t=e.hasOwnProperty("padding_top")?e.padding_top:null===(C=a.padding)||void 0===C?void 0:C.top,o=e.hasOwnProperty("padding_bottom")?e.padding_bottom:null===(S=a.padding)||void 0===S?void 0:S.bottom,i=e.hasOwnProperty("padding_left")?e.padding_left:null===(A=a.padding)||void 0===A?void 0:A.left,n=e.hasOwnProperty("padding_right")?e.padding_right:null===(T=a.padding)||void 0===T?void 0:T.right;if(void 0===t&&void 0===o&&void 0===i&&void 0===n)R.padding=void 0;else{const e=a.padding||{};R.padding={top:void 0!==t?parseFloat(t)||0:e.top||0,bottom:void 0!==o?parseFloat(o)||0:e.bottom||0,left:void 0!==i?parseFloat(i)||0:e.left||0,right:void 0!==n?parseFloat(n)||0:e.right||0}}}}if(e.hasOwnProperty("border_radius")||e.hasOwnProperty("border_style")||e.hasOwnProperty("border_width")||e.hasOwnProperty("border_color")){const{rowIndex:t,columnIndex:o,moduleIndex:i}=this._selectedModule,a=null===(I=null===(z=this._ensureLayout().rows[t])||void 0===z?void 0:z.columns[o])||void 0===I?void 0:I.modules[i];if(a){const t=e.hasOwnProperty("border_radius")?e.border_radius:null===(D=a.border)||void 0===D?void 0:D.radius,o=e.hasOwnProperty("border_style")?e.border_style:null===(L=a.border)||void 0===L?void 0:L.style,i=e.hasOwnProperty("border_width")?e.border_width:null===(E=a.border)||void 0===E?void 0:E.width,n=e.hasOwnProperty("border_color")?e.border_color:null===(M=a.border)||void 0===M?void 0:M.color;if(void 0===t&&void 0===o&&void 0===i&&void 0===n)R.border=void 0;else{const e=a.border||{};R.border={radius:void 0!==t?parseFloat(t)||0:e.radius||0,style:void 0!==o?o:e.style||"none",width:void 0!==i?i:e.width||"1px",color:void 0!==n?n:e.color||"var(--divider-color)"}}}}P?this._updateLayoutChildModule(R):this._updateModule(R)}_closeModuleSettings(){this._showModuleSettings=!1,this._selectedModule=null,this.requestUpdate()}_closeLayoutChildSettings(){this._showLayoutChildSettings=!1,this._selectedLayoutChild=null,this.requestUpdate()}_onDragStart(e,t,o,i,a){var n,r,s;if(!e.dataTransfer)return;e.stopPropagation();const l=this._ensureLayout();let d;switch(t){case"module":void 0!==i&&void 0!==a&&(d=null===(r=null===(n=l.rows[o])||void 0===n?void 0:n.columns[i])||void 0===r?void 0:r.modules[a]);break;case"column":void 0!==i&&(d=null===(s=l.rows[o])||void 0===s?void 0:s.columns[i]);break;case"row":d=l.rows[o]}this._draggedItem={type:t,rowIndex:o,columnIndex:i,moduleIndex:a,data:d},e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify({type:t,rowIndex:o,columnIndex:i,moduleIndex:a}));const c=e.currentTarget;c&&(c.style.opacity="0.6",c.style.transform="scale(0.95)"),"column"===t?this.setAttribute("dragging-column",""):"row"===t&&this.setAttribute("dragging-row","")}_onDragEnd(e){const t=e.currentTarget;t&&(t.style.opacity="",t.style.transform=""),this.removeAttribute("dragging-column"),this.removeAttribute("dragging-row"),this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}_onDragOver(e){this._draggedItem&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"))}_onDragEnter(e,t,o,i,a){if(e.preventDefault(),e.stopPropagation(),!this._draggedItem)return;if(this._draggedItem.type===t&&this._draggedItem.rowIndex===o&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===a)return;if(void 0!==this._draggedItem.layoutChildIndex&&"layout"===t&&this._draggedItem.rowIndex===o&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===a)return;if(!this._isValidDropTarget(this._draggedItem.type,t))return;this._dropTarget={type:t,rowIndex:o,columnIndex:i,moduleIndex:a};const n=e.currentTarget;n&&(n.style.borderColor="var(--primary-color)",n.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)"),this.requestUpdate()}_onDragLeave(e){const t=e.currentTarget;t&&(t.style.borderColor="",t.style.backgroundColor=""),e.relatedTarget&&e.currentTarget&&!e.currentTarget.contains(e.relatedTarget)&&(this._dropTarget=null,this.requestUpdate())}_onDrop(e,t,o,i,a){e.preventDefault(),e.stopPropagation();const n=e.currentTarget;n&&(n.style.borderColor="",n.style.backgroundColor=""),this._draggedItem&&(this._draggedItem.type===t&&this._draggedItem.rowIndex===o&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===a||this._isValidDropTarget(this._draggedItem.type,t)&&(this._performMove(this._draggedItem,{type:t,rowIndex:o,columnIndex:i,moduleIndex:a}),this._draggedItem=null,this._dropTarget=null,this.requestUpdate()))}_isValidDropTarget(e,t){var o;return(null===(o={module:["module","column","layout","layout-child"],column:["column","row"],row:["row"]}[e])||void 0===o?void 0:o.includes(t))||!1}_performMove(e,t){const o=this._ensureLayout(),i=JSON.parse(JSON.stringify(o));switch(e.type){case"module":this._moveModule(i,e,t);break;case"column":this._moveColumn(i,e,t);break;case"row":this._moveRow(i,e,t)}this._updateLayout(i)}_moveModule(e,t,o){let i;if(void 0!==t.layoutChildIndex&&"layout-child"===o.type){const i=t.rowIndex,a=t.columnIndex,n=t.moduleIndex,r=t.layoutChildIndex,s=o.rowIndex,l=o.columnIndex,d=o.moduleIndex,c=o.childIndex;if(i===s&&a===l&&n===d){if(r===c)return;const t=e.rows[i].columns[a].modules[n];if(t&&this._isLayoutModule(t.type)&&t.modules){const e=t.modules.splice(r,1)[0];let o=c;r<c&&(o=c-1),t.modules.splice(o,0,e)}return}}if(void 0!==t.layoutChildIndex){const o=e.rows[t.rowIndex].columns[t.columnIndex].modules[t.moduleIndex];i=o.modules[t.layoutChildIndex],o.modules.splice(t.layoutChildIndex,1)}else i=e.rows[t.rowIndex].columns[t.columnIndex].modules[t.moduleIndex];if("layout"!==o.type)if("layout-child"!==o.type)if(void 0===t.layoutChildIndex&&e.rows[t.rowIndex].columns[t.columnIndex].modules.splice(t.moduleIndex,1),"module"===o.type){let a=o.moduleIndex||0;t.rowIndex===o.rowIndex&&t.columnIndex===o.columnIndex&&o.moduleIndex>t.moduleIndex&&a--,e.rows[o.rowIndex].columns[o.columnIndex].modules.splice(a,0,i)}else"column"===o.type&&e.rows[o.rowIndex].columns[o.columnIndex].modules.push(i);else{const a=e.rows[o.rowIndex].columns[o.columnIndex].modules[o.moduleIndex];if(a&&this._isLayoutModule(a.type)){a.modules||(a.modules=[]);const n=o.childIndex||0;a.modules.splice(n,0,i),void 0===t.layoutChildIndex&&e.rows[t.rowIndex].columns[t.columnIndex].modules.splice(t.moduleIndex,1)}}else{const a=e.rows[o.rowIndex].columns[o.columnIndex].modules[o.moduleIndex];a&&this._isLayoutModule(a.type)&&(a.modules||(a.modules=[]),a.modules.push(i),void 0===t.layoutChildIndex&&e.rows[t.rowIndex].columns[t.columnIndex].modules.splice(t.moduleIndex,1))}}_moveColumn(e,t,o){const i=e.rows[t.rowIndex].columns[t.columnIndex];e.rows[t.rowIndex].columns.splice(t.columnIndex,1),"column"===o.type?e.rows[o.rowIndex].columns.splice(o.columnIndex||0,0,i):"row"===o.type&&e.rows[o.rowIndex].columns.push(i)}_moveRow(e,t,o){const i=e.rows[t.rowIndex];e.rows.splice(t.rowIndex,1);const a=o.rowIndex;e.rows.splice(a,0,i)}_openRowSettings(e){this._selectedRowForSettings=e,this._showRowSettings=!0}_updateRow(e){if(-1===this._selectedRowForSettings)return;const t=this._ensureLayout(),o=JSON.parse(JSON.stringify(t)),i=o.rows[this._selectedRowForSettings];for(const[t,o]of Object.entries(e))void 0===o?delete i[t]:i[t]=o;this._updateLayout(o)}_openColumnSettings(e,t){this._selectedColumnForSettings={rowIndex:e,columnIndex:t},this._showColumnSettings=!0}_updateColumn(e){if(!this._selectedColumnForSettings)return;const t=this._ensureLayout(),o=JSON.parse(JSON.stringify(t)),i=o.rows[this._selectedColumnForSettings.rowIndex].columns[this._selectedColumnForSettings.columnIndex];for(const[t,o]of Object.entries(e))void 0===o?delete i[t]:i[t]=o;this._updateLayout(o)}_loadGoogleFont(e){if(!e||"default"===e||y.some((t=>t.value===e)))return;if(document.querySelector(`link[href*="${e.replace(/\s+/g,"+")}"]`))return;const t=document.createElement("link");t.rel="stylesheet",t.href=`https://fonts.googleapis.com/css2?family=${e.replace(/\s+/g,"+")}:wght@300;400;500;600;700&display=swap`,document.head.appendChild(t)}_renderModulePreview(){var e,t,o,a,n;if(!this._selectedModule)return i.qy``;const r=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en",{rowIndex:s,columnIndex:l,moduleIndex:d}=this._selectedModule,p=null===(n=null===(a=null===(o=this.config.layout)||void 0===o?void 0:o.rows[s])||void 0===a?void 0:a.columns[l])||void 0===n?void 0:n.modules[d];if(!p)return i.qy``;const u=(0,c.oD)().getModule(p.type),m=u&&"function"==typeof u.renderSplitPreview?u.renderSplitPreview(p,this.hass):this._renderSingleModuleWithAnimation(p);return i.qy`
      <div class="module-preview">
        <div
          class="preview-header"
          @click=${this._togglePreviewCollapsed}
          title="${(0,h.kg)("editor.layout.toggle_preview",r,"Toggle preview")}"
        >
          <span>${(0,h.kg)("editor.layout.live_preview",r,"Live Preview")}</span>
          <ha-icon
            class="preview-caret"
            icon="${this._isPreviewCollapsed?"mdi:chevron-down":"mdi:chevron-up"}"
          ></ha-icon>
        </div>
        <div
          class="preview-content"
          style="display: ${this._isPreviewCollapsed?"none":"block"};"
        >
          ${m}
        </div>
      </div>
    `}_renderSingleModule(e,t,o,i){return this._renderSimplifiedModule(e,t,o,i)}_renderSimplifiedModule(e,t,o,a){var n,r;const s=(0,c.oD)(),l=(null===(r=null===(n=this.hass)||void 0===n?void 0:n.locale)||void 0===r?void 0:r.language)||"en",d=s.getModule(e.type),p=(null==d?void 0:d.metadata)||{icon:"mdi:help-circle",title:"Unknown",description:"Unknown module type"};if("horizontal"===e.type||"vertical"===e.type)return this._renderLayoutModuleAsColumn(e,t,o,a,p);const u=this._generateModuleInfo(e),m=this._getModuleDisplayName(e);return i.qy`
      <div class="simplified-module">
        <div class="simplified-module-header">
          <div
            class="simplified-module-drag-handle"
            title="${(0,h.kg)("editor.layout.drag_to_move_module",l,"Drag to move module")}"
          >
            <ha-icon icon="mdi:drag"></ha-icon>
          </div>
          <ha-icon icon="${p.icon}" class="simplified-module-icon"></ha-icon>
          <div class="simplified-module-content">
            <div class="simplified-module-title">${m}</div>
            <div class="simplified-module-info">${u}</div>
          </div>
          ${void 0!==t&&void 0!==o&&void 0!==a?i.qy`
                <div class="simplified-module-actions">
                  <button
                    class="simplified-action-btn edit-btn"
                    @click=${e=>{e.stopPropagation(),this._openModuleSettings(t,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.edit_module",l,"Edit Module")}"
                  >
                    <ha-icon icon="mdi:pencil"></ha-icon>
                  </button>
                  <button
                    class="simplified-action-btn duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateModule(t,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.duplicate_module",l,"Duplicate Module")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="simplified-action-btn delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteModule(t,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.delete_module",l,"Delete Module")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                </div>
              `:""}
        </div>
      </div>
    `}_renderLayoutModuleAsColumn(e,t,o,a,n){var r,s;const l=(null===(s=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===s?void 0:s.language)||"en",d=e,c=d.modules&&d.modules.length>0,p="horizontal"===e.type;return e.type,i.qy`
      <div class="layout-module-container">
        <div class="layout-module-header">
          <div class="layout-module-title">
            <div
              class="layout-module-drag-handle"
              title="${(0,h.kg)("editor.layout.drag_to_move_layout",l,"Drag to move layout module")}"
            >
              <ha-icon icon="mdi:drag"></ha-icon>
            </div>
            <ha-icon icon="${(null==n?void 0:n.icon)||"mdi:view-sequential"}"></ha-icon>
            <span
              >${p?(0,h.kg)("editor.layout.horizontal_layout",l,"Horizontal Layout"):(0,h.kg)("editor.layout.vertical_layout",l,"Vertical Layout")}</span
            >
          </div>
          <div class="layout-module-actions">
            ${void 0!==t&&void 0!==o&&void 0!==a?i.qy`
                  <button
                    class="layout-module-add-btn"
                    @click=${e=>{e.stopPropagation(),this._openLayoutModuleSelector(t,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.add_module_to_layout",l,"Add Module to Layout")}"
                  >
                    <ha-icon icon="mdi:plus"></ha-icon>
                  </button>
                  <button
                    class="layout-module-settings-btn"
                    @click=${e=>{e.stopPropagation(),this._openModuleSettings(t,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.layout_settings",l,"Layout Settings")}"
                  >
                    <ha-icon icon="mdi:cog"></ha-icon>
                  </button>
                  <button
                    class="layout-module-duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateModule(t,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.duplicate_layout",l,"Duplicate Layout")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="layout-module-delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteModule(t,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.delete_layout",l,"Delete Layout")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                `:""}
          </div>
        </div>
        <div
          class="layout-modules-container"
          style="
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 8px 12px;
            min-height: 60px;
            box-sizing: border-box;
            overflow: hidden;
          "
          @dragover=${this._onDragOver}
          @dragenter=${e=>this._onDragEnter(e,"layout",t,o,a)}
          @dragleave=${this._onDragLeave}
          @drop=${e=>this._onDrop(e,"layout",t,o,a)}
        >
          ${c?d.modules.map(((e,n)=>{var r,s,l,d,c;return i.qy`
                  <div
                    class="layout-child-module-wrapper"
                    draggable="true"
                    @dragstart=${e=>this._onLayoutChildDragStart(e,t,o,a,n)}
                    @dragend=${e=>this._onLayoutChildDragEnd(e)}
                    @dragover=${this._onDragOver}
                    @dragenter=${e=>this._onLayoutChildDragEnter(e,t,o,a,n)}
                    @dragleave=${this._onDragLeave}
                    @drop=${e=>this._onLayoutChildDrop(e,t,o,a,n)}
                    class="${"layout-child"===(null===(r=this._dropTarget)||void 0===r?void 0:r.type)&&(null===(s=this._dropTarget)||void 0===s?void 0:s.rowIndex)===t&&(null===(l=this._dropTarget)||void 0===l?void 0:l.columnIndex)===o&&(null===(d=this._dropTarget)||void 0===d?void 0:d.moduleIndex)===a&&(null===(c=this._dropTarget)||void 0===c?void 0:c.childIndex)===n?"drop-target":""}"
                    style="width: 100%; max-width: 100%; box-sizing: border-box; overflow: hidden;"
                  >
                    ${this._renderLayoutChildModule(e,t,o,a,n)}
                  </div>
                `})):i.qy`
                <div
                  class="layout-module-empty"
                  @click=${e=>{e.stopPropagation(),this._openLayoutModuleSelector(t,o,a)}}
                  title="${(0,h.kg)("editor.layout.click_to_add_module",l,"Click to add a module")}"
                  style="cursor: pointer;"
                >
                  <ha-icon icon="mdi:plus-circle"></ha-icon>
                  <span
                    >${(0,h.kg)("editor.layout.drop_modules_here",l,"Drop modules here")}</span
                  >
                </div>
              `}
          ${c?i.qy`
                <div
                  class="layout-append-zone"
                  @dragover=${this._onDragOver}
                  @dragenter=${e=>this._onLayoutAppendDragEnter(e,t,o,a)}
                  @dragleave=${this._onDragLeave}
                  @drop=${e=>this._onLayoutAppendDrop(e,t,o,a)}
                  style="
                    min-height: 20px;
                    margin-top: 8px;
                    border: 2px dashed transparent;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: var(--secondary-text-color);
                    font-size: 12px;
                    transition: all 0.2s ease;
                  "
                >
                  Drop here to add to end
                </div>
              `:""}
        </div>
      </div>
    `}_getJustifyContent(e){switch(e){case"left":default:return"flex-start";case"center":return"center";case"right":return"flex-end";case"justify":return"space-between"}}_renderLayoutChildModule(e,t,o,a,n){var r,s;const l=(null===(s=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===s?void 0:s.language)||"en",d=(0,c.oD)().getModule(e.type),p=(null==d?void 0:d.metadata)||{icon:"mdi:help-circle",title:"Unknown",description:"Unknown module type"},u=this._generateModuleInfo(e),m=this._getModuleDisplayName(e);return i.qy`
      <div
        class="layout-child-simplified-module"
        @click=${e=>{const i=e.target;i.closest(".layout-child-actions")||i.closest(".layout-child-drag-handle")||(e.stopPropagation(),void 0!==t&&void 0!==o&&void 0!==a&&void 0!==n&&this._openLayoutChildSettings(t,o,a,n))}}
      >
        <div class="layout-child-module-header">
          <div
            class="layout-child-drag-handle"
            title="${(0,h.kg)("editor.layout.drag_to_reorder",l,"Drag to reorder")}"
          >
            <ha-icon icon="mdi:drag"></ha-icon>
          </div>
          <ha-icon icon="${p.icon}" class="layout-child-icon"></ha-icon>
          <div class="layout-child-content">
            <div class="layout-child-title">${m}</div>
            <div class="layout-child-info">${u}</div>
          </div>
          ${void 0!==t&&void 0!==o&&void 0!==a&&void 0!==n?i.qy`
                <div class="layout-child-actions">
                  <button
                    class="layout-child-action-btn edit-btn"
                    @click=${e=>{e.stopPropagation(),this._openLayoutChildSettings(t,o,a,n)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.edit_child_module",l,"Edit Child Module")}"
                  >
                    <ha-icon icon="mdi:pencil"></ha-icon>
                  </button>
                  <button
                    class="layout-child-action-btn duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateLayoutChildModule(t,o,a,n)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.duplicate_child_module",l,"Duplicate Child Module")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="layout-child-action-btn delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteLayoutChildModule(t,o,a,n)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,h.kg)("editor.layout.delete_child_module",l,"Delete Child Module")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                </div>
              `:""}
        </div>
      </div>
    `}_onLayoutModuleDragOver(e,t,o,i){e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}_onLayoutModuleDragEnter(e,t,o,i){e.preventDefault(),e.stopPropagation(),this._draggedItem&&"module"===this._draggedItem.type&&(this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===o&&this._draggedItem.moduleIndex===i||e.currentTarget.classList.add("layout-drop-target"))}_onLayoutModuleDragLeave(e){e.preventDefault(),e.stopPropagation()}_onLayoutModuleDrop(e,t,o,i){if(e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.remove("layout-drop-target"),!this._draggedItem||"module"!==this._draggedItem.type)return void console.log("Invalid drop - not a module or no dragged item");if(void 0===t||void 0===o||void 0===i)return void console.log("Invalid drop - missing coordinates");const a=this._ensureLayout(),n=a.rows[t];if(!n||!n.columns[o])return void console.log("Invalid drop - target row/column not found");const r=n.columns[o].modules[i];if(!r||!this._isLayoutModule(r.type))return void console.log("Invalid drop - target is not a layout module");r.modules||(r.modules=[]);const s=JSON.parse(JSON.stringify(this._draggedItem.data));if(void 0!==this._draggedItem.layoutChildIndex&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===o&&this._draggedItem.moduleIndex===i)return void console.log("Ignoring layout drop - this should be handled by child reordering");r.modules.push(s);const l=a.rows[this._draggedItem.rowIndex];l&&l.columns[this._draggedItem.columnIndex]&&l.columns[this._draggedItem.columnIndex].modules.splice(this._draggedItem.moduleIndex,1),this._updateLayout(a),console.log("Module successfully moved to layout module"),this._draggedItem=null,this._dropTarget=null}_onLayoutChildDragStart(e,t,o,i,a){var n,r,s;if(!e.dataTransfer)return;e.stopPropagation();const l=null===(r=null===(n=this._ensureLayout().rows[t])||void 0===n?void 0:n.columns[o])||void 0===r?void 0:r.modules[i],d=null===(s=null==l?void 0:l.modules)||void 0===s?void 0:s[a];if(d){this._draggedItem={type:"module",rowIndex:t,columnIndex:o,moduleIndex:i,data:d,layoutChildIndex:a},e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify({type:"layout-child",parentRowIndex:t,parentColumnIndex:o,parentModuleIndex:i,childIndex:a}));const n=e.currentTarget;n&&(n.style.opacity="0.6",n.style.transform="scale(0.95)")}}_onLayoutChildDragEnd(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget;t&&(t.style.opacity="",t.style.transform=""),this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}_onLayoutChildDragEnter(e,t,o,i,a){e.preventDefault(),e.stopPropagation(),this._draggedItem&&"module"===this._draggedItem.type&&(void 0!==this._draggedItem.layoutChildIndex&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===o&&this._draggedItem.moduleIndex===i&&this._draggedItem.layoutChildIndex===a||(this._dropTarget={type:"layout-child",rowIndex:t,columnIndex:o,moduleIndex:i,childIndex:a},this.requestUpdate()))}_onLayoutChildDrop(e,t,o,i,a){if(e.preventDefault(),e.stopPropagation(),!this._draggedItem||"module"!==this._draggedItem.type)return void console.log("Invalid drop - not a module or no dragged item");if(void 0===t||void 0===o||void 0===i||void 0===a)return void console.log("Invalid drop - missing coordinates");const n=this._ensureLayout(),r=JSON.parse(JSON.stringify(n)),s=r.rows[t].columns[o].modules[i];if(s&&this._isLayoutModule(s.type)){if(s.modules||(s.modules=[]),void 0!==this._draggedItem.layoutChildIndex){const e=this._draggedItem.rowIndex,n=this._draggedItem.columnIndex,l=this._draggedItem.moduleIndex,d=this._draggedItem.layoutChildIndex;if(e===t&&n===o&&l===i){if(d===a)return;const e=s.modules.splice(d,1)[0];let t=a;d<a&&(t=a-1),s.modules.splice(t,0,e),this._updateLayout(r),console.log("Layout child module reordered successfully")}else{const t=r.rows[e].columns[n].modules[l];if(t&&this._isLayoutModule(t.type)&&t.modules){const e=t.modules.splice(d,1)[0];s.modules.splice(a,0,e),this._updateLayout(r),console.log("Module moved from one layout to another successfully")}}}else{const e=JSON.parse(JSON.stringify(this._draggedItem.data));s.modules.splice(a,0,e);const t=r.rows[this._draggedItem.rowIndex];t&&t.columns[this._draggedItem.columnIndex]&&t.columns[this._draggedItem.columnIndex].modules.splice(this._draggedItem.moduleIndex,1),this._updateLayout(r),console.log("Module moved from column to layout position successfully")}this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}else console.log("Invalid drop - target is not a layout module")}_onLayoutAppendDragEnter(e,t,o,i){if(e.preventDefault(),e.stopPropagation(),!this._draggedItem||"module"!==this._draggedItem.type)return;this._dropTarget={type:"layout-append",rowIndex:t,columnIndex:o,moduleIndex:i};const a=e.currentTarget;a.style.borderColor="var(--primary-color)",a.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)",this.requestUpdate()}_onLayoutAppendDrop(e,t,o,i){e.preventDefault(),e.stopPropagation();const a=e.currentTarget;if(a.style.borderColor="transparent",a.style.backgroundColor="transparent",!this._draggedItem||"module"!==this._draggedItem.type)return void console.log("Invalid drop - not a module or no dragged item");if(void 0===t||void 0===o||void 0===i)return void console.log("Invalid drop - missing coordinates");const n=this._ensureLayout(),r=JSON.parse(JSON.stringify(n)),s=r.rows[t].columns[o].modules[i];if(s&&this._isLayoutModule(s.type))if(s.modules||(s.modules=[]),void 0!==this._draggedItem.layoutChildIndex&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===o&&this._draggedItem.moduleIndex===i){const e=this._draggedItem.layoutChildIndex,t=s.modules.splice(e,1)[0];s.modules.push(t),this._updateLayout(r),console.log("Layout child module moved to end successfully")}else{const e=JSON.parse(JSON.stringify(this._draggedItem.data));if(s.modules.push(e),void 0===this._draggedItem.layoutChildIndex){const e=r.rows[this._draggedItem.rowIndex];e&&e.columns[this._draggedItem.columnIndex]&&e.columns[this._draggedItem.columnIndex].modules.splice(this._draggedItem.moduleIndex,1)}this._updateLayout(r),console.log("Module successfully moved to end of layout module")}this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}_openLayoutModuleSelector(e,t,o){console.log("Opening layout module selector for:",e,t,o),this._selectedRowIndex=e,this._selectedColumnIndex=t,this._selectedLayoutModuleIndex=o,this._showModuleSelector=!0}_openLayoutChildSettings(e,t,o,i){console.log("Opening layout child settings:",e,t,o,i),this._selectedLayoutChild={parentRowIndex:e,parentColumnIndex:t,parentModuleIndex:o,childIndex:i},this._showLayoutChildSettings=!0}_duplicateLayoutChildModule(e,t,o,i){console.log("Duplicating layout child module:",e,t,o,i);const a=this._ensureLayout(),n=a.rows[e];if(!n||!n.columns[t])return;const r=n.columns[t];if(!r.modules||!r.modules[o])return;const s=r.modules[o];if(!s.modules||!s.modules[i])return;const l=s.modules[i],d=JSON.parse(JSON.stringify(l)),c={rows:a.rows.map(((a,n)=>n===e?Object.assign(Object.assign({},a),{columns:a.columns.map(((e,a)=>a===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===o){const t=e,o=[...t.modules];return o.splice(i+1,0,d),Object.assign(Object.assign({},t),{modules:o})}return e}))}):e))}):a))};this._updateLayout(c),console.log("Layout child module duplicated successfully")}_deleteLayoutChildModule(e,t,o,i){console.log("Deleting layout child module:",e,t,o,i);const a=this._ensureLayout(),n=a.rows[e];if(!n||!n.columns[t])return;const r=n.columns[t];if(!r.modules||!r.modules[o])return;const s=r.modules[o];if(!s.modules||!s.modules[i])return;const l={rows:a.rows.map(((a,n)=>n===e?Object.assign(Object.assign({},a),{columns:a.columns.map(((e,a)=>a===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===o){const t=e;return Object.assign(Object.assign({},t),{modules:t.modules.filter(((e,t)=>t!==i))})}return e}))}):e))}):a))};this._updateLayout(l),console.log("Layout child module deleted successfully")}_getModuleDisplayName(e){var t,o;const i=e;if(i.module_name&&i.module_name.trim())return i.module_name;const a=(null===(o=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===o?void 0:o.language)||"en";switch(e.type){case"text":return(0,h.kg)("editor.modules.text",a,"Text Module");case"image":return(0,h.kg)("editor.modules.image",a,"Image Module");case"icon":return(0,h.kg)("editor.modules.icon",a,"Icon Module");case"bar":return(0,h.kg)("editor.modules.bar",a,"Bar Module");case"info":return(0,h.kg)("editor.modules.info",a,"Info Module");case"button":return(0,h.kg)("editor.modules.button",a,"Button Module");case"separator":return(0,h.kg)("editor.modules.separator",a,"Separator Module");case"markdown":return(0,h.kg)("editor.modules.markdown",a,"Markdown Module");case"camera":return(0,h.kg)("editor.modules.camera",a,"Camera Module");case"graphs":return(0,h.kg)("editor.modules.graphs",a,"Graphs Module");default:return e.type.charAt(0).toUpperCase()+e.type.slice(1)+" Module"}}_generateModuleInfo(e){var t,o,i,a,n,r;const s=e,l=(null===(o=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===o?void 0:o.language)||"en";switch(e.type){case"text":return s.text&&s.text.trim()?s.text.length>50?`${s.text.substring(0,50)}...`:s.text:(0,h.kg)("editor.modules.no_text_configured",l,"No text configured");case"image":if(s.image_entity)return`Entity: ${s.image_entity}`;if(s.image_url){const e=s.image_url;if(e.startsWith("data:image/"))return(0,h.kg)("editor.modules.uploaded_image",l,"Uploaded image");const t=e.split("/").pop()||e;return t.length>30?`${t.substring(0,30)}...`:t}if(s.image_path){const e=s.image_path,t=e.split("/").pop()||e;return t.length>30?`${t.substring(0,30)}...`:t}return(0,h.kg)("editor.modules.no_image_configured",l,"No image configured");case"icon":const t=(null===(i=s.icons)||void 0===i?void 0:i.length)||0;if(t>1)return(0,h.kg)("editor.modules.icons_configured",l,"{count} icons configured").replace("{count}",t.toString());if(1===t){const e=s.icons[0];return(null==e?void 0:e.entity)?`Entity: ${e.entity}`:(null==e?void 0:e.icon)?`Icon: ${e.icon}`:"Icon configured"}return(0,h.kg)("editor.modules.no_icons_configured",l,"No icons configured");case"bar":return s.entity?`Entity: ${s.entity}`:(0,h.kg)("editor.modules.default_entity_suggestion",l,"Entity: sensor.battery_level");case"info":if(null===(a=s.info_entities)||void 0===a?void 0:a.length){const e=s.info_entities[0];if(null==e?void 0:e.entity)return s.info_entities.length>1?`${e.entity} + ${s.info_entities.length-1} more`:`Entity: ${e.entity}`}return s.entity?`Entity: ${s.entity}`:(null===(n=s.entities)||void 0===n?void 0:n.length)?`${s.entities.length} entities configured`:"No entity configured";case"button":return s.button_text&&s.button_text.trim()?s.button_text:s.text&&s.text.trim()?s.text:s.label&&s.label.trim()?s.label:"No button text configured";case"markdown":const o=s.content||s.markdown_content;if(o&&o.trim()){const e=o.replace(/[#*`>\-\[\]]/g,"").trim().split(" ").slice(0,8).join(" ");return e.length>40?`${e.substring(0,40)}...`:e}return"This is a markdown module that supports italic and bold text...";case"separator":const d=[];return s.separator_style&&d.push(`Style: ${s.separator_style}`),s.thickness&&d.push(`${s.thickness}px thick`),s.width_percent&&100!==s.width_percent&&d.push(`${s.width_percent}% width`),d.length>0?d.join(" • "):"Visual separator";default:return s.entity?`Entity: ${s.entity}`:(null===(r=s.entities)||void 0===r?void 0:r.length)?`${s.entities.length} entities`:void 0!==s.value?`Value: ${s.value}`:s.text?`Text: ${s.text.length>20?s.text.substring(0,20)+"...":s.text}`:`${e.type.charAt(0).toUpperCase()}${e.type.slice(1)} module`}}_renderSingleModuleWithAnimation(e){var t,o,a,n,r,s,l,d;_.S.setHass(this.hass);const p=_.S.evaluateDisplayConditions(e.display_conditions||[],e.display_mode||"always"),u=e,m=_.S.evaluateLogicProperties({logic_entity:null===(t=u.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(o=u.design)||void 0===o?void 0:o.logic_attribute,logic_operator:null===(a=u.design)||void 0===a?void 0:a.logic_operator,logic_value:null===(n=u.design)||void 0===n?void 0:n.logic_value}),g=(0,c.oD)().getModule(e.type),b=(null===(s=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===s||s.language,!p||!m);let v;v=g?g.renderPreview(e,this.hass):i.qy`
        <div class="module-placeholder">
          <ha-icon icon="mdi:help-circle"></ha-icon>
          <span>Unknown Module: ${e.type}</span>
        </div>
      `;const f=this._getPreviewAnimationData(u);return i.qy`
      <div class="module-with-logic ${b?"logic-hidden":""}">
        ${f.class?i.qy`
              <div
                class="${f.class}"
                style="display: inherit; width: inherit; height: inherit; flex: inherit; animation-duration: ${f.duration};"
              >
                ${v}
              </div>
            `:v}
        ${b?i.qy`
              <div class="logic-overlay">
                <ha-icon icon="mdi:eye-off-outline"></ha-icon>
                <span
                  >${(0,h.kg)("editor.layout.hidden_by_logic",(null===(d=null===(l=this.hass)||void 0===l?void 0:l.locale)||void 0===d?void 0:d.language)||"en","Hidden by Logic")}</span
                >
              </div>
            `:""}
      </div>
    `}_getPreviewAnimationData(e){var t,o,i,a,n,r;const s=e.animation_type||(null===(t=e.design)||void 0===t?void 0:t.animation_type);if(!s||"none"===s)return{class:"",duration:"2s"};const l=e.animation_duration||(null===(o=e.design)||void 0===o?void 0:o.animation_duration)||"2s",d=e.animation_entity||(null===(i=e.design)||void 0===i?void 0:i.animation_entity),c=e.animation_trigger_type||(null===(a=e.design)||void 0===a?void 0:a.animation_trigger_type)||"state",p=e.animation_attribute||(null===(n=e.design)||void 0===n?void 0:n.animation_attribute),u=e.animation_state||(null===(r=e.design)||void 0===r?void 0:r.animation_state);if(!d)return{class:`animation-${s}`,duration:l};if(u&&this.hass){const e=this.hass.states[d];if(e){let t=!1;if("attribute"===c&&p){const o=e.attributes[p];t=String(o)===u}else t=e.state===u;if(t)return{class:`animation-${s}`,duration:l}}}return{class:"",duration:l}}_getRowPreviewAnimationData(e){const t=e.design||{},o=t.animation_type;if(!o||"none"===o)return{class:"",duration:"2s"};const i=t.animation_duration||"2s",a=t.animation_entity,n=t.animation_trigger_type||"state",r=t.animation_attribute,s=t.animation_state;if(!a)return{class:`animation-${o}`,duration:i};if(s&&this.hass){const e=this.hass.states[a];if(e){let t=!1;if("attribute"===n&&r){const o=e.attributes[r];t=String(o)===s}else t=e.state===s;if(t)return{class:`animation-${o}`,duration:i}}}return{class:"",duration:i}}_getColumnPreviewAnimationData(e){const t=e.design||{},o=t.animation_type;if(!o||"none"===o)return{class:"",duration:"2s"};const i=t.animation_duration||"2s",a=t.animation_entity,n=t.animation_trigger_type||"state",r=t.animation_attribute,s=t.animation_state;if(!a)return{class:`animation-${o}`,duration:i};if(s&&this.hass){const e=this.hass.states[a];if(e){let t=!1;if("attribute"===n&&r){const o=e.attributes[r];t=String(o)===s}else t=e.state===s;if(t)return{class:`animation-${o}`,duration:i}}}return{class:"",duration:i}}_renderRowPreview(e){var t,o,a;const n=this._getRowPreviewAnimationData(e),r=e.design||{},s=this._resolvePreviewBackgroundImageCSS(r),l=i.qy`
      <div
        class="row-preview-content"
        style="background: ${(null===(t=e.design)||void 0===t?void 0:t.background_color)||e.background_color||"var(--ha-card-background, var(--card-background-color, #fff))"}; background-image: ${s}; background-size: ${r.background_size||"cover"}; background-position: ${r.background_position||"center"}; background-repeat: ${r.background_repeat||"no-repeat"};gap: ${e.gap||16}px;"
      >
        ${e.columns.map(((e,t)=>i.qy`<div class="column-preview">Column ${t+1}</div>`))}
      </div>
    `,d=(null===(a=null===(o=this.hass)||void 0===o?void 0:o.locale)||void 0===a?void 0:a.language)||"en";return i.qy`
      <div class="module-preview">
        <div
          class="preview-header"
          @click=${this._togglePreviewCollapsed}
          title="${(0,h.kg)("editor.layout.toggle_preview",d,"Toggle preview")}"
        >
          <span>${(0,h.kg)("editor.layout.live_preview",d,"Live Preview")}</span>
          <ha-icon
            class="preview-caret"
            icon="${this._isPreviewCollapsed?"mdi:chevron-down":"mdi:chevron-up"}"
          ></ha-icon>
        </div>
        <div
          class="preview-content"
          style="display: ${this._isPreviewCollapsed?"none":"block"};"
        >
          ${n.class?i.qy`
                <div
                  class="${n.class}"
                  style="display: inherit; width: inherit; height: inherit; flex: inherit; animation-duration: ${n.duration};"
                >
                  ${l}
                </div>
              `:l}
        </div>
      </div>
    `}_renderColumnPreview(e){var t,o,a,n;const r=this._getColumnPreviewAnimationData(e),s=e.design||{},l=this._resolvePreviewBackgroundImageCSS(s),d=i.qy`
      <div
        class="column-preview-content"
        style="background: ${(null===(t=e.design)||void 0===t?void 0:t.background_color)||e.background_color||"var(--ha-card-background, var(--card-background-color, #fff))"}; background-image: ${l}; background-size: ${s.background_size||"cover"}; background-position: ${s.background_position||"center"}; background-repeat: ${s.background_repeat||"no-repeat"};"
      >
        <p>Column Preview</p>
        <div class="module-count">${(null===(o=e.modules)||void 0===o?void 0:o.length)||0} modules</div>
      </div>
    `,c=(null===(n=null===(a=this.hass)||void 0===a?void 0:a.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      <div class="module-preview">
        <div
          class="preview-header"
          @click=${this._togglePreviewCollapsed}
          title="${(0,h.kg)("editor.layout.toggle_preview",c,"Toggle preview")}"
        >
          <span>${(0,h.kg)("editor.layout.live_preview",c,"Live Preview")}</span>
          <ha-icon
            class="preview-caret"
            icon="${this._isPreviewCollapsed?"mdi:chevron-down":"mdi:chevron-up"}"
          ></ha-icon>
        </div>
        <div
          class="preview-content"
          style="display: ${this._isPreviewCollapsed?"none":"block"};"
        >
          ${r.class?i.qy`
                <div
                  class="${r.class}"
                  style="display: inherit; width: inherit; height: inherit; flex: inherit; animation-duration: ${r.duration};"
                >
                  ${d}
                </div>
              `:d}
        </div>
      </div>
    `}_renderModuleSettings(){var e,t,o,a,n,r,s,l;if(!this._selectedModule)return i.qy``;const{rowIndex:d,columnIndex:p,moduleIndex:u}=this._selectedModule,m=null===(o=null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows[d])||void 0===t?void 0:t.columns[p])||void 0===o?void 0:o.modules[u];if(!m)return i.qy``;const g=(0,c.oD)().getModule(m.type),_=g&&"function"==typeof g.renderActionsTab;("actions"===this._activeModuleTab&&!_||"other"===this._activeModuleTab)&&(this._activeModuleTab="general");const b=(null===(n=null===(a=this.hass)||void 0===a?void 0:a.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      <div class="module-settings-popup">
        <div class="popup-overlay"></div>
        <div
          class="popup-content draggable-popup"
          id="module-popup-${null===(r=this._selectedModule)||void 0===r?void 0:r.rowIndex}-${null===(s=this._selectedModule)||void 0===s?void 0:s.columnIndex}-${null===(l=this._selectedModule)||void 0===l?void 0:l.moduleIndex}"
        >
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>
              ${(0,h.kg)("editor.layout.module_settings_title",b,"Module Settings")} -
              ${m.type.charAt(0).toUpperCase()+m.type.slice(1)}
            </h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._selectedModule&&(this._duplicateModule(this._selectedModule.rowIndex,this._selectedModule.columnIndex,this._selectedModule.moduleIndex),this._closeModuleSettings())}}
                title="${(0,h.kg)("editor.layout.duplicate_module",b,"Duplicate Module")}"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._selectedModule&&(this._deleteModule(this._selectedModule.rowIndex,this._selectedModule.columnIndex,this._selectedModule.moduleIndex),this._closeModuleSettings())}}
                title="${(0,h.kg)("editor.layout.delete_module",b,"Delete Module")}"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._closeModuleSettings()}>×</button>
            </div>
          </div>

          ${this._renderModulePreview()}

          <div class="module-tabs">
            <button
              class="module-tab ${"general"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="general"}
            >
              ${(0,h.kg)("editor.layout.general_tab",b,"General")}
            </button>
            ${_?i.qy`
                  <button
                    class="module-tab ${"actions"===this._activeModuleTab?"active":""}"
                    @click=${()=>this._activeModuleTab="actions"}
                  >
                    ${(0,h.kg)("editor.layout.actions_tab",b,"Actions")}
                  </button>
                `:""}
            ${""}
            <button
              class="module-tab ${"logic"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="logic"}
            >
              ${(0,h.kg)("editor.layout.logic_tab",b,"Logic")}
            </button>
            <button
              class="module-tab ${"design"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="design"}
            >
              ${(0,h.kg)("editor.layout.design_tab",b,"Design")}
            </button>
          </div>

          <div class="module-tab-content">
            ${"general"===this._activeModuleTab?this._renderGeneralTab(m):""}
            ${"actions"===this._activeModuleTab&&_?this._renderActionsTab(m):""}
            ${this._activeModuleTab,""}
            ${"logic"===this._activeModuleTab?this._renderLogicTab(m):""}
            ${"design"===this._activeModuleTab?this._renderDesignTab(m):""}
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="${(0,h.kg)("editor.layout.drag_to_resize",b,"Drag to resize")}"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}_renderLayoutChildSettings(){var e,t,o,a,n,r;if(!this._selectedLayoutChild)return i.qy``;const{parentRowIndex:s,parentColumnIndex:l,parentModuleIndex:d,childIndex:p}=this._selectedLayoutChild,u=this._ensureLayout().rows[s];if(!u||!u.columns[l])return i.qy``;const m=u.columns[l];if(!m.modules||!m.modules[d])return i.qy``;const g=m.modules[d];if(!g.modules||!g.modules[p])return i.qy``;const _=g.modules[p],b=(0,c.oD)().getModule(_.type),v=b&&"function"==typeof b.renderActionsTab;("actions"===this._activeModuleTab&&!v||"other"===this._activeModuleTab)&&(this._activeModuleTab="general");const f=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return i.qy`
      <div class="module-settings-popup">
        <div class="popup-overlay" @click=${()=>this._closeLayoutChildSettings()}></div>
        <div
          class="popup-content draggable-popup"
          id="child-popup-${null===(o=this._selectedLayoutChild)||void 0===o?void 0:o.parentRowIndex}-${null===(a=this._selectedLayoutChild)||void 0===a?void 0:a.parentColumnIndex}-${null===(n=this._selectedLayoutChild)||void 0===n?void 0:n.parentModuleIndex}-${null===(r=this._selectedLayoutChild)||void 0===r?void 0:r.childIndex}"
        >
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>
              ${(0,h.kg)("editor.layout.child_module_settings_title",f,"Child Module Settings")}
              - ${_.type.charAt(0).toUpperCase()+_.type.slice(1)}
            </h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._selectedLayoutChild&&(this._duplicateLayoutChildModule(this._selectedLayoutChild.parentRowIndex,this._selectedLayoutChild.parentColumnIndex,this._selectedLayoutChild.parentModuleIndex,this._selectedLayoutChild.childIndex),this._closeLayoutChildSettings())}}
                title="Duplicate Child Module"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._selectedLayoutChild&&(this._deleteLayoutChildModule(this._selectedLayoutChild.parentRowIndex,this._selectedLayoutChild.parentColumnIndex,this._selectedLayoutChild.parentModuleIndex,this._selectedLayoutChild.childIndex),this._closeLayoutChildSettings())}}
                title="Delete Child Module"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._closeLayoutChildSettings()}>
                ×
              </button>
            </div>
          </div>

          <!-- Child module preview -->
          <div class="module-preview">
            <div
              class="preview-header"
              @click=${this._togglePreviewCollapsed}
              title="${(0,h.kg)("editor.layout.toggle_preview",f,"Toggle preview")}"
            >
              <span>${(0,h.kg)("editor.layout.live_preview",f,"Live Preview")}</span>
              <ha-icon
                class="preview-caret"
                icon="${this._isPreviewCollapsed?"mdi:chevron-down":"mdi:chevron-up"}"
              ></ha-icon>
            </div>
            <div
              class="preview-content"
              style="display: ${this._isPreviewCollapsed?"none":"block"};"
            >
              ${this._renderSingleModuleWithAnimation(_)}
            </div>
          </div>

          <div class="module-tabs">
            <button
              class="module-tab ${"general"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="general"}
            >
              ${(0,h.kg)("editor.layout.general_tab",f,"General")}
            </button>
            ${v?i.qy`
                  <button
                    class="module-tab ${"actions"===this._activeModuleTab?"active":""}"
                    @click=${()=>this._activeModuleTab="actions"}
                  >
                    ${(0,h.kg)("editor.layout.actions_tab",f,"Actions")}
                  </button>
                `:""}
            ${""}
            <button
              class="module-tab ${"logic"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="logic"}
            >
              ${(0,h.kg)("editor.layout.logic_tab",f,"Logic")}
            </button>
            <button
              class="module-tab ${"design"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="design"}
            >
              ${(0,h.kg)("editor.layout.design_tab",f,"Design")}
            </button>
          </div>

          <div class="module-tab-content">
            ${"general"===this._activeModuleTab?this._renderLayoutChildGeneralTab(_):""}
            ${"actions"===this._activeModuleTab&&v?this._renderLayoutChildActionsTab(_):""}
            ${this._activeModuleTab,""}
            ${"logic"===this._activeModuleTab?this._renderLayoutChildLogicTab(_):""}
            ${"design"===this._activeModuleTab?this._renderLayoutChildDesignTab(_):""}
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}_renderLayoutChildGeneralTab(e){var t,o;const a=(0,c.oD)().getModule(e.type),n=(null===(o=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===o?void 0:o.language)||"en",r=i.qy`
      <div class="settings-section">
        <label>${(0,h.kg)("editor.layout.module_name",n,"Module Name:")}</label>
        <input
          type="text"
          .value=${e.module_name||""}
          @input=${e=>this._updateLayoutChildModule({module_name:e.target.value})}
          placeholder="${(0,h.kg)("editor.layout.module_name_placeholder",n,"Give this module a custom name to make it easier to identify in the editor.")}"
          class="module-name-input"
        />
        <div class="field-help">
          ${(0,h.kg)("editor.layout.module_name_help",n,"Give this module a custom name to make it easier to identify in the editor.")}
        </div>
      </div>
    `;if(a){const t=a.renderGeneralTab(e,this.hass,this.config,(e=>this._updateLayoutChildModule(e)));return i.qy` ${r} ${t} `}return i.qy`
      ${r}
      <div class="settings-section">
        <div class="error-message">
          <ha-icon icon="mdi:alert-circle"></ha-icon>
          <span>No settings available for module type: ${e.type}</span>
        </div>
      </div>
    `}_renderLayoutChildActionsTab(e){const t=(0,c.oD)().getModule(e.type);return t&&"function"==typeof t.renderActionsTab?t.renderActionsTab(e,this.hass,this.config,(e=>this._updateLayoutChildModule(e))):i.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have action settings</span>
        </div>
      </div>
    `}_renderLayoutChildOtherTab(e){const t=(0,c.oD)().getModule(e.type);return t&&"function"==typeof t.renderOtherTab?t.renderOtherTab(e,this.hass,this.config,(e=>this._updateLayoutChildModule(e))):i.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have other settings</span>
        </div>
      </div>
    `}_renderLayoutChildLogicTab(e){const t=this._selectedModule;this._selectedModule={rowIndex:0,columnIndex:0,moduleIndex:0};const o=this._updateModule.bind(this);this._updateModule=e=>{this._updateLayoutChildModule(e)};const i=this._renderLogicTab(e);return this._selectedModule=t,this._updateModule=o,i}_renderLayoutChildDesignTab(e){const t=this._updateModule.bind(this),o=this._updateModuleDesign.bind(this);this._updateModule=e=>{this._updateLayoutChildModule(e)},this._updateModuleDesign=e=>{var t,o;const i=this._ensureLayout(),a=this._selectedLayoutChild;let n;if(a){const e=((null===(o=null===(t=i.rows[a.parentRowIndex])||void 0===t?void 0:t.columns[a.parentColumnIndex])||void 0===o?void 0:o.modules)||[])[a.parentModuleIndex];n=((null==e?void 0:e.modules)||[])[a.childIndex]}const r=(null==n?void 0:n.design)||{},s={design:Object.assign(Object.assign({},r),e)};Object.prototype.hasOwnProperty.call(e,"background_color")&&(s.background_color=e.background_color,"bar"===(null==n?void 0:n.type)&&(s.bar_background_color=e.background_color)),this._updateLayoutChildModule(s)};const i=this._renderDesignTab(e);return this._updateModule=t,this._updateModuleDesign=o,i}_renderRowSettings(){var e;if(-1===this._selectedRowForSettings)return i.qy``;const t=null===(e=this.config.layout)||void 0===e?void 0:e.rows[this._selectedRowForSettings];return t?i.qy`
      <div class="settings-popup">
        <div class="popup-overlay" @click=${()=>this._showRowSettings=!1}></div>
        <div class="popup-content draggable-popup" id="row-popup-${this._selectedRowForSettings}">
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>Row Settings</h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._duplicateRow(this._selectedRowForSettings),this._showRowSettings=!1}}
                title="Duplicate Row"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._deleteRow(this._selectedRowForSettings),this._showRowSettings=!1}}
                title="Delete Row"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._showRowSettings=!1}>
                ×
              </button>
            </div>
          </div>

          ${this._renderRowPreview(t)}

          <div class="settings-tabs">
            <button
              class="settings-tab ${"general"===this._activeRowTab?"active":""}"
              @click=${()=>this._activeRowTab="general"}
            >
              General
            </button>
            <button
              class="settings-tab ${"actions"===this._activeRowTab?"active":""}"
              @click=${()=>this._activeRowTab="actions"}
            >
              Actions
            </button>
            <button
              class="settings-tab ${"logic"===this._activeRowTab?"active":""}"
              @click=${()=>this._activeRowTab="logic"}
            >
              Logic
            </button>
            <button
              class="settings-tab ${"design"===this._activeRowTab?"active":""}"
              @click=${()=>this._activeRowTab="design"}
            >
              Design
            </button>
          </div>

          <div class="settings-tab-content">
            ${"general"===this._activeRowTab?this._renderRowGeneralTab(t):""}
            ${"actions"===this._activeRowTab?this._renderRowActionsTab(t):""}
            ${"logic"===this._activeRowTab?this._renderRowLogicTab(t):""}
            ${"design"===this._activeRowTab?this._renderRowDesignTab(t):""}
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `:i.qy``}_renderColumnSettings(){var e,t,o,a;if(!this._selectedColumnForSettings)return i.qy``;const{rowIndex:n,columnIndex:r}=this._selectedColumnForSettings,s=null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows[n])||void 0===t?void 0:t.columns[r];return s?i.qy`
      <div class="settings-popup">
        <div class="popup-overlay" @click=${()=>this._showColumnSettings=!1}></div>
        <div
          class="popup-content draggable-popup"
          id="column-popup-${null===(o=this._selectedColumnForSettings)||void 0===o?void 0:o.rowIndex}-${null===(a=this._selectedColumnForSettings)||void 0===a?void 0:a.columnIndex}"
        >
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>Column Settings</h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._selectedColumnForSettings&&(this._duplicateColumn(this._selectedColumnForSettings.rowIndex,this._selectedColumnForSettings.columnIndex),this._showColumnSettings=!1)}}
                title="Duplicate Column"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._selectedColumnForSettings&&(this._deleteColumn(this._selectedColumnForSettings.rowIndex,this._selectedColumnForSettings.columnIndex),this._showColumnSettings=!1)}}
                title="Delete Column"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._showColumnSettings=!1}>
                ×
              </button>
            </div>
          </div>

          ${this._renderColumnPreview(s)}

          <div class="settings-tabs">
            <button
              class="settings-tab ${"general"===this._activeColumnTab?"active":""}"
              @click=${()=>this._activeColumnTab="general"}
            >
              General
            </button>
            <button
              class="settings-tab ${"actions"===this._activeColumnTab?"active":""}"
              @click=${()=>this._activeColumnTab="actions"}
            >
              Actions
            </button>
            <button
              class="settings-tab ${"logic"===this._activeColumnTab?"active":""}"
              @click=${()=>this._activeColumnTab="logic"}
            >
              Logic
            </button>
            <button
              class="settings-tab ${"design"===this._activeColumnTab?"active":""}"
              @click=${()=>this._activeColumnTab="design"}
            >
              Design
            </button>
          </div>

          <div class="settings-tab-content">
            ${"general"===this._activeColumnTab?this._renderColumnGeneralTab(s):""}
            ${"actions"===this._activeColumnTab?this._renderColumnActionsTab(s):""}
            ${"logic"===this._activeColumnTab?this._renderColumnLogicTab(s):""}
            ${"design"===this._activeColumnTab?this._renderColumnDesignTab(s):""}
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `:i.qy``}_renderRowGeneralTab(e){return i.qy`
      <div class="settings-section">
        <ultra-color-picker
          .label=${"Row Background Color"}
          .value=${e.background_color||""}
          .defaultValue=${"var(--ha-card-background, var(--card-background-color, #fff))"}
          .hass=${this.hass}
          @value-changed=${e=>{const t=e.detail.value;this._updateRow({background_color:t})}}
        ></ultra-color-picker>
      </div>
      <div class="settings-section">
        <label>Column Gap (px):</label>
        <input
          type="number"
          min="0"
          max="50"
          .value=${e.gap||16}
          @change=${e=>this._updateRow({gap:Number(e.target.value)})}
        />
      </div>
    `}_renderRowActionsTab(e){const t=e;return(new class extends p.m{}).renderActionsTab(t,this.hass,this.config,(e=>{this._updateRow(e)}))}_renderRowLogicTab(e){const t=e.display_conditions||[],o=e.display_mode||"always",a=e.template_mode||!1;return i.qy`
      <div class="logic-tab-content">
        <!-- Conditions Section (only shown when template mode is disabled) -->
        ${a?i.qy`
              <div class="template-mode-notice">
                <p>
                  <em>Advanced Template Mode is enabled. Basic conditions above are ignored.</em>
                </p>
              </div>
            `:i.qy`
              <div class="logic-section">
                <div class="section-header">
                  <h3>Display this Row</h3>
                </div>

                <div class="display-mode-selector">
                  <select
                    .value=${o}
                    @change=${e=>{const t=e.target.value;this._updateRow({display_mode:t})}}
                    class="display-mode-dropdown"
                  >
                    <option value="always">Always</option>
                    <option value="every">If EVERY condition below is met</option>
                    <option value="any">If ANY condition below is met</option>
                  </select>
                </div>
              </div>

              <!-- Conditions Section -->
              ${"always"!==o?i.qy`
                    <div class="conditions-section">
                      <div class="conditions-header">
                        <h4>Conditions</h4>
                        <button
                          type="button"
                          class="add-condition-btn"
                          @click=${()=>this._addRowCondition(e)}
                        >
                          <ha-icon icon="mdi:plus"></ha-icon>
                          Add Condition
                        </button>
                      </div>

                      <div class="conditions-list">
                        ${t.map(((t,o)=>this._renderRowCondition(e,t,o)))}
                      </div>

                      ${0===t.length?i.qy`
                            <div class="no-conditions">
                              <p>No conditions added yet. Click "Add Condition" to get started.</p>
                            </div>
                          `:""}
                    </div>
                  `:""}
            `}

        <!-- Advanced Template Mode Section -->
        <div class="template-section">
          <div class="switch-container">
            <span class="switch-label">Advanced Template Mode</span>
            <label class="switch">
              <input
                type="checkbox"
                .checked=${a}
                @change=${e=>{const t=e.target.checked;this._updateRow({template_mode:t,display_mode:t?"always":o})}}
              />
              <span class="slider"></span>
            </label>
          </div>
          <div class="template-description">
            Use Jinja2 templates for advanced conditional logic. When enabled, the conditions above
            are ignored.
          </div>

          ${a?i.qy`
                <div class="template-content">
                  <textarea
                    .value=${e.template||""}
                    @input=${e=>this._updateRow({template:e.target.value})}
                    placeholder="{% if states('binary_sensor.example') == 'on' %}true{% else %}false{% endif %}"
                    class="template-editor"
                    rows="6"
                  ></textarea>
                  <div class="template-help">
                    <p><strong>Template should return a boolean value:</strong></p>
                    <ul>
                      <li>
                        <code>true</code>, <code>on</code>, <code>yes</code>, <code>1</code> → Show
                        row
                      </li>
                      <li>
                        <code>false</code>, <code>off</code>, <code>no</code>, <code>0</code> → Hide
                        row
                      </li>
                    </ul>
                  </div>
                </div>
              `:""}
        </div>
      </div>
    `}_renderRowDesignTab(t){var o,a,n,r,s,l,d,c,p,u,h,m,g,_,b,v,f,y,x,w,k,$,C,S,A,T,z,I,D,L,E,M;null==e||e.type;const P=Object.assign(Object.assign({},t.design),{background_color:(null===(o=t.design)||void 0===o?void 0:o.background_color)||t.background_color,padding_top:(null===(a=t.design)||void 0===a?void 0:a.padding_top)||(null===(n=t.padding)||void 0===n?void 0:n.toString()),padding_bottom:(null===(r=t.design)||void 0===r?void 0:r.padding_bottom)||(null===(s=t.padding)||void 0===s?void 0:s.toString()),padding_left:(null===(l=t.design)||void 0===l?void 0:l.padding_left)||(null===(d=t.padding)||void 0===d?void 0:d.toString()),padding_right:(null===(c=t.design)||void 0===c?void 0:c.padding_right)||(null===(p=t.padding)||void 0===p?void 0:p.toString()),border_radius:(null===(u=t.design)||void 0===u?void 0:u.border_radius)||(null===(h=t.border_radius)||void 0===h?void 0:h.toString()),border_color:(null===(m=t.design)||void 0===m?void 0:m.border_color)||t.border_color,border_width:(null===(g=t.design)||void 0===g?void 0:g.border_width)||(null===(_=t.border_width)||void 0===_?void 0:_.toString()),margin_top:(null===(b=t.design)||void 0===b?void 0:b.margin_top)||(null===(v=t.margin)||void 0===v?void 0:v.toString()),margin_bottom:(null===(f=t.design)||void 0===f?void 0:f.margin_bottom)||(null===(y=t.margin)||void 0===y?void 0:y.toString()),margin_left:(null===(x=t.design)||void 0===x?void 0:x.margin_left)||(null===(w=t.margin)||void 0===w?void 0:w.toString()),margin_right:(null===(k=t.design)||void 0===k?void 0:k.margin_right)||(null===($=t.margin)||void 0===$?void 0:$.toString()),animation_type:null===(C=t.design)||void 0===C?void 0:C.animation_type,animation_entity:null===(S=t.design)||void 0===S?void 0:S.animation_entity,animation_trigger_type:null===(A=t.design)||void 0===A?void 0:A.animation_trigger_type,animation_attribute:null===(T=t.design)||void 0===T?void 0:T.animation_attribute,animation_state:null===(z=t.design)||void 0===z?void 0:z.animation_state,animation_duration:null===(I=t.design)||void 0===I?void 0:I.animation_duration,intro_animation:null===(D=t.design)||void 0===D?void 0:D.intro_animation,outro_animation:null===(L=t.design)||void 0===L?void 0:L.outro_animation,animation_delay:null===(E=t.design)||void 0===E?void 0:E.animation_delay,animation_timing:null===(M=t.design)||void 0===M?void 0:M.animation_timing});return i.qy`
      <ultra-global-design-tab
        .hass=${this.hass}
        .designProperties=${P}
        @design-changed=${e=>{const o=e.detail,i=Object.assign(Object.assign({},t.design),o);this._updateRow({design:i})}}
      ></ultra-global-design-tab>
    `}_renderColumnGeneralTab(e){return i.qy`
      <div class="settings-section">
        <label>Vertical Alignment:</label>
        <select
          .value=${e.vertical_alignment||"center"}
          @change=${e=>this._updateColumn({vertical_alignment:e.target.value})}
        >
          <option value="top">Top</option>
          <option value="center">Center</option>
          <option value="bottom">Bottom</option>
          <option value="stretch">Stretch</option>
        </select>
      </div>
      <div class="settings-section">
        <label>Horizontal Alignment:</label>
        <select
          .value=${e.horizontal_alignment||"center"}
          @change=${e=>this._updateColumn({horizontal_alignment:e.target.value})}
        >
          <option value="left">Left</option>
          <option value="center">Center</option>
          <option value="right">Right</option>
          <option value="stretch">Stretch</option>
        </select>
      </div>
    `}_renderColumnActionsTab(e){const t=e;return(new class extends p.m{}).renderActionsTab(t,this.hass,this.config,(e=>{this._updateColumn(e)}))}_renderColumnLogicTab(e){const t=e.display_conditions||[],o=e.display_mode||"always",a=e.template_mode||!1;return i.qy`
      <div class="logic-tab-content">
        <!-- Conditions Section (only shown when template mode is disabled) -->
        ${a?i.qy`
              <div class="template-mode-notice">
                <p>
                  <em>Advanced Template Mode is enabled. Basic conditions above are ignored.</em>
                </p>
              </div>
            `:i.qy`
              <div class="logic-section">
                <div class="section-header">
                  <h3>Display this Column</h3>
                </div>

                <div class="display-mode-selector">
                  <select
                    .value=${o}
                    @change=${e=>{const t=e.target.value;this._updateColumn({display_mode:t})}}
                    class="display-mode-dropdown"
                  >
                    <option value="always">Always</option>
                    <option value="every">If EVERY condition below is met</option>
                    <option value="any">If ANY condition below is met</option>
                  </select>
                </div>
              </div>

              <!-- Conditions Section -->
              ${"always"!==o?i.qy`
                    <div class="conditions-section">
                      <div class="conditions-header">
                        <h4>Conditions</h4>
                        <button
                          type="button"
                          class="add-condition-btn"
                          @click=${()=>this._addColumnCondition(e)}
                        >
                          <ha-icon icon="mdi:plus"></ha-icon>
                          Add Condition
                        </button>
                      </div>

                      <div class="conditions-list">
                        ${t.map(((t,o)=>this._renderColumnCondition(e,t,o)))}
                      </div>

                      ${0===t.length?i.qy`
                            <div class="no-conditions">
                              <p>No conditions added yet. Click "Add Condition" to get started.</p>
                            </div>
                          `:""}
                    </div>
                  `:""}
            `}

        <!-- Advanced Template Mode Section -->
        <div class="template-section">
          <div class="switch-container">
            <span class="switch-label">Advanced Template Mode</span>
            <label class="switch">
              <input
                type="checkbox"
                .checked=${a}
                @change=${e=>{const t=e.target.checked;this._updateColumn({template_mode:t,display_mode:t?"always":o})}}
              />
              <span class="slider"></span>
            </label>
          </div>
          <div class="template-description">
            Use Jinja2 templates for advanced conditional logic. When enabled, the conditions above
            are ignored.
          </div>

          ${a?i.qy`
                <div class="template-content">
                  <textarea
                    .value=${e.template||""}
                    @input=${e=>this._updateColumn({template:e.target.value})}
                    placeholder="{% if states('binary_sensor.example') == 'on' %}true{% else %}false{% endif %}"
                    class="template-editor"
                    rows="6"
                  ></textarea>
                  <div class="template-help">
                    <p><strong>Template should return a boolean value:</strong></p>
                    <ul>
                      <li>
                        <code>true</code>, <code>on</code>, <code>yes</code>, <code>1</code> → Show
                        column
                      </li>
                      <li>
                        <code>false</code>, <code>off</code>, <code>no</code>, <code>0</code> → Hide
                        column
                      </li>
                    </ul>
                  </div>
                </div>
              `:""}
        </div>
      </div>
    `}_renderColumnDesignTab(e){var t,o,a,n,r,s,l,d,c,p,u,h,m,g,_,b,v,f,y,x,w,k,$,C,S,A,T,z,I,D,L,E;const M=Object.assign(Object.assign({},e.design),{background_color:(null===(t=e.design)||void 0===t?void 0:t.background_color)||e.background_color,padding_top:(null===(o=e.design)||void 0===o?void 0:o.padding_top)||(null===(a=e.padding)||void 0===a?void 0:a.toString()),padding_bottom:(null===(n=e.design)||void 0===n?void 0:n.padding_bottom)||(null===(r=e.padding)||void 0===r?void 0:r.toString()),padding_left:(null===(s=e.design)||void 0===s?void 0:s.padding_left)||(null===(l=e.padding)||void 0===l?void 0:l.toString()),padding_right:(null===(d=e.design)||void 0===d?void 0:d.padding_right)||(null===(c=e.padding)||void 0===c?void 0:c.toString()),border_radius:(null===(p=e.design)||void 0===p?void 0:p.border_radius)||(null===(u=e.border_radius)||void 0===u?void 0:u.toString()),border_color:(null===(h=e.design)||void 0===h?void 0:h.border_color)||e.border_color,border_width:(null===(m=e.design)||void 0===m?void 0:m.border_width)||(null===(g=e.border_width)||void 0===g?void 0:g.toString()),margin_top:(null===(_=e.design)||void 0===_?void 0:_.margin_top)||(null===(b=e.margin)||void 0===b?void 0:b.toString()),margin_bottom:(null===(v=e.design)||void 0===v?void 0:v.margin_bottom)||(null===(f=e.margin)||void 0===f?void 0:f.toString()),margin_left:(null===(y=e.design)||void 0===y?void 0:y.margin_left)||(null===(x=e.margin)||void 0===x?void 0:x.toString()),margin_right:(null===(w=e.design)||void 0===w?void 0:w.margin_right)||(null===(k=e.margin)||void 0===k?void 0:k.toString()),animation_type:null===($=e.design)||void 0===$?void 0:$.animation_type,animation_entity:null===(C=e.design)||void 0===C?void 0:C.animation_entity,animation_trigger_type:null===(S=e.design)||void 0===S?void 0:S.animation_trigger_type,animation_attribute:null===(A=e.design)||void 0===A?void 0:A.animation_attribute,animation_state:null===(T=e.design)||void 0===T?void 0:T.animation_state,animation_duration:null===(z=e.design)||void 0===z?void 0:z.animation_duration,intro_animation:null===(I=e.design)||void 0===I?void 0:I.intro_animation,outro_animation:null===(D=e.design)||void 0===D?void 0:D.outro_animation,animation_delay:null===(L=e.design)||void 0===L?void 0:L.animation_delay,animation_timing:null===(E=e.design)||void 0===E?void 0:E.animation_timing});return i.qy`
      <ultra-global-design-tab
        .hass=${this.hass}
        .designProperties=${M}
        @design-changed=${t=>{const o=t.detail,i=Object.assign(Object.assign({},e.design),o);this._updateColumn({design:i})}}
      ></ultra-global-design-tab>
    `}_renderGeneralTab(e){var t,o;const a=(null===(o=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===o?void 0:o.language)||"en",n=(0,c.oD)().getModule(e.type),r=i.qy`
      <div class="settings-section">
        <label>${(0,h.kg)("editor.layout.module_name",a,"Module Name:")}</label>
        <input
          type="text"
          .value=${e.module_name||""}
          @input=${e=>this._updateModule({module_name:e.target.value})}
          placeholder="${(0,h.kg)("editor.layout.module_name_placeholder",a,"Give this module a custom name to make it easier to identify in the editor.")}"
          class="module-name-input"
        />
        <div class="field-help">
          ${(0,h.kg)("editor.layout.module_name_help",a,"Give this module a custom name to make it easier to identify in the editor.")}
        </div>
      </div>
    `;if(n){const t=n.renderGeneralTab(e,this.hass,this.config,(e=>this._updateModule(e)));return e.type,i.qy` ${r} ${t} `}return i.qy`
      ${r}
      <div class="settings-section">
        <div class="error-message">
          <ha-icon icon="mdi:alert-circle"></ha-icon>
          <span>No settings available for module type: ${e.type}</span>
        </div>
      </div>
    `}_renderActionsTab(e){const t=(0,c.oD)().getModule(e.type);return t&&"function"==typeof t.renderActionsTab?t.renderActionsTab(e,this.hass,this.config,(e=>this._updateModule(e))):i.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have action settings</span>
        </div>
      </div>
    `}_renderOtherTab(e){const t=(0,c.oD)().getModule(e.type);return t&&"function"==typeof t.renderOtherTab?t.renderOtherTab(e,this.hass,this.config,(e=>this._updateModule(e))):i.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have other settings</span>
        </div>
      </div>
    `}_addCondition(e){const t={id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"entity_state",entity:"",operator:"=",value:"",enabled:!0},o=[...e.display_conditions||[],t];this._updateModule({display_conditions:o})}_addRowCondition(e){const t={id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"entity_state",entity:"",operator:"=",value:"",enabled:!0},o=[...e.display_conditions||[],t];this._updateRow({display_conditions:o})}_addColumnCondition(e){const t={id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"entity_state",entity:"",operator:"=",value:"",enabled:!0},o=[...e.display_conditions||[],t];this._updateColumn({display_conditions:o})}_removeCondition(e,t){const o=(e.display_conditions||[]).filter(((e,o)=>o!==t));this._updateModule({display_conditions:o})}_updateCondition(e,t,o){const i=(e.display_conditions||[]).map(((e,i)=>i===t?Object.assign(Object.assign({},e),o):e));this._updateModule({display_conditions:i})}_duplicateCondition(e,t){const o=e.display_conditions||[],i=o[t];if(i){const e=Object.assign(Object.assign({},i),{id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}),a=[...o.slice(0,t+1),e,...o.slice(t+1)];this._updateModule({display_conditions:a})}}_renderRowCondition(e,t,o){return this._renderConditionGeneric(t,o,(t=>{const i=(e.display_conditions||[]).map(((e,i)=>i===o?Object.assign(Object.assign({},e),t):e));this._updateRow({display_conditions:i})}),(()=>{const t=(e.display_conditions||[]).filter(((e,t)=>t!==o));this._updateRow({display_conditions:t})}),"row",o,(()=>e.display_conditions),(e=>this._updateRow({display_conditions:e})))}_renderColumnCondition(e,t,o){return this._renderConditionGeneric(t,o,(t=>{const i=(e.display_conditions||[]).map(((e,i)=>i===o?Object.assign(Object.assign({},e),t):e));this._updateColumn({display_conditions:i})}),(()=>{const t=(e.display_conditions||[]).filter(((e,t)=>t!==o));this._updateColumn({display_conditions:t})}),"column",o,(()=>e.display_conditions),(e=>this._updateColumn({display_conditions:e})))}_renderConditionGeneric(e,t,o,a,n,r,s,l){const d=!this._collapsedConditionIds.has(e.id);return i.qy`
      <div
        class="condition-item enabled"
        draggable="true"
        @dragstart=${e=>n&&this._onConditionDragStart(e,n,t)}
        @dragover=${this._onConditionDragOver}
        @drop=${e=>n&&s&&l&&"number"==typeof r?this._onConditionDrop(e,n,r,s,l):null}
      >
        <div class="condition-header">
          <div class="condition-header-left">
            <button
              type="button"
              class="condition-toggle ${d?"expanded":""}"
              @click=${()=>this._toggleConditionExpanded(e.id)}
            >
              <ha-icon icon="mdi:chevron-${d?"down":"right"}"></ha-icon>
            </button>
            <span class="condition-label">
              ${"entity_state"===e.type?e.entity||"Select Entity State":"entity_attribute"===e.type?e.entity||"Select Entity Attribute":"time"===e.type?"Time Condition":"Template Condition"}
            </span>
          </div>

          <div class="condition-actions">
            <button
              type="button"
              class="condition-action-btn delete"
              @click=${a}
              title="Delete"
            >
              <ha-icon icon="mdi:delete"></ha-icon>
            </button>
          </div>
        </div>

        ${d?i.qy`
              <div class="condition-content">
                <!-- Condition Type Selector -->
                <div class="condition-field">
                  <label>Condition Type:</label>
                  <select
                    .value=${e.type}
                    @change=${e=>{const t=e.target.value;o({type:t,entity:"",operator:"=",value:""})}}
                  >
                    <option value="entity_state">Entity State</option>
                    <option value="entity_attribute">Entity Attribute</option>
                    <option value="time">Date/Time</option>
                    <option value="template">Template</option>
                  </select>
                </div>

                ${"entity_state"===e.type?this._renderEntityConditionGeneric(e,o):""}
                ${"entity_attribute"===e.type?this._renderEntityAttributeConditionGeneric(e,o):""}

                <!-- Removed enable/disable toggle; delete the condition to disable -->
              </div>
            `:""}
      </div>
    `}_renderEntityConditionGeneric(e,t){return i.qy`
      <div class="entity-condition-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:e.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            @value-changed=${e=>t({entity:e.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${e.operator||"="}
            @change=${e=>t({operator:e.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==e.operator&&"no_value"!==e.operator?i.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${e.value||""}
                  @input=${e=>t({value:e.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderEntityAttributeConditionGeneric(e,t){return i.qy`
      <div class="entity-attribute-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:e.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            @value-changed=${e=>t({entity:e.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Attribute Selector -->
        <div class="condition-field">
          <label>Attribute Name:</label>
          <input
            type="text"
            .value=${e.attribute||""}
            @input=${e=>t({attribute:e.target.value})}
            placeholder="Enter attribute name (e.g., battery_level, friendly_name)"
          />
          <div class="field-help">
            Enter the exact attribute name from the entity. Common examples: battery_level,
            friendly_name, unit_of_measurement
          </div>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${e.operator||"="}
            @change=${e=>t({operator:e.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==e.operator&&"no_value"!==e.operator?i.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${e.value||""}
                  @input=${e=>t({value:e.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderCondition(e,t,o){const a=!this._collapsedConditionIds.has(t.id);return i.qy`
      <div class="condition-item enabled">
        <div class="condition-header">
          <div class="condition-header-left">
            <button
              type="button"
              class="condition-toggle ${a?"expanded":""}"
              @click=${()=>this._toggleConditionExpanded(t.id)}
            >
              <ha-icon icon="mdi:chevron-${a?"down":"right"}"></ha-icon>
            </button>
            <span class="condition-label">
              ${"entity_state"===t.type?t.entity||"Select Entity State":"entity_attribute"===t.type?t.entity||"Select Entity Attribute":"time"===t.type?"Time Condition":"Template Condition"}
            </span>
          </div>

          <div class="condition-actions">
            <button
              type="button"
              class="condition-action-btn"
              @click=${()=>this._duplicateCondition(e,o)}
              title="Duplicate"
            >
              <ha-icon icon="mdi:content-copy"></ha-icon>
            </button>
            <button
              type="button"
              class="condition-action-btn delete"
              @click=${()=>this._removeCondition(e,o)}
              title="Delete"
            >
              <ha-icon icon="mdi:delete"></ha-icon>
            </button>
            <button
              type="button"
              class="condition-drag-handle"
              title="Drag to reorder"
              draggable="true"
              @dragstart=${e=>this._onConditionDragStart(e,"module",o)}
              @dragover=${this._onConditionDragOver}
              @drop=${t=>this._onConditionDrop(t,"module",o,(()=>e.display_conditions),(e=>this._updateModule({display_conditions:e})))}
            >
              <ha-icon icon="mdi:drag"></ha-icon>
            </button>
          </div>
        </div>

        ${a?i.qy`
              <div class="condition-content">
                <!-- Condition Type Selector -->
                <div class="condition-field">
                  <label>Condition Type:</label>
                  <select
                    .value=${t.type}
                    @change=${t=>{const i=t.target.value;this._updateCondition(e,o,{type:i,entity:"",operator:"=",value:""})}}
                  >
                    <option value="entity_state">Entity State</option>
                    <option value="entity_attribute">Entity Attribute</option>
                    <option value="time">Date/Time</option>
                    <option value="template">Template</option>
                  </select>
                </div>

                ${"entity_state"===t.type?this._renderEntityCondition(e,t,o):""}
                ${"entity_attribute"===t.type?this._renderEntityAttributeCondition(e,t,o):""}
                ${"time"===t.type?this._renderTimeCondition(e,t,o):""}
                ${"template"===t.type?this._renderTemplateCondition(e,t,o):""}

                <!-- Removed enable/disable toggle; delete the condition to disable -->
              </div>
            `:""}
      </div>
    `}_renderEntityCondition(e,t,o){return i.qy`
      <div class="entity-condition-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:t.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            .computeLabel=${e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e.name?e.name.charAt(0).toUpperCase()+e.name.slice(1):""}}
            @value-changed=${t=>this._updateCondition(e,o,{entity:t.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${t.operator||"="}
            @change=${t=>this._updateCondition(e,o,{operator:t.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==t.operator&&"no_value"!==t.operator?i.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${t.value||""}
                  @input=${t=>this._updateCondition(e,o,{value:t.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderEntityAttributeCondition(e,t,o){return i.qy`
      <div class="entity-attribute-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:t.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            .computeLabel=${e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e.name?e.name.charAt(0).toUpperCase()+e.name.slice(1):""}}
            @value-changed=${t=>this._updateCondition(e,o,{entity:t.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Attribute Selector -->
        <div class="condition-field">
          <label>Attribute Name:</label>
          <input
            type="text"
            .value=${t.attribute||""}
            @input=${t=>this._updateCondition(e,o,{attribute:t.target.value})}
            placeholder="Enter attribute name (e.g., battery_level, friendly_name)"
          />
          <div class="field-help">
            Enter the exact attribute name from the entity. Common examples: battery_level,
            friendly_name, unit_of_measurement
          </div>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${t.operator||"="}
            @change=${t=>this._updateCondition(e,o,{operator:t.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==t.operator&&"no_value"!==t.operator?i.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${t.value||""}
                  @input=${t=>this._updateCondition(e,o,{value:t.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderTimeCondition(e,t,o){return i.qy`
      <div class="time-condition-fields">
        <p class="condition-info">Local time is ${(new Date).toLocaleString()}</p>

        <div class="time-inputs">
          <div class="condition-field">
            <label>From Time:</label>
            <input
              type="time"
              .value=${t.time_from||""}
              @input=${t=>this._updateCondition(e,o,{time_from:t.target.value})}
            />
          </div>

          <div class="condition-field">
            <label>To Time:</label>
            <input
              type="time"
              .value=${t.time_to||""}
              @input=${t=>this._updateCondition(e,o,{time_to:t.target.value})}
            />
          </div>
        </div>
      </div>
    `}_renderTemplateCondition(e,t,o){return i.qy`
      <div class="template-condition">
        <div class="condition-field">
          <label>Template:</label>
          <textarea
            .value=${t.template||""}
            @input=${t=>this._updateCondition(e,o,{template:t.target.value})}
            placeholder="{% if states('sensor.example') == 'on' %}true{% else %}false{% endif %}"
            rows="3"
          ></textarea>
        </div>
        <div class="template-help">Template should return 'true' or 'false'</div>
      </div>
    `}_renderLogicTab(e){var t,o;const a=e.display_conditions||[],n=e.display_mode||"always",r=(null===(o=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===o?void 0:o.language)||"en";return i.qy`
      <div class="logic-tab-content">
        <!-- Basic Conditions Section -->
        <div class="logic-section">
          <div class="section-header">
            <h3>${(0,h.kg)("editor.layout_logic.display_title",r,"Display this Element")}</h3>
          </div>

          <div class="template-description">
            ${(0,h.kg)("editor.layout_logic.display_desc",r,'Control when this element is shown. Choose "Always" to keep it visible. Select "If EVERY condition below is met" or "If ANY condition below is met" to display it only when the conditions you add below evaluate to true.')}
          </div>

          <div class="display-mode-selector">
            <select
              .value=${n}
              @change=${e=>{const t=e.target.value;this._updateModule({display_mode:t})}}
              class="display-mode-dropdown"
            >
              <option value="always">
                ${(0,h.kg)("editor.layout_logic.always",r,"Always")}
              </option>
              <option value="every">
                ${(0,h.kg)("editor.layout_logic.every",r,"If EVERY condition below is met")}
              </option>
              <option value="any">
                ${(0,h.kg)("editor.layout_logic.any",r,"If ANY condition below is met")}
              </option>
            </select>
          </div>
        </div>

        <!-- Conditions Section -->
        ${"always"!==n?i.qy`
              <div class="conditions-section">
                <div class="conditions-header">
                  <h4>${(0,h.kg)("editor.layout_logic.conditions",r,"Conditions")}</h4>
                  <button
                    type="button"
                    class="add-condition-btn"
                    @click=${()=>this._addCondition(e)}
                  >
                    <ha-icon icon="mdi:plus"></ha-icon>
                    ${(0,h.kg)("editor.layout_logic.add_condition",r,"Add Condition")}
                  </button>
                </div>

                <div class="conditions-list" @dragover=${this._onConditionDragOver}>
                  ${a.map(((t,o)=>i.qy`
                      <div
                        class="condition-row-dropzone"
                        @drop=${t=>this._onConditionDrop(t,"module",o,(()=>e.display_conditions),(e=>this._updateModule({display_conditions:e})))}
                      >
                        ${this._renderCondition(e,t,o)}
                      </div>
                    `))}
                </div>

                ${0===a.length?i.qy`
                      <div class="no-conditions">
                        <p>
                          ${(0,h.kg)("editor.layout_logic.no_conditions",r,'No conditions added yet. Click "Add Condition" to get started.')}
                        </p>
                      </div>
                    `:""}
              </div>
            `:""}

        <!-- Advanced Template Mode removed; use Template condition type in Conditions -->
      </div>
    `}_renderDesignTab(e){var t,o,a,n,r,s,l,d,c,p,u,h,m,g,_,b,v,f,y,x,w,k,$,C,S,A,T;const z="bar"===(null==e?void 0:e.type),I={color:e.color,text_align:(()=>{var t;return void 0!==e.text_align?e.text_align:void 0!==e.alignment?e.alignment:void 0!==(null===(t=e.design)||void 0===t?void 0:t.text_align)?e.design.text_align:void 0})(),font_size:(()=>{const t=e.font_size;if(null!=t&&""!==t)return t.toString()})(),line_height:null===(t=e.line_height)||void 0===t?void 0:t.toString(),letter_spacing:e.letter_spacing,font_family:e.font_family,font_weight:(()=>{const t=e.font_weight;if(null!=t&&""!==t)return t})(),text_transform:(()=>{const t=e.text_transform;if(null!=t&&""!==t)return t})(),font_style:e.font_style,background_color:null===(o=e.design)||void 0===o?void 0:o.background_color,background_image:e.background_image,background_image_type:e.background_image_type,background_image_entity:e.background_image_entity,backdrop_filter:e.backdrop_filter,width:z?null===(a=e.design)||void 0===a?void 0:a.width:e.width,height:z?null===(n=e.design)||void 0===n?void 0:n.height:e.height,max_width:e.max_width,max_height:e.max_height,min_width:e.min_width,min_height:e.min_height,margin_top:(null===(s=null===(r=e.margin)||void 0===r?void 0:r.top)||void 0===s?void 0:s.toString())||e.margin_top,margin_bottom:(null===(d=null===(l=e.margin)||void 0===l?void 0:l.bottom)||void 0===d?void 0:d.toString())||e.margin_bottom,margin_left:(null===(p=null===(c=e.margin)||void 0===c?void 0:c.left)||void 0===p?void 0:p.toString())||e.margin_left,margin_right:(null===(h=null===(u=e.margin)||void 0===u?void 0:u.right)||void 0===h?void 0:h.toString())||e.margin_right,padding_top:(null===(g=null===(m=e.padding)||void 0===m?void 0:m.top)||void 0===g?void 0:g.toString())||e.padding_top,padding_bottom:(null===(b=null===(_=e.padding)||void 0===_?void 0:_.bottom)||void 0===b?void 0:b.toString())||e.padding_bottom,padding_left:(null===(f=null===(v=e.padding)||void 0===v?void 0:v.left)||void 0===f?void 0:f.toString())||e.padding_left,padding_right:(null===(x=null===(y=e.padding)||void 0===y?void 0:y.right)||void 0===x?void 0:x.toString())||e.padding_right,border_radius:(null===(k=null===(w=e.border)||void 0===w?void 0:w.radius)||void 0===k?void 0:k.toString())||(null===($=e.border_radius)||void 0===$?void 0:$.toString()),border_style:(null===(C=e.border)||void 0===C?void 0:C.style)||e.border_style,border_width:(null===(A=null===(S=e.border)||void 0===S?void 0:S.width)||void 0===A?void 0:A.toString())||e.border_width,border_color:(null===(T=e.border)||void 0===T?void 0:T.color)||e.border_color,position:e.position,top:e.top,bottom:e.bottom,left:e.left,right:e.right,z_index:e.z_index,text_shadow_h:e.text_shadow_h,text_shadow_v:e.text_shadow_v,text_shadow_blur:e.text_shadow_blur,text_shadow_color:e.text_shadow_color,box_shadow_h:e.box_shadow_h,box_shadow_v:e.box_shadow_v,box_shadow_blur:e.box_shadow_blur,box_shadow_spread:e.box_shadow_spread,box_shadow_color:e.box_shadow_color,overflow:e.overflow,clip_path:e.clip_path,animation_type:e.animation_type,animation_entity:e.animation_entity,animation_trigger_type:e.animation_trigger_type,animation_attribute:e.animation_attribute,animation_state:e.animation_state,intro_animation:e.intro_animation,outro_animation:e.outro_animation,animation_duration:e.animation_duration,animation_delay:e.animation_delay,animation_timing:e.animation_timing};return i.qy`
      <ultra-global-design-tab
        .hass=${this.hass}
        .designProperties=${I}
        .onUpdate=${e=>{this._updateModuleDesign(e)}}
      ></ultra-global-design-tab>
    `}_renderTextDesignTab(e){var t,o,a,n,r,s;if("text"===e.type){const o=e;return i.qy`
        <!-- Text Color Section -->
        <div class="settings-section">
          <ultra-color-picker
            .label=${"Text Color"}
            .value=${o.color||""}
            .defaultValue=${"var(--primary-text-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({color:t}),this._loadGoogleFont(o.font_family)}}
          ></ultra-color-picker>
        </div>

        <!-- Font Family Dropdown -->
        <div class="settings-section">
          <label>Font:</label>
          <select
            .value=${o.font_family||"default"}
            @change=${e=>{const t=e.target.value;this._updateModule({font_family:t}),this._loadGoogleFont(t)}}
            class="font-dropdown"
          >
            ${v.map((e=>i.qy`
                <option value="${e.value}" ?selected=${o.font_family===e.value}>
                  ${e.label}
                </option>
              `))}
            <optgroup label="Fonts from Typography settings">
              ${f.map((e=>i.qy`
                  <option value="${e.value}" ?selected=${o.font_family===e.value}>
                    ${e.label}
                  </option>
                `))}
            </optgroup>
            <optgroup label="Web safe font combinations (do not need to be loaded)">
              ${y.map((e=>i.qy`
                  <option value="${e.value}" ?selected=${o.font_family===e.value}>
                    ${e.label}
                  </option>
                `))}
            </optgroup>
          </select>
        </div>

        <!-- Font Size -->
        <div class="settings-section">
          <label>Font Size (px):</label>
          <input
            type="text"
            .value=${(null!==(t=o.font_size)&&void 0!==t?t:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({font_size:void 0});const o=parseFloat(t);!Number.isNaN(o)&&/^\s*-?\d*\.?\d*\s*(px|rem|em|%)?\s*$/i.test(t)&&this._updateModule({font_size:o})}}
            placeholder=""
            class="font-size-input"
          />
        </div>

        <!-- Text Alignment -->
        <div class="settings-section">
          <label>Text Alignment:</label>
          <div class="alignment-buttons">
            ${["left","center","right"].map((e=>i.qy`
                <button
                  class="alignment-btn ${o.alignment===e?"active":""}"
                  @click=${()=>this._updateModule({alignment:e})}
                >
                  <ha-icon icon="mdi:format-align-${e}"></ha-icon>
                </button>
              `))}
          </div>
        </div>

        <!-- Text Formatting -->
        <div class="settings-section">
          <label>Text Formatting:</label>
          <div class="format-buttons">
            <button
              class="format-btn ${o.bold?"active":""}"
              @click=${()=>this._updateModule({bold:!o.bold})}
            >
              <ha-icon icon="mdi:format-bold"></ha-icon>
            </button>
            <button
              class="format-btn ${o.italic?"active":""}"
              @click=${()=>this._updateModule({italic:!o.italic})}
            >
              <ha-icon icon="mdi:format-italic"></ha-icon>
            </button>
            <button
              class="format-btn ${o.uppercase?"active":""}"
              @click=${()=>this._updateModule({uppercase:!o.uppercase})}
            >
              <ha-icon icon="mdi:format-letter-case-upper"></ha-icon>
            </button>
            <button
              class="format-btn ${o.strikethrough?"active":""}"
              @click=${()=>this._updateModule({strikethrough:!o.strikethrough})}
            >
              <ha-icon icon="mdi:format-strikethrough"></ha-icon>
            </button>
          </div>
        </div>
      `}if("separator"===e.type){const t=e;return i.qy`
        <div class="settings-section">
          <ultra-color-picker
            .label=${"Separator Color"}
            .value=${t.color||""}
            .defaultValue=${"var(--divider-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({color:t})}}
          ></ultra-color-picker>
        </div>
      `}if("bar"===e.type){const t=e;return i.qy`
        <!-- Bar Colors -->
        <div class="settings-section">
          <ultra-color-picker
            .label=${"Bar Color"}
            .value=${t.bar_color||""}
            .defaultValue=${"var(--primary-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({bar_color:t})}}
          ></ultra-color-picker>
        </div>

        <div class="settings-section">
          <ultra-color-picker
            .label=${"Background Color"}
            .value=${t.background_color||""}
            .defaultValue=${"var(--secondary-background-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({background_color:t})}}
          ></ultra-color-picker>
        </div>

        <!-- Bar Dimensions -->
        <div class="settings-section">
          <label>Bar Height (px):</label>
          <input
            type="text"
            .value=${(null!==(o=t.height)&&void 0!==o?o:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({height:void 0});const o=parseFloat(t);Number.isNaN(o)||this._updateModule({height:o})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Border Radius (px):</label>
          <input
            type="text"
            .value=${(null!==(a=t.border_radius)&&void 0!==a?a:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({border_radius:void 0});const o=parseFloat(t);Number.isNaN(o)||this._updateModule({border_radius:o})}}
            class="number-input"
          />
        </div>

        <!-- Value Display Options -->
        <div class="settings-section">
          <label class="checkbox-wrapper">
            <input
              type="checkbox"
              .checked=${!1!==t.show_value}
              @change=${e=>this._updateModule({show_value:e.target.checked})}
            />
            Show Value
          </label>
        </div>

        ${t.show_value?i.qy`
              <div class="settings-section">
                <label>Value Position:</label>
                <div class="value-position-buttons">
                  ${["inside","outside","none"].map((e=>i.qy`
                      <button
                        class="position-btn ${t.value_position===e?"active":""}"
                        @click=${()=>this._updateModule({value_position:e})}
                      >
                        ${e.charAt(0).toUpperCase()+e.slice(1)}
                      </button>
                    `))}
                </div>
              </div>
            `:""}

        <div class="settings-section">
          <label class="checkbox-wrapper">
            <input
              type="checkbox"
              .checked=${!1!==t.show_percentage}
              @change=${e=>this._updateModule({show_percentage:e.target.checked})}
            />
            Show as Percentage
          </label>
        </div>

        <div class="settings-section">
          <label class="checkbox-wrapper">
            <input
              type="checkbox"
              .checked=${!1!==t.animation}
              @change=${e=>this._updateModule({animation:e.target.checked})}
            />
            Animation
          </label>
        </div>
      `}if("image"===e.type){const t=e;return i.qy`
        <!-- Image Alignment -->
        <div class="settings-section">
          <label>Image Alignment:</label>
          <div class="alignment-buttons">
            ${["left","center","right"].map((e=>i.qy`
                <button
                  class="alignment-btn ${t.alignment===e?"active":""}"
                  @click=${()=>this._updateModule({alignment:e})}
                >
                  <ha-icon icon="mdi:format-align-${e}"></ha-icon>
                </button>
              `))}
          </div>
        </div>

        <!-- Image Dimensions -->
        <div class="settings-section">
          <label>Width (px):</label>
          <input
            type="text"
            .value=${(null!==(n=t.image_width)&&void 0!==n?n:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({image_width:void 0});const o=parseFloat(t);Number.isNaN(o)||this._updateModule({image_width:o})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Height (px):</label>
          <input
            type="text"
            .value=${(null!==(r=t.image_height)&&void 0!==r?r:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({image_height:void 0});const o=parseFloat(t);Number.isNaN(o)||this._updateModule({image_height:o})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Border Radius (px):</label>
          <input
            type="text"
            .value=${(null!==(s=t.border_radius)&&void 0!==s?s:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({border_radius:void 0});const o=parseFloat(t);Number.isNaN(o)||this._updateModule({border_radius:o})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Image Fit:</label>
          <div class="value-position-buttons">
            ${["cover","contain","fill","none"].map((e=>i.qy`
                <button
                  class="position-btn ${t.image_fit===e?"active":""}"
                  @click=${()=>this._updateModule({image_fit:e})}
                >
                  ${e.charAt(0).toUpperCase()+e.slice(1)}
                </button>
              `))}
          </div>
        </div>
      `}return i.qy`<div class="settings-section">
      <p>Design options not available for ${e.type} modules.</p>
    </div>`}_renderBackgroundDesignTab(e){return i.qy`
      <div class="settings-section">
        <ultra-color-picker
          .label=${"Background Color"}
          .value=${e.background_color||""}
          .defaultValue=${"var(--ha-card-background, var(--card-background-color, #fff))"}
          .hass=${this.hass}
          @value-changed=${e=>{const t=e.detail.value;this._updateModule({background_color:t})}}
        ></ultra-color-picker>
      </div>
    `}_renderSpacingDesignTab(e){var t,o,a,n,r,s,l,d,c,p,u,h,m,g,_,b;return i.qy`
      <div class="spacing-grid">
        <div class="spacing-section">
          <h4>Margin</h4>
          <div class="spacing-cross">
            <input
              type="text"
              placeholder="Top"
              .value=${(null!==(o=null===(t=e.margin)||void 0===t?void 0:t.top)&&void 0!==o?o:"").toString()}
              @input=${t=>{const o=t.target.value,i=""===o?void 0:parseFloat(o);this._updateModule({margin:Object.assign(Object.assign({},e.margin),{top:i})})}}
            />
            <div class="spacing-row">
              <input
                type="text"
                placeholder="Left"
                .value=${(null!==(n=null===(a=e.margin)||void 0===a?void 0:a.left)&&void 0!==n?n:"").toString()}
                @input=${t=>this._updateModule({margin:Object.assign(Object.assign({},e.margin),{left:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
              <span class="spacing-center">M</span>
              <input
                type="text"
                placeholder="Right"
                .value=${(null!==(s=null===(r=e.margin)||void 0===r?void 0:r.right)&&void 0!==s?s:"").toString()}
                @input=${t=>this._updateModule({margin:Object.assign(Object.assign({},e.margin),{right:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
            </div>
            <input
              type="text"
              placeholder="Bottom"
              .value=${(null!==(d=null===(l=e.margin)||void 0===l?void 0:l.bottom)&&void 0!==d?d:"").toString()}
              @input=${t=>this._updateModule({margin:Object.assign(Object.assign({},e.margin),{bottom:""===t.target.value?void 0:parseFloat(t.target.value)})})}
            />
          </div>
        </div>

        <div class="spacing-section">
          <h4>Padding</h4>
          <div class="spacing-cross">
            <input
              type="text"
              placeholder="Top"
              .value=${(null!==(p=null===(c=e.padding)||void 0===c?void 0:c.top)&&void 0!==p?p:"").toString()}
              @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{top:""===t.target.value?void 0:parseFloat(t.target.value)})})}
            />
            <div class="spacing-row">
              <input
                type="text"
                placeholder="Left"
                .value=${(null!==(h=null===(u=e.padding)||void 0===u?void 0:u.left)&&void 0!==h?h:"").toString()}
                @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{left:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
              <span class="spacing-center">P</span>
              <input
                type="text"
                placeholder="Right"
                .value=${(null!==(g=null===(m=e.padding)||void 0===m?void 0:m.right)&&void 0!==g?g:"").toString()}
                @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{right:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
            </div>
            <input
              type="text"
              placeholder="Bottom"
              .value=${(null!==(b=null===(_=e.padding)||void 0===_?void 0:_.bottom)&&void 0!==b?b:"").toString()}
              @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{bottom:""===t.target.value?void 0:parseFloat(t.target.value)})})}
            />
          </div>
        </div>
      </div>
    `}firstUpdated(e){super.firstUpdated(e)}updated(e){super.updated(e)}_renderBorderDesignTab(e){var t,o;return i.qy`
      <div class="settings-section">
        <label>Border Radius (px):</label>
        <input
          type="text"
          .value=${(null!==(o=null===(t=e.border)||void 0===t?void 0:t.radius)&&void 0!==o?o:"").toString()}
          @input=${t=>this._updateModule({border:Object.assign(Object.assign({},e.border),{radius:""===t.target.value?void 0:parseFloat(t.target.value)})})}
        />
      </div>
    `}render(){var e,t;const o=this._ensureLayout(),a=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return i.qy`
      <div class="layout-builder">
        <div class="builder-header">
          <h3>${(0,h.kg)("editor.tabs.layout",a,"Layout Builder")}</h3>
          <button
            class="add-row-btn"
            @click=${e=>{e.stopPropagation(),this._addRow()}}
            title="${(0,h.kg)("editor.layout.add_row_tooltip",a,"Add a new row to your layout")}"
          >
            <ha-icon icon="mdi:plus"></ha-icon>
            ${(0,h.kg)("editor.layout.add_row",a,"Add Row")}
          </button>
        </div>

        <div class="rows-container">
          ${o.rows.map(((e,t)=>{var o,a;return i.qy`
              <div
                class="row-builder"
                draggable="true"
                @dragstart=${e=>this._onDragStart(e,"row",t)}
                @dragend=${this._onDragEnd}
                @dragover=${this._onDragOver}
                @dragenter=${e=>this._onDragEnter(e,"row",t)}
                @dragleave=${this._onDragLeave}
                @drop=${e=>this._onDrop(e,"row",t)}
                class="${"row"===(null===(o=this._dropTarget)||void 0===o?void 0:o.type)&&(null===(a=this._dropTarget)||void 0===a?void 0:a.rowIndex)===t?"drop-target":""}"
              >
                <div class="row-header">
                  <div class="row-title">
                    <div class="row-drag-handle" title="Drag to move row">
                      <ha-icon icon="mdi:drag"></ha-icon>
                    </div>
                    <span>Row ${t+1}</span>
                    <button
                      class="column-layout-btn"
                      @click=${e=>{e.stopPropagation(),this._openColumnLayoutSelector(t)}}
                      @mousedown=${e=>e.stopPropagation()}
                      @dragstart=${e=>e.preventDefault()}
                      title="Change Column Layout"
                    >
                      <span class="layout-icon">${this._getCurrentLayoutDisplay(e)}</span>
                    </button>
                  </div>
                  <div class="row-actions">
                    <button
                      class="row-add-column-btn"
                      @click=${e=>{e.stopPropagation(),this._addColumn(t)}}
                      @mousedown=${e=>e.stopPropagation()}
                      @dragstart=${e=>e.preventDefault()}
                      title="Add Column to Row"
                    >
                      <ha-icon icon="mdi:plus"></ha-icon>
                    </button>
                    <button
                      class="row-duplicate-btn"
                      @click=${e=>{e.stopPropagation(),this._duplicateRow(t)}}
                      @mousedown=${e=>e.stopPropagation()}
                      @dragstart=${e=>e.preventDefault()}
                      title="Duplicate Row"
                    >
                      <ha-icon icon="mdi:content-copy"></ha-icon>
                    </button>
                    <button
                      class="row-settings-btn"
                      @click=${e=>{e.stopPropagation(),this._openRowSettings(t)}}
                      @mousedown=${e=>e.stopPropagation()}
                      @dragstart=${e=>e.preventDefault()}
                      title="Row Settings"
                    >
                      <ha-icon icon="mdi:cog"></ha-icon>
                    </button>
                    <button
                      class="delete-row-btn"
                      @click=${e=>{e.stopPropagation(),this._deleteRow(t)}}
                      @mousedown=${e=>e.stopPropagation()}
                      @dragstart=${e=>e.preventDefault()}
                      title="Delete Row"
                    >
                      <ha-icon icon="mdi:delete"></ha-icon>
                    </button>
                  </div>
                </div>
                <div class="columns-container" data-layout="${e.column_layout||"1-2-1-2"}">
                  ${e.columns&&e.columns.length>0?e.columns.map(((e,o)=>{var a,n,r,s,l,d;return i.qy`
                          <div
                            class="column-builder"
                            draggable="true"
                            @dragstart=${e=>this._onDragStart(e,"column",t,o)}
                            @dragend=${this._onDragEnd}
                            @dragover=${this._onDragOver}
                            @dragenter=${e=>this._onDragEnter(e,"column",t,o)}
                            @dragleave=${this._onDragLeave}
                            @drop=${e=>this._onDrop(e,"column",t,o)}
                            class="${"column"===(null===(a=this._dropTarget)||void 0===a?void 0:a.type)&&(null===(n=this._dropTarget)||void 0===n?void 0:n.rowIndex)===t&&(null===(r=this._dropTarget)||void 0===r?void 0:r.columnIndex)===o?"drop-target":""}"
                          >
                            <div class="column-header">
                              <div class="column-title">
                                <div class="column-drag-handle" title="Drag to move column">
                                  <ha-icon icon="mdi:drag"></ha-icon>
                                </div>
                                <span>Column ${o+1}</span>
                              </div>
                              <div class="column-actions">
                                <button
                                  class="column-add-module-btn"
                                  @click=${e=>{e.stopPropagation(),this._openModuleSelector(t,o)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="Add Module to Column"
                                >
                                  <ha-icon icon="mdi:plus"></ha-icon>
                                </button>
                                <button
                                  class="column-duplicate-btn"
                                  @click=${e=>{e.stopPropagation(),this._duplicateColumn(t,o)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="Duplicate Column"
                                >
                                  <ha-icon icon="mdi:content-copy"></ha-icon>
                                </button>
                                <button
                                  class="column-settings-btn"
                                  @click=${e=>{e.stopPropagation(),this._openColumnSettings(t,o)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="Column Settings"
                                >
                                  <ha-icon icon="mdi:cog"></ha-icon>
                                </button>
                                <button
                                  class="column-delete-btn"
                                  @click=${e=>{e.stopPropagation(),this._deleteColumn(t,o)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="Delete Column"
                                >
                                  <ha-icon icon="mdi:delete"></ha-icon>
                                </button>
                              </div>
                            </div>
                            <div
                              class="modules-container ${"column"===(null===(s=this._dropTarget)||void 0===s?void 0:s.type)&&(null===(l=this._dropTarget)||void 0===l?void 0:l.rowIndex)===t&&(null===(d=this._dropTarget)||void 0===d?void 0:d.columnIndex)===o?"drop-target":""}"
                              @dragover=${this._onDragOver}
                              @dragenter=${e=>this._onDragEnter(e,"column",t,o)}
                              @dragleave=${this._onDragLeave}
                              @drop=${e=>this._onDrop(e,"column",t,o)}
                            >
                              ${e.modules.map(((e,a)=>{var n,r,s,l;return i.qy`
                                  <div
                                    class="module-item"
                                    draggable="true"
                                    @dragstart=${e=>this._onDragStart(e,"module",t,o,a)}
                                    @dragend=${this._onDragEnd}
                                    @dragover=${this._onDragOver}
                                    @dragenter=${e=>this._onDragEnter(e,"module",t,o,a)}
                                    @dragleave=${this._onDragLeave}
                                    @drop=${e=>this._onDrop(e,"module",t,o,a)}
                                    class="${"module"===(null===(n=this._dropTarget)||void 0===n?void 0:n.type)&&(null===(r=this._dropTarget)||void 0===r?void 0:r.rowIndex)===t&&(null===(s=this._dropTarget)||void 0===s?void 0:s.columnIndex)===o&&(null===(l=this._dropTarget)||void 0===l?void 0:l.moduleIndex)===a?"drop-target":""}"
                                  >
                                    <div
                                      class="module-content"
                                      @click=${()=>this._openModuleSettings(t,o,a)}
                                    >
                                      ${this._renderSingleModule(e,t,o,a)}
                                    </div>
                                  </div>
                                `}))}
                              <button
                                class="add-module-btn"
                                @click=${e=>{e.stopPropagation(),this._openModuleSelector(t,o)}}
                              >
                                <ha-icon icon="mdi:plus"></ha-icon>
                                Add Module
                              </button>
                            </div>
                          </div>
                        `})):i.qy`
                        <div class="empty-row-message">
                          <p>This row has no columns.</p>
                          <button
                            class="add-module-btn"
                            @click=${e=>{e.stopPropagation(),this._openModuleSelector(t,0)}}
                            style="margin-top: 8px;"
                          >
                            <ha-icon icon="mdi:plus"></ha-icon>
                            Add Module (will create column automatically)
                          </button>
                        </div>
                      `}
                  <div class="add-column-container">
                    <button
                      class="add-column-btn"
                      @click=${e=>{e.stopPropagation(),this._addColumn(t)}}
                      title="Add Column"
                    >
                      <ha-icon icon="mdi:plus"></ha-icon>
                      Add Column
                    </button>
                  </div>
                </div>
              </div>
            `}))}
        </div>

        ${this._showModuleSelector?this._renderModuleSelector():""}
        ${this._showModuleSettings?this._renderModuleSettings():""}
        ${this._showLayoutChildSettings?this._renderLayoutChildSettings():""}
        ${this._showRowSettings?this._renderRowSettings():""}
        ${this._showColumnSettings?this._renderColumnSettings():""}
        ${this._showColumnLayoutSelector?this._renderColumnLayoutSelector():""}
      </div>
    `}_renderModuleSelector(){const e=(0,c.oD)().getAllModules(),t=this._selectedLayoutModuleIndex>=0,o=e.filter((e=>"layout"===e.metadata.category)),a=e.filter((e=>"layout"!==e.metadata.category));return i.qy`
      <div class="module-selector-popup">
        <div class="popup-overlay" @click=${()=>this._showModuleSelector=!1}></div>
        <div class="selector-content draggable-popup" id="module-selector-popup">
          <div
            class="selector-header"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupDrag(e,t)}}
          >
            <div class="selector-header-top">
              <h3>Add Module</h3>
              <button
                class="close-button"
                title="Close"
                @mousedown=${e=>e.stopPropagation()}
                @click=${()=>this._showModuleSelector=!1}
              >
                ×
              </button>
            </div>
            ${t?i.qy`<p class="selector-subtitle">
                  Adding to layout module (only content modules allowed)
                </p>`:""}
          </div>

          ${!t&&o.length>0?i.qy`
                <div class="module-category">
                  <h4 class="category-title">Layout Containers</h4>
                  <p class="category-description">Create containers to organize your modules</p>
                  <div class="module-types layout-modules">
                    ${o.map((e=>{const t=e.metadata,o="horizontal"===t.type,a="vertical"===t.type;return i.qy`
                        <button
                          class="module-type-btn layout-module ${o?"horizontal-layout":""} ${a?"vertical-layout":""}"
                          @click=${()=>this._addModule(t.type)}
                          title="${t.description}"
                        >
                          <ha-icon icon="${t.icon}"></ha-icon>
                          <div class="module-info">
                            <span class="module-title">${t.title}</span>
                            <span class="module-description">${t.description}</span>
                          </div>
                        </button>
                      `}))}
                  </div>
                </div>
              `:""}
          ${a.length>0?i.qy`
                <div class="module-category">
                  <h4 class="category-title">Content Modules</h4>
                  <p class="category-description">Add content and interactive elements</p>
                  <div class="module-types content-modules">
                    ${a.map((e=>{const t=e.metadata;return i.qy`
                        <button
                          class="module-type-btn content-module"
                          @click=${()=>this._addModule(t.type)}
                          title="${t.description}"
                        >
                          <ha-icon icon="${t.icon}"></ha-icon>
                          <div class="module-info">
                            <span class="module-title">${t.title}</span>
                            <span class="module-description">${t.description}</span>
                          </div>
                        </button>
                      `}))}
                  </div>
                </div>
              `:""}

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}_formatCategoryTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}_isLayoutModule(e){return["horizontal","vertical"].includes(e)}_shouldAutoOpenSettings(e){return!this._isLayoutModule(e)}_getLayoutModuleColor(e){return this._isLayoutModule(e)?"var(--success-color, #4caf50)":"var(--accent-color, var(--orange-color, #ff9800))"}_renderColumnLayoutSelector(){const e=this._ensureLayout().rows[this._selectedRowForLayout],t=e?e.columns.length:1,o=(null==e?void 0:e.column_layout)||"1-col",a=this._migrateLegacyLayoutId(o),n=this._getLayoutsForColumnCount(t);return i.qy`
      <div class="column-layout-selector-popup">
        <div class="popup-overlay" @click=${()=>this._showColumnLayoutSelector=!1}></div>
        <div class="selector-content draggable-popup" id="column-layout-selector-popup">
          <div
            class="selector-header"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>Choose Column Layout</h3>
            <p>
              Select any layout for ${t}
              column${1!==t?"s":""} (Currently: ${t}
              column${1!==t?"s":""})
            </p>
          </div>

          <div class="layout-options">
            ${n.map((e=>i.qy`
                <button
                  class="layout-option-btn ${e.id===o||e.id===a?"current":""}"
                  @click=${()=>this._changeColumnLayout(e.id)}
                  title="${e.name}"
                >
                  <div class="layout-visual">
                    <div class="layout-icon-large">
                      ${l(this._createColumnIconHTML(e.proportions))}
                    </div>
                  </div>
                  <div class="layout-name">${e.name}</div>
                  ${e.id===o||e.id===a?i.qy`<div class="current-badge">Current</div>`:""}
                </button>
              `))}
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}static get styles(){return i.AH`
      :host {
        --accent-color: var(--orange-color, #ff9800);
        --orange-color: #ff9800;
        --secondary-color: var(--orange-color, #ff9800);
      }

      .layout-builder {
        padding: 12px;
        background: var(--card-background-color);
        border-radius: 8px;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .builder-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--divider-color);
        flex-wrap: wrap;
        gap: 8px;
        flex-shrink: 0;
      }

      .builder-header h3 {
        margin: 0;
        flex: 1;
        min-width: 120px;
        font-size: 18px;
      }

      .add-row-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        white-space: nowrap;
        font-weight: 500;
        transition: all 0.2s ease;
        min-height: 40px;
      }

      .add-row-btn:hover {
        background: var(--primary-color-dark, var(--primary-color));
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .row-builder {
        margin-bottom: 16px;
        border: 2px solid var(--primary-color);
        border-radius: 8px;
        background: var(--card-background-color);
        width: 100%;
        box-sizing: border-box;
        position: static;
        transition: all 0.2s ease;
        overflow: visible;
      }

      .row-builder:last-child {
        margin-bottom: 0;
      }

      .row-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 12px;
        background: var(--primary-color);
        color: white;
        font-weight: 500;
        border-bottom: 2px solid var(--primary-color);
        position: static;
        z-index: 2;
        border-radius: 8px 8px 0px 0px;
      }

      .row-title {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .row-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        color: rgba(255, 255, 255, 0.7);
        cursor: grab;
        opacity: 0.8;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 16px;
      }

      .row-drag-handle:hover {
        opacity: 1;
      }

      .row-drag-handle:active {
        cursor: grabbing;
      }

      .column-layout-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 4px;
        padding: 4px 8px;
        cursor: pointer;
        color: white;
        font-size: 14px;
        transition: all 0.2s ease;
        min-width: 32px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .column-layout-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
      }

      .layout-icon {
        font-family: monospace;
        font-weight: bold;
        letter-spacing: 1px;
      }

      .row-actions {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .row-duplicate-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .row-duplicate-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .row-add-column-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .row-add-column-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .row-settings-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: background-color 0.2s ease;
      }

      .row-settings-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .delete-row-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .delete-row-btn:hover {
        background: rgba(255, 100, 100, 0.8);
        color: white;
      }

      .rows-container {
        flex: 1;
        min-height: 0;
        width: 100%;
        box-sizing: border-box;
      }

      .columns-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
        padding: 12px;
        box-sizing: border-box;
        background: var(--card-background-color);
        border-top: 1px solid var(--primary-color);
      }

      /* Editor view: Force single column layout for better usability */
      .columns-container[data-layout='1-col'],
      .columns-container[data-layout='1-2-1-2'],
      .columns-container[data-layout='1-3-2-3'],
      .columns-container[data-layout='2-3-1-3'],
      .columns-container[data-layout='2-5-3-5'],
      .columns-container[data-layout='3-5-2-5'],
      .columns-container[data-layout='1-3-1-3-1-3'],
      .columns-container[data-layout='1-4-1-2-1-4'],
      .columns-container[data-layout='1-5-3-5-1-5'],
      .columns-container[data-layout='1-6-2-3-1-6'],
      .columns-container[data-layout='1-4-1-4-1-4-1-4'],
      .columns-container[data-layout='1-5-1-5-1-5-1-5'],
      .columns-container[data-layout='1-6-1-6-1-6-1-6'],
      .columns-container[data-layout='1-8-1-4-1-4-1-8'],
      .columns-container[data-layout='1-5-1-5-1-5-1-5'],
      .columns-container[data-layout='1-6-1-6-1-3-1-6-1-6'],
      .columns-container[data-layout='1-8-1-4-1-4-1-4-1-8'],
      .columns-container[data-layout='1-6-1-6-1-6-1-6-1-6-1-6'],
      /* Legacy support */
      .columns-container[data-layout='50-50'],
      .columns-container[data-layout='30-70'],
      .columns-container[data-layout='70-30'],
      .columns-container[data-layout='33-33-33'],
      .columns-container[data-layout='25-50-25'],
      .columns-container[data-layout='20-60-20'],
      .columns-container[data-layout='25-25-25-25'] {
        display: flex;
        flex-direction: column;
        gap: 8px;
        border: 1px solid var(--primary-color);
        margin-bottom: 16px;
        border-radius: 0px 0px 8px 8px;
      }

      .column-builder {
        border: 2px solid var(--accent-color, var(--orange-color, #ff9800));
        border-radius: 0px 0px 6px 6px;
        background: var(--card-background-color);
        width: 100%;
        box-sizing: border-box;
        overflow: visible;

        position: static;
      }

      .column-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        font-weight: 500;
        padding: 8px 12px;
        background: var(--accent-color, var(--orange-color, #ff9800));
        color: white;
        border-bottom: 2px solid var(--accent-color, var(--orange-color, #ff9800));
        position: static;
        z-index: 2;
        border-radius: 6px 6px 0px 0px;
      }

      .column-actions {
        display: flex;
        gap: 4px;
        align-items: center;
      }

      .column-add-module-btn,
      .column-duplicate-btn,
      .column-settings-btn,
      .column-delete-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
        padding: 6px 8px;
        border-radius: 4px;
        transition: all 0.2s ease;
        font-size: 12px;
        min-width: 28px;
        min-height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .column-add-module-btn:hover,
      .column-duplicate-btn:hover,
      .column-settings-btn:hover {
        background: rgba(255, 255, 255, 0.25);
        color: white;
        transform: scale(1.05);
      }

      .column-delete-btn:hover:not([disabled]) {
        background: rgba(255, 100, 100, 0.9);
        color: white;
        transform: scale(1.05);
      }

      .column-delete-btn[disabled] {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
      }

      .column-delete-btn[disabled]:hover {
        background: none;
        transform: none;
      }

      .column-actions ha-icon {
        --mdc-icon-size: 16px;
      }

      .column-title {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .column-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 18px;
        height: 18px;
        color: rgba(255, 255, 255, 0.7);
        cursor: grab;
        opacity: 0.8;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 14px;
      }

      .column-drag-handle:hover {
        opacity: 1;
      }

      .column-drag-handle:active {
        cursor: grabbing;
      }

      .modules-container {
        display: flex;
        flex-direction: column;
        gap: 6px;
        width: 100%;
        box-sizing: border-box;
        padding: 12px;
        background: var(--card-background-color);
        border: 1px solid var(--secondary-color, var(--accent-color, #ff9800));
        border-top: none;
        border-radius: 0px 0px 6px 6px;
        margin-top: 0;

        position: static;
        overflow: visible;
      }

      .module-item {
        position: relative;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        margin-bottom: 8px;
        width: 100%;
        min-height: 60px;
        transition: border-color 0.2s ease;
        box-sizing: border-box;
        overflow: visible;
      }

      .module-item:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 12px rgba(var(--rgb-primary-color), 0.2);
        transform: translateY(-1px);
      }

      .module-content {
        padding: 8px;
        cursor: pointer;
        width: 100%;
        box-sizing: border-box;
        overflow: hidden;
        word-wrap: break-word;
        word-break: break-word;
        pointer-events: auto;
        position: relative;
        z-index: 1;

        /* Ensure content doesn't interfere with hover actions positioning */
        contain: layout style;
      }

      /* Simplified Module Styles */
      .simplified-module {
        padding: 12px;
        border-radius: 6px;
        background: var(--card-background-color, #fff);
        border: 1px solid var(--divider-color, #e0e0e0);
        width: 100%;
        box-sizing: border-box;
      }

      .simplified-module-header {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
      }

      .simplified-module-drag-handle {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--secondary-text-color, #757575);
        cursor: grab;
        opacity: 0.6;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 16px;
      }

      .simplified-module:hover .simplified-module-drag-handle {
        opacity: 1;
      }

      .simplified-module-drag-handle:active {
        cursor: grabbing;
      }

      .simplified-module-icon {
        flex-shrink: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--primary-color, #2196f3);
        color: white;
        border-radius: 6px;
        --mdc-icon-size: 20px;
      }

      .simplified-module-content {
        flex: 1;
        min-width: 0;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .simplified-module-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--primary-text-color, #212121);
        line-height: 1.3;
        margin: 0;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      .simplified-module-info {
        font-size: 12px;
        color: var(--secondary-text-color, #757575);
        line-height: 1.2;
        margin: 0;
        opacity: 0.8;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      .simplified-module-actions {
        display: flex;
        gap: 4px;
        align-items: center;
        flex-shrink: 0;
      }

      .simplified-action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 24px;
        height: 24px;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color, #e0e0e0);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        padding: 0;
      }

      .simplified-action-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .simplified-action-btn.edit-btn {
        color: var(--primary-color, #2196f3);
        border-color: var(--primary-color, #2196f3);
      }

      .simplified-action-btn.edit-btn:hover {
        background: var(--primary-color, #2196f3);
        color: white;
      }

      .simplified-action-btn.duplicate-btn {
        color: var(--info-color, #2196f3);
        border-color: var(--info-color, #2196f3);
      }

      .simplified-action-btn.duplicate-btn:hover {
        background: var(--info-color, #2196f3);
        color: white;
      }

      .simplified-action-btn.delete-btn {
        color: var(--error-color, #f44336);
        border-color: var(--error-color, #f44336);
      }

      .simplified-action-btn.delete-btn:hover {
        background: var(--error-color, #f44336);
        color: white;
      }

      .simplified-action-btn ha-icon {
        --mdc-icon-size: 14px;
      }

      /* Disable animations within layout builder modules */
      .module-content * {
        max-width: 100%;
        box-sizing: border-box;
        animation: none !important;
        transition: none !important;
      }

      .module-content *:hover {
        transform: none !important;
        animation: none !important;
        transition: none !important;
      }

      .module-content img {
        max-width: 100%;
        height: auto;
        display: block;
      }

      .add-module-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 10px;
        border: 2px dashed var(--divider-color);
        border-radius: 4px;
        background: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
        box-sizing: border-box;
        font-size: 13px;
        min-height: 36px;
      }

      .add-module-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .add-column-container {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 12px 12px 12px;
        width: 100%;
        box-sizing: border-box;
      }

      .add-column-btn {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 10px 12px;
        border: 2px dashed var(--secondary-text-color);
        border-radius: 6px;
        background: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 13px;
        width: 100%;
        min-height: 40px;
        box-sizing: border-box;
      }

      .add-column-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.05));
      }

      .add-column-btn ha-icon {
        --mdc-icon-size: 20px;
      }

      /* Empty Row Message */
      .empty-row-message {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 32px 16px;
        border: 2px dashed var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        color: var(--secondary-text-color);
        text-align: center;
        min-height: 120px;
      }

      .empty-row-message p {
        margin: 0 0 8px 0;
        font-size: 14px;
        opacity: 0.8;
      }

      /* Module Selector Popup */
      .module-selector-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .popup-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
      }

      .selector-content {
        position: relative;
        background: var(--card-background-color);
        border-radius: 8px;
        /* remove top padding so sticky header touches the top edge */
        padding: 0 24px 24px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-x: hidden; /* prevent bleed */
        overflow-y: auto; /* allow vertical scrolling when content exceeds height */
      }

      .selector-content.draggable-popup {
        position: relative !important; /* avoid transform so fixed menus anchor correctly */
        width: min(700px, 95vw);
        height: min(750px, 90vh);
        transform: none !important;
        top: auto !important;
        left: auto !important;
        margin: 0 auto;
      }

      /* Mobile optimization for selector popup */
      @media (max-width: 768px) {
        .selector-content.draggable-popup {
          width: 95vw;
          height: 90vh;
        }
      }

      .selector-header {
        position: sticky; /* keep header visible while scrolling */
        top: 0;
        z-index: 5;
        background: var(--card-background-color);
        padding: 20px 0 16px; /* top padding moved from container */
        border-bottom: 1px solid var(--divider-color);
        margin-bottom: 16px;
        cursor: move;
        user-select: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      }

      .selector-header-top {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
        white-space: nowrap;
      }

      .selector-header h3 {
        margin: 0; /* align vertically with X */
        flex: 1; /* push the X to the far right */
      }

      .selector-header .close-button {
        margin-left: auto; /* ensure it sits on the same row to the right */
        background: none;
        border: none;
        font-size: 24px;
        line-height: 1;
        cursor: pointer;
        color: var(--secondary-text-color);
      }

      .selector-header .close-button:hover {
        color: var(--primary-color);
      }

      .module-stats {
        font-size: 12px;
        color: var(--secondary-text-color);
      }

      .module-category {
        margin-bottom: 20px;
      }

      .category-title {
        font-size: 14px;
        font-weight: 600;
        margin: 0 0 8px 0;
        color: var(--primary-text-color);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .module-types {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .module-type-btn {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: left;
        width: 100%;
        min-height: 60px;
      }

      .module-type-btn:hover {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      /* Ensure text elements are white on hover */
      .module-type-btn:hover .module-title,
      .module-type-btn:hover .module-description {
        color: white !important;
      }

      .module-type-btn ha-icon {
        font-size: 32px;
        flex-shrink: 0;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--primary-color);
        color: white;
        border-radius: 8px;
      }

      .module-type-btn:hover ha-icon {
        background: white;
        color: var(--primary-color);
      }

      .module-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 0;
        flex: 1;
      }

      .module-title {
        font-weight: 500;
        font-size: 16px;
        color: var(--primary-text-color);
      }

      .module-description {
        font-size: 14px;
        color: var(--secondary-text-color);
        line-height: 1.3;
      }

      .module-author,
      .module-version {
        display: none; /* Hide for cleaner look */
      }

      /* Module Category Styles */
      .module-category {
        margin-bottom: 24px;
      }

      .category-title {
        font-size: 16px;
        font-weight: 600;
        margin: 0 0 8px 0;
        color: var(--primary-text-color);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .category-description {
        font-size: 14px;
        color: var(--secondary-text-color);
        margin: 0 0 16px 0;
        line-height: 1.4;
      }

      /* Layout Module Specific Styles */
      .layout-modules .module-type-btn.layout-module {
        position: relative;
        border: 2px solid var(--success-color, #4caf50);
        background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.1));
      }

      .layout-modules .module-type-btn.horizontal-layout {
        border-color: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout {
        border-color: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.layout-module:hover {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      .layout-modules .module-type-btn.horizontal-layout:hover {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      .layout-modules .module-type-btn.vertical-layout:hover {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      /* Ensure layout module text is white on hover */
      .layout-modules .module-type-btn.layout-module:hover .module-title,
      .layout-modules .module-type-btn.layout-module:hover .module-description,
      .layout-modules .module-type-btn.horizontal-layout:hover .module-title,
      .layout-modules .module-type-btn.horizontal-layout:hover .module-description,
      .layout-modules .module-type-btn.vertical-layout:hover .module-title,
      .layout-modules .module-type-btn.vertical-layout:hover .module-description {
        color: white !important;
      }

      .layout-modules .module-type-btn.layout-module ha-icon {
        background: var(--success-color, #4caf50);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.2);
      }

      .layout-modules .module-type-btn.horizontal-layout ha-icon {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout ha-icon {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.layout-module:hover ha-icon {
        background: white;
        color: var(--success-color, #4caf50);
        border-color: rgba(0, 0, 0, 0.1);
      }

      .layout-modules .module-type-btn.horizontal-layout:hover ha-icon {
        color: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout:hover ha-icon {
        color: var(--success-color, #4caf50);
      }

      .layout-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        background: var(--success-color, #4caf50);
        color: white;
        font-size: 9px;
        font-weight: 600;
        padding: 2px 6px;
        border-radius: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.9;
      }

      .layout-modules .module-type-btn.horizontal-layout .layout-badge {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout .layout-badge {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.layout-module:hover .layout-badge {
        background: rgba(255, 255, 255, 0.2);
        opacity: 1;
      }

      /* Content Module Styles */
      .content-modules .module-type-btn.content-module {
        border: 1px solid var(--divider-color);
      }

      .content-modules .module-type-btn.content-module:hover {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      /* Ensure content module text is white on hover */
      .content-modules .module-type-btn.content-module:hover .module-title,
      .content-modules .module-type-btn.content-module:hover .module-description {
        color: white !important;
      }

      /* Column Layout Selector Popup */
      .column-layout-selector-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1001;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layout-options {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        margin-top: 16px;
      }

      .layout-option-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 16px 12px;
        border: 2px solid var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
        min-height: 80px;
        gap: 8px;
      }

      .layout-option-btn:hover {
        border-color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.1));
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .layout-option-btn.current {
        border-color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.1));
        position: relative;
      }

      .layout-option-btn.current .layout-icon-large {
        color: var(--primary-color);
      }

      .current-badge {
        position: absolute;
        top: 4px;
        right: 4px;
        background: var(--primary-color);
        color: white;
        font-size: 8px;
        font-weight: 600;
        padding: 2px 6px;
        border-radius: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .layout-visual {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 32px;
      }

      .layout-icon-large {
        font-family: monospace;
        font-weight: bold;
        font-size: 20px;
        letter-spacing: 2px;
        color: var(--primary-color);
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layout-name {
        font-size: 12px;
        font-weight: 500;
        color: var(--primary-text-color);
        line-height: 1.2;
      }

      .module-placeholder {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 16px;
        border: 1px dashed var(--divider-color);
        border-radius: 4px;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      .error-message {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px;
        background: var(--error-color);
        color: white;
        border-radius: 4px;
        font-size: 14px;
      }

      /* General Settings Popup Styles */
      .settings-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1002;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 20px;
        overflow-y: hidden; /* scrolling handled inside content to support sticky header */
        overflow-x: visible;
      }

      .settings-tabs {
        display: flex;
        border-bottom: 1px solid var(--divider-color);
      }

      .settings-tab {
        flex: 1;
        padding: 12px 16px;
        background: none;
        border: none;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 14px;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
      }

      .settings-tab:hover {
        color: var(--primary-color);
      }

      .settings-tab.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

      .settings-tab-content {
        padding: 24px;
        flex: 1 1 auto;
        min-height: 0; /* allow parent to control height */
        overflow-y: auto;
      }

      /* Module Settings Popup */
      .module-settings-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1001;
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 20px;
        overflow-y: hidden; /* scrolling handled inside popup-content for sticky header */
        overflow-x: visible;
      }

      .popup-content {
        position: relative;
        background: var(--card-background-color);
        border-radius: 8px;
        width: 720px;
        min-height: 480px;
        max-width: 98vw;
        max-height: 98vh;
        overflow-y: auto; /* internal scroll container for sticky header */
        overflow-x: hidden;
        display: flex;
        flex-direction: column;
      }

      /* Dropdown positioning fixes for popup context -
         ensure menus anchor to fields inside transformed draggable popups */
      .popup-content ha-select,
      .selector-content ha-select {
        position: relative !important;
        overflow: visible !important;
        z-index: 9999 !important;
      }

      .popup-content ha-select .mdc-select__menu,
      .popup-content ha-select mwc-menu,
      .popup-content ha-select .mdc-menu,
      .popup-content ha-select ha-menu,
      .selector-content ha-select .mdc-select__menu,
      .selector-content ha-select mwc-menu,
      .selector-content ha-select .mdc-menu,
      .selector-content ha-select ha-menu {
        /* Let HA position menus; we only ensure visibility */
        z-index: 10001 !important;
        max-height: 300px !important;
        overflow-y: auto !important;
        max-width: min(360px, 95vw) !important;
      }

      /* Allow dropdown overflow; keep inner content scrollable */
      .popup-content {
        /* Allow dropdowns to overflow the scrolling container */
        overflow: visible !important;
      }

      .popup-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 24px;
        border-bottom: 1px solid var(--divider-color);
        position: sticky; /* keep header visible while scrolling */
        top: 0;
        z-index: 5; /* above tab content */
        background: var(--card-background-color);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      }

      .close-button {
        background: none;
        border: none;
        font-size: 32px;
        cursor: pointer;
        color: var(--secondary-text-color);
        padding: 0;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }

      .close-button:hover {
        color: var(--primary-color);
      }

      .action-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .action-button ha-icon {
        --mdc-icon-size: 20px;
      }

      .duplicate-button {
        color: var(--primary-color);
      }

      .duplicate-button:hover {
        background: var(--primary-color);
        color: white;
      }

      .delete-button {
        color: var(--error-color);
      }

      .delete-button:hover {
        background: var(--error-color);
        color: white;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Drag and Resize Functionality */
      .draggable-popup {
        position: absolute;
        /* Avoid transforms so fixed-position menus anchor to viewport correctly */
        transform: none !important;
        max-width: none;
        max-height: none;
        width: min(700px, 95vw);
        height: min(750px, 90vh);
        /* Center the popup initially */
        /* Use margins for centering instead of transforms to not create a containing block */
        top: 50%;
        left: 50%;
        margin-left: -350px; /* half of width when 700px; will be clamped by max-width */
        margin-top: -375px; /* half of height when 750px; responsive will adjust */
        /* Reset translate centering */
        /* transform already set to none above */
        z-index: 1000;
      }

      /* During drag/resize, remove centering transform and use absolute positioning */
      .draggable-popup.popup-dragging,
      .draggable-popup.popup-resizing {
        position: absolute;
        transform: none;
        /* left and top will be set by JavaScript during drag */
      }

      /* Mobile optimization for module popups */
      @media (max-width: 768px) {
        .draggable-popup {
          width: 95vw;
          height: 90vh;
          /* Keep centered without transforms using viewport-based negative margins */
          top: 50%;
          left: 50%;
          margin-left: calc(-47.5vw);
          margin-top: calc(-45vh);
        }
        /* Remove move affordance on mobile */
        .popup-header {
          cursor: default;
        }
        /* Hide resize handle on mobile */
        .draggable-popup .resize-handle {
          display: none;
        }
      }

      .popup-header {
        cursor: move;
        user-select: none;
      }

      .resize-handle {
        position: absolute;
        bottom: 0px;
        right: 0px;
        width: 20px;
        height: 20px;
        cursor: se-resize;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--secondary-text-color);
        background: var(--card-background-color);
        border-radius: 8px 0 8px 0;
        transition: all 0.2s ease;
        z-index: 20; /* ensure it stays above content */
      }

      /* Keep sticky behavior even during drag/resize */
      .draggable-popup .resize-handle {
        transform: none !important;
      }

      .resize-handle:hover {
        color: var(--primary-color);
        background: var(--divider-color);
      }

      .resize-handle ha-icon {
        --mdc-icon-size: 16px;
      }

      .popup-dragging {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
        z-index: 1010 !important;
      }

      .popup-resizing {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
        transition: none !important;
      }

      .popup-resizing * {
        transition: none !important;
      }

      /* Override any conflicting styles for resizable elements */
      .draggable-popup.popup-resizing {
        max-width: none !important;
        max-height: none !important;
        width: auto !important;
        height: auto !important;
      }

      .popup-dragging .popup-header,
      .popup-resizing .popup-header {
        cursor: move;
      }

      .popup-dragging .resize-handle,
      .popup-resizing .resize-handle {
        pointer-events: none;
      }

      /* Module Preview */
      .module-preview {
        margin: 16px 24px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        overflow: visible; /* allow inner preview content to fully render */
      }

      .preview-header {
        padding: 12px 16px;
        background: var(--secondary-background-color);
        font-weight: 500;
        font-size: 14px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
      }

      .preview-caret {
        --mdc-icon-size: 20px;
        color: var(--secondary-text-color);
      }

      .preview-content {
        padding: 16px;
        min-height: 60px;
        display: block;
      }

      /* Module Tabs */
      .module-tabs {
        display: flex;
        border-bottom: 1px solid var(--divider-color);
      }

      .module-tab {
        flex: 1;
        padding: 12px 16px;
        background: none;
        border: none;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 14px;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
      }

      .module-tab:hover {
        color: var(--primary-color);
      }

      .module-tab.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

      .module-tab-content {
        padding: 24px;
        flex: 1;
        overflow-y: auto; /* body scrolls */
        overflow-x: visible; /* allow dropdown menus to render outside content column */
        width: 100%;
        box-sizing: border-box;
        min-height: 0; /* Allow flex child to shrink below content size */
      }

      /* Design Subtabs */
      .design-subtabs {
        display: flex;
        margin-bottom: 16px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        overflow: hidden;
      }

      .design-subtab {
        flex: 1;
        padding: 8px 12px;
        background: var(--secondary-background-color);
        border: none;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 12px;
        transition: all 0.2s ease;
      }

      .design-subtab:hover {
        color: var(--primary-color);
      }

      .design-subtab.active {
        background: var(--primary-color);
        color: white;
      }

      /* Settings Sections */
      .settings-section {
        margin-bottom: 20px;
        width: 100%;
        box-sizing: border-box;
      }

      .settings-section label {
        display: block;
        font-weight: 500;
        margin-bottom: 8px;
        font-size: 14px;
        color: var(--primary-text-color);
        width: 100%;
        box-sizing: border-box;
      }

      /* Color Section Styling */
      .color-section {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .color-picker-wrapper {
        display: flex;
        align-items: center;
      }

      .color-picker-wrapper ultra-color-picker {
        width: 100%;
        max-width: 300px;
      }

      /* Font Dropdown Styling */
      .font-dropdown {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        font-family: inherit;
      }

      .font-dropdown:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .font-dropdown optgroup {
        font-weight: 600;
        color: var(--secondary-text-color);
        background: var(--card-background-color);
        padding: 4px 0;
      }

      .font-dropdown option {
        padding: 4px 8px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
      }

      /* Font Size Input Styling */
      .font-size-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
      }

      .font-size-input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      /* Enhanced Alignment Buttons */
      .alignment-buttons {
        display: flex;
        gap: 6px;
        margin-top: 4px;
      }

      .alignment-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        padding: 0;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .alignment-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .alignment-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .alignment-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .settings-section input,
      .settings-section select,
      .settings-section textarea {
        width: 100%;
        max-width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        box-sizing: border-box;
      }

      .settings-section textarea {
        min-height: 60px;
        resize: vertical;
      }

      /* Ensure form elements fit properly */
      .settings-section ha-form {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }

      /* Ensure color pickers fit properly */
      .settings-section ultra-color-picker {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }

      /* Consistent styling for all module settings */
      .module-tab-content .settings-section,
      .settings-tab-content .settings-section {
        border-radius: 8px;
        padding: 16px;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        margin-bottom: 16px;
      }

      .module-tab-content .settings-section:last-child,
      .settings-tab-content .settings-section:last-child {
        margin-bottom: 0;
      }

      /* Enhanced input field styling for consistency */
      .module-tab-content input[type='number'],
      .module-tab-content input[type='text'],
      .module-tab-content input[type='color'],
      .module-tab-content select,
      .module-tab-content textarea,
      .settings-tab-content input[type='number'],
      .settings-tab-content input[type='text'],
      .settings-tab-content input[type='color'],
      .settings-tab-content select,
      .settings-tab-content textarea {
        width: 100%;
        max-width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        font-family: inherit;
        box-sizing: border-box;
        transition: border-color 0.2s ease;
      }

      .module-tab-content input:focus,
      .module-tab-content select:focus,
      .module-tab-content textarea:focus,
      .settings-tab-content input:focus,
      .settings-tab-content select:focus,
      .settings-tab-content textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      /* Range sliders consistent styling */
      .module-tab-content input[type='range'],
      .settings-tab-content input[type='range'] {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: var(--divider-color);
        outline: none;
        -webkit-appearance: none;
      }

      .module-tab-content input[type='range']::-webkit-slider-thumb,
      .settings-tab-content input[type='range']::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--primary-color);
        cursor: pointer;
      }

      /* Checkbox and radio button styling */
      .module-tab-content input[type='checkbox'],
      .module-tab-content input[type='radio'],
      .settings-tab-content input[type='checkbox'],
      .settings-tab-content input[type='radio'] {
        width: auto;
        margin-right: 8px;
        accent-color: var(--primary-color);
      }

      /* Label styling for form elements */
      .module-tab-content label,
      .settings-tab-content label {
        display: block;
        font-weight: 500;
        margin-bottom: 8px;
        font-size: 14px;
        color: var(--primary-text-color);
        line-height: 1.4;
      }

      /* Field groups */
      .module-tab-content .field-group,
      .settings-tab-content .field-group {
        gap: 12px;
        align-items: flex-end;
      }

      .module-tab-content .field-group > div,
      .settings-tab-content .field-group > div {
        flex: 1;
      }

      /* Button Groups */
      .alignment-buttons,
      .format-buttons {
        display: flex;
        gap: 4px;
      }

      .alignment-btn,
      .format-btn {
        padding: 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .alignment-btn:hover,
      .format-btn:hover {
        border-color: var(--primary-color);
      }

      .alignment-btn.active,
      .format-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      /* Value Position Buttons for Bar Module */
      .value-position-buttons {
        display: flex;
        gap: 8px;
      }

      .position-btn {
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        font-size: 12px;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .position-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .position-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      /* Spacing Grid */
      .spacing-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
      }

      .spacing-section h4 {
        margin: 0 0 12px 0;
        font-size: 14px;
        font-weight: 500;
      }

      .spacing-cross {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
        align-items: center;
        max-width: 120px;
        margin: 0 auto;
      }

      .spacing-row {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 8px;
        align-items: center;
      }

      .spacing-center {
        width: 32px;
        height: 32px;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        font-weight: bold;
        font-size: 12px;
      }

      .spacing-cross input {
        width: 60px;
        text-align: center;
        padding: 4px 8px;
        font-size: 12px;
      }

      /* Module Rendering */
      .text-module {
        word-wrap: break-word;
      }

      .separator-module {
        width: 100%;
      }

      .image-module {
        text-align: center;
      }

      .image-placeholder {
        padding: 20px;
        border: 2px dashed var(--divider-color);
        border-radius: 4px;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      .module-placeholder {
        padding: 20px;
        text-align: center;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      /* Logic Tab Styles */
      .logic-tab-content {
        display: flex;
        flex-direction: column;
        gap: 24px;
        padding: 16px;
      }

      .logic-section {
        background: var(--card-background-color);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid var(--divider-color);
      }

      .section-header h3 {
        margin: 0 0 16px 0;
        color: var(--primary-text-color);
        font-size: 18px;
        font-weight: 600;
      }

      .display-mode-dropdown {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        min-height: 48px;
      }

      /* Conditions Section */
      .conditions-section {
        background: var(--card-background-color);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid var(--divider-color);
      }

      .conditions-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .conditions-header h4 {
        margin: 0;
        color: var(--primary-text-color);
        font-size: 16px;
        font-weight: 600;
      }

      .add-condition-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .add-condition-btn:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .add-condition-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .conditions-list {
        display: flex;
        flex-direction: column;
        gap: 14px; /* slightly larger separation between condition cards */
      }

      .no-conditions {
        text-align: center;
        padding: 32px;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      /* Individual Condition Item */
      .condition-item {
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        padding: 0;
        transition: all 0.2s ease;
      }

      .condition-item.disabled {
        opacity: 0.6;
      }

      .condition-item:hover {
        border-color: var(--primary-color);
      }

      .condition-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        background: var(--card-background-color);
        border-radius: 8px 8px 0 0;
        border-bottom: 1px solid var(--divider-color);
      }

      .condition-header-left {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .condition-toggle {
        background: none;
        border: none;
        color: var(--primary-text-color);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: background 0.2s ease;
      }

      .condition-toggle:hover {
        background: var(--secondary-background-color);
      }

      .condition-toggle ha-icon {
        --mdc-icon-size: 18px;
        transition: transform 0.2s ease;
      }

      .condition-toggle.expanded ha-icon {
        transform: rotate(0deg);
      }

      .condition-label {
        font-weight: 500;
        color: var(--primary-text-color);
        font-size: 14px;
      }

      .condition-actions {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .condition-action-btn {
        background: none;
        border: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        padding: 6px;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .condition-action-btn:hover {
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
      }

      .condition-action-btn.delete:hover {
        background: var(--error-color);
        color: white;
      }

      .condition-action-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .condition-drag-handle {
        background: none;
        border: none;
        color: var(--secondary-text-color);
        cursor: grab;
        padding: 6px;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .condition-drag-handle:hover {
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
      }

      .condition-drag-handle:active {
        cursor: grabbing;
      }

      /* Condition Content */
      .condition-content {
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .condition-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-bottom: 8px; /* add breathing room between stacked fields */
      }

      .condition-field label {
        font-weight: 500;
        color: var(--primary-text-color);
        font-size: 14px;
        display: block;
        margin: 0 0 8px 0;
        text-transform: capitalize;
      }

      .condition-field select,
      .condition-field input,
      .condition-field textarea {
        padding: 10px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        transition: border-color 0.2s ease;
      }

      .condition-field select:focus,
      .condition-field input:focus,
      .condition-field textarea:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .condition-enable-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: normal !important;
        cursor: pointer;
      }

      /* Condition Type Specific Styles */
      .entity-condition-fields,
      .time-condition-fields,
      .custom-field-condition,
      .template-condition {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .time-inputs {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .condition-info {
        margin: 0;
        padding: 8px 12px;
        background: var(--info-color, #2196f3);
        color: white;
        border-radius: 6px;
        font-size: 12px;
        text-align: center;
      }

      .template-help {
        font-size: 12px;
        color: var(--secondary-text-color);
        font-style: italic;
        margin-top: 4px;
      }

      /* Template Section */
      .template-section {
        background: var(--card-background-color);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid var(--divider-color);
      }

      .template-header {
        margin-bottom: 16px;
      }

      .template-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        color: var(--primary-text-color);
        cursor: pointer;
      }

      .template-content {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .template-editor {
        min-height: 120px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
        line-height: 1.4;
        resize: vertical;
      }

      @media (max-width: 768px) {
        .columns-container {
          flex-direction: column;
        }

        .column-builder {
          border-right: none;
          border-bottom: 1px solid var(--divider-color);
        }

        .column-builder:last-child {
          border-bottom: none;
        }

        /* Single column module grid on mobile */
        .module-types {
          grid-template-columns: 1fr;
        }

        /* Hide green layout badge on mobile to avoid conflict with title */
        .layout-badge {
          display: none !important;
        }

        .spacing-grid {
          grid-template-columns: 1fr;
        }

        .time-inputs {
          grid-template-columns: 1fr;
        }
      }

      /* Logic Module Dimming */
      .module-with-logic {
        position: relative;
      }

      .module-with-logic.logic-hidden {
        opacity: 0.4;
        filter: grayscale(50%);
      }

      .logic-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 12px;
        font-weight: 500;
        border-radius: 4px;
        pointer-events: none;
        z-index: 10;
      }

      .logic-overlay ha-icon {
        --mdc-icon-size: 20px;
        margin-bottom: 4px;
      }

      .logic-overlay span {
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      }

      /* Toggle Switch Styles */
      .switch-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 8px;
      }

      .switch-label {
        font-weight: 600;
        color: var(--primary-text-color);
        font-size: 16px;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--switch-unchecked-color, #ccc);
        transition: 0.3s;
        border-radius: 24px;
      }

      .slider:before {
        position: absolute;
        content: '';
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.3s;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      input:checked + .slider {
        background-color: var(--primary-color);
      }

      input:focus + .slider {
        box-shadow: 0 0 1px var(--primary-color);
      }

      input:checked + .slider:before {
        transform: translateX(26px);
      }

      .slider.round {
        border-radius: 24px;
      }

      .slider.round:before {
        border-radius: 50%;
      }

      /* Disabled state for conditions */
      .disabled-note {
        font-size: 12px;
        color: var(--warning-color, #ff9800);
        font-style: italic;
        font-weight: normal;
      }

      .template-description {
        font-size: 14px;
        color: var(--secondary-text-color);
        line-height: 1.4;
        margin: 4px 0 12px 0;
      }

      /* Animation keyframes and classes for preview windows */
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes vibrate {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-2px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(2px);
        }
      }

      @keyframes rotate-left {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(-360deg);
        }
      }

      @keyframes rotate-right {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes hover {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes fade {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      @keyframes scale {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }

      @keyframes tada {
        0% {
          transform: scale(1);
        }
        10%,
        20% {
          transform: scale(0.9) rotate(-3deg);
        }
        30%,
        50%,
        70%,
        90% {
          transform: scale(1.1) rotate(3deg);
        }
        40%,
        60%,
        80% {
          transform: scale(1.1) rotate(-3deg);
        }
        100% {
          transform: scale(1) rotate(0);
        }
      }

      .animation-pulse {
        animation-name: pulse;
        animation-iteration-count: infinite;
      }

      .animation-vibrate {
        animation-name: vibrate;
        animation-iteration-count: infinite;
      }

      .animation-rotate-left {
        animation-name: rotate-left;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
      }

      .animation-rotate-right {
        animation-name: rotate-right;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
      }

      .animation-hover {
        animation-name: hover;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
      }

      .animation-fade {
        animation-name: fade;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
      }

      .animation-scale {
        animation-name: scale;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
      }

      .animation-bounce {
        animation-name: bounce;
        animation-iteration-count: infinite;
      }

      .animation-shake {
        animation-name: shake;
        animation-timing-function: cubic-bezier(0.36, 0.07, 0.19, 0.97);
        animation-iteration-count: infinite;
      }

      .animation-tada {
        animation-name: tada;
        animation-iteration-count: infinite;
      }

      /* Row and Column Preview Styles */
      .row-preview-content {
        display: flex;
        padding: 16px;
        border-radius: 8px;
        border: 1px solid var(--divider-color);
        min-height: 60px;
        align-items: center;
        justify-content: space-around;
      }

      .column-preview {
        flex: 1;
        padding: 12px;
        margin: 0 4px;
        background: var(--accent-color);
        color: white;
        border-radius: 4px;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
      }

      .column-preview-content {
        padding: 16px;
        border-radius: 8px;
        border: 1px solid var(--divider-color);
        text-align: center;
        background: var(--secondary-background-color);
        min-height: 60px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .column-preview-content p {
        margin: 0 0 8px 0;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      .module-count {
        font-size: 12px;
        color: var(--secondary-text-color);
      }

      /* Drag and Drop Styles */
      .row-builder[draggable='true'],
      .column-builder[draggable='true'],
      .module-item[draggable='true'] {
        cursor: grab;
      }

      .row-builder[draggable='true']:hover,
      .column-builder[draggable='true']:hover,
      .module-item[draggable='true']:hover {
        cursor: grab;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .row-builder[draggable='true']:active,
      .column-builder[draggable='true']:active,
      .module-item[draggable='true']:active {
        cursor: grabbing;
        transform: scale(0.98);
      }

      /* Invalid drop target indication */
      :host([dragging-column]) .module-item,
      :host([dragging-row]) .module-item,
      :host([dragging-row]) .column-builder {
        cursor: not-allowed !important;
        opacity: 0.5;
        pointer-events: auto;
      }

      .drop-target {
        box-shadow: 0 0 20px rgba(var(--rgb-primary-color), 0.6) !important;
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        transform: scale(1.02) !important;
        transition: all 0.2s ease !important;
      }

      .drop-target.row-builder {
        border-color: var(--primary-color) !important;
        border-width: 3px !important;
        border-style: dashed !important;
      }

      .drop-target.column-builder {
        border-color: var(--primary-color) !important;
        border-width: 3px !important;
        border-style: dashed !important;
      }

      .drop-target.module-item {
        border-color: var(--primary-color) !important;
        border-width: 2px !important;
        border-style: dashed !important;
      }

      /* Drag handle indicators (disabled) */
      /* We now render explicit drag handles inside headers. The legacy
         pseudo-element indicators caused duplicate icons on mobile. */
      .row-header::before,
      .column-header::before,
      .module-content::before {
        content: none !important; /* hide legacy indicators */
      }

      /* Module item hover effect - consolidated with action display */
      .module-item:hover {
        border-color: var(--primary-color) !important;
      }

      .row-header {
        position: relative;
      }

      .column-header {
        position: relative;
      }

      .module-content {
        position: relative;
      }

      /* Visual feedback during drag */
      .row-builder[draggable='true'][style*='opacity: 0.5'] {
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        border: 2px dashed var(--primary-color) !important;
      }

      .column-builder[draggable='true'][style*='opacity: 0.5'] {
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        border: 2px dashed var(--primary-color) !important;
      }

      .module-item[draggable='true'][style*='opacity: 0.5'] {
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        border: 2px dashed var(--primary-color) !important;
      }

      /* Enhanced modules container styling */
      .modules-container {
        min-height: 80px;
        position: relative;
        transition: all 0.2s ease;
      }

      /* Module Name Field Styling */
      .module-name-input {
        width: 100%;
        max-width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        font-family: inherit;
        box-sizing: border-box;
      }

      .module-name-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .field-help {
        font-size: 12px;
        color: var(--secondary-text-color);
        line-height: 1.4;
        margin-top: 4px;
        font-style: italic;
      }

      /* Note: Image module still shows "Image Name" field from the registry.
         This will need to be addressed in the image module itself to remove
         the duplicate field since we now have universal "Module Name" above. */

      .modules-container:empty {
        border: 2px dashed var(--divider-color);
        background: var(--secondary-background-color);
      }

      .modules-container:empty::before {
        content: 'Drop modules here or click Add Module';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--secondary-text-color);
        font-style: italic;
        font-size: 13px;
        pointer-events: none;
        text-align: center;
      }

      .modules-container::after {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border: 2px dashed transparent;
        border-radius: 6px;
        pointer-events: none;
        transition: all 0.2s ease;
        z-index: 1;
      }

      .column-builder.drop-target .modules-container::after {
        border-color: var(--primary-color);
        background: rgba(var(--rgb-primary-color), 0.1);
      }

      /* Layout Module Styles - Column-like appearance */
      .layout-module-container {
        border: 2px solid var(--success-color, #4caf50);
        border-radius: 6px;
        background: var(--card-background-color);
        width: 100%;
        box-sizing: border-box;
        overflow: visible;
        margin-bottom: 8px;
      }

      .layout-module-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        font-weight: 500;
        padding: 8px 12px;
        background: var(--success-color, #4caf50);
        color: white;
        border-bottom: 2px solid var(--success-color, #4caf50);
        border-radius: 0px;
      }

      .layout-module-title {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .layout-module-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 18px;
        height: 18px;
        color: rgba(255, 255, 255, 0.7);
        cursor: grab;
        opacity: 0.8;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 14px;
      }

      .layout-module-drag-handle:hover {
        opacity: 1;
      }

      .layout-module-drag-handle:active {
        cursor: grabbing;
      }

      .layout-module-actions {
        display: flex;
        gap: 4px;
        align-items: center;
      }

      .layout-module-add-btn,
      .layout-module-settings-btn,
      .layout-module-duplicate-btn,
      .layout-module-delete-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
        --mdc-icon-size: 16px;
      }

      .layout-module-add-btn:hover,
      .layout-module-settings-btn:hover,
      .layout-module-duplicate-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .layout-module-delete-btn:hover {
        background: rgba(255, 100, 100, 0.8);
        color: white;
      }

      .layout-modules-container {
        background: var(--card-background-color);
        border: 2px dashed var(--divider-color);
        border-radius: 4px;
        margin: 8px;
        transition: all 0.2s ease;
        position: relative;
      }

      .layout-modules-container:hover {
        border-color: var(--success-color, #4caf50);
        background: rgba(76, 175, 80, 0.05);
      }

      .layout-modules-container.layout-drop-target {
        border-color: var(--primary-color) !important;
        border-width: 3px !important;
        border-style: dashed !important;
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        box-shadow: 0 0 20px rgba(var(--rgb-primary-color), 0.3) !important;
      }

      .layout-module-empty {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 8px;
        color: var(--secondary-text-color);
        font-style: italic;
        text-align: center;
        padding: 24px;
        width: 100%;
        cursor: pointer;
        user-select: none;
        transition:
          color 0.2s ease,
          opacity 0.2s ease;
      }

      .layout-module-empty ha-icon {
        --mdc-icon-size: 32px;
        opacity: 0.7;
      }

      .layout-module-empty:hover ha-icon {
        opacity: 1;
      }

      .layout-child-module-wrapper {
        width: 100%;
        box-sizing: border-box;
        cursor: grab;
      }

      .layout-child-module-wrapper:active {
        cursor: grabbing;
      }

      /* Simplified layout child module styling */
      .layout-child-simplified-module {
        width: 100%;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        transition: all 0.2s ease;
        cursor: pointer;
        box-sizing: border-box;
        margin-bottom: 8px;
      }

      .layout-child-simplified-module:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .layout-child-simplified-module:hover .layout-child-content {
        color: var(--primary-text-color);
      }

      .layout-child-simplified-module:active {
        cursor: grabbing;
        transform: scale(0.98);
      }

      .layout-child-module-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        min-height: 40px;
        box-sizing: border-box;
      }

      .layout-child-icon {
        --mdc-icon-size: 20px;
        color: var(--primary-color);
        flex-shrink: 0;
      }

      .layout-child-content {
        flex: 1;
        min-width: 0;
      }

      .layout-child-title {
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
        margin-bottom: 2px;
      }

      .layout-child-info {
        font-size: 12px;
        color: var(--secondary-text-color);
        line-height: 1.3;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .layout-child-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        color: var(--secondary-text-color);
        cursor: grab;
        opacity: 0.6;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 14px;
      }

      .layout-child-drag-handle:hover {
        opacity: 1;
        color: var(--primary-color);
      }

      .layout-child-drag-handle:active {
        cursor: grabbing;
      }

      .layout-child-actions {
        display: flex;
        gap: 4px;
        align-items: center;
      }

      .layout-child-action-btn {
        background: none;
        border: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
        --mdc-icon-size: 14px;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layout-child-action-btn.edit-btn:hover {
        background: var(--primary-color);
        color: white;
      }

      .layout-child-action-btn.delete-btn:hover {
        background: var(--error-color);
        color: white;
      }

      /* Drag handle for touch devices */
      @media (hover: none) {
        /* On touch devices, show action buttons on tap/focus */
        .module-item:active .module-hover-overlay,
        .module-item:focus-within .module-hover-overlay {
          opacity: 1;
          visibility: visible;
        }

        .module-action-btn {
          width: 36px;
          height: 36px;
        }

        .module-action-btn ha-icon {
          --mdc-icon-size: 20px;
        }
      }
    `}};b([(0,a.MZ)({attribute:!1})],x.prototype,"hass",void 0),b([(0,a.MZ)({attribute:!1})],x.prototype,"config",void 0),b([(0,a.wk)()],x.prototype,"_showModuleSelector",void 0),b([(0,a.wk)()],x.prototype,"_selectedRowIndex",void 0),b([(0,a.wk)()],x.prototype,"_selectedColumnIndex",void 0),b([(0,a.wk)()],x.prototype,"_showModuleSettings",void 0),b([(0,a.wk)()],x.prototype,"_selectedModule",void 0),b([(0,a.wk)()],x.prototype,"_activeModuleTab",void 0),b([(0,a.wk)()],x.prototype,"_activeDesignSubtab",void 0),b([(0,a.wk)()],x.prototype,"_showRowSettings",void 0),b([(0,a.wk)()],x.prototype,"_selectedRowForSettings",void 0),b([(0,a.wk)()],x.prototype,"_activeRowTab",void 0),b([(0,a.wk)()],x.prototype,"_showColumnSettings",void 0),b([(0,a.wk)()],x.prototype,"_selectedColumnForSettings",void 0),b([(0,a.wk)()],x.prototype,"_activeColumnTab",void 0),b([(0,a.wk)()],x.prototype,"_showColumnLayoutSelector",void 0),b([(0,a.wk)()],x.prototype,"_selectedRowForLayout",void 0),b([(0,a.wk)()],x.prototype,"_isPreviewCollapsed",void 0),b([(0,a.wk)()],x.prototype,"_collapsedConditionIds",void 0),b([(0,a.wk)()],x.prototype,"_draggingCondition",void 0),b([(0,a.wk)()],x.prototype,"_draggedItem",void 0),b([(0,a.wk)()],x.prototype,"_dropTarget",void 0),b([(0,a.wk)()],x.prototype,"_selectedLayoutModuleIndex",void 0),b([(0,a.wk)()],x.prototype,"_showLayoutChildSettings",void 0),b([(0,a.wk)()],x.prototype,"_selectedLayoutChild",void 0),b([(0,a.wk)()],x.prototype,"_popupDragState",void 0),b([(0,a.wk)()],x.prototype,"_popupResizeState",void 0),x=b([(0,a.EM)("ultra-layout-tab")],x)},504:(e,t,o)=>{o.d(t,{o:()=>c});var i=o(183),a=o(30),n=o(796),r=o(575),s=o(662),l=o(345),d=o(456);class c extends a.m{constructor(){super(...arguments),this.metadata={type:"text",title:"Text Module",description:"Display custom text content",author:"WJD Designs",version:"1.0.0",icon:"mdi:format-text",category:"content",tags:["text","content","typography","template"]},this.clickTimeout=null,this.holdTimeout=null,this.isHolding=!1}createDefault(e,t){return{id:e||this.generateId("text"),type:"text",text:"Sample Text",link:"",hide_if_no_link:!1,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},icon:"",icon_position:"before",template_mode:!1,template:"",enable_hover_effect:!0,hover_background_color:"var(--divider-color)",font_size:26,font_weight:"700",text_transform:"uppercase",design:{}}}renderGeneralTab(e,t,o,a){var n;const s=e,l=(null===(n=null==t?void 0:t.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Content Configuration -->
        ${this.renderSettingsSection((0,d.kg)("editor.text.content_section.title",l,"Content Configuration"),(0,d.kg)("editor.text.content_section.desc",l,"Configure the text content and basic settings for this module."),[{title:(0,d.kg)("editor.text.text_content",l,"Text Content"),description:(0,d.kg)("editor.text.text_content_desc",l,"Enter the text content to display in this module."),hass:t,data:{text:s.text||""},schema:[this.textField("text")],onChange:e=>a(e.detail.value)}])}

        <!-- Icon Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,d.kg)("editor.text.icon_section.title",l,"Icon Configuration")}
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
          >
            ${(0,d.kg)("editor.text.icon_section.desc",l,"Choose an icon to display alongside the text content.")}
          </div>

          ${r.U.renderFieldSection((0,d.kg)("editor.text.icon",l,"Icon"),(0,d.kg)("editor.text.icon_desc",l,"Choose an icon to display alongside the text. Leave empty for no icon."),t,{icon:s.icon||""},[this.iconField("icon")],(e=>a(e.detail.value)))}
          ${s.icon&&""!==s.icon.trim()?i.qy`
                <div style="margin-top: 24px;">
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    ${(0,d.kg)("editor.text.icon_position",l,"Icon Position")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                  >
                    ${(0,d.kg)("editor.text.icon_position_desc",l,"Choose where to position the icon relative to the text.")}
                  </div>
                  <div
                    style="display: flex; gap: 8px; justify-content: flex-start; flex-wrap: wrap;"
                  >
                    <button
                      type="button"
                      style="padding: 8px 12px; border: 2px solid ${"before"===(s.icon_position||"before")?"var(--primary-color)":"var(--divider-color)"}; background: ${"before"===(s.icon_position||"before")?"var(--primary-color)":"transparent"}; color: ${"before"===(s.icon_position||"before")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                      @click=${()=>a({icon_position:"before"})}
                    >
                      <ha-icon
                        icon="mdi:format-align-left"
                        style="font-size: 16px; flex-shrink: 0;"
                      ></ha-icon>
                      <span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                        >${(0,d.kg)("editor.text.before_text",l,"Before Text")}</span
                      >
                    </button>
                    <button
                      type="button"
                      style="padding: 8px 12px; border: 2px solid ${"after"===(s.icon_position||"before")?"var(--primary-color)":"var(--divider-color)"}; background: ${"after"===(s.icon_position||"before")?"var(--primary-color)":"transparent"}; color: ${"after"===(s.icon_position||"before")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                      @click=${()=>a({icon_position:"after"})}
                    >
                      <ha-icon
                        icon="mdi:format-align-right"
                        style="font-size: 16px; flex-shrink: 0;"
                      ></ha-icon>
                      <span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                        >${(0,d.kg)("editor.text.after_text",l,"After Text")}</span
                      >
                    </button>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Template Configuration -->
        <div
          class="settings-section template-mode-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,d.kg)("editor.text.template_mode",l,"Template Mode")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,d.kg)("editor.text.template_mode_desc",l,"Use Home Assistant templating syntax to render text")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:s.template_mode||!1}}
              .schema=${[{name:"template_mode",label:(0,d.kg)("editor.text.template_mode",l,"Template Mode"),description:(0,d.kg)("editor.text.template_mode_desc",l,"Use Home Assistant templating syntax to render text"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>a({template_mode:e.detail.value.template_mode})}
            ></ha-form>
          </div>

          ${s.template_mode?i.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{template:s.template||""}}
                    .schema=${[{name:"template",label:(0,d.kg)("editor.text.value_template",l,"Value Template"),description:(0,d.kg)("editor.text.value_template_desc",l,"Template to render the text using Jinja2 syntax"),selector:{text:{multiline:!0}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>a({template:e.detail.value.template})}
                  ></ha-form>
                </div>

                <div class="template-examples">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,d.kg)("editor.text.examples_title",l,"Common Examples:")}
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.example') }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,d.kg)("editor.text.example_basic",l,"Basic value")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.example') | int(default=0) }}%
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,d.kg)("editor.text.example_percent",l,"With percent")}
                    </div>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Text Alignment moved to Design tab per spec -->
      </div>
    `}renderActionsTab(e,t,o,i){return s.A.render(e,t,(e=>i(e)))}renderPreview(e,t){var o;const a=e;if(a.hide_if_no_link&&!this.hasActiveLink(a))return i.qy`<div class="text-module-hidden">Hidden (no link)</div>`;const n=a,r=a.design||{},d=(()=>{const e=r.text_align;if(e&&"inherit"!==e)return e;const t=n.text_align;return t&&"inherit"!==t?t:n.alignment&&"inherit"!==n.alignment?n.alignment:"center"})(),c={fontSize:(()=>r.font_size?this.addPixelUnit(r.font_size)||r.font_size:void 0!==n.font_size?`${n.font_size}px`:"26px")(),fontFamily:r.font_family||n.font_family||"inherit",color:r.color||n.color||"inherit",textAlign:d,fontWeight:r.font_weight?r.font_weight:void 0!==n.font_weight?n.font_weight:"700",fontStyle:r.font_style||n.font_style||"inherit",textTransform:r.text_transform?r.text_transform:void 0!==n.text_transform?n.text_transform:"uppercase",textDecoration:"none",lineHeight:r.line_height||n.line_height||"inherit",letterSpacing:r.letter_spacing||n.letter_spacing||"inherit",margin:"0",display:"flex",alignItems:"center",justifyContent:{left:"flex-start",center:"center",right:"flex-end"}[d]||"center",gap:"8px",width:"100%",textShadow:r.text_shadow_h&&r.text_shadow_v?`${r.text_shadow_h||"0"} ${r.text_shadow_v||"0"} ${r.text_shadow_blur||"0"} ${r.text_shadow_color||"rgba(0,0,0,0.5)"}`:n.text_shadow_h&&n.text_shadow_v?`${n.text_shadow_h||"0"} ${n.text_shadow_v||"0"} ${n.text_shadow_blur||"0"} ${n.text_shadow_color||"rgba(0,0,0,0.5)"}`:"none",boxShadow:r.box_shadow_h&&r.box_shadow_v?`${r.box_shadow_h||"0"} ${r.box_shadow_v||"0"} ${r.box_shadow_blur||"0"} ${r.box_shadow_spread||"0"} ${r.box_shadow_color||"rgba(0,0,0,0.1)"}`:n.box_shadow_h&&n.box_shadow_v?`${n.box_shadow_h||"0"} ${n.box_shadow_v||"0"} ${n.box_shadow_blur||"0"} ${n.box_shadow_spread||"0"} ${n.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none"},p=a.icon?i.qy`<ha-icon icon="${a.icon}"></ha-icon>`:"";let u=a.text||"Sample Text";if(a.template_mode&&a.template&&(!this._templateService&&t&&(this._templateService=new l.I(t)),t)){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=this._hashString(a.template),i=`state_text_text_${a.id}_${e}`;this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(a.template,i,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(o=t.__uvc_template_strings)||void 0===o?void 0:o[i];void 0!==n&&""!==String(n).trim()&&(u=String(n))}const h=i.qy`<span>${u}</span>`;let m;m="before"!==a.icon_position&&a.icon_position?"after"===a.icon_position?i.qy`${h}${p}`:h:i.qy`${p}${h}`;const g=this.hasActiveLink(a)?i.qy`<div
          class="${s.A.getClickableClass(a)}"
          style="${s.A.getClickableStyle(a)}"
          @click=${e=>this.handleClick(e,a,t)}
          @dblclick=${e=>this.handleDoubleClick(e,a,t)}
          @mousedown=${e=>this.handleMouseDown(e,a,t)}
          @mouseup=${e=>this.handleMouseUp(e,a,t)}
          @mouseleave=${e=>this.handleMouseLeave(e,a,t)}
          @touchstart=${e=>this.handleTouchStart(e,a,t)}
          @touchend=${e=>this.handleTouchEnd(e,a,t)}
        >
          ${m}
        </div>`:m,_={padding:r.padding_top||r.padding_bottom||r.padding_left||r.padding_right||n.padding_top||n.padding_bottom||n.padding_left||n.padding_right?`${this.addPixelUnit(r.padding_top||n.padding_top)||"8px"} ${this.addPixelUnit(r.padding_right||n.padding_right)||"0px"} ${this.addPixelUnit(r.padding_bottom||n.padding_bottom)||"8px"} ${this.addPixelUnit(r.padding_left||n.padding_left)||"0px"}`:"8px 0",margin:r.margin_top||r.margin_bottom||r.margin_left||r.margin_right||n.margin_top||n.margin_bottom||n.margin_left||n.margin_right?`${this.addPixelUnit(r.margin_top||n.margin_top)||"0px"} ${this.addPixelUnit(r.margin_right||n.margin_right)||"0px"} ${this.addPixelUnit(r.margin_bottom||n.margin_bottom)||"0px"} ${this.addPixelUnit(r.margin_left||n.margin_left)||"0px"}`:"0",background:r.background_color||n.background_color||"inherit",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},n),r),t),backgroundSize:r.background_size||n.background_size||"cover",backgroundPosition:r.background_position||n.background_position||"center",backgroundRepeat:r.background_repeat||n.background_repeat||"no-repeat",border:(r.border_style||n.border_style)&&"none"!==(r.border_style||n.border_style)?`${r.border_width||n.border_width||"1px"} ${r.border_style||n.border_style} ${r.border_color||n.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(r.border_radius||n.border_radius)||"inherit",position:r.position||n.position||"static",top:r.top||n.top||"auto",bottom:r.bottom||n.bottom||"auto",left:r.left||n.left||"auto",right:r.right||n.right||"auto",zIndex:r.z_index||n.z_index||"auto",width:r.width||n.width||"auto",height:r.height||n.height||"auto",maxWidth:r.max_width||n.max_width||"none",maxHeight:r.max_height||n.max_height||"none",minWidth:r.min_width||n.min_width||"auto",minHeight:r.min_height||n.min_height||"auto",overflow:r.overflow||n.overflow||"visible",clipPath:r.clip_path||n.clip_path||"none",backdropFilter:r.backdrop_filter||n.backdrop_filter||"none",boxShadow:r.box_shadow_h&&r.box_shadow_v?`${r.box_shadow_h||"0"} ${r.box_shadow_v||"0"} ${r.box_shadow_blur||"0"} ${r.box_shadow_spread||"0"} ${r.box_shadow_color||"rgba(0,0,0,0.1)"}`:n.box_shadow_h&&n.box_shadow_v?`${n.box_shadow_h||"0"} ${n.box_shadow_v||"0"} ${n.box_shadow_blur||"0"} ${n.box_shadow_spread||"0"} ${n.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};return i.qy`
      <div class="text-module-container" style=${this.styleObjectToCss(_)}>
        <div class="text-module-preview" style=${this.styleObjectToCss(c)}>${g}</div>
      </div>
    `}validate(e){const t=e,o=[...super.validate(e).errors];if(t.text&&""!==t.text.trim()||o.push("Text content is required"),t.icon&&""!==t.icon.trim()&&(t.icon.includes(":")||o.push('Icon must be in format "mdi:icon-name" or "hass:icon-name"')),t.link&&""!==t.link.trim())try{new URL(t.link)}catch(e){t.link.startsWith("/")||t.link.startsWith("#")||o.push('Link must be a valid URL or start with "/" for relative paths')}return t.tap_action&&"default"!==t.tap_action.action&&"nothing"!==t.tap_action.action&&o.push(...this.validateAction(t.tap_action)),t.hold_action&&"default"!==t.hold_action.action&&"nothing"!==t.hold_action.action&&o.push(...this.validateAction(t.hold_action)),t.double_tap_action&&"default"!==t.double_tap_action.action&&"nothing"!==t.double_tap_action.action&&o.push(...this.validateAction(t.double_tap_action)),!t.template_mode||t.template&&""!==t.template.trim()||o.push("Template code is required when template mode is enabled"),{valid:0===o.length,errors:o}}hasActiveLink(e){const t=e.link&&""!==e.link.trim(),o=e.tap_action&&"default"!==e.tap_action.action&&"nothing"!==e.tap_action.action,i=e.hold_action&&"default"!==e.hold_action.action&&"nothing"!==e.hold_action.action,a=e.double_tap_action&&"default"!==e.double_tap_action.action&&"nothing"!==e.double_tap_action.action;return t||o||i||a}validateAction(e){const t=[];switch(e.action){case"more-info":case"toggle":e.entity||t.push(`Entity is required for ${e.action} action`);break;case"navigate":e.navigation_path||t.push("Navigation path is required for navigate action");break;case"url":e.url_path||t.push("URL path is required for url action");break;case"perform-action":e.perform_action||e.service||t.push("Action is required for perform-action")}return t}handleClick(e,t,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,o)}),300)}handleDoubleClick(e,t,o){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,o)}handleMouseDown(e,t,o){this.startHold(e,t,o)}handleMouseUp(e,t,o){this.endHold(e,t,o)}handleMouseLeave(e,t,o){this.endHold(e,t,o)}handleTouchStart(e,t,o){this.startHold(e,t,o)}handleTouchEnd(e,t,o){this.endHold(e,t,o)}startHold(e,t,o){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,o)}),500)}endHold(e,t,o){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTapAction(e,t,o){this.isHolding||(t.link&&""!==t.link.trim()?t.link.startsWith("http")||t.link.startsWith("https")?window.open(t.link,"_blank"):window.location.href=t.link:t.tap_action&&"default"!==t.tap_action.action&&"nothing"!==t.tap_action.action&&n.K.handleAction(t.tap_action,o,e.target))}handleDoubleAction(e,t,o){t.double_tap_action&&"default"!==t.double_tap_action.action&&"nothing"!==t.double_tap_action.action&&n.K.handleAction(t.double_tap_action,o,e.target)}handleHoldAction(e,t,o){t.hold_action&&"default"!==t.hold_action.action&&"nothing"!==t.hold_action.action&&n.K.handleAction(t.hold_action,o,e.target)}getStyles(){return`\n      .text-module-preview {\n        min-height: 20px;\n        word-wrap: break-word;\n      }\n      \n      .text-module-hidden {\n        color: var(--secondary-text-color);\n        font-style: italic;\n        text-align: center;\n        padding: 12px;\n        background: var(--secondary-background-color);\n        border-radius: 4px;\n      }\n      \n      /* Field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Icon picker specific styling */\n      ha-icon-picker {\n        --ha-icon-picker-width: 100%;\n        --ha-icon-picker-height: 56px;\n      }\n\n      /* Text field and select consistency */\n      ha-textfield,\n      ha-select {\n        --mdc-shape-small: 8px;\n        --mdc-theme-primary: var(--primary-color);\n      }\n\n      code {\n        background: var(--secondary-background-color);\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-family: 'Courier New', monospace;\n        font-size: 0.9em;\n        color: var(--primary-color);\n      }\n\n      /* Clickable text hover styles */\n      ${s.A.getHoverStyles()}\n    `}getBackgroundImageCSS(e,t){const o=e.background_image_type,i=e.background_image,a=e.background_image_entity;switch(o){case"upload":if(i)return i.startsWith("/api/image/serve/")?`url("${this.getImageUrl(t,i)}")`:(i.startsWith("data:image/"),`url("${i}")`);break;case"entity":if(a&&t){const e=t.states[a];if(e){const t=e.attributes.entity_picture||e.attributes.image||e.state;if(t&&"unknown"!==t&&"unavailable"!==t)return`url("${t}")`}}break;case"url":if(i)return`url("${i}")`;break;default:return"none"}return"none"}getImageUrl(e,t){if(!t)return"";if(t.startsWith("http"))return t;if(t.startsWith("data:image/"))return t;if(t.includes("/api/image/serve/")){const o=t.match(/\/api\/image\/serve\/([^\/]+)/);if(o&&o[1]){const i=o[1];try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/api/image/serve/${i}/original`}catch(e){return t}}return t}return t.startsWith("/")?`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}${t}`:t}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_hashString(e){let t=0;for(let o=0;o<e.length;o+=1)t=(t<<5)-t+e.charCodeAt(o),t|=0;return Math.abs(t)}}},575:(e,t,o)=>{o.d(t,{U:()=>a});var i=o(183);class a{static renderForm(e,t,o,a,n=!1){return i.qy`
      <ha-form
        .hass=${e}
        .data=${t}
        .schema=${o}
        .computeLabel=${n?this._defaultComputeLabel:this._hideLabels}
        .computeDescription=${n?this._defaultComputeDescription:this._hideDescriptions}
        @value-changed=${a}
      ></ha-form>
    `}static renderFieldSection(e,t,o,n,r,s){return i.qy`
      <div class="field-section" style="margin-bottom: 16px;">
        ${e?i.qy`<div
              class="field-title"
              style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
            >
              ${e}
            </div>`:""}
        ${t?i.qy`<div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
            >
              ${t}
            </div>`:""}
        ${a.renderForm(o,n,r,s,!1)}
      </div>
    `}static renderSettingsSection(e,t,o){return i.qy`
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
      >
        ${e?i.qy`
              <div
                class="section-title"
                style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
              >
                ${e}
              </div>
            `:""}
        ${t?i.qy`
              <div
                style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
              >
                ${t}
              </div>
            `:""}
        ${o.map((e=>a.renderFieldSection(e.title,e.description,e.hass,e.data,e.schema,e.onChange)))}
      </div>
    `}static entity(e,t){return{name:e,selector:{entity:t?{domain:t}:{}}}}static text(e,t=!1){return{name:e,selector:{text:t?{multiline:!0}:{}}}}static select(e,t){return{name:e,selector:{select:{options:t,mode:"dropdown"}}}}static icon(e){return{name:e,selector:{icon:{}}}}static boolean(e){return{name:e,selector:{boolean:{}}}}static number(e,t,o,i){const a={};return void 0!==t&&(a.min=t),void 0!==o&&(a.max=o),void 0!==i&&(a.step=i),{name:e,selector:{number:Object.keys(a).length?a:{}}}}static color(e){return{name:e,selector:{color_rgb:{}}}}static grid(e){return{type:"grid",name:"",schema:e}}static expandable(e,t,o){return{type:"expandable",name:e,title:t,schema:o}}static getCleanFormStyles(){return"\n      .field-section {\n        margin-bottom: 16px;\n      }\n\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n       \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Ensure form elements are properly sized */\n      ha-form {\n        display: block;\n        width: 100%;\n      }\n\n      ha-form ha-select,\n      ha-form ha-textfield,\n      ha-form ha-entity-picker,\n      ha-form ha-icon-picker {\n        width: 100%;\n        --mdc-theme-primary: var(--primary-color);\n      }\n    "}static injectCleanFormStyles(){return i.qy`
      <style>
        ${a.getCleanFormStyles()}
      </style>
    `}}a._hideLabels=()=>"",a._defaultComputeLabel=e=>e.name,a._hideDescriptions=()=>"",a._defaultComputeDescription=e=>e.description||""},649:(e,t,o)=>{o.d(t,{f:()=>p});var i=o(183),a=o(30),n=o(796),r=o(57),s=o(662),l=o(400),d=o(345),c=o(456);o(768);class p extends a.m{constructor(){super(...arguments),this.metadata={type:"info",title:"Info Items",description:"Show entity information values",author:"WJD Designs",version:"1.0.0",icon:"mdi:information",category:"data",tags:["info","entity","data","sensors"]},this.clickTimeout=null,this.holdTimeout=null,this.isHolding=!1}createDefault(e,t){return{id:e||this.generateId("info"),type:"info",info_entities:[{id:this.generateId("entity"),entity:"weather.forecast_home",name:"Temperature",icon:"mdi:thermometer",show_icon:!0,show_name:!0,show_state:!0,show_units:!0,text_size:14,name_size:12,icon_size:26,text_bold:!1,text_italic:!1,text_uppercase:!1,text_strikethrough:!1,name_bold:!1,name_italic:!1,name_uppercase:!1,name_strikethrough:!1,icon_color:"var(--primary-color)",name_color:"var(--secondary-text-color)",text_color:"var(--primary-text-color)",state_color:"var(--primary-text-color)",click_action:"more-info",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:"",icon_position:"left",icon_alignment:"center",content_alignment:"start",overall_alignment:"center",icon_gap:8}],columns:1,gap:12,allow_wrap:!0,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},enable_hover_effect:!0,hover_background_color:"var(--divider-color)"}}renderGeneralTab(e,t,o,a){var n,r,s,l;const d=e,p=(null===(n=null==t?void 0:t.locale)||void 0===n?void 0:n.language)||"en",u=this.createDefault().info_entities[0];let h=d.info_entities[0]?Object.assign(Object.assign({},u),d.info_entities[0]):u;return h=Object.assign(Object.assign({},h),{icon_position:h.icon_position||"left",overall_alignment:h.overall_alignment||"center",icon_alignment:h.icon_alignment||"center",content_alignment:h.content_alignment||"start"}),i.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Entity Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.info.entity_section.title",p,"ENTITY CONFIGURATION")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{entity:h.entity||""}}
              .schema=${[{name:"entity",label:(0,c.kg)("editor.info.entity",p,"Entity"),description:(0,c.kg)("editor.info.entity_desc",p,"Select the entity to display"),selector:{entity:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>this._handleEntityChange(d,0,e.detail.value.entity,t,a)}
            ></ha-form>
          </div>
        </div>

        <!-- Icon Settings -->
        <div
          class="settings-section icon-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.info.icon_section.title",p,"Icon Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{show_icon:!1!==h.show_icon}}
              .schema=${[{name:"show_icon",label:(0,c.kg)("editor.info.show_icon",p,"Show Icon"),description:(0,c.kg)("editor.info.show_icon_desc",p,"Display an icon next to the entity value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>this._updateEntity(d,0,{show_icon:e.detail.value.show_icon},a)}
            ></ha-form>
          </div>

          ${!1!==h.show_icon?i.qy`
                <div style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{icon:h.icon||""}}
                    .schema=${[{name:"icon",label:(0,c.kg)("editor.info.icon",p,"Icon"),description:(0,c.kg)("editor.info.icon_desc",p,"Choose an icon to display"),selector:{icon:{}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>this._updateEntity(d,0,{icon:e.detail.value.icon},a)}
                  ></ha-form>
                </div>

                <div style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,c.kg)("editor.info.icon_color",p,"Icon Color")}
                  </div>
                  <ultra-color-picker
                    .value=${h.icon_color||""}
                    .defaultValue=${"var(--primary-color)"}
                    .hass=${t}
                    @value-changed=${e=>this._updateEntity(d,0,{icon_color:e.detail.value},a)}
                  ></ultra-color-picker>
                </div>
              `:""}
        </div>

        <!-- Name Settings -->
        <div
          class="settings-section name-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.info.name_section.title",p,"Name Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{show_name:!1!==h.show_name}}
              .schema=${[{name:"show_name",label:(0,c.kg)("editor.info.show_name",p,"Show Name"),description:(0,c.kg)("editor.info.show_name_desc",p,"Display the entity name above the value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>this._updateEntity(d,0,{show_name:e.detail.value.show_name},a)}
            ></ha-form>
          </div>

          ${!1!==h.show_name?i.qy`
                <div style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{name:h.name||""}}
                    .schema=${[{name:"name",label:(0,c.kg)("editor.info.custom_name",p,"Custom Name"),description:(0,c.kg)("editor.info.custom_name_desc",p,"Override the entity name with a custom name"),selector:{text:{}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>this._updateEntity(d,0,{name:e.detail.value.name},a)}
                  ></ha-form>
                </div>

                <div style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,c.kg)("editor.info.name_color",p,"Name Color")}
                  </div>
                  <ultra-color-picker
                    .value=${h.name_color||""}
                    .defaultValue=${"var(--secondary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>this._updateEntity(d,0,{name_color:e.detail.value},a)}
                  ></ultra-color-picker>
                </div>
              `:""}
        </div>

        <!-- State Settings -->
        <div
          class="settings-section state-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.info.state_section.title",p,"State Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{show_state:!1!==h.show_state}}
              .schema=${[{name:"show_state",label:(0,c.kg)("editor.info.show_state",p,"Show State"),description:(0,c.kg)("editor.info.show_state_desc",p,"Display the entity state/value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>this._updateEntity(d,0,{show_state:e.detail.value.show_state},a)}
            ></ha-form>
          </div>

          ${!1!==h.show_state?i.qy`
                <div style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{show_units:!1!==h.show_units}}
                    .schema=${[{name:"show_units",label:(0,c.kg)("editor.info.show_units",p,"Show Units"),description:(0,c.kg)("editor.info.show_units_desc",p,"Display the unit of measurement (if available)"),selector:{boolean:{}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>this._updateEntity(d,0,{show_units:e.detail.value.show_units},a)}
                  ></ha-form>
                </div>
              `:""}
          ${!1!==h.show_state?i.qy`
                <div style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,c.kg)("editor.info.state_color",p,"State Color")}
                  </div>
                  <ultra-color-picker
                    .value=${h.state_color||""}
                    .defaultValue=${"var(--primary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>this._updateEntity(d,0,{state_color:e.detail.value},a)}
                  ></ultra-color-picker>
                </div>
              `:""}
        </div>

        <!-- Template Mode Section -->
        <div
          class="settings-section template-mode-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.info.template.title",p,"Template Mode")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,c.kg)("editor.info.template.desc",p,"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:h.template_mode||!1}}
              .schema=${[{name:"template_mode",label:(0,c.kg)("editor.info.template.mode",p,"Template Mode"),description:(0,c.kg)("editor.info.template.mode_desc",p,"Use Home Assistant templating syntax to format the value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>this._updateEntity(d,0,{template_mode:e.detail.value.template_mode},a)}
            ></ha-form>
          </div>

          ${h.template_mode?i.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{template:h.template||""}}
                    .schema=${[{name:"template",label:(0,c.kg)("editor.info.template.value",p,"Value Template"),description:(0,c.kg)("editor.info.template.value_desc",p,"Template to format the entity value using Jinja2 syntax"),selector:{text:{multiline:!0}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>{this._updateEntity(d,0,{template:e.detail.value.template},a),this._handleTemplateChange(e.detail.value.template,d,0,t)}}
                  ></ha-form>
                </div>

                <div class="template-examples">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,c.kg)("editor.info.examples_title",p,"Common Examples:")}
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.${(null===(r=h.entity)||void 0===r?void 0:r.split(".")[1])||"example"}') }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,c.kg)("editor.info.example_basic",p,"Basic value")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.${(null===(s=h.entity)||void 0===s?void 0:s.split(".")[1])||"example"}') | float(0) }}
                      km
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,c.kg)("editor.info.example_units",p,"With units")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.${(null===(l=h.entity)||void 0===l?void 0:l.split(".")[1])||"example"}') | float(0) |
                      round(1) }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,c.kg)("editor.info.example_round",p,"Round to 1 decimal")}
                    </div>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Size Settings -->
        <div
          class="settings-section size-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.info.size_section.title",p,"Size Settings")}
          </div>

          <div style="display: flex; flex-direction: column; gap: 20px;">
            ${!1!==h.show_icon?i.qy`
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,c.kg)("editor.info.icon_size",p,"Icon Size")}
                    </div>
                    <div class="field-description">
                      ${(0,c.kg)("editor.info.icon_size_desc",p,"Size of the icon in pixels")}
                    </div>
                    <div
                      class="gap-control-container"
                      style="display: flex; align-items: center; gap: 12px;"
                    >
                      <input
                        type="range"
                        class="gap-slider"
                        min="12"
                        max="48"
                        step="1"
                        .value="${Number(h.icon_size)||26}"
                        @input=${e=>{const t=e.target,o=Number(t.value);this._updateEntity(d,0,{icon_size:o},a)}}
                      />
                      <input
                        type="number"
                        class="gap-input"
                        min="12"
                        max="48"
                        step="1"
                        .value="${Number(h.icon_size)||26}"
                        @input=${e=>{const t=e.target,o=Number(t.value);isNaN(o)||this._updateEntity(d,0,{icon_size:o},a)}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=Number(t.value)||26,i="ArrowUp"===e.key?1:-1,n=Math.max(12,Math.min(48,o+i));this._updateEntity(d,0,{icon_size:n},a)}}}
                      />
                      <button
                        class="reset-btn"
                        @click=${()=>this._updateEntity(d,0,{icon_size:26},a)}
                        title="${(0,c.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","26")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                `:""}
            ${!1!==h.show_name?i.qy`
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,c.kg)("editor.info.name_size",p,"Name Size")}
                    </div>
                    <div class="field-description">
                      ${(0,c.kg)("editor.info.name_size_desc",p,"Size of the entity name text in pixels")}
                    </div>
                    <div
                      class="gap-control-container"
                      style="display: flex; align-items: center; gap: 12px;"
                    >
                      <input
                        type="range"
                        class="gap-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${h.name_size||12}"
                        @input=${e=>{const t=e.target,o=Number(t.value);this._updateEntity(d,0,{name_size:o},a)}}
                      />
                      <input
                        type="number"
                        class="gap-input"
                        min="8"
                        max="32"
                        step="1"
                        .value="${h.name_size||12}"
                        @input=${e=>{const t=e.target,o=Number(t.value);isNaN(o)||this._updateEntity(d,0,{name_size:o},a)}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=Number(t.value)||12,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(32,o+i));this._updateEntity(d,0,{name_size:n},a)}}}
                      />
                      <button
                        class="reset-btn"
                        @click=${()=>this._updateEntity(d,0,{name_size:12},a)}
                        title="${(0,c.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","12")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                `:""}

            <div class="field-container" style="margin-bottom: 24px;">
              <div class="field-title">
                ${(0,c.kg)("editor.info.value_size",p,"Value Size")}
              </div>
              <div class="field-description">
                ${(0,c.kg)("editor.info.value_size_desc",p,"Size of the entity value text in pixels")}
              </div>
              <div
                class="gap-control-container"
                style="display: flex; align-items: center; gap: 12px;"
              >
                <input
                  type="range"
                  class="gap-slider"
                  min="8"
                  max="32"
                  step="1"
                  .value="${h.text_size||14}"
                  @input=${e=>{const t=e.target,o=Number(t.value);this._updateEntity(d,0,{text_size:o},a)}}
                />
                <input
                  type="number"
                  class="gap-input"
                  min="8"
                  max="32"
                  step="1"
                  .value="${h.text_size||14}"
                  @input=${e=>{const t=e.target,o=Number(t.value);isNaN(o)||this._updateEntity(d,0,{text_size:o},a)}}
                  @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=Number(t.value)||14,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(32,o+i));this._updateEntity(d,0,{text_size:n},a)}}}
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateEntity(d,0,{text_size:14},a)}
                  title="${(0,c.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","14")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            ${!1!==h.show_icon?i.qy`
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,c.kg)("editor.info.icon_gap",p,"Icon Gap")}
                    </div>
                    <div class="field-description">
                      ${(0,c.kg)("editor.info.icon_gap_desc",p,"Space between the icon and content in pixels")}
                    </div>
                    <div
                      class="gap-control-container"
                      style="display: flex; align-items: center; gap: 12px;"
                    >
                      <input
                        type="range"
                        class="gap-slider"
                        min="0"
                        max="32"
                        step="1"
                        .value="${h.icon_gap||8}"
                        @input=${e=>{const t=e.target,o=Number(t.value);this._updateEntity(d,0,{icon_gap:o},a)}}
                      />
                      <input
                        type="number"
                        class="gap-input"
                        min="0"
                        max="32"
                        step="1"
                        .value="${h.icon_gap||8}"
                        @input=${e=>{const t=e.target,o=Number(t.value);isNaN(o)||this._updateEntity(d,0,{icon_gap:o},a)}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=Number(t.value)||8,i="ArrowUp"===e.key?1:-1,n=Math.max(0,Math.min(32,o+i));this._updateEntity(d,0,{icon_gap:n},a)}}}
                      />
                      <button
                        class="reset-btn"
                        @click=${()=>this._updateEntity(d,0,{icon_gap:8},a)}
                        title="${(0,c.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","8")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                `:""}
          </div>
        </div>

        <!-- Layout & Positioning Section -->
        <div
          class="settings-section layout-positioning-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.info.layout_section.title",p,"Layout & Positioning")}
          </div>

          <!-- Icon Position -->
          <div class="field-group" style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
            >
              ${(0,c.kg)("editor.info.icon_position",p,"Icon Position")}
            </div>
            <div
              class="control-button-group"
              style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; width: 100%;"
            >
              ${[{value:"left",icon:"mdi:arrow-left"},{value:"top",icon:"mdi:arrow-up"},{value:"right",icon:"mdi:arrow-right"},{value:"bottom",icon:"mdi:arrow-down"}].map((e=>i.qy`
                  <button
                    type="button"
                    class="control-btn ${h.icon_position===e.value?"active":""}"
                    @click=${()=>this._updateEntity(d,0,{icon_position:e.value},a)}
                    title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                  >
                    <ha-icon icon="${e.icon}"></ha-icon>
                  </button>
                `))}
            </div>
          </div>

          <!-- Overall Alignment -->
          <div class="field-group" style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
            >
              ${(0,c.kg)("editor.info.overall_alignment",p,"Overall Alignment")}
            </div>
            <div
              class="control-button-group"
              style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; width: 100%;"
            >
              ${[{value:"left",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"right",icon:"mdi:format-align-right"}].map((e=>i.qy`
                  <button
                    type="button"
                    class="control-btn ${h.overall_alignment===e.value?"active":""}"
                    @click=${()=>this._updateEntity(d,0,{overall_alignment:e.value},a)}
                    title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                  >
                    <ha-icon icon="${e.icon}"></ha-icon>
                  </button>
                `))}
            </div>
          </div>

          <!-- Icon and Content Alignment Side by Side -->
          <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 32px;"
          >
            <!-- Icon Alignment -->
            <div class="field-group">
              <div
                class="field-title"
                style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
              >
                ${(0,c.kg)("editor.info.icon_alignment",p,"Icon Alignment")}
              </div>
              <div
                class="control-button-group"
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"
              >
                ${[{value:"start",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"end",icon:"mdi:format-align-right"}].map((e=>i.qy`
                    <button
                      type="button"
                      class="control-btn ${h.icon_alignment===e.value?"active":""}"
                      @click=${()=>this._updateEntity(d,0,{icon_alignment:e.value},a)}
                      title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                    >
                      <ha-icon icon="${e.icon}"></ha-icon>
                    </button>
                  `))}
              </div>
            </div>

            <!-- Content Alignment -->
            <div class="field-group">
              <div
                class="field-title"
                style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
              >
                ${(0,c.kg)("editor.info.content_alignment",p,"Content Alignment")}
              </div>
              <div
                class="control-button-group"
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"
              >
                ${[{value:"start",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"end",icon:"mdi:format-align-right"}].map((e=>i.qy`
                    <button
                      type="button"
                      class="control-btn ${h.content_alignment===e.value?"active":""}"
                      @click=${()=>this._updateEntity(d,0,{content_alignment:e.value},a)}
                      title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                    >
                      <ha-icon icon="${e.icon}"></ha-icon>
                    </button>
                  `))}
              </div>
            </div>
          </div>
        </div>
      </div>
    `}renderActionsTab(e,t,o,i){const a=e;return a.info_entities[0]||this.createDefault().info_entities[0],s.A.render(a,t,(e=>i(e)))}renderInfoActionConfig(e,t,o){return i.qy`
      ${this.renderSingleActionConfig("Tap Action","Action when tapping this info entity",e.tap_action||{action:"nothing"},t,(e=>o({tap_action:e})))}
      ${this.renderSingleActionConfig("Hold Action","Action when holding this info entity",e.hold_action||{action:"nothing"},t,(e=>o({hold_action:e})))}
      ${this.renderSingleActionConfig("Double Tap Action","Action when double-tapping this info entity",e.double_tap_action||{action:"nothing"},t,(e=>o({double_tap_action:e})))}
    `}renderSingleActionConfig(e,t,o,a,n){const r={action_config:"nothing"===(null==o?void 0:o.action)?Object.assign(Object.assign({},o),{action:"default"}):o};return i.qy`
      <div style="margin-bottom: 16px;">
        <ha-form
          .hass=${a}
          .data=${r}
          .schema=${[{name:"action_config",label:"",selector:{ui_action:{actions:["default","more-info","toggle","navigate","url","perform-action","assist"]}}}]}
          .computeLabel=${e=>e.label||""}
          @value-changed=${e=>{var t;const o=null===(t=e.detail.value)||void 0===t?void 0:t.action_config;o&&n(o)}}
        ></ha-form>
      </div>
    `}renderPreview(e,t){var o,a;const n=e,s=n,l=n.design||{},c=(e,t)=>null!=e&&""!==e?"string"==typeof e&&e.includes("px")?e:`${e}px`:null!=t?"string"==typeof t&&t.includes("px")?t:`${t}px`:"inherit",p=e=>{if(l.text_align&&"inherit"!==l.text_align)return l.text_align;const t=e.content_alignment;if("start"===t)return"left";if("end"===t)return"right";if("center"===t)return"center";const o=e.overall_alignment;if(!t&&o){if("left"===o)return"left";if("right"===o)return"right";if("center"===o)return"center"}return"center"},u={padding:l.padding_top||l.padding_bottom||l.padding_left||l.padding_right||s.padding_top||s.padding_bottom||s.padding_left||s.padding_right?`${this.addPixelUnit(l.padding_top||s.padding_top)||"8px"} ${this.addPixelUnit(l.padding_right||s.padding_right)||"0px"} ${this.addPixelUnit(l.padding_bottom||s.padding_bottom)||"8px"} ${this.addPixelUnit(l.padding_left||s.padding_left)||"0px"}`:"8px 0",margin:l.margin_top||l.margin_bottom||l.margin_left||l.margin_right||s.margin_top||s.margin_bottom||s.margin_left||s.margin_right?`${this.addPixelUnit(l.margin_top||s.margin_top)||"0px"} ${this.addPixelUnit(l.margin_right||s.margin_right)||"0px"} ${this.addPixelUnit(l.margin_bottom||s.margin_bottom)||"0px"} ${this.addPixelUnit(l.margin_left||s.margin_left)||"0px"}`:"0",background:l.background_color||s.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},s),l),t),backgroundSize:l.background_size||s.background_size||"cover",backgroundPosition:l.background_position||s.background_position||"center",backgroundRepeat:l.background_repeat||s.background_repeat||"no-repeat",border:(l.border_style||s.border_style)&&"none"!==(l.border_style||s.border_style)?`${l.border_width||s.border_width||"1px"} ${l.border_style||s.border_style} ${l.border_color||s.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(l.border_radius||s.border_radius)||"0",position:l.position||s.position||"relative",top:l.top||s.top||"auto",bottom:l.bottom||s.bottom||"auto",left:l.left||s.left||"auto",right:l.right||s.right||"auto",zIndex:l.z_index||s.z_index||"auto",width:l.width||s.width||"auto",height:l.height||s.height||"auto",maxWidth:l.max_width||s.max_width||"none",maxHeight:l.max_height||s.max_height||"none",minWidth:l.min_width||s.min_width||"none",minHeight:l.min_height||s.min_height||"auto",overflow:l.overflow||s.overflow||"visible",clipPath:l.clip_path||s.clip_path||"none",backdropFilter:l.backdrop_filter||s.backdrop_filter||"none",boxShadow:(l.box_shadow_h||s.box_shadow_h)&&(l.box_shadow_v||s.box_shadow_v)?`${l.box_shadow_h||s.box_shadow_h||"0"} ${l.box_shadow_v||s.box_shadow_v||"0"} ${l.box_shadow_blur||s.box_shadow_blur||"0"} ${l.box_shadow_spread||s.box_shadow_spread||"0"} ${l.box_shadow_color||s.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};return i.qy`
      <div class="info-module-container" style=${this.styleObjectToCss(u)}>
        <div class="info-module-preview">
          <div
            class="info-entities"
            style="
            display: grid;
            grid-template-columns: repeat(${n.columns||1}, 1fr);
            gap: ${n.gap||12}px;
            ${(null===(o=n.info_entities[0])||void 0===o?void 0:o.overall_alignment)?`justify-content: ${"left"===n.info_entities[0].overall_alignment?"start":"right"===n.info_entities[0].overall_alignment?"end":"center"};`:"/* No justify-content - allow Global Design tab control */"}
            ${(null===(a=n.info_entities[0])||void 0===a?void 0:a.overall_alignment)?`justify-items: ${"left"===n.info_entities[0].overall_alignment?"start":"right"===n.info_entities[0].overall_alignment?"end":"center"};`:"/* No justify-items - allow Global Design tab control */"}
          "
          >
            ${n.info_entities.slice(0,3).map(((e,o)=>{var a,s,u;const h=this.createDefault().info_entities[0];let m=Object.assign(Object.assign({},h),e);m=Object.assign(Object.assign({},m),{icon_position:m.icon_position||"left",overall_alignment:m.overall_alignment||"center",icon_alignment:m.icon_alignment||"center",content_alignment:m.content_alignment||"start"});const g=null==t?void 0:t.states[m.entity];let _;if(m.template_mode&&m.template){if(!this._templateService&&t&&(this._templateService=new d.I(t)),t){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=this._hashString(m.template),i=`info_entity_${n.id?`${n.id}_${o}`:`${o}`}_${e}`;this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(m.template,i,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const r=null===(a=t.__uvc_template_strings)||void 0===a?void 0:a[i];_=void 0!==r&&""!==String(r).trim()?String(r):g?g.state:"N/A"}}else _=g?(0,r.formatEntityState)(t,m.entity,{includeUnit:!1!==m.show_units}):"N/A";const b=m.name||(null===(s=null==g?void 0:g.attributes)||void 0===s?void 0:s.friendly_name)||m.entity,v=m.icon||(null===(u=null==g?void 0:g.attributes)||void 0===u?void 0:u.icon)||"mdi:help-circle",f=m.icon_position||"left",y=m.icon_alignment||"center",x=(m.content_alignment,m.overall_alignment||"center"),w=m.icon_gap||8,k=!1!==m.show_icon?i.qy`
                      <ha-icon
                        icon="${v}"
                        class="entity-icon"
                        style="color: ${l.color||m.icon_color||"var(--primary-color)"}; --mdc-icon-size: ${$=l.font_size,C=m.icon_size||26,null!=$&&""!==$&&"number"==typeof $?`${$}px`:null!=C?"string"==typeof C&&C.includes("px")?C:`${C}px`:"26px"};"
                      ></ha-icon>
                    `:"";var $,C;const S=i.qy`
                <div
                  class="entity-content"
                  style="
                  align-items: ${(e=>{if(l.text_align&&"inherit"!==l.text_align)return"left"===l.text_align?"flex-start":"right"===l.text_align?"flex-end":"center";const t=e.content_alignment;if("start"===t)return"flex-start";if("end"===t)return"flex-end";if("center"===t)return"center";const o=e.overall_alignment;if(!t&&o){if("left"===o)return"flex-start";if("right"===o)return"flex-end";if("center"===o)return"center"}return"center"})(m)};
                  text-align: ${p(m)};
                "
                >
                  ${!1!==m.show_name?i.qy`
                        <div
                          class="entity-name"
                          style="
                    color: ${l.color||m.name_color||"var(--secondary-text-color)"};
                    font-size: ${c(l.font_size,m.name_size||12)};
                    font-weight: ${l.font_weight||(m.name_bold?"bold":"normal")};
                    font-style: ${l.font_style||(m.name_italic?"italic":"normal")};
                    text-transform: ${l.text_transform||(m.name_uppercase?"uppercase":"none")};
                    text-decoration: ${m.name_strikethrough?"line-through":"none"};
                    font-family: ${l.font_family||"inherit"};
                    line-height: ${l.line_height||"inherit"};
                    letter-spacing: ${l.letter_spacing||"inherit"};
                    text-align: ${p(m)};
                  "
                        >
                          ${b}
                        </div>
                      `:""}
                  ${!1!==m.show_state?i.qy`
                        <div
                          class="entity-value"
                          style="
                        color: ${l.color||m.state_color||m.text_color||"var(--primary-text-color)"};
                        font-size: ${c(l.font_size,m.text_size||14)};
                        font-weight: ${l.font_weight||(m.text_bold?"bold":"normal")};
                        font-style: ${l.font_style||(m.text_italic?"italic":"normal")};
                        text-transform: ${l.text_transform||(m.text_uppercase?"uppercase":"none")};
                        text-decoration: ${m.text_strikethrough?"line-through":"none"};
                        font-family: ${l.font_family||"inherit"};
                        line-height: ${l.line_height||"inherit"};
                        letter-spacing: ${l.letter_spacing||"inherit"};
                        text-align: ${p(m)};
                      "
                        >
                          ${_}
                        </div>
                      `:""}
                </div>
              `;var A;return(null==(A=n)?void 0:A.tap_action)&&"nothing"!==A.tap_action.action||(null==A?void 0:A.hold_action)&&"nothing"!==A.hold_action.action||(null==A?void 0:A.double_tap_action)&&"nothing"!==A.double_tap_action.action?i.qy`<div
                    class="info-entity-clickable position-${f} ${!1!==n.enable_hover_effect?"hover-enabled":""}"
                    style="
                    display: flex;
                    flex-direction: ${"top"===f||"bottom"===f?"column":"row"};
                    align-items: ${"start"===y?"flex-start":"end"===y?"flex-end":"center"};
                    justify-content: ${"left"===x?"flex-start":"right"===x?"flex-end":"center"};
                    gap: ${w}px;
                    padding: 4px;
                    border-radius: 4px;
                    cursor: pointer;
                    user-select: none;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    --hover-background: ${n.hover_background_color||"var(--divider-color)"};
                  "
                    @click=${e=>this.handleClick(e,n,t)}
                    @dblclick=${e=>this.handleDoubleClick(e,n,t)}
                    @mousedown=${e=>this.handleMouseDown(e,n,t)}
                    @mouseup=${e=>this.handleMouseUp(e,n,t)}
                    @mouseleave=${e=>this.handleMouseLeave(e,n,t)}
                    @touchstart=${e=>this.handleTouchStart(e,n,t)}
                    @touchend=${e=>this.handleTouchEnd(e,n,t)}
                  >
                    ${"left"===f||"top"===f?i.qy`${k}${S}`:i.qy`${S}${k}`}
                  </div>`:i.qy`<div
                    class="info-entity-item position-${f}"
                    style="
                    display: flex;
                    flex-direction: ${"top"===f||"bottom"===f?"column":"row"};
                    align-items: ${"start"===y?"flex-start":"end"===y?"flex-end":"center"};
                    justify-content: ${"left"===x?"flex-start":"right"===x?"flex-end":"center"};
                    gap: ${w}px;
                    padding: 4px;
                    border-radius: 4px;
                  "
                  >
                    ${"left"===f||"top"===f?i.qy`${k}${S}`:i.qy`${S}${k}`}
                  </div>`}))}
            ${n.info_entities.length>3?i.qy`
                  <div class="more-entities">+${n.info_entities.length-3} more</div>
                `:""}
          </div>
        </div>
      </div>
    `}validate(e){const t=e,o=[...super.validate(e).errors];return t.info_entities&&0!==t.info_entities.length||o.push("At least one info entity is required"),t.info_entities.forEach(((e,t)=>{e.entity&&""!==e.entity.trim()||o.push(`Entity ${t+1}: Entity ID is required`)})),{valid:0===o.length,errors:o}}getStyles(){return"\n      .info-module-preview {\n        padding: 8px;\n        min-height: 40px;\n      }\n      \n      .info-entities {\n        width: 100%;\n      }\n      \n      .info-entity-item {\n        min-width: 0;\n        flex: 1;\n      }\n      \n      .entity-content {\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n        min-width: 0;\n        flex: 1;\n      }\n      \n      .entity-icon {\n        flex-shrink: 0;\n      }\n      \n      .entity-name {\n        font-size: 12px;\n        line-height: 1.2;\n      }\n      \n      .entity-value {\n        font-size: 14px;\n        font-weight: 500;\n        line-height: 1.2;\n      }\n      \n      .more-entities {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 8px;\n        color: var(--secondary-text-color);\n        font-size: 12px;\n        font-style: italic;\n      }\n      \n      .info-entities-section,\n      .layout-section {\n        margin-top: 16px;\n        padding-top: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n      \n      .info-entities-section:first-child {\n        margin-top: 0;\n        padding-top: 0;\n        border-top: none;\n      }\n      \n      .info-entities-section h4,\n      .layout-section h4 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-text-color);\n      }\n      \n      .entity-item {\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        padding: 12px;\n        margin-bottom: 12px;\n        background: var(--card-background-color);\n      }\n      \n      .entity-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 12px;\n        font-weight: 500;\n        font-size: 14px;\n      }\n      \n      .remove-entity-btn {\n        background: none;\n        border: none;\n        color: var(--error-color);\n        cursor: pointer;\n        padding: 4px;\n        border-radius: 4px;\n        font-size: 14px;\n      }\n      \n      .remove-entity-btn:disabled {\n        opacity: 0.3;\n        cursor: not-allowed;\n      }\n      \n      .add-entity-btn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        width: 100%;\n        padding: 12px;\n        border: 2px dashed var(--primary-color);\n        border-radius: 8px;\n        background: none;\n        color: var(--primary-color);\n        cursor: pointer;\n        font-size: 14px;\n        font-weight: 500;\n      }\n      \n      .add-entity-btn:hover {\n        background: var(--primary-color);\n        color: white;\n      }\n      \n      .entity-display-options {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 8px;\n        margin: 8px 0;\n      }\n      \n      /* Control button styles */\n      .control-btn {\n        padding: 8px 4px;\n        border: 1px solid var(--divider-color);\n        background: var(--card-background-color);\n        color: var(--primary-text-color);\n        border-radius: 4px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        user-select: none;\n        font-size: 10px;\n      }\n      \n      .control-btn:hover:not(.active) {\n        border-color: var(--primary-color) !important;\n        background: var(--primary-color) !important;\n        color: white !important;\n        opacity: 0.8;\n      }\n      \n      .control-btn.active {\n        border-color: var(--primary-color);\n        background: var(--primary-color);\n        color: white;\n      }\n      \n      .control-btn ha-icon {\n        font-size: 14px;\n      }\n      \n      .control-button-group {\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        border-radius: 4px;\n        overflow: hidden;\n      }\n      \n      .control-button-group .control-btn:not(:last-child) {\n        border-right: none;\n      }\n      \n      .control-button-group .control-btn:first-child {\n        border-radius: 4px 0 0 4px;\n      }\n      \n      .control-button-group .control-btn:last-child {\n        border-radius: 0 4px 4px 0;\n      }\n      \n      .control-button-group .control-btn:only-child {\n        border-radius: 4px;\n      }\n      \n      /* Position-specific layout styles */\n      .position-left {\n        flex-direction: row;\n      }\n      \n      .position-right {\n        flex-direction: row-reverse;\n      }\n      \n      .position-top {\n        flex-direction: column;\n      }\n      \n      .position-bottom {\n        flex-direction: column-reverse;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Clickable info entity styles */\n      .info-entity-clickable.hover-enabled:hover {\n        transform: scale(1.02);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n    "}hasActiveActions(e){const t=e.tap_action&&"default"!==e.tap_action.action&&"nothing"!==e.tap_action.action,o=e.hold_action&&"default"!==e.hold_action.action&&"nothing"!==e.hold_action.action,i=e.double_tap_action&&"default"!==e.double_tap_action.action&&"nothing"!==e.double_tap_action.action;return t||o||i}handleClick(e,t,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,o)}),300)}handleDoubleClick(e,t,o){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,o)}handleMouseDown(e,t,o){this.startHold(e,t,o)}handleMouseUp(e,t,o){this.endHold(e,t,o)}handleMouseLeave(e,t,o){this.endHold(e,t,o)}handleTouchStart(e,t,o){this.startHold(e,t,o)}handleTouchEnd(e,t,o){this.endHold(e,t,o)}startHold(e,t,o){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,o)}),500)}endHold(e,t,o){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTapAction(e,t,o){this.isHolding||t.tap_action&&"default"!==t.tap_action.action&&"nothing"!==t.tap_action.action&&n.K.handleAction(t.tap_action,o,e.target)}handleDoubleAction(e,t,o){t.double_tap_action&&"default"!==t.double_tap_action.action&&"nothing"!==t.double_tap_action.action&&n.K.handleAction(t.double_tap_action,o,e.target)}handleHoldAction(e,t,o){t.hold_action&&"default"!==t.hold_action.action&&"nothing"!==t.hold_action.action&&n.K.handleAction(t.hold_action,o,e.target)}_addEntity(e,t){const o={id:this.generateId("entity"),entity:"weather.forecast_home",name:"Temperature",icon:"mdi:thermometer",show_icon:!0,show_name:!0,show_state:!0,text_size:14,name_size:12,icon_size:26,text_bold:!1,text_italic:!1,text_uppercase:!1,text_strikethrough:!1,name_bold:!1,name_italic:!1,name_uppercase:!1,name_strikethrough:!1,icon_color:"var(--primary-color)",name_color:"var(--secondary-text-color)",text_color:"var(--primary-text-color)",state_color:"var(--primary-text-color)",click_action:"more-info",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:"",icon_position:"left",icon_alignment:"center",content_alignment:"start",overall_alignment:"center",icon_gap:8};t({info_entities:[...e.info_entities,o]})}_removeEntity(e,t,o){e.info_entities.length<=1||o({info_entities:e.info_entities.filter(((e,o)=>o!==t))})}_handleEntityChange(e,t,o,i,a){var n;const r={entity:o};if(o&&(null==i?void 0:i.states[o])){const e=(null===(n=i.states[o].attributes)||void 0===n?void 0:n.friendly_name)||o.split(".").pop()||"",t=l.s.getEntityIcon(o,i);r.name=e,t&&(r.icon=t)}this._updateEntity(e,t,r,a)}_updateEntity(e,t,o,i){if(!e.info_entities||0===e.info_entities.length){const t=this.createDefault().info_entities[0];return e.info_entities=[Object.assign(Object.assign({},t),o)],void i({info_entities:e.info_entities})}if(t>=e.info_entities.length){const o=this.createDefault().info_entities[0];for(;e.info_entities.length<=t;)e.info_entities.push(Object.assign({},o))}i({info_entities:e.info_entities.map(((e,i)=>i===t?Object.assign(Object.assign({},e),o):e))})}getBackgroundImageCSS(e,t){var o,i;if(!e.background_image_type||"none"===e.background_image_type)return"none";switch(e.background_image_type){case"upload":case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const a=t.states[e.background_image_entity];let n="";if((null===(o=a.attributes)||void 0===o?void 0:o.entity_picture)?n=a.attributes.entity_picture:(null===(i=a.attributes)||void 0===i?void 0:i.image)?n=a.attributes.image:a.state&&"string"==typeof a.state&&(a.state.startsWith("/")||a.state.startsWith("http"))&&(n=a.state),n)return n.startsWith("/local/")||n.startsWith("/media/")||n.startsWith("/"),`url("${n}")`}}return"none"}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_hashString(e){let t=0;for(let o=0;o<e.length;o+=1)t=(t<<5)-t+e.charCodeAt(o),t|=0;return Math.abs(t)}async _handleTemplateChange(e,t,o,i){if(e&&i)try{const a=await i.callApi("POST","template",{template:e});i.__uvc_template_strings||(i.__uvc_template_strings={});const n=this._hashString(e),r=`info_entity_${t.id?`${t.id}_${o}`:`${o}`}_${n}`;i.__uvc_template_strings[r]=a,"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}catch(e){}}}},662:(e,t,o)=>{o.d(t,{A:()=>n});var i=o(183),a=o(456);class n{static render(e,t,o,n){var r;if(!("tap_action"in e)||!("hold_action"in e)||!("double_tap_action"in e)){const t={};"tap_action"in e||(t.tap_action={action:"default"}),"hold_action"in e||(t.hold_action={action:"default"}),"double_tap_action"in e||(t.double_tap_action={action:"default"}),Object.keys(t).length&&o(t)}const s={tap_action:e.tap_action||{action:"default"},hold_action:e.hold_action||{action:"default"},double_tap_action:e.double_tap_action||{action:"default"}},l=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en",d=n||(0,a.kg)("editor.actions.title",l,"Actions Configuration");return i.qy`
      <div class="global-actions-tab">
        <style>
          .global-actions-tab {
            padding: 0px;
          }

          .actions-section {
            background: var(--secondary-background-color);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
          }

          .section-header {
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);
          }

          .section-header h4 {
            margin: 0;
            color: var(--primary-text-color);
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
          }

          .section-header p {
            margin: 6px 0 0 0;
            color: var(--secondary-text-color);
            font-size: 13px;
            line-height: 1.4;
          }

          .action-form {
            margin-bottom: 20px;
          }

          .action-description {
            color: var(--secondary-text-color);
            font-size: 13px;
            margin-bottom: 16px;
            line-height: 1.4;
            font-style: italic;
          }

          /* Allow native HA form styling to show through */
          .global-actions-tab ha-form {
            display: block;
            margin: 0;
            padding: 0;
          }

          /* Style native expansion panels if they appear */
          .global-actions-tab ha-expansion-panel {
            margin-bottom: 8px;
          }

          /* Style the action selectors */
          ha-form .mdc-text-field,
          ha-form .mdc-select,
          ha-form ha-selector {
            margin-top: 0 !important;
          }

          ha-form .mdc-text-field--outlined .mdc-notched-outline {
            border-radius: 6px;
          }

          /* Hide any blank list items generated by selector internals */
          .global-actions-tab ha-select ha-list-item:not([value]),
          .global-actions-tab ha-select ha-list-item[value=''],
          .global-actions-tab ha-select ha-list-item[aria-label=''],
          .global-actions-tab ha-select .mdc-deprecated-list-item:not([data-value]),
          .global-actions-tab ha-select .mdc-deprecated-list-item[data-value=''],
          .global-actions-tab ha-select .mdc-list-item:not([data-value]),
          .global-actions-tab ha-select .mdc-list-item[data-value=''] {
            display: none !important;
          }

          /* Hide unwanted action options */
          .global-actions-tab ha-form mwc-list-item[value='toggle'],
          .global-actions-tab
            ha-form
            mwc-list-item[graphic='icon']:has(ha-icon[icon='mdi:gesture-tap']),
          .global-actions-tab ha-form .mdc-deprecated-list-item[data-value='toggle'],
          .global-actions-tab ha-form .mdc-list-item[data-value='toggle'],
          .global-actions-tab ha-form option[value='toggle'] {
            display: none !important;
          }

          /* Hide "Default ()" option - target by text content */
          .global-actions-tab ha-form mwc-list-item:has-text('Default ()'),
          .global-actions-tab ha-form .mdc-deprecated-list-item:has-text('Default ()'),
          .global-actions-tab ha-form .mdc-list-item:has-text('Default ()'),
          .global-actions-tab ha-form option:has-text('Default ()') {
            display: none !important;
          }

          /* Alternative approach using CSS attribute selectors for text content */
          .global-actions-tab ha-form mwc-list-item[textContent*='Default ()'],
          .global-actions-tab ha-form .mdc-deprecated-list-item[textContent*='Default ()'],
          .global-actions-tab ha-form .mdc-list-item[textContent*='Default ()'] {
            display: none !important;
          }

          /* Style the ha-select dropdown */
          ha-select {
            width: 100%;
            display: block;
            --mdc-theme-surface: var(--card-background-color);
            --mdc-theme-primary: var(--primary-color);
            --mdc-select-fill-color: var(--input-fill-color, transparent);
            --mdc-select-outlined-idle-border-color: var(--input-idle-line-color);
            --mdc-select-outlined-hover-border-color: var(--input-hover-line-color);
            --mdc-select-dropdown-icon-color: var(--secondary-text-color);
            --mdc-select-label-ink-color: var(--secondary-text-color);
            --mdc-select-ink-color: var(--primary-text-color);
          }
        </style>

        <div class="actions-section">
          <div class="section-header">
            <h4>
              <ha-icon icon="mdi:gesture-tap"></ha-icon>
              ${d}
            </h4>
            <p>
              ${(0,a.kg)("editor.actions.description",l,"Configure how this module responds to user interactions. Uses Home Assistant's native action system for consistent behavior across your dashboard.")}
            </p>
          </div>

          ${this.renderActionConfig((0,a.kg)("editor.actions.tap_action",l,"Tap Action"),(0,a.kg)("editor.actions.tap_action_desc",l,"Action performed when tapping/clicking the module"),s.tap_action,t,(e=>o({tap_action:e})))}
          ${this.renderActionConfig((0,a.kg)("editor.actions.hold_action",l,"Hold Action"),(0,a.kg)("editor.actions.hold_action_desc",l,"Action performed when holding down on the module"),s.hold_action,t,(e=>o({hold_action:e})))}
          ${this.renderActionConfig((0,a.kg)("editor.actions.double_tap_action",l,"Double Tap Action"),(0,a.kg)("editor.actions.double_tap_action_desc",l,"Action performed when double-tapping the module"),s.double_tap_action,t,(e=>o({double_tap_action:e})))}
        </div>
      </div>
    `}static getClickableClass(e){return(null==e?void 0:e.tap_action)&&"nothing"!==e.tap_action.action||(null==e?void 0:e.hold_action)&&"nothing"!==e.hold_action.action||(null==e?void 0:e.double_tap_action)&&"nothing"!==e.double_tap_action.action?"graphs-module-clickable":""}static getClickableStyle(e){return!0===(null==e?void 0:e.enable_hover_effect)?"transition: all 0.2s ease; border-radius: 4px;":""}static getHoverStyles(){return"\n      .graphs-module-clickable.hover-enabled:hover {\n        transform: scale(1.02);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n    "}static renderActionConfig(e,t,o,a,n){const r="nothing"===(null==o?void 0:o.action)?Object.assign(Object.assign({},o),{action:"default"}):o;try{a.services}catch(e){}return i.qy`
      <div class="action-form">
        <div class="action-description">${t}</div>

        <div style="margin-bottom: 12px;">
          <div
            style="font-size: 16px; font-weight: 600; margin-bottom: 8px; color: var(--primary-text-color);"
          >
            ${e}
          </div>
          <ha-form
            .hass=${a}
            .data=${{action_config:r}}
            .schema=${[{name:"action_config",label:"",selector:{ui_action:{actions:["more-info","toggle","navigate","url","perform-action","assist"]}}}]}
            .computeLabel=${this.computeLabel}
            @value-changed=${e=>{var t,o;const i=null===(o=null===(t=e.detail)||void 0===t?void 0:t.value)||void 0===o?void 0:o.action_config;i&&n(i)}}
          ></ha-form>
        </div>

        ${"more-info"===(null==o?void 0:o.action)?i.qy`
              <div
                class="conditional-fields-group"
                style="margin-top: 16px; border-left: 4px solid var(--primary-color); background: rgba(var(--rgb-primary-color), 0.08); border-radius: 0 8px 8px 0; overflow: hidden;"
              >
                <div
                  class="conditional-fields-header"
                  style="background: rgba(var(--rgb-primary-color), 0.15); padding: 12px 16px; font-size: 14px; font-weight: 600; color: var(--primary-color); border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2); text-transform: uppercase; letter-spacing: 0.5px;"
                >
                  More Info Configuration
                </div>
                <div class="conditional-fields-content" style="padding: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    Entity
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                  >
                    Select which entity to show more information for
                  </div>
                  <ha-form
                    .hass=${a}
                    .data=${{entity:o.entity||""}}
                    .schema=${[{name:"entity",label:"Entity",selector:{entity:{}}}]}
                    .computeLabel=${this.computeLabel}
                    @value-changed=${e=>{var t,i;const a=null===(i=null===(t=e.detail)||void 0===t?void 0:t.value)||void 0===i?void 0:i.entity;n(Object.assign(Object.assign({},o),{entity:a}))}}
                  ></ha-form>
                </div>
              </div>
            `:""}
      </div>
    `}}n.computeLabel=e=>{var t;return Object.prototype.hasOwnProperty.call(e,"label")&&null!==(t=e.label)&&void 0!==t?t:""}},679:(e,t,o)=>{o.d(t,{Q:()=>T});var i=o(183),a=o(30),n=o(914),r=o(662),s=o(371),l=o(796),d=(o(768),o(276)),c=o(247),p=o(201);const{I:u}=c.ge,h=()=>document.createComment(""),m=(e,t,o)=>{const i=e._$AA.parentNode,a=void 0===t?e._$AB:t._$AA;if(void 0===o){const t=i.insertBefore(h(),a),n=i.insertBefore(h(),a);o=new u(t,n,e,e.options)}else{const t=o._$AB.nextSibling,n=o._$AM,r=n!==e;if(r){let t;o._$AQ?.(e),o._$AM=e,void 0!==o._$AP&&(t=e._$AU)!==n._$AU&&o._$AP(t)}if(t!==a||r){let e=o._$AA;for(;e!==t;){const t=e.nextSibling;i.insertBefore(e,a),e=t}}}return o},g=(e,t,o=e)=>(e._$AI(t,o),e),_={},b=e=>{e._$AP?.(!1,!0);let t=e._$AA;const o=e._$AB.nextSibling;for(;t!==o;){const e=t.nextSibling;t.remove(),t=e}},v=(e,t,o)=>{const i=new Map;for(let a=t;a<=o;a++)i.set(e[a],a);return i},f=(0,p.u$)(class extends p.WL{constructor(e){if(super(e),e.type!==p.OA.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,o){let i;void 0===o?o=t:void 0!==t&&(i=t);const a=[],n=[];let r=0;for(const t of e)a[r]=i?i(t,r):r,n[r]=o(t,r),r++;return{values:n,keys:a}}render(e,t,o){return this.dt(e,t,o).values}update(e,[t,o,i]){const a=e._$AH,{values:n,keys:r}=this.dt(t,o,i);if(!Array.isArray(a))return this.ut=r,n;const s=this.ut??=[],l=[];let d,p,u=0,h=a.length-1,f=0,y=n.length-1;for(;u<=h&&f<=y;)if(null===a[u])u++;else if(null===a[h])h--;else if(s[u]===r[f])l[f]=g(a[u],n[f]),u++,f++;else if(s[h]===r[y])l[y]=g(a[h],n[y]),h--,y--;else if(s[u]===r[y])l[y]=g(a[u],n[y]),m(e,l[y+1],a[u]),u++,y--;else if(s[h]===r[f])l[f]=g(a[h],n[f]),m(e,a[u],a[h]),h--,f++;else if(void 0===d&&(d=v(r,f,y),p=v(s,u,h)),d.has(s[u]))if(d.has(s[h])){const t=p.get(r[f]),o=void 0!==t?a[t]:null;if(null===o){const t=m(e,a[u]);g(t,n[f]),l[f]=t}else l[f]=g(o,n[f]),m(e,a[u],o),a[t]=null;f++}else b(a[h]),h--;else b(a[u]),u++;for(;f<=y;){const t=m(e,l[y+1]);g(t,n[f]),l[f++]=t}for(;u<=h;){const e=a[u++];null!==e&&b(e)}return this.ut=r,((e,t=_)=>{e._$AH=t})(e,l),c.c0}});var y=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};function x(e,t,o){const i=w(e),a=w(t);return i&&a?(n=Math.round(i.r+(a.r-i.r)*o),r=Math.round(i.g+(a.g-i.g)*o),s=Math.round(i.b+(a.b-i.b)*o),`#${((1<<24)+(n<<16)+(r<<8)+s).toString(16).slice(1)}`):e;var n,r,s}function w(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}let k=4,$=class extends i.WF{constructor(){super(...arguments),this.stops=[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],this.barSize="regular",this.barRadius="round",this.barStyle="flat",this._draggedIndex=null,this._colorPickerOpen=!1,this._colorPickerStopId=null,this._colorPickerCurrentColor="#000000"}render(){const e=[...this.stops].sort(((e,t)=>e.position-t.position));return i.qy`
      <!-- Action Buttons -->
      <div class="buttons-row">
        <button class="add-button" @click=${this._addStop}>
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
          </svg>
          Add Stop
        </button>
        <button class="reset-button" @click=${this._resetStops}>
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
            />
          </svg>
          Reset
        </button>
      </div>

      <!-- Gradient Stops List -->
      <div class="stops-list ${null!==this._draggedIndex?"drag-active":""}">
        ${f(e,(e=>e.id),((t,o)=>this._renderStopItem(t,o,e.length)))}
      </div>

      <!-- Color Picker Popup -->
      ${this._colorPickerOpen?i.qy`
            <div class="color-picker-overlay" @click=${this._closeColorPicker}>
              <div class="color-picker-popup" @click=${e=>e.stopPropagation()}>
                <div class="color-picker-header">
                  <h3>Choose Color</h3>
                  <button class="close-btn" @click=${this._closeColorPicker}>×</button>
                </div>
                <ultra-color-picker
                  .value=${this._colorPickerCurrentColor}
                  .defaultValue=${this._colorPickerCurrentColor}
                  @value-changed=${this._handleColorPickerChange}
                ></ultra-color-picker>
              </div>
            </div>
          `:""}
    `}_renderStopItem(e,t,o){const a=0===e.position||100===e.position,n=this._draggedIndex===t,r=o>2&&!a;return i.qy`
      <div
        class="stop-item ${a?"boundary":""} ${n?"dragging":""}"
        draggable="true"
        @dragstart=${e=>this._handleDragStart(e,t)}
        @dragend=${this._handleDragEnd}
        @dragover=${this._handleDragOver}
        @drop=${e=>this._handleDrop(e,t)}
      >
        <!-- Drag Handle -->
        <div class="drag-handle">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M9 3h2v2H9V3zm4 0h2v2h-2V3zM9 7h2v2H9V7zm4 0h2v2h-2V7zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2z"
            />
          </svg>
        </div>

        <!-- Color Preview & Picker -->
        <div
          class="color-preview color-circle"
          style="background-color: ${e.color}; cursor: pointer;"
          @click=${()=>this._openColorPicker(e.id,e.color)}
        ></div>

        <!-- Percentage Input -->
        <input
          type="number"
          class="percentage-input"
          .value=${e.position.toString()}
          min="0"
          max="100"
          @input=${t=>this._handlePositionChange(e.id,parseFloat(t.target.value)||0)}
          @blur=${this._validateAndSortStops}
        />

        <!-- Stop Info -->
        <div class="stop-info">
          <span>${e.position}%</span>
        </div>

        <!-- Delete Button -->
        <button
          class="delete-button"
          ?disabled=${!r}
          @click=${()=>this._deleteStop(e.id)}
          title=${r?"Delete stop":"Cannot delete boundary stops"}
        >
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"
            />
          </svg>
        </button>
      </div>
    `}_addStop(){const e=function(e){if(!e||e.length<2)return{id:"stop-"+k++,position:50,color:"#808080"};const t=[...e].sort(((e,t)=>e.position-t.position));let o=0,i=50,a="#808080";for(let e=0;e<t.length-1;e++){const n=t[e+1].position-t[e].position;n>o&&(o=n,i=t[e].position+n/2,a=x(t[e].color,t[e+1].color,.5))}return{id:"stop-"+k++,position:Math.round(i),color:a}}(this.stops);this.stops=[...this.stops,e],this._notifyChange()}_resetStops(){this.stops=[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],k=4,this._notifyChange(),this._dispatchResetEvent()}_deleteStop(e){if(this.stops.length<=2)return;const t=this.stops.find((t=>t.id===e));t&&0!==t.position&&100!==t.position&&(this.stops=this.stops.filter((t=>t.id!==e)),this._notifyChange())}_handleColorChange(e,t){this.stops=this.stops.map((o=>o.id===e?Object.assign(Object.assign({},o),{color:t}):o)),this._notifyChange()}_openColorPicker(e,t){this._colorPickerStopId=e,this._colorPickerCurrentColor=t,this._colorPickerOpen=!0}_closeColorPicker(){this._colorPickerOpen=!1,this._colorPickerStopId=null}_handleColorPickerChange(e){this._colorPickerStopId&&(this._handleColorChange(this._colorPickerStopId,e.detail.value),this._colorPickerCurrentColor=e.detail.value)}_handlePositionChange(e,t){t=Math.max(0,Math.min(100,t)),this.stops=this.stops.map((o=>o.id===e?Object.assign(Object.assign({},o),{position:t}):o)),this.requestUpdate()}_validateAndSortStops(){this.stops=this.stops.map((e=>0===e.position||"1"===e.id&&e.position<50?Object.assign(Object.assign({},e),{position:0}):100===e.position||"3"===e.id&&e.position>50?Object.assign(Object.assign({},e),{position:100}):e)),this._notifyChange()}_notifyChange(){this.dispatchEvent(new CustomEvent("gradient-changed",{detail:{stops:this.stops},bubbles:!0,composed:!0}))}_dispatchResetEvent(){this.dispatchEvent(new CustomEvent("gradient-stop-reset",{bubbles:!0,composed:!0}))}_handleDragStart(e,t){this._draggedIndex=t,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",t.toString()))}_handleDragEnd(){this._draggedIndex=null}_handleDragOver(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}_handleDrop(e,t){if(e.preventDefault(),null===this._draggedIndex||this._draggedIndex===t)return;const o=[...this.stops].sort(((e,t)=>e.position-t.position)),i=o[this._draggedIndex],a=o[t];this.stops=this.stops.map((e=>e.id===i.id?Object.assign(Object.assign({},e),{position:a.position}):e.id===a.id?Object.assign(Object.assign({},e),{position:i.position}):e)),this._draggedIndex=null,this._notifyChange()}};$.styles=i.AH`
    :host {
      display: block;
      width: 100%;
      font-family: var(--mdc-typography-body1-font-family, Roboto, sans-serif);
    }

    .gradient-preview {
      width: 100%;
      height: 16px;
      border-radius: 8px;
      border: 1px solid var(--divider-color);
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
      background-color: var(--card-background-color, #1c1c1c);
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .gradient-preview-fill {
      width: 100%;
      height: 100%;
      border-radius: inherit;
      position: relative;
    }

    /* Bar size variants to match actual card bars */
    .gradient-preview.bar-size-thin {
      height: 8px;
      border-radius: 4px;
    }

    .gradient-preview.bar-size-regular {
      height: 16px;
      border-radius: 8px;
    }

    .gradient-preview.bar-size-thick {
      height: 24px;
      border-radius: 12px;
    }

    .gradient-preview.bar-size-thiccc {
      height: 32px;
      border-radius: 16px;
    }

    /* Bar radius variants to match actual card bars */
    .gradient-preview.bar-radius-square {
      border-radius: 0;
    }

    .gradient-preview.bar-radius-round {
      /* Uses default border-radius from size classes */
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-thin {
      border-radius: 2px;
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-regular {
      border-radius: 4px;
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-thick {
      border-radius: 6px;
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-thiccc {
      border-radius: 8px;
    }

    .buttons-row {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }

    .add-button,
    .reset-button {
      flex: 1;
      padding: 12px 16px;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s ease;
    }

    .add-button {
      background: var(--primary-color);
      color: var(--text-primary-color);
    }

    .add-button:hover {
      background: var(--primary-color);
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .reset-button {
      background: var(--secondary-color, #666);
      color: white;
    }

    .reset-button:hover {
      background: var(--secondary-color, #666);
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .stops-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .stop-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--card-background-color, #1c1c1c);
      border: 1px solid var(--divider-color);
      border-radius: 8px;
      transition: all 0.2s ease;
    }

    .stop-item:hover {
      border-color: var(--primary-color);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .stop-item.dragging {
      opacity: 0.7;
      transform: scale(1.02);
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .drag-handle {
      width: 20px;
      height: 20px;
      cursor: grab;
      color: var(--secondary-text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .drag-handle:hover {
      color: var(--primary-text-color);
    }

    .drag-handle:active {
      cursor: grabbing;
    }

    .color-preview {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid var(--divider-color);
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .color-preview:hover {
      border-color: var(--primary-color);
      transform: scale(1.1);
    }

    .percentage-input {
      width: 80px;
      padding: 8px 12px;
      border: 1px solid var(--divider-color);
      border-radius: 6px;
      background: var(--secondary-background-color);
      color: var(--primary-text-color);
      text-align: center;
      font-weight: 500;
    }

    .percentage-input:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
    }

    .stop-info {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--secondary-text-color);
      font-size: 14px;
    }

    .delete-button {
      width: 32px;
      height: 32px;
      border: none;
      background: transparent;
      cursor: pointer;
      color: var(--secondary-text-color);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .delete-button:hover {
      background: rgba(var(--rgb-error-color, 244, 67, 54), 0.1);
      color: var(--error-color, #f44336);
    }

    .delete-button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .stop-item.boundary .delete-button {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .icon {
      width: 18px;
      height: 18px;
    }

    /* Drag and drop styling */
    .stops-list.drag-active .stop-item:not(.dragging) {
      transition: transform 0.2s ease;
    }

    /* Color Circle Styling */
    .color-circle {
      border: 3px solid var(--divider-color);
      transition: all 0.2s ease;
    }

    .color-circle:hover {
      border-color: var(--primary-color);
      transform: scale(1.15);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    /* Color Picker Popup */
    .color-picker-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(2px);
    }

    .color-picker-popup {
      background: var(--card-background-color);
      border-radius: 12px;
      padding: 24px;
      max-width: 400px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid var(--divider-color);
    }

    .color-picker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--divider-color);
    }

    .color-picker-header h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-text-color);
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--secondary-text-color);
      padding: 4px;
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .close-btn:hover {
      background: var(--divider-color);
      color: var(--primary-text-color);
    }
  `,y([(0,d.MZ)({type:Array})],$.prototype,"stops",void 0),y([(0,d.MZ)({type:String})],$.prototype,"barSize",void 0),y([(0,d.MZ)({type:String})],$.prototype,"barRadius",void 0),y([(0,d.MZ)({type:String})],$.prototype,"barStyle",void 0),y([(0,d.wk)()],$.prototype,"_draggedIndex",void 0),y([(0,d.wk)()],$.prototype,"_colorPickerOpen",void 0),y([(0,d.wk)()],$.prototype,"_colorPickerStopId",void 0),y([(0,d.wk)()],$.prototype,"_colorPickerCurrentColor",void 0),$=y([(0,d.EM)("uc-gradient-editor")],$);var C=o(57),S=o(345),A=o(456);class T extends a.m{constructor(){super(...arguments),this.metadata={type:"bar",title:"Bars",description:"Progress bars for values",author:"WJD Designs",version:"1.0.0",icon:"mdi:chart-bar",category:"data",tags:["bar","progress","chart","value","sensor"]}}createDefault(e,t){const o=this.findSuitableBatterySensor(t);return{id:e||this.generateId("bar"),type:"bar",entity:o||"",percentage_type:"entity",percentage_entity:"",percentage_attribute_entity:"",percentage_attribute_name:"",percentage_current_entity:"",percentage_total_entity:"",percentage_template:"",height:20,bar_size:"medium",bar_radius:"round",bar_style:"flat",bar_width:100,bar_alignment:"center",border_radius:10,label_alignment:"space-between",show_percentage:!0,percentage_text_size:14,percentage_text_alignment:"center",show_value:!0,value_position:"inside",left_title:"",left_entity:"",left_condition_type:"none",left_condition_entity:"",left_condition_state:"",left_template_mode:!1,left_template:"",left_title_size:14,left_value_size:14,left_title_color:"",left_value_color:"",left_enabled:!1,right_title:"",right_entity:"",right_enabled:!1,right_condition_type:"none",right_condition_entity:"",right_condition_state:"",right_template_mode:!1,right_template:"",right_title_size:14,right_value_size:14,right_title_color:"",right_value_color:"",bar_color:"",bar_background_color:"",bar_border_color:"var(--divider-color)",percentage_text_color:"",use_gradient:!1,gradient_display_mode:"full",gradient_stops:[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],limit_entity:"",limit_color:"",animation:!0,template_mode:!1,template:"",bar_animation_enabled:!1,bar_animation_entity:"",bar_animation_trigger_type:"state",bar_animation_attribute:"",bar_animation_value:"",bar_animation_type:"none",bar_animation_override_entity:"",bar_animation_override_trigger_type:"state",bar_animation_override_attribute:"",bar_animation_override_value:"",bar_animation_override_type:"none",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},enable_hover_effect:!0,hover_background_color:"var(--divider-color)"}}renderOtherTab(e,t,o,i){return s.X.render(e,t,(e=>i(e)))}findSuitableBatterySensor(e){if(!e||!e.states)return"";const t=["battery_level","battery","charge","power_level","fuel_level","energy"],o=["battery","energy","power"],i=["sensor","binary_sensor"],a=[];return Object.keys(e.states).forEach((n=>{const r=e.states[n],s=n.split(".")[0];if(!i.includes(s))return;if("binary_sensor"===s)return;const l=r.attributes||{},d=l.friendly_name||n,c=l.device_class,p=l.unit_of_measurement,u=parseFloat(r.state);if(isNaN(u)||u<0||u>100)return;if("unavailable"===r.state||"unknown"===r.state)return;let h=0;o.includes(c)&&(h+=100),"%"===p&&(h+=80),t.forEach((e=>{n.toLowerCase().includes(e)&&(h+=50)})),t.forEach((e=>{d.toLowerCase().includes(e)&&(h+=40)})),n.includes("battery")&&"%"===p&&(h+=60),(n.includes("phone")||n.includes("mobile")||n.includes("device"))&&(n.includes("battery")||"battery"===c)&&(h+=30),h>0&&a.push({entity:n,score:h,friendlyName:d})})),a.length>0?(a.sort(((e,t)=>t.score-e.score)),a[0].entity):""}renderGeneralTab(e,t,o,a){var r,s,l,d,c,p;const u=e,h=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Bar Settings -->
        ${this.renderSettingsSection((0,A.kg)("editor.bar.bar_settings.title",h,"Bar Settings"),(0,A.kg)("editor.bar.bar_settings.desc",h,"Configure how the bar percentage is calculated and displayed."),[])}
        <div class="field-group percentage-type-group" style="margin-top: -16px; margin-bottom: 16px;">
          <ha-form
            .hass=${t}
            .data=${{percentage_type:u.percentage_type||"entity"}}
            .schema=${[this.selectField("percentage_type",[{value:"entity",label:(0,A.kg)("editor.bar.perc_type.entity",h,"Entity (0-100)")},{value:"attribute",label:(0,A.kg)("editor.bar.perc_type.attribute",h,"Entity Attribute")},{value:"difference",label:(0,A.kg)("editor.bar.perc_type.difference",h,"Difference")},{value:"template",label:(0,A.kg)("editor.bar.perc_type.template",h,"Template")}])]}
            .computeLabel=${()=>""}
            .computeDescription=${()=>""}
            @value-changed=${e=>a(e.detail.value)}
          ></ha-form>
        </div>

          <!-- Entity Attribute Fields -->
          ${"attribute"===u.percentage_type?this.renderConditionalFieldsGroup((0,A.kg)("editor.bar.attr_config.title",h,"Entity Attribute Configuration"),i.qy`
                    ${this.renderSettingsSection((0,A.kg)("editor.bar.attr_config.title",h,"Entity Attribute Configuration"),(0,A.kg)("editor.bar.attr_config.desc",h,"Configure entity attribute settings"),[{title:(0,A.kg)("editor.bar.attr_config.attribute_entity",h,"Attribute Entity"),description:(0,A.kg)("editor.bar.attr_config.attribute_entity_desc",h,"Select the entity that contains the attribute with the percentage value"),hass:t,data:{percentage_attribute_entity:u.percentage_attribute_entity||""},schema:[this.entityField("percentage_attribute_entity")],onChange:e=>a({percentage_attribute_entity:e.detail.value.percentage_attribute_entity})},{title:(0,A.kg)("editor.bar.attr_config.attribute_name",h,"Attribute Name"),description:(0,A.kg)("editor.bar.attr_config.attribute_name_desc",h,'Enter the name of the attribute that contains the percentage value (e.g., "battery_level")'),hass:t,data:{percentage_attribute_name:u.percentage_attribute_name||""},schema:[this.textField("percentage_attribute_name")],onChange:e=>a({percentage_attribute_name:e.detail.value.percentage_attribute_name})}])}
                  `):""}

          <!-- Difference Fields -->
          ${"difference"===u.percentage_type?this.renderConditionalFieldsGroup((0,A.kg)("editor.bar.diff_config.title",h,"Difference Calculation Configuration"),i.qy`
                    ${this.renderSettingsSection((0,A.kg)("editor.bar.diff_config.title",h,"Difference Calculation Configuration"),(0,A.kg)("editor.bar.diff_config.desc",h,"Configure difference calculation settings"),[{title:(0,A.kg)("editor.bar.diff_config.current_entity",h,"Current Value Entity"),description:(0,A.kg)("editor.bar.diff_config.current_entity_desc",h,"Entity representing the current/used amount (e.g., fuel used, battery consumed)"),hass:t,data:{percentage_current_entity:u.percentage_current_entity||""},schema:[this.entityField("percentage_current_entity")],onChange:e=>a({percentage_current_entity:e.detail.value.percentage_current_entity})},{title:(0,A.kg)("editor.bar.diff_config.total_entity",h,"Total Value Entity"),description:(0,A.kg)("editor.bar.diff_config.total_entity_desc",h,"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)"),hass:t,data:{percentage_total_entity:u.percentage_total_entity||""},schema:[this.entityField("percentage_total_entity")],onChange:e=>a({percentage_total_entity:e.detail.value.percentage_total_entity})}])}
                  `):""}

          <!-- Template Field -->
          ${"template"===u.percentage_type?this.renderConditionalFieldsGroup((0,A.kg)("editor.bar.template_config.title",h,"Template Configuration"),i.qy`
                    ${this.renderSettingsSection((0,A.kg)("editor.bar.template_config.title",h,"Template Configuration"),(0,A.kg)("editor.bar.template_config.desc",h,"Configure template settings"),[{title:(0,A.kg)("editor.bar.template_config.percentage_template",h,"Percentage Template"),description:(0,A.kg)("editor.bar.template_config.percentage_template_desc",h,"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states('sensor.battery_level') | float) * 100 }}"),hass:t,data:{percentage_template:u.percentage_template||""},schema:[this.textField("percentage_template",!0)],onChange:e=>a({percentage_template:e.detail.value.percentage_template})}])}
                  `):""}

          <!-- Bar Percentage Entity -->
          <div style="margin-top: 24px;">
            ${n.Q.renderField((0,A.kg)("editor.bar.entity.title",h,"Bar Percentage Entity"),u.entity?(0,A.kg)("editor.bar.entity.desc_present",h,"The entity that provides the percentage value for the bar."):(0,A.kg)("editor.bar.entity.desc_empty",h,"Select an entity that provides a percentage value (0-100). Battery sensors are ideal for bars."),t,{entity:u.entity||""},[n.Q.createSchemaItem("entity",{entity:{filter:[{domain:"sensor"},{domain:"input_number"}]}})],(e=>a({entity:e.detail.value.entity})))}
            ${u.entity?"":i.qy`
                    <div
                      style="color: var(--warning-color); font-size: 12px; margin-top: 4px; font-style: italic;"
                    >
                      <ha-icon
                        icon="mdi:information-outline"
                        style="font-size: 14px; margin-right: 4px;"
                      ></ha-icon>
                      ${(0,A.kg)("editor.bar.entity.no_entity_warning",h,"No entity selected - Please choose a sensor with values between 0-100")}
                    </div>
                  `}
          </div>

          <!-- Limit Value Entity -->
          <div style="margin-top: 24px;">
            ${n.Q.renderField((0,A.kg)("editor.bar.limit_entity.title",h,"Limit Value Entity (optional)"),(0,A.kg)("editor.bar.limit_entity.desc",h,"Optional: Add a vertical indicator line on the bar (e.g. charge limit for EV battery)."),t,{limit_entity:u.limit_entity||""},[n.Q.createSchemaItem("limit_entity",{entity:{}})],(e=>a({limit_entity:e.detail.value.limit_entity})))}
          </div>
        </div>

        <!-- Bar Appearance Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,A.kg)("editor.bar.appearance.title",h,"Bar Appearance")}
          </div>

          <!-- Bar Height -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title">${(0,A.kg)("editor.bar.appearance.height",h,"Bar Height")}</div>
            <div class="field-description">${(0,A.kg)("editor.bar.appearance.height_desc",h,"Adjust the thickness of the progress bar in pixels.")}</div>
            <style>
              .number-range-control {
                display: flex;
                gap: 8px;
                align-items: center;
              }
              .range-slider {
                flex: 0 0 65%;
              }
            </style>
            <div class="number-range-control">
              <input
                type="range"
                class="range-slider"
                min="8"
                max="60"
                step="2"
                .value="${null!==(s=u.height)&&void 0!==s?s:20}"
                @input=${e=>{const t=e.target,o=parseInt(t.value);a({height:o})}}
              />
              <input
                type="number"
                class="range-input"
                min="8"
                max="60"
                step="2"
                .value="${null!==(l=u.height)&&void 0!==l?l:20}"
                @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({height:o})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||20,i="ArrowUp"===e.key?2:-2,n=Math.max(8,Math.min(60,o+i));a({height:n})}}}
              />
              <button
                class="range-reset-btn"
                @click=${()=>a({height:20})}
                title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","20px")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>

          <!-- Border Radius -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title">${(0,A.kg)("editor.bar.appearance.border_radius",h,"Border Radius")}</div>
            <div class="field-description">${(0,A.kg)("editor.bar.appearance.border_radius_desc",h,"Control the rounded corners of the bar.")}</div>
            <div class="number-range-control">
              <input
                type="range"
                class="range-slider"
                min="0"
                max="50"
                step="1"
                .value="${null!==(d=u.border_radius)&&void 0!==d?d:10}"
                @input=${e=>{const t=e.target,o=parseInt(t.value);a({border_radius:o})}}
              />
              <input
                type="number"
                class="range-input"
                min="0"
                max="50"
                step="1"
                .value="${null!==(c=u.border_radius)&&void 0!==c?c:10}"
                @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({border_radius:o})}}
                @keydown=${e=>{var t;if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const o=e.target,i=null!==(t=parseInt(o.value))&&void 0!==t?t:10,n="ArrowUp"===e.key?1:-1,r=Math.max(0,Math.min(50,i+n));a({border_radius:r})}}}
              />
              <button
                class="range-reset-btn"
                @click=${()=>a({border_radius:10})}
                title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","10")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>

          <!-- Bar Style -->
          <div class="field-group" style="margin-bottom: 16px;">
            ${n.Q.renderField((0,A.kg)("editor.bar.appearance.style",h,"Bar Style"),(0,A.kg)("editor.bar.appearance.style_desc",h,"Choose the visual style of the progress bar."),t,{bar_style:u.bar_style||"flat"},[n.Q.createSchemaItem("bar_style",{select:{options:[{value:"flat",label:(0,A.kg)("editor.bar.appearance.style_flat",h,"Flat (Default)")},{value:"glossy",label:(0,A.kg)("editor.bar.appearance.style_glossy",h,"Glossy")},{value:"embossed",label:(0,A.kg)("editor.bar.appearance.style_embossed",h,"Embossed")},{value:"inset",label:(0,A.kg)("editor.bar.appearance.style_inset",h,"Inset")},{value:"gradient-overlay",label:(0,A.kg)("editor.bar.appearance.style_gradient",h,"Gradient Overlay")},{value:"neon-glow",label:(0,A.kg)("editor.bar.appearance.style_neon",h,"Neon Glow")},{value:"outline",label:(0,A.kg)("editor.bar.appearance.style_outline",h,"Outline")},{value:"glass",label:(0,A.kg)("editor.bar.appearance.style_glass",h,"Glass")},{value:"metallic",label:(0,A.kg)("editor.bar.appearance.style_metallic",h,"Metallic")},{value:"neumorphic",label:(0,A.kg)("editor.bar.appearance.style_neumorphic",h,"Neumorphic")},{value:"dashed",label:(0,A.kg)("editor.bar.appearance.style_dashed",h,"Dashed")},{value:"dots",label:(0,A.kg)("editor.bar.appearance.style_dots",h,"Dots")}],mode:"dropdown"}})],(e=>a({bar_style:e.detail.value.bar_style})))}
          </div>

          <!-- Bar Width -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title">${(0,A.kg)("editor.bar.appearance.width",h,"Bar Width")}</div>
            <div class="field-description">
              ${(0,A.kg)("editor.bar.appearance.width_desc",h,"Set the width of the bar as a percentage of the container.")}
            </div>
            <div class="number-range-control">
              <input
                type="range"
                class="range-slider"
                min="10"
                max="100"
                step="5"
                .value="${u.bar_width||100}"
                @input=${e=>{const t=e.target,o=parseInt(t.value);a({bar_width:o})}}
              />
              <input
                type="number"
                class="range-input"
                min="10"
                max="100"
                step="5"
                .value="${u.bar_width||100}"
                @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({bar_width:o})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||100,i="ArrowUp"===e.key?5:-5,n=Math.max(10,Math.min(100,o+i));a({bar_width:n})}}}
              />
              <button
                class="range-reset-btn"
                @click=${()=>a({bar_width:100})}
                title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","100")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>

          <!-- Bar Alignment with Icons -->
          ${(u.bar_width||100)<100?i.qy`
                  <div class="field-group" style="margin-bottom: 16px;">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important;"
                    >
                      ${(0,A.kg)("editor.bar.appearance.alignment",h,"Bar Alignment")}
                    </div>
                    <div
                      class="field-description"
                      style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                    >
                      ${(0,A.kg)("editor.bar.appearance.alignment_desc",h,"Choose how to align the bar when it's less than 100% width.")}
                    </div>
                    <div
                      style="display: flex; gap: 8px; justify-content: flex-start; flex-wrap: wrap;"
                    >
                      <button
                        type="button"
                        style="padding: 8px 12px; border: 2px solid ${"left"===(u.bar_alignment||"center")?"var(--primary-color)":"var(--divider-color)"}; background: ${"left"===(u.bar_alignment||"center")?"var(--primary-color)":"transparent"}; color: ${"left"===(u.bar_alignment||"center")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                        @click=${()=>a({bar_alignment:"left"})}
                      >
                        <ha-icon
                          icon="mdi:format-align-left"
                          style="font-size: 16px; flex-shrink: 0;"
                        ></ha-icon>
                        <span
                          style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >${(0,A.kg)("editor.common.left",h,"Left")}</span
                        >
                      </button>
                      <button
                        type="button"
                        style="padding: 8px 12px; border: 2px solid ${"center"===(u.bar_alignment||"center")?"var(--primary-color)":"var(--divider-color)"}; background: ${"center"===(u.bar_alignment||"center")?"var(--primary-color)":"transparent"}; color: ${"center"===(u.bar_alignment||"center")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                        @click=${()=>a({bar_alignment:"center"})}
                      >
                        <ha-icon
                          icon="mdi:format-align-center"
                          style="font-size: 16px; flex-shrink: 0;"
                        ></ha-icon>
                        <span
                          style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >${(0,A.kg)("editor.common.center",h,"Center")}</span
                        >
                      </button>
                      <button
                        type="button"
                        style="padding: 8px 12px; border: 2px solid ${"right"===(u.bar_alignment||"center")?"var(--primary-color)":"var(--divider-color)"}; background: ${"right"===(u.bar_alignment||"center")?"var(--primary-color)":"transparent"}; color: ${"right"===(u.bar_alignment||"center")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                        @click=${()=>a({bar_alignment:"right"})}
                      >
                        <ha-icon
                          icon="mdi:format-align-right"
                          style="font-size: 16px; flex-shrink: 0;"
                        ></ha-icon>
                        <span
                          style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >${(0,A.kg)("editor.common.right",h,"Right")}</span
                        >
                      </button>
                    </div>
                  </div>
                `:""}

          <!-- Label Alignment -->
          ${u.left_enabled||u.right_enabled?i.qy`
                  <div class="field-group">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important;"
                    >
                      ${(0,A.kg)("editor.bar.labels.alignment",h,"Label Alignment")}
                    </div>
                    <div
                      class="field-description"
                      style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                    >
                      ${(0,A.kg)("editor.bar.labels.alignment_desc",h,"Control how the left and right side labels are positioned.")}
                    </div>
                    <ha-form
                      .hass=${t}
                      .data=${{label_alignment:u.label_alignment||"space-between"}}
                      .schema=${[{name:"label_alignment",selector:{select:{options:[{value:"left",label:(0,A.kg)("editor.common.left",h,"Left")},{value:"center",label:(0,A.kg)("editor.common.center",h,"Center")},{value:"right",label:(0,A.kg)("editor.common.right",h,"Right")},{value:"space-between",label:(0,A.kg)("editor.common.space_between",h,"Space Between")}],mode:"dropdown"}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>a({label_alignment:e.detail.value.label_alignment})}
                    ></ha-form>
                  </div>
                `:""}
        </div>

        <!-- Percentage Text Display Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;">
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px; margin: 0;"
            >
              ${(0,A.kg)("editor.bar.percentage.title",h,"Percentage Text Display")}
            </div>
            <ha-switch
              .checked=${!1!==u.show_percentage}
              @change=${e=>a({show_percentage:e.target.checked})}
            ></ha-switch>
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 16px;"
          >
            ${(0,A.kg)("editor.bar.percentage.desc",h,"Control the visibility and appearance of percentage values shown directly on the bar. These numbers provide a clear visual indicator of the current level.")}
          </div>

          

          ${!1!==u.show_percentage?i.qy`
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,A.kg)("editor.bar.percentage.text_size",h,"Text Size")}
                    </div>
                    <div class="field-description">
                      ${(0,A.kg)("editor.bar.percentage.text_size_desc",h,"Adjust the size of the percentage text displayed on the bar.")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.percentage_text_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);a({percentage_text_size:o})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.percentage_text_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({percentage_text_size:o})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||14,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(32,o+i));a({percentage_text_size:n})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>a({percentage_text_size:14})}
                        title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                  <div class="field-group" style="margin-bottom: 16px;">
                    <div class="field-title">
                      ${(0,A.kg)("editor.bar.percentage.text_alignment",h,"Percentage Text Alignment")}
                    </div>
                    <ha-form
                      .hass=${t}
                      .data=${{percentage_text_alignment:u.percentage_text_alignment||"center"}}
                      .schema=${[{name:"percentage_text_alignment",selector:{select:{options:[{value:"left",label:(0,A.kg)("editor.common.left",h,"Left")},{value:"center",label:(0,A.kg)("editor.common.center",h,"Center")},{value:"right",label:(0,A.kg)("editor.common.right",h,"Right")}],mode:"dropdown"}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>a({percentage_text_alignment:e.detail.value.percentage_text_alignment})}
                    ></ha-form>
                  </div>
                `:""}
        </div>

        <!-- Left Side Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
          >
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px;"
            >
              ${(0,A.kg)("editor.bar.left.title",h,"Left Side")}
            </div>
            <ha-switch
              .checked=${u.left_enabled||!1}
              @change=${e=>{const t=e.target.checked;a(t?{left_enabled:!0,left_title:u.left_title||"Fuel",left_entity:u.left_entity||"",left_template_mode:u.left_template_mode||!1,left_title_size:u.left_title_size||14,left_value_size:u.left_value_size||14,left_title_color:u.left_title_color||"var(--primary-text-color)",left_value_color:u.left_value_color||"var(--primary-text-color)"}:{left_enabled:!1,left_title:"",left_entity:"",left_template_mode:!1,left_template:""})}}
            ></ha-switch>
          </div>

          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,A.kg)("editor.bar.left.desc",h,"Configure the title and entity value displayed on the left side of the bar. This is useful for showing labels like 'Range' or 'Battery' along with their values.")}
          </div>

          ${u.left_enabled?i.qy`
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{left_title:u.left_title||""}}
                      .schema=${[{name:"left_title",selector:{text:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>a({left_title:e.detail.value.left_title})}
                    ></ha-form>
                  </div>

                  <!-- Left Entity (value source) -->
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{left_entity:u.left_entity||""}}
                      .schema=${[{name:"left_entity",selector:{entity:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>a({left_entity:e.detail.value.left_entity})}
                    ></ha-form>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,A.kg)("editor.bar.left.title_size",h,"Title Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.left_title_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);a({left_title_size:o})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.left_title_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({left_title_size:o})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||14,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(32,o+i));a({left_title_size:n})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>a({left_title_size:14})}
                        title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,A.kg)("editor.bar.left.value_size",h,"Value Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.left_value_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);a({left_value_size:o})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.left_value_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({left_value_size:o})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||14,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(32,o+i));a({left_value_size:n})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>a({left_value_size:14})}
                        title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                  <!-- Left Template Mode -->
                  <div
                    class="field-group"
                    style="margin-bottom: 8px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                  >
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                    >
                      ${(0,A.kg)("editor.bar.left.template_mode",h,"Template Mode")}
                    </div>
                    <ha-switch
                      style="justify-self: end;"
                      .checked=${u.left_template_mode||!1}
                      @change=${e=>a({left_template_mode:e.target.checked})}
                    ></ha-switch>
                  </div>
                  ${u.left_template_mode?i.qy`
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                        >
                          ${(0,A.kg)("editor.bar.left.template_desc",h,"Use a template to format the displayed value. Templates use Home Assistant's Jinja2 syntax.")}
                        </div>
                        <div class="field-group" style="margin-bottom: 0;">
                          <ha-form
                            .hass=${t}
                            .data=${{left_template:u.left_template||""}}
                            .schema=${[{name:"left_template",label:(0,A.kg)("editor.bar.left.value_template",h,"Value Template"),description:(0,A.kg)("editor.bar.left.value_template_desc",h,"Template to format the left-side value using Jinja2 syntax"),selector:{text:{multiline:!0}}}]}
                            .computeLabel=${e=>e.label||e.name}
                            .computeDescription=${e=>e.description||""}
                            @value-changed=${e=>a({left_template:e.detail.value.left_template})}
                          ></ha-form>
                        </div>
                      `:""}
                `:i.qy`
                  <div
                    style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                  >
                    ${(0,A.kg)("editor.bar.left.enable_toggle",h,"Enable the toggle above to configure left side settings")}
                  </div>
                `}
        </div>

        <!-- Right Side Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
          >
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px;"
            >
              ${(0,A.kg)("editor.bar.right.title",h,"Right Side")}
            </div>
            <ha-switch
              .checked=${u.right_enabled||!1}
              @change=${e=>{const t=e.target.checked;a(t?{right_enabled:!0,right_title:u.right_title||"Range",right_entity:u.right_entity||"",right_template_mode:u.right_template_mode||!1,right_title_size:u.right_title_size||14,right_value_size:u.right_value_size||14,right_title_color:u.right_title_color||"var(--primary-text-color)",right_value_color:u.right_value_color||"var(--primary-text-color)"}:{right_enabled:!1,right_title:"",right_entity:"",right_template_mode:!1,right_template:""})}}
            ></ha-switch>
          </div>

          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,A.kg)("editor.bar.right.desc",h,"Configure the title and entity value displayed on the right side of the bar. This is ideal for complementary information like 'Time to Full' or secondary measurements.")}
          </div>

          ${u.right_enabled?i.qy`
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{right_title:u.right_title||""}}
                      .schema=${[{name:"right_title",selector:{text:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>a({right_title:e.detail.value.right_title})}
                    ></ha-form>
                  </div>
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{right_entity:u.right_entity||""}}
                      .schema=${[{name:"right_entity",selector:{entity:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>a({right_entity:e.detail.value.right_entity})}
                    ></ha-form>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,A.kg)("editor.bar.right.title_size",h,"Title Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.right_title_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);a({right_title_size:o})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.right_title_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({right_title_size:o})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||14,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(32,o+i));a({right_title_size:n})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>a({right_title_size:14})}
                        title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,A.kg)("editor.bar.right.value_size",h,"Value Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.right_value_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);a({right_value_size:o})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        max="32"
                        step="1"
                        .value="${u.right_value_size||14}"
                        @input=${e=>{const t=e.target,o=parseInt(t.value);isNaN(o)||a({right_value_size:o})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseInt(t.value)||14,i="ArrowUp"===e.key?1:-1,n=Math.max(8,Math.min(32,o+i));a({right_value_size:n})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>a({right_value_size:14})}
                        title="${(0,A.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                  <div
                    class="field-group"
                    style="margin-bottom: 8px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                  >
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                    >
                      ${(0,A.kg)("editor.bar.right.template_mode",h,"Template Mode")}
                    </div>
                    <ha-switch
                      style="justify-self: end;"
                      .checked=${u.right_template_mode||!1}
                      @change=${e=>a({right_template_mode:e.target.checked})}
                    ></ha-switch>
                  </div>
                  ${u.right_template_mode?i.qy`
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                        >
                          ${(0,A.kg)("editor.bar.right.template_desc",h,"Use a template to format the displayed value. Templates use Home Assistant's Jinja2 syntax.")}
                        </div>
                        <div class="field-group" style="margin-bottom: 0;">
                          <ha-form
                            .hass=${t}
                            .data=${{right_template:u.right_template||""}}
                            .schema=${[{name:"right_template",label:(0,A.kg)("editor.bar.right.value_template",h,"Value Template"),description:(0,A.kg)("editor.bar.right.value_template_desc",h,"Template to format the right-side value using Jinja2 syntax"),selector:{text:{multiline:!0}}}]}
                            .computeLabel=${e=>e.label||e.name}
                            .computeDescription=${e=>e.description||""}
                            @value-changed=${e=>a({right_template:e.detail.value.right_template})}
                          ></ha-form>
                        </div>
                      `:""}
                `:i.qy`
                  <div
                    style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                  >
                    ${(0,A.kg)("editor.bar.right.enable_toggle",h,"Enable the toggle above to configure right side settings")}
                  </div>
                `}
        </div>

        <!-- Colors Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,A.kg)("editor.bar.colors.title",h,"Colors")}
          </div>

          
          <div class="field-group" style="margin-bottom: 24px;">
            <div
              class="colors-grid"
              style="display: grid; grid-template-columns: 1fr; gap: 16px;"
            >
              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,A.kg)("editor.bar.colors.bar_color",h,"Bar Color")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${u.bar_color||""}
                  .defaultValue=${"var(--primary-color)"}
                  .hass=${t}
                  @value-changed=${e=>a({bar_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,A.kg)("editor.bar.colors.background_color",h,"Background Color")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${u.bar_background_color||""}
                  .defaultValue=${"transparent"}
                  .hass=${t}
                  @value-changed=${e=>a({bar_background_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,A.kg)("editor.bar.colors.border_color",h,"Border Color")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${u.bar_border_color||""}
                  .defaultValue=${"var(--divider-color)"}
                  .hass=${t}
                  @value-changed=${e=>a({bar_border_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,A.kg)("editor.bar.colors.limit_indicator",h,"Limit Indicator")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${u.limit_color||""}
                  .defaultValue=${"var(--warning-color)"}
                  .hass=${t}
                  @value-changed=${e=>a({limit_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,A.kg)("editor.bar.colors.percentage_text",h,"Percentage Text")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${u.percentage_text_color||""}
                  .defaultValue=${"var(--primary-text-color)"}
                  .hass=${t}
                  @value-changed=${e=>a({percentage_text_color:e.detail.value})}
                ></ultra-color-picker>
              </div>
            </div>
          </div>

          <!-- Left Side Colors -->
          ${u.left_enabled?i.qy`
                  <div class="field-group" style="margin-bottom: 24px;">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px; color: var(--primary-color);"
                    >
                      ${(0,A.kg)("editor.bar.colors.left_side",h,"Left Side Colors")}
                    </div>
                    <div
                      class="colors-grid"
                      style="display: grid; grid-template-columns: 1fr; gap: 16px;"
                    >
                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,A.kg)("editor.bar.colors.title_color",h,"Title Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${u.left_title_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>a({left_title_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>

                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,A.kg)("editor.bar.colors.value_color",h,"Value Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${u.left_value_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>a({left_value_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>
                    </div>
                  </div>
                `:""}

          <!-- Right Side Colors -->
          ${u.right_enabled?i.qy`
                  <div class="field-group">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px; color: var(--primary-color);"
                    >
                      ${(0,A.kg)("editor.bar.colors.right_side",h,"Right Side Colors")}
                    </div>
                    <div
                      class="colors-grid"
                      style="display: grid; grid-template-columns: 1fr; gap: 16px;"
                    >
                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,A.kg)("editor.bar.colors.title_color",h,"Title Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${u.right_title_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>a({right_title_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>

                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,A.kg)("editor.bar.colors.value_color",h,"Value Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${u.right_value_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>a({right_value_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>
                    </div>
                  </div>
                `:""}
        </div>

        <!-- Gradient Mode -->
        <div class="settings-section" style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;">
          <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px;">
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px; margin: 0;"
            >
              ${(0,A.kg)("editor.bar.gradient.title",h,"Gradient Mode")}
            </div>
            <ha-switch
              .checked=${u.use_gradient||!1}
              @change=${e=>{const t=e.target.checked,o={use_gradient:t};!t||u.gradient_stops&&0!==u.gradient_stops.length||(o.gradient_stops=[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],o.gradient_display_mode=u.gradient_display_mode||"full"),a(o)}}
            ></ha-switch>
          </div>

          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px;"
          >
            ${(0,A.kg)("editor.bar.gradient.desc",h,"Apply a color gradient to the bar fill. When enabled, choose how the gradient is displayed and customize the color stops below.")}
          </div>

          ${u.use_gradient?i.qy`
                  <div class="field-group" style="margin-bottom: 12px;">
                    <ha-form
                      .hass=${t}
                      .data=${{gradient_display_mode:u.gradient_display_mode||"full"}}
                      .schema=${[{name:"gradient_display_mode",selector:{select:{options:[{value:"full",label:(0,A.kg)("editor.bar.gradient.full",h,"Full")},{value:"cropped",label:(0,A.kg)("editor.bar.gradient.cropped",h,"Cropped")},{value:"value-based",label:(0,A.kg)("editor.bar.gradient.value_based",h,"Value-Based")}],mode:"dropdown"}},label:""}]}
                      .computeLabel=${()=>""}
                      .computeDescription=${()=>""}
                      @value-changed=${e=>a({gradient_display_mode:e.detail.value.gradient_display_mode})}
                    ></ha-form>
                  </div>
                  <uc-gradient-editor
                    .stops=${u.gradient_stops||[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}]}
                    .barSize=${this.getBarSizeFromHeight(null!==(p=u.height)&&void 0!==p?p:20)}
                    .barRadius=${this.getBarRadiusFromStyle(u.border_radius||10)}
                    .barStyle=${u.bar_style||"flat"}
                    @gradient-changed=${e=>{a({gradient_stops:e.detail.stops})}}
                  ></uc-gradient-editor>
                `:""}
        </div>

        <!-- Bar Animation -->
        <div class="settings-section" style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;">
          <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px;">
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px; margin: 0;"
            >
              ${(0,A.kg)("editor.bar.animation.title",h,"Bar Animation")}
            </div>
            <ha-switch
              .checked=${u.bar_animation_enabled||!1}
              @change=${e=>a({bar_animation_enabled:e.target.checked})}
            ></ha-switch>
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px;"
          >
            ${(0,A.kg)("editor.bar.animation.desc",h,"Animate the bar fill using presets like charging stripes, pulse, shimmer, and more. You can trigger animations based on an entity's state or attribute, and optionally override the animation when another condition is met.")}
          </div>
          ${u.bar_animation_enabled?i.qy`
                  ${this.renderSettingsSection((0,A.kg)("editor.bar.animation.trigger.title",h,"Animation Trigger"),(0,A.kg)("editor.bar.animation.trigger.desc",h,"Select an entity to watch and define the value + animation to apply when it matches."),[{title:(0,A.kg)("editor.common.entity",h,"Entity"),description:(0,A.kg)("editor.bar.animation.trigger.entity_desc",h,"Entity to evaluate for animation trigger"),hass:t,data:{bar_animation_entity:u.bar_animation_entity||""},schema:[this.entityField("bar_animation_entity")],onChange:e=>a({bar_animation_entity:e.detail.value.bar_animation_entity})},{title:(0,A.kg)("editor.bar.animation.trigger.type",h,"Trigger Type"),description:(0,A.kg)("editor.bar.animation.trigger.type_desc",h,"Choose whether to compare the entity state or an attribute"),hass:t,data:{bar_animation_trigger_type:u.bar_animation_trigger_type||"state"},schema:[this.selectField("bar_animation_trigger_type",[{value:"state",label:(0,A.kg)("editor.common.state",h,"State")},{value:"attribute",label:(0,A.kg)("editor.common.attribute",h,"Attribute")}])],onChange:e=>a(e.detail.value)},..."attribute"===(u.bar_animation_trigger_type||"state")?[{title:(0,A.kg)("editor.common.attribute_name",h,"Attribute Name"),description:(0,A.kg)("editor.bar.animation.trigger.attribute_name_desc",h,"Name of the attribute to compare (e.g., charging_status)"),hass:t,data:{bar_animation_attribute:u.bar_animation_attribute||""},schema:[this.textField("bar_animation_attribute")],onChange:e=>a({bar_animation_attribute:e.detail.value.bar_animation_attribute})}]:[],...(u.bar_animation_entity||"").trim()?[{title:(0,A.kg)("editor.bar.animation.trigger.match_value",h,"Match Value"),description:(0,A.kg)("editor.bar.animation.trigger.match_value_desc",h,"Text to compare against the state or attribute (comparison is string-based)."),hass:t,data:{bar_animation_value:u.bar_animation_value||""},schema:[this.textField("bar_animation_value")],onChange:e=>a({bar_animation_value:e.detail.value.bar_animation_value})}]:[],{title:(0,A.kg)("editor.bar.animation.type",h,"Animation Type"),description:(0,A.kg)("editor.bar.animation.type_desc",h,"Select how the bar should animate when triggered."),hass:t,data:{bar_animation_type:u.bar_animation_type||"none"},schema:[this.selectField("bar_animation_type",[{value:"none",label:(0,A.kg)("editor.common.none",h,"None")},{value:"charging",label:(0,A.kg)("editor.bar.animation.types.charging",h,"Charging (Diagonal Lines)")},{value:"pulse",label:(0,A.kg)("editor.bar.animation.types.pulse",h,"Pulse")},{value:"blinking",label:(0,A.kg)("editor.bar.animation.types.blinking",h,"Blinking")},{value:"bouncing",label:(0,A.kg)("editor.bar.animation.types.bouncing",h,"Bouncing")},{value:"glow",label:(0,A.kg)("editor.bar.animation.types.glow",h,"Glow")},{value:"rainbow",label:(0,A.kg)("editor.bar.animation.types.rainbow",h,"Rainbow")},{value:"bubbles",label:(0,A.kg)("editor.bar.animation.types.bubbles",h,"Bubbles")},{value:"fill",label:(0,A.kg)("editor.bar.animation.types.fill",h,"Fill")},{value:"ripple",label:(0,A.kg)("editor.bar.animation.types.ripple",h,"Ripple")},{value:"traffic",label:(0,A.kg)("editor.bar.animation.types.traffic",h,"Traffic (Barber Pole)")},{value:"heartbeat",label:(0,A.kg)("editor.bar.animation.types.heartbeat",h,"Heartbeat")},{value:"flicker",label:(0,A.kg)("editor.bar.animation.types.flicker",h,"Flicker")},{value:"shimmer",label:(0,A.kg)("editor.bar.animation.types.shimmer",h,"Shimmer")},{value:"vibrate",label:(0,A.kg)("editor.bar.animation.types.vibrate",h,"Vibrate")}])],onChange:e=>a(e.detail.value)}])}
                  ${this.renderSettingsSection((0,A.kg)("editor.bar.animation.override.title",h,"Action Animation Override"),(0,A.kg)("editor.bar.animation.override.desc",h,"Select an Action Entity and state to define when this animation should override the regular animation"),[{title:(0,A.kg)("editor.common.entity",h,"Entity"),description:(0,A.kg)("editor.bar.animation.override.entity_desc",h,"Entity to evaluate for the override trigger"),hass:t,data:{bar_animation_override_entity:u.bar_animation_override_entity||""},schema:[this.entityField("bar_animation_override_entity")],onChange:e=>a({bar_animation_override_entity:e.detail.value.bar_animation_override_entity})},{title:(0,A.kg)("editor.bar.animation.trigger.type",h,"Trigger Type"),description:(0,A.kg)("editor.bar.animation.override.type_desc",h,"Compare the entity state or one of its attributes"),hass:t,data:{bar_animation_override_trigger_type:u.bar_animation_override_trigger_type||"state"},schema:[this.selectField("bar_animation_override_trigger_type",[{value:"state",label:(0,A.kg)("editor.common.state",h,"State")},{value:"attribute",label:(0,A.kg)("editor.common.attribute",h,"Attribute")}])],onChange:e=>a(e.detail.value)},..."attribute"===(u.bar_animation_override_trigger_type||"state")?[{title:(0,A.kg)("editor.common.attribute_name",h,"Attribute Name"),description:(0,A.kg)("editor.bar.animation.override.attribute_name_desc",h,"Name of the attribute to compare"),hass:t,data:{bar_animation_override_attribute:u.bar_animation_override_attribute||""},schema:[this.textField("bar_animation_override_attribute")],onChange:e=>a({bar_animation_override_attribute:e.detail.value.bar_animation_override_attribute})}]:[],{title:(0,A.kg)("editor.bar.animation.override.match_value",h,"Override Match Value"),description:(0,A.kg)("editor.bar.animation.override.match_value_desc",h,"String comparison against state or attribute"),hass:t,data:{bar_animation_override_value:u.bar_animation_override_value||""},schema:[this.textField("bar_animation_override_value")],onChange:e=>a({bar_animation_override_value:e.detail.value.bar_animation_override_value})},{title:(0,A.kg)("editor.bar.animation.override.type",h,"Override Animation Type"),description:(0,A.kg)("editor.bar.animation.override.type_desc",h,"Animation to use when override condition matches."),hass:t,data:{bar_animation_override_type:u.bar_animation_override_type||"none"},schema:[this.selectField("bar_animation_override_type",[{value:"none",label:(0,A.kg)("editor.common.none",h,"None")},{value:"charging",label:(0,A.kg)("editor.bar.animation.types.charging",h,"Charging (Diagonal Lines)")},{value:"pulse",label:(0,A.kg)("editor.bar.animation.types.pulse",h,"Pulse")},{value:"blinking",label:(0,A.kg)("editor.bar.animation.types.blinking",h,"Blinking")},{value:"bouncing",label:(0,A.kg)("editor.bar.animation.types.bouncing",h,"Bouncing")},{value:"glow",label:(0,A.kg)("editor.bar.animation.types.glow",h,"Glow")},{value:"rainbow",label:(0,A.kg)("editor.bar.animation.types.rainbow",h,"Rainbow")},{value:"bubbles",label:(0,A.kg)("editor.bar.animation.types.bubbles",h,"Bubbles")},{value:"fill",label:(0,A.kg)("editor.bar.animation.types.fill",h,"Fill")},{value:"ripple",label:(0,A.kg)("editor.bar.animation.types.ripple",h,"Ripple")},{value:"traffic",label:(0,A.kg)("editor.bar.animation.types.traffic",h,"Traffic (Barber Pole)")},{value:"heartbeat",label:(0,A.kg)("editor.bar.animation.types.heartbeat",h,"Heartbeat")},{value:"flicker",label:(0,A.kg)("editor.bar.animation.types.flicker",h,"Flicker")},{value:"shimmer",label:(0,A.kg)("editor.bar.animation.types.shimmer",h,"Shimmer")},{value:"vibrate",label:(0,A.kg)("editor.bar.animation.types.vibrate",h,"Vibrate")}])],onChange:e=>a(e.detail.value)}])}
                `:""}
        </div>

        <!-- Action Animation Override removed as standalone: now included inside Bar Animation section above -->
      </div>
    `}renderActionsTab(e,t,o,i){return r.A.render(e,t,(e=>i(e)))}renderPreview(e,t){var a,n,r,s,d,c,p,u,h,m,g,_,b,v,f,y,x,w,k,$,A,T,z,I,D,L;const E=e;let M=0;const P=e=>Math.min(Math.max(e,0),100),R=!(E.entity&&(null==t?void 0:t.states[E.entity])),O=E.percentage_type||"entity";if("template"===O&&E.percentage_template){if(!this._templateService&&t&&(this._templateService=new S.I(t)),t){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=E.percentage_template,o=`bar_percentage_${E.id}_${this._hashString(e)}`;this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(e,o,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const i=null===(a=t.__uvc_template_strings)||void 0===a?void 0:a[o];if(void 0!==i){const e=parseFloat(String(i));isNaN(e)||(M=P(e<=1?100*e:e))}}}else if("attribute"===O){const e=E.percentage_attribute_entity||E.entity,o=E.percentage_attribute_name||"",i=e?null==t?void 0:t.states[e]:void 0,a=o?null===(n=null==i?void 0:i.attributes)||void 0===n?void 0:n[o]:void 0,l=(null===(r=null==i?void 0:i.attributes)||void 0===r?void 0:r.unit_of_measurement)||"",d=parseFloat(String(null!=a?a:"0"));if(!isNaN(d))if("%"===l||String(a).toString().trim().endsWith("%"))M=P(d);else if(null===(s=null==i?void 0:i.attributes)||void 0===s?void 0:s.max){const e=parseFloat(String(i.attributes.max));M=e>0?P(d/e*100):0}else M=P(d)}else if("difference"===O){const e=E.percentage_current_entity,o=E.percentage_total_entity,i=e?parseFloat(String(null!==(c=null===(d=null==t?void 0:t.states[e])||void 0===d?void 0:d.state)&&void 0!==c?c:"0")):0,a=o?parseFloat(String(null!==(u=null===(p=null==t?void 0:t.states[o])||void 0===p?void 0:p.state)&&void 0!==u?u:"0")):0;M=a>0?P(i/a*100):0}else{const e=null==t?void 0:t.states[E.entity];let o=0,i=100,a="";e&&(o=parseFloat(e.state)||0,a=(null===(h=e.attributes)||void 0===h?void 0:h.unit_of_measurement)||"",(null===(m=e.attributes)||void 0===m?void 0:m.max)?i=parseFloat(e.attributes.max):("%"===a||"battery"===(null===(g=e.attributes)||void 0===g?void 0:g.device_class))&&(i=100)),M=P(o/i*100)}R&&(M=65);let U="";if(E.left_template_mode&&E.left_template&&(!this._templateService&&t&&(this._templateService=new S.I(t)),t)){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=this._hashString(E.left_template),o=`bar_left_${E.id}_${e}`;this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(E.left_template,o,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const i=null===(_=t.__uvc_template_strings)||void 0===_?void 0:_[o];void 0!==i&&""!==String(i).trim()&&(U=String(i))}if(!U&&E.left_entity&&(null==t?void 0:t.states[E.left_entity])){const e=t.states[E.left_entity];try{U=(0,C.formatEntityState)(t,E.left_entity,{includeUnit:!0})}catch(t){U=`${e.state}${(null===(b=e.attributes)||void 0===b?void 0:b.unit_of_measurement)||""}`}}let N="";if(E.right_template_mode&&E.right_template&&(!this._templateService&&t&&(this._templateService=new S.I(t)),t)){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=this._hashString(E.right_template),o=`bar_right_${E.id}_${e}`;this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(E.right_template,o,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const i=null===(v=t.__uvc_template_strings)||void 0===v?void 0:v[o];void 0!==i&&""!==String(i).trim()&&(N=String(i))}if(!N&&E.right_entity&&(null==t?void 0:t.states[E.right_entity])){const e=t.states[E.right_entity];try{N=(0,C.formatEntityState)(t,E.right_entity,{includeUnit:!0})}catch(t){N=`${e.state}${(null===(f=e.attributes)||void 0===f?void 0:f.unit_of_measurement)||""}`}}let B=0;if(E.limit_entity&&(null==t?void 0:t.states[E.limit_entity])){const e=t.states[E.limit_entity],o=parseFloat(e.state)||0,i=100;B=Math.min(Math.max(o/i*100,0),100)}const j=E,H=E.design||{};console.log("🎨 Bar Module Preview Debug:",{moduleId:E.id,designProperties:H,moduleWithDesign:{background_color:j.background_color,bar_background_color:E.bar_background_color}});const F=H.background_color||j.background_color||"transparent",q=H.width||j.width||"100%",W=E.bar_background_color||"transparent";console.log("🎨 Computed backgrounds:",{containerBackground:F,trackBackground:W});const G=`${null!==(y=E.height)&&void 0!==y?y:20}px`,V=null!==(w=null!==(x=E.border_radius)&&void 0!==x?x:H.border_radius)&&void 0!==w?w:10,Y="string"==typeof V?parseInt(V,10)||10:V;let J=E.bar_color||j.color||"var(--primary-color)";const X=e=>{if(!e)return e;const t=String(e).trim();if(t.startsWith("#")||t.startsWith("rgb"))return t;try{const e=document.createElement("span");e.style.color=t,document.body.appendChild(e);const o=getComputedStyle(e).color;return e.remove(),o&&"rgba(0, 0, 0, 0)"!==o?o:t}catch(e){return t}},K=(e,t)=>{const o=[...e].sort(((e,t)=>e.position-t.position));let i=o[0],a=o[o.length-1];for(let e=0;e<o.length-1;e++)if(t>=o[e].position&&t<=o[e+1].position){i=o[e],a=o[e+1];break}if(i.position===t)return i.color;if(a.position===t)return a.color;const n=a.position-i.position,r=0===n?0:(t-i.position)/n,s=e=>{const t=X(e);if(!t)return null;if(t.startsWith("#"))return t;const o=t.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})(?:\s*,\s*([0-9.]+))?\s*\)/i);if(o){const e=Math.max(0,Math.min(255,parseInt(o[1],10))),t=Math.max(0,Math.min(255,parseInt(o[2],10))),i=Math.max(0,Math.min(255,parseInt(o[3],10)));return this.rgbToHex(e,t,i)}return null},l=s(i.color),d=s(a.color);return l&&d?this.interpolateColor(l,d,r):X(r<.5?i.color:a.color)};if(E.use_gradient){const e=E.gradient_stops&&E.gradient_stops.length>0?E.gradient_stops:[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],t=[...e].sort(((e,t)=>e.position-t.position)).map((e=>`${X(e.color)} ${e.position}%`)).join(", ");if("full"===E.gradient_display_mode)J=`linear-gradient(to right, ${t})`;else if("value-based"===E.gradient_display_mode){const t=[...e].sort(((e,t)=>e.position-t.position)),o=K(t,M);J=X(o)}else{const t=[...e].sort(((e,t)=>e.position-t.position));if(M<=0){const e=t[0];J=e?X(e.color):J}else{const e=t.filter((e=>e.position<=M)),o=[];if(0===e.length){const e=t[0];e&&o.push(`${e.color} 0%`,`${e.color} 100%`)}else{for(const t of e){const e=t.position/M*100,i=Math.max(0,Math.min(100,e));o.push(`${X(t.color)} ${i}%`)}const i=X(K(t,M));0===o.length?o.push(`${i} 0%`,`${i} 100%`):o.push(`${i} 100%`)}J=`linear-gradient(to right, ${o.join(", ")})`}}}let Q="",Z="",ee="",te="";const oe=e=>e.includes("linear-gradient")?E.bar_color||"var(--primary-color)":e;switch(oe(J),E.bar_style){case"flat":Q="box-shadow: none;";break;case"glossy":E.use_gradient?ee="\n            background-image: linear-gradient(to bottom, \n              rgba(255,255,255,0.3) 0%, \n              rgba(255,255,255,0.1) 50%, \n              rgba(0,0,0,0.1) 51%, \n              rgba(0,0,0,0.05) 100%);\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.3);\n          ":Z=`\n            background: linear-gradient(to bottom, ${J}, ${J} 50%, rgba(0,0,0,0.1) 51%, ${J});\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.3);\n          `;break;case"embossed":Q="\n          box-shadow: inset 0 1px 2px rgba(0,0,0,0.2), 0 1px 0 rgba(255,255,255,0.8);\n          border: 1px solid rgba(0,0,0,0.1);\n        ",Z="\n          box-shadow: inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 0 rgba(0,0,0,0.1);\n        ";break;case"inset":Q="\n          box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);\n          border: 1px solid rgba(0,0,0,0.2);\n        ";break;case"gradient-overlay":E.use_gradient?ee="\n            background-image: linear-gradient(to bottom, \n              rgba(255,255,255,0.4) 0%, \n              rgba(255,255,255,0) 100%);\n          ":Z=`\n            background: linear-gradient(to bottom, \n              ${J} 0%, \n              rgba(255,255,255,0) 100%\n            );\n          `;break;case"neon-glow":const e=(e=>{if(e.includes("linear-gradient")&&E.use_gradient&&E.gradient_stops){const e=E.gradient_display_mode||"full";if("value-based"===e||"cropped"===e)return K(E.gradient_stops,M);{const e=[...E.gradient_stops].sort(((e,t)=>t.position-e.position));if(e.length>0)return e[0].color}}return oe(e)})(J);Z=`\n          box-shadow: 0 0 10px ${e}, 0 0 20px ${e}, 0 0 30px ${e};\n          filter: brightness(1.2);\n        `,Q="\n          box-shadow: inset 0 0 10px rgba(0,0,0,0.5);\n        ";break;case"outline":{const e=!(!E.use_gradient||!E.gradient_stops||"full"!==E.gradient_display_mode&&"cropped"!==E.gradient_display_mode&&"value-based"!==E.gradient_display_mode),t=E.gradient_stops&&E.gradient_stops.length>0?[...E.gradient_stops].sort(((e,t)=>e.position-t.position)):[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],o=t[t.length-1],i=o?X(o.color):E.bar_color||"var(--primary-color)",a=t.map((e=>`${X(e.color)} ${e.position}%`)).join(", "),n=Math.max(0,Math.min(100,M)),r=e=>X(K(t,e));let s=i;"cropped"!==E.gradient_display_mode&&"value-based"!==E.gradient_display_mode||(s=r(n));const l=W,d=E.gradient_display_mode||"full";let c="",p="";e?"value-based"===d?(c=`linear-gradient(${l}, ${l}) padding-box,\n               linear-gradient(to right, ${s}, ${s}) border-box`,p="background-size: 100% 100%, 100% 100%;"):"cropped"===d?(c=`linear-gradient(${l}, ${l}) padding-box,\n               ${J} border-box,\n               linear-gradient(to right, ${s}, ${s}) border-box`,p=`background-size: 100% 100%, ${n}% 100%, 100% 100%;`):(c=`linear-gradient(${l}, ${l}) padding-box,\n               linear-gradient(to right, ${a}) border-box,\n               linear-gradient(to right, ${s}, ${s}) border-box`,p=`background-size: 100% 100%, ${n}% 100%, 100% 100%;`):(c=`linear-gradient(${l}, ${l}) padding-box,\n               linear-gradient(to right, ${J}, ${J}) border-box`,p="background-size: 100% 100%, 100% 100%;"),Q=`\n            border: 2px solid transparent;\n            border-radius: ${Y}px;\n            padding: 4px;\n            background: ${c};\n            ${p}\n            background-repeat: no-repeat;\n          `,Z=`\n            background: ${J};\n            border: none;\n            position: relative;\n            margin: 0;\n          `}break;case"glass":Q="\n          backdrop-filter: blur(10px);\n          background-color: rgba(255,255,255,0.1) !important;\n          border: 1px solid rgba(255,255,255,0.2);\n        ",E.use_gradient?ee="\n            backdrop-filter: blur(5px);\n            background-image: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));\n          ":Z="\n            backdrop-filter: blur(5px);\n            background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1)) !important;\n          ";break;case"metallic":E.use_gradient?ee="\n            background-image: linear-gradient(to bottom, \n              rgba(255,255,255,0.4) 0%, \n              rgba(255,255,255,0) 20%, \n              rgba(255,255,255,0) 80%, \n              rgba(0,0,0,0.2) 100%);\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.5), inset 0 -1px 0 rgba(0,0,0,0.3);\n          ":Z=`\n            background: linear-gradient(to bottom, \n              rgba(255,255,255,0.4) 0%, \n              ${J} 20%, \n              ${J} 80%, \n              rgba(0,0,0,0.2) 100%);\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.5), inset 0 -1px 0 rgba(0,0,0,0.3);\n          `;break;case"neumorphic":Q="\n          box-shadow: inset 2px 2px 4px rgba(0,0,0,0.1), inset -2px -2px 4px rgba(255,255,255,0.1);\n        ",Z="\n          box-shadow: 2px 2px 4px rgba(0,0,0,0.1), -2px -2px 4px rgba(255,255,255,0.1);\n        ";break;case"dashed":const t=12,o=4,i=t+o;Z=M>=99.5?`\n            mask-image: repeating-linear-gradient(\n              90deg,\n              black 0px,\n              black ${t}px,\n              transparent ${t}px,\n              transparent ${i}px\n            );\n            -webkit-mask-image: repeating-linear-gradient(\n              90deg,\n              black 0px,\n              black ${t}px,\n              transparent ${t}px,\n              transparent ${i}px\n            );\n            border-radius: 0 ${Y}px ${Y}px 0;\n          `:`\n            mask-image: \n              repeating-linear-gradient(\n                90deg,\n                black 0px,\n                black ${t}px,\n                transparent ${t}px,\n                transparent ${i}px\n              ),\n              linear-gradient(\n                90deg,\n                black 0%,\n                black calc(100% - ${o+2}px),\n                transparent calc(100% - ${o+2}px),\n                transparent 100%\n              );\n            -webkit-mask-image: \n              repeating-linear-gradient(\n                90deg,\n                black 0px,\n                black ${t}px,\n                transparent ${t}px,\n                transparent ${i}px\n              ),\n              linear-gradient(\n                90deg,\n                black 0%,\n                black calc(100% - ${o+2}px),\n                transparent calc(100% - ${o+2}px),\n                transparent 100%\n              );\n            mask-composite: intersect;\n            -webkit-mask-composite: source-in;\n            border-radius: 0;\n          `;break;case"dots":const a=4,n=[],r=[];for(let e=10;e<=M&&e<=100;e+=10)n.push(`${e}%`),r.push(`radial-gradient(circle ${a}px at ${e}% center, ${J} 0%, ${J} 100%, transparent 100%)`);Z=r.length>0?`\n            background-image: ${r.join(", ")};\n            background-size: 100% 100%;\n            background-repeat: no-repeat;\n          `:"background: transparent;"}const ie=E.bar_animation_type||"none";let ae=!1;if(E.bar_animation_enabled&&"none"!==ie){const e=E.bar_animation_trigger_type||"state",o=E.bar_animation_entity,i=(null!==(k=E.bar_animation_value)&&void 0!==k?k:"").toString();if(o&&""!==o.trim()&&""!==i.trim()){if(null==t?void 0:t.states[o]){const a=t.states[o];let n="";if("attribute"===e){const e=E.bar_animation_attribute||"";n=e?String(null!==(A=null===($=a.attributes)||void 0===$?void 0:$[e])&&void 0!==A?A:""):""}else n=String(null!==(T=a.state)&&void 0!==T?T:"");ae=String(n)===i}}else ae=!0;if(ae)switch(ie){case"charging":te="bar-anim-charging";break;case"pulse":te="bar-anim-pulse";break;case"blinking":te="bar-anim-blink";break;case"bouncing":te="bar-anim-bounce";break;case"glow":te="bar-anim-glow";break;case"rainbow":te="bar-anim-rainbow";break;case"bubbles":te="bar-anim-bubbles";break;case"fill":te="bar-anim-fill";break;case"ripple":te="bar-anim-ripple";break;case"traffic":te="bar-anim-traffic";break;case"heartbeat":te="bar-anim-heartbeat";break;case"flicker":te="bar-anim-flicker";break;case"shimmer":te="bar-anim-shimmer";break;case"vibrate":te="bar-anim-vibrate"}}const ne=E.bar_animation_override_type||"none";if("none"!==ne&&""!==(E.bar_animation_override_entity||"").trim()){const e=E.bar_animation_override_trigger_type||"state",o=E.bar_animation_override_entity,i=(null!==(z=E.bar_animation_override_value)&&void 0!==z?z:"").toString();let a=!1;if(null==t?void 0:t.states[o]){const n=t.states[o];if("attribute"===e){const e=E.bar_animation_override_attribute||"";a=(e?String(null!==(D=null===(I=n.attributes)||void 0===I?void 0:I[e])&&void 0!==D?D:""):"")===i}else a=String(null!==(L=n.state)&&void 0!==L?L:"")===i}if(a)switch(ne){case"charging":te="bar-anim-charging";break;case"pulse":te="bar-anim-pulse";break;case"blinking":te="bar-anim-blink";break;case"bouncing":te="bar-anim-bounce";break;case"glow":te="bar-anim-glow";break;case"rainbow":te="bar-anim-rainbow";break;case"bubbles":te="bar-anim-bubbles";break;case"fill":te="bar-anim-fill";break;case"ripple":te="bar-anim-ripple";break;case"traffic":te="bar-anim-traffic";break;case"heartbeat":te="bar-anim-heartbeat";break;case"flicker":te="bar-anim-flicker";break;case"shimmer":te="bar-anim-shimmer";break;case"vibrate":te="bar-anim-vibrate"}}const re={padding:H.padding_top||H.padding_bottom||H.padding_left||H.padding_right||j.padding_top||j.padding_bottom||j.padding_left||j.padding_right?`${this.addPixelUnit(H.padding_top||j.padding_top)||"0px"} ${this.addPixelUnit(H.padding_right||j.padding_right)||"0px"} ${this.addPixelUnit(H.padding_bottom||j.padding_bottom)||"0px"} ${this.addPixelUnit(H.padding_left||j.padding_left)||"0px"}`:"0",margin:H.margin_top||H.margin_bottom||H.margin_left||H.margin_right||j.margin_top||j.margin_bottom||j.margin_left||j.margin_right?`${this.addPixelUnit(H.margin_top||j.margin_top)||"0px"} ${this.addPixelUnit(H.margin_right||j.margin_right)||"0px"} ${this.addPixelUnit(H.margin_bottom||j.margin_bottom)||"0px"} ${this.addPixelUnit(H.margin_left||j.margin_left)||"0px"}`:"0",background:F,backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},j),H),t),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",border:(H.border_style||j.border_style)&&"none"!==(H.border_style||j.border_style)?`${this.addPixelUnit(H.border_width||j.border_width)||"1px"} ${H.border_style||j.border_style} ${H.border_color||j.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(H.border_radius||j.border_radius)||"0",position:H.position||j.position||"relative",top:H.top||j.top||"auto",bottom:H.bottom||j.bottom||"auto",left:H.left||j.left||"auto",right:H.right||j.right||"auto",zIndex:H.z_index||j.z_index||"auto",width:q,height:H.height||j.height||"auto",maxWidth:H.max_width||j.max_width||"100%",maxHeight:H.max_height||j.max_height||"none",minWidth:H.min_width||j.min_width||"none",minHeight:H.min_height||j.min_height||"auto",overflow:H.overflow||j.overflow||"visible",clipPath:H.clip_path||j.clip_path||"none",backdropFilter:H.backdrop_filter||j.backdrop_filter||"none",boxShadow:H.box_shadow_h&&H.box_shadow_v?`${H.box_shadow_h||"0"} ${H.box_shadow_v||"0"} ${H.box_shadow_blur||"0"} ${H.box_shadow_spread||"0"} ${H.box_shadow_color||"rgba(0,0,0,0.1)"}`:j.box_shadow_h&&j.box_shadow_v?`${j.box_shadow_h||"0"} ${j.box_shadow_v||"0"} ${j.box_shadow_blur||"0"} ${j.box_shadow_spread||"0"} ${j.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box",color:H.color||j.color||"var(--primary-text-color)",fontFamily:H.font_family||j.font_family||"inherit",fontSize:void 0!==H.font_size&&null!==H.font_size?`${H.font_size}px`:(j.font_size?`${j.font_size}px`:void 0)||"inherit",textAlign:H.text_align||j.text_align||"inherit",lineHeight:H.line_height||j.line_height||"inherit",letterSpacing:H.letter_spacing||j.letter_spacing||"normal",textShadow:H.text_shadow_h&&H.text_shadow_v?`${H.text_shadow_h||"0"} ${H.text_shadow_v||"0"} ${H.text_shadow_blur||"0"} ${H.text_shadow_color||"rgba(0,0,0,0.25)"}`:j.text_shadow_h&&j.text_shadow_v?`${j.text_shadow_h||"0"} ${j.text_shadow_v||"0"} ${j.text_shadow_blur||"0"} ${j.text_shadow_color||"rgba(0,0,0,0.25)"}`:"none"};Math.max(1,Math.min(100,Number(E.bar_width||100)));let se="flex-start";switch(E.bar_alignment){case"left":se="flex-start";break;case"center":se="center";break;case"right":se="flex-end"}let le=null,de=null,ce=!1,pe=0,ue=0;return i.qy`
      <style>
        ${this.getStyles()}
      </style>
      <div class="bar-module-preview" style=${this.styleObjectToCss(re)}>
        <!-- Bar Container -->
        <div style="display: flex; justify-content: ${se}; width: 100%; min-height: ${G}; align-items: center; min-width: 0;">
          <div
            class="bar-container"
            style="
            width: ${"100%"};
            max-width: 100%;
            flex: 1 1 auto;
            height: ${G}; 
            background: ${W};
            min-width: 80px;
            border-radius: ${Y}px;
            overflow: hidden;
            position: relative;
            transition: ${!1!==E.animation?"all 0.3s ease":"none"};
            border: ${"outline"!==E.bar_style?`1px solid ${E.bar_border_color||j.border_color||"var(--divider-color)"}`:"none"};
            ${Q};
            cursor: ${E.tap_action&&"nothing"!==E.tap_action.action||E.hold_action&&"nothing"!==E.hold_action.action||E.double_tap_action&&"nothing"!==E.double_tap_action.action?"pointer":"default"};
          "
          @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),ce=!1,de=setTimeout((()=>{ce=!0,E.hold_action&&"nothing"!==E.hold_action.action&&l.K.handleAction(E.hold_action,t,e.target)}),500)}}
          @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),de&&(clearTimeout(de),de=null),ce)return void(ce=!1);const o=Date.now();o-ue<300&&1===pe?(le&&(clearTimeout(le),le=null),pe=0,E.double_tap_action&&"nothing"!==E.double_tap_action.action&&l.K.handleAction(E.double_tap_action,t,e.target)):(pe=1,ue=o,le=setTimeout((()=>{pe=0,E.tap_action&&"nothing"!==E.tap_action.action&&l.K.handleAction(E.tap_action,t,e.target)}),300))}}
        >
            <!-- Bar Fill / Dots Style -->
            ${"dots"===E.bar_style?(()=>{var e;const t=null!==(e=E.height)&&void 0!==e?e:20,o=Math.max(6,Math.floor(t-8)),a=W,n=E.use_gradient&&E.gradient_stops&&E.gradient_stops.length>0?[...E.gradient_stops].sort(((e,t)=>e.position-t.position)):[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],r=e=>{const t=[...n].sort(((e,t)=>e.position-t.position));let o=t[0],i=t[t.length-1];for(let a=0;a<t.length-1;a++)if(e>=t[a].position&&e<=t[a+1].position){o=t[a],i=t[a+1];break}if(o.position===e)return o.color;if(i.position===e)return i.color;const a=i.position-o.position,r=0===a?0:(e-o.position)/a;return this.interpolateColor(o.color,i.color,r)},s=E.gradient_display_mode||"full",l=Array.from({length:20},((e,t)=>{const n=Math.round((t+1)/21*100),l=n<=M;let d=J;if(E.use_gradient){if("full"===s)if(l){const e=M>0?Math.min(100,Math.max(0,Math.round(n/Math.max(1,M)*100))):0;d=r(e)}else d=a;else if("cropped"===s)d=l?r(n):a;else if("value-based"===s){const e=r(M);d=l?e:a}}else d=l?E.bar_color||j.color||"var(--primary-color)":a;return i.qy`<div
                        style="width:${o}px;height:${o}px;border-radius:50%;background:${d};flex-shrink:0;"
                      ></div>`}));return i.qy`<div
                      class="dots-container"
                      style="display:flex;align-items:center;justify-content:space-between;width:100%;height:100%;padding:0 ${Math.max(2,Math.floor(o/3))}px;box-sizing:border-box;"
                    >
                      ${l}
                    </div>`})():i.qy`
                    <div
                      class="bar-fill ${te}"
                      style="
                      width: ${M}%;
                      height: 100%;
                      background: ${J};
                      transition: ${!1!==E.animation?"width 0.3s ease":"none"};
                      border-radius: ${M>=99.5?Y+"px":`${Y}px 0 0 ${Y}px`};
                      position: absolute;
                      left: 0;
                      top: 0;
                      bottom: 0;
                      will-change: width;
                      backface-visibility: hidden;
                      ${Z}
                    "
                    >
                      ${ee?i.qy` <div
                            class="bar-fill-overlay"
                            style="
                              position: absolute;
                              inset: 0;
                              border-radius: inherit;
                              pointer-events: none;
                              ${ee}
                            "
                          ></div>`:""}
                    </div>
                  `}

            <!-- Limit Indicator -->
            ${E.limit_entity&&(null==t?void 0:t.states[E.limit_entity])&&B>=0?i.qy`
                    <div
                      class="bar-limit-line"
                      style="
                    position: absolute; 
                    top: 0; 
                    bottom: 0; 
                    left: ${B}%; 
                    width: 2px; 
                    background-color: ${E.limit_color||"var(--warning-color)"}; 
                    z-index: 5; 
                    transform: translateX(-50%);
                  "
                      title="${(()=>{var e;try{const i=null===(e=t.states[E.limit_entity])||void 0===e?void 0:e.state;return(async()=>{const{formatEntityState:e}=await Promise.resolve().then(o.bind(o,57));e(t,E.limit_entity,{state:i,includeUnit:!0})})(),`Limit: ${i}`}catch(e){return"Limit"}})()}"
                    ></div>
                  `:""}

            <!-- Percentage Text (Inside Bar) -->
            ${E.show_percentage?i.qy`
                    <div
                      class="percentage-text"
                      style="
                    position: absolute;
                    top: 50%;
                    left: ${"left"===E.percentage_text_alignment?"8px":"right"===E.percentage_text_alignment?"calc(100% - 32px)":"50%"};
                    transform: translate(${"center"===E.percentage_text_alignment?"-50%, -50%":"0, -50%"});
                    text-align: ${E.percentage_text_alignment||"center"};
                    font-size: ${H.font_size?`${H.font_size}px`:`${E.percentage_text_size||14}px`};
                    color: ${E.percentage_text_color||H.color||j.color||"white"};
                    font-weight: 600;
                    z-index: 10;
                    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
                    white-space: nowrap;
                  "
                    >
                      ${Math.round(M)}%
                    </div>
                  `:""}
          </div>

          ${!(null==t?void 0:t.states[E.entity])&&E.entity?i.qy`
                  <div
                    class="entity-error"
                    style="color: var(--error-color); font-size: 12px; margin-top: 4px;"
                  >
                    Entity not found: ${E.entity}
                  </div>
                `:""}
        </div>

        <!-- Left and Right Side Labels (Below Bar) -->
        ${E.left_enabled||E.right_enabled?i.qy`
                <div
                  class="bar-labels-below"
                  style="display: flex; justify-content: ${E.label_alignment||"space-between"}; align-items: center; margin-top: 8px; gap: 16px; width: 100%;"
                >
                  ${E.left_enabled?i.qy`
                        <div class="left-side-below" style="text-align: left;">
                          <span
                            style="font-size: ${H.font_size?`${H.font_size}px`:`${E.left_title_size||14}px`}; color: ${H.color||E.left_title_color||j.color||"var(--primary-text-color)"};"
                          >
                            ${E.left_title}:
                          </span>
                          <span
                            style="font-size: ${H.font_size?`${H.font_size}px`:`${E.left_value_size||14}px`}; font-weight: 600; color: ${H.color||E.left_value_color||j.color||"var(--primary-text-color)"}; margin-left: 4px;"
                          >
                            ${U}
                          </span>
                        </div>
                      `:i.qy`<div></div>`}
                  ${E.right_enabled?i.qy`
                        <div class="right-side-below" style="text-align: right;">
                          <span
                            style="font-size: ${H.font_size?`${H.font_size}px`:`${E.right_title_size||14}px`}; color: ${H.color||E.right_title_color||j.color||"var(--primary-text-color)"};"
                          >
                            ${E.right_title}:
                          </span>
                          <span
                            style="font-size: ${H.font_size?`${H.font_size}px`:`${E.right_value_size||14}px`}; font-weight: 600; color: ${H.color||E.right_value_color||j.color||"var(--primary-text-color)"}; margin-left: 4px;"
                          >
                            ${N}
                          </span>
                        </div>
                      `:i.qy`<div></div>`}
                </div>
              `:""}
        </div>
      </div>
    `}_hashString(e){let t=0;for(let o=0;o<e.length;o+=1)t=(t<<5)-t+e.charCodeAt(o),t|=0;return Math.abs(t)}validate(e){const t=e,o=[...super.validate(e).errors];return t.entity&&""!==t.entity.trim()||o.push("Entity ID is required"),t.height&&(t.height<5||t.height>200)&&o.push("Bar height must be between 5 and 200 pixels"),t.border_radius&&(t.border_radius<0||t.border_radius>100)&&o.push("Border radius must be between 0 and 100 pixels"),t.limit_entity&&""!==t.limit_entity.trim()&&(t.limit_entity.includes(".")||o.push("Limit entity must be a valid entity ID (e.g., sensor.battery_limit)")),{valid:0===o.length,errors:o}}getStyles(){return'\n      .bar-module-preview {\n        display: block; /* ensure bar occupies width of its container */\n        width: 100%;\n        max-width: 100%;\n        overflow: visible;\n        box-sizing: border-box;\n        min-width: 80px; /* keep a visible track inside flex rows */\n      }\n      \n      .bar-container {\n        width: 100%;\n        position: relative;\n        display: block;\n        box-sizing: border-box;\n        min-width: 0; /* allow flex parent to size correctly */\n      }\n      \n      .bar-fill {\n        position: relative;\n        z-index: 1;\n        overflow: hidden; /* Keep overlay animations clipped to rounded corners */\n      }\n      \n      .bar-fill-overlay {\n        position: absolute;\n        inset: 0;\n        pointer-events: none;\n        z-index: 2;\n        overflow: hidden;\n        mix-blend-mode: normal;\n      }\n      \n      /* Ensure overlay inherits border radius properly */\n      .bar-fill-overlay {\n        border-radius: inherit;\n      }\n      \n      /* Outline style animation */\n      @keyframes outline-pulse {\n        0%, 100% { opacity: 0.6; }\n        50% { opacity: 1; }\n      }\n      \n      .bar-limit-line {\n        opacity: 0.9;\n        transition: opacity 0.2s ease;\n      }\n      \n      .bar-limit-line:hover {\n        opacity: 1;\n      }\n      \n      .bar-name {\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--primary-text-color);\n        margin-bottom: 8px;\n        user-select: none;\n        word-wrap: break-word;\n      }\n      \n      .bar-value {\n        user-select: none;\n        text-shadow: 0 1px 2px rgba(0,0,0,0.1);\n      }\n      \n      .bar-value-outside {\n        user-select: none;\n        text-align: center;\n        font-weight: 600;\n        color: var(--primary-text-color);\n      }\n      \n      .entity-error {\n        font-size: 12px;\n        color: var(--error-color);\n        margin-top: 6px;\n        font-style: italic;\n        opacity: 0.8;\n      }\n      \n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n      \n      .settings-section * {\n        box-sizing: border-box;\n      }\n      \n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        margin-bottom: 12px !important;\n        padding-bottom: 0 !important;\n        border-bottom: none !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n      \n      .settings-section label {\n        display: block;\n        font-weight: 500;\n        margin-bottom: 4px;\n        color: var(--primary-text-color);\n      }\n      \n      .settings-section input,\n      .settings-section select {\n        width: 100%;\n        max-width: 100%;\n        padding: 8px;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--card-background-color);\n        color: var(--primary-text-color);\n        font-size: 14px;\n        box-sizing: border-box;\n      }\n      \n      .settings-section .checkbox-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-weight: 500;\n      }\n      \n      .settings-section .checkbox-wrapper input[type="checkbox"] {\n        width: auto;\n        margin: 0;\n      }\n      \n      .help-text {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        margin: 4px 0 0 0;\n        opacity: 0.8;\n        word-wrap: break-word;\n      }\n      \n      .number-input,\n      .text-input,\n      .entity-input,\n      .select-input {\n        transition: border-color 0.2s ease;\n      }\n      \n      .number-input:focus,\n      .text-input:focus,\n      .entity-input:focus,\n      .select-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 1px var(--primary-color);\n      }\n      \n      /* Fix padding overflow */\n      .module-general-settings {\n        max-width: 100%;\n        /* Allow dropdown menus to render outside local containers */\n        overflow: visible;\n      }\n      \n      .module-general-settings { }\n      /* Dropdown positioning fixes scoped to Bar module (defensive in case globals miss) */\n      .bar-module-preview .settings-section ha-select {\n        position: relative !important;\n        overflow: visible !important;\n        z-index: 9999 !important;\n      }\n\n      .bar-module-preview .settings-section ha-select .mdc-select__menu,\n      .bar-module-preview .settings-section ha-select mwc-menu,\n      .bar-module-preview .settings-section ha-select .mdc-menu,\n      .bar-module-preview .settings-section ha-select ha-menu {\n        /* Rely on HA menu positioning; ensure it\'s above */\n        z-index: 10001 !important;\n      }\n\n      .module-general-settings > * {\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Proper form field arrangement: Title -> Description -> Field */\n      .settings-section ha-form {\n        --ha-form-field-margin: 8px 0;\n      }\n\n      .settings-section ha-form::part(field) {\n        margin-bottom: 8px;\n      }\n\n      .settings-section ha-form .ha-form-label {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--primary-text-color);\n        margin-bottom: 4px;\n        display: block;\n      }\n\n      .settings-section ha-form .ha-form-description {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        margin-bottom: 8px;\n        display: block;\n        opacity: 0.8;\n        line-height: 1.4;\n      }\n\n      .settings-section ha-form mwc-formfield {\n        --mdc-typography-body2-font-size: 14px;\n      }\n\n      .settings-section ha-form ha-switch {\n        --switch-checked-color: var(--primary-color);\n        --switch-unchecked-color: var(--disabled-color);\n      }\n\n      /* Field arrangement styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n      \n        margin-bottom: 4px !important;\n        padding-bottom: 0 !important;\n        border-bottom: none !important;\n        display: block !important;\n        line-height: 1.2 !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n        font-weight: 400 !important;\n      }\n\n      /* Remove labels from ultra-color-picker when using external titles */\n      .settings-section ultra-color-picker .color-label {\n        display: none;\n      }\n\n      /* Prevent form fields from going off screen */\n      .property-input, .property-select {\n        max-width: 500px;\n      }\n\n      /* Apply max-width to ha-form elements */\n      .settings-section ha-form {\n        max-width: 500px;\n      }\n\n      /* Apply max-width to form inputs and selects */\n      .settings-section input,\n      .settings-section select,\n      .settings-section ha-textfield,\n      .settings-section ha-select {\n        max-width: 500px;\n      }\n      /* Give selects a consistent card background (scoped to bar module sections only) */\n      .bar-module-preview .settings-section ha-select {\n        background: var(--card-background-color) !important;\n        border: 1px solid var(--divider-color) !important;\n        border-radius: 6px !important;\n        padding: 4px 0 !important;\n        /* MWC menu and text field surfaces */\n        --mdc-theme-surface: var(--card-background-color);\n        --mdc-text-field-fill-color: var(--card-background-color);\n        --mdc-select-fill-color: var(--card-background-color);\n        --mdc-menu-surface-fill-color: var(--card-background-color);\n        --mdc-text-field-ink-color: var(--primary-text-color);\n        --mdc-text-field-outline-color: var(--divider-color);\n        --mdc-select-dropdown-icon-color: var(--secondary-text-color);\n        --mdc-theme-text-primary-on-background: var(--primary-text-color);\n        --mdc-theme-on-surface: var(--primary-text-color);\n      }\n\n      /* Ensure ha-form selects inherit same surface in all contexts */\n      .bar-module-preview .settings-section ha-form ha-select {\n        --mdc-theme-surface: var(--card-background-color);\n        --mdc-text-field-fill-color: var(--card-background-color);\n        --mdc-select-fill-color: var(--card-background-color);\n        --mdc-menu-surface-fill-color: var(--card-background-color);\n        --mdc-text-field-ink-color: var(--primary-text-color);\n        --mdc-text-field-outline-color: var(--divider-color);\n        --mdc-select-dropdown-icon-color: var(--secondary-text-color);\n        --mdc-theme-text-primary-on-background: var(--primary-text-color);\n        --mdc-theme-on-surface: var(--primary-text-color);\n      }\n\n      /* Give animation selects a proper background */\n      .settings-section[data-animation] ha-select,\n      .animation-select-group ha-select {\n        background: var(--card-background-color) !important;\n        border: 1px solid var(--divider-color) !important;\n        border-radius: 6px !important;\n        padding: 4px 0 !important;\n      }\n      /* Ensure percentage type dropdown has standard background container */\n      .percentage-type-group ha-select {\n        background: var(--card-background-color) !important;\n        border: 1px solid var(--divider-color) !important;\n        border-radius: 6px !important;\n        padding: 4px 0 !important;\n      }\n\n      /* Fix slider and input field layouts */\n      .settings-section .field-group {\n        max-width: 100%;\n        overflow: visible;\n        align-items: stretch;\n      }\n\n      /* Ensure slider containers don\'t get cut off */\n      .settings-section ha-form[style*="flex: 1"] {\n        min-width: 200px;\n        flex: 1 1 200px;\n      }\n\n      /* Fix input field containers */\n      .settings-section input[type="number"] {\n        min-width: 60px;\n        max-width: 80px;\n        flex-shrink: 0;\n      }\n\n      /* Ensure proper spacing for slider + input combos */\n      .settings-section div[style*="display: flex; gap: 8px"] {\n        gap: 8px !important;\n        align-items: center !important;\n        flex-wrap: nowrap !important;\n        min-width: 0;\n      }\n\n      .settings-section div[style*="display: flex; gap: 12px"] {\n        gap: 12px !important;\n        align-items: center !important;\n        flex-wrap: nowrap !important;\n        min-width: 0;\n      }\n\n      /* Prevent overflow in gradient editor */\n      .gradient-editor {\n        max-width: 100%;\n        overflow: visible;\n      }\n\n      .gradient-stop {\n        max-width: 100%;\n        overflow: visible;\n        position: relative;\n      }\n\n      /* Gradient stop drag handle styling */\n      .gradient-stop .drag-handle {\n        transition: all 0.2s ease;\n      }\n\n      .gradient-stop:hover .drag-handle {\n        color: var(--primary-color) !important;\n        transform: scale(1.1);\n      }\n\n      /* Ultra color picker sizing */\n      ultra-color-picker {\n        min-width: 40px;\n        max-width: 60px;\n        flex-shrink: 0;\n      }\n\n      /* Ensure gradient controls don\'t overflow */\n      .gradient-stops {\n        max-width: 100%;\n        overflow: visible;\n      }\n\n      /* Hide automatic value displays from ha-form sliders to prevent cut-off */\n      .settings-section ha-form ha-slider::part(value-display),\n      .settings-section ha-form mwc-slider::part(value-display),\n      .settings-section ha-form ha-slider .value-display,\n      .settings-section ha-form mwc-slider .value-display {\n        display: none !important;\n      }\n\n      /* Hide any automatic number displays that might appear next to sliders */\n      .settings-section ha-form .slider-value,\n      .settings-section ha-form .current-value,\n      .settings-section ha-form .number-display {\n        display: none !important;\n      }\n\n      /* Override any default slider value display styles */\n      .settings-section ha-form[data-field*="size"] .mdc-slider-value-indicator,\n      .settings-section ha-form[data-field*="size"] .value-indicator {\n        display: none !important;\n      }\n\n      /* More comprehensive hiding of slider value displays */\n      .settings-section ha-form ha-textfield[type="number"],\n      .settings-section ha-form mwc-textfield[type="number"],\n      .settings-section ha-form .number-input-display {\n        display: none !important;\n      }\n\n      /* Target specific Home Assistant slider value containers */\n      .settings-section ha-form .form-group .number-display,\n      .settings-section ha-form .ha-form-number .display-value,\n      .settings-section ha-form [role="slider"] + *:not(.mdc-slider-track),\n      .settings-section ha-form .mdc-slider + .value-display {\n        display: none !important;\n      }\n\n      /* Ensure sliders take full width without value displays */\n      .settings-section ha-form .mdc-slider,\n      .settings-section ha-form ha-slider {\n        width: 100% !important;\n        max-width: 100% !important;\n      }\n\n      /* Hide any text elements that might display current values */\n      .settings-section ha-form .field-wrapper > span:last-child,\n      .settings-section ha-form .form-control > span:last-child,\n      .settings-section ha-form .slider-container > span:last-child {\n        display: none !important;\n      }\n\n      /* Specifically target number displays in form groups */\n      .settings-section ha-form .form-group > *:last-child:not(ha-slider):not(.mdc-slider):not(input[type="range"]) {\n        display: none !important;\n      }\n\n      /* Custom Slider Controls - Optimized Design */\n      .number-range-control {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n      }\n\n      .range-slider {\n        flex: 0 0 65%;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        min-width: 0;\n      }\n\n      .range-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 18px;\n        height: 18px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .range-slider::-moz-range-thumb {\n        width: 18px;\n        height: 18px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .range-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .range-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .range-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .range-input {\n        flex: 0 0 20%;\n        padding: 6px 8px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        box-sizing: border-box;\n      }\n\n      .range-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .range-reset-btn {\n        width: 32px;\n        height: 32px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .range-reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .range-reset-btn ha-icon {\n        font-size: 14px;\n      }\n\n      /* Conditional Fields Grouping - Reusable Pattern */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n        border-left-color: var(--primary-color);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        margin: 0;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n        background: transparent;\n      }\n\n      /* Remove top margin from first field in conditional groups */\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      /* Ensure proper spacing within conditional field groups */\n      .conditional-fields-content .field-title {\n     \n      }\n\n      .conditional-fields-content .field-description {\n        color: var(--secondary-text-color);\n        opacity: 0.9;\n      }\n\n      /* Animation for conditional fields appearing */\n      .conditional-fields-group {\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      @keyframes slideInFromLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n\n      /* Make conditional fields responsive */\n      @media (max-width: 768px) {\n        .conditional-fields-group {\n          border-left-width: 3px;\n        }\n        \n        .conditional-fields-header {\n          padding: 10px 12px;\n          font-size: 13px;\n        }\n        \n        .conditional-fields-content {\n          padding: 12px;\n        }\n      }\n\n      /* ==========================\n         Bar Animations\n         These classes animate the .bar-fill element when triggered\n         ========================== */\n      .bar-fill.bar-anim-charging::after {\n        content: \'\';\n        position: absolute; inset: 0; pointer-events: none;\n        background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.25) 0, rgba(255,255,255,0.25) 10px, transparent 10px, transparent 20px);\n        background-size: 28px 28px;\n        animation: charging-stripes 1.2s linear infinite;\n      }\n      @keyframes charging-stripes { 0% { background-position: 0 0; } 100% { background-position: 28px 0; } }\n\n      .bar-fill.bar-anim-pulse { animation: bar-pulse 1.6s ease-in-out infinite; }\n      @keyframes bar-pulse { 0%,100% { filter: brightness(1); } 50% { filter: brightness(1.3); } }\n\n      .bar-fill.bar-anim-blink { animation: bar-blink 1s steps(2, start) infinite; }\n      @keyframes bar-blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }\n\n      .bar-fill.bar-anim-bounce { animation: bar-bounce 1.2s ease-in-out infinite; transform-origin: center; }\n      @keyframes bar-bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-2px); } }\n\n      .bar-fill.bar-anim-glow { box-shadow: 0 0 10px currentColor, 0 0 20px currentColor; animation: bar-glow 1.5s ease-in-out infinite; }\n      @keyframes bar-glow { 0%,100% { filter: brightness(1); } 50% { filter: brightness(1.4); } }\n\n      .bar-fill.bar-anim-rainbow::after { content:\'\'; position:absolute; inset:0; pointer-events:none; background: linear-gradient(90deg, red, orange, yellow, green, cyan, blue, violet); background-size: 400% 100%; mix-blend-mode: overlay; opacity: 0.9; animation: rainbow-shift 3s linear infinite; }\n      @keyframes rainbow-shift { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }\n\n      /* Bubbles: two extended layers with discrete bubbles, animated bottom -> top */\n      .bar-fill.bar-anim-bubbles::before,\n      .bar-fill.bar-anim-bubbles::after {\n        content: \'\';\n        position: absolute;\n        left: 0; right: 0;\n        top: -220%;\n        height: 440%;\n        pointer-events: none;\n        will-change: transform, opacity;\n        background-repeat: no-repeat;\n        filter: none;\n      }\n      /* Layer 1 (faster, fewer bubbles) */\n      .bar-fill.bar-anim-bubbles::before {\n        background:\n          radial-gradient(circle at 8% 80%,  rgba(255,255,255,0.55) 0 6px, transparent 7px),\n          radial-gradient(circle at 22% 55%, rgba(255,255,255,0.45) 0 5px, transparent 6px),\n          radial-gradient(circle at 37% 72%, rgba(255,255,255,0.50) 0 7px, transparent 8px),\n          radial-gradient(circle at 49% 60%, rgba(255,255,255,0.42) 0 5px, transparent 6px),\n          radial-gradient(circle at 63% 82%, rgba(255,255,255,0.50) 0 6px, transparent 7px),\n          radial-gradient(circle at 77% 68%, rgba(255,255,255,0.46) 0 5px, transparent 6px),\n          radial-gradient(circle at 89% 78%, rgba(255,255,255,0.52) 0 6px, transparent 7px);\n        animation: bubbles-rise-layer1 7s linear infinite;\n        transform: translateY(0%);\n      }\n      /* Layer 2 (slower, different positions) */\n      .bar-fill.bar-anim-bubbles::after {\n        background:\n          radial-gradient(circle at 14% 84%, rgba(255,255,255,0.48) 0 7px, transparent 8px),\n          radial-gradient(circle at 30% 66%, rgba(255,255,255,0.40) 0 5px, transparent 6px),\n          radial-gradient(circle at 55% 82%, rgba(255,255,255,0.50) 0 6px, transparent 7px),\n          radial-gradient(circle at 71% 64%, rgba(255,255,255,0.44) 0 5px, transparent 6px),\n          radial-gradient(circle at 84% 78%, rgba(255,255,255,0.50) 0 7px, transparent 8px);\n        animation: bubbles-rise-layer2 10s linear infinite;\n        animation-delay: 1.2s;\n        transform: translateY(0%);\n      }\n      @keyframes bubbles-rise-layer1 {\n        0%   { transform: translateY(0%); opacity: 0; }\n        22%  { opacity: 1; }\n        88%  { opacity: 1; }\n        100% { transform: translateY(-58%); opacity: 0; }\n      }\n      @keyframes bubbles-rise-layer2 {\n        0%   { transform: translateY(0%); opacity: 0; }\n        26%  { opacity: 1; }\n        88%  { opacity: 1; }\n        100% { transform: translateY(-58%); opacity: 0; }\n      }\n\n      .bar-fill.bar-anim-fill { animation: bar-fill-wave 1.5s ease-in-out infinite; }\n      @keyframes bar-fill-wave { 0%,100% { filter: saturate(1); } 50% { filter: saturate(1.4); } }\n\n      .bar-fill.bar-anim-ripple::after {\n        content: \'\';\n        position: absolute; inset: 0; pointer-events: none;\n        background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.65) 20%, transparent 40%);\n        background-size: 200% 100%;\n        animation: ripple-sweep 1.1s ease-in-out infinite;\n        opacity: 0.9;\n      }\n      @keyframes ripple-sweep {\n        0% { background-position-x: -50%; }\n        100% { background-position-x: 150%; }\n      }\n\n      /* Traffic: moving hazard chevrons left->right to evoke flowing traffic lanes */\n      .bar-fill.bar-anim-traffic::after {\n        content:\'\'; position:absolute; inset:0; pointer-events:none; opacity: 0.95;\n        background-image:\n          linear-gradient(135deg, rgba(255,255,255,0.00) 0 40%, rgba(255,255,255,0.25) 40% 60%, rgba(255,255,255,0.00) 60% 100%),\n          linear-gradient(-135deg, rgba(255,255,255,0.00) 0 40%, rgba(255,255,255,0.25) 40% 60%, rgba(255,255,255,0.00) 60% 100%);\n        background-size: 44px 100%, 44px 100%;\n        background-position: 0 0, 22px 0;\n        animation: traffic-chevrons 1s linear infinite;\n        mix-blend-mode: screen;\n      }\n      @keyframes traffic-chevrons { 0% { background-position: 0 0, 22px 0; } 100% { background-position: 44px 0, 66px 0; } }\n\n      /* Traffic Flow: thicker bands with alternating opacity, moving left->right */\n      \n\n      .bar-fill.bar-anim-heartbeat { animation: heartbeat 1.2s ease-in-out infinite; transform-origin: center; }\n      @keyframes heartbeat { 0%,100% { transform: scale(1); } 20% { transform: scale(1.02); } 40% { transform: scale(0.99); } 60% { transform: scale(1.02); } 80% { transform: scale(1); } }\n\n      .bar-fill.bar-anim-flicker { animation: flicker 2s infinite; }\n      @keyframes flicker { 0%,19%,21%,23%,25%,54%,56%,100%{ opacity:1 } 20%,24%,55%{ opacity:0.4 } }\n\n      .bar-fill.bar-anim-shimmer { position: relative; overflow: hidden; }\n      .bar-fill.bar-anim-shimmer::after { content:\'\'; position:absolute; top:0; bottom:0; width:40%; left:-40%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent); animation: shimmer-move 1.4s ease-in-out infinite; }\n      @keyframes shimmer-move { 0% { left: -40%; } 100% { left: 120%; } }\n\n      .bar-fill.bar-anim-vibrate { animation: vibrate 0.15s linear infinite; }\n      @keyframes vibrate { 0% { transform: translate(0); } 25% { transform: translate(0.5px,-0.5px); } 50% { transform: translate(-0.5px,0.5px); } 75% { transform: translate(0.5px,0.5px); } 100% { transform: translate(0); } }\n    '}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}getBackgroundImageCSS(e,t){const o=e.background_image_type,i=e.background_image,a=e.background_image_entity;switch(o){case"upload":if(i)return i.startsWith("/api/image/serve/")?`url("${this.getImageUrl(t,i)}")`:(i.startsWith("data:image/"),`url("${i}")`);break;case"entity":if(a&&t){const e=t.states[a];if(e){const t=e.attributes.entity_picture||e.attributes.image||e.state;if(t&&"unknown"!==t&&"unavailable"!==t)return`url("${t}")`}}break;case"url":if(i)return`url("${i}")`;break;default:return"none"}return"none"}getImageUrl(e,t){if(!t)return"";if(t.startsWith("http"))return t;if(t.startsWith("data:image/"))return t;if(t.includes("/api/image/serve/")){const o=t.match(/\/api\/image\/serve\/([^\/]+)/);if(o&&o[1]){const i=o[1];try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/api/image/serve/${i}/original`}catch(e){return t}}return t}return t.startsWith("/")?`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}${t}`:t}getBarSizeFromHeight(e){return e<=12?"thin":e<=20?"regular":e<=30?"thick":"thiccc"}getBarRadiusFromStyle(e){return 0===e?"square":e<8?"rounded-square":"round"}interpolateColor(e,t,o){const i=this.hexToRgb(e),a=this.hexToRgb(t);if(!i||!a)return e;const n=Math.round(i.r+(a.r-i.r)*o),r=Math.round(i.g+(a.g-i.g)*o),s=Math.round(i.b+(a.b-i.b)*o);return this.rgbToHex(n,r,s)}hexToRgb(e){if(!e.startsWith("#"))return null;const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}rgbToHex(e,t,o){return`#${((1<<24)+(e<<16)+(t<<8)+o).toString(16).slice(1)}`}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}}},768:(e,t,o)=>{var i=o(183),a=o(276),n=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};const r=["#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#FF0000","#FF3333","#FF6666","#FF9999","#FFCCCC","#FF6600","#FF8833","#FFAA66","#FFCC99","#FFE6CC","#FFFF00","#FFFF33","#FFFF66","#FFFF99","#FFFFCC","#00FF00","#33FF33","#66FF66","#99FF99","#CCFFCC","#0000FF","#3333FF","#6666FF","#9999FF","#CCCCFF","#9900FF","#AA33FF","#BB66FF","#CC99FF","#DDCCFF","var(--primary-color)","var(--accent-color)","var(--error-color)","var(--warning-color)","var(--success-color)","var(--info-color)","var(--primary-text-color)","var(--secondary-text-color)","var(--disabled-text-color)","var(--divider-color)"];let s=class extends i.WF{constructor(){super(...arguments),this.disabled=!1,this._showPalette=!1}firstUpdated(){this._currentValue=this.value,this._textInputValue=this.value,this._documentClickHandler=this._handleDocumentClick.bind(this),document.addEventListener("click",this._documentClickHandler,!0)}disconnectedCallback(){super.disconnectedCallback(),this._documentClickHandler&&(document.removeEventListener("click",this._documentClickHandler,!0),this._documentClickHandler=void 0)}_handleDocumentClick(e){var t,o,i;if(!this._showPalette)return;const a=null===(o=(t=e).composedPath)||void 0===o?void 0:o.call(t);if(a&&a.includes(this))return;const n=e.target;(null===(i=this.shadowRoot)||void 0===i?void 0:i.contains(n))||n instanceof HTMLInputElement&&"color"===n.type||(this._showPalette=!1)}updated(e){e.has("value")&&(this._currentValue=this.value,this._textInputValue=this.value)}_togglePalette(e){e.stopPropagation(),this.disabled||(this._showPalette=!this._showPalette,console.log(`🎨 UltraColorPicker: Toggled palette to ${this._showPalette}`))}_selectColor(e,t){t.stopPropagation(),this._currentValue=e,this.value=e,this._showPalette=!1,this.requestUpdate();const o=new CustomEvent("value-changed",{detail:{value:e},bubbles:!0,composed:!0});this.dispatchEvent(o)}_handleNativeColorChange(e){e.stopPropagation();const t=e.target.value;this._selectColor(t,e)}_handleTextInputChange(e){const t=e.target;this._textInputValue=t.value}_handleTextInputKeyDown(e){"Enter"===e.key?(e.preventDefault(),this._applyTextInputValue()):"Escape"===e.key&&(e.preventDefault(),this._textInputValue=this._currentValue,this._showPalette=!1)}_applyTextInputValue(){void 0!==this._textInputValue&&this._selectColor(this._textInputValue,new Event("change"))}_isValidColor(e){return!!e&&([/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/,/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/,/^hsl\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*\)$/,/^hsla\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*,\s*[\d.]+\s*\)$/,/^var\(--[\w-]+\)$/].some((t=>t.test(e)))||["transparent","red","blue","green","yellow","orange","purple","pink","brown","black","white","gray","grey"].includes(e.toLowerCase()))}_resetToDefault(){const e=this.defaultValue||"";this._currentValue=e;const t=new CustomEvent("value-changed",{detail:{value:e},bubbles:!0,composed:!0});this.dispatchEvent(t)}_getDisplayValue(){return this._currentValue&&""!==this._currentValue?this._currentValue:this.defaultValue||""}_getColorForNativeInput(){const e=this._getDisplayValue();if(e.startsWith("var(--")){const t=document.createElement("div");t.style.color=e,document.body.appendChild(t);const o=getComputedStyle(t).color;if(document.body.removeChild(t),o&&o.startsWith("rgb")){const e=o.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);if(e){const[t,o,i,a]=e,n=e=>e.toString(16).padStart(2,"0");return`#${n(parseInt(o))}${n(parseInt(i))}${n(parseInt(a))}`}}return e.includes("--primary-color")?"#03a9f4":e.includes("--primary-text-color")?"#ffffff":"#000000"}return e.startsWith("#")?e:"#000000"}_isDefaultValue(){return!this._currentValue||""===this._currentValue||this._currentValue===this.defaultValue}_getContrastColor(e){if(!e||e.startsWith("var(")||e.includes("gradient"))return"var(--primary-text-color)";if(e.startsWith("#")){const t=e.replace("#","");return(.299*parseInt(t.substr(0,2),16)+.587*parseInt(t.substr(2,2),16)+.114*parseInt(t.substr(4,2),16))/255>.5?"#000000":"#ffffff"}return"var(--primary-text-color)"}render(){const e=this._getDisplayValue(),t=this._getColorForNativeInput();return i.qy`
      <div class="ultra-color-picker-container">
        ${this.label?i.qy`<label class="color-label">${this.label}</label>`:""}

        <div class="color-picker-wrapper">
          <!-- Main trigger input field -->
          <div
            class="color-input-field ${this.disabled?"disabled":""}"
            style="background-color: ${e}; color: ${this._getContrastColor(e)};"
            @click=${this._togglePalette}
            tabindex="0"
            role="button"
            aria-label="Open color palette"
            @keydown=${e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._togglePalette(e))}}
          >
            <span class="color-value">${e}</span>
            <ha-icon
              icon="mdi:chevron-${this._showPalette?"up":"down"}"
              class="dropdown-icon"
            ></ha-icon>
          </div>

          <!-- Reset button -->
          <ha-icon-button
            class="reset-button ${this._isDefaultValue()?"disabled":""}"
            .disabled=${this._isDefaultValue()}
            @click=${this._resetToDefault}
            .title=${"Reset to default"}
          >
            <ha-icon icon="mdi:refresh"></ha-icon>
          </ha-icon-button>
        </div>

        <!-- Accordion-style palette -->
        ${this._showPalette?i.qy`
              <div class="color-palette-accordion">
                <!-- Text Input Section -->
                <div class="text-input-section">
                  <div class="input-header">
                    <label class="input-label">Type color value:</label>
                    <div class="native-picker-wrapper">
                      <button
                        class="native-picker-btn"
                        type="button"
                        title="Open native color picker"
                      >
                        <ha-icon icon="mdi:eyedropper"></ha-icon>
                      </button>
                      <input
                        id="native-color-input"
                        type="color"
                        .value=${t}
                        @change=${this._handleNativeColorChange}
                        @click=${e=>e.stopPropagation()}
                        @focus=${e=>e.stopPropagation()}
                        @blur=${e=>e.stopPropagation()}
                        class="native-color-overlay"
                        title="Open native color picker"
                      />
                    </div>
                  </div>

                  <div class="text-input-wrapper">
                    <input
                      type="text"
                      class="color-text-input ${this._isValidColor(this._textInputValue||"")?"valid":"invalid"}"
                      .value=${this._textInputValue||""}
                      @input=${this._handleTextInputChange}
                      @keydown=${this._handleTextInputKeyDown}
                      @click=${e=>e.stopPropagation()}
                      @focus=${e=>e.stopPropagation()}
                      placeholder="e.g. #ff0000, rgb(255,0,0), var(--primary-color)"
                      spellcheck="false"
                    />
                    <button
                      class="apply-text-btn ${this._isValidColor(this._textInputValue||"")?"":"disabled"}"
                      @click=${e=>{e.stopPropagation(),this._applyTextInputValue()}}
                      .disabled=${!this._isValidColor(this._textInputValue||"")}
                      type="button"
                      title="Apply color"
                    >
                      <ha-icon icon="mdi:check"></ha-icon>
                    </button>
                  </div>
                </div>

                <!-- Color Palette Grid -->
                <div class="palette-grid">
                  ${r.map((e=>i.qy`
                      <div
                        class="color-swatch ${this._currentValue===e?"selected":""}"
                        style="background-color: ${e}"
                        @click=${t=>this._selectColor(e,t)}
                        title="${e}"
                      ></div>
                    `))}
                </div>
              </div>
            `:""}
      </div>
    `}static get styles(){return i.AH`
      .ultra-color-picker-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
        position: relative;
        box-sizing: border-box;
      }

      .color-label {
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
        margin-bottom: 4px;
      }

      .color-picker-wrapper {
        display: flex;
        align-items: center;
        gap: 12px;
        position: relative;
        /* Ensure palette can overflow this container */
        overflow: visible;
        z-index: 1;
      }

      .color-input-field {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color, #fff);
        color: var(--primary-text-color);
        font-family: var(--code-font-family, monospace);
        font-size: 14px;
        cursor: pointer;
        user-select: none;
        transition: all 0.2s ease;
        min-height: 36px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
      }

      .color-input-field:hover:not(.disabled) {
        border-color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.1));
      }

      .color-input-field:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.2);
      }

      .color-input-field.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: var(--disabled-color, #f5f5f5);
        color: var(--disabled-text-color);
      }

      .color-value {
        flex: 1;
        color: var(--primary-text-color);
        font-family: var(--code-font-family, monospace);
        font-size: 14px;
      }

      .dropdown-icon {
        --mdc-icon-size: 20px;
        color: var(--secondary-text-color);
        transition: transform 0.2s ease;
        margin-left: 8px;
      }

      .reset-button {
        --mdc-icon-button-size: 40px;
        --mdc-icon-size: 20px;
        --mdc-theme-primary: var(--primary-color);
        border-radius: 6px;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .reset-button:not(.disabled):hover {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
        transform: rotate(180deg);
        transform-origin: center center;
      }

      .reset-button ha-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        transform-origin: center center;
      }

      .reset-button.disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .reset-button.disabled ha-icon {
        color: var(--disabled-text-color);
      }

      .color-palette-accordion {
        margin-top: 12px;
        background: var(--card-background-color, white);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        padding: 16px;
        width: 100%;
        box-sizing: border-box;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        animation: expandDown 0.2s ease-out;
      }

      @keyframes expandDown {
        from {
          opacity: 0;
          transform: scaleY(0.8);
          transform-origin: top;
        }
        to {
          opacity: 1;
          transform: scaleY(1);
          transform-origin: top;
        }
      }

      .text-input-section {
        margin-bottom: 16px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--divider-color);
      }

      .input-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .input-label {
        display: block;
        font-size: 12px;
        font-weight: 500;
        color: var(--secondary-text-color);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .text-input-wrapper {
        display: flex;
        gap: 8px;
        align-items: stretch;
      }

      .color-text-input {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-family: var(--code-font-family, 'Courier New', monospace);
        font-size: 14px;
        transition: all 0.2s ease;
        outline: none;
      }

      .color-text-input:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.2);
      }

      .color-text-input.valid {
        border-color: var(--success-color, #4caf50);
      }

      .color-text-input.invalid {
        border-color: var(--error-color, #f44336);
      }

      .apply-text-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 12px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 44px;
      }

      .apply-text-btn:hover:not(.disabled) {
        background: var(--primary-color-dark, var(--primary-color));
        transform: scale(1.05);
      }

      .apply-text-btn.disabled {
        background: var(--disabled-color, #cccccc);
        color: var(--disabled-text-color);
        cursor: not-allowed;
        opacity: 0.6;
      }

      .apply-text-btn ha-icon {
        --mdc-icon-size: 18px;
      }

      .palette-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(32px, 1fr));
        gap: 8px;
        margin-bottom: 0;
        width: 100%;
        box-sizing: border-box;
        overflow: hidden;
      }

      .color-swatch {
        width: 28px;
        height: 28px;
        border-radius: 4px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s ease;
        position: relative;
      }

      .color-swatch:hover {
        transform: scale(1.1);
        border-color: var(--primary-color);
      }

      .color-swatch.selected {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.3);
      }

      .color-swatch[style*='var(--'] {
        position: relative;
      }

      .color-swatch[style*='var(--']:after {
        content: 'T';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 12px;
        font-weight: bold;
        color: var(--primary-text-color);
        text-shadow: 0 0 2px rgba(255, 255, 255, 0.8);
      }

      .native-picker-wrapper {
        position: relative;
        display: inline-block;
      }

      .native-picker-btn {
        background: none;
        border: none;
        padding: 8px;
        border-radius: 6px;
        cursor: pointer;
        color: var(--primary-color);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 36px;
        height: 36px;
        pointer-events: none; /* Let clicks pass through to the overlay */
      }

      .native-picker-btn:hover {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
        transform: scale(1.1);
      }

      .native-picker-btn ha-icon {
        --mdc-icon-size: 18px;
        transition: transform 0.2s ease;
      }

      .native-color-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
        border: none;
        background: transparent;
        z-index: 1;
        border-radius: 6px;
      }

      .native-color-overlay::-webkit-color-swatch-wrapper {
        padding: 0;
        border: none;
        border-radius: 6px;
      }

      .native-color-overlay::-webkit-color-swatch {
        border: none;
        border-radius: 6px;
      }

      .native-picker-wrapper:hover .native-picker-btn {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
        transform: scale(1.1);
      }

      @media (max-width: 768px) {
        .color-picker-wrapper {
          gap: 8px;
        }

        .color-input-field {
          font-size: 13px;
          padding: 6px 10px;
        }

        .color-palette-accordion {
          padding: 12px;
        }

        .palette-grid {
          grid-template-columns: repeat(auto-fit, minmax(28px, 1fr));
          gap: 6px;
        }

        .color-swatch {
          width: 28px;
          height: 28px;
        }

        .input-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .text-input-wrapper {
          flex-direction: column;
          gap: 8px;
        }

        .color-text-input {
          width: 100%;
        }
      }
    `}};n([(0,a.MZ)({attribute:!1})],s.prototype,"hass",void 0),n([(0,a.MZ)()],s.prototype,"value",void 0),n([(0,a.MZ)()],s.prototype,"label",void 0),n([(0,a.MZ)()],s.prototype,"defaultValue",void 0),n([(0,a.MZ)({type:Boolean})],s.prototype,"disabled",void 0),n([(0,a.wk)()],s.prototype,"_currentValue",void 0),n([(0,a.wk)()],s.prototype,"_showPalette",void 0),n([(0,a.wk)()],s.prototype,"_textInputValue",void 0),s=n([(0,a.EM)("ultra-color-picker")],s)},790:(e,t,o)=>{o.d(t,{R:()=>p});var i=o(183),a=o(456),n=o(30);class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}setHass(e){this.hass=e}async executeAction(e){if(this.hass&&e.action_type&&"none"!==e.action_type)try{if(e.confirmation&&!confirm(e.confirmation.text||"Are you sure?"))return;switch(e.action_type){case"toggle":e.entity&&await this.hass.callService("homeassistant","toggle",{entity_id:e.entity});break;case"show_more_info":if(e.entity){const t=new CustomEvent("hass-more-info",{detail:{entityId:e.entity},bubbles:!0,composed:!0});document.dispatchEvent(t)}break;case"navigate":if(e.navigation_path){history.pushState(null,"",e.navigation_path);const t=new CustomEvent("location-changed",{detail:{replace:!1},bubbles:!0,composed:!0});window.dispatchEvent(t)}break;case"url":if(e.url||e.url_path){const t=e.url||e.url_path||"";window.open(t,"_blank")}break;case"call_service":if(e.service){const[t,o]=e.service.split(".");t&&o&&await this.hass.callService(t,o,e.service_data,e.target)}break;case"perform_action":if(e.custom_action){const t=new CustomEvent("action",{detail:{action:"tap",config:e.custom_action},bubbles:!0,composed:!0});document.dispatchEvent(t)}break;case"show_map":if(e.latitude&&e.longitude){const t=`/map?latitude=${e.latitude}&longitude=${e.longitude}`;history.pushState(null,"",t);const o=new CustomEvent("location-changed",{detail:{replace:!1},bubbles:!0,composed:!0});window.dispatchEvent(o)}break;case"voice_assistant":if(!1!==e.start_listening){const e=new CustomEvent("hass-start-voice-conversation",{bubbles:!0,composed:!0});document.dispatchEvent(e)}break;case"trigger":e.entity&&await this.hass.callService("automation","trigger",{entity_id:e.entity});break;default:console.warn("Unknown action type:",e.action_type)}}catch(e){console.error("Error executing action:",e)}}getActionTypeOptions(){return[{value:"none",label:"No Action"},{value:"toggle",label:"Toggle"},{value:"show_more_info",label:"Show More Info"},{value:"navigate",label:"Navigate to Path"},{value:"url",label:"Open URL"},{value:"call_service",label:"Call Service"},{value:"perform_action",label:"Perform Action"},{value:"show_map",label:"Show Map"},{value:"voice_assistant",label:"Voice Assistant"},{value:"trigger",label:"Trigger"}]}validateAction(e){const t=[];if(!e.action_type||"none"===e.action_type)return{valid:!0,errors:[]};switch(e.action_type){case"toggle":case"show_more_info":case"trigger":e.entity||t.push("Entity is required for this action type");break;case"navigate":e.navigation_path||t.push("Navigation path is required");break;case"url":e.url||e.url_path||t.push("URL is required");break;case"call_service":e.service?e.service.includes(".")||t.push("Service must be in domain.service format"):t.push("Service is required");break;case"show_map":void 0!==e.latitude&&void 0!==e.longitude||t.push("Latitude and longitude are required for map action")}return{valid:0===t.length,errors:t}}renderActionForm(e,t,o){return{action:t,actionTypes:this.getActionTypeOptions(),onUpdate:o,validate:()=>this.validateAction(t)}}}const s=r.getInstance();var l=o(662),d=o(796),c=(o(768),o(381));class p extends n.m{constructor(){super(...arguments),this.metadata={type:"button",title:"Button",description:"Interactive buttons with actions",author:"WJD Designs",version:"1.0.0",icon:"mdi:gesture-tap-button",category:"interactive",tags:["button","action","click","interactive"]}}createDefault(e,t){return{id:e||this.generateId("button"),type:"button",label:"",action:{action_type:"none"},style:"flat",icon:"",icon_position:"before",show_icon:!1,background_color:"var(--primary-color)",text_color:"white",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},enable_hover_effect:!0,hover_background_color:"var(--divider-color)"}}getButtonStyles(){return[{value:"flat",label:"Flat (Default)"},{value:"glossy",label:"Glossy"},{value:"embossed",label:"Embossed"},{value:"inset",label:"Inset"},{value:"gradient-overlay",label:"Gradient Overlay"},{value:"neon-glow",label:"Neon Glow"},{value:"outline",label:"Outline"},{value:"glass",label:"Glass"},{value:"metallic",label:"Metallic"}]}getAlignmentOptions(){return[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"},{value:"justify",label:"Justify (Full Width)"}]}getIconPositionOptions(){return[{value:"before",label:"Before Text"},{value:"after",label:"After Text"}]}getHoverEffectOptions(){return[{value:"none",label:"None"},{value:"color",label:"Color Change"},{value:"scale",label:"Scale"},{value:"glow",label:"Glow"},{value:"lift",label:"Lift (translate Y)"}]}renderGeneralTab(e,t,o,n){var r,s;const l=e,d=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}
      <div class="general-tab">
        <!-- Basic Settings -->
        ${this.renderSettingsSection((0,a.kg)("editor.button.basic.title",d,"Basic Settings"),(0,a.kg)("editor.button.basic.desc",d,"Configure the button appearance and text content."),[{title:(0,a.kg)("editor.button.text.title",d,"Button Text"),description:(0,a.kg)("editor.button.text.desc",d,"Text to display on the button (leave blank for icon-only)."),hass:t,data:{label:null!==(s=l.label)&&void 0!==s?s:""},schema:[this.textField("label")],onChange:e=>n(e.detail.value)},{title:(0,a.kg)("editor.button.style.title",d,"Button Style"),description:(0,a.kg)("editor.button.style.desc",d,"Visual style of the button"),hass:t,data:{style:l.style||"flat"},schema:[this.selectField("style",this.getButtonStyles())],onChange:e=>n(e.detail.value)},{title:(0,a.kg)("editor.button.alignment.title",d,"Alignment"),description:(0,a.kg)("editor.button.alignment.desc",d,"How the button is aligned within its container"),hass:t,data:{alignment:l.alignment||"center"},schema:[this.selectField("alignment",this.getAlignmentOptions())],onChange:e=>n(e.detail.value)}])}

        <!-- Icon Settings (all fields contained within the same section) -->
        ${(()=>{const e=[{title:(0,a.kg)("editor.button.show_icon",d,"Show Icon"),description:(0,a.kg)("editor.button.show_icon_desc",d,"Display an icon on the button"),hass:t,data:{show_icon:l.show_icon||!1},schema:[this.booleanField("show_icon")],onChange:e=>n(e.detail.value)}];return l.show_icon&&e.push({title:(0,a.kg)("editor.button.icon",d,"Icon"),description:(0,a.kg)("editor.button.icon_desc",d,"Icon to display (e.g., mdi:home)"),hass:t,data:{icon:l.icon||""},schema:[this.iconField("icon")],onChange:e=>n(e.detail.value)},{title:(0,a.kg)("editor.button.icon_position",d,"Icon Position"),description:(0,a.kg)("editor.button.icon_position_desc",d,"Position of the icon relative to text"),hass:t,data:{icon_position:l.icon_position||"before"},schema:[this.selectField("icon_position",this.getIconPositionOptions())],onChange:e=>n(e.detail.value)}),this.renderSettingsSection((0,a.kg)("editor.button.icon.title",d,"Icon Settings"),(0,a.kg)("editor.button.icon.desc",d,"Configure icon display and positioning for the button."),e)})()}

        <!-- Colors -->
        <div class="settings-section">
          <div class="section-title">${(0,a.kg)("editor.button.colors.title",d,"Colors")}</div>

          <div class="color-controls">
            <ultra-color-picker
              .label=${(0,a.kg)("editor.button.colors.background",d,"Background Color")}
              .value=${l.background_color||"var(--primary-color)"}
              .defaultValue=${"var(--primary-color)"}
              .hass=${t}
              @value-changed=${e=>n({background_color:e.detail.value})}
            ></ultra-color-picker>

            <ultra-color-picker
              .label=${(0,a.kg)("editor.button.colors.text",d,"Text Color")}
              .value=${l.text_color||"white"}
              .defaultValue=${"white"}
              .hass=${t}
              @value-changed=${e=>n({text_color:e.detail.value})}
            ></ultra-color-picker>
          </div>
        </div>

        <!-- Hover Effects (replicated pattern from image-module) -->
        <div class="settings-section">
          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
          >
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px;"
            >
              ${(0,a.kg)("editor.button.hover.title",d,"Hover Effects")}
            </div>
            <ha-switch
              .checked=${l.enable_hover_effect||!1}
              @change=${e=>{const t=e.target;n({enable_hover_effect:t.checked})}}
            ></ha-switch>
          </div>

          ${l.enable_hover_effect?i.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,a.kg)("editor.button.hover.effect_type",d,"Effect Type"),(0,a.kg)("editor.button.hover.effect_type_desc",d,"Choose the hover effect for this button."),t,{hover_effect:l.hover_effect||"color"},[this.selectField("hover_effect",this.getHoverEffectOptions())],(e=>n(e.detail.value)))}
                </div>

                ${"color"===(l.hover_effect||"color")?i.qy`
                      <div class="field-group" style="margin-bottom: 16px;">
                        <ultra-color-picker
                          .label=${(0,a.kg)("editor.button.hover.hover_color",d,"Hover Color")}
                          .value=${l.hover_background_color||"var(--primary-color)"}
                          .defaultValue=${"var(--primary-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({hover_background_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>
                    `:""}
                ${"glow"===(l.hover_effect||"color")?i.qy`
                      <div class="field-group" style="margin-bottom: 16px;">
                        <ultra-color-picker
                          .label=${(0,a.kg)("editor.button.hover.glow_color",d,"Glow Color")}
                          .value=${l.hover_glow_color||"var(--primary-color)"}
                          .defaultValue=${"var(--primary-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({hover_glow_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>
                    `:""}
              `:i.qy`
                <div
                  style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                >
                  ${(0,a.kg)("editor.button.hover.enable_toggle_desc",d,"Enable the toggle above to configure hover effects")}
                </div>
              `}
        </div>

        <!-- Link Action removed: use global Tap/Hold/Double-Tap actions instead -->
      </div>
    `}renderLinkActionForm(e,t,o){const a=s.getActionTypeOptions();return i.qy`
      <div class="link-action-form">
        <!-- Action Type -->
        <div class="field-group" style="margin-bottom: 16px;">
          ${this.renderFieldSection("Action Type","Choose what happens when the button is clicked",t,{action_type:e.action_type||"none"},[this.selectField("action_type",a)],(t=>o(Object.assign(Object.assign({},e),{action_type:t.detail.value.action_type}))))}
        </div>

        ${this.renderActionTypeSpecificFields(e,t,o)}
      </div>
    `}renderActionTypeSpecificFields(e,t,o){switch(e.action_type){case"toggle":case"show_more_info":case"trigger":return this.renderFieldSection("Entity","Select the entity to interact with",t,{entity:e.entity||""},[this.entityField("entity")],(t=>o(Object.assign(Object.assign({},e),{entity:t.detail.value.entity}))));case"navigate":return this.renderFieldSection("Navigation Path","Path to navigate to (e.g., /dashboard/energy)",t,{navigation_path:e.navigation_path||""},[this.textField("navigation_path")],(t=>o(Object.assign(Object.assign({},e),{navigation_path:t.detail.value.navigation_path}))));case"url":return this.renderFieldSection("URL","URL to open (e.g., https://example.com)",t,{url:e.url||""},[this.textField("url")],(t=>o(Object.assign(Object.assign({},e),{url:t.detail.value.url}))));case"call_service":return i.qy`
          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection("Service","Service to call (e.g., light.turn_on)",t,{service:e.service||""},[this.textField("service")],(t=>o(Object.assign(Object.assign({},e),{service:t.detail.value.service}))))}
          </div>

          <div class="field-group">
            ${this.renderFieldSection("Service Data (JSON)","Optional data to pass to the service (JSON format)",t,{service_data:JSON.stringify(e.service_data||{})},[this.textField("service_data")],(t=>{try{const i=JSON.parse(t.detail.value.service_data||"{}");o(Object.assign(Object.assign({},e),{service_data:i}))}catch(e){console.warn("Invalid JSON in service data")}}))}
          </div>
        `;default:return i.qy``}}renderActionsTab(e,t,o,i){const a=e;return l.A.render(a,t,(e=>i(e)))}renderButtonActionConfig(e,t,o){return i.qy`
      <div style="margin-bottom: 16px;">
        ${this.renderSingleActionConfig("Tap Action","Action to perform when button is tapped",e.tap_action||{action:"nothing"},t,(e=>o({tap_action:e})))}
      </div>

      <div style="margin-bottom: 16px;">
        ${this.renderSingleActionConfig("Hold Action","Action to perform when button is held down",e.hold_action||{action:"nothing"},t,(e=>o({hold_action:e})))}
      </div>

      <div style="margin-bottom: 16px;">
        ${this.renderSingleActionConfig("Double Tap Action","Action to perform when button is double-tapped",e.double_tap_action||{action:"nothing"},t,(e=>o({double_tap_action:e})))}
      </div>
    `}renderSingleActionConfig(e,t,o,a,n){return i.qy`
      <div style="margin-bottom: 16px;">
        <div
          class="field-title"
          style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
        >
          ${e}
        </div>
        <div style="margin-bottom: 12px;">
          <ha-form
            .hass=${a}
            .data=${{action_config:"nothing"===(null==o?void 0:o.action)?Object.assign(Object.assign({},o),{action:"default"}):o}}
            .schema=${[{name:"action_config",label:"",selector:{ui_action:{actions:["default","more-info","toggle","navigate","url","perform-action","assist"]}}}]}
            .computeLabel=${e=>e.label||""}
            .computeDescription=${e=>e.description||""}
            @value-changed=${e=>{var t;const o=null===(t=e.detail.value)||void 0===t?void 0:t.action_config;o&&n(o)}}
          ></ha-form>
        </div>
      </div>
    `}renderPreview(e,t){var o;const a=e,n=a,r=a.design||{},l=r.color||a.text_color||"white",c=r.font_size||"14px",p=r.background_color||a.background_color||"var(--primary-color)",u=a.style||"flat",h={flat:`background: ${p}; border: none; box-shadow: none;`,glossy:`background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0)) , ${p}; border: none;`,embossed:`background: ${p}; border: 1px solid rgba(0,0,0,0.15); box-shadow: inset 0 2px 2px rgba(255,255,255,0.2), inset 0 -2px 2px rgba(0,0,0,0.15);`,inset:`background: ${p}; border: none; box-shadow: inset 0 2px 6px rgba(0,0,0,0.35);`,"gradient-overlay":`background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(0,0,0,0.15)), ${p}; border: none;`,"neon-glow":`background: ${p}; border: none; box-shadow: 0 0 10px ${p}, 0 0 20px ${p};`,outline:`background: transparent; border: 2px solid ${p}; color: ${p};`,glass:`background: ${p}; backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.25);`,metallic:"background: linear-gradient(90deg, #d7d7d7, #f0f0f0 50%, #d7d7d7); color: #333; border: 1px solid #bbb;"},m=`\n      color: ${l};\n      padding: 12px 24px;\n      font-size: ${c};\n      font-weight: 500;\n      border-radius: 8px;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      min-height: 40px;\n     ${h[u]||h.flat}`,g=`\n      display: flex;\n      justify-content: ${"left"===a.alignment?"flex-start":"right"===a.alignment?"flex-end":"center"};\n    `,_={width:"100%",padding:r.padding_top||r.padding_bottom||r.padding_left||r.padding_right?`${r.padding_top||"8px"} ${r.padding_right||"8px"} ${r.padding_bottom||"8px"} ${r.padding_left||"8px"}`:"8px",margin:r.margin_top||r.margin_bottom||r.margin_left||r.margin_right?`${r.margin_top||"0"} ${r.margin_right||"0"} ${r.margin_bottom||"0"} ${r.margin_left||"0"}`:"0",background:r.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},n),r),t),"background-size":"cover","background-position":"center","background-repeat":"no-repeat","border-radius":r.border_radius||"8px",border:r.border_style&&"none"!==r.border_style?`${r.border_width||"1px"} ${r.border_style} ${r.border_color||"var(--divider-color)"}`:"none","box-shadow":r.box_shadow_h||r.box_shadow_v||r.box_shadow_blur||r.box_shadow_spread?`${r.box_shadow_h||"0px"} ${r.box_shadow_v||"0px"} ${r.box_shadow_blur||"0px"} ${r.box_shadow_spread||"0px"} ${r.box_shadow_color||"rgba(0,0,0,.2)"}`:"none","box-sizing":"border-box"};let b=null,v=null,f=!1,y=0,x=0;const w=Boolean(a.enable_hover_effect),k=a.hover_effect||"color",$=a.hover_background_color||p,C=a.hover_glow_color||p;return i.qy`
      <div class="button-module-container" style=${this.styleObjectToCss(_)}>
        <div class="button-module-preview" style="${g}">
          <button
            class="ultra-button ${u} ${"justify"===a.alignment?"justify":""}"
            style="${m} ${"justify"===a.alignment?"width: 100%;":""} ${r.text_align?`text-align:${r.text_align};`:""} ${r.text_shadow_h||r.text_shadow_v||r.text_shadow_blur||r.text_shadow_color?`text-shadow:${r.text_shadow_h||"0px"} ${r.text_shadow_v||"0px"} ${r.text_shadow_blur||"0px"} ${r.text_shadow_color||"rgba(0,0,0,.2)"};`:""} ${a.enable_hover_effect||a.hover_effect?"will-change: transform, box-shadow, background-color;":""}"
            @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),f=!1,v=setTimeout((()=>{f=!0,a.hold_action&&"nothing"!==a.hold_action.action&&d.K.handleAction(a.hold_action,t,e.target)}),500)}}
            @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),v&&(clearTimeout(v),v=null),f)return void(f=!1);const o=Date.now();o-x<300&&1===y?(b&&(clearTimeout(b),b=null),y=0,a.double_tap_action&&"nothing"!==a.double_tap_action.action&&d.K.handleAction(a.double_tap_action,t,e.target)):(y=1,x=o,b=setTimeout((()=>{y=0,a.tap_action&&"nothing"!==a.tap_action.action?d.K.handleAction(a.tap_action,t,e.target):a.action&&(s.setHass(t),s.executeAction(a.action))}),300))}}
            @mouseover=${e=>{if(!w)return;const t=e.currentTarget;switch(t.dataset.origBg||(t.dataset.origBg=t.style.background||""),t.dataset.origShadow||(t.dataset.origShadow=t.style.boxShadow||""),t.dataset.origTransform||(t.dataset.origTransform=t.style.transform||""),k){case"color":t.style.background=$;break;case"scale":t.style.transform="scale(1.05)";break;case"glow":t.style.boxShadow=`0 0 12px ${C}, 0 0 24px ${C}`;break;case"lift":t.style.transform="translateY(-3px)",t.style.boxShadow="0 6px 14px rgba(0,0,0,0.2)"}}}
            @mouseout=${e=>{if(!w)return;const t=e.currentTarget;void 0!==t.dataset.origBg&&(t.style.background=t.dataset.origBg),void 0!==t.dataset.origShadow&&(t.style.boxShadow=t.dataset.origShadow),void 0!==t.dataset.origTransform&&(t.style.transform=t.dataset.origTransform)}}
          >
            ${a.show_icon&&a.icon&&"before"===a.icon_position?i.qy`<ha-icon icon="${a.icon}"></ha-icon>`:""}
            ${null!==(o=a.label)&&void 0!==o?o:""}
            ${a.show_icon&&a.icon&&"after"===a.icon_position?i.qy`<ha-icon icon="${a.icon}"></ha-icon>`:""}
          </button>
        </div>
      </div>
    `}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t}`)).join("; ")}getBackgroundImageCSS(e,t){var o,i;const a=e.background_image_type,n=e.background_image,r=e.background_image_entity;if(!a||"none"===a)return"none";switch(a){case"upload":if(n)return`url("${(0,c.V)(t,n)}")`;break;case"url":if(n)return`url("${n}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const a=(null===(o=e.attributes)||void 0===o?void 0:o.entity_picture)||(null===(i=e.attributes)||void 0===i?void 0:i.image)||("string"==typeof e.state?e.state:"");if(a&&"unknown"!==a&&"unavailable"!==a)return`url("${(0,c.V)(t,a)}")`}}}return"none"}}},796:(e,t,o)=>{o.d(t,{K:()=>n});var i=o(183),a=o(456);class n{static render(e,t,o,r){var s,l,d,c;const p=(null===(s=e.locale)||void 0===s?void 0:s.language)||"en",u=r||(0,a.kg)("editor.actions.title",p,"Link Configuration");return i.qy`
      <div class="ultra-link-config">
        <style>
          .ultra-link-config {
            padding: 16px;
          }

          .field-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
          }

          .field-description {
            font-size: 13px;
            font-weight: 400;
            margin-bottom: 16px;
            color: var(--secondary-text-color);
            line-height: 1.4;
          }

          .behavior-group {
            margin-bottom: 24px;
          }

          /* Hide unwanted form elements */
          .ultra-link-config ha-form {
            display: block;
            margin: 0;
            padding: 0;
          }

          /* Hide redundant labels */
          .ultra-link-config ha-form .mdc-form-field > label,
          .ultra-link-config ha-form .mdc-text-field > label,
          .ultra-link-config ha-form .mdc-floating-label,
          .ultra-link-config ha-form .mdc-notched-outline__leading,
          .ultra-link-config ha-form .mdc-notched-outline__notch,
          .ultra-link-config ha-form .mdc-notched-outline__trailing,
          .ultra-link-config ha-form .mdc-floating-label--float-above,
          .ultra-link-config ha-form label[for],
          .ultra-link-config ha-form .ha-form-label,
          .ultra-link-config ha-form .form-label {
            display: none !important;
          }

          /* Hide labels containing underscores */
          .ultra-link-config ha-form label[data-label*='_'],
          .ultra-link-config ha-form .label-text:contains('_'),
          .ultra-link-config label:contains('_') {
            display: none !important;
          }

          /* Additional safeguards for underscore labels */
          .ultra-link-config ha-form .mdc-text-field-character-counter,
          .ultra-link-config ha-form .mdc-text-field-helper-text,
          .ultra-link-config ha-form mwc-formfield,
          .ultra-link-config ha-form .formfield {
            display: none !important;
          }
        </style>

        <div class="field-title" style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">
          ${u}
        </div>
        <div
          class="field-description"
          style="font-size: 13px; font-weight: 400; margin-bottom: 16px; color: var(--secondary-text-color);"
        >
          ${(0,a.kg)("editor.actions.description",p,"Configure what happens when users interact with this element. Choose different actions for tap, hold, and double-tap gestures.")}
        </div>

        <!-- Tap Behavior -->
        <div class="tap-behavior-group" style="margin-bottom: 24px;">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,a.kg)("editor.actions.tap_behavior",p,"Tap Behavior")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
          >
            ${(0,a.kg)("editor.actions.tap_behavior_desc",p,"Action to perform when the element is tapped/clicked.")}
          </div>
          ${n.renderCleanForm(e,{action:(null===(l=t.tap_action)||void 0===l?void 0:l.action)||"default"},[{name:"action",selector:{select:{options:[{value:"nothing",label:"Nothing"},{value:"more-info",label:"More info"},{value:"toggle",label:"Toggle"},{value:"navigate",label:"Navigate"},{value:"url",label:"URL"},{value:"perform-action",label:"Perform action"},{value:"assist",label:"Assist"}],mode:"dropdown"}}}],(e=>{const i=Object.assign(Object.assign({},t.tap_action),{action:e.detail.value.action});o({tap_action:i})}))}
          ${n.renderActionFields(e,t.tap_action||{action:"nothing"},(e=>{const i=Object.assign(Object.assign({},t.tap_action),e);o({tap_action:i})}))}
        </div>

        <!-- Hold Behavior -->
        <div class="hold-behavior-group" style="margin-bottom: 24px;">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,a.kg)("editor.actions.hold_behavior",p,"Hold Behavior")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
          >
            ${(0,a.kg)("editor.actions.hold_behavior_desc",p,"Action to perform when the element is pressed and held.")}
          </div>
          ${n.renderCleanForm(e,{action:(null===(d=t.hold_action)||void 0===d?void 0:d.action)||"default"},[{name:"action",selector:{select:{options:[{value:"nothing",label:"Nothing"},{value:"more-info",label:"More info"},{value:"toggle",label:"Toggle"},{value:"navigate",label:"Navigate"},{value:"url",label:"URL"},{value:"perform-action",label:"Perform action"},{value:"assist",label:"Assist"}],mode:"dropdown"}}}],(e=>{const i=Object.assign(Object.assign({},t.hold_action),{action:e.detail.value.action});o({hold_action:i})}))}
          ${n.renderActionFields(e,t.hold_action||{action:"nothing"},(e=>{const i=Object.assign(Object.assign({},t.hold_action),e);o({hold_action:i})}))}
        </div>

        <!-- Double Tap Behavior -->
        <div class="double-tap-behavior-group">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,a.kg)("editor.actions.double_tap_behavior",p,"Double Tap Behavior")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
          >
            ${(0,a.kg)("editor.actions.double_tap_behavior_desc",p,"Action to perform when the element is double-tapped/clicked.")}
          </div>
          ${n.renderCleanForm(e,{action:(null===(c=t.double_tap_action)||void 0===c?void 0:c.action)||"default"},[{name:"action",selector:{select:{options:[{value:"nothing",label:"Nothing"},{value:"more-info",label:"More info"},{value:"toggle",label:"Toggle"},{value:"navigate",label:"Navigate"},{value:"url",label:"URL"},{value:"perform-action",label:"Perform action"},{value:"assist",label:"Assist"}],mode:"dropdown"}}}],(e=>{const i=Object.assign(Object.assign({},t.double_tap_action),{action:e.detail.value.action});o({double_tap_action:i})}))}
          ${n.renderActionFields(e,t.double_tap_action||{action:"nothing"},(e=>{const i=Object.assign(Object.assign({},t.double_tap_action),e);o({double_tap_action:i})}))}
        </div>
      </div>
    `}static renderCleanForm(e,t,o,a){return i.qy`
      <div class="ultra-clean-form">
        <ha-form .hass=${e} .data=${t} .schema=${o} @value-changed=${a}></ha-form>
      </div>
    `}static renderActionFields(e,t,o){switch(t.action){case"default":break;case"more-info":case"toggle":return i.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              Entity
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Select the entity to
              ${"more-info"===t.action?"show more info for":"toggle"}.
            </div>
            ${n.renderCleanForm(e,{entity:t.entity||""},[{name:"entity",selector:{entity:{}},label:"Entity"}],(e=>o({entity:e.detail.value.entity})))}
          </div>
        `;case"navigate":return i.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              Navigation Path
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Choose where to navigate or enter a custom path (e.g., /lovelace/dashboard).
            </div>
            ${n.renderNavigationPicker(e,t.navigation_path||"",(e=>o({navigation_path:e})))}
          </div>
        `;case"url":return i.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              URL Path
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Enter the URL to navigate to (e.g., https://www.example.com).
            </div>
            ${n.renderCleanForm(e,{url_path:t.url_path||""},[{name:"url_path",selector:{text:{}}}],(e=>o({url_path:e.detail.value.url_path})))}
          </div>
        `;case"perform-action":return i.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              Service
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Choose the service to call or enter a custom service.
            </div>
            ${n.renderCleanForm(e,{service:t.service||""},[{name:"service",selector:{select:{options:[{value:"homeassistant.restart",label:"Restart Home Assistant"},{value:"homeassistant.stop",label:"Stop Home Assistant"},{value:"homeassistant.reload_core_config",label:"Reload Core Config"},{value:"homeassistant.reload_config_entry",label:"Reload Config Entry"},{value:"homeassistant.update_entity",label:"Update Entity"},{value:"system_log.clear",label:"Clear System Log"},{value:"recorder.purge",label:"Purge Recorder"},{value:"hassio.host_reboot",label:"Reboot Host System"},{value:"hassio.host_shutdown",label:"Shutdown Host System"},{value:"light.turn_on",label:"Turn On Light"},{value:"light.turn_off",label:"Turn Off Light"},{value:"light.toggle",label:"Toggle Light"},{value:"switch.turn_on",label:"Turn On Switch"},{value:"switch.turn_off",label:"Turn Off Switch"},{value:"switch.toggle",label:"Toggle Switch"},{value:"climate.set_temperature",label:"Set Temperature"},{value:"climate.turn_on",label:"Turn On Climate"},{value:"climate.turn_off",label:"Turn Off Climate"},{value:"media_player.play_media",label:"Play Media"},{value:"media_player.media_play",label:"Media Play"},{value:"media_player.media_pause",label:"Media Pause"},{value:"media_player.media_stop",label:"Media Stop"},{value:"media_player.volume_set",label:"Set Volume"},{value:"automation.trigger",label:"Trigger Automation"},{value:"automation.turn_on",label:"Enable Automation"},{value:"automation.turn_off",label:"Disable Automation"},{value:"script.turn_on",label:"Run Script"},{value:"scene.turn_on",label:"Activate Scene"},{value:"cover.open_cover",label:"Open Cover"},{value:"cover.close_cover",label:"Close Cover"},{value:"cover.toggle",label:"Toggle Cover"},{value:"lock.lock",label:"Lock"},{value:"lock.unlock",label:"Unlock"},{value:"notify.persistent_notification",label:"Send Notification"},{value:"input_boolean.toggle",label:"Toggle Input Boolean"},{value:"input_select.select_option",label:"Select Input Option"},{value:"custom",label:"Custom Service..."}],mode:"dropdown",custom_value:!0}}}],(e=>{var t;const i=(null===(t=e.detail.value)||void 0===t?void 0:t.service)||e.detail.value;o({service:i})}))}

            <div style="margin-top: 12px;">
              <div
                class="field-title"
                style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
              >
                Target Entity (optional)
              </div>
              <div
                class="field-description"
                style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
              >
                Choose an entity to target with this service call.
              </div>
              ${n.renderCleanForm(e,{entity:t.entity||""},[{name:"entity",selector:{entity:{}},label:"Entity"}],(e=>{var t;const i=(null===(t=e.detail.value)||void 0===t?void 0:t.entity)||e.detail.value;o({entity:i})}))}
            </div>

            <div style="margin-top: 12px;">
              <div
                class="field-title"
                style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
              >
                Service Data (optional)
              </div>
              <div
                class="field-description"
                style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
              >
                Enter service data as YAML (e.g., entity_id: light.living_room).
              </div>
              ${n.renderCleanForm(e,{service_data:t.service_data?JSON.stringify(t.service_data,null,2):""},[{name:"service_data",selector:{text:{multiline:!0,type:"text"}}}],(e=>{try{const t=e.detail.value.service_data?JSON.parse(e.detail.value.service_data):void 0;o({service_data:t})}catch(e){}}))}
            </div>
          </div>
        `;default:return i.qy``}}static renderNavigationPicker(e,t,o){const i=[{value:"/lovelace",label:"Overview (/lovelace)"},{value:"/config",label:"Settings (/config)"},{value:"/config/dashboard",label:"Dashboards (/config/dashboard)"},{value:"/config/entities",label:"Entities (/config/entities)"},{value:"/config/devices",label:"Devices (/config/devices)"},{value:"/config/automations",label:"Automations (/config/automations)"},{value:"/config/scripts",label:"Scripts (/config/scripts)"},{value:"/config/scenes",label:"Scenes (/config/scenes)"},{value:"/developer-tools",label:"Developer Tools (/developer-tools)"},...Object.keys(e.panels).filter((t=>e.panels[t].url_path||"lovelace"===t)).map((t=>({value:e.panels[t].url_path||`/lovelace/${t}`,label:`${e.panels[t].title||t} (${e.panels[t].url_path||`/lovelace/${t}`})`})))];return n.renderCleanForm(e,{navigation_path:t},[{name:"navigation_path",selector:{select:{options:[{value:"",label:"Custom path..."},...i],mode:"dropdown",custom_value:!0}}}],(e=>o(e.detail.value.navigation_path)))}static getDefaultConfig(){return{tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"}}}static handleAction(e,t,o){const i=e.service||e.perform_action;switch(e.action){case"more-info":if(e.entity){const t=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:e.entity}});null==o||o.dispatchEvent(t)}break;case"toggle":if(e.entity)t.callService("homeassistant","toggle",{entity_id:e.entity});else if(e.target){const o={};e.target.entity_id&&(o.entity_id=e.target.entity_id),e.target.device_id&&(o.device_id=e.target.device_id),e.target.area_id&&(o.area_id=e.target.area_id),e.target.floor_id&&(o.floor_id=e.target.floor_id),e.target.label_id&&(o.label_id=e.target.label_id),t.callService("homeassistant","toggle",o)}break;case"navigate":if(e.navigation_path){window.history.pushState(null,"",e.navigation_path);const t=new CustomEvent("location-changed",{bubbles:!0,composed:!0,detail:{replace:!1}});window.dispatchEvent(t)}break;case"url":e.url_path&&window.open(e.url_path,"_blank");break;case"perform-action":if(i){const[o,a]=i.split(".");if(o&&a){let n=Object.assign({},e.data||e.service_data);e.entity&&!n.entity_id&&(n.entity_id=e.entity),e.target&&(e.target.entity_id&&!n.entity_id&&(n.entity_id=e.target.entity_id),e.target.device_id&&!n.device_id&&(n.device_id=e.target.device_id),e.target.area_id&&!n.area_id&&(n.area_id=e.target.area_id),e.target.floor_id&&!n.floor_id&&(n.floor_id=e.target.floor_id),e.target.label_id&&!n.label_id&&(n.label_id=e.target.label_id));try{t.callService(o,a,n)}catch(e){console.error(`❌ Ultra Card: Failed to execute service ${i}:`,e)}}else console.warn(`⚠️ Ultra Card: Invalid service format "${i}". Expected format: domain.service`)}else console.warn("⚠️ Ultra Card: No service specified for perform-action",{action:e,serviceProperty:e.service,performActionProperty:e.perform_action});break;case"assist":const a=new CustomEvent("hass-assist",{bubbles:!0,composed:!0});null==o||o.dispatchEvent(a)}}}},863:(e,t,o)=>{o.d(t,{j:()=>d});var i=o(183),a=o(30),n=o(381),r=o(796),s=o(341),l=o(456);class d extends a.m{constructor(){super(...arguments),this.metadata={type:"vertical",title:"Vertical Layout",description:"Arrange modules in columns with flexible alignment and spacing",author:"WJD Designs",version:"1.0.0",icon:"mdi:view-agenda",category:"layout",tags:["layout","vertical","alignment","container","flexbox"]}}createDefault(e,t){return{id:e||this.generateId("vertical"),type:"vertical",alignment:"top",horizontal_alignment:"left",gap:1.2,modules:[],tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"}}}renderGeneralTab(e,t,o,a){var n;const r=e,s=(null===(n=null==t?void 0:t.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}

      <div class="module-general-settings">
        <!-- Layout Configuration Section -->
        ${this.renderSettingsSection((0,l.kg)("editor.vertical.layout.title",s,"Layout Configuration"),(0,l.kg)("editor.vertical.layout.desc",s,"Configure alignment and spacing for items in a single column."),[{title:(0,l.kg)("editor.vertical.alignment.horizontal",s,"Horizontal Alignment"),description:(0,l.kg)("editor.vertical.alignment.horizontal_desc",s,"Choose how items are aligned horizontally within the column."),hass:t,data:{horizontal_alignment:r.horizontal_alignment||"left"},schema:[this.selectField("horizontal_alignment",[{value:"left",label:(0,l.kg)("editor.common.left",s,"Left")},{value:"center",label:(0,l.kg)("editor.common.center",s,"Center")},{value:"right",label:(0,l.kg)("editor.common.right",s,"Right")},{value:"stretch",label:(0,l.kg)("editor.common.stretch",s,"Stretch")}])],onChange:e=>a(e.detail.value)},{title:(0,l.kg)("editor.vertical.alignment.vertical",s,"Vertical Distribution"),description:(0,l.kg)("editor.vertical.alignment.vertical_desc",s,"How items are distributed along the vertical axis."),hass:t,data:{alignment:r.alignment||"top"},schema:[this.selectField("alignment",[{value:"top",label:(0,l.kg)("editor.common.top",s,"Top")},{value:"center",label:(0,l.kg)("editor.common.center",s,"Center")},{value:"bottom",label:(0,l.kg)("editor.common.bottom",s,"Bottom")},{value:"space-between",label:(0,l.kg)("editor.common.space_between",s,"Space Between")},{value:"space-around",label:(0,l.kg)("editor.common.space_around",s,"Space Around")}])],onChange:e=>a(e.detail.value)}])}

        <!-- Gap Between Items Field with Custom Slider -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,l.kg)("editor.vertical.gap.title",s,"Gap Configuration")}
          </div>

          <div style="margin-bottom: 8px;">
            <div
              class="field-title"
              style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
            >
              ${(0,l.kg)("editor.vertical.gap.between_items",s,"Gap Between Items")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
            >
              ${(0,l.kg)("editor.vertical.gap.desc",s,"Set the spacing between vertical items (in rem units). Use negative values to overlap items.")}
            </div>
            <div
              class="gap-control-container"
              style="display: flex; align-items: center; gap: 12px;"
            >
              <input
                type="range"
                class="gap-slider"
                min="-5"
                max="10"
                step="0.1"
                .value="${r.gap||1.2}"
                @input=${e=>{const t=e.target,o=parseFloat(t.value);a({gap:o})}}
              />
              <input
                type="number"
                class="gap-input"
                style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                min="-5"
                max="10"
                step="0.1"
                .value="${r.gap||1.2}"
                @input=${e=>{const t=e.target,o=parseFloat(t.value);isNaN(o)||a({gap:o})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,o=parseFloat(t.value)||1.2,i="ArrowUp"===e.key?.1:-.1,n=Math.max(-5,Math.min(10,o+i)),r=Math.round(10*n)/10;a({gap:r})}}}
              />
              <button
                class="reset-btn"
                @click=${()=>a({gap:1.2})}
                title="Reset to default (1.2)"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    `}renderPreview(e,t){var o;const a=e,n=(null===(o=null==t?void 0:t.locale)||void 0===o?void 0:o.language)||"en",s=a,d=Object.assign(Object.assign({},s),s.design||{}),c=a.modules&&a.modules.length>0,p=a.gap||1.2,u={padding:this.getPaddingCSS(d),margin:this.getMarginCSS(d),background:this.getBackgroundCSS(d),backgroundImage:this.getBackgroundImageCSS(d,t),backgroundSize:d.background_size||"cover",backgroundPosition:d.background_position||"center",backgroundRepeat:d.background_repeat||"no-repeat",border:d.border_width?this.getBorderCSS(d):"none",borderRadius:this.addPixelUnit(d.border_radius)||"0",display:"flex",flexDirection:"column",justifyContent:this.getJustifyContent(a.alignment||d.text_align||"left"),gap:p>=0?`${p}rem`:"0",alignItems:this.getAlignItems(a.horizontal_alignment||"left"),width:"100%",minHeight:"0"};let h=null,m=null,g=!1,_=0,b=0;return i.qy`
      <div class="vertical-module-preview">
        <div
          class="vertical-preview-content"
          style="${this.styleObjectToCss(u)}; cursor: ${a.tap_action&&"nothing"!==a.tap_action.action||a.hold_action&&"nothing"!==a.hold_action.action||a.double_tap_action&&"nothing"!==a.double_tap_action.action?"pointer":"default"};"
          @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),g=!1,m=setTimeout((()=>{g=!0,a.hold_action&&"nothing"!==a.hold_action.action&&r.K.handleAction(a.hold_action,t,e.target)}),500)}}
          @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),m&&(clearTimeout(m),m=null),g)return void(g=!1);const o=Date.now();o-b<300&&1===_?(h&&(clearTimeout(h),h=null),_=0,a.double_tap_action&&"nothing"!==a.double_tap_action.action&&r.K.handleAction(a.double_tap_action,t,e.target)):(_=1,b=o,h=setTimeout((()=>{_=0,a.tap_action&&"nothing"!==a.tap_action.action&&r.K.handleAction(a.tap_action,t,e.target)}),300))}}
        >
          ${c?a.modules.map(((e,o)=>{const a=p<0&&o>0?`${p}rem 0 0 0`:"0",n=p<0;return i.qy`
                  <div
                    class="child-module-preview ${n?"negative-gap":""}"
                    style="max-width: 100%; overflow: hidden; width: 100%; box-sizing: border-box; margin: ${a}; ${n?"padding: 0; border: none; background: transparent;":""}"
                  >
                    ${this._renderChildModulePreview(e,t,s)}
                  </div>
                `})):i.qy`
                <div class="empty-layout-message">
                  <span
                    >${(0,l.kg)("editor.vertical.empty.no_modules",n,"No modules added yet")}</span
                  >
                  <small
                    >${(0,l.kg)("editor.vertical.empty.add_modules",n,"Add modules in the layout builder to see them here")}</small
                  >
                </div>
              `}
        </div>
      </div>
    `}_renderChildModulePreview(e,t,o){let a=e;o&&(a=this.applyLayoutDesignToChild(e,o));const n=o;if(n&&n.horizontal_alignment){const e=a;e.alignment||(e.alignment=n.horizontal_alignment)}const r=(0,s.oD)().getModule(a.type);return r?r.renderPreview(a,t):i.qy`
      <div class="unknown-child-module">
        <ha-icon icon="mdi:help-circle"></ha-icon>
        <span>Unknown Module: ${a.type}</span>
      </div>
    `}applyLayoutDesignToChild(e,t){const o=Object.assign({},e);return t.color&&(o.color=t.color),t.font_size&&(o.font_size=t.font_size),t.font_family&&(o.font_family=t.font_family),t.font_weight&&(o.font_weight=t.font_weight),t.text_align&&(o.text_align=t.text_align),t.line_height&&(o.line_height=t.line_height),t.letter_spacing&&(o.letter_spacing=t.letter_spacing),t.text_transform&&(o.text_transform=t.text_transform),t.font_style&&(o.font_style=t.font_style),t.background_color&&(o.background_color=t.background_color),t.background_image&&(o.background_image=t.background_image),t.backdrop_filter&&(o.backdrop_filter=t.backdrop_filter),t.width&&(o.width=t.width),t.height&&(o.height=t.height),t.max_width&&(o.max_width=t.max_width),t.max_height&&(o.max_height=t.max_height),t.min_width&&(o.min_width=t.min_width),t.min_height&&(o.min_height=t.min_height),t.margin_top&&(o.margin_top=t.margin_top),t.margin_bottom&&(o.margin_bottom=t.margin_bottom),t.margin_left&&(o.margin_left=t.margin_left),t.margin_right&&(o.margin_right=t.margin_right),t.padding_top&&(o.padding_top=t.padding_top),t.padding_bottom&&(o.padding_bottom=t.padding_bottom),t.padding_left&&(o.padding_left=t.padding_left),t.padding_right&&(o.padding_right=t.padding_right),t.border_radius&&(o.border_radius=t.border_radius),t.border_style&&(o.border_style=t.border_style),t.border_width&&(o.border_width=t.border_width),t.border_color&&(o.border_color=t.border_color),t.text_shadow_h&&(o.text_shadow_h=t.text_shadow_h),t.text_shadow_v&&(o.text_shadow_v=t.text_shadow_v),t.text_shadow_blur&&(o.text_shadow_blur=t.text_shadow_blur),t.text_shadow_color&&(o.text_shadow_color=t.text_shadow_color),t.box_shadow_h&&(o.box_shadow_h=t.box_shadow_h),t.box_shadow_v&&(o.box_shadow_v=t.box_shadow_v),t.box_shadow_blur&&(o.box_shadow_blur=t.box_shadow_blur),t.box_shadow_spread&&(o.box_shadow_spread=t.box_shadow_spread),t.box_shadow_color&&(o.box_shadow_color=t.box_shadow_color),t.position&&(o.position=t.position),t.top&&(o.top=t.top),t.bottom&&(o.bottom=t.bottom),t.left&&(o.left=t.left),t.right&&(o.right=t.right),t.z_index&&(o.z_index=t.z_index),t.overflow&&(o.overflow=t.overflow),t.clip_path&&(o.clip_path=t.clip_path),t.animation_type&&(o.animation_type=t.animation_type),t.animation_entity&&(o.animation_entity=t.animation_entity),t.animation_trigger_type&&(o.animation_trigger_type=t.animation_trigger_type),t.animation_attribute&&(o.animation_attribute=t.animation_attribute),t.animation_state&&(o.animation_state=t.animation_state),t.intro_animation&&(o.intro_animation=t.intro_animation),t.outro_animation&&(o.outro_animation=t.outro_animation),t.animation_duration&&(o.animation_duration=t.animation_duration),t.animation_delay&&(o.animation_delay=t.animation_delay),t.animation_timing&&(o.animation_timing=t.animation_timing),t.alignment&&(o.alignment=t.alignment),o}validate(e){const t=e,o=[...super.validate(e).errors];if(t.gap&&(t.gap<-5||t.gap>10)&&o.push("Gap must be between -5 and 10 rem"),t.modules&&t.modules.length>0)for(const e of t.modules)"horizontal"===e.type&&o.push("Horizontal layout modules cannot be placed inside vertical layout modules"),"vertical"===e.type&&o.push("Vertical layout modules cannot be nested inside other vertical layout modules");return{valid:0===o.length,errors:o}}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"8px"} ${this.addPixelUnit(e.padding_right)||"8px"} ${this.addPixelUnit(e.padding_bottom)||"8px"} ${this.addPixelUnit(e.padding_left)||"8px"}`:"8px"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"0"} ${this.addPixelUnit(e.margin_right)||"0"} ${this.addPixelUnit(e.margin_bottom)||"0"} ${this.addPixelUnit(e.margin_left)||"0"}`:"0"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){var o,i;if(!e.background_image_type||"none"===e.background_image_type)return e.background_image?`url("${e.background_image}")`:"none";switch(e.background_image_type){case"upload":if(e.background_image)return`url("${(0,n.V)(t,e.background_image)}")`;break;case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const a=t.states[e.background_image_entity];let r="";if((null===(o=a.attributes)||void 0===o?void 0:o.entity_picture)?r=a.attributes.entity_picture:(null===(i=a.attributes)||void 0===i?void 0:i.image)?r=a.attributes.image:a.state&&"string"==typeof a.state&&(a.state.startsWith("/")||a.state.startsWith("http"))&&(r=a.state),r)return`url("${(0,n.V)(t,r)}")`}}return"none"}getBorderCSS(e){return`${this.addPixelUnit(e.border_width)||"0"} ${e.border_style||"solid"} ${e.border_color||"transparent"}`}getJustifyContent(e){switch(e){case"top":default:return"flex-start";case"center":return"center";case"bottom":return"flex-end";case"space-between":return"space-between";case"space-around":return"space-around"}}getAlignItems(e){switch(e){case"left":default:return"flex-start";case"center":return"center";case"right":return"flex-end";case"stretch":return"stretch"}}getStyles(){return'\n      /* Vertical Module Styles */\n      .vertical-module-preview {\n        width: 100%;\n        min-height: 60px;\n      }\n\n      .vertical-preview-content {\n        background: transparent;\n        border-radius: 6px;\n        border: none;\n        transition: all 0.2s ease;\n      }\n\n      .child-module-preview {\n        background: transparent;\n        border: none;\n        border-radius: 4px;\n        padding: 0;\n        transition: all 0.2s ease;\n        width: 100%;\n      }\n\n      .child-module-preview.negative-gap {\n        background: transparent !important;\n        border: none !important;\n        border-radius: 0 !important;\n        padding: 0 !important;\n      }\n\n      .child-module-preview.negative-gap:hover {\n        border: none !important;\n        box-shadow: none !important;\n      }\n\n      .child-module-preview:hover {\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n        transform: translateY(-1px);\n      }\n\n      .empty-layout-message {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 4px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n        text-align: center;\n        width: 100%;\n        padding: 20px;\n      }\n\n      .empty-layout-message span {\n        font-size: 14px;\n        font-weight: 500;\n      }\n\n      .empty-layout-message small {\n        font-size: 12px;\n        opacity: 0.8;\n      }\n\n      .unknown-child-module {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n      }\n\n      /* Scoped list-style reset to avoid stray bullet markers in preview */\n      .vertical-module-preview ul,\n      .vertical-module-preview ol {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n      }\n      .vertical-module-preview li::marker {\n        content: \'\';\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n      \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Custom Range Slider Styling */\n      input[type="range"] {\n        -webkit-appearance: none;\n        appearance: none;\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        outline: none;\n        opacity: 0.7;\n        transition: opacity 0.2s;\n      }\n\n      input[type="range"]:hover {\n        opacity: 1;\n      }\n\n      input[type="range"]::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        appearance: none;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-webkit-slider-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-moz-range-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-track {\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        border: none;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    '}}},866:(e,t,o)=>{o.d(t,{k:()=>u});var i=o(183),a=o(30),n=o(57),r=o(662),s=o(345),l=o(400),d=o(796),c=o(381),p=o(456);o(768);class u extends a.m{constructor(){super(...arguments),this.metadata={type:"icon",title:"Icons",description:"Interactive icon buttons",author:"WJD Designs",version:"1.0.0",icon:"mdi:circle",category:"interactive",tags:["icon","button","interactive","control"]},this._previewCollapsed=!1,this._localStylesInjected=!1}_injectGlobalStyles(){if(!u._globalStylesInjected&&"undefined"!=typeof document){const e="uvc-icon-module-styles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent=this.getStyles()+"\n"+u._ANIMATION_KEYFRAMES,document.head.appendChild(t)}u._globalStylesInjected=!0}}_hashString(e){let t=0;if(0===e.length)return t.toString();for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return Math.abs(t).toString(36)}_highlightJinja2(e){if(!e)return"";let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t=t.replace(/(\{\{[\s\S]*?\}\})/g,'<span style="color: #569cd6;">$1</span>'),t=t.replace(/(\{%[\s\S]*?%\})/g,'<span style="color: #c586c0;">$1</span>'),t=t.replace(/((['"`])[^'"`]*?\2)/g,'<span style="color: #ce9178;">$1</span>'),["if","else","elif","endif","for","endfor","in","not","and","or","is","true","false","none","True","False","None"].forEach((e=>{const o=new RegExp(`\\b(${e})\\b`,"g");t=t.replace(o,'<span style="color: #569cd6;">$1</span>')})),t=t.replace(/\b([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/g,'<span style="color: #dcdcaa;">$1</span>('),t=t.replace(/\|\s*([a-zA-Z_][a-zA-Z0-9_]*)/g,'| <span style="color: #dcdcaa;">$1</span>'),t=t.replace(/\b(\d+(?:\.\d+)?)\b/g,'<span style="color: #b5cea8;">$1</span>'),t=t.replace(/(==|!=|<=|>=|<|>|\+|-|\*|\/|%)/g,'<span style="color: #d4d4d4;">$1</span>'),t}createDefault(e,t){return{id:e||this.generateId("icon"),type:"icon",icons:[{id:this.generateId("icon-item"),entity:"weather.forecast_home",name:"",icon_inactive:"mdi:weather-partly-cloudy",icon_active:"mdi:weather-partly-cloudy",inactive_state:"",active_state:"",custom_inactive_state_text:"",custom_active_state_text:"",custom_inactive_name_text:"",custom_active_name_text:"",inactive_template_mode:!1,inactive_template:"",active_template_mode:!1,active_template:"",use_entity_color_for_icon:!1,color_inactive:"var(--secondary-text-color)",color_active:"var(--primary-color)",inactive_icon_color:"var(--secondary-text-color)",active_icon_color:"var(--primary-color)",inactive_name_color:"var(--primary-text-color)",active_name_color:"var(--primary-text-color)",inactive_state_color:"var(--secondary-text-color)",active_state_color:"var(--secondary-text-color)",show_name_when_inactive:!0,show_state_when_inactive:!0,show_icon_when_inactive:!0,show_name_when_active:!0,show_state_when_active:!0,show_icon_when_active:!0,show_state:!0,show_name:!0,show_units:!0,enable_hover_effect:!1,icon_size:26,text_size:14,name_icon_gap:8,name_state_gap:2,icon_state_gap:4,active_icon_size:26,inactive_icon_size:26,active_text_size:14,inactive_text_size:14,state_size:14,active_state_size:14,inactive_state_size:14,icon_size_locked:!0,text_size_locked:!0,state_size_locked:!0,active_icon_locked:!0,active_icon_color_locked:!1,active_icon_background_locked:!0,active_icon_background_color_locked:!0,active_name_locked:!0,active_name_color_locked:!0,active_state_locked:!1,active_state_color_locked:!0,icon_background:"none",use_entity_color_for_icon_background:!1,icon_background_color:"transparent",inactive_icon_animation:"none",active_icon_animation:"none",vertical_alignment:"center",container_width:void 0,container_background_shape:"none",container_background_color:"#808080",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},click_action:"toggle",double_click_action:"none",hold_action_legacy:"none",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:""}],columns:3,gap:16,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},enable_hover_effect:!0,hover_background_color:"var(--divider-color)"}}renderGeneralTab(e,t,o,a){var n;const r=e,s=(null===(n=null==t?void 0:t.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        ${r.icons.map(((e,o)=>i.qy`
            <div class="icon-settings-container">
              <!-- Entity Configuration -->
              ${this.renderSettingsSection((0,p.kg)("editor.icon.entity_config.title",s,"ENTITY CONFIGURATION"),(0,p.kg)("editor.icon.entity_config.desc",s,"Configure the entity and active/inactive states"),[{title:(0,p.kg)("editor.icon.entity",s,"Entity"),description:(0,p.kg)("editor.icon.entity_desc",s,"Select the entity this icon represents"),hass:t,data:{entity:e.entity||""},schema:[this.entityField("entity")],onChange:e=>{const i=e.detail.value.entity,n={entity:i};if(i&&(null==t?void 0:t.states[i])){const e=l.s.getEntityIcon(i,t);e&&(n.icon_inactive=e,!1!==r.icons[o].active_icon_locked&&(n.icon_active=e))}if(i&&this._isBinaryEntity(i)){const e=r.icons[o];e.active_state||e.inactive_state||(n.active_state="on",n.inactive_state="off")}this._updateIcon(r,o,n,a)}},{title:(0,p.kg)("editor.icon.inactive_state",s,"Inactive State"),description:(0,p.kg)("editor.icon.inactive_state_desc",s,'State value considered "inactive" (leave blank to use actual entity state)'),hass:t,data:{inactive_state:e.inactive_state||""},schema:[this.textField("inactive_state")],onChange:e=>this._updateIcon(r,o,{inactive_state:e.detail.value.inactive_state},a)},{title:(0,p.kg)("editor.icon.active_state",s,"Active State"),description:(0,p.kg)("editor.icon.active_state_desc",s,'State value considered "active" (leave blank to use actual entity state)'),hass:t,data:{active_state:e.active_state||""},schema:[this.textField("active_state")],onChange:e=>this._updateIcon(r,o,{active_state:e.detail.value.active_state},a)}])}

              <!-- Icon Section -->
              <div class="settings-section" style="margin-bottom: 24px;">
                <div class="section-title">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span>Icon</span>
                    <ha-switch
                      .checked=${!1!==e.show_icon_when_active&&!1!==e.show_icon_when_inactive}
                      @change=${e=>{const t=e.target.checked;this._updateIcon(r,o,{show_icon_when_active:t,show_icon_when_inactive:t},a)}}
                    ></ha-switch>
                  </div>
                </div>

                ${!1!==e.show_icon_when_active||!1!==e.show_icon_when_inactive?i.qy`
                      <!-- Inactive Icon Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,o=t.querySelector("ha-icon");o&&(o.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            Inactive Icon
                          </summary>
                          <div style="padding: 16px;">
                            ${this.renderSettingsSection("Inactive Icon Configuration","Configure the inactive icon settings",[{title:"Inactive Icon",description:"Icon to show when inactive",hass:t,data:{icon_inactive:e.icon_inactive||""},schema:[this.iconField("icon_inactive")],onChange:e=>this._updateIconWithLockSync(r,o,"icon_inactive",e.detail.value.icon_inactive,a)}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Inactive Icon Color</div>
                              <div class="field-description">Color when inactive</div>
                              <ultra-color-picker
                                .value=${e.inactive_icon_color||"var(--secondary-text-color)"}
                                @value-changed=${e=>this._updateIconWithLockSync(r,o,"inactive_icon_color",e.detail.value,a)}
                              ></ultra-color-picker>
                            </div>

                            ${this.renderSettingsSection("Inactive Background","Configure the inactive background settings",[{title:"Inactive Background Shape",description:"Background shape when inactive",hass:t,data:{inactive_icon_background:e.inactive_icon_background||"none"},schema:[this.selectField("inactive_icon_background",[{value:"none",label:"None"},{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"rounded-square",label:"Rounded Square"}])],onChange:e=>{const t=e.detail.value.inactive_icon_background,i={inactive_icon_background:t};t&&"none"!==t&&(i.inactive_icon_background_color="var(--divider-color)"),this._updateIcon(r,o,i,a)}}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Inactive Background Color</div>
                              <div class="field-description">Background color when inactive</div>
                              <ultra-color-picker
                                .value=${e.inactive_icon_background_color||"transparent"}
                                @value-changed=${e=>this._updateIconWithLockSync(r,o,"inactive_icon_background_color",e.detail.value,a)}
                              ></ultra-color-picker>
                            </div>

                            <div class="field-container">
                              <div class="field-title">Inactive Icon Size</div>
                              <div class="field-description">Icon size when inactive</div>
                              ${this._renderSizeControl(r,o,a,"inactive_icon_size",e.inactive_icon_size||26,0,50,26)}
                            </div>
                          </div>
                        </details>
                      </div>

                      <!-- Active Icon Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,o=t.querySelector("ha-icon");o&&(o.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            Active Icon
                          </summary>
                          <div style="padding: 16px;">
                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Active Icon</div>
                              <div class="field-description">Icon to show when active</div>
                              ${this._renderFieldWithLock(r,o,a,"active_icon_locked","icon_active","icon_inactive",e.icon_active||e.icon_inactive||"","icon",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Active Icon Color</div>
                              <div class="field-description">Color when active</div>
                              ${this._renderFieldWithLock(r,o,a,"active_icon_color_locked","active_icon_color","inactive_icon_color",e.active_icon_color||"var(--primary-color)","color",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Active Background Shape</div>
                              <div class="field-description">Background shape when active</div>
                              ${this._renderFieldWithLock(r,o,a,"active_icon_background_locked","active_icon_background","inactive_icon_background",e.active_icon_background||"none","select",t,[{value:"none",label:"None"},{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"rounded-square",label:"Rounded Square"}])}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Active Background Color</div>
                              <div class="field-description">Background color when active</div>
                              ${this._renderFieldWithLock(r,o,a,"active_icon_background_color_locked","active_icon_background_color","inactive_icon_background_color",e.active_icon_background_color||"transparent","color",t)}
                            </div>

                            <div class="field-container">
                              <div class="field-title">Active Icon Size</div>
                              <div class="field-description">Icon size when active</div>
                              ${this._renderSizeControlWithLock(r,o,a,"icon_size","active_icon_size","inactive_icon_size",e.active_icon_size||26,0,50,26)}
                            </div>
                          </div>
                        </details>
                      </div>
                    `:""}
              </div>

              <!-- Name Section -->
              <div class="settings-section" style="margin-bottom: 24px;">
                <div class="section-title">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span>Name</span>
                    <ha-switch
                      .checked=${!1!==e.show_name_when_active&&!1!==e.show_name_when_inactive}
                      @change=${e=>{const t=e.target.checked;this._updateIcon(r,o,{show_name_when_active:t,show_name_when_inactive:t},a)}}
                    ></ha-switch>
                  </div>
                </div>

                ${!1!==e.show_name_when_active||!1!==e.show_name_when_inactive?i.qy`
                      <!-- Inactive Name Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,o=t.querySelector("ha-icon");o&&(o.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            Inactive Name
                          </summary>
                          <div style="padding: 16px;">
                            ${this.renderSettingsSection("Inactive Name Configuration","Configure the inactive name settings",[{title:"Custom Inactive Name",description:"Override entity name when inactive (leave empty to use entity name)",hass:t,data:{custom_inactive_name_text:e.custom_inactive_name_text||""},schema:[this.textField("custom_inactive_name_text")],onChange:e=>this._updateIcon(r,o,{custom_inactive_name_text:e.detail.value.custom_inactive_name_text},a)}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Inactive Name Color</div>
                              <div class="field-description">Name color when inactive</div>
                              <ultra-color-picker
                                .value=${e.inactive_name_color||"var(--primary-text-color)"}
                                @value-changed=${e=>this._updateIconWithLockSync(r,o,"inactive_name_color",e.detail.value,a)}
                              ></ultra-color-picker>
                            </div>

                            <div class="field-container">
                              <div class="field-title">Inactive Name Size</div>
                              <div class="field-description">Name text size when inactive</div>
                              ${this._renderSizeControl(r,o,a,"inactive_text_size",e.inactive_text_size||14,0,50,14)}
                            </div>
                          </div>
                        </details>
                      </div>

                      <!-- Active Name Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,o=t.querySelector("ha-icon");o&&(o.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            Active Name
                          </summary>
                          <div style="padding: 16px;">
                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Custom Active Name</div>
                              <div class="field-description">
                                Override entity name when active (leave empty to use entity name)
                              </div>
                              ${this._renderFieldWithLock(r,o,a,"active_name_locked","custom_active_name_text","custom_inactive_name_text",e.custom_active_name_text||"","text",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Active Name Color</div>
                              <div class="field-description">Name color when active</div>
                              ${this._renderFieldWithLock(r,o,a,"active_name_color_locked","active_name_color","inactive_name_color",e.active_name_color||"var(--primary-text-color)","color",t)}
                            </div>

                            <div class="field-container">
                              <div class="field-title">Active Name Size</div>
                              <div class="field-description">Name text size when active</div>
                              ${this._renderSizeControlWithLock(r,o,a,"text_size","active_text_size","inactive_text_size",e.active_text_size||e.inactive_text_size||14,0,50,12)}
                            </div>
                          </div>
                        </details>
                      </div>
                    `:""}
              </div>

              <!-- State Section -->
              <div class="settings-section" style="margin-bottom: 24px;">
                <div class="section-title">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span>State</span>
                    <ha-switch
                      .checked=${!1!==e.show_state_when_active&&!1!==e.show_state_when_inactive}
                      @change=${e=>{const t=e.target.checked;this._updateIcon(r,o,{show_state_when_active:t,show_state_when_inactive:t},a)}}
                    ></ha-switch>
                  </div>
                </div>

                ${!1!==e.show_state_when_active||!1!==e.show_state_when_inactive?i.qy`
                      <!-- Inactive State Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,o=t.querySelector("ha-icon");o&&(o.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            Inactive State
                          </summary>
                          <div style="padding: 16px;">
                            ${this.renderSettingsSection("Inactive State Configuration","Configure the inactive state settings",[{title:"Custom Inactive State",description:"Custom text when inactive (leave empty to use actual state)",hass:t,data:{custom_inactive_state_text:e.custom_inactive_state_text||""},schema:[this.textField("custom_inactive_state_text")],onChange:e=>this._updateIcon(r,o,{custom_inactive_state_text:e.detail.value.custom_inactive_state_text},a)}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,p.kg)("editor.icon.inactive_state_color",s,"Inactive State Color")}
                              </div>
                              <div class="field-description">State color when inactive</div>
                              <ultra-color-picker
                                .value=${e.inactive_state_color||"var(--secondary-text-color)"}
                                @value-changed=${e=>this._updateIconWithLockSync(r,o,"inactive_state_color",e.detail.value,a)}
                              ></ultra-color-picker>
                            </div>

                            <div class="field-container">
                              <div class="field-title">Inactive State Size</div>
                              <div class="field-description">State text size when inactive</div>
                              ${this._renderSizeControl(r,o,a,"inactive_state_size",e.inactive_state_size||10,0,50,10)}
                            </div>
                          </div>
                        </details>
                      </div>

                      <!-- Active State Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,o=t.querySelector("ha-icon");o&&(o.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            Active State
                          </summary>
                          <div style="padding: 16px;">
                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">Custom Active State</div>
                              <div class="field-description">
                                Custom text when active (leave empty to use actual state)
                              </div>
                              ${this._renderFieldWithLock(r,o,a,"active_state_locked","custom_active_state_text","custom_inactive_state_text",e.custom_active_state_text||"","text",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,p.kg)("editor.icon.active_state_color",s,"Active State Color")}
                              </div>
                              <div class="field-description">State color when active</div>
                              ${this._renderFieldWithLock(r,o,a,"active_state_color_locked","active_state_color","inactive_state_color",e.active_state_color||"var(--secondary-text-color)","color",t)}
                            </div>

                            <div class="field-container">
                              <div class="field-title">Active State Size</div>
                              <div class="field-description">State text size when active</div>
                              ${this._renderSizeControlWithLock(r,o,a,"state_size","active_state_size","inactive_state_size",e.active_state_size||10,0,50,10)}
                            </div>
                          </div>
                        </details>
                      </div>
                    `:""}
              </div>

              <!-- Advanced Template Mode Section -->
              <div class="template-section" style="margin-bottom: 24px;">
                <div class="template-header">
                  <div class="switch-container">
                    <label class="switch-label">Advanced Template Mode</label>
                    <label class="switch">
                      <input
                        type="checkbox"
                        .checked=${e.template_mode||!1}
                        @change=${e=>{const t=e.target.checked;this._updateIcon(r,o,{template_mode:t},a)}}
                      />
                      <span class="slider round"></span>
                    </label>
                  </div>
                  <div class="template-description">
                    Use Jinja2 templates for advanced icon control. Templates can control visibility
                    (true/false to show/hide icons) and customize state text. Return custom text for
                    Active State, return actual entity state for Inactive State.
                  </div>
                </div>

                ${e.template_mode?i.qy`
                      <div class="template-content">
                        <textarea
                          .value=${e.template||""}
                          @input=${e=>{const t=e.target;this._updateIcon(r,o,{template:t.value},a)}}
                          placeholder="{% if states('binary_sensor.example') == 'on' %}true{% else %}false{% endif %}"
                          class="template-editor"
                          rows="6"
                        ></textarea>
                        <div class="template-help">
                          <p><strong>For visibility control, return a boolean:</strong></p>
                          <ul>
                            <li>
                              <code>true</code>, <code>on</code>, <code>yes</code>, <code>1</code> →
                              Show icon (Active State)
                            </li>
                            <li>
                              <code>false</code>, <code>off</code>, <code>no</code>,
                              <code>0</code> → Hide icon (Inactive State)
                            </li>
                          </ul>
                          <p><strong>For custom state text, return a string:</strong></p>
                          <ul>
                            <li>
                              <code
                                >{% if states('weather.forecast_home') == 'cloudy' %}About to Rain{%
                                else %}{{ states('weather.forecast_home') }}{% endif %}</code
                              >
                              → When cloudy: shows "About to Rain" (Active), when not cloudy: shows
                              actual state (Inactive)
                            </li>
                            <li>
                              <code>{{ states('sensor.temperature') | round(1) }}°F</code> → Shows
                              formatted temperature and Active State is current
                            </li>
                          </ul>
                          <p>
                            <strong>Note:</strong> Use the same entity name throughout your template
                            to avoid "unknown" states
                          </p>
                        </div>
                      </div>
                    `:""}
              </div>

              <!-- Icon Animation Section -->
              ${this.renderSettingsSection("Icon Animation","Configure animations for active and inactive states",[{title:"Active Animation",description:"Animation when icon is active",hass:t,data:{active_icon_animation:e.active_icon_animation||"none"},schema:[this.selectField("active_icon_animation",[{value:"none",label:"None"},{value:"pulse",label:"Pulse"},{value:"spin",label:"Spin"},{value:"bounce",label:"Bounce"},{value:"flash",label:"Flash"},{value:"shake",label:"Shake"},{value:"vibrate",label:"Vibrate"},{value:"rotate-left",label:"Rotate Left"},{value:"rotate-right",label:"Rotate Right"},{value:"fade",label:"Fade"},{value:"scale",label:"Scale"},{value:"tada",label:"Tada"}])],onChange:e=>this._updateIcon(r,o,{active_icon_animation:e.detail.value.active_icon_animation},a)},{title:"Inactive Animation",description:"Animation when icon is inactive",hass:t,data:{inactive_icon_animation:e.inactive_icon_animation||"none"},schema:[this.selectField("inactive_icon_animation",[{value:"none",label:"None"},{value:"pulse",label:"Pulse"},{value:"spin",label:"Spin"},{value:"bounce",label:"Bounce"},{value:"flash",label:"Flash"},{value:"shake",label:"Shake"},{value:"vibrate",label:"Vibrate"},{value:"rotate-left",label:"Rotate Left"},{value:"rotate-right",label:"Rotate Right"},{value:"fade",label:"Fade"},{value:"scale",label:"Scale"},{value:"tada",label:"Tada"}])],onChange:e=>this._updateIcon(r,o,{inactive_icon_animation:e.detail.value.inactive_icon_animation},a)}])}
            </div>
          `))}
      </div>
    `}renderActionsTab(e,t,o,i){return r.A.render(e,t,(e=>i(e)))}renderOtherTab(e,t,o,a){var n;const r=e,s=(null===(n=null==t?void 0:t.locale)||void 0===n?void 0:n.language)||"en";return i.qy`
      <div class="module-other-settings">
        ${r.icons.map(((e,o)=>{var n,l,d,c,u,h;return i.qy`
            <div
              class="settings-section"
              style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
            >
              <!-- Show Units Toggle -->
              ${this.renderSettingsSection("Display Options","Configure what information to display",[{title:(0,p.kg)("editor.icon.show_units",s,"Show Units"),description:"Display the units of measurement alongside the entity state",hass:t,data:{show_units:e.show_units?"yes":"no"},schema:[this.selectField("show_units",[{value:"no",label:"No"},{value:"yes",label:"Yes"}])],onChange:e=>this._updateIcon(r,o,{show_units:"yes"===e.detail.value.show_units},a)},{title:"Enable Hover Effect",description:"Enable hover effects when mouse is over the icon",hass:t,data:{enable_hover_effect:e.enable_hover_effect?"yes":"no"},schema:[this.selectField("enable_hover_effect",[{value:"no",label:"No"},{value:"yes",label:"Yes"}])],onChange:e=>this._updateIcon(r,o,{enable_hover_effect:"yes"===e.detail.value.enable_hover_effect},a)}])}

              <!-- Name-Icon Spacing Control - Only show when both Name and Icon are enabled -->
              ${!1===e.show_name_when_active&&!1===e.show_name_when_inactive||!1===e.show_icon_when_active&&!1===e.show_icon_when_inactive?"":i.qy`
                    <div class="settings-section" style="margin-bottom: 24px;">
                      <div class="field-container" style="margin-bottom: 24px;">
                        <div
                          class="field-title"
                          style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
                        >
                          Name-Icon Spacing
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                        >
                          Adjust the spacing between the name and icon elements
                        </div>
                        <div
                          class="gap-control-container"
                          style="display: flex; align-items: center; gap: 12px;"
                        >
                          <input
                            type="range"
                            class="gap-slider"
                            min="0"
                            max="20"
                            step="1"
                            .value="${null!==(n=e.name_icon_gap)&&void 0!==n?n:8}"
                            @input=${e=>{const t=e.target,i=Number(t.value);this._updateIcon(r,o,{name_icon_gap:i},a)}}
                          />
                          <input
                            type="number"
                            class="gap-input"
                            style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                            min="0"
                            max="20"
                            step="1"
                            .value="${null!==(l=e.name_icon_gap)&&void 0!==l?l:8}"
                            @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||this._updateIcon(r,o,{name_icon_gap:i},a)}}
                            @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=isNaN(Number(t.value))?12:Number(t.value),n="ArrowUp"===e.key?1:-1,s=Math.max(0,Math.min(20,i+n));this._updateIcon(r,o,{name_icon_gap:s},a)}}}
                          />
                          <button
                            class="reset-btn"
                            @click=${()=>this._updateIcon(r,o,{name_icon_gap:8},a)}
                            title="Reset to default (8px)"
                          >
                            <ha-icon icon="mdi:refresh"></ha-icon>
                          </button>
                        </div>
                      </div>
                    </div>
                  `}

              <!-- Name-State Spacing Control - Only show when both Name and State are enabled -->
              ${!1===e.show_name_when_active&&!1===e.show_name_when_inactive||!1===e.show_state_when_active&&!1===e.show_state_when_inactive?"":i.qy`
                    <div class="settings-section" style="margin-bottom: 24px;">
                      <div class="field-container" style="margin-bottom: 24px;">
                        <div
                          class="field-title"
                          style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
                        >
                          Name-State Spacing
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                        >
                          Adjust the spacing between the name and state elements
                        </div>
                        <div
                          class="gap-control-container"
                          style="display: flex; align-items: center; gap: 12px;"
                        >
                          <input
                            type="range"
                            class="gap-slider"
                            min="0"
                            max="20"
                            step="1"
                            .value="${null!==(d=e.name_state_gap)&&void 0!==d?d:2}"
                            @input=${e=>{const t=e.target,i=Number(t.value);this._updateIcon(r,o,{name_state_gap:i},a)}}
                          />
                          <input
                            type="number"
                            class="gap-input"
                            style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                            min="0"
                            max="20"
                            step="1"
                            .value="${null!==(c=e.name_state_gap)&&void 0!==c?c:2}"
                            @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||this._updateIcon(r,o,{name_state_gap:i},a)}}
                            @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=isNaN(Number(t.value))?12:Number(t.value),n="ArrowUp"===e.key?1:-1,s=Math.max(0,Math.min(20,i+n));this._updateIcon(r,o,{name_state_gap:s},a)}}}
                          />
                          <button
                            class="reset-btn"
                            @click=${()=>this._updateIcon(r,o,{name_state_gap:2},a)}
                            title="Reset to default (2px)"
                          >
                            <ha-icon icon="mdi:refresh"></ha-icon>
                          </button>
                        </div>
                      </div>
                    </div>
                  `}

              <!-- Icon-State Spacing Control - Only show when Icon and State are enabled but Name is disabled -->
              ${!1===e.show_icon_when_active&&!1===e.show_icon_when_inactive||!1===e.show_state_when_active&&!1===e.show_state_when_inactive||!1!==e.show_name_when_active||!1!==e.show_name_when_inactive?"":i.qy`
                    <div class="settings-section" style="margin-bottom: 24px;">
                      <div class="field-container" style="margin-bottom: 24px;">
                        <div
                          class="field-title"
                          style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
                        >
                          Icon-State Spacing
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                        >
                          Adjust the spacing between the icon and state elements
                        </div>
                        <div
                          class="gap-control-container"
                          style="display: flex; align-items: center; gap: 12px;"
                        >
                          <input
                            type="range"
                            class="gap-slider"
                            min="0"
                            max="20"
                            step="1"
                            .value="${null!==(u=e.icon_state_gap)&&void 0!==u?u:4}"
                            @input=${e=>{const t=e.target,i=Number(t.value);this._updateIcon(r,o,{icon_state_gap:i},a)}}
                          />
                          <input
                            type="number"
                            class="gap-input"
                            style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                            min="0"
                            max="20"
                            step="1"
                            .value="${null!==(h=e.icon_state_gap)&&void 0!==h?h:4}"
                            @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||this._updateIcon(r,o,{icon_state_gap:i},a)}}
                            @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=isNaN(Number(t.value))?12:Number(t.value),n="ArrowUp"===e.key?1:-1,s=Math.max(0,Math.min(20,i+n));this._updateIcon(r,o,{icon_state_gap:s},a)}}}
                          />
                          <button
                            class="reset-btn"
                            @click=${()=>this._updateIcon(r,o,{icon_state_gap:4},a)}
                            title="Reset to default (4px)"
                          >
                            <ha-icon icon="mdi:refresh"></ha-icon>
                          </button>
                        </div>
                      </div>
                    </div>
                  `}

              <!-- Container Style Section -->
              <div
                class="settings-section"
                style="margin-bottom: 24px; padding: 16px; background: var(--card-background-color); border-radius: 8px;"
              >
                <div
                  class="section-title"
                  style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
                >
                  Container Style
                </div>

                <!-- Vertical Alignment -->
                <div class="settings-section" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
                  >
                    Vertical Alignment
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                  >
                    How to align the icon within the container
                  </div>
                  ${this.renderUcForm(t,{vertical_alignment:e.vertical_alignment||"center"},[this.selectField("vertical_alignment",[{value:"top",label:"Top"},{value:"center",label:"Center"},{value:"bottom",label:"Bottom"}])],(e=>this._updateIcon(r,o,{vertical_alignment:e.detail.value.vertical_alignment},a)),!1)}
                </div>

                <!-- Container Width -->
                <div class="settings-section" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
                  >
                    Container Width
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                  >
                    Maximum width of the icon container as percentage (auto by default)
                  </div>
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div
                      class="gap-control-container"
                      style="display: flex; align-items: center; gap: 12px;"
                    >
                      <input
                        type="range"
                        class="gap-slider"
                        min="10"
                        max="100"
                        step="5"
                        .value="${e.container_width||""}"
                        @input=${e=>{const t=e.target,i=Number(t.value);this._updateIcon(r,o,{container_width:i},a)}}
                      />
                      <input
                        type="number"
                        class="gap-input"
                        style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                        min="10"
                        max="100"
                        step="5"
                        .value="${e.container_width||""}"
                        @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||this._updateIcon(r,o,{container_width:i},a)}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=Number(t.value)||50,n="ArrowUp"===e.key?5:-5,s=Math.max(10,Math.min(100,i+n));this._updateIcon(r,o,{container_width:s},a)}}}
                      />
                      <button
                        class="reset-btn"
                        @click=${()=>this._updateIcon(r,o,{container_width:void 0},a)}
                        title="Reset to default (auto)"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                </div>

                <!-- Container Background Shape -->
                <div class="settings-section" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
                  >
                    Container Background Shape
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                  >
                    Shape of the icon container background
                  </div>
                  ${this.renderUcForm(t,{container_background_shape:e.container_background_shape||"none"},[this.selectField("container_background_shape",[{value:"none",label:"None"},{value:"rounded",label:"Rounded"},{value:"square",label:"Square"},{value:"circle",label:"Circle"}])],(e=>this._updateIcon(r,o,{container_background_shape:e.detail.value.container_background_shape},a)),!1)}
                  ${e.container_background_shape&&"none"!==e.container_background_shape?i.qy`
                        <div class="conditional-fields-group" style="margin-top: 24px;">
                          <div class="conditional-fields-content">
                            <div class="field-container" style="margin-bottom: 16px;">
                              <div
                                class="field-title"
                                style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                              >
                                Container Background Color
                              </div>
                              <ultra-color-picker
                                .value=${e.container_background_color||"#808080"}
                                @value-changed=${e=>this._updateIcon(r,o,{container_background_color:e.detail.value},a)}
                              ></ultra-color-picker>
                            </div>
                          </div>
                        </div>
                      `:""}
                </div>
              </div>

              <!-- Dynamic Icon Template -->
              <div class="template-section" style="margin-bottom: 24px;">
                <div class="template-header">
                  <div class="switch-container">
                    <label class="switch-label">Dynamic Icon Template</label>
                    <label class="switch">
                      <input
                        type="checkbox"
                        .checked=${e.dynamic_icon_template_mode||!1}
                        @change=${e=>{const t=e.target.checked;this._updateIcon(r,o,{dynamic_icon_template_mode:t},a)}}
                      />
                      <span class="slider round"></span>
                    </label>
                  </div>
                  <div class="template-description">
                    Use Jinja2 templates to dynamically select the icon based on entity states or
                    conditions.
                  </div>
                </div>

                ${e.dynamic_icon_template_mode?i.qy`
                      <div class="template-content">
                        <textarea
                          .value=${e.dynamic_icon_template||""}
                          @input=${e=>{const t=e.target;this._updateIcon(r,o,{dynamic_icon_template:t.value},a)}}
                          placeholder="{% if states('sensor.weather') == 'sunny' %}mdi:weather-sunny{% else %}mdi:weather-cloudy{% endif %}"
                          class="template-editor"
                          rows="6"
                        ></textarea>
                        <div class="template-help">
                          <p><strong>Template should return an icon name:</strong></p>
                          <ul>
                            <li><code>mdi:lightbulb</code> → Material Design Icons</li>
                            <li><code>fas:home</code> → Font Awesome Solid</li>
                            <li><code>fab:github</code> → Font Awesome Brands</li>
                          </ul>
                          <p><strong>Examples:</strong></p>
                          <ul>
                            <li>
                              <code
                                >{% if states('sensor.weather') == 'sunny' %}mdi:weather-sunny{%
                                else %}mdi:weather-cloudy{% endif %}</code
                              >
                            </li>
                            <li>
                              <code
                                >{{ 'mdi:battery-' + (states('sensor.battery') | int // 10 * 10) |
                                string }}</code
                              >
                            </li>
                          </ul>
                        </div>
                      </div>
                    `:""}
              </div>

              <!-- Dynamic Color Template -->
              <div class="template-section">
                <div class="template-header">
                  <div class="switch-container">
                    <label class="switch-label">Dynamic Color Template</label>
                    <label class="switch">
                      <input
                        type="checkbox"
                        .checked=${e.dynamic_color_template_mode||!1}
                        @change=${e=>{const t=e.target.checked;this._updateIcon(r,o,{dynamic_color_template_mode:t},a)}}
                      />
                      <span class="slider round"></span>
                    </label>
                  </div>
                  <div class="template-description">
                    Use Jinja2 templates to dynamically set the icon color based on entity states or
                    values.
                  </div>
                </div>

                ${e.dynamic_color_template_mode?i.qy`
                      <div class="template-content">
                        <textarea
                          .value=${e.dynamic_color_template||""}
                          @input=${e=>{const t=e.target;this._updateIcon(r,o,{dynamic_color_template:t.value},a)}}
                          placeholder="{% if states('sensor.temperature') | float > 20 %}#ff0000{% else %}#0066cc{% endif %}"
                          class="template-editor"
                          rows="6"
                        ></textarea>
                        <div class="template-help">
                          <p><strong>Template should return a color value:</strong></p>
                          <ul>
                            <li><code>#ff0000</code> → Hex colors</li>
                            <li><code>rgb(255,0,0)</code> → RGB colors</li>
                            <li><code>var(--primary-color)</code> → CSS variables</li>
                          </ul>
                          <p><strong>Examples:</strong></p>
                          <ul>
                            <li>
                              <code
                                >{% if states('sensor.temperature') | float > 25 %}#ff0000{% else
                                %}#0066cc{% endif %}</code
                              >
                            </li>
                            <li>
                              <code
                                >{{ 'hsl(' + (states('sensor.humidity') | int * 2) | string +
                                ',70%,50%)' }}</code
                              >
                            </li>
                          </ul>
                        </div>
                      </div>
                    `:""}
              </div>
            </div>
          `}))}
      </div>
    `}renderPreview(e,t){const o=e;!this._templateService&&t&&(this._templateService=new s.I(t)),this._templateService&&t&&this._templateService.updateHass(t);const a=o,n=o.design||{},r={padding:n.padding_top||n.padding_bottom||n.padding_left||n.padding_right||a.padding_top||a.padding_bottom||a.padding_left||a.padding_right?`${this.addPixelUnit(n.padding_top||a.padding_top)||"8px"} ${this.addPixelUnit(n.padding_right||a.padding_right)||"0px"} ${this.addPixelUnit(n.padding_bottom||a.padding_bottom)||"8px"} ${this.addPixelUnit(n.padding_left||a.padding_left)||"0px"}`:"8px 0",margin:n.margin_top||n.margin_bottom||n.margin_left||n.margin_right||a.margin_top||a.margin_bottom||a.margin_left||a.margin_right?`${this.addPixelUnit(n.margin_top||a.margin_top)||"0px"} ${this.addPixelUnit(n.margin_right||a.margin_right)||"0px"} ${this.addPixelUnit(n.margin_bottom||a.margin_bottom)||"0px"} ${this.addPixelUnit(n.margin_left||a.margin_left)||"0px"}`:"0",background:n.background_color||a.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},a),n),t),backgroundSize:n.background_size||a.background_size||"cover",backgroundPosition:n.background_position||a.background_position||"center",backgroundRepeat:n.background_repeat||a.background_repeat||"no-repeat",border:(n.border_style||a.border_style)&&"none"!==(n.border_style||a.border_style)?`${this.addPixelUnit(n.border_width||a.border_width)||"1px"} ${n.border_style||a.border_style} ${n.border_color||a.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(n.border_radius||a.border_radius)||"0",position:n.position||a.position||"relative",top:n.top||a.top||"auto",bottom:n.bottom||a.bottom||"auto",left:n.left||a.left||"auto",right:n.right||a.right||"auto",zIndex:n.z_index||a.z_index||"auto",width:n.width||a.width||"100%",height:n.height||a.height||"auto",maxWidth:n.max_width||a.max_width||"100%",maxHeight:n.max_height||a.max_height||"none",minWidth:n.min_width||a.min_width||"none",minHeight:n.min_height||a.min_height||"auto",overflow:n.overflow||a.overflow||"hidden",clipPath:n.clip_path||a.clip_path||"none",backdropFilter:n.backdrop_filter||a.backdrop_filter||"none",boxShadow:n.box_shadow_h&&n.box_shadow_v?`${n.box_shadow_h||"0"} ${n.box_shadow_v||"0"} ${n.box_shadow_blur||"0"} ${n.box_shadow_spread||"0"} ${n.box_shadow_color||"rgba(0,0,0,0.1)"}`:a.box_shadow_h&&a.box_shadow_v?`${a.box_shadow_h||"0"} ${a.box_shadow_v||"0"} ${a.box_shadow_blur||"0"} ${a.box_shadow_spread||"0"} ${a.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};this._injectGlobalStyles();const l=this._localStylesInjected?i.qy``:i.qy`<style>
          ${this.getStyles()}
        </style>`;return this._localStylesInjected=!0,i.qy`
      ${l}
      <div class="icon-module-container" style=${this.styleObjectToCss(r)}>
        <div class="icon-module-preview">
          <div
            class="icon-grid"
            style="
            display: grid;
            grid-template-columns: repeat(${Math.min(o.columns||3,o.icons.length)}, 1fr);
            gap: ${o.gap||16}px;
            justify-content: ${o.alignment||"center"};
          "
          >
            ${o.icons.slice(0,6).map((e=>{var a,r,l,c,p,u,h,m,g,_,b;const v=null==t?void 0:t.states[e.entity],f=(null==v?void 0:v.state)||"unknown",y=this._evaluateIconState(e,t),x=y?!1!==e.show_icon_when_active:!1!==e.show_icon_when_inactive,w=y?!1!==e.show_name_when_active:!1!==e.show_name_when_inactive,k=y?!1!==e.show_state_when_active:!1!==e.show_state_when_inactive;let $=y&&e.icon_active||e.icon_inactive;if(e.dynamic_icon_template_mode&&e.dynamic_icon_template){!this._templateService&&t&&(this._templateService=new s.I(t));const o=this._hashString(e.dynamic_icon_template),i=`dynamic_icon_${e.entity}_${e.id}_${o}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(e.dynamic_icon_template,i,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(a=null==t?void 0:t.__uvc_template_strings)||void 0===a?void 0:a[i];n&&""!==String(n).trim()&&($=String(n))}else(null===(r=null==v?void 0:v.attributes)||void 0===r?void 0:r.icon)&&!$&&($=v.attributes.icon);let C=e.use_entity_color_for_icon&&(null===(l=null==v?void 0:v.attributes)||void 0===l?void 0:l.rgb_color)?`rgb(${v.attributes.rgb_color.join(",")})`:y?e.active_icon_color:e.inactive_icon_color;if(e.dynamic_color_template_mode&&e.dynamic_color_template){!this._templateService&&t&&(this._templateService=new s.I(t));const o=this._hashString(e.dynamic_color_template),i=`dynamic_color_${e.entity}_${e.id}_${o}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(e.dynamic_color_template,i,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const a=null===(c=null==t?void 0:t.__uvc_template_strings)||void 0===c?void 0:c[i];a&&""!==String(a).trim()&&(C=String(a))}const S=n.color||(y?e.active_name_color:e.inactive_name_color),A=n.color||(y?e.active_state_color:e.inactive_state_color),T=y?e.custom_active_name_text||e.name||(null===(p=null==v?void 0:v.attributes)||void 0===p?void 0:p.friendly_name)||e.entity:e.custom_inactive_name_text||e.name||(null===(u=null==v?void 0:v.attributes)||void 0===u?void 0:u.friendly_name)||e.entity;let z;if(e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const o=this._hashString(e.template),i=`display_${e.entity}_${e.id}_${o}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(e.template,i,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const a=null===(h=null==t?void 0:t.__uvc_template_strings)||void 0===h?void 0:h[i];if(void 0!==a){const o=String(a).toLowerCase();z=["true","false","on","off","yes","no","0","1"].includes(o)||""===String(a).trim()?y?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(f,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(f,e.entity,e,t):String(a)!==f?String(a):y?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(f,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(f,e.entity,e,t)}else z=y?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(f,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(f,e.entity,e,t)}else z=y?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(f,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(f,e.entity,e,t);const I=y?e.active_icon_background||e.icon_background:e.inactive_icon_background||e.icon_background,D=y?e.active_icon_background_color||e.icon_background_color:e.inactive_icon_background_color||e.icon_background_color,L="none"!==I?{backgroundColor:e.use_entity_color_for_icon_background&&(null===(m=null==v?void 0:v.attributes)||void 0===m?void 0:m.rgb_color)?`rgb(${v.attributes.rgb_color.join(",")})`:D,borderRadius:"circle"===I?"50%":"rounded-square"===I?"8px":"0",padding:"8px"}:{},E=Object.assign(Object.assign({},{display:"flex",alignItems:"center",justifyContent:"center"}),L),M=e.active_icon_animation||"none",P=e.inactive_icon_animation||"none",R=y?M:P,O="none"!==R?`icon-animation-${R}`:"";O&&setTimeout((()=>{this._updateIconAnimationClasses(e.entity,O,y)}),100);const U={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:e.vertical_alignment||"center",padding:"0",borderRadius:"circle"===e.container_background_shape?"50%":"rounded"===e.container_background_shape?"8px":(e.container_background_shape,"0"),background:e.container_background_shape&&"none"!==e.container_background_shape?e.container_background_color||"#808080":"transparent",cursor:"pointer",transition:"all 0.2s ease",width:e.container_width?`${e.container_width}%`:"auto",minWidth:"60px"};let N=null,B=null,j=!1,H=0,F=0;return i.qy`
                <div
                  class="icon-item-preview ${e.enable_hover_effect?"hover-enabled":""}"
                  style=${this.styleObjectToCss(Object.assign(Object.assign({},U),{gap:"0px",touchAction:"manipulation",backgroundImage:this.getBackgroundImageCSS(e,t),backgroundSize:e.background_size||"cover",backgroundPosition:n.background_position||"center",backgroundRepeat:n.background_repeat||"no-repeat",margin:"0 auto"}))}
                  @pointerdown=${i=>{i.preventDefault(),j=!1,o.hold_action&&(B=setTimeout((()=>{j=!0;const a="default"===o.hold_action.action?Object.assign(Object.assign({},o.hold_action),{action:"toggle",entity:e.entity}):Object.assign(Object.assign({},o.hold_action),{entity:o.hold_action.entity||e.entity});d.K.handleAction(a,t,i.target)}),500))}}
                  @pointerup=${i=>{if(i.preventDefault(),i.stopPropagation(),B&&(clearTimeout(B),B=null),j)return void(j=!1);const a=Date.now();if(a-F<300&&1===H){if(N&&(clearTimeout(N),N=null),H=0,o.double_tap_action){const a="default"===o.double_tap_action.action?Object.assign(Object.assign({},o.double_tap_action),{action:"toggle",entity:e.entity}):Object.assign(Object.assign({},o.double_tap_action),{entity:o.double_tap_action.entity||e.entity});d.K.handleAction(a,t,i.target)}}else if(H=1,F=a,N&&clearTimeout(N),!o.double_tap_action&&o.tap_action){const a="default"===o.tap_action.action?Object.assign(Object.assign({},o.tap_action),{action:"toggle",entity:e.entity}):Object.assign(Object.assign({},o.tap_action),{entity:o.tap_action.entity||e.entity});d.K.handleAction(a,t,i.target)}else o.tap_action&&(N=setTimeout((()=>{if(1===H){const a="default"===o.tap_action.action?Object.assign(Object.assign({},o.tap_action),{action:"toggle",entity:e.entity}):Object.assign(Object.assign({},o.tap_action),{entity:o.tap_action.entity||e.entity});d.K.handleAction(a,t,i.target)}H=0}),300))}}
                  @pointerleave=${()=>{B&&(clearTimeout(B),B=null),j=!1}}
                >
                  ${x?i.qy`
                        <div
                          style="${this.styleObjectToCss(Object.assign(Object.assign({},E),{marginBottom:w?`${null!==(g=e.name_icon_gap)&&void 0!==g?g:8}px`:k?`${null!==(_=e.icon_state_gap)&&void 0!==_?_:4}px`:"0px"}))}"
                        >
                          <ha-icon
                            icon="${$||"mdi:help-circle"}"
                            class="${O} ultra-force-animation"
                            style="
                      color: ${C||"var(--secondary-text-color)"};
                      --mdc-icon-size: ${Number(y?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                    "
                          ></ha-icon>
                        </div>
                      `:""}
                  ${w?i.qy`
                        <div
                          class="icon-name"
                          style="
                      font-size: ${y?e.active_text_size||e.text_size||12:e.inactive_text_size||e.text_size||14}px;
                        color: ${S||"var(--primary-text-color)"};
                      text-align: center;
                      line-height: 1.2;
                        max-width: 120px;
                      word-wrap: break-word;
                      margin-bottom: ${k?`${null!==(b=e.name_state_gap)&&void 0!==b?b:2}px`:"0px"};
                    "
                        >
                          ${T}
                        </div>
                      `:""}
                  ${k?i.qy`
                        <div
                          class="icon-state"
                          style="
                      font-size: ${y?e.active_state_size||e.state_size||12:e.inactive_state_size||e.state_size||12}px;
                        color: ${A||"var(--secondary-text-color)"};
                      text-align: center;
                      line-height: 1.2;
                    "
                        >
                          ${z}
                        </div>
                      `:""}
                </div>
              `}))}
            ${o.icons.length>6?i.qy`
                  <div
                    class="more-icons"
                    style="
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 8px;
                color: var(--secondary-text-color);
                font-size: 12px;
                font-style: italic;
              "
                  >
                    +${o.icons.length-6} more
                  </div>
                `:""}
          </div>

          <!-- More Icons Indicator -->
          ${o.icons.length>6?i.qy`
                <div
                  class="more-icons"
                  style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 8px;
                    color: var(--secondary-text-color);
                    font-size: 12px;
                    font-style: italic;
                    margin-top: 8px;
                  "
                >
                  +${o.icons.length-6} more icons
                </div>
              `:""}
        </div>
      </div>
    `}renderSplitPreview(e,t){var o;const a=e;let n=!1;if(a.icons.length>0){const e=a.icons[0];if(e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.template),a=`display_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(a)&&this._templateService.subscribeToTemplate(e.template,a,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const r=null===(o=null==t?void 0:t.__uvc_template_strings)||void 0===o?void 0:o[a];if(void 0!==r){const o=String(r).toLowerCase();if(["true","false","on","off","yes","no","0","1"].includes(o))n=["true","on","yes","1"].includes(o)||parseFloat(o)>0&&!isNaN(parseFloat(o));else if(""!==String(r).trim()){const o=null==t?void 0:t.states[e.entity],i=(null==o?void 0:o.state)||"unknown";n=String(r)!==i||this._evaluateIconState(e,t)}else n=!1}}else n=this._evaluateIconState(e,t)}return this._injectGlobalStyles(),this._injectKeyframesForAllSplitPreviewIcons(),i.qy`
      <style>
        ${u._ANIMATION_KEYFRAMES} .icon-split-preview {
          --animation-duration: 2s;
          --animation-timing: linear;
        }
        .icon-split-preview .icon-animation-spin {
          animation: iconSpin var(--animation-duration) var(--animation-timing) infinite;
        }
        .icon-split-preview .icon-animation-bounce {
          animation: iconBounce 1s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-pulse {
          animation: iconPulse 1.5s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-flash {
          animation: iconFlash 1s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-shake {
          animation: iconShake 0.5s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-vibrate {
          animation: iconVibrate 0.3s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-rotate-left {
          animation: iconRotateLeft var(--animation-duration) var(--animation-timing) infinite;
        }
        .icon-split-preview .icon-animation-rotate-right {
          animation: iconRotateRight var(--animation-duration) var(--animation-timing) infinite;
        }
        .icon-split-preview .icon-animation-fade {
          animation: iconFade 2s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-scale {
          animation: iconScale 1.5s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-tada {
          animation: iconTada 2s ease-in-out infinite;
        }
      </style>
      <div class="icon-split-preview">
        <!-- State Labels -->
        <div
          style="
               display: grid; 
               grid-template-columns: 1fr 1fr; 
               margin-bottom: 12px;
               text-align: center;
             "
        >
          <div>
            ${n?i.qy`<div style="height: 14px; margin-bottom: 4px;"></div>`:i.qy`<div
                  style="font-size: 10px; font-weight: 700; color: var(--primary-color); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;"
                >
                  Current
                </div>`}
            <div style="font-size: 12px; font-weight: 600; color: var(--secondary-text-color);">
              Inactive State
            </div>
          </div>
          <div>
            ${n?i.qy`<div
                  style="font-size: 10px; font-weight: 700; color: var(--primary-color); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;"
                >
                  Current
                </div>`:i.qy`<div style="height: 14px; margin-bottom: 4px;"></div>`}
            <div style="font-size: 12px; font-weight: 600; color: var(--secondary-text-color);">
              Active State
            </div>
          </div>
        </div>

        <!-- Split Preview Container -->
        <div
          style="
               display: grid; 
               grid-template-columns: 1fr 1fr; 
               border: 1px solid var(--divider-color); 
               border-radius: 8px; 
               overflow: hidden;
               min-height: 120px;
             "
        >
          <!-- Inactive Preview -->
          <div
            style="
                 background: var(--card-background-color);
                 border-right: 1px solid var(--divider-color);
                 padding: 16px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
               "
          >
            ${this._renderSimpleIconGrid(a,t,!1)}
          </div>

          <!-- Active Preview -->
          <div
            style="
                 background: var(--card-background-color);
                 padding: 16px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
               "
          >
            ${this._renderSimpleIconGrid(a,t,!0)}
          </div>
        </div>

        <!-- Icon Count Indicator -->
        ${a.icons.length>6?i.qy`
              <div
                style="
                 text-align: center;
                 padding: 8px;
                 color: var(--secondary-text-color);
                 font-size: 12px;
                 font-style: italic;
               "
              >
                Showing first 6 of ${a.icons.length} icons
              </div>
            `:""}
      </div>
    `}_renderSimpleIconGrid(e,t,o){const a=e.icons.slice(0,6);return Math.min(3,a.length),i.qy`
      <div
        style="
          display: flex;
        "
      >
        ${a.map((e=>this._renderSingleIconPreview(e,t,o)))}
      </div>
    `}_renderSingleIconPreview(e,t,o){var a,n,r,l,d,c,p,u,h,m,g;const _=null==t?void 0:t.states[e.entity],b=(null==_?void 0:_.state)||"unknown",v=o?!1!==e.show_icon_when_active:!1!==e.show_icon_when_inactive,f=o?!1!==e.show_name_when_active:!1!==e.show_name_when_inactive,y=o?!1!==e.show_state_when_active:!1!==e.show_state_when_inactive;let x=o&&e.icon_active||e.icon_inactive;if(e.dynamic_icon_template_mode&&e.dynamic_icon_template){!this._templateService&&t&&(this._templateService=new s.I(t));const o=this._hashString(e.dynamic_icon_template),i=`dynamic_icon_${e.entity}_${e.id}_${o}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(e.dynamic_icon_template,i,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(a=null==t?void 0:t.__uvc_template_strings)||void 0===a?void 0:a[i];n&&""!==String(n).trim()&&(x=String(n))}else(null===(n=null==_?void 0:_.attributes)||void 0===n?void 0:n.icon)&&!x&&(x=_.attributes.icon);let w=e.use_entity_color_for_icon&&(null===(r=null==_?void 0:_.attributes)||void 0===r?void 0:r.rgb_color)?`rgb(${_.attributes.rgb_color.join(",")})`:o?e.active_icon_color:e.inactive_icon_color;if(e.dynamic_color_template_mode&&e.dynamic_color_template){!this._templateService&&t&&(this._templateService=new s.I(t));const o=this._hashString(e.dynamic_color_template),i=`dynamic_color_${e.entity}_${e.id}_${o}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(e.dynamic_color_template,i,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const a=null===(l=null==t?void 0:t.__uvc_template_strings)||void 0===l?void 0:l[i];a&&""!==String(a).trim()&&(w=String(a))}const k=o?e.active_name_color:e.inactive_name_color,$=o?e.active_state_color:e.inactive_state_color,C=o?e.custom_active_name_text||e.name||(null===(d=null==_?void 0:_.attributes)||void 0===d?void 0:d.friendly_name)||e.entity:e.custom_inactive_name_text||e.name||(null===(c=null==_?void 0:_.attributes)||void 0===c?void 0:c.friendly_name)||e.entity;let S;if(e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.template),a=`state_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(a)&&this._templateService.subscribeToTemplate(e.template,a,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(p=null==t?void 0:t.__uvc_template_strings)||void 0===p?void 0:p[a];if(void 0!==n&&""!==String(n).trim()){const i=String(n).toLowerCase();S=["true","false","on","off","yes","no","0","1"].includes(i)?o?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(b,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(b,e.entity,e,t):"unknown"===String(n)?"Template Error: Check entity names":String(n)}else S=this._formatValueWithUnits(b,e.entity,e,t)}else S=o?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(b,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(b,e.entity,e,t);const A=o?e.active_icon_background||e.icon_background:e.inactive_icon_background||e.icon_background,T=o?e.active_icon_background_color||e.icon_background_color:e.inactive_icon_background_color||e.icon_background_color,z="none"!==A?{backgroundColor:e.use_entity_color_for_icon_background&&(null===(u=null==_?void 0:_.attributes)||void 0===u?void 0:u.rgb_color)?`rgb(${_.attributes.rgb_color.join(",")})`:T,borderRadius:"circle"===A?"50%":"rounded-square"===A?"8px":"0",padding:"8px"}:{},I=Object.assign(Object.assign({},{display:"flex",alignItems:"center",justifyContent:"center"}),z),D=e.active_icon_animation||"none",L=e.inactive_icon_animation||"none",E=o?D:L,M="none"!==E?`icon-animation-${E}`:"",P={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:e.vertical_alignment||"center",padding:"0",borderRadius:"circle"===e.container_background_shape?"50%":"rounded"===e.container_background_shape?"8px":"square"===e.container_background_shape?"0":"8px",background:e.container_background_shape&&"none"!==e.container_background_shape?e.container_background_color||"#808080":"transparent",backgroundImage:this.getBackgroundImageCSS(e,t),backgroundSize:e.background_size||"cover",backgroundPosition:e.background_position||"center",backgroundRepeat:e.background_repeat||"no-repeat",cursor:"pointer",transition:"all 0.2s ease",width:e.container_width?`${e.container_width}%`:"auto",minWidth:"60px",margin:"0 auto"},R=null!==(h=e.name_icon_gap)&&void 0!==h?h:8,O=null!==(m=e.name_state_gap)&&void 0!==m?m:2,U=null!==(g=e.icon_state_gap)&&void 0!==g?g:4;return i.qy`
      <div
        class="icon-item-preview ${e.enable_hover_effect?"hover-enabled":""}"
        style=${this.styleObjectToCss(Object.assign(Object.assign({},P),{gap:"0px"}))}
      >
        ${v?i.qy`
              <div
                style="${this.styleObjectToCss(Object.assign(Object.assign({},I),{marginBottom:f?`${R}px`:y?`${U}px`:"0px"}))}"
              >
                <ha-icon
                  icon="${x||"mdi:help-circle"}"
                  class="${M} ultra-force-animation"
                  style="
                    color: ${w||"var(--secondary-text-color)"};
                    --mdc-icon-size: ${Number(o?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                    ${M&&"none"!==M?`animation: ${this._getInlineAnimation(M)} !important;`:""}
                  "
                  data-animation-debug="${M||"none"}"
                  data-is-active="${o}"
                ></ha-icon>
              </div>
            `:""}
        ${f?i.qy`
              <div
                class="icon-name"
                style="
                  font-size: ${o?e.active_text_size||e.text_size||12:e.inactive_text_size||e.text_size||14}px;
                  color: ${k||"var(--primary-text-color)"};
                  text-align: center;
                  line-height: 1.2;
                  max-width: 120px;
                  word-wrap: break-word;
                  margin-bottom: ${y?`${O}px`:"0px"};
                "
              >
                ${C}
              </div>
            `:""}
        ${y?i.qy`
              <div
                class="icon-state"
                style="
                  font-size: ${o?e.active_state_size||e.state_size||10:e.inactive_state_size||e.state_size||10}px;
                  color: ${$||"var(--secondary-text-color)"};
                  text-align: center;
                  line-height: 1.2;
                "
              >
                ${S}
              </div>
            `:""}
      </div>
    `}renderIconGrid(e,t,o,a=!0){return i.qy`
      <div
        class="icon-grid"
        style="
          display: grid;
          grid-template-columns: repeat(${Math.min(Math.max(1,Math.floor((e.columns||3)/2)),e.icons.length)}, 1fr);
          gap: ${e.gap||16}px;
          justify-content: ${e.alignment||"center"};
        "
      >
        ${e.icons.slice(0,6).map((e=>{var n,r,s,l,d,c,p,u;const h=null==t?void 0:t.states[e.entity],m=(null==h?void 0:h.state)||"unknown",g=o,_=g?!1!==e.show_icon_when_active:!1!==e.show_icon_when_inactive,b=g?!1!==e.show_name_when_active:!1!==e.show_name_when_inactive,v=g?!1!==e.show_state_when_active:!1!==e.show_state_when_inactive;let f=g&&e.icon_active||e.icon_inactive;(null===(n=null==h?void 0:h.attributes)||void 0===n?void 0:n.icon)&&!f&&(f=h.attributes.icon);const y=e.use_entity_color_for_icon&&(null===(r=null==h?void 0:h.attributes)||void 0===r?void 0:r.rgb_color)?`rgb(${h.attributes.rgb_color.join(",")})`:g?e.active_icon_color:e.inactive_icon_color,x=g?e.active_name_color:e.inactive_name_color,w=g?e.active_state_color:e.inactive_state_color,k=g?e.custom_active_name_text||e.name||(null===(s=null==h?void 0:h.attributes)||void 0===s?void 0:s.friendly_name)||e.entity:e.custom_inactive_name_text||e.name||(null===(l=null==h?void 0:h.attributes)||void 0===l?void 0:l.friendly_name)||e.entity;let $;$=g?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(m,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(m,e.entity,e,t);const C=g?e.active_icon_background||e.icon_background:e.inactive_icon_background||e.icon_background,S=g?e.active_icon_background_color||e.icon_background_color:e.inactive_icon_background_color||e.icon_background_color,A="none"!==C?{backgroundColor:e.use_entity_color_for_icon_background&&(null===(d=null==h?void 0:h.attributes)||void 0===d?void 0:d.rgb_color)?`rgb(${h.attributes.rgb_color.join(",")})`:S,borderRadius:"circle"===C?"50%":"rounded-square"===C?"8px":"0",padding:"8px"}:{},T=Object.assign(Object.assign({},{display:"flex",alignItems:"center",justifyContent:"center"}),A),z=e.active_icon_animation||"none",I=e.inactive_icon_animation||"none",D=g?z:I,L="none"!==D?`icon-animation-${D}`:"";L&&a&&setTimeout((()=>{this._updateIconAnimationClasses(e.entity,L,g)}),150);const E={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:e.vertical_alignment||"center",padding:"8px",borderRadius:"circle"===e.container_background_shape?"50%":"rounded"===e.container_background_shape?"8px":"square"===e.container_background_shape?"0":"8px",background:e.container_background_shape&&"none"!==e.container_background_shape?e.container_background_color||"#808080":"transparent",backgroundImage:this.getBackgroundImageCSS(e,t),backgroundSize:e.background_size||"cover",backgroundPosition:e.background_position||"center",backgroundRepeat:e.background_repeat||"no-repeat",cursor:"pointer",transition:"all 0.2s ease",width:e.container_width?`${e.container_width}%`:"auto",minWidth:"60px",margin:"0 auto"},M=null!==(c=e.name_icon_gap)&&void 0!==c?c:8,P=null!==(p=e.name_state_gap)&&void 0!==p?p:2,R=null!==(u=e.icon_state_gap)&&void 0!==u?u:4;return i.qy`
            <div
              class="icon-item-preview ${e.enable_hover_effect?"hover-enabled":""}"
              style=${this.styleObjectToCss(Object.assign(Object.assign({},E),{gap:"0px"}))}
            >
              ${_?i.qy`
                    <div
                      style="${this.styleObjectToCss(Object.assign(Object.assign({},T),{marginBottom:b?`${M}px`:v?`${R}px`:"0px"}))}"
                    >
                      <ha-icon
                        icon="${f||"mdi:help-circle"}"
                        class="${L} ultra-force-animation"
                        style="
                          color: ${y||"var(--secondary-text-color)"};
                          --mdc-icon-size: ${Number(g?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                          ${L&&"none"!==L?`animation: ${this._getInlineAnimation(L)} !important;`:""}
                        "
                        data-animation-debug="${L||"none"}"
                        data-is-active="${g}"
                      ></ha-icon>
                    </div>
                  `:""}
              ${b?i.qy`
                    <div
                      class="icon-name"
                      style="
                        font-size: ${g?e.active_text_size||e.text_size||12:e.inactive_text_size||e.text_size||14}px;
                        color: ${x||"var(--primary-text-color)"};
                        text-align: center;
                        line-height: 1.2;
                        max-width: 120px;
                        word-wrap: break-word;
                        margin-bottom: ${v?`${P}px`:"0px"};
                      "
                    >
                      ${k}
                    </div>
                  `:""}
              ${v?i.qy`
                    <div
                      class="icon-state"
                      style="
                        font-size: ${g?e.active_state_size||e.state_size||10:e.inactive_state_size||e.state_size||10}px;
                        color: ${w||"var(--secondary-text-color)"};
                        text-align: center;
                        line-height: 1.2;
                      "
                    >
                      ${$}
                    </div>
                  `:""}
            </div>
          `}))}
      </div>
    `}validate(e){const t=e,o=[...super.validate(e).errors];return t.icons&&0!==t.icons.length||o.push("At least one icon is required"),t.icons.forEach(((e,t)=>{e.entity&&""!==e.entity.trim()||o.push(`Icon ${t+1}: Entity ID is required`),e.icon_inactive&&""!==e.icon_inactive.trim()||o.push(`Icon ${t+1}: Inactive icon is required`)})),{valid:0===o.length,errors:o}}updateHass(e){this._templateService&&this._templateService.updateHass(e)}cleanup(){this._templateService&&(this._templateService.unsubscribeAllTemplates(),this._templateService=void 0)}_isBinaryEntity(e){const t=e.split(".")[0];return["binary_sensor","switch","input_boolean","automation","script","light","fan","lock","cover","device_tracker"].includes(t)}_evaluateIconState(e,t){var o;const i=null==t?void 0:t.states[e.entity];if(!i)return!1;const a=i.state;if(e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.template),n=`display_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(n)&&this._templateService.subscribeToTemplate(e.template,n,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const r=null===(o=null==t?void 0:t.__uvc_template_strings)||void 0===o?void 0:o[n];if(void 0!==r){const e=String(r).toLowerCase();if(["true","false","on","off","yes","no","0","1"].includes(e))return["true","on","yes","1"].includes(e)||parseFloat(e)>0&&!isNaN(parseFloat(e));if(""===String(r).trim())return!1;if(String(r)!==a)return!0}}if(e.active_state&&e.inactive_state)return a===e.active_state||(e.inactive_state,!1);if(e.active_state)return a===e.active_state;if(e.inactive_state)return a!==e.inactive_state;if(["on","true","active","open","playing","home"].includes(a.toLowerCase()))return!0;if(["off","false","inactive","closed","paused","stopped","away","unavailable","unknown"].includes(a.toLowerCase()))return!1;const n=parseFloat(a);return!isNaN(n)&&n>0}getStyles(){return`\n      /* Hide unwanted form labels with underscores and slots */\n      [slot='label'] {\n        display: none !important;\n      }\n\n      ha-form .mdc-form-field > label,\n      ha-form .mdc-text-field > label,\n      ha-form .mdc-floating-label,\n      ha-form .mdc-notched-outline__leading,\n      ha-form .mdc-notched-outline__notch,\n      ha-form .mdc-notched-outline__trailing,\n      ha-form .mdc-floating-label--float-above,\n      ha-form label[for],\n      ha-form .ha-form-label,\n      ha-form .form-label {\n        display: none !important;\n      }\n\n      /* Hide any labels containing underscores */\n      ha-form label[data-label*='_'],\n      ha-form .label-text:contains('_'),\n      label:contains('_') {\n        display: none !important;\n      }\n        .label {\n          display: none !important;\n        }\n\n      /* Additional safeguards for underscore labels */\n      ha-form .mdc-text-field-character-counter,\n      ha-form .mdc-text-field-helper-text,\n      ha-form mwc-formfield,\n      ha-form .formfield {\n        display: none !important;\n      }\n\n      /* Hide form field labels that match underscore patterns */\n      ha-form[data-field*='_'] label,\n      ha-form[data-field*='_'] .mdc-floating-label,\n      ha-form[data-field*='_'] .mdc-notched-outline__notch > .mdc-floating-label {\n        display: none !important;\n      }\n\n      /* Target specific underscore field names */\n      ha-form[data-field='use_entity_color_for_icon'] label,\n      ha-form[data-field='use_entity_color_for_icon_background'] label,\n      ha-form[data-field='show_name_when_active'] label,\n      ha-form[data-field='show_state_when_active'] label,\n      ha-form[data-field='show_icon_when_active'] label,\n      ha-form[data-field='show_name_when_inactive'] label,\n      ha-form[data-field='show_state_when_inactive'] label,\n      ha-form[data-field='show_icon_when_inactive'] label,\n      ha-form[data-field='active_template_mode'] label,\n      ha-form[data-field='inactive_template_mode'] label,\n      ha-form[data-field='dynamic_icon_template_mode'] label,\n      ha-form[data-field='dynamic_color_template_mode'] label {\n        display: none !important;\n      }\n\n      /* Make dynamic template toggles more compact */\n      ha-form[data-field='dynamic_icon_template_mode'] ha-switch,\n      ha-form[data-field='dynamic_color_template_mode'] ha-switch {\n        --mdc-switch-track-width: 36px !important;\n        --mdc-switch-track-height: 20px !important;\n        --switch-checked-track-color: var(--primary-color) !important;\n        --switch-unchecked-track-color: var(--disabled-color) !important;\n        transform: scale(0.8) !important;\n      }\n\n      ha-form[data-field='dynamic_icon_template_mode'] .mdc-switch,\n      ha-form[data-field='dynamic_color_template_mode'] .mdc-switch {\n        transform: scale(0.8) !important;\n      }\n\n      /* Hide any element with underscore in text content */\n      *:not(script):not(style) {\n        text-decoration: none !important;\n      }\n      \n      /* Target elements that might show underscore text */\n      .mdc-form-field__label:contains('_'),\n      .mdc-text-field__input + label:contains('_'),\n      .mdc-select__selected-text:contains('_') {\n        display: none !important;\n      }\n\n\n      \n      .icon-grid {\n        width: 100%;\n      }\n\n      /* Collapsible Header Styles */\n      .collapsible-header:hover {\n        background: rgba(var(--rgb-primary-color), 0.08) !important;\n        border-color: var(--primary-color) !important;\n      }\n\n      .collapsible-header:active {\n        transform: scale(0.98);\n      }\n\n      /* Split Preview Styles */\n      .split-preview-container {\n        position: relative;\n      }\n\n      .split-preview-container::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 1px;\n        height: 100%;\n        background: var(--divider-color);\n        z-index: 1;\n      }\n\n      .icon-module-split-preview .inactive-preview .icon-item-preview {\n        border: 1px solid rgba(var(--rgb-primary-color), 0.1);\n        background: rgba(var(--rgb-primary-color), 0.02);\n      }\n\n      .icon-module-split-preview .active-preview .icon-item-preview {\n        border: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        background: rgba(var(--rgb-primary-color), 0.04);\n      }\n\n      .icon-module-split-preview .inactive-preview .icon-item-preview.hover-enabled:hover {\n        background: rgba(var(--rgb-primary-color), 0.08) !important;\n        border-color: var(--primary-color) !important;\n        transform: scale(1.02);\n      }\n\n      .icon-module-split-preview .active-preview .icon-item-preview.hover-enabled:hover {\n        background: rgba(var(--rgb-primary-color), 0.12) !important;\n        border-color: var(--primary-color) !important;\n        transform: scale(1.02);\n      }\n\n      /* Preview state indicators */\n      .icon-module-split-preview .preview-header div {\n        padding: 8px 12px;\n        border-radius: 20px;\n        font-size: 12px;\n        font-weight: 700;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        margin: 0 8px;\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border: 1px solid rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      /* Responsive adjustments for split view */\n      @media (max-width: 768px) {\n        .icon-module-split-preview .split-preview-container {\n          grid-template-columns: 1fr !important;\n          grid-template-rows: auto auto;\n        }\n\n        .icon-module-split-preview .preview-header {\n          flex-direction: column !important;\n          gap: 8px !important;\n        }\n\n        .icon-module-split-preview .inactive-preview {\n          border-right: none !important;\n          border-bottom: 1px solid var(--divider-color) !important;\n        }\n\n        .icon-module-split-preview .split-preview-container::before {\n          display: none;\n        }\n\n        .icon-module-split-preview .preview-header div {\n          margin: 0 !important;\n        }\n\n        .collapsible-header {\n          padding: 10px 12px !important;\n        }\n\n        .collapsible-header span {\n          font-size: 14px !important;\n        }\n\n        .collapsible-header ha-icon {\n          font-size: 16px !important;\n        }\n      }\n\n      @media (max-width: 480px) {\n        .icon-module-split-preview .icon-grid {\n          grid-template-columns: repeat(auto-fit, minmax(35px, 1fr)) !important;\n          gap: 2px !important;\n        }\n\n        .icon-module-split-preview .inactive-preview,\n        .icon-module-split-preview .active-preview {\n          padding: 8px !important;\n        }\n\n        .icon-module-split-preview .preview-header div {\n          font-size: 10px !important;\n          padding: 6px 8px !important;\n        }\n\n        .collapsible-header {\n          padding: 8px 10px !important;\n        }\n\n        .collapsible-header span {\n          font-size: 12px !important;\n        }\n\n        .collapsible-header ha-icon {\n          font-size: 14px !important;\n        }\n      }\n      \n      .icon-item-preview.hover-enabled:hover {\n        background: var(--primary-color) !important;\n        color: white;\n        transform: scale(1.05);\n      }\n      \n      .icon-item-preview.hover-enabled:hover ha-icon {\n        color: white !important;\n      }\n      \n      .icon-item-preview.hover-enabled:hover .icon-name,\n      .icon-item-preview.hover-enabled:hover .icon-state {\n        color: white !important;\n      }\n      \n      /* Field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n     \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Expandable details styling */\n      details > summary {\n        list-style: none;\n      }\n\n      details > summary::-webkit-details-marker {\n        display: none;\n      }\n\n      details[open] > summary ha-icon {\n        transform: rotate(90deg);\n      }\n\n      details > summary:hover {\n        background: rgba(var(--rgb-primary-color), 0.1) !important;\n      }\n\n      /* Icon animations - Simple and direct selectors */\n      .icon-animation-pulse {\n        animation: iconPulse 2s ease-in-out infinite !important;\n      }\n\n      .icon-animation-spin {\n        animation: iconSpin 2s linear infinite !important;\n      }\n\n      .icon-animation-bounce {\n        animation: iconBounce 1s ease-in-out infinite !important;\n      }\n\n      .icon-animation-flash {\n        animation: iconFlash 1s ease-in-out infinite !important;\n      }\n\n      .icon-animation-shake {\n        animation: iconShake 0.5s ease-in-out infinite !important;\n      }\n\n      .icon-animation-vibrate {\n        animation: iconVibrate 0.3s ease-in-out infinite !important;\n      }\n\n      .icon-animation-rotate-left {\n        animation: iconRotateLeft 2s linear infinite !important;\n      }\n\n      .icon-animation-rotate-right {\n        animation: iconRotateRight 2s linear infinite !important;\n      }\n\n      .icon-animation-fade {\n        animation: iconFade 2s ease-in-out infinite !important;\n      }\n\n      .icon-animation-scale {\n        animation: iconScale 1s ease-in-out infinite !important;\n      }\n\n      .icon-animation-tada {\n        animation: iconTada 1s ease-in-out infinite !important;\n      }\n\n\n\n      @keyframes iconPulse {\n        0%, 100% { opacity: 1; transform: scale(1); }\n        50% { opacity: 0.7; transform: scale(1.1); }\n      }\n\n      @keyframes iconSpin {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n\n      @keyframes iconBounce {\n        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }\n        40% { transform: translateY(-10px); }\n        60% { transform: translateY(-5px); }\n      }\n\n      @keyframes iconFlash {\n        0%, 50%, 100% { opacity: 1; }\n        25%, 75% { opacity: 0.3; }\n      }\n\n      @keyframes iconShake {\n        0%, 100% { transform: translateX(0); }\n        10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }\n        20%, 40%, 60%, 80% { transform: translateX(2px); }\n      }\n\n      @keyframes iconVibrate {\n        0%, 100% { transform: translate(0); }\n        10% { transform: translate(-1px, -1px); }\n        20% { transform: translate(1px, -1px); }\n        30% { transform: translate(-1px, 1px); }\n        40% { transform: translate(1px, 1px); }\n        50% { transform: translate(-1px, -1px); }\n        60% { transform: translate(1px, -1px); }\n        70% { transform: translate(-1px, 1px); }\n        80% { transform: translate(1px, 1px); }\n        90% { transform: translate(-1px, -1px); }\n      }\n\n      @keyframes iconRotateLeft {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(-360deg); }\n      }\n\n      @keyframes iconRotateRight {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n\n      @keyframes iconFade {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.3; }\n      }\n\n      @keyframes iconScale {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.2); }\n      }\n\n      @keyframes iconTada {\n        0% { transform: scale(1); }\n        10%, 20% { transform: scale(0.9) rotate(-3deg); }\n        30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); }\n        40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); }\n        100% { transform: scale(1) rotate(0); }\n      }\n\n      @keyframes lockUnlockedPulse {\n        0%, 100% { \n          box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);\n          border-color: var(--info-color, #2196F3);\n        }\n        50% { \n          box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.4);\n          border-color: var(--info-color, #1976D2);\n        }\n      }\n\n      /* Respect user's motion preferences */\n      @media (prefers-reduced-motion: reduce) {\n        .lock-btn.unlocked {\n          animation: none !important;\n        }\n      }\n\n      /* Add icon button styling */\n      .add-icon-btn:hover {\n        background: var(--primary-color);\n        color: white;\n      }\n      \n      /* Remove icon button styling */\n      .remove-icon-btn:disabled {\n        opacity: 0.3;\n        cursor: not-allowed;\n      }\n\n      /* Icon picker specific styling */\n      ha-icon-picker {\n        --ha-icon-picker-width: 100%;\n        --ha-icon-picker-height: 56px;\n      }\n\n      /* Dropdown styling */\n      ha-select {\n        width: 100%;\n        --ha-select-height: 40px;\n      }\n\n      /* Hide any radio buttons that might still be rendered */\n      ha-radio,\n      mwc-radio,\n      .mdc-radio {\n        display: none !important;\n      }\n\n      /* Text field and select consistency */\n      ha-textfield,\n      ha-select {\n        --mdc-shape-small: 8px;\n        --mdc-theme-primary: var(--primary-color);\n      }\n\n      /* Note: Dropdown positioning fixes are now handled globally in ultra-card-editor.ts */\n\n      /* Module tab content input width - restrict to icon module only */\n      .icon-module .module-tab-content input[type="number"], \n      .icon-module .module-tab-content input[type="text"],\n      .icon-module .module-tab-content .gap-input {\n        width: 25% !important;\n        max-width: 25% !important;\n        min-width: 25% !important;\n      }\n\n      /* Grid styling for layout options */\n      .settings-section[style*="grid"] > div {\n        min-width: 0;\n      }\n\n      /* Responsive adjustments */\n      @media (max-width: 768px) {\n        .settings-section[style*="grid-template-columns: 1fr 1fr 1fr"] {\n          grid-template-columns: 1fr !important;\n          gap: 12px !important;\n        }\n\n        .settings-section[style*="grid-template-columns: 1fr 1fr"] {\n          grid-template-columns: 1fr !important;\n          gap: 12px !important;\n        }\n\n        .conditional-fields-group {\n          border-left-width: 3px;\n        }\n        \n        .conditional-fields-header {\n          padding: 10px 12px;\n          font-size: 13px;\n        }\n        \n        .conditional-fields-content {\n          padding: 12px;\n        }\n\n        /* Mobile-friendly field titles and descriptions */\n        .field-title {\n          font-size: 14px !important;\n        }\n\n        .field-description {\n          font-size: 12px !important;\n          line-height: 1.3 !important;\n        }\n\n        .section-title {\n          font-size: 16px !important;\n        }\n\n        /* Mobile-friendly size controls */\n        .gap-control-container {\n          gap: 8px !important;\n        }\n\n        .gap-input {\n          width: 44px !important;\n          max-width: 44px !important;\n          min-width: 44px !important;\n          font-size: 12px !important;\n        }\n\n        .reset-btn {\n          width: 32px !important;\n          height: 32px !important;\n        }\n\n        .reset-btn ha-icon {\n          font-size: 14px !important;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          line-height: 1 !important;\n        }\n\n        /* Mobile-friendly lock buttons */\n        .lock-btn {\n          padding: 6px 12px !important;\n          font-size: 12px !important;\n        }\n\n        .lock-btn ha-icon {\n          font-size: 16px !important;\n        }\n\n        .lock-btn.unlocked {\n          border-color: var(--info-color, #2196F3) !important;\n          background: rgba(33, 150, 243, 0.15) !important;\n          color: var(--info-color, #2196F3) !important;\n          box-shadow: 0 0 0 1px rgba(33, 150, 243, 0.3) !important;\n        }\n\n        .lock-btn.unlocked ha-icon {\n          color: var(--info-color, #2196F3) !important;\n        }\n\n        /* Mobile-friendly accordions */\n        details > summary {\n          padding: 12px !important;\n          font-size: 14px !important;\n        }\n\n        details > summary ha-icon {\n          font-size: 16px !important;\n        }\n\n        /* Mobile-friendly form fields */\n        .icon-settings-container {\n          padding: 12px !important;\n        }\n\n        /* Mobile-friendly preview grid */\n        .icon-grid {\n          grid-template-columns: repeat(auto-fit, minmax(60px, 1fr)) !important;\n          gap: 8px !important;\n        }\n\n        .icon-item-preview {\n          min-width: 50px !important;\n          padding: 6px !important;\n        }\n      }\n\n      /* Extra small devices (phones, 480px and down) */\n      @media (max-width: 480px) {\n        .field-title {\n          font-size: 13px !important;\n        }\n\n        .field-description {\n          font-size: 11px !important;\n        }\n\n        .section-title {\n          font-size: 14px !important;\n        }\n\n        .gap-input {\n          width: 40px !important;\n          max-width: 40px !important;\n          min-width: 40px !important;\n          font-size: 11px !important;\n        }\n\n        .reset-btn {\n          width: 28px !important;\n          height: 28px !important;\n        }\n\n        .reset-btn ha-icon {\n          font-size: 12px !important;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          line-height: 1 !important;\n        }\n\n        .lock-btn {\n          padding: 4px 8px !important;\n          font-size: 11px !important;\n        }\n\n        .lock-btn.unlocked {\n          border-color: var(--info-color, #2196F3) !important;\n          background: rgba(33, 150, 243, 0.15) !important;\n          color: var(--info-color, #2196F3) !important;\n          box-shadow: 0 0 0 1px rgba(33, 150, 243, 0.3) !important;\n        }\n\n        .lock-btn.unlocked ha-icon {\n          color: var(--info-color, #2196F3) !important;\n        }\n\n        .icon-settings-container {\n          padding: 8px !important;\n        }\n\n        /* Stack lock controls vertically on very small screens */\n        .gap-control-container {\n          flex-wrap: wrap !important;\n          gap: 6px !important;\n        }\n\n        .gap-slider {\n          width: 100% !important;\n          order: 1;\n        }\n\n        .gap-input {\n          order: 2;\n        }\n\n        .reset-btn {\n          order: 3;\n        }\n\n        .lock-btn {\n          order: 4;\n          width: 100% !important;\n          justify-content: center !important;\n        }\n      }\n\n      /* Ensure form elements don't overflow */\n      .settings-section ha-form {\n        max-width: 100%;\n        overflow: visible;\n      }\n\n      /* Color picker adjustments */\n      .settings-section ha-form[data-field*="color"] {\n        min-height: 56px;\n      }\n\n      /* Boolean toggle adjustments */\n      .settings-section ha-form[data-field*="mode"] {\n        display: flex;\n        align-items: center;\n        min-height: auto;\n      }\n\n      /* Number slider adjustments */\n      .settings-section ha-form[data-field*="size"] .mdc-slider,\n      .settings-section ha-form[data-field*="gap"] .mdc-slider,\n      .settings-section ha-form[data-field*="columns"] .mdc-slider {\n        width: 100%;\n        max-width: 100%;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n        transform: none;\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin: 0;\n        padding: 0;\n        line-height: 1;\n      }\n\n      /* Lock button styles */\n      .lock-btn {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px 16px;\n        border: 2px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        font-size: 14px;\n        font-weight: 500;\n        transition: all 0.3s ease;\n        outline: none;\n        position: relative;\n      }\n\n      .lock-btn:hover {\n        border-color: var(--primary-color);\n        background: var(--primary-color);\n        color: white;\n      }\n\n      .lock-btn.locked {\n        border-color: var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.1);\n        color: var(--primary-color);\n      }\n\n      .lock-btn.locked:hover {\n        background: var(--primary-color);\n        color: white;\n      }\n\n      button.lock-btn.unlocked {\n        background-color: var(--primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .lock-btn.unlocked {\n        border-color: var(--info-color, #2196F3) !important;\n        background: rgba(33, 150, 243, 0.15) !important;\n        color: var(--info-color, #2196F3) !important;\n        box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2) !important;\n        animation: lockUnlockedPulse 2s ease-in-out infinite;\n      }\n\n      .lock-btn.unlocked:hover {\n        background: var(--info-color, #2196F3) !important;\n        color: white !important;\n        box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.4) !important;\n        animation: none !important;\n      }\n\n      .lock-btn.unlocked ha-icon {\n        color: var(--info-color, #2196F3) !important;\n      }\n\n      .lock-btn.unlocked:hover ha-icon {\n        color: white !important;\n      }\n\n      .lock-btn ha-icon {\n        font-size: 18px;\n      }\n\n      /* Field lock button styling */\n      .field-container .lock-btn {\n        padding: 6px 12px;\n        font-size: 12px;\n        min-width: auto;\n      }\n\n      .field-container .lock-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Icon settings container */\n      .icon-settings-container {\n        background: var(--secondary-background-color);\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 24px;\n        border: 1px solid var(--divider-color);\n      }\n\n      .icon-header {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        margin-bottom: 16px;\n        padding-bottom: 12px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .icon-preview {\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: var(--primary-color);\n        color: white;\n        border-radius: 50%;\n        flex-shrink: 0;\n      }\n\n      .icon-title {\n        flex: 1;\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--primary-text-color);\n      }\n\n      .remove-icon-btn {\n        background: var(--error-color);\n        color: white;\n        border: none;\n        border-radius: 4px;\n        padding: 6px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n      }\n\n      .remove-icon-btn:hover {\n        background: var(--error-color);\n        opacity: 0.8;\n      }\n\n      .remove-icon-btn:disabled {\n        opacity: 0.3;\n        cursor: not-allowed;\n      }\n\n      .remove-icon-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Size lock container */\n      .size-lock-container {\n        padding: 12px;\n        background: rgba(var(--rgb-primary-color), 0.05);\n        border-radius: 8px;\n        border: 1px solid rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      /* Hide unwanted action options */\n      ha-form mwc-list-item[value="toggle"],\n      ha-form mwc-list-item[graphic="icon"]:has(ha-icon[icon="mdi:gesture-tap"]),\n      ha-form .mdc-deprecated-list-item[data-value="toggle"],\n      ha-form .mdc-list-item[data-value="toggle"],\n      ha-form option[value="toggle"] {\n        display: none !important;\n      }\n\n      /* Hide "Default ()" option - target by text content */\n      ha-form mwc-list-item:has-text("Default ()"),\n      ha-form .mdc-deprecated-list-item:has-text("Default ()"),\n      ha-form .mdc-list-item:has-text("Default ()"),\n      ha-form option:has-text("Default ()") {\n        display: none !important;\n      }\n\n      /* Alternative approach using CSS attribute selectors for text content */\n      ha-form mwc-list-item[textContent*="Default ()"],\n      ha-form .mdc-deprecated-list-item[textContent*="Default ()"],\n      ha-form .mdc-list-item[textContent*="Default ()"] {\n        display: none !important;\n      }\n\n      /* Template Section Styles */\n      .template-section {\n        background: var(--card-background-color);\n        border-radius: 8px;\n        padding: 16px;\n        border: 1px solid var(--divider-color);\n        margin-bottom: 32px;\n      }\n\n      .template-header {\n        margin-bottom: 16px;\n      }\n\n      .switch-container {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 8px;\n        margin-bottom: 8px;\n      }\n\n      .switch-label {\n        font-weight: 600;\n        color: var(--primary-text-color);\n        font-size: 16px;\n      }\n\n      .switch {\n        position: relative;\n        display: inline-block;\n        width: 50px;\n        height: 24px;\n      }\n\n      .switch input {\n        opacity: 0;\n        width: 0;\n        height: 0;\n      }\n\n      .slider {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: var(--switch-unchecked-color, #ccc);\n        transition: .4s;\n      }\n\n      .slider:before {\n        position: absolute;\n        content: "";\n        height: 18px;\n        width: 18px;\n        left: 3px;\n        bottom: 3px;\n        background-color: white;\n        transition: .4s;\n      }\n\n      input:checked + .slider {\n        background-color: var(--primary-color);\n      }\n\n      input:checked + .slider:before {\n        transform: translateX(26px);\n      }\n\n      .slider.round {\n        border-radius: 24px;\n    max-width: 50px;\n}\n      }\n\n      .slider.round:before {\n        border-radius: 50%;\n      }\n\n      .template-description {\n        font-size: 13px;\n        color: var(--secondary-text-color);\n        line-height: 1.4;\n        margin-bottom: 8px;\n      }\n\n      .template-content {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .template-editor {\n        min-height: 120px;\n        font-family: 'Courier New', monospace;\n        font-size: 13px;\n        line-height: 1.4;\n        resize: vertical;\n        width: 100%;\n        padding: 12px;\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--card-background-color);\n        color: var(--primary-text-color);\n        outline: none;\n        transition: border-color 0.2s ease;\n      }\n\n      .template-editor:focus {\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 1px var(--primary-color);\n      }\n\n      .template-help {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n        margin-top: 4px;\n      }\n\n      .template-help p {\n        margin: 8px 0;\n        font-weight: 500;\n      }\n\n      .template-help ul {\n        margin: 4px 0;\n        padding-left: 16px;\n      }\n\n      .template-help li {\n        margin: 2px 0;\n      }\n\n      .template-help code {\n        background: rgba(var(--rgb-primary-color), 0.1);\n        padding: 2px 4px;\n        border-radius: 3px;\n        font-family: 'Courier New', monospace;\n        font-size: 11px;\n      }\n\n      ${r.A.getHoverStyles()}\n    `}_addIcon(e,t){const o={id:this.generateId("icon-item"),entity:"weather.forecast_home",name:"",icon_inactive:"mdi:weather-partly-cloudy",icon_active:"mdi:weather-partly-cloudy",inactive_state:"",active_state:"",custom_inactive_state_text:"",custom_active_state_text:"",custom_inactive_name_text:"",custom_active_name_text:"",inactive_template_mode:!1,inactive_template:"",active_template_mode:!1,active_template:"",use_entity_color_for_icon:!1,color_inactive:"var(--secondary-text-color)",color_active:"var(--primary-color)",inactive_icon_color:"var(--secondary-text-color)",active_icon_color:"var(--primary-color)",inactive_name_color:"var(--primary-text-color)",active_name_color:"var(--primary-text-color)",inactive_state_color:"var(--secondary-text-color)",active_state_color:"var(--secondary-text-color)",show_name_when_inactive:!0,show_state_when_inactive:!0,show_icon_when_inactive:!0,show_name_when_active:!0,show_state_when_active:!0,show_icon_when_active:!0,show_state:!0,show_name:!0,icon_size:26,text_size:14,name_icon_gap:8,name_state_gap:2,icon_state_gap:4,active_icon_size:26,inactive_icon_size:26,active_text_size:14,inactive_text_size:14,state_size:14,active_state_size:14,inactive_state_size:14,icon_background:"none",use_entity_color_for_icon_background:!1,icon_background_color:"transparent",active_icon_background:"none",inactive_icon_background:"none",active_icon_background_color:"transparent",inactive_icon_background_color:"transparent",icon_size_locked:!0,text_size_locked:!0,state_size_locked:!0,active_icon_locked:!0,active_icon_color_locked:!1,active_icon_background_locked:!0,active_icon_background_color_locked:!0,active_name_locked:!0,active_name_color_locked:!0,active_state_locked:!1,active_state_color_locked:!0,inactive_icon_animation:"none",active_icon_animation:"none",show_units:!0,vertical_alignment:"center",container_width:void 0,container_background_shape:"none",container_background_color:"#808080",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},click_action:"toggle",double_click_action:"none",hold_action_legacy:"none",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:""};t({icons:[...e.icons,o]})}_removeIcon(e,t,o){e.icons.length<=1||o({icons:e.icons.filter(((e,o)=>o!==t))})}_updateIcon(e,t,o,i){i({icons:e.icons.map(((e,i)=>i===t?Object.assign(Object.assign({},e),o):e))})}_updateIconWithLockSync(e,t,o,i,a){const n=e.icons[t],r={[o]:i},s={icon_inactive:{active:"icon_active",lock:"active_icon_locked"},inactive_icon_size:{active:"active_icon_size",lock:"icon_size_locked"},inactive_text_size:{active:"active_text_size",lock:"text_size_locked"},inactive_state_size:{active:"active_state_size",lock:"state_size_locked"},inactive_icon_color:{active:"active_icon_color",lock:"active_icon_color_locked"},inactive_name_color:{active:"active_name_color",lock:"active_name_color_locked"},inactive_state_color:{active:"active_state_color",lock:"active_state_color_locked"},inactive_icon_background:{active:"active_icon_background",lock:"active_icon_background_locked"},inactive_icon_background_color:{active:"active_icon_background_color",lock:"active_icon_background_color_locked"}}[o];s&&!1!==n[s.lock]&&(r[s.active]=i),this._updateIcon(e,t,r,a)}getBackgroundImageCSS(e,t){var o,i;const a=e.background_image_type,n=e.background_image,r=e.background_image_entity;if(!a||"none"===a)return"none";switch(a){case"upload":if(n)return`url("${(0,c.V)(t,n)}")`;break;case"url":if(n)return`url("${n}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const a=(null===(o=e.attributes)||void 0===o?void 0:o.entity_picture)||(null===(i=e.attributes)||void 0===i?void 0:i.image)||("string"==typeof e.state?e.state:"");if(a&&"unknown"!==a&&"unavailable"!==a)return`url("${(0,c.V)(t,a)}")`}}}return"none"}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_renderSizeControl(e,t,o,a,n,r,s,l){return i.qy`
      <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
        <input
          type="range"
          class="gap-slider"
          min="${r}"
          max="${s}"
          step="1"
          .value="${n}"
          @input=${i=>{const n=i.target,r=Number(n.value);this._updateIconWithLockSync(e,t,a,r,o)}}
        />
        <input
          type="number"
          class="gap-input"
          min="${r}"
          max="${s}"
          step="1"
          .value="${n}"
          @input=${i=>{const n=i.target,l=Number(n.value);!isNaN(l)&&l>=r&&l<=s&&this._updateIconWithLockSync(e,t,a,l,o)}}
          @keydown=${i=>{if("ArrowUp"===i.key||"ArrowDown"===i.key){i.preventDefault();const n=i.target,d=Number(n.value)||l,c="ArrowUp"===i.key?1:-1,p=Math.max(r,Math.min(s,d+c));this._updateIconWithLockSync(e,t,a,p,o)}}}
        />
        <button
          class="reset-btn"
          @click=${()=>{this._updateIconWithLockSync(e,t,a,l,o)}}
          title="Reset to default (${l})"
        >
          <ha-icon icon="mdi:refresh"></ha-icon>
        </button>
      </div>
    `}_renderFieldWithLock(e,t,o,a,n,r,s,l,d,c){const p=e.icons[t],u=!1!==p[a],h=u&&p[r]||s;return i.qy`
      <div style="display: flex; align-items: center; gap: 12px;">
        <div style="flex: 1;">
          ${"icon"===l?i.qy`
                <div
                  style="opacity: ${u?"0.5":"1"}; pointer-events: ${u?"none":"auto"};"
                >
                  ${this.renderUcForm(d,{[n]:h},[this.iconField(n)],(i=>{u||this._updateIcon(e,t,{[n]:i.detail.value[n]},o)}),!1)}
                </div>
              `:"color"===l?i.qy`
                  <ultra-color-picker
                    .value=${h}
                    .disabled=${u}
                    @value-changed=${i=>{u||this._updateIcon(e,t,{[n]:i.detail.value},o)}}
                  ></ultra-color-picker>
                `:"select"===l?i.qy`
                    <div
                      style="opacity: ${u?"0.5":"1"}; pointer-events: ${u?"none":"auto"};"
                    >
                      ${this.renderUcForm(d,{[n]:h},[this.selectField(n,c||[])],(i=>{u||this._updateIcon(e,t,{[n]:i.detail.value[n]},o)}),!1)}
                    </div>
                  `:i.qy`
                    <div
                      style="opacity: ${u?"0.5":"1"}; pointer-events: ${u?"none":"auto"};"
                    >
                      ${this.renderUcForm(d,{[n]:h},[this.textField(n)],(i=>{u||this._updateIcon(e,t,{[n]:i.detail.value[n]},o)}),!1)}
                    </div>
                  `}
        </div>
        <button
          class="lock-btn ${u?"locked":"unlocked"}"
          @click=${()=>{const i=!u,s={[a]:i};i&&(s[n]=p[r]),this._updateIcon(e,t,s,o)}}
          title="${u?"Unlock to customize this field independently":"Lock to inherit from inactive state"}"
        >
          <ha-icon icon="${u?"mdi:lock":"mdi:lock-open"}"></ha-icon>
        </button>
      </div>
    `}_renderSizeControlWithLock(e,t,o,a,n,r,s,l,d,c){const p=e.icons[t],u=`${a}_locked`,h=!1!==p[u],m=h?p[r]||c:s;return i.qy`
      <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
        <input
          type="range"
          class="gap-slider"
          min="${l}"
          max="${d}"
          step="1"
          .value="${m}"
          .disabled=${h}
          @input=${i=>{if(!h){const a=i.target,r=Number(a.value);this._updateIcon(e,t,{[n]:r},o)}}}
        />
        <input
          type="number"
          class="gap-input"
          min="${l}"
          max="${d}"
          step="1"
          .value="${m}"
          .disabled=${h}
          @input=${i=>{if(!h){const a=i.target,r=Number(a.value);!isNaN(r)&&r>=l&&r<=d&&this._updateIcon(e,t,{[n]:r},o)}}}
          @keydown=${i=>{if(!h&&("ArrowUp"===i.key||"ArrowDown"===i.key)){i.preventDefault();const a=i.target,r=Number(a.value)||c,s="ArrowUp"===i.key?1:-1,p=Math.max(l,Math.min(d,r+s));this._updateIcon(e,t,{[n]:p},o)}}}
        />
        <button
          class="reset-btn"
          @click=${()=>{h||this._updateIcon(e,t,{[n]:c},o)}}
          title="Reset to default (${c})"
          .disabled=${h}
        >
          <ha-icon icon="mdi:refresh"></ha-icon>
        </button>
        <button
          class="lock-btn ${h?"locked":"unlocked"}"
          @click=${()=>{const i=!h,a={[u]:i};i&&(a[n]=p[r]||c),this._updateIcon(e,t,a,o)}}
          title="${h?"Unlock to set different sizes for active/inactive":"Lock to use same size for both states"}"
        >
          <ha-icon icon="${h?"mdi:lock":"mdi:lock-open"}"></ha-icon>
        </button>
      </div>
    `}_updateIconAnimationClasses(e,t,o){[document,document.body,this.shadowRoot,this.renderRoot,...Array.from(document.querySelectorAll("*")).filter((e=>e.shadowRoot)).map((e=>e.shadowRoot))].filter(Boolean).forEach(((e,o)=>{try{e.querySelectorAll("ha-icon").forEach((e=>{if((e.getAttribute("data-animation-debug")||"")!==t)return;const o=e.className.split(" ").filter((e=>!e.startsWith("icon-animation-")));t&&!t.includes("none")&&o.push(t),e.className=o.join(" ");const i=t.replace("icon-animation-","");if(i&&"none"!==i){const t="icon"+i.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),o=i.includes("spin")||i.includes("rotate")?"2s linear infinite":"1s ease-in-out infinite";e.style.animation=`${t} ${o}`}else e.style.animation="";this._injectKeyframesIntoHaIcon(e),e.offsetHeight}))}catch(e){}}))}_getInlineAnimation(e){const t=e.replace("icon-animation-","");return t&&"none"!==t?`${"icon"+t.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("")} ${t.includes("spin")||t.includes("rotate")?"2s linear infinite":"bounce"===t?"1s ease-in-out infinite":"shake"===t?"0.5s ease-in-out infinite":"vibrate"===t?"0.3s ease-in-out infinite":"2s ease-in-out infinite"}`:""}_applyAnimationDirectly(e,t){const o=t.replace("icon-animation-","");if(!o||"none"===o)return;const i="icon"+o.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),a=o.includes("spin")||o.includes("rotate")?"2s linear infinite":"2s ease-in-out infinite";e.style.animation=`${i} ${a}`,this._injectKeyframesIntoHaIcon(e)}_injectKeyframesForAllSplitPreviewIcons(){const e=(t=1)=>{const o=document.querySelectorAll('ha-icon[data-animation-debug]:not([data-animation-debug="none"])'),i=[...Array.from(document.querySelectorAll("*")).filter((e=>e.shadowRoot)).map((e=>e.shadowRoot))],a=Array.from(o);i.forEach((e=>{e.querySelectorAll('ha-icon[data-animation-debug]:not([data-animation-debug="none"])').forEach((e=>a.push(e)))}));let n=0;a.forEach((e=>{this._injectKeyframesIntoHaIcon(e),n++})),0===n&&t<10&&setTimeout((()=>e(t+1)),150)};e()}_formatValueWithUnits(e,t,o,i){var a;return t&&(null===(a=null==i?void 0:i.states)||void 0===a?void 0:a[t])?(0,n.formatEntityState)(i,t,{state:e,includeUnit:!1!==o.show_units}):e}_injectKeyframesIntoHaIcon(e){const t=e.shadowRoot;if(!t)return;const o=t.querySelector("style[data-uvc-keyframes]");o&&o.remove();try{const e=document.createElement("style");if(e.setAttribute("data-uvc-keyframes",""),e.textContent=u._ANIMATION_KEYFRAMES,t.appendChild(e),!document.head.querySelector("style[data-uvc-global-keyframes]")){const e=document.createElement("style");e.setAttribute("data-uvc-global-keyframes",""),e.textContent=u._ANIMATION_KEYFRAMES,document.head.appendChild(e)}}catch(e){console.error("❌ Error injecting keyframes:",e)}}}u._globalStylesInjected=!1,u._ANIMATION_KEYFRAMES="\n    @keyframes iconPulse {0%,100%{opacity:1;transform:scale(1);}50%{opacity:0.7;transform:scale(1.1);}}\n    @keyframes iconSpin {from{transform:rotate(0deg);}to{transform:rotate(360deg);}}\n    @keyframes iconBounce {0%,20%,50%,80%,100%{transform:translateY(0);}40%{transform:translateY(-10px);}60%{transform:translateY(-5px);}}\n    @keyframes iconFlash {0%,50%,100%{opacity:1;}25%,75%{opacity:0.3;}}\n    @keyframes iconShake {0%,100%{transform:translateX(0);}10%,30%,50%,70%,90%{transform:translateX(-2px);}20%,40%,60%,80%{transform:translateX(2px);}}\n    @keyframes iconVibrate {0%,100%{transform:translate(0);}10%{transform:translate(-1px,-1px);}20%{transform:translate(1px,-1px);}30%{transform:translate(-1px,1px);}40%{transform:translate(1px,1px);}50%{transform:translate(-1px,-1px);}60%{transform:translate(1px,-1px);}70%{transform:translate(-1px,1px);}80%{transform:translate(1px,1px);}90%{transform:translate(-1px,-1px);}}\n    @keyframes iconRotateLeft {from{transform:rotate(0deg);}to{transform:rotate(-360deg);}}\n    @keyframes iconRotateRight {from{transform:rotate(0deg);}to{transform:rotate(360deg);}}\n    @keyframes iconFade {0%,100%{opacity:1;}50%{opacity:0.3;}}\n    @keyframes iconScale {0%,100%{transform:scale(1);}50%{transform:scale(1.2);}}\n    @keyframes iconTada {0%{transform:scale(1);}10%,20%{transform:scale(0.9) rotate(-3deg);}30%,50%,70%,90%{transform:scale(1.1) rotate(3deg);}40%,60%,80%{transform:scale(1.1) rotate(-3deg);}100%{transform:scale(1) rotate(0);}}\n  "},884:(e,t,o)=>{o.d(t,{Y:()=>l});var i=o(183),a=o(30),n=(o(768),o(796)),r=o(914),s=o(456);class l extends a.m{constructor(){super(...arguments),this.metadata={type:"image",title:"Images",description:"Display images and photos",author:"WJD Designs",version:"1.0.0",icon:"mdi:image",category:"media",tags:["image","picture","media","photo"]}}createDefault(e){return{id:e||this.generateId("image"),type:"image",image_type:"default",image_url:"",entity:"",image_entity:"",image_attribute:"",width:100,height:200,aspect_ratio:"auto",object_fit:"cover",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},filter_blur:0,filter_brightness:100,filter_contrast:100,filter_saturate:100,filter_hue_rotate:0,filter_opacity:100,border_radius:0,border_width:0,border_color:"var(--divider-color)",box_shadow:"none",hover_enabled:!1,hover_effect:"scale",hover_scale:105,hover_rotate:5,hover_opacity:90,hover_blur:0,hover_brightness:110,hover_shadow:"none",hover_translate_x:0,hover_translate_y:0,hover_transition:300}}renderGeneralTab(e,t,o,a){var l;const d=e,c=(null===(l=null==t?void 0:t.locale)||void 0===l?void 0:l.language)||"en";return i.qy`
      ${r.Q.injectCleanFormStyles()}
      <div class="module-general-settings">
        <!-- Image Settings -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,s.kg)("editor.image.settings",c,"Image Settings")}
          </div>

          <!-- Image Source Type -->
          ${r.Q.renderField((0,s.kg)("editor.image.source_type",c,"Image Source Type"),(0,s.kg)("editor.image.source_type_desc",c,"Choose how you want to specify the image source."),t,{image_type:d.image_type||"default"},[r.Q.createSchemaItem("image_type",{select:{options:[{value:"default",label:(0,s.kg)("editor.image.source.default",c,"Default Image")},{value:"url",label:(0,s.kg)("editor.image.source.url",c,"Image URL")},{value:"upload",label:(0,s.kg)("editor.image.source.upload",c,"Upload Image")},{value:"entity",label:(0,s.kg)("editor.image.source.entity",c,"Entity Image")},{value:"attribute",label:(0,s.kg)("editor.image.source.attribute",c,"Entity Attribute")}],mode:"dropdown"}})],(e=>a({image_type:e.detail.value.image_type})))}

          <!-- URL Image Source -->
          ${"url"===d.image_type?this.renderConditionalFieldsGroup((0,s.kg)("editor.image.url_section.title",c,"Image URL Configuration"),i.qy`
                  ${r.Q.renderField((0,s.kg)("editor.image.image_url",c,"Image URL"),(0,s.kg)("editor.image.image_url_desc",c,"Enter the direct URL to the image you want to display."),t,{image_url:d.image_url||""},[r.Q.createSchemaItem("image_url",{text:{}})],(e=>a({image_url:e.detail.value.image_url})))}
                `):""}

          <!-- Upload Image Source -->
          ${"upload"===d.image_type?this.renderConditionalFieldsGroup((0,s.kg)("editor.image.upload_section.title",c,"Upload Image Configuration"),i.qy`
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    ${(0,s.kg)("editor.image.upload",c,"Upload Image")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                  >
                    ${(0,s.kg)("editor.image.upload_desc",c,"Click to upload an image file from your device.")}
                  </div>
                  <input
                    type="file"
                    accept="image/*"
                    style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                    @change=${e=>this.handleFileUpload(e,a)}
                  />
                `):""}

          <!-- Entity Image Source -->
          ${"entity"===d.image_type?this.renderConditionalFieldsGroup((0,s.kg)("editor.image.entity_section.title",c,"Entity Image Configuration"),i.qy`
                  ${r.Q.renderField((0,s.kg)("editor.image.entity",c,"Entity"),(0,s.kg)("editor.image.entity_desc",c,"Select an entity that has an image (e.g., person, camera entities)."),t,{image_entity:d.image_entity||""},[r.Q.createSchemaItem("image_entity",{entity:{}})],(e=>a({image_entity:e.detail.value.image_entity})))}
                `):""}

          <!-- Attribute Image Source -->
          ${"attribute"===d.image_type?this.renderConditionalFieldsGroup((0,s.kg)("editor.image.attribute_section.title",c,"Entity Attribute Configuration"),i.qy`
                  ${r.Q.renderField((0,s.kg)("editor.image.entity",c,"Entity"),(0,s.kg)("editor.image.entity_attr_desc",c,"Select the entity that contains the image URL in one of its attributes."),t,{image_entity:d.image_entity||""},[r.Q.createSchemaItem("image_entity",{entity:{}})],(e=>a({image_entity:e.detail.value.image_entity})))}

                  <div style="margin-top: 16px;">
                    ${r.Q.renderField((0,s.kg)("editor.image.attribute_name",c,"Attribute Name"),(0,s.kg)("editor.image.attribute_name_desc",c,"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard)."),t,{image_attribute:d.image_attribute||""},[r.Q.createSchemaItem("image_attribute",{text:{}})],(e=>a({image_attribute:e.detail.value.image_attribute})))}
                  </div>
                `):""}

          <div class="field-group" style="margin-bottom: 16px;">
            ${r.Q.renderField((0,s.kg)("editor.image.width",c,"Width (%)"),(0,s.kg)("editor.image.width_desc",c,"Set the width as a percentage of the container."),t,{width:d.width||100},[r.Q.createSchemaItem("width",{number:{min:10,max:100,step:1}})],(e=>a({width:e.detail.value.width})))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${r.Q.renderField((0,s.kg)("editor.image.height",c,"Height (px)"),(0,s.kg)("editor.image.height_desc",c,"Set the height in pixels."),t,{height:d.height||200},[r.Q.createSchemaItem("height",{number:{min:0,max:2e3,step:1}})],(e=>a({height:e.detail.value.height})))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${r.Q.renderField((0,s.kg)("editor.image.crop_fit",c,"Crop & Fit"),(0,s.kg)("editor.image.crop_fit_desc",c,"Control how the image fits within its container."),t,{object_fit:d.object_fit||"cover"},[r.Q.createSchemaItem("object_fit",{select:{options:[{value:"cover",label:(0,s.kg)("editor.image.fit.cover",c,"Cover (crop to fill)")},{value:"contain",label:(0,s.kg)("editor.image.fit.contain",c,"Contain (fit entire image)")},{value:"fill",label:(0,s.kg)("editor.image.fit.fill",c,"Fill (stretch to fit)")},{value:"scale-down",label:(0,s.kg)("editor.image.fit.scale_down",c,"Scale Down")},{value:"none",label:(0,s.kg)("editor.image.fit.none",c,"None (original size)")}],mode:"dropdown"}})],(e=>a({object_fit:e.detail.value.object_fit})))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${r.Q.renderField((0,s.kg)("editor.image.border_radius",c,"Border Radius"),(0,s.kg)("editor.image.border_radius_desc",c,"Control the rounded corners of the image."),t,{border_radius:d.border_radius||8},[r.Q.createSchemaItem("border_radius",{number:{min:0,max:64,step:1}})],(e=>a({border_radius:e.detail.value.border_radius})))}
          </div>
        </div>

        ${n.K.render(t,d,(e=>{a(e)}),(0,s.kg)("editor.image.tap_actions",c,"Tap Actions"))}

        <div
          class="settings-section"
          style="padding: 16px; border-radius: 8px; background: var(--secondary-background-color);"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px;"
          >
            ${(0,s.kg)("editor.image.filters",c,"Filters")}
          </div>
          <div class="field-group" style="margin-bottom: 16px;">
            ${r.Q.renderField((0,s.kg)("editor.image.filter.blur",c,"Blur"),(0,s.kg)("editor.image.filter.blur_desc",c,"Apply a blur effect to your image."),t,{filter_blur:d.filter_blur||0},[r.Q.createSchemaItem("filter_blur",{number:{min:0,max:20,step:1}})],(e=>a({filter_blur:e.detail.value.filter_blur})))}
          </div>
          <div class="field-group" style="margin-bottom: 16px;">
            ${r.Q.renderField((0,s.kg)("editor.image.filter.brightness",c,"Brightness (%)"),(0,s.kg)("editor.image.filter.brightness_desc",c,"Adjust the brightness of your image."),t,{filter_brightness:d.filter_brightness||100},[r.Q.createSchemaItem("filter_brightness",{number:{min:0,max:200,step:1}})],(e=>a({filter_brightness:e.detail.value.filter_brightness})))}
          </div>
          <div class="field-group" style="margin-bottom: 16px;">
            ${r.Q.renderField((0,s.kg)("editor.image.filter.contrast",c,"Contrast (%)"),(0,s.kg)("editor.image.filter.contrast_desc",c,"Modify the contrast of your image."),t,{filter_contrast:d.filter_contrast||100},[r.Q.createSchemaItem("filter_contrast",{number:{min:0,max:200,step:1}})],(e=>a({filter_contrast:e.detail.value.filter_contrast})))}
          </div>
          <div class="field-group">
            ${r.Q.renderField((0,s.kg)("editor.image.filter.saturation",c,"Saturation (%)"),(0,s.kg)("editor.image.filter.saturation_desc",c,"Adjust the saturation of your image."),t,{filter_saturate:d.filter_saturate||100},[r.Q.createSchemaItem("filter_saturate",{number:{min:0,max:200,step:1}})],(e=>a({filter_saturate:e.detail.value.filter_saturate})))}
          </div>
        </div>

        ${d.hover_enabled?i.qy`
              <div
                class="settings-section"
                style="padding: 16px; border-radius: 8px; background: var(--secondary-background-color);"
              >
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px;"
                >
                  ${(0,s.kg)("editor.image.hover.title",c,"Hover Effects")}
                </div>
                <div class="field-group" style="margin-bottom: 16px;">
                  ${r.Q.renderField((0,s.kg)("editor.image.hover.effect_type",c,"Effect Type"),(0,s.kg)("editor.image.hover.effect_type_desc",c,"Choose the type of hover effect."),t,{effect:d.hover_effect||"scale"},[r.Q.createSchemaItem("effect",{select:{options:[{value:"scale",label:(0,s.kg)("editor.image.hover.scale",c,"Scale (zoom in/out)")},{value:"rotate",label:(0,s.kg)("editor.image.hover.rotate",c,"Rotate")},{value:"fade",label:(0,s.kg)("editor.image.hover.fade",c,"Fade (opacity change)")},{value:"blur",label:(0,s.kg)("editor.image.hover.blur",c,"Blur")},{value:"brightness",label:(0,s.kg)("editor.image.hover.brightness",c,"Brightness")},{value:"glow",label:(0,s.kg)("editor.image.hover.glow",c,"Glow (box shadow)")},{value:"slide",label:(0,s.kg)("editor.image.hover.slide",c,"Slide (translate)")}],mode:"dropdown"}})],(e=>a({hover_effect:e.detail.value.effect})))}
                </div>

                ${"scale"===d.hover_effect?i.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${r.Q.renderField((0,s.kg)("editor.image.hover.scale_amount",c,"Scale (%)"),(0,s.kg)("editor.image.hover.scale_amount_desc",c,"Adjust the scale of the image on hover."),t,{scale:d.hover_scale||105},[r.Q.createSchemaItem("scale",{number:{min:50,max:200,step:1}})],(e=>a({hover_scale:e.detail.value.scale})))}
                    </div>`:""}
                ${"rotate"===d.hover_effect?i.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${r.Q.renderField((0,s.kg)("editor.image.hover.rotate_amount",c,"Rotation (°)"),(0,s.kg)("editor.image.hover.rotate_amount_desc",c,"Rotate the image on hover."),t,{rotate:d.hover_rotate||5},[r.Q.createSchemaItem("rotate",{number:{min:-45,max:45,step:1}})],(e=>a({hover_rotate:e.detail.value.rotate})))}
                    </div>`:""}
                ${"fade"===d.hover_effect?i.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${r.Q.renderField((0,s.kg)("editor.image.hover.opacity",c,"Opacity (%)"),(0,s.kg)("editor.image.hover.opacity_desc",c,"Change the opacity of the image on hover."),t,{opacity:d.hover_opacity||90},[r.Q.createSchemaItem("opacity",{number:{min:0,max:100,step:1}})],(e=>a({hover_opacity:e.detail.value.opacity})))}
                    </div>`:""}
                ${"blur"===d.hover_effect?i.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${r.Q.renderField((0,s.kg)("editor.image.hover.blur_amount",c,"Blur (px)"),(0,s.kg)("editor.image.hover.blur_amount_desc",c,"Apply a blur effect to the image on hover."),t,{blur:d.hover_blur||2},[r.Q.createSchemaItem("blur",{number:{min:0,max:20,step:1}})],(e=>a({hover_blur:e.detail.value.blur})))}
                    </div>`:""}
                ${"brightness"===d.hover_effect?i.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${r.Q.renderField((0,s.kg)("editor.image.hover.brightness_amount",c,"Brightness (%)"),(0,s.kg)("editor.image.hover.brightness_amount_desc",c,"Adjust the brightness of the image on hover."),t,{brightness:d.hover_brightness||110},[r.Q.createSchemaItem("brightness",{number:{min:0,max:200,step:1}})],(e=>a({hover_brightness:e.detail.value.brightness})))}
                    </div>`:""}
                ${"glow"===d.hover_effect?i.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${r.Q.renderField((0,s.kg)("editor.image.hover.glow_intensity",c,"Glow Intensity"),(0,s.kg)("editor.image.hover.glow_intensity_desc",c,"Choose the intensity of the glow effect on hover."),t,{shadow:d.hover_shadow||"medium"},[r.Q.createSchemaItem("shadow",{select:{options:[{value:"light",label:(0,s.kg)("editor.image.hover.glow_light",c,"Light Glow")},{value:"medium",label:(0,s.kg)("editor.image.hover.glow_medium",c,"Medium Glow")},{value:"heavy",label:(0,s.kg)("editor.image.hover.glow_heavy",c,"Heavy Glow")},{value:"custom",label:(0,s.kg)("editor.image.hover.glow_custom",c,"Custom Shadow")}],mode:"dropdown"}})],(e=>a({hover_shadow:e.detail.value.shadow})))}
                    </div>`:""}
                ${"slide"===d.hover_effect?i.qy`
                      <div class="field-group" style="margin-bottom: 16px;">
                        ${r.Q.renderField((0,s.kg)("editor.image.hover.translate_x",c,"Horizontal (px)"),(0,s.kg)("editor.image.hover.translate_x_desc",c,"Translate the image horizontally on hover."),t,{translate_x:d.hover_translate_x||0},[r.Q.createSchemaItem("translate_x",{number:{min:-100,max:100,step:1}})],(e=>a({hover_translate_x:e.detail.value.translate_x})))}
                      </div>
                      <div class="field-group" style="margin-bottom: 16px;">
                        ${r.Q.renderField((0,s.kg)("editor.image.hover.translate_y",c,"Vertical (px)"),(0,s.kg)("editor.image.hover.translate_y_desc",c,"Translate the image vertically on hover."),t,{translate_y:d.hover_translate_y||0},[r.Q.createSchemaItem("translate_y",{number:{min:-100,max:100,step:1}})],(e=>a({hover_translate_y:e.detail.value.translate_y})))}
                      </div>
                    `:""}
              </div>
            `:""}
      </div>
    `}renderPreview(e,t){var o,a,r,l,d;const c=e;let p="";switch(c.image_type){case"default":default:p="/hacsfiles/Ultra-Card/assets/Ultra.jpg";break;case"url":case"upload":p=c.image_url||"";break;case"entity":if(c.image_entity&&(null==t?void 0:t.states[c.image_entity])){const e=t.states[c.image_entity];(null===(o=e.attributes)||void 0===o?void 0:o.entity_picture)?p=e.attributes.entity_picture:e.state&&e.state.startsWith("http")&&(p=e.state)}break;case"attribute":if(c.image_entity&&c.image_attribute&&(null==t?void 0:t.states[c.image_entity])){const e=t.states[c.image_entity],o=this.getAttributeByPath(e.attributes,c.image_attribute);o&&"string"==typeof o&&(p=o)}}const u=[];c.filter_blur&&c.filter_blur>0&&u.push(`blur(${c.filter_blur}px)`),c.filter_brightness&&100!==c.filter_brightness&&u.push(`brightness(${c.filter_brightness}%)`),c.filter_contrast&&100!==c.filter_contrast&&u.push(`contrast(${c.filter_contrast}%)`),c.filter_saturate&&100!==c.filter_saturate&&u.push(`saturate(${c.filter_saturate}%)`);const h=u.length>0?u.join(" "):"none";let m="";const g=c.hover_enabled?`${c.hover_transition||300}ms`:"none";if(c.hover_enabled)switch(c.hover_effect||"scale"){case"scale":const e=(c.hover_scale||105)/100;m=`transform: scale(${e});`;break;case"rotate":m=`transform: rotate(${c.hover_rotate||5}deg);`;break;case"fade":m=`opacity: ${(c.hover_opacity||90)/100};`;break;case"blur":m=`filter: blur(${c.hover_blur||2}px);`;break;case"brightness":m=`filter: brightness(${c.hover_brightness||110}%);`;break;case"glow":let t="";switch(c.hover_shadow||"medium"){case"light":t="0 0 10px rgba(var(--rgb-primary-color), 0.5)";break;case"medium":t="0 0 20px rgba(var(--rgb-primary-color), 0.7)";break;case"heavy":t="0 0 30px rgba(var(--rgb-primary-color), 1)";break;case"custom":t=c.hover_shadow||"0 0 20px rgba(var(--rgb-primary-color), 0.7)"}m=`box-shadow: ${t};`;break;case"slide":const o=c.hover_translate_x||0,i=c.hover_translate_y||0;m=`transform: translate(${o}px, ${i}px);`}const _=`\n      width: ${c.width||100}%;\n      height: ${c.height||200}px;\n      object-fit: ${c.object_fit||"cover"};\n      border-radius: ${null!==(a=c.border_radius)&&void 0!==a?a:0}px;\n      filter: ${h};\n      transition: ${c.hover_enabled?`transform ${g} ease, filter ${g} ease, opacity ${g} ease, box-shadow ${g} ease`:"none"};\n      cursor: pointer;\n      display: block;\n      border: ${c.border_width?`${c.border_width}px solid ${c.border_color}`:"none"};\n    `;let b="center";switch(c.alignment){case"left":b="flex-start";break;case"center":b="center";break;case"right":b="flex-end"}const v=c,f={padding:v.padding_top||v.padding_bottom||v.padding_left||v.padding_right?`${this.addPixelUnit(v.padding_top)||"0px"} ${this.addPixelUnit(v.padding_right)||"0px"} ${this.addPixelUnit(v.padding_bottom)||"0px"} ${this.addPixelUnit(v.padding_left)||"0px"}`:"0",margin:v.margin_top||v.margin_bottom||v.margin_left||v.margin_right?`${this.addPixelUnit(v.margin_top)||"0px"} ${this.addPixelUnit(v.margin_right)||"0px"} ${this.addPixelUnit(v.margin_bottom)||"0px"} ${this.addPixelUnit(v.margin_left)||"0px"}`:"0",background:v.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(v,t),backgroundSize:v.background_size||"cover",backgroundPosition:v.background_position||"center",backgroundRepeat:v.background_repeat||"no-repeat",border:v.border_style&&"none"!==v.border_style?`${v.border_width||"1px"} ${v.border_style} ${v.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(v.border_radius)||"0",position:v.position||"relative",top:v.top||"auto",bottom:v.bottom||"auto",left:v.left||"auto",right:v.right||"auto",zIndex:v.z_index||"auto",width:v.width||"100%",height:v.height||"auto",maxWidth:v.max_width||"100%",maxHeight:v.max_height||"none",minWidth:v.min_width||"none",minHeight:v.min_height||"auto",overflow:v.overflow||"visible",clipPath:v.clip_path||"none",backdropFilter:v.backdrop_filter||"none",boxShadow:v.box_shadow_h&&v.box_shadow_v?`${v.box_shadow_h||"0"} ${v.box_shadow_v||"0"} ${v.box_shadow_blur||"0"} ${v.box_shadow_spread||"0"} ${v.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};let y=null,x=null,w=!1,k=0,$=0;return i.qy`
      <div class="image-module-container" style=${this.styleObjectToCss(f)}>
        <div class="image-module-preview">
          <!-- Image Container with Alignment -->
          <div style="display: flex; justify-content: ${b}; width: 100%;">
            ${p?i.qy`
                  <img
                    src="${p}"
                    alt="${(0,s.kg)("editor.image.alt",(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en","Image")}"
                    style="${_}"
                    @mouseover=${e=>{if(c.hover_enabled&&m){const t=e.target;t.style.transition,t.style.cssText+=m}}}
                    @mouseout=${e=>{if(c.hover_enabled){const t=e.target;t.style.transform="",t.style.opacity="",t.style.filter=h,t.style.boxShadow=""}}}
                    @pointerdown=${e=>{w=!1,x=setTimeout((()=>{w=!0;const o=c.hold_action||{action:"nothing"};o&&"nothing"!==o.action&&n.K.handleAction(o,t,e.target)}),500)}}
                    @pointerup=${e=>{if(x&&(clearTimeout(x),x=null),w)return void(w=!1);const o=Date.now();if(o-$<300&&1===k){y&&(clearTimeout(y),y=null),k=0;const o=c.double_tap_action||{action:"nothing"};o&&"nothing"!==o.action&&n.K.handleAction(o,t,e.target)}else k=1,$=o,y=setTimeout((()=>{k=0;const o=c.tap_action||{action:"nothing"};o&&"nothing"!==o.action&&n.K.handleAction(o,t,e.target)}),300)}}
                  />
                `:i.qy`
                  <div
                    style="
                      width: ${c.width||100}%;
                      height: ${c.height||200}px;
                      background: var(--secondary-background-color);
                      border: 2px dashed var(--divider-color);
                      border-radius: ${null!==(l=c.border_radius)&&void 0!==l?l:0}px;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: var(--secondary-text-color);
                      font-size: 14px;
                    "
                  >
                    <div style="text-align: center;">
                      <ha-icon
                        icon="mdi:image-off"
                        style="font-size: 48px; margin-bottom: 8px; opacity: 0.5;"
                      ></ha-icon>
                      <div>
                        ${(0,s.kg)("editor.image.no_source",(null===(d=null==t?void 0:t.locale)||void 0===d?void 0:d.language)||"en","No image source configured")}
                      </div>
                    </div>
                  </div>
                `}
          </div>
        </div>
      </div>
    `}async handleFileUpload(e,t){var o,i;const a=null===(o=e.target.files)||void 0===o?void 0:o[0];if(a)try{const e=new FormData;e.append("file",a);const o=await fetch("/api/media_source/local/upload",{method:"POST",body:e,headers:{Authorization:`Bearer ${(null===(i=window.hassTokens)||void 0===i?void 0:i.access_token)||""}`}});if(o.ok){const e=(await o.json()).media_content_id||`/media/local/${a.name}`;t({image_url:e,image_type:"upload"})}else{console.error("Upload failed:",o.statusText);const e=new FileReader;e.onload=e=>{var o;const i=null===(o=e.target)||void 0===o?void 0:o.result;t({image_url:i,image_type:"upload"})},e.readAsDataURL(a)}}catch(e){console.error("Error uploading file:",e);const o=new FileReader;o.onload=e=>{var o;const i=null===(o=e.target)||void 0===o?void 0:o.result;t({image_url:i,image_type:"upload"})},o.readAsDataURL(a)}}validate(e){const t=e,o=[...super.validate(e).errors];switch(t.image_type){case"url":t.image_url&&""!==t.image_url.trim()||o.push("Image URL is required when using URL type");break;case"upload":t.image_url&&""!==t.image_url.trim()||o.push("Uploaded image is required when using upload type");break;case"entity":t.image_entity&&""!==t.image_entity.trim()||o.push("Image entity is required when using entity type");break;case"attribute":t.image_entity&&""!==t.image_entity.trim()||o.push("Entity is required when using attribute type"),t.image_attribute&&""!==t.image_attribute.trim()||o.push("Attribute name is required when using attribute type")}return t.link_enabled&&!t.link_url&&o.push("Link URL is required when link is enabled"),t.width&&(t.width<1||t.width>100)&&o.push("Width must be between 1 and 100 percent"),t.height&&(t.height<50||t.height>800)&&o.push("Height must be between 50 and 800 pixels"),{valid:0===o.length,errors:o}}getBackgroundImageCSS(e,t){var o,i;if(!e.background_image_type||"none"===e.background_image_type)return"none";switch(e.background_image_type){case"upload":case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const a=t.states[e.background_image_entity];let n="";if((null===(o=a.attributes)||void 0===o?void 0:o.entity_picture)?n=a.attributes.entity_picture:(null===(i=a.attributes)||void 0===i?void 0:i.image)?n=a.attributes.image:a.state&&"string"==typeof a.state&&(a.state.startsWith("/")||a.state.startsWith("http"))&&(n=a.state),n)return n.startsWith("/local/")||n.startsWith("/media/")||n.startsWith("/"),`url("${n}")`}}return"none"}getAttributeByPath(e,t){if(!e||!t)return;const o=t.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").filter(Boolean);let i=e;for(const e of o){if(null==i)return;i=i[e]}return i}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}getStyles(){return"\n      .image-module-preview {\n        max-width: 100%;\n        overflow: hidden;\n        box-sizing: border-box;\n      }\n\n\n\n      .image-module-preview img {\n        max-width: 100%;\n        height: auto;\n        display: block;\n      }\n\n      /* Defensive dropdown positioning for selects inside image module sections */\n      .module-general-settings ha-select {\n        position: relative !important;\n        overflow: visible !important;\n        z-index: 9999 !important;\n      }\n      .module-general-settings ha-select .mdc-select__menu,\n      .module-general-settings ha-select mwc-menu,\n      .module-general-settings ha-select .mdc-menu,\n      .module-general-settings ha-select ha-menu {\n        /* Rely on HA menu positioning; ensure it's above */\n        z-index: 10001 !important;\n      }\n\n      /* Ensure container allows dropdown overflow */\n      .module-general-settings {\n        overflow: visible !important;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Field styling - ensure vertical stacking, no columns */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n        \n        margin-bottom: 4px !important;\n        display: block !important;\n        width: 100% !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n        width: 100% !important;\n      }\n\n      .field-group {\n        display: flex !important;\n        flex-direction: column !important;\n        width: 100% !important;\n        margin-bottom: 16px !important;\n      }\n\n      .field-group ha-form {\n        width: 100% !important;\n        display: block !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n    "}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}}},885:(e,t,o)=>{o.d(t,{mN:()=>C,AH:()=>l,W3:()=>w,Ec:()=>k});const i=globalThis,a=i.ShadowRoot&&(void 0===i.ShadyCSS||i.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n=Symbol(),r=new WeakMap;class s{constructor(e,t,o){if(this._$cssResult$=!0,o!==n)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(a&&void 0===e){const o=void 0!==t&&1===t.length;o&&(e=r.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&r.set(t,e))}return e}toString(){return this.cssText}}const l=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1]),e[0]);return new s(o,e,n)},d=(e,t)=>{if(a)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const o of t){const t=document.createElement("style"),a=i.litNonce;void 0!==a&&t.setAttribute("nonce",a),t.textContent=o.cssText,e.appendChild(t)}},c=a?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,n))(t)})(e):e,{is:p,defineProperty:u,getOwnPropertyDescriptor:h,getOwnPropertyNames:m,getOwnPropertySymbols:g,getPrototypeOf:_}=Object,b=globalThis,v=b.trustedTypes,f=v?v.emptyScript:"",y=b.reactiveElementPolyfillSupport,x=(e,t)=>e,w={toAttribute(e,t){switch(t){case Boolean:e=e?f:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},k=(e,t)=>!p(e,t),$={attribute:!0,type:String,converter:w,reflect:!1,hasChanged:k};Symbol.metadata??=Symbol("metadata"),b.litPropertyMetadata??=new WeakMap;class C extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=$){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const o=Symbol(),i=this.getPropertyDescriptor(e,o,t);void 0!==i&&u(this.prototype,e,i)}}static getPropertyDescriptor(e,t,o){const{get:i,set:a}=h(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return i?.call(this)},set(t){const n=i?.call(this);a.call(this,t),this.requestUpdate(e,n,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??$}static _$Ei(){if(this.hasOwnProperty(x("elementProperties")))return;const e=_(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(x("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(x("properties"))){const e=this.properties,t=[...m(e),...g(e)];for(const o of t)this.createProperty(o,e[o])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,o]of t)this.elementProperties.set(e,o)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const o=this._$Eu(e,t);void 0!==o&&this._$Eh.set(o,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(c(e))}else void 0!==e&&t.push(c(e));return t}static _$Eu(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const o of t.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return d(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$EC(e,t){const o=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,o);if(void 0!==i&&!0===o.reflect){const a=(void 0!==o.converter?.toAttribute?o.converter:w).toAttribute(t,o.type);this._$Em=e,null==a?this.removeAttribute(i):this.setAttribute(i,a),this._$Em=null}}_$AK(e,t){const o=this.constructor,i=o._$Eh.get(e);if(void 0!==i&&this._$Em!==i){const e=o.getPropertyOptions(i),a="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:w;this._$Em=i,this[i]=a.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,o){if(void 0!==e){if(o??=this.constructor.getPropertyOptions(e),!(o.hasChanged??k)(this[e],t))return;this.P(e,t,o)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,o){this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,o]of e)!0!==o.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],o)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}C.elementStyles=[],C.shadowRootOptions={mode:"open"},C[x("elementProperties")]=new Map,C[x("finalized")]=new Map,y?.({ReactiveElement:C}),(b.reactiveElementVersions??=[]).push("2.0.4")},914:(e,t,o)=>{o.d(t,{Q:()=>a});var i=o(183);class a{static renderCleanForm(e,t,o,n){const r=`clean-form-${Math.random().toString(36).substr(2,9)}`;return setTimeout((()=>{const e=document.getElementById(r);e&&(a.setupFormObserver(e,r),a.aggressiveCleanup(e))}),0),setTimeout((()=>{const e=document.getElementById(r);e&&a.aggressiveCleanup(e)}),100),i.qy`
      <div class="ultra-clean-form" id="${r}">
        <ha-form
          .hass=${e}
          .data=${t}
          .schema=${o}
          .computeLabel=${()=>""}
          .computeDescription=${()=>""}
          @value-changed=${e=>{n(e),setTimeout((()=>{const e=document.getElementById(r);e&&a.aggressiveCleanup(e)}),0)}}
        ></ha-form>
      </div>
    `}static setupFormObserver(e,t){var o;a.activeObservers.has(t)&&(null===(o=a.activeObservers.get(t))||void 0===o||o.disconnect());const i=new MutationObserver((o=>{let i=!1;o.forEach((e=>{"childList"===e.type&&e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&(i=!0)}))})),i&&!a.cleanupQueue.has(t)&&(a.cleanupQueue.add(t),setTimeout((()=>{a.aggressiveCleanup(e),a.cleanupQueue.delete(t)}),10))}));i.observe(e,{childList:!0,subtree:!0,characterData:!0}),a.activeObservers.set(t,i),setTimeout((()=>{document.contains(e)||(i.disconnect(),a.activeObservers.delete(t))}),3e4)}static aggressiveCleanup(e){var t;if(!e)return;const o=["action","entity","template_mode","icon","name","value","text","url","path","attribute","state","condition","enabled","disabled","template","mode","type","size","color","style","width","height","radius","opacity","service","data","latitude","longitude","navigation_path","show_icon","label","button"],i=e.querySelector("ha-form");if(!i)return;const a=document.createTreeWalker(i,NodeFilter.SHOW_TEXT,null),n=[];let r;for(;r=a.nextNode();){const e=null===(t=r.textContent)||void 0===t?void 0:t.trim().toLowerCase();e&&o.includes(e)&&n.push(r)}n.forEach((e=>{var t;const o=e.parentElement;if(o){const i=o.querySelector("input, select, ha-entity-picker, ha-selector, mwc-select, mwc-textfield");e.textContent&&e.textContent.trim().length<30&&(i||(null===(t=o.parentElement)||void 0===t?void 0:t.querySelector("input, select, ha-entity-picker, ha-selector")))&&e.remove()}})),i.querySelectorAll("*").forEach((e=>{var t,i;const a=null===(t=e.textContent)||void 0===t?void 0:t.trim().toLowerCase();a&&o.includes(a)&&0===e.children.length&&(null===(i=e.parentElement)||void 0===i?void 0:i.querySelector("input, select, ha-entity-picker, ha-selector"))&&(e.style.cssText="display: none !important; visibility: hidden !important; opacity: 0 !important; height: 0 !important; width: 0 !important; margin: 0 !important; padding: 0 !important;")})),['div[role="group"] > div:first-child:not([class])','div[role="group"] > span:first-child:not([class])',".mdc-form-field__label",".mdc-text-field__label",".mdc-select__label","label:not([for])","div:not([class]):not([id])","span:not([class]):not([id])"].forEach((e=>{try{i.querySelectorAll(e).forEach((e=>{var t;const i=null===(t=e.textContent)||void 0===t?void 0:t.trim().toLowerCase();i&&o.includes(i)&&(e.style.cssText="display: none !important;")}))}catch(e){}})),i.querySelectorAll('[class*="mdc-"]').forEach((e=>{var t;const i=null===(t=e.textContent)||void 0===t?void 0:t.trim().toLowerCase();i&&o.includes(i)&&0===e.children.length&&(e.classList.contains("mdc-floating-label")||e.classList.contains("mdc-form-field__label")||e.classList.contains("mdc-text-field__label"))&&(e.style.cssText="display: none !important;")})),setTimeout((()=>{var e;const t=document.createTreeWalker(i,NodeFilter.SHOW_TEXT,null),a=[];let n;for(;n=t.nextNode();){const t=null===(e=n.textContent)||void 0===e?void 0:e.trim().toLowerCase();t&&o.includes(t)&&a.push(n)}a.forEach((e=>{e.parentNode&&(e.textContent="")}))}),50)}static getCleanFormStyles(){return"\n      /* Ultra-aggressive label hiding */\n      .ultra-clean-form ha-form label,\n      .ultra-clean-form ha-form .label,\n      .ultra-clean-form ha-form .mdc-floating-label,\n      .ultra-clean-form ha-form .mdc-text-field__label,\n      .ultra-clean-form ha-form .mdc-select__label,\n      .ultra-clean-form ha-form .mdc-form-field__label,\n      .ultra-clean-form ha-form .ha-form-label,\n      .ultra-clean-form ha-form .mdc-notched-outline__leading,\n      .ultra-clean-form ha-form .mdc-notched-outline__notch,\n      .ultra-clean-form ha-form .mdc-notched-outline__trailing,\n      .ultra-clean-form ha-form .mdc-line-ripple {\n        display: none !important;\n        visibility: hidden !important;\n        opacity: 0 !important;\n        height: 0 !important;\n        width: 0 !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        font-size: 0 !important;\n        line-height: 0 !important;\n      }\n\n      /* Override any existing label styles completely */\n      .ultra-clean-form label,\n      .ultra-clean-form .ultra-clean-form label *,\n      .ultra-clean-form ha-form label,\n      .ultra-clean-form ha-form label * {\n        display: none !important;\n        visibility: hidden !important;\n        opacity: 0 !important;\n        height: 0 !important;\n        width: 0 !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        border: none !important;\n        outline: none !important;\n        background: none !important;\n        font-size: 0 !important;\n        line-height: 0 !important;\n        position: absolute !important;\n        left: -9999px !important;\n        top: -9999px !important;\n        z-index: -1 !important;\n        pointer-events: none !important;\n      }\n\n      /* Hide any text that could be a redundant label */\n      .ultra-clean-form ha-form div:not([class]):not([id]),\n      .ultra-clean-form ha-form span:not([class]):not([id]),\n      .ultra-clean-form ha-form p:not([class]):not([id]) {\n        font-size: 0 !important;\n        line-height: 0 !important;\n        color: transparent !important;\n        height: 0 !important;\n        overflow: hidden !important;\n      }\n\n      /* Make sure form inputs still work */\n      .ultra-clean-form ha-form input,\n      .ultra-clean-form ha-form select,\n      .ultra-clean-form ha-form textarea,\n      .ultra-clean-form ha-form ha-entity-picker,\n      .ultra-clean-form ha-form ha-icon-picker,\n      .ultra-clean-form ha-form ha-selector,\n      .ultra-clean-form ha-form .mdc-text-field,\n      .ultra-clean-form ha-form .mdc-select,\n      .ultra-clean-form ha-form .mdc-switch {\n        font-size: 14px !important;\n        line-height: normal !important;\n        color: var(--primary-text-color) !important;\n        height: auto !important;\n        width: auto !important;\n        margin-top: 0 !important;\n        border-radius: 8px !important;\n      }\n\n      /* Ensure dropdowns work */\n      .ultra-clean-form ha-form .mdc-select__selected-text,\n      .ultra-clean-form ha-form .mdc-select__dropdown-icon {\n        font-size: 14px !important;\n        color: var(--primary-text-color) !important;\n        opacity: 1 !important;\n        height: auto !important;\n        width: auto !important;\n      }\n\n      /* Style field titles and descriptions consistently */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n       \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n    "}static cleanupRedundantLabels(e){a.aggressiveCleanup(e)}static renderField(e,t,o,n,r,s){return i.qy`
      <div class="form-field-container">
        <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
          ${e}
        </div>
        <div
          class="field-description"
          style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
        >
          ${t}
        </div>
        ${a.renderCleanForm(o,n,r,s)}
      </div>
    `}static createSchemaItem(e,t){return{name:e,selector:t}}static renderSection(e,t,o){return i.qy`
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
        >
          ${e}
        </div>
        ${t?i.qy`
              <div
                class="field-description"
                style="font-size: 13px; font-weight: 400; margin-bottom: 16px; color: var(--secondary-text-color);"
              >
                ${t}
              </div>
            `:""}
        ${o.map((e=>i.qy`
            <div style="margin-bottom: 16px;">
              ${a.renderField(e.title,e.description,e.hass,e.data,e.schema,e.onChange)}
            </div>
          `))}
      </div>
    `}static injectCleanFormStyles(){return i.qy`
      <style>
        ${a.getCleanFormStyles()}
      </style>
    `}}a.activeObservers=new Map,a.cleanupQueue=new Set}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return o[e](n,n.exports,a),n.loaded=!0,n.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(o,i){if(1&i&&(o=this(o)),8&i)return o;if("object"==typeof o&&o){if(4&i&&o.__esModule)return o;if(16&i&&"function"==typeof o.then)return o}var n=Object.create(null);a.r(n);var r={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&o;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>r[e]=()=>o[e]));return r.default=()=>o,a.d(n,r),n},a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=a(183),r=a(276),s=(a(30),a(341)),l=(a(504),a(278),a(884),a(649),a(679),a(866),a(790),a(70),a(101),a(863),a(381)),d=a(397);class c{static getInstance(){return c.instance||(c.instance=new c),c.instance}validateAndCorrectConfig(e){const t=[],o=[];let i;try{i=JSON.parse(JSON.stringify(e))}catch(e){return{valid:!1,errors:["Invalid JSON structure"],warnings:[]}}return i.type||(i.type="custom:ultra-card",o.push("Added missing card type")),"custom:ultra-card"!==i.type&&t.push(`Invalid card type: ${i.type}`),i.layout||(i.layout={rows:[]},o.push("Added missing layout structure")),i.layout.rows||(i.layout.rows=[],o.push("Added missing rows array")),i.layout.rows=i.layout.rows.map(((e,i)=>{const a=this.validateAndCorrectRow(e,i);return t.push(...a.errors),o.push(...a.warnings),a.correctedRow})),i.layout.rows=i.layout.rows.filter((e=>null!==e)),{valid:0===t.length,errors:t,warnings:o,correctedConfig:i}}validateAndCorrectRow(e,t){const o=[],i=[];return e.id||(e.id=`row-${Date.now()}-${t}`,i.push(`Row ${t}: Added missing ID`)),e.columns&&Array.isArray(e.columns)||(e.columns=[{id:`col-${Date.now()}-0`,modules:[]}],i.push(`Row ${t}: Added missing columns array`)),e.columns=e.columns.map(((e,a)=>{const n=this.validateAndCorrectColumn(e,t,a);return o.push(...n.errors),i.push(...n.warnings),n.correctedColumn})).filter((e=>null!==e)),0===e.columns.length&&(e.columns=[{id:`col-${Date.now()}-fallback`,modules:[]}],i.push(`Row ${t}: Added fallback column`)),{correctedRow:e,errors:o,warnings:i}}validateAndCorrectColumn(e,t,o){const i=[],a=[];return e.id||(e.id=`col-${Date.now()}-${t}-${o}`,a.push(`Row ${t}, Column ${o}: Added missing ID`)),e.modules&&Array.isArray(e.modules)||(e.modules=[],a.push(`Row ${t}, Column ${o}: Added missing modules array`)),e.modules=e.modules.map(((e,n)=>{const r=this.validateAndCorrectModule(e,t,o,n);return r.valid?r.correctedModule?(a.push(...r.warnings||[]),r.correctedModule):e:(i.push(...r.errors),null)})).filter((e=>null!==e)),{correctedColumn:e,errors:i,warnings:a}}validateAndCorrectModule(e,t,o,i){const a=[],n=[],r=(0,s.oD)();if(e.id||(e.id=`${e.type||"unknown"}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n.push("Module: Added missing ID")),!e.type)return a.push(`Module ${e.id}: Missing type`),{valid:!1,errors:a,warnings:n};if(!r.isModuleRegistered(e.type))return a.push(`Module ${e.id}: Unknown module type "${e.type}"`),{valid:!1,errors:a,warnings:n};const l=r.getModule(e.type);if(l){const t=l.validate(e);if(!t.valid)return a.push(...t.errors.map((t=>`Module ${e.id}: ${t}`))),{valid:!1,errors:a,warnings:n};const o=l.createDefault(e.id);console.log("🔍 Config Validation - Before merge:",{moduleId:e.id,moduleDesign:e.design,defaultDesign:o.design});const i=this.mergeWithDefaults(e,o);return console.log("🔍 Config Validation - After merge:",{moduleId:e.id,correctedDesign:i.design}),{valid:!0,errors:[],warnings:n,correctedModule:i}}return{valid:!1,errors:[`Module ${e.id}: No handler found for type "${e.type}"`],warnings:n}}mergeWithDefaults(e,t){const o=Object.assign({},t);return Object.keys(e).forEach((i=>{void 0!==e[i]&&null!==e[i]&&("object"!=typeof e[i]||Array.isArray(e[i])||"object"!=typeof t[i]?o[i]=e[i]:o[i]=Object.assign(Object.assign({},t[i]),e[i]))})),o}countTotalModules(e){return e.layout.rows.reduce(((e,t)=>e+t.columns.reduce(((e,t)=>e+t.modules.length),0)),0)}validateUniqueModuleIds(e){const t=new Set,o=[];for(const i of e.layout.rows)for(const e of i.columns)for(const i of e.modules)t.has(i.id)?o.push(i.id):t.add(i.id);return{valid:0===o.length,duplicates:o}}fixDuplicateModuleIds(e){const t=new Set,o=JSON.parse(JSON.stringify(e));for(const e of o.layout.rows)for(const o of e.columns)for(const e of o.modules){if(t.has(e.id)){let o=`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;for(;t.has(o);)o=`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e.id=o}t.add(e.id)}return o}}const p=c.getInstance();var u=a(456),h=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};let m=class extends n.WF{render(){var e,t;const o=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return n.qy`
      <div class="about-tab">
        <div class="about-logo-container">
          <h1>Ultra Card</h1>
        </div>

        <div class="about-developed-by">
          ${(0,u.kg)("editor.about.developed_by",o,"Developed by")}
          <a href="https://wjddesigns.com" target="_blank" rel="noopener">WJD Designs</a>
        </div>

        <div class="about-description">
          <p>
            ${(0,u.kg)("editor.about.desc1",o,"A powerful modular card builder for Home Assistant")}
          </p>
          <p>
            ${(0,u.kg)("editor.about.desc2",o,"Create custom layouts with a professional page-builder interface")}
          </p>
        </div>

        <div class="about-buttons">
          <a
            href="https://github.com/WJDDesigns/Ultra-Card"
            target="_blank"
            rel="noopener"
            class="about-button github"
          >
            <svg viewBox="0 0 24 24" width="24" height="24" class="about-button-icon">
              <path
                fill="currentColor"
                d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
              />
            </svg>
            ${(0,u.kg)("editor.about.github_repo",o,"GitHub Repository")}
          </a>
        </div>

        <div class="version-info">
          <p>${(0,u.kg)("editor.about.version",o,"Version")} 1.0.0</p>
          <p>
            ${(0,u.kg)("editor.about.desc3",o,"Modular layout system with conditional logic and professional design tools")}
          </p>
        </div>
      </div>
    `}};m.styles=n.AH`
    .about-tab {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px;
      max-width: 600px;
      margin: 0 auto;
      color: var(--primary-text-color);
    }

    .about-logo-container h1 {
      color: var(--primary-color);
      font-size: 2.5em;
      margin: 0 0 16px 0;
      text-align: center;
    }

    .about-developed-by {
      font-size: 1.2em;
      margin-bottom: 24px;
      color: var(--secondary-text-color);
      text-align: center;
    }

    .about-developed-by a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: bold;
    }

    .about-developed-by a:hover {
      text-decoration: underline;
    }

    .about-description {
      text-align: center;
      margin-bottom: 32px;
    }

    .about-description p {
      margin: 8px 0;
      color: var(--secondary-text-color);
      line-height: 1.5;
    }

    .about-buttons {
      display: flex;
      justify-content: center;
      margin-bottom: 32px;
    }

    .about-button {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s ease;
      color: white;
      border: none;
    }

    .about-button svg {
      margin-right: 8px;
      fill: currentColor;
    }

    .about-button.github {
      background-color: #24292e;
    }

    .about-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .version-info {
      text-align: center;
      color: var(--secondary-text-color);
      font-size: 0.9em;
    }

    .version-info p {
      margin: 4px 0;
    }
  `,h([(0,r.MZ)({attribute:!1})],m.prototype,"hass",void 0),m=h([(0,r.EM)("ultra-about-tab")],m),a(461),a(768);var g=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};let _=class extends n.WF{constructor(){super(...arguments),this._activeTab="layout",this._isFullScreen=!1,this._isMobile=!1,this._moduleStylesInjected=!1}setConfig(e){this.config=e||{type:"custom:ultra-card",layout:{rows:[]}}}connectedCallback(){super.connectedCallback(),this.addEventListener("config-changed",this._handleConfigChanged),this.addEventListener("keydown",this._handleKeyDown),this._checkMobileDevice(),this._resizeListener=this._checkMobileDevice.bind(this),window.addEventListener("resize",this._resizeListener),this._injectModuleStyles()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("config-changed",this._handleConfigChanged),this.removeEventListener("keydown",this._handleKeyDown),this._resizeListener&&window.removeEventListener("resize",this._resizeListener),document.body.classList.remove("ultra-card-fullscreen")}_checkMobileDevice(){const e=window.innerWidth<=768,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=this._isMobile;this._isMobile=e||t,this._isMobile&&!o&&this._isFullScreen&&this._toggleFullScreen()}_handleConfigChanged(e){if(e.stopPropagation(),e.detail&&e.detail.config&&(this.config=e.detail.config,!e.detail.isInternal)){const t=new CustomEvent("config-changed",{detail:{config:e.detail.config,isInternal:!0},bubbles:!0,composed:!0});this.dispatchEvent(t)}}_handleKeyDown(e){"Escape"===e.key&&this._isFullScreen&&(e.preventDefault(),this._toggleFullScreen())}_updateConfig(e){const t=Object.assign(Object.assign({},this.config),e);this._configDebounceTimeout&&clearTimeout(this._configDebounceTimeout),this._configDebounceTimeout=window.setTimeout((()=>{const e=p.validateAndCorrectConfig(t);if(!e.valid){console.error("❌ Ultra Card Editor: Config validation failed",{errors:e.errors,warnings:e.warnings});const o=new CustomEvent("config-changed",{detail:{config:t,isInternal:!0},bubbles:!0,composed:!0});return void this.dispatchEvent(o)}const o=p.validateUniqueModuleIds(e.correctedConfig);let i=e.correctedConfig;o.valid||(console.warn("⚠️  Ultra Card Editor: Duplicate module IDs detected, fixing...",{duplicates:o.duplicates}),i=p.fixDuplicateModuleIds(i)),e.warnings.length>0&&console.info("ℹ️  Ultra Card: Config corrected with warnings",{warnings:e.warnings.length});const a=new CustomEvent("config-changed",{detail:{config:i,isInternal:!0},bubbles:!0,composed:!0});this.dispatchEvent(a)}),100)}_toggleFullScreen(){this._isFullScreen=!this._isFullScreen,this._isFullScreen?(document.body.classList.add("ultra-card-fullscreen"),"layout"!==this._activeTab&&(this._activeTab="layout")):document.body.classList.remove("ultra-card-fullscreen")}render(){var e;if(!this.hass||!this.config)return n.qy`<div>Loading...</div>`;const t=(null===(e=this.hass.locale)||void 0===e?void 0:e.language)||"en";return n.qy`
      <div class="card-config ${this._isFullScreen?"fullscreen":""}">
        <div class="tabs">
          <button
            class="tab ${"layout"===this._activeTab?"active":""}"
            @click=${()=>this._activeTab="layout"}
          >
            ${this._isFullScreen?"Ultra Card Layout Builder":(0,u.kg)("editor.tabs.layout",t,"Layout Builder")}
          </button>
          ${this._isFullScreen?"":n.qy`
                <button
                  class="tab ${"settings"===this._activeTab?"active":""}"
                  @click=${()=>this._activeTab="settings"}
                >
                  ${(0,u.kg)("editor.tabs.settings",t,"Settings")}
                </button>
                <button
                  class="tab ${"about"===this._activeTab?"active":""}"
                  @click=${()=>this._activeTab="about"}
                >
                  ${(0,u.kg)("editor.tabs.about",t,"About")}
                </button>
              `}
          ${this._isMobile?"":n.qy`
                <button
                  class="fullscreen-toggle"
                  @click=${this._toggleFullScreen}
                  title=${this._isFullScreen?(0,u.kg)("editor.tooltips.return_dashboard",t,"Return to Dashboard"):(0,u.kg)("editor.tooltips.enter_fullscreen",t,"Enter Full Screen")}
                >
                  ${this._isFullScreen?n.qy`
                        <svg viewBox="0 0 24 24" class="arrow-icon">
                          <path d="M15.41,7.41L14,6L8,12L14,18L15.41,16.59L10.83,12L15.41,7.41Z" />
                        </svg>
                        <span class="dashboard-text"
                          >${(0,u.kg)("editor.tooltips.dashboard",t,"Dashboard")}</span
                        >
                      `:n.qy`
                        <svg viewBox="0 0 24 24" class="arrow-icon">
                          <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                        </svg>
                      `}
                </button>
              `}
        </div>

        <div class="tab-content">
          ${"layout"===this._activeTab?n.qy`<ultra-layout-tab
                .hass=${this.hass}
                .config=${this.config}
                .isFullScreen=${this._isFullScreen}
              ></ultra-layout-tab>`:"settings"===this._activeTab?this._renderSettingsTab():n.qy`<ultra-about-tab .hass=${this.hass}></ultra-about-tab>`}
        </div>
      </div>
    `}_renderSettingsTab(){var e,t,o,i,a;const r=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en",s="var(--card-background-color)";return n.qy`
      <div class="settings-tab">
        <div class="settings-header">
          <h3>${(0,u.kg)("editor.settings.title",r,"Card Settings")}</h3>
          <p>
            ${(0,u.kg)("editor.settings.description",r,"Configure global card appearance and behavior.")}
          </p>
        </div>

        <div class="settings-container">
          <!-- Appearance Section -->
          <div class="settings-section">
            <div class="section-header">
              <h4>${(0,u.kg)("editor.appearance.title",r,"Appearance")}</h4>
              <p>
                ${(0,u.kg)("editor.appearance.description",r,"Control the visual appearance of your card")}
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-item">
                <label>
                  ${(0,u.kg)("editor.fields.card_background_color",r,"Card Background Color")}
                </label>
                <div class="setting-description">
                  ${(0,u.kg)("editor.fields.card_background_color_desc",r,"The background color of the entire card")}
                </div>
                <ultra-color-picker
                  .label=${"Card Background Color"}
                  .value=${this.config.card_background||s}
                  .defaultValue=${s}
                  .hass=${this.hass}
                  @value-changed=${e=>this._updateConfig({card_background:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="setting-item">
                <label> ${(0,u.kg)("editor.fields.border_radius",r,"Border Radius")} </label>
                <div class="setting-description">
                  ${(0,u.kg)("editor.fields.border_radius_desc",r,"Rounded corners for the card (in pixels)")}
                </div>
                <div class="input-with-unit">
                  <input
                    type="number"
                    min="0"
                    max="50"
                    .value=${null!==(o=this.config.card_border_radius)&&void 0!==o?o:""}
                    placeholder="12"
                    @input=${e=>{const t=e.target.value.trim();this._updateConfig({card_border_radius:""===t?12:Number(t)})}}
                  />
                  <span class="unit">${(0,u.kg)("editor.fields.unit_px",r,"px")}</span>
                  <button
                    class="reset-btn"
                    @click=${()=>this._updateConfig({card_border_radius:12})}
                    title=${(0,u.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","12px")}
                  >
                    ↺
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Spacing Section -->
          <div class="settings-section">
            <div class="section-header">
              <h4>${(0,u.kg)("editor.spacing.title",r,"Spacing")}</h4>
              <p>
                ${(0,u.kg)("editor.spacing.description",r,"Control the spacing and positioning of your card")}
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-item">
                <label>${(0,u.kg)("editor.fields.card_padding",r,"Card Padding")}</label>
                <div class="setting-description">
                  ${(0,u.kg)("editor.fields.card_padding_desc",r,"Internal spacing within the card")}
                </div>
                <div class="input-with-unit">
                  <input
                    type="number"
                    min="0"
                    max="100"
                    .value=${null!==(i=this.config.card_padding)&&void 0!==i?i:""}
                    placeholder="16"
                    @input=${e=>{const t=e.target.value.trim();this._updateConfig({card_padding:""===t?16:Number(t)})}}
                  />
                  <span class="unit">${(0,u.kg)("editor.fields.unit_px",r,"px")}</span>
                  <button
                    class="reset-btn"
                    @click=${()=>this._updateConfig({card_padding:16})}
                    title=${(0,u.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","16px")}
                  >
                    ↺
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <label>${(0,u.kg)("editor.fields.card_margin",r,"Card Margin")}</label>
                <div class="setting-description">
                  ${(0,u.kg)("editor.fields.card_margin_desc",r,"External spacing around the card")}
                </div>
                <div class="input-with-unit">
                  <input
                    type="number"
                    min="0"
                    max="50"
                    .value=${null!==(a=this.config.card_margin)&&void 0!==a?a:""}
                    placeholder="0"
                    @input=${e=>{const t=e.target.value.trim();this._updateConfig({card_margin:""===t?0:Number(t)})}}
                  />
                  <span class="unit">${(0,u.kg)("editor.fields.unit_px",r,"px")}</span>
                  <button
                    class="reset-btn"
                    @click=${()=>this._updateConfig({card_margin:0})}
                    title=${(0,u.kg)("editor.fields.reset_default_value",r,"Reset to default ({value})").replace("{value}","0px")}
                  >
                    ↺
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    `}_injectModuleStyles(){if(this._moduleStylesInjected||!this.shadowRoot)return;const e=(0,s.oD)().getAllModuleStyles();if(e.trim().length){const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}this._moduleStylesInjected=!0}static get styles(){return n.AH`
      /* Global styles for hiding preview in full screen */
      :host {
        --ultra-editor-transition: all 0.3s ease;
      }

      .card-config {
        padding: 16px;
        max-width: 100%;
        margin: 0 auto;
        width: 100%;
        box-sizing: border-box;
        transition: var(--ultra-editor-transition);
      }

      /* Full screen mode styles */
      .card-config.fullscreen {
        max-width: none !important;
        width: 100vw !important;
        margin: 0 !important;
        padding: 20px !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        height: 100vh !important;
        z-index: 10000 !important;
        background: var(--card-background-color) !important;
        overflow-y: auto !important;
        box-sizing: border-box !important;
      }

      /* Full screen mode tab content */
      .card-config.fullscreen .tab-content {
        min-height: calc(100vh - 120px) !important;
        width: 100% !important;
        max-width: none !important;
      }

      /* Full screen mode header adjustments */
      .card-config.fullscreen .tabs {
        border: none;
        background: var(--card-background-color);
        padding: 16px;
        position: sticky;
        top: 0;
        z-index: 100;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      /* Remove the gradient line in fullscreen */
      .card-config.fullscreen .tabs::before {
        display: none;
      }

      /* Center the single tab in fullscreen mode and remove borders */
      .card-config.fullscreen .tab {
        flex: none;
        min-width: auto;
        justify-content: center;
        border: none;
        border-radius: 12px;
        background: var(--primary-color);
        color: white;
        padding: 12px 24px;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(var(--rgb-primary-color), 0.3);
      }

      .card-config.fullscreen .tab:hover {
        background: var(--primary-color);
        opacity: 0.9;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(var(--rgb-primary-color), 0.4);
      }

      /* Hide Home Assistant preview when in full screen mode */
      :global(body.ultra-card-fullscreen) {
        overflow: hidden !important;
      }

      :global(body.ultra-card-fullscreen *) {
        .element-preview,
        .element-preview-container,
        .preview-container,
        .card-preview,
        .preview-pane,
        hui-card-preview,
        .card-config > div:last-child:not(.card-config),
        .card-config-row > div:last-child,
        .mdc-dialog .mdc-dialog__container .mdc-dialog__surface > div:last-child:not(.card-config) {
          display: none !important;
        }

        .card-config-container,
        .editor-container,
        .card-config-row,
        .mdc-dialog .mdc-dialog__container .mdc-dialog__surface {
          width: 100% !important;
          max-width: none !important;
        }

        /* Override HA dialog sizing */
        .mdc-dialog .mdc-dialog__container {
          max-width: 100vw !important;
          width: 100vw !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          z-index: 9999 !important;
        }

        .mdc-dialog .mdc-dialog__surface {
          max-width: 100vw !important;
          width: 100vw !important;
          max-height: 100vh !important;
          height: 100vh !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          margin: 0 !important;
          border-radius: 0 !important;
        }

        /* Hide the backdrop */
        .mdc-dialog .mdc-dialog__scrim {
          display: none !important;
        }
      }

      /* Allow action forms to display all their elements properly */
      ha-form[data-action-form] *,
      ha-form[data-action-form] .mdc-form-field,
      ha-form[data-action-form] .mdc-text-field,
      ha-form[data-action-form] .mdc-floating-label,
      ha-form[data-action-form] .mdc-notched-outline__leading,
      ha-form[data-action-form] .mdc-notched-outline__notch,
      ha-form[data-action-form] .mdc-notched-outline__trailing,
      ha-form[data-action-form] .mdc-floating-label--float-above,
      ha-form[data-action-form] label,
      ha-form[data-action-form] .ha-form-label,
      ha-form[data-action-form] .form-label,
      ha-form[data-action-form] .mdc-text-field-character-counter,
      ha-form[data-action-form] .mdc-text-field-helper-text,
      ha-form[data-action-form] mwc-formfield,
      ha-form[data-action-form] .formfield {
        display: initial !important;
        visibility: visible !important;
      }

      /* Ensure action forms themselves are visible */
      ha-form[data-action-form] {
        display: block !important;
        visibility: visible !important;
      }

      /* Hide unwanted form labels with underscores - but only for non-action forms */
      ha-form:not([data-action-form]) .mdc-form-field > label,
      ha-form:not([data-action-form]) .mdc-text-field > label,
      ha-form:not([data-action-form]) .mdc-floating-label,
      ha-form:not([data-action-form]) .mdc-notched-outline__leading,
      ha-form:not([data-action-form]) .mdc-notched-outline__notch,
      ha-form:not([data-action-form]) .mdc-notched-outline__trailing,
      ha-form:not([data-action-form]) .mdc-floating-label--float-above,
      ha-form:not([data-action-form]) label[for],
      ha-form:not([data-action-form]) .ha-form-label,
      ha-form:not([data-action-form]) .form-label {
        display: none !important;
      }

      /* Hide labels containing underscores only for non-action forms */
      ha-form:not([data-action-form]) label[data-label*='_'],
      ha-form:not([data-action-form]) .label-text:contains('_'),
      :not([data-action-form]) label:contains('_') {
        display: none !important;
      }

      /* Additional safeguards for underscore labels in non-action forms */
      ha-form:not([data-action-form]) .mdc-text-field-character-counter,
      ha-form:not([data-action-form]) .mdc-text-field-helper-text,
      ha-form:not([data-action-form]) mwc-formfield,
      ha-form:not([data-action-form]) .formfield {
        display: none !important;
      }

      /* GLOBAL DROPDOWN POSITIONING FIXES - All Modules */
      /* These fixes ensure ha-select dropdowns render properly across all modules */
      ha-select {
        position: relative !important;
        overflow: visible !important;
        z-index: 9999 !important;
      }

      /* Ensure dropdown menus are visible and above other content */
      ha-select .mdc-select__menu,
      ha-select mwc-menu,
      ha-select .mdc-menu,
      ha-select ha-menu {
        z-index: 10001 !important;
        max-height: 300px !important;
        overflow-y: auto !important;
      }

      /* Ensure ha-form containers allow dropdown overflow */
      ha-form {
        overflow: visible !important;
        position: relative;
        z-index: 1;
      }

      /* Specific fixes for nested form contexts */
      .settings-section ha-form,
      .field-section ha-form,
      .module-general-settings ha-form,
      .module-tab-content ha-form {
        overflow: visible !important;
        position: relative;
        z-index: 1;
      }

      /* Ensure all select elements in forms have proper positioning */
      .settings-section ha-select,
      .field-section ha-select,
      .module-general-settings ha-select,
      .module-tab-content ha-select,
      ha-form ha-select {
        position: relative !important;
        overflow: visible !important;
        z-index: 9999 !important;
      }

      /* Fix for conditional fields and nested containers */
      .conditional-fields-content ha-select,
      .icon-settings-container ha-select,
      details ha-select {
        position: relative !important;
        overflow: visible !important;
        z-index: 9999 !important;
      }

      /* Ensure dropdown menus in nested contexts are properly positioned */
      .conditional-fields-content ha-select .mdc-select__menu,
      .conditional-fields-content ha-select mwc-menu,
      .icon-settings-container ha-select .mdc-select__menu,
      .icon-settings-container ha-select mwc-menu,
      details ha-select .mdc-select__menu,
      details ha-select mwc-menu {
        position: fixed !important; /* fixed to avoid clipping inside scrollable containers */
        z-index: 10001 !important;
        max-height: 300px !important;
        overflow-y: auto !important;
      }

      /* Mobile responsive adjustments */
      @media (max-width: 768px) {
        .card-config {
          padding: 8px;
        }

        /* Hide fullscreen toggle on mobile as additional safeguard */
        .fullscreen-toggle {
          display: none !important;
        }
      }

      .tabs {
        display: flex;
        border-bottom: 2px solid var(--divider-color);
        margin-bottom: 16px;
      }

      .tab {
        background: none;
        border: none;
        padding: 12px 16px;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 14px;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
        flex: 1;
        text-align: center;
      }

      .tab:hover {
        color: var(--primary-color);
      }

      .tab.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

      .fullscreen-toggle {
        background: none;
        border: none;
        padding: 8px 12px;
        cursor: pointer;
        color: var(--secondary-text-color);
        margin-left: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        transition: var(--ultra-editor-transition);
        position: relative;
        min-width: 40px;
        height: 40px;
        gap: 6px;
      }

      .fullscreen-toggle:hover {
        background: var(--divider-color);
        color: var(--primary-color);
      }

      .fullscreen-toggle:active {
        transform: scale(0.95);
      }

      /* Active fullscreen state - Dashboard button styling */
      .card-config.fullscreen .fullscreen-toggle {
        background: rgba(var(--rgb-primary-color), 0.1);
        color: var(--primary-color);
        border: 1px solid rgba(var(--rgb-primary-color), 0.2);
        padding: 8px 16px;
        min-width: auto;
        height: auto;
      }

      .card-config.fullscreen .fullscreen-toggle:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        transform: translateX(-2px);
      }

      .arrow-icon {
        width: 20px;
        height: 20px;
        fill: currentColor;
        transition: var(--ultra-editor-transition);
        flex-shrink: 0;
      }

      .dashboard-text {
        font-size: 14px;
        font-weight: 500;
        white-space: nowrap;
      }

      .tab-content {
        min-height: 400px;
        transition: var(--ultra-editor-transition);
      }

      /* Full screen mode tab content */
      .card-config.fullscreen .tab-content {
        min-height: calc(100vh - 120px);
      }

      .settings-tab {
        padding: 12px;
        background: var(--card-background-color);
        border-radius: 8px;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .settings-header {
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--divider-color);
      }

      .settings-header h3 {
        margin: 0 0 8px 0;
        color: var(--primary-text-color);
        font-size: 18px;
        font-weight: 600;
      }

      .settings-header p {
        margin: 0;
        color: var(--secondary-text-color);
        font-size: 14px;
        line-height: 1.4;
      }

      .settings-container {
        display: flex;
        flex-direction: column;
        gap: 24px;
        flex: 1;
      }

      .settings-section {
        background: var(--secondary-background-color);
        border: 2px solid var(--primary-color);
        border-radius: 8px;
        padding: 20px;
        box-sizing: border-box;
      }

      .section-header {
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);
      }

      .section-header h4 {
        margin: 0 0 6px 0;
        color: var(--primary-text-color);
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .section-header p {
        margin: 0;
        color: var(--secondary-text-color);
        font-size: 13px;
        line-height: 1.4;
      }

      .settings-grid {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .setting-item {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .setting-item label {
        color: var(--primary-text-color);
        font-size: 14px;
        font-weight: 500;
        margin: 0;
      }

      .setting-description {
        color: var(--secondary-text-color);
        font-size: 12px;
        line-height: 1.3;
        margin-bottom: 4px;
      }

      .input-with-unit {
        display: flex;
        align-items: center;
        gap: 8px;
        max-width: 200px;
      }

      .input-with-unit input {
        flex: 1;
        padding: 10px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        transition: all 0.2s ease;
        min-width: 0;
      }

      .input-with-unit input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
      }

      .input-with-unit .unit {
        color: var(--secondary-text-color);
        font-size: 12px;
        font-weight: 500;
        min-width: 20px;
        text-align: center;
      }

      .reset-btn {
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        color: var(--secondary-text-color);
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        padding: 0;
        flex-shrink: 0;
      }

      .reset-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        transform: scale(1.05);
      }

      .reset-btn:active {
        transform: scale(0.95);
      }

      .setting-item ultra-color-picker {
        max-width: 300px;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .settings-tab {
          padding: 16px 12px;
        }

        .settings-section {
          padding: 16px;
        }

        .settings-grid {
          gap: 16px;
        }
      }

      /* Full screen mode responsive behavior for builder columns */
      .card-config.fullscreen {
        /* Allow horizontal layout components to display side by side */
        ::slotted(ultra-layout-tab) {
          --layout-columns-display: flex;
          --layout-columns-direction: row;
          --layout-columns-gap: 16px;
        }

        /* Style for layout builder in full screen */
        ultra-layout-tab {
          --columns-layout: horizontal;
        }
      }

      /* Default preview mode - stack columns vertically */
      .card-config:not(.fullscreen) {
        ::slotted(ultra-layout-tab) {
          --layout-columns-display: flex;
          --layout-columns-direction: column;
          --layout-columns-gap: 12px;
        }

        ultra-layout-tab {
          --columns-layout: vertical;
        }
      }

      /* Enhanced mobile behavior */
      @media (max-width: 768px) {
        .card-config.fullscreen {
          width: 100vw;
          height: 100vh;
          padding: 12px;
          position: fixed;
          top: 0;
          left: 0;
          z-index: 9999;
          background: var(--card-background-color);
        }

        .fullscreen-toggle {
          padding: 6px 10px;
          min-width: 36px;
          height: 36px;
        }

        .arrow-icon {
          width: 16px;
          height: 16px;
        }
      }
    `}};g([(0,r.MZ)({attribute:!1})],_.prototype,"hass",void 0),g([(0,r.MZ)({attribute:!1})],_.prototype,"config",void 0),g([(0,r.wk)()],_.prototype,"_activeTab",void 0),g([(0,r.wk)()],_.prototype,"_configDebounceTimeout",void 0),g([(0,r.wk)()],_.prototype,"_isFullScreen",void 0),g([(0,r.wk)()],_.prototype,"_isMobile",void 0),_=g([(0,r.EM)("ultra-card-editor")],_);var b=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};let v=class extends n.WF{constructor(){super(...arguments),this._moduleVisibilityState=new Map,this._animatingModules=new Set,this._lastHassChangeTime=0,this._moduleStylesInjected=!1}connectedCallback(){super.connectedCallback(),this._injectModuleStyles(),this._templateUpdateListener=()=>{this.requestUpdate()},window.addEventListener("ultra-card-template-update",this._templateUpdateListener)}disconnectedCallback(){super.disconnectedCallback(),this._templateUpdateListener&&window.removeEventListener("ultra-card-template-update",this._templateUpdateListener)}willUpdate(e){if(e.has("config")){const t=e.get("config"),o=this.config;t&&JSON.stringify(t.layout)===JSON.stringify(null==o?void 0:o.layout)||(this._moduleVisibilityState.clear(),this._animatingModules.clear()),this.requestUpdate()}if(e.has("hass")){const e=Date.now();e-this._lastHassChangeTime>100&&(this._lastHassChangeTime=e,this.hass&&d.S.setHass(this.hass),this.requestUpdate())}}setConfig(e){if(!e)throw new Error("Invalid configuration");const t=p.validateAndCorrectConfig(e);if(!t.valid)throw console.error("❌ Ultra Card: Config validation failed",{errors:t.errors,warnings:t.warnings}),new Error(`Invalid configuration: ${t.errors.join(", ")}`);const o=p.validateUniqueModuleIds(t.correctedConfig);let i=t.correctedConfig;o.valid||(console.warn("⚠️  Ultra Card: Duplicate module IDs detected, fixing...",{duplicates:o.duplicates}),i=p.fixDuplicateModuleIds(i)),this.config=Object.assign({},i),this.requestUpdate()}static getConfigElement(){return document.createElement("ultra-card-editor")}static getStubConfig(){return{type:"custom:ultra-card",layout:{rows:[{id:"row1",columns:[{id:"col1",modules:[{type:"text",text:"Ultra Card",font_size:24,color:"#2196f3",alignment:"center"},{type:"image",image_type:"default",width:100,height:200,alignment:"center",border_radius:8,object_fit:"cover"}]}]}]}}}render(){if(!this.config||!this.hass)return n.qy`<div>Loading...</div>`;const e=this._getCardStyle();return this.config.layout&&this.config.layout.rows&&0!==this.config.layout.rows.length?n.qy`
      <div class="card-container" style="${e}">
        ${this.config.layout.rows.map((e=>this._renderRow(e)))}
      </div>
    `:n.qy`
        <div class="card-container" style="${e}">
          <div class="welcome-text">
            <h2>Ultra Card</h2>
            <p>Modular card builder for Home Assistant</p>
            <p>Configure using the visual editor</p>
          </div>
        </div>
      `}_getCardStyle(){if(!this.config)return"";const e=[];return this.config.card_background&&e.push(`background: ${this.config.card_background}`),void 0!==this.config.card_border_radius&&e.push(`border-radius: ${this.config.card_border_radius}px`),void 0!==this.config.card_padding&&e.push(`padding: ${this.config.card_padding}px`),void 0!==this.config.card_margin&&e.push(`margin: ${this.config.card_margin}px`),e.join("; ")}_renderRow(e){var t,o,i,a,r,s,l;this.hass&&d.S.setHass(this.hass);const c=d.S.evaluateRowVisibility(e),p=e,u=d.S.evaluateLogicProperties({logic_entity:null===(t=p.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(o=p.design)||void 0===o?void 0:o.logic_attribute,logic_operator:null===(i=p.design)||void 0===i?void 0:i.logic_operator,logic_value:null===(a=p.design)||void 0===a?void 0:a.logic_value});if(!c||!u)return n.qy``;const h=this._getStateBasedAnimationClass(e.design),m=this._generateRowStyles(e),g=n.qy`
      <div class="card-row" style=${m}>
        ${e.columns.map((e=>this._renderColumn(e)))}
      </div>
    `;if(h){const t=(null===(r=e.design)||void 0===r?void 0:r.animation_duration)||"2s",o=(null===(s=e.design)||void 0===s?void 0:s.animation_delay)||"0s",i=(null===(l=e.design)||void 0===l?void 0:l.animation_timing)||"ease";return n.qy`
        <div
          class="row-animation-wrapper ${h}"
          style="
            --animation-duration: ${t};
            --animation-delay: ${o};
            --animation-timing: ${i};
          "
        >
          ${g}
        </div>
      `}return g}_renderColumn(e){var t,o,i,a,r,s,l;const c=d.S.evaluateColumnVisibility(e),p=e,u=d.S.evaluateLogicProperties({logic_entity:null===(t=p.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(o=p.design)||void 0===o?void 0:o.logic_attribute,logic_operator:null===(i=p.design)||void 0===i?void 0:i.logic_operator,logic_value:null===(a=p.design)||void 0===a?void 0:a.logic_value});if(!c||!u)return n.qy``;const h=this._getStateBasedAnimationClass(e.design),m=this._generateColumnStyles(e),g=n.qy`
      <div class="card-column" style=${m}>
        ${e.modules.map((e=>this._renderModule(e)))}
      </div>
    `;if(h){const t=(null===(r=e.design)||void 0===r?void 0:r.animation_duration)||"2s",o=(null===(s=e.design)||void 0===s?void 0:s.animation_delay)||"0s",i=(null===(l=e.design)||void 0===l?void 0:l.animation_timing)||"ease";return n.qy`
        <div
          class="column-animation-wrapper ${h}"
          style="
            --animation-duration: ${t};
            --animation-delay: ${o};
            --animation-timing: ${i};
          "
        >
          ${g}
        </div>
      `}return g}_renderModule(e){var t,o,i,a,r,l,c,p,u,h,m,g,_,b;const v=d.S.evaluateModuleVisibility(e),f=e,y=d.S.evaluateLogicProperties({logic_entity:null===(t=f.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(o=f.design)||void 0===o?void 0:o.logic_attribute,logic_operator:null===(i=f.design)||void 0===i?void 0:i.logic_operator,logic_value:null===(a=f.design)||void 0===a?void 0:a.logic_value}),x=v&&y,w=e.id||`${e.type}-${Math.random()}`,k=this._moduleVisibilityState.get(w),$=this._animatingModules.has(w),C=f.intro_animation||(null===(r=f.design)||void 0===r?void 0:r.intro_animation)||"none",S=f.outro_animation||(null===(l=f.design)||void 0===l?void 0:l.outro_animation)||"none",A=f.animation_duration||(null===(c=f.design)||void 0===c?void 0:c.animation_duration)||"2s",T=f.animation_delay||(null===(p=f.design)||void 0===p?void 0:p.animation_delay)||"0s",z=f.animation_timing||(null===(u=f.design)||void 0===u?void 0:u.animation_timing)||"ease",I=f.animation_type||(null===(h=f.design)||void 0===h?void 0:h.animation_type),D=f.animation_entity||(null===(m=f.design)||void 0===m?void 0:m.animation_entity),L=f.animation_trigger_type||(null===(g=f.design)||void 0===g?void 0:g.animation_trigger_type)||"state",E=f.animation_attribute||(null===(_=f.design)||void 0===_?void 0:_.animation_attribute),M=f.animation_state||(null===(b=f.design)||void 0===b?void 0:b.animation_state);let P=!1;if(I&&"none"!==I)if(D){if(M&&this.hass){const e=this.hass.states[D];if(e)if("attribute"===L&&E){const t=e.attributes[E];P=String(t)===M}else P=e.state===M}}else P=!0;let R="",O=!1;if(P&&"none"!==I?R=`animation-${I}`:void 0!==k&&k!==x?x&&"none"!==C?$?R=`animation-${C}`:(R=`animation-${C}`,O=!0,this._animatingModules.add(w),setTimeout((()=>{this._animatingModules.delete(w),this.requestUpdate()}),this._parseAnimationDuration(A)+this._parseAnimationDuration(T))):x||"none"===S||($?R=`animation-${S}`:(R=`animation-${S}`,O=!0,this._animatingModules.add(w),setTimeout((()=>{this._animatingModules.delete(w),this.requestUpdate()}),this._parseAnimationDuration(A)+this._parseAnimationDuration(T)))):$&&(x&&"none"!==C?R=`animation-${C}`:x||"none"===S||(R=`animation-${S}`)),this._moduleVisibilityState.set(w,x),!x&&!$&&!O)return n.qy``;const U=(0,s.oD)().getModule(e.type);let N;return N=U&&this.hass?U.renderPreview(e,this.hass):n.qy`
        <div class="unknown-module">
          <span>Unknown Module: ${e.type}</span>
        </div>
      `,R||"none"!==C||"none"!==S||P?n.qy`
        <div
          class="module-animation-wrapper ${R}"
          style="
            --animation-duration: ${A};
            --animation-delay: ${T};
            --animation-timing: ${z};
          "
        >
          ${N}
        </div>
      `:N}_parseAnimationDuration(e){const t=e.match(/^(\d*\.?\d+)(s|ms)?$/);if(!t)return 300;const o=parseFloat(t[1]),i=t[2];return i?"s"===i?1e3*o:o:1e3*o}_getStateBasedAnimationClass(e){if(!e)return"";const t=e.animation_type,o=e.animation_entity,i=e.animation_trigger_type||"state",a=e.animation_attribute,n=e.animation_state;if(!t||"none"===t)return"";if(!o)return`animation-${t}`;if(!n||!this.hass)return"";const r=this.hass.states[o];if(!r)return"";let s=!1;if("attribute"===i&&a){const e=r.attributes[a];s=String(e)===n}else s=r.state===n;return s?`animation-${t}`:""}_countTotalModules(e){return e.layout&&e.layout.rows?e.layout.rows.reduce(((e,t)=>e+t.columns.reduce(((e,t)=>e+t.modules.length),0)),0):0}_getGridTemplateColumns(e,t){return{"1-col":"1fr","1-2-1-2":"1fr 1fr","1-3-2-3":"1fr 2fr","2-3-1-3":"2fr 1fr","2-5-3-5":"2fr 3fr","3-5-2-5":"3fr 2fr","1-3-1-3-1-3":"1fr 1fr 1fr","1-4-1-2-1-4":"1fr 2fr 1fr","1-5-3-5-1-5":"1fr 3fr 1fr","1-6-2-3-1-6":"1fr 4fr 1fr","1-4-1-4-1-4-1-4":"1fr 1fr 1fr 1fr","1-5-1-5-1-5-1-5":"1fr 1fr 1fr 1fr","1-6-1-6-1-6-1-6":"1fr 1fr 1fr 1fr","1-8-1-4-1-4-1-8":"1fr 2fr 2fr 1fr","1-5-1-5-1-5-1-5-1-5":"1fr 1fr 1fr 1fr 1fr","1-6-1-6-1-3-1-6-1-6":"1fr 1fr 2fr 1fr 1fr","1-8-1-4-1-4-1-4-1-8":"1fr 2fr 2fr 2fr 1fr","1-6-1-6-1-6-1-6-1-6-1-6":"1fr 1fr 1fr 1fr 1fr 1fr","50-50":"1fr 1fr","30-70":"3fr 7fr","70-30":"7fr 3fr","40-60":"4fr 6fr","60-40":"6fr 4fr","33-33-33":"1fr 1fr 1fr","25-50-25":"1fr 2fr 1fr","20-60-20":"1fr 3fr 1fr","25-25-25-25":"1fr 1fr 1fr 1fr"}[e]||`repeat(${t}, 1fr)`}_addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_generateRowStyles(e){const t=e.design||{},o=(e=>{switch(e){case"top":return"start";case"bottom":return"end";case"middle":return"center";default:return}})(e.column_alignment),i=(e=>{switch(e){case"start":return"start";case"end":return"end";case"center":return"center";case"stretch":return"stretch";default:return}})(e.content_alignment),a={display:"grid",gridTemplateColumns:this._getGridTemplateColumns(e.column_layout||"1-col",e.columns.length),gap:`${e.gap||16}px`};void 0!==o&&(a.alignItems=o),void 0!==i&&(a.justifyItems=i);const n={padding:t.padding_top||t.padding_bottom||t.padding_left||t.padding_right?`${t.padding_top||"0"} ${t.padding_right||"0"} ${t.padding_bottom||"0"} ${t.padding_left||"0"}`:e.padding?`${e.padding}px`:void 0,margin:t.margin_top||t.margin_bottom||t.margin_left||t.margin_right?`${t.margin_top||"0"} ${t.margin_right||"0"} ${t.margin_bottom||"0"} ${t.margin_left||"0"}`:e.margin?`${e.margin}px`:void 0,background:t.background_color||e.background_color||"transparent",backgroundImage:this._resolveBackgroundImageCSS(t),backgroundSize:t.background_size||(t.background_image?"cover":void 0),backgroundPosition:t.background_position||(t.background_image?"center":void 0),backgroundRepeat:t.background_repeat||(t.background_image?"no-repeat":void 0),border:t.border_style&&"none"!==t.border_style?`${t.border_width||"1px"} ${t.border_style} ${t.border_color||"var(--divider-color)"}`:"none",borderRadius:this._addPixelUnit(t.border_radius)||(e.border_radius?`${e.border_radius}px`:"0"),position:t.position||"inherit",top:t.top||"auto",bottom:t.bottom||"auto",left:t.left||"auto",right:t.right||"auto",zIndex:t.z_index||"auto",width:t.width||"100%",height:t.height||"auto",maxWidth:t.max_width||"none",maxHeight:t.max_height||"none",minWidth:t.min_width||"none",minHeight:t.min_height||"auto",overflow:t.overflow||"visible",clipPath:t.clip_path||"none",backdropFilter:t.backdrop_filter||"none",boxShadow:t.box_shadow_h&&t.box_shadow_v?`${t.box_shadow_h||"0"} ${t.box_shadow_v||"0"} ${t.box_shadow_blur||"0"} ${t.box_shadow_spread||"0"} ${t.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"},r=Object.assign(Object.assign({},a),n),s=Object.fromEntries(Object.entries(r).filter((([e,t])=>void 0!==t)));return this._styleObjectToCss(s)}_generateColumnStyles(e){const t=e.design||{},o={display:"flex",flexDirection:"column",gap:"8px"};e.horizontal_alignment&&(o.alignItems="left"===e.horizontal_alignment?"flex-start":"right"===e.horizontal_alignment?"flex-end":"stretch"===e.horizontal_alignment?"stretch":"center"),e.vertical_alignment&&(o.justifyContent="top"===e.vertical_alignment?"flex-start":"bottom"===e.vertical_alignment?"flex-end":"stretch"===e.vertical_alignment?"stretch":"center");const i={padding:t.padding_top||t.padding_bottom||t.padding_left||t.padding_right?`${t.padding_top||"0"} ${t.padding_right||"0"} ${t.padding_bottom||"0"} ${t.padding_left||"0"}`:e.padding?`${e.padding}px`:void 0,margin:t.margin_top||t.margin_bottom||t.margin_left||t.margin_right?`${t.margin_top||"0"} ${t.margin_right||"0"} ${t.margin_bottom||"0"} ${t.margin_left||"0"}`:e.margin?`${e.margin}px`:void 0,background:t.background_color||e.background_color||"transparent",backgroundImage:this._resolveBackgroundImageCSS(t),backgroundSize:t.background_size||(t.background_image?"cover":void 0),backgroundPosition:t.background_position||(t.background_image?"center":void 0),backgroundRepeat:t.background_repeat||(t.background_image?"no-repeat":void 0),border:t.border_style&&"none"!==t.border_style?`${t.border_width||"1px"} ${t.border_style} ${t.border_color||"var(--divider-color)"}`:"none",borderRadius:this._addPixelUnit(t.border_radius)||(e.border_radius?`${e.border_radius}px`:"0"),position:t.position||"inherit",top:t.top||"auto",bottom:t.bottom||"auto",left:t.left||"auto",right:t.right||"auto",zIndex:t.z_index||"auto",width:t.width||"100%",height:t.height||"auto",maxWidth:t.max_width||"none",maxHeight:t.max_height||"none",minWidth:t.min_width||"none",minHeight:t.min_height||"auto",overflow:t.overflow||"visible",clipPath:t.clip_path||"none",backdropFilter:t.backdrop_filter||"none",boxShadow:t.box_shadow_h&&t.box_shadow_v?`${t.box_shadow_h||"0"} ${t.box_shadow_v||"0"} ${t.box_shadow_blur||"0"} ${t.box_shadow_spread||"0"} ${t.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"},a=Object.assign(Object.assign({},o),i),n=Object.fromEntries(Object.entries(a).filter((([e,t])=>void 0!==t)));return this._styleObjectToCss(n)}_resolveBackgroundImageCSS(e){var t,o;const i=this.hass,a=null==e?void 0:e.background_image_type,n=null==e?void 0:e.background_image;if(!a||"none"===a)return n?`url("${i?(0,l.V)(i,n):n}")`:"none";if("upload"===a||"url"===a)return n?`url("${i?(0,l.V)(i,n):n}")`:"none";if("entity"===a){const a=null==e?void 0:e.background_image_entity;if(a&&i&&i.states[a]){const e=i.states[a];let n="";if((null===(t=e.attributes)||void 0===t?void 0:t.entity_picture)?n=e.attributes.entity_picture:(null===(o=e.attributes)||void 0===o?void 0:o.image)?n=e.attributes.image:"string"==typeof e.state&&(n=e.state),n)return`url("${(0,l.V)(i,n)}")`}return"none"}return"none"}_styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}_injectModuleStyles(){if(this._moduleStylesInjected||!this.shadowRoot)return;const e=(0,s.oD)().getAllModuleStyles();if(e.trim().length>0){const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t),this._moduleStylesInjected=!0}}static get styles(){return n.AH`
      :host {
        display: block;
      }

      .card-container {
        background: var(--card-background-color, var(--ha-card-background, white));
        border-radius: 8px;
        box-shadow: var(--ha-card-box-shadow, 0 2px 4px rgba(0, 0, 0, 0.1));
        padding: 16px;
        transition: all 0.3s ease;
      }

      .welcome-text {
        text-align: center;
        padding: 24px;
      }

      .welcome-text h2 {
        margin: 0 0 16px 0;
        color: var(--primary-text-color);
      }

      .welcome-text p {
        margin: 8px 0;
        color: var(--secondary-text-color);
      }

      .card-row {
        margin-bottom: 16px;
      }

      .card-row:last-child {
        margin-bottom: 0;
      }

      .card-column {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .unknown-module {
        padding: 16px;
        background: var(--error-color);
        color: white;
        border-radius: 4px;
        text-align: center;
        font-size: 14px;
      }

      /* Animation Wrappers */
      .module-animation-wrapper,
      .row-animation-wrapper,
      .column-animation-wrapper {
        animation-duration: var(--animation-duration, 2s);
        animation-delay: var(--animation-delay, 0s);
        animation-timing-function: var(--animation-timing, ease);
        animation-fill-mode: both;
        /* Inherit width from content */
        display: inherit;
        width: inherit;
        height: inherit;
        flex: inherit;
      }

      /* Intro Animations */
      .animation-fadeIn {
        animation-name: fadeIn;
      }

      .animation-slideInUp {
        animation-name: slideInUp;
      }

      .animation-slideInDown {
        animation-name: slideInDown;
      }

      .animation-slideInLeft {
        animation-name: slideInLeft;
      }

      .animation-slideInRight {
        animation-name: slideInRight;
      }

      .animation-zoomIn {
        animation-name: zoomIn;
      }

      .animation-bounceIn {
        animation-name: bounceIn;
      }

      .animation-flipInX {
        animation-name: flipInX;
      }

      .animation-flipInY {
        animation-name: flipInY;
      }

      .animation-rotateIn {
        animation-name: rotateIn;
      }

      /* Outro Animations */
      .animation-fadeOut {
        animation-name: fadeOut;
      }

      .animation-slideOutUp {
        animation-name: slideOutUp;
      }

      .animation-slideOutDown {
        animation-name: slideOutDown;
      }

      .animation-slideOutLeft {
        animation-name: slideOutLeft;
      }

      .animation-slideOutRight {
        animation-name: slideOutRight;
      }

      .animation-zoomOut {
        animation-name: zoomOut;
      }

      .animation-bounceOut {
        animation-name: bounceOut;
      }

      .animation-flipOutX {
        animation-name: flipOutX;
      }

      .animation-flipOutY {
        animation-name: flipOutY;
      }

      .animation-rotateOut {
        animation-name: rotateOut;
      }

      /* State-based Animations */
      .animation-pulse {
        animation-name: pulse;
        animation-iteration-count: infinite;
      }

      .animation-vibrate {
        animation-name: vibrate;
        animation-iteration-count: infinite;
      }

      .animation-rotate-left {
        animation-name: rotateLeft;
        animation-iteration-count: infinite;
      }

      .animation-rotate-right {
        animation-name: rotateRight;
        animation-iteration-count: infinite;
      }

      .animation-hover {
        animation-name: hover;
        animation-iteration-count: infinite;
      }

      .animation-fade {
        animation-name: fadeInOut;
        animation-iteration-count: infinite;
      }

      .animation-scale {
        animation-name: scale;
        animation-iteration-count: infinite;
      }

      .animation-bounce {
        animation-name: bounce;
        animation-iteration-count: infinite;
      }

      .animation-shake {
        animation-name: shake;
        animation-iteration-count: infinite;
      }

      .animation-tada {
        animation-name: tada;
        animation-iteration-count: infinite;
      }

      /* Animation Keyframes */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }

      @keyframes slideInUp {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideInDown {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes zoomIn {
        from {
          transform: scale(0);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes flipInX {
        from {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
        to {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
      }

      @keyframes flipInY {
        from {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
        to {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
      }

      @keyframes rotateIn {
        from {
          transform: rotate(-200deg);
          opacity: 0;
        }
        to {
          transform: rotate(0deg);
          opacity: 1;
        }
      }

      @keyframes slideOutUp {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(-100%);
          opacity: 0;
        }
      }

      @keyframes slideOutDown {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(100%);
          opacity: 0;
        }
      }

      @keyframes slideOutLeft {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      @keyframes zoomOut {
        from {
          transform: scale(1);
          opacity: 1;
        }
        to {
          transform: scale(0);
          opacity: 0;
        }
      }

      @keyframes bounceOut {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        25% {
          transform: scale(0.95);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(0);
          opacity: 0;
        }
      }

      @keyframes flipOutX {
        from {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
      }

      @keyframes flipOutY {
        from {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
      }

      @keyframes rotateOut {
        from {
          transform: rotate(0deg);
          opacity: 1;
        }
        to {
          transform: rotate(200deg);
          opacity: 0;
        }
      }

      /* State-based Animation Keyframes */
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes vibrate {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-2px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(2px);
        }
      }

      @keyframes rotateLeft {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(-360deg);
        }
      }

      @keyframes rotateRight {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes hover {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes fadeInOut {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      @keyframes scale {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        53%,
        80%,
        100% {
          transform: translateY(0);
        }
        40%,
        43% {
          transform: translateY(-15px);
        }
        70% {
          transform: translateY(-7px);
        }
        90% {
          transform: translateY(-3px);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }

      @keyframes tada {
        0% {
          transform: scale(1);
        }
        10%,
        20% {
          transform: scale(0.9) rotate(-3deg);
        }
        30%,
        50%,
        70%,
        90% {
          transform: scale(1.1) rotate(3deg);
        }
        40%,
        60%,
        80% {
          transform: scale(1.1) rotate(-3deg);
        }
        100% {
          transform: scale(1) rotate(0);
        }
      }

      @keyframes slideOutUp {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInDown {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideOutDown {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(100%);
          opacity: 0;
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutLeft {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      @keyframes zoomIn {
        from {
          transform: scale(0.3);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes zoomOut {
        from {
          transform: scale(1);
          opacity: 1;
        }
        to {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes bounceOut {
        20% {
          transform: scale(0.9);
        }
        50%,
        55% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes flipInX {
        from {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateX(-20deg);
        }
        60% {
          transform: perspective(400px) rotateX(10deg);
        }
        80% {
          transform: perspective(400px) rotateX(-5deg);
        }
        to {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutX {
        from {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
      }

      @keyframes flipInY {
        from {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateY(-20deg);
        }
        60% {
          transform: perspective(400px) rotateY(10deg);
        }
        80% {
          transform: perspective(400px) rotateY(-5deg);
        }
        to {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutY {
        from {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
      }

      @keyframes rotateIn {
        from {
          transform: rotate(-200deg);
          opacity: 0;
        }
        to {
          transform: rotate(0);
          opacity: 1;
        }
      }

      @keyframes rotateOut {
        from {
          transform: rotate(0);
          opacity: 1;
        }
        to {
          transform: rotate(200deg);
          opacity: 0;
        }
      }
    `}};b([(0,r.MZ)({attribute:!1})],v.prototype,"hass",void 0),b([(0,r.MZ)({attribute:!1,type:Object})],v.prototype,"config",void 0),b([(0,r.wk)()],v.prototype,"_moduleVisibilityState",void 0),b([(0,r.wk)()],v.prototype,"_animatingModules",void 0),v=b([(0,r.EM)("ultra-card")],v),setTimeout((()=>{if(!customElements.get("ultra-card"))try{customElements.define("ultra-card",v)}catch(e){}}),0);var f=function(e,t,o,i){var a,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(n<3?a(r):n>3?a(t,o,r):a(t,o))||r);return n>3&&r&&Object.defineProperty(t,o,r),r};let y=class extends n.WF{constructor(){super(...arguments),this.value="",this.label="Navigation Target",this.disabled=!1}_valueChanged(e){const t=e.detail.value;this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:t},bubbles:!0,composed:!0}))}render(){return n.qy`
      <div class="navigation-picker">
        ${this.label?n.qy`<label class="label">${this.label}</label>`:""}
        ${this.helper?n.qy`<div class="helper">${this.helper}</div>`:""}

        <ha-selector
          .hass=${this.hass}
          .selector=${{navigation:{}}}
          .value=${this.value}
          .disabled=${this.disabled}
          @value-changed=${this._valueChanged}
        ></ha-selector>
      </div>
    `}};y.styles=n.AH`
    :host {
      display: block;
    }

    .navigation-picker {
      width: 100%;
    }

    .label {
      display: block;
      font-weight: 500;
      color: var(--primary-text-color);
      margin-bottom: 8px;
    }

    .helper {
      font-size: 12px;
      color: var(--secondary-text-color);
      margin-bottom: 8px;
    }

    ha-selector {
      width: 100%;
      display: block;
    }
  `,f([(0,r.MZ)({attribute:!1})],y.prototype,"hass",void 0),f([(0,r.MZ)()],y.prototype,"value",void 0),f([(0,r.MZ)()],y.prototype,"label",void 0),f([(0,r.MZ)()],y.prototype,"helper",void 0),f([(0,r.MZ)({type:Boolean})],y.prototype,"disabled",void 0),y=f([(0,r.EM)("ultra-navigation-picker")],y);const x="1.0.0-beta10",w=(0,s.oD)().getRegistryStats().totalModules;console.info(`%c 🚀 Ultra Card %c v${x} %c ${w} modules `,"color: #fff; background:#03a9f4; font-weight:700; padding:3px 8px; border-radius:14px 0 0 14px;","color: #fff; background:#555555; font-weight:700; padding:3px 8px; border-radius:0 14px 14px 0; margin-right:6px;","color: #fff; background:#2e7d32; font-weight:700; padding:3px 10px; border-radius:14px;"),window.customCards=window.customCards||[],window.customCards.push({type:"ultra-card",name:"Ultra Card",description:"A modular card system for Home Assistant with dynamic layouts and powerful customization options.",preview:!0,documentationURL:"https://github.com/WJDDesigns/Ultra-Card",version:x})})();