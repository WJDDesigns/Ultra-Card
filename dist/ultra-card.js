/*! For license information please see ultra-card.js.LICENSE.txt */
(()=>{"use strict";var e,t,i={278:(e,t,i)=>{i.d(t,{O:()=>d});var o=i(5183),n=i(866),a=i(9662),r=i(2371),s=i(796),l=i(456);class d extends n.m{constructor(){super(...arguments),this.metadata={type:"separator",title:"Separator Module",description:"Visual dividers and spacing",author:"WJD Designs",version:"1.0.0",icon:"mdi:minus",category:"content",tags:["separator","divider","spacing","layout"]}}createDefault(e,t){return{id:e||this.generateId("separator"),type:"separator",separator_style:"line",orientation:"horizontal",thickness:2,width_percent:100,height_px:300,color:"#cccccc",show_title:!1,title:"",title_size:14,title_color:"var(--secondary-text-color)",title_bold:!1,title_italic:!1,title_uppercase:!1,title_strikethrough:!1,title_underline:!1,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},enable_hover_effect:!0,hover_background_color:"var(--divider-color, #cccccc)",display_mode:"always",display_conditions:[]}}renderGeneralTab(e,t,i,n){var a;const r=e,s=(null===(a=t.locale)||void 0===a?void 0:a.language)||"en";return"var(--divider-color)"!==r.color&&"var(--divider-color, #cccccc)"!==r.color||(console.log("⚠️ Migrating old separator color from CSS variable to actual color"),n({color:"#cccccc"})),o.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Separator Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,l.kg)("editor.separator.config.title",s,"Separator Configuration")}
          </div>

          <!-- Separator Style -->
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,l.kg)("editor.separator.style.title",s,"Separator Style")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
          >
            ${(0,l.kg)("editor.separator.style.desc",s,"Choose the visual style of the separator line.")}
          </div>
          ${this.renderUcForm(t,{separator_style:r.separator_style},[this.selectField("separator_style",[{value:"line",label:(0,l.kg)("editor.separator.options.solid",s,"Solid Line")},{value:"double_line",label:(0,l.kg)("editor.separator.options.double",s,"Double Line")},{value:"dotted",label:(0,l.kg)("editor.separator.options.dotted",s,"Dotted Line")},{value:"double_dotted",label:(0,l.kg)("editor.separator.options.double_dotted",s,"Double Dotted")},{value:"shadow",label:(0,l.kg)("editor.separator.options.shadow",s,"Shadow")},{value:"blank",label:(0,l.kg)("editor.separator.options.blank",s,"Blank Space")}])],(e=>{e.detail.value.separator_style!==r.separator_style&&(n(e.detail.value),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}

          <!-- Orientation -->
          <div
            class="field-title"
            style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
          >
            ${(0,l.kg)("editor.separator.orientation.title",s,"Orientation")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
          >
            ${(0,l.kg)("editor.separator.orientation.desc",s,"Choose whether the separator runs horizontally or vertically.")}
          </div>
          ${this.renderUcForm(t,{orientation:r.orientation},[this.selectField("orientation",[{value:"horizontal",label:(0,l.kg)("editor.separator.orientation.horizontal",s,"Horizontal")},{value:"vertical",label:(0,l.kg)("editor.separator.orientation.vertical",s,"Vertical")}])],(e=>{e.detail.value.orientation!==r.orientation&&(n(e.detail.value),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
        </div>

        <!-- Appearance Configuration -->
        ${"blank"!==r.separator_style?o.qy`
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
              >
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
                >
                  ${(0,l.kg)("editor.separator.appearance.title",s,"Appearance")}
                </div>

                <!-- Thickness -->
                <div class="field-container" style="margin-bottom: 24px;">
                  <div class="field-title">
                    ${(0,l.kg)("editor.separator.thickness",s,"Thickness (px)")}
                  </div>
                  <div class="field-description">
                    ${(0,l.kg)("editor.separator.thickness_desc",s,"Thickness of the separator line.")}
                  </div>
                  <div
                    class="gap-control-container"
                    style="display: flex; align-items: center; gap: 12px;"
                  >
                    <input
                      type="range"
                      class="gap-slider"
                      min="1"
                      max="20"
                      step="1"
                      .value="${r.thickness||1}"
                      @input=${e=>{const t=e.target,i=parseFloat(t.value);n({thickness:i})}}
                    />
                    <input
                      type="number"
                      class="gap-input"
                      min="1"
                      max="20"
                      step="1"
                      .value="${r.thickness||1}"
                      @input=${e=>{const t=e.target,i=parseFloat(t.value);isNaN(i)||n({thickness:i})}}
                      @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseFloat(t.value)||1,o="ArrowUp"===e.key?1:-1,a=Math.max(1,Math.min(20,i+o));n({thickness:a})}}}
                    />
                    <button
                      class="reset-btn"
                      @click=${()=>n({thickness:1})}
                      title=${(0,l.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","1")}
                    >
                      <ha-icon icon="mdi:refresh"></ha-icon>
                    </button>
                  </div>
                </div>

                <!-- Width/Height based on orientation -->
                ${"shadow"===r.separator_style||"blank"===r.separator_style?o.qy``:o.qy`
                      <div class="field-container" style="margin-bottom: 24px;">
                        <div class="field-title">
                          ${"vertical"===r.orientation?(0,l.kg)("editor.separator.height",s,"Height (px)"):(0,l.kg)("editor.separator.width",s,"Width (%)")}
                        </div>
                        <div class="field-description">
                          ${"vertical"===r.orientation?(0,l.kg)("editor.separator.height_desc",s,"Height of the separator in pixels."):(0,l.kg)("editor.separator.width_desc",s,"Width of the separator as percentage of container.")}
                        </div>
                        <div
                          class="gap-control-container"
                          style="display: flex; align-items: center; gap: 12px;"
                        >
                          ${"vertical"===r.orientation?o.qy`
                                <input
                                  type="range"
                                  class="gap-slider"
                                  min="50"
                                  max="1000"
                                  step="10"
                                  .value="${r.height_px||300}"
                                  @input=${e=>{const t=e.target,i=parseFloat(t.value);n({height_px:i})}}
                                />
                                <input
                                  type="number"
                                  class="gap-input"
                                  min="50"
                                  max="1000"
                                  step="10"
                                  .value="${r.height_px||300}"
                                  @input=${e=>{const t=e.target,i=parseFloat(t.value);isNaN(i)||n({height_px:i})}}
                                  @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseFloat(t.value)||300,o="ArrowUp"===e.key?10:-10,a=Math.max(50,Math.min(1e3,i+o));n({height_px:a})}}}
                                />
                                <button
                                  class="reset-btn"
                                  @click=${()=>n({height_px:300})}
                                  title=${(0,l.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","300")}
                                >
                                  <ha-icon icon="mdi:refresh"></ha-icon>
                                </button>
                              `:o.qy`
                                <input
                                  type="range"
                                  class="gap-slider"
                                  min="10"
                                  max="100"
                                  step="5"
                                  .value="${r.width_percent||100}"
                                  @input=${e=>{const t=e.target,i=parseFloat(t.value);n({width_percent:i})}}
                                />
                                <input
                                  type="number"
                                  class="gap-input"
                                  min="10"
                                  max="100"
                                  step="5"
                                  .value="${r.width_percent||100}"
                                  @input=${e=>{const t=e.target,i=parseFloat(t.value);isNaN(i)||n({width_percent:i})}}
                                  @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseFloat(t.value)||100,o="ArrowUp"===e.key?5:-5,a=Math.max(10,Math.min(100,i+o));n({width_percent:a})}}}
                                />
                                <button
                                  class="reset-btn"
                                  @click=${()=>n({width_percent:100})}
                                  title=${(0,l.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","100")}
                                >
                                  <ha-icon icon="mdi:refresh"></ha-icon>
                                </button>
                              `}
                        </div>
                      </div>
                    `}

                <!-- Color -->
                <div class="field-group">
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    ${(0,l.kg)("editor.separator.color.title",s,"Color")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                  >
                    ${(0,l.kg)("editor.separator.color.desc",s,"Color of the separator line.")}
                  </div>
                  <ultra-color-picker
                    .label=${""}
                    .value=${r.color||"#cccccc"}
                    .defaultValue=${"#cccccc"}
                    .hass=${t}
                    @value-changed=${e=>n({color:e.detail.value})}
                  ></ultra-color-picker>
                </div>
              </div>
            `:""}
        ${"blank"!==r.separator_style?o.qy` <!-- Text in Separator -->
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
              >
                <div
                  style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
                >
                  <div
                    class="section-title"
                    style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px; margin-bottom: 0;"
                  >
                    ${(0,l.kg)("editor.separator.show_title",s,"Show Title")}
                  </div>
                  <ha-switch
                    .checked=${r.show_title||!1}
                    @change=${e=>{const t=e.target;n({show_title:t.checked})}}
                  ></ha-switch>
                </div>
                <div
                  class="field-description"
                  style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
                >
                  ${(0,l.kg)("editor.separator.show_title_desc",s,"Add text in the middle of the separator line (e.g., ------ Text ------)")}
                </div>

                ${r.show_title?o.qy`
                      <!-- Text Content -->
                      <div class="field-group" style="margin-bottom: 16px;">
                        <div
                          class="field-title"
                          style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                        >
                          ${(0,l.kg)("editor.separator.text_content.title",s,"Text Content")}
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                        >
                          ${(0,l.kg)("editor.separator.text_content.desc",s,"Text to display in the middle of the separator.")}
                        </div>
                        <ha-form
                          .hass=${t}
                          .data=${{title:r.title||""}}
                          .schema=${[{name:"title",selector:{text:{}},label:""}]}
                          @value-changed=${e=>n({title:e.detail.value.title})}
                        ></ha-form>
                      </div>

                      <!-- Font Size -->
                      <div class="field-container" style="margin-bottom: 24px;">
                        <div class="field-title">
                          ${(0,l.kg)("editor.separator.font_size",s,"Font Size")}
                        </div>
                        <div class="field-description">
                          ${(0,l.kg)("editor.separator.font_size_desc",s,"Size of the text in pixels.")}
                        </div>
                        <div
                          class="gap-control-container"
                          style="display: flex; align-items: center; gap: 12px;"
                        >
                          <input
                            type="range"
                            class="gap-slider"
                            min="8"
                            max="48"
                            step="1"
                            .value="${r.title_size||14}"
                            @input=${e=>{const t=e.target,i=parseFloat(t.value);n({title_size:i})}}
                          />
                          <input
                            type="number"
                            class="gap-input"
                            min="8"
                            max="48"
                            step="1"
                            .value="${r.title_size||14}"
                            @input=${e=>{const t=e.target,i=parseFloat(t.value);isNaN(i)||n({title_size:i})}}
                            @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseFloat(t.value)||14,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(48,i+o));n({title_size:a})}}}
                          />
                          <button
                            class="reset-btn"
                            @click=${()=>n({title_size:14})}
                            title=${(0,l.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","14")}
                          >
                            <ha-icon icon="mdi:refresh"></ha-icon>
                          </button>
                        </div>
                      </div>

                      <!-- Text Color -->
                      <div class="field-group" style="margin-bottom: 16px;">
                        <div
                          class="field-title"
                          style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                        >
                          ${(0,l.kg)("editor.separator.text_color.title",s,"Text Color")}
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                        >
                          ${(0,l.kg)("editor.separator.text_color.desc",s,"Color of the separator text.")}
                        </div>
                        <ultra-color-picker
                          .label=${""}
                          .value=${r.title_color||""}
                          .defaultValue=${"var(--secondary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({title_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>

                      <!-- Text Formatting -->
                      <div class="field-group">
                        <div
                          class="field-title"
                          style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                        >
                          ${(0,l.kg)("editor.separator.text_format.title",s,"Text Formatting")}
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                        >
                          ${(0,l.kg)("editor.separator.text_format.desc",s,"Apply formatting styles to the separator text.")}
                        </div>
                        <div
                          class="format-buttons"
                          style="display: flex; gap: 8px; flex-wrap: wrap;"
                        >
                          <button
                            class="format-btn ${r.title_bold?"active":""}"
                            @click=${()=>n({title_bold:!r.title_bold})}
                            style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${r.title_bold?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${r.title_bold?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.bold",s,"Bold")}
                          >
                            <ha-icon icon="mdi:format-bold"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${r.title_italic?"active":""}"
                            @click=${()=>n({title_italic:!r.title_italic})}
                            style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${r.title_italic?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${r.title_italic?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.italic",s,"Italic")}
                          >
                            <ha-icon icon="mdi:format-italic"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${r.title_underline?"active":""}"
                            @click=${()=>n({title_underline:!r.title_underline})}
                            style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${r.title_underline?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${r.title_underline?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.underline",s,"Underline")}
                          >
                            <ha-icon icon="mdi:format-underline"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${r.title_uppercase?"active":""}"
                            @click=${()=>n({title_uppercase:!r.title_uppercase})}
                            style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${r.title_uppercase?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${r.title_uppercase?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.uppercase",s,"Uppercase")}
                          >
                            <ha-icon icon="mdi:format-letter-case-upper"></ha-icon>
                          </button>
                          <button
                            class="format-btn ${r.title_strikethrough?"active":""}"
                            @click=${()=>n({title_strikethrough:!r.title_strikethrough})}
                            style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${r.title_strikethrough?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${r.title_strikethrough?"white":"var(--primary-text-color)"};"
                            title=${(0,l.kg)("editor.separator.text_format.strikethrough",s,"Strikethrough")}
                          >
                            <ha-icon icon="mdi:format-strikethrough"></ha-icon>
                          </button>
                        </div>
                      </div>
                    `:o.qy`
                      <div
                        style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                      >
                        ${(0,l.kg)("editor.separator.show_title_toggle.enable_toggle_desc",s,"Enable the toggle above to configure title settings")}
                      </div>
                    `}
              </div>`:o.qy`
              <!-- Spacer (Blank) Thickness Control -->
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
              >
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
                >
                  ${(0,l.kg)("editor.separator.spacer.title",s,"Spacer Height")}
                </div>
                <div class="field-container" style="margin-bottom: 24px;">
                  <div class="field-title">
                    ${(0,l.kg)("editor.separator.height",s,"Height (px)")}
                  </div>
                  <div class="field-description">
                    ${(0,l.kg)("editor.separator.height_desc",s,"Controls the visual gap for Blank Space.")}
                  </div>
                  <div
                    class="gap-control-container"
                    style="display: flex; align-items: center; gap: 12px;"
                  >
                    <input
                      type="range"
                      class="gap-slider"
                      min="1"
                      max="300"
                      step="1"
                      .value="${r.thickness||1}"
                      @input=${e=>{const t=e.target,i=parseInt(t.value);n({thickness:i})}}
                    />
                    <input
                      type="number"
                      class="gap-input"
                      min="1"
                      max="300"
                      step="1"
                      .value="${r.thickness||1}"
                      @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({thickness:i})}}
                    />
                    <button
                      class="reset-btn"
                      @click=${()=>n({thickness:1})}
                      title=${(0,l.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","1")}
                    >
                      <ha-icon icon="mdi:refresh"></ha-icon>
                    </button>
                  </div>
                </div>
              </div>
            `}
      </div>
    `}renderActionsTab(e,t,i,o){return a.A.render(e,t,(e=>o(e)))}renderPreview(e,t,i,n){const a=e,r=a,l=a.design||{},d={padding:l.padding_top||l.padding_bottom||l.padding_left||l.padding_right||r.padding_top||r.padding_bottom||r.padding_left||r.padding_right?`${this.addPixelUnit(l.padding_top||r.padding_top)||"0px"} ${this.addPixelUnit(l.padding_right||r.padding_right)||"0px"} ${this.addPixelUnit(l.padding_bottom||r.padding_bottom)||"0px"} ${this.addPixelUnit(l.padding_left||r.padding_left)||"0px"}`:"0",margin:l.margin_top||l.margin_bottom||l.margin_left||l.margin_right||r.margin_top||r.margin_bottom||r.margin_left||r.margin_right?`${l.margin_top||r.margin_top||"8px"} ${l.margin_right||r.margin_right||"0px"} ${l.margin_bottom||r.margin_bottom||"8px"} ${l.margin_left||r.margin_left||"0px"}`:"8px 0",background:l.background_color||r.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},r),l),t),backgroundSize:l.background_size||r.background_size||"cover",backgroundPosition:l.background_position||r.background_position||"center",backgroundRepeat:l.background_repeat||r.background_repeat||"no-repeat",border:(l.border_style||r.border_style)&&"none"!==(l.border_style||r.border_style)?`${this.addPixelUnit(l.border_width||r.border_width)||"1px"} ${l.border_style||r.border_style} ${l.border_color||r.border_color||"var(--divider-color, #cccccc)"}`:"none",borderRadius:this.addPixelUnit(l.border_radius||r.border_radius)||"0",position:l.position||r.position||"relative",top:l.top||r.top||"auto",bottom:l.bottom||r.bottom||"auto",left:l.left||r.left||"auto",right:l.right||r.right||"auto",zIndex:l.z_index||r.z_index||"auto",width:l.width||r.width||"100%",height:l.height||r.height||("vertical"===a.orientation?`${a.height_px||300}px`:"auto"),maxWidth:l.max_width||r.max_width||"100%",maxHeight:l.max_height||r.max_height||"none",minWidth:l.min_width||r.min_width||"none",minHeight:l.min_height||r.min_height||("vertical"===a.orientation?`${Math.min(a.height_px||300,50)}px`:"10px"),overflow:l.overflow||r.overflow||"visible",clipPath:l.clip_path||r.clip_path||"none",backdropFilter:l.backdrop_filter||r.backdrop_filter||"none",boxShadow:l.box_shadow_h&&l.box_shadow_v?`${l.box_shadow_h||"0"} ${l.box_shadow_v||"0"} ${l.box_shadow_blur||"0"} ${l.box_shadow_spread||"0"} ${l.box_shadow_color||"rgba(0,0,0,0.1)"}`:r.box_shadow_h&&r.box_shadow_v?`${r.box_shadow_h||"0"} ${r.box_shadow_v||"0"} ${r.box_shadow_blur||"0"} ${r.box_shadow_spread||"0"} ${r.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};if("blank"===a.separator_style){const e="vertical"===a.orientation;return o.qy`
        <div class="separator-module-container" style="${this.styleObjectToCss(d)}">
          <div
            class="separator-preview blank-separator"
            style="${e?`width: ${a.thickness||1}px; height: ${a.height_px||300}px; display: block; margin: 0 auto;`:`height: ${a.thickness||1}px; width: 100%;`}"
          ></div>
        </div>
      `}const c=this.getSeparatorStyles(a);let p=null,u=null,h=!1,g=0,m=0;return o.qy`
      <div
        class="separator-module-container"
        style="${this.styleObjectToCss(d)}; cursor: ${a.tap_action&&"nothing"!==a.tap_action.action||a.hold_action&&"nothing"!==a.hold_action.action||a.double_tap_action&&"nothing"!==a.double_tap_action.action?"pointer":"default"};"
        @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),h=!1,u=setTimeout((()=>{h=!0,a.hold_action&&"nothing"!==a.hold_action.action&&s.K.handleAction(a.hold_action,t,e.target,i)}),500)}}
        @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),u&&(clearTimeout(u),u=null),h)return void(h=!1);const o=Date.now();o-m<300&&1===g?(p&&(clearTimeout(p),p=null),g=0,a.double_tap_action&&"nothing"!==a.double_tap_action.action&&s.K.handleAction(a.double_tap_action,t,e.target,i)):(g=1,m=o,p=setTimeout((()=>{g=0,a.tap_action&&"nothing"===a.tap_action.action||s.K.handleAction(a.tap_action||{action:"default"},t,e.target,i,a.entity)}),300))}}
      >
        <div
          class="separator-preview ${"vertical"===a.orientation?"vertical":""}"
          style="width: 100%; text-align: center;"
        >
          ${a.show_title&&a.title?o.qy`
                <div
                  class="separator-with-title ${"vertical"===a.orientation?"vertical":""}"
                  style="${this.getTitleContainerStyles(a.design||{},"vertical"===a.orientation)}"
                >
                  <div
                    class="separator-line-left"
                    style="${this.getSeparatorLineStyles(a,"left")}"
                  ></div>
                  <div
                    class="separator-title ${"vertical"===a.orientation?"vertical":""}"
                    style="${this.getTitleStyles(a,a.design||{})}"
                  >
                    ${a.title}
                  </div>
                  <div
                    class="separator-line-right"
                    style="${this.getSeparatorLineStyles(a,"right")}"
                  ></div>
                </div>
              `:o.qy` <div class="separator-line" style="${c}"></div> `}
        </div>
      </div>
    `}renderLogicTab(e,t,i,o){return r.X.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors],o="vertical"===t.orientation;if("blank"!==t.separator_style)t.thickness&&(t.thickness<1||t.thickness>50)&&i.push("Thickness must be between 1 and 50 pixels");else if(t.thickness&&(t.thickness<1||t.thickness>300)){const e=o?"width":"height";i.push(`Spacer ${e} must be between 1 and 300 pixels`)}return o?t.height_px&&(t.height_px<50||t.height_px>1e3)&&i.push("Height must be between 50 and 1000 pixels"):t.width_percent&&(t.width_percent<1||t.width_percent>100)&&i.push("Width must be between 1 and 100 percent"),!t.show_title||t.title&&""!==t.title.trim()||i.push("Title text is required when show title is enabled"),o&&t.show_title&&t.title&&t.title.length>20&&i.push("Title text should be shorter for vertical separators (max 20 characters recommended)"),{valid:0===i.length,errors:i}}getStyles(){return"\n      .separator-preview {\n        min-height: 24px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n      }\n      \n      .separator-preview.vertical {\n        min-width: 1px;\n        min-height: 50px;\n        height: 100%;\n        align-items: stretch;\n        justify-content: center;\n      }\n      \n      .blank-separator {\n        background: transparent;\n        display: block;\n        min-height: 0;\n      }\n      \n      .separator-with-title {\n        position: relative;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n        height: 100%;\n      }\n      \n      .separator-with-title.vertical {\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        width: auto;\n      }\n      \n      .separator-title {\n        margin: 0;\n        line-height: 1.2;\n        background: var(--card-background-color);\n        padding: 0 8px;\n        position: relative;\n        z-index: 1;\n        white-space: nowrap;\n      }\n      \n      .separator-title.vertical {\n        writing-mode: vertical-rl;\n        text-orientation: mixed;\n        padding: 8px 0;\n        white-space: normal;\n      }\n      \n      .separator-line,\n      .separator-line-left,\n      .separator-line-right {\n        display: block;\n      }\n      \n      .separator-line-left,\n      .separator-line-right {\n        flex: 1;\n      }\n      \n      .separator-line {\n        min-height: 1px;\n        min-width: 1px;\n      }\n      \n      \n      /* Format button styles */\n      .format-buttons {\n        display: flex;\n        gap: 8px;\n        flex-wrap: wrap;\n      }\n      \n      .format-btn {\n        padding: 8px;\n        border: 1px solid var(--divider-color, #cccccc);\n        border-radius: 4px;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        min-width: 36px;\n        min-height: 36px;\n      }\n      \n      .format-btn:hover {\n        transform: translateY(-1px);\n        box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n      }\n      \n      .format-btn ha-icon {\n        font-size: 16px;\n      }\n      \n      /* Settings section styling */\n      .settings-section {\n        background: var(--secondary-background-color);\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 32px;\n      }\n      \n      .section-title {\n        font-size: 18px;\n        font-weight: 700;\n        text-transform: uppercase;\n        color: var(--primary-color);\n        margin-bottom: 16px;\n        padding-bottom: 0;\n        border-bottom: none;\n        letter-spacing: 0.5px;\n      }\n      \n      .field-title {\n        font-size: 16px;\n        font-weight: 600;\n        margin-bottom: 4px;\n      }\n      \n      .field-description {\n        font-size: 13px;\n        font-weight: 400;\n        margin-bottom: 12px;\n        color: var(--secondary-text-color);\n      }\n      \n      .field-group {\n        margin-bottom: 16px;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color, #cccccc);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color, #cccccc);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color, #cccccc);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    "}getSeparatorStyles(e){const t="vertical"===e.orientation,i={},o=e=>e&&"var(--divider-color)"!==e&&"var(--divider-color, #cccccc)"!==e?e:"#cccccc";switch(t?(i.width=`${e.thickness||1}px`,i.height=`${e.height_px||300}px`,i.margin="0 auto",i.display="block"):(i.width=`${e.width_percent||100}%`,i.height=`${e.thickness||1}px`,i.margin="0 auto"),e.separator_style||"line"){case"line":i.backgroundColor=o(e.color);break;case"double_line":t?(i.borderLeft=`${e.thickness||1}px solid ${o(e.color)}`,i.borderRight=`${e.thickness||1}px solid ${o(e.color)}`,i.width=3*(e.thickness||1)+"px"):(i.borderTop=`${e.thickness||1}px solid ${o(e.color)}`,i.borderBottom=`${e.thickness||1}px solid ${o(e.color)}`,i.height=3*(e.thickness||1)+"px");break;case"dotted":t?(i.borderLeft=`${e.thickness||1}px dotted ${o(e.color)}`,i.width="0"):(i.borderTop=`${e.thickness||1}px dotted ${o(e.color)}`,i.height="0");break;case"double_dotted":t?(i.borderLeft=`${e.thickness||1}px dotted ${o(e.color)}`,i.borderRight=`${e.thickness||1}px dotted ${o(e.color)}`,i.width=3*(e.thickness||1)+"px"):(i.borderTop=`${e.thickness||1}px dotted ${o(e.color)}`,i.borderBottom=`${e.thickness||1}px dotted ${o(e.color)}`,i.height=3*(e.thickness||1)+"px");break;case"shadow":{const n=e.thickness||1,a=this._colorWithAlpha(o(e.color)||"#000000",.35);if(t){const e=Math.max(8*n,14);i.height="calc(100% + (var(--ha-card-padding, 16px) * 2))",i.margin="calc(var(--ha-card-padding, 16px) * -1) 0",i.width=`${e}px`,i.background=`linear-gradient(to right, ${a} 0%, rgba(0,0,0,0) 100%)`}else{const e=Math.max(8*n,14);i.width="calc(100% + (var(--ha-card-padding, 16px) * 2))",i.margin="0 calc(var(--ha-card-padding, 16px) * -1)",i.height=`${e}px`,i.background=`linear-gradient(to bottom, ${a} 0%, rgba(0,0,0,0) 100%)`}break}}return Object.entries(i).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}getSeparatorLineStyles(e,t){const i="vertical"===e.orientation,o={},n=e=>e&&"var(--divider-color)"!==e&&"var(--divider-color, #cccccc)"!==e?e:"#cccccc";i?(o.flex="1",o.width=`${e.thickness||1}px`,o.margin="left"===t?"0 0 8px 0":"8px 0 0 0"):(o.flex="1",o.height=`${e.thickness||1}px`,o.margin="left"===t?"0 8px 0 0":"0 0 0 8px");const a=(e.design||{}).text_align;switch(a&&"inherit"!==a&&(o.flex=i?"top"===a?"left"===t?"0 0 12px":"1":"bottom"===a&&"right"===t?"0 0 12px":"1":"left"===a?"left"===t?"0 0 12px":"1":"right"===a&&"right"===t?"0 0 12px":"1"),e.separator_style||"line"){case"line":o.backgroundColor=n(e.color);break;case"double_line":i?(o.borderLeft=`${e.thickness||1}px solid ${n(e.color)}`,o.borderRight=`${e.thickness||1}px solid ${n(e.color)}`,o.width=3*(e.thickness||1)+"px"):(o.borderTop=`${e.thickness||1}px solid ${n(e.color)}`,o.borderBottom=`${e.thickness||1}px solid ${n(e.color)}`,o.height=3*(e.thickness||1)+"px");break;case"dotted":i?(o.borderLeft=`${e.thickness||1}px dotted ${n(e.color)}`,o.width="0"):(o.borderTop=`${e.thickness||1}px dotted ${n(e.color)}`,o.height="0");break;case"double_dotted":i?(o.borderLeft=`${e.thickness||1}px dotted ${n(e.color)}`,o.borderRight=`${e.thickness||1}px dotted ${n(e.color)}`,o.width=3*(e.thickness||1)+"px"):(o.borderTop=`${e.thickness||1}px dotted ${n(e.color)}`,o.borderBottom=`${e.thickness||1}px dotted ${n(e.color)}`,o.height=3*(e.thickness||1)+"px");break;case"shadow":{const t=e.thickness||1,a=this._colorWithAlpha(n(e.color)||"#000000",.35),r=this._colorWithAlpha(n(e.color)||"#000000",.22),s=this._colorWithAlpha(n(e.color)||"#000000",.25);if(i){const e=Math.max(8*t,14);o.width=`${e}px`,o.margin="0",o.background=`\n            linear-gradient(to right, ${s}, rgba(0,0,0,0) 66%) left/2px 100% no-repeat,\n            radial-gradient(ellipse at center, ${a} 0%, ${r} 55%, rgba(0,0,0,0) 80%) right/100% 120% no-repeat\n          `}else{const e=Math.max(8*t,14);o.height=`${e}px`,o.margin="0",o.background=`\n            linear-gradient(to bottom, ${s}, rgba(0,0,0,0) 66%) top/100% 2px no-repeat,\n            radial-gradient(ellipse at center, ${a} 0%, ${r} 55%, rgba(0,0,0,0) 80%) bottom/120% 100% no-repeat\n          `}break}}return Object.entries(o).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}getTitleContainerStyles(e={},t=!1){const i=(null==e?void 0:e.text_align)&&"inherit"!==e.text_align?e.text_align:"center",o={position:"relative",display:"flex",width:"100%",height:"100%"};if(t){o.flexDirection="column",o.alignItems="center";const e="top"===i?"flex-start":"bottom"===i?"flex-end":"center";o.justifyContent=e}else{o.flexDirection="row",o.alignItems="center";const e="left"===i?"flex-start":"right"===i?"flex-end":"center";o.justifyContent=e}return Object.entries(o).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}getTitleStyles(e,t={}){const i="vertical"===e.orientation,o={fontSize:void 0!==t.font_size&&null!==t.font_size?"number"==typeof t.font_size?`${t.font_size}px`:String(t.font_size):e.title_size?`${e.title_size}px`:"clamp(12px, 3vw, 14px)",color:t.color||e.title_color||"var(--secondary-text-color)",fontWeight:t.font_weight||(e.title_bold?"bold":"normal"),fontStyle:t.font_style||(e.title_italic?"italic":"normal"),textTransform:t.text_transform||(e.title_uppercase?"uppercase":"none"),letterSpacing:t.letter_spacing||void 0,lineHeight:t.line_height||void 0,textAlign:t.text_align||void 0,margin:"0",padding:i?"8px 0":"0 8px",backgroundColor:"transparent",position:"relative",zIndex:"1",writingMode:i?"vertical-rl":"horizontal-tb",textOrientation:"mixed"},n=[];return e.title_strikethrough&&n.push("line-through"),e.title_underline&&n.push("underline"),o.textDecoration=n.length>0?n.join(" "):"none",t.text_shadow_h&&t.text_shadow_v&&(o.textShadow=`${t.text_shadow_h||"0"} ${t.text_shadow_v||"0"} ${t.text_shadow_blur||"0"} ${t.text_shadow_color||"rgba(0,0,0,0.25)"}`),Object.entries(o).filter((([e,t])=>null!=t&&""!==t)).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}_colorWithAlpha(e,t){if(!e)return`rgba(0,0,0,${t})`;if(e.startsWith("rgba(")){const i=e.replace("rgba(","").replace(")","").split(",").map((e=>e.trim())),[o,n,a]=i.map(((e,t)=>t<3?Number(e):e));return`rgba(${o||0}, ${n||0}, ${a||0}, ${t})`}if(e.startsWith("rgb(")){const i=e.replace("rgb(","").replace(")","").split(",").map((e=>Number(e.trim()))),[o,n,a]=i;return`rgba(${o||0}, ${n||0}, ${a||0}, ${t})`}if(e.startsWith("#")){const i=e.replace("#",""),o=parseInt(3===i.length?i.split("").map((e=>e+e)).join(""):i,16);return`rgba(${o>>16&255}, ${o>>8&255}, ${255&o}, ${t})`}return`rgba(0,0,0,${t})`}getBackgroundImageCSS(e,t){var i,o;if(!e.background_image_type||"none"===e.background_image_type)return"none";switch(e.background_image_type){case"upload":case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const n=t.states[e.background_image_entity];let a="";if((null===(i=n.attributes)||void 0===i?void 0:i.entity_picture)?a=n.attributes.entity_picture:(null===(o=n.attributes)||void 0===o?void 0:o.image)?a=n.attributes.image:n.state&&"string"==typeof n.state&&(n.state.startsWith("/")||n.state.startsWith("http"))&&(a=n.state),a)return a.startsWith("/local/")||a.startsWith("/media/")||a.startsWith("/"),`url("${a}")`}}return"none"}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}}},456:(e,t,i)=>{i.d(t,{kg:()=>I});const o=JSON.parse('{"editor":{"tabs":{"layout":"Builder","settings":"Settings","about":"About","pro":"Pro"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behavior."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"fields":{"card_background_color":"Card Background Color","card_background_color_desc":"The background color of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","card_shadow_enabled":"Custom Drop Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"common":{"left":"Left","center":"Center","right":"Right","top":"Top","bottom":"Bottom","none":"None","state":"State","attribute":"Attribute","attribute_name":"Attribute Name","entity":"Entity","space_between":"Space Between","space_around":"Space Around","justify":"Justify","stretch":"Stretch","baseline":"Baseline"},"horizontal":{"layout":{"title":"Layout Configuration","desc":"Configure how elements are arranged horizontally within the container."},"alignment":{"horizontal":"Horizontal Alignment","horizontal_desc":"Choose how elements are aligned horizontally within the container.","vertical":"Vertical Alignment","vertical_desc":"Choose how elements are aligned vertically within the container."},"wrapping":{"title":"Allow Wrapping","desc":"Allow elements to wrap to the next line when they exceed the container width."},"gap":{"title":"Gap Configuration","between_items":"Gap Between Items","desc":"Set the spacing between horizontal elements (in rem units). Use negative values to overlap elements."},"empty":{"no_modules":"No modules added yet","add_modules":"Add modules in the layout builder to see them here"}},"vertical":{"layout":{"title":"Layout Configuration","desc":"Configure how elements are arranged vertically within the container."},"alignment":{"vertical":"Vertical Alignment","vertical_desc":"Choose how elements are aligned vertically within the container."},"gap":{"title":"Gap Configuration","between_items":"Gap Between Items","desc":"Set the spacing between vertical elements (in rem units). Use negative values to overlap elements."},"empty":{"no_modules":"No modules added yet","add_modules":"Add modules in the layout builder to see them here"}},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","child_module_settings_title":"Child Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","row_settings":"Row Settings","column_settings":"Column Settings","row_background_color":"Row Background Color","column_gap":"Column Gap (px)","vertical_alignment":"Vertical Alignment","horizontal_alignment":"Horizontal Alignment","column_preview":"Column Preview","modules_count":"{count} modules","alignment_top":"Top","alignment_center":"Center","alignment_bottom":"Bottom","alignment_stretch":"Stretch","alignment_left":"Left","alignment_right":"Right"},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started.","condition_types":{"entity_state":"Entity State","entity_attribute":"Entity Attribute","time":"Time Range","template":"Template"},"condition_fields":{"entity":"Entity","operator":"Operator","value":"Value","attribute":"Attribute","time_from":"From","time_to":"To","template":"Template"},"condition_header":"Condition","custom_name":"Custom Name","custom_name_desc":"Optional: Give this condition a custom name for easier identification","condition_type":"Condition Type"},"hover_effects":{"title":"Hover Effects","description":"Configure visual effects that appear when hovering over this module, row, or column.","effect":"Hover Effect","effect_desc":"Select the visual effect to apply when hovering","effects":{"none":"None","highlight":"Highlight","outline":"Outline","grow":"Grow","shrink":"Shrink","pulse":"Pulse","bounce":"Bounce","float":"Float","glow":"Glow","shadow":"Shadow","rotate":"Rotate","skew":"Skew","wobble":"Wobble","buzz":"Buzz","fade":"Fade"}},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"Check Out Our Github","join_discord":"Join Our Discord","support_title":"Support Ultra Card","support_desc":"Your generous tips fuel the development of amazing features for this card! Without support from users like you, continued innovation wouldn\'t be possible.","leave_tip":"LEAVE A TIP (PAYPAL)","version":"Version"},"actions":{"title":"Link Configuration","description":"Configure what happens when users interact with this element. Choose different actions for tap, hold, and double-tap gestures.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behavior","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behavior","hold_behavior_desc":"Action to perform when the element is pressed and held.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","double_tap_behavior":"Double Tap Behavior","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked.","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)","icon_section":{"title":"Icon Configuration"},"inactive_icon":"Inactive Icon","inactive_icon_desc":"Icon to show when inactive","inactive_icon_config":"Inactive Icon Configuration","inactive_icon_config_desc":"Configure inactive icon settings","active_icon":"Active Icon","active_icon_desc":"Icon to show when active","icon_color_inactive":"Color when inactive","icon_color_active":"Color when active","background_shape_inactive":"Background shape when inactive","background_shape_active":"Background shape when active","background_color_inactive":"Background color when inactive","background_color_active":"Background color when active","icon_size_inactive":"Icon size when inactive","icon_size_active":"Icon size when active","inactive_icon_color":"Inactive icon color","active_icon_color":"Active icon color","inactive_icon_background":"Inactive icon background","active_icon_background":"Active icon background","inactive_icon_background_color":"Inactive icon background color","active_icon_background_color":"Active icon background color","name_section":{"title":"Name Configuration"},"inactive_name":"Inactive Name","inactive_name_desc":"Custom name when inactive","inactive_name_config":"Inactive Name Configuration","inactive_name_config_desc":"Configure inactive name settings","active_name":"Active Name","active_name_desc":"Custom name when active","custom_inactive_name":"Custom Inactive Name","custom_inactive_name_desc":"Override entity name when inactive (leave empty to use entity name)","custom_active_name":"Custom Active Name","custom_active_name_desc":"Override entity name when active (leave empty to use entity name)","name_color_inactive":"Name color when inactive","name_color_active":"Name color when active","name_size_inactive":"Name text size when inactive","name_size_active":"Name text size when active","inactive_name_color":"Inactive name color","active_name_color":"Active name color","state_section":{"title":"State Configuration"},"inactive_state_color":"Inactive state color","active_state_color":"Active state color","inactive_state_text":"Inactive state text","active_state_text":"Active state text","inactive_state_config":"Inactive State Configuration","inactive_state_config_desc":"Configure inactive state settings","custom_inactive_state":"Custom Inactive State","custom_inactive_state_desc":"Custom text when inactive (leave empty to use actual state)","custom_active_state":"Custom Active State","custom_active_state_desc":"Custom text when active (leave empty to use actual state)","state_color_inactive":"State color when inactive","state_color_active":"State color when active","state_size_inactive":"State text size when inactive","state_size_active":"State text size when active","background_section":{"title":"Inactive Background","desc":"Configure inactive background settings"},"template_section":{"title":"Advanced Template Mode","desc":"Use Jinja2 templates for advanced icon control. Templates can control visibility (true/false to show/hide icons) and customize state text. Return custom text for Active State, return actual entity state for Inactive State."},"template_mode":"Advanced Template Mode","template":"Template","animation_section":{"title":"Icon Animation","desc":"Configure animations for active and inactive states"},"active_animation":"Active Animation","active_animation_desc":"Animation when icon is active","inactive_animation":"Inactive Animation","inactive_animation_desc":"Animation when icon is inactive","animation_none":"None","animation_pulse":"Pulse","animation_spin":"Spin","animation_bounce":"Bounce","animation_flash":"Flash","animation_shake":"Shake","animation_vibrate":"Vibrate","animation_rotate_left":"Rotate Left","animation_rotate_right":"Rotate Right","animation_fade":"Fade","animation_scale":"Scale","animation_tada":"Tada"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"markdown":{"content":{"title":"Markdown Content","label":"Content","desc":"Enter your markdown content with full formatting support"},"features":{"title":"Markdown Features"},"enable_html":"Enable HTML","enable_html_desc":"Allow HTML tags in markdown content","enable_tables":"Enable Tables","enable_tables_desc":"Support for markdown table syntax","code_highlighting":"Code Highlighting","code_highlighting_desc":"Syntax highlighting for code blocks"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}","attr_config":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings","attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")"},"diff_config":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings","current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)"},"template_config":{"title":"Template Configuration","desc":"Configure template settings","percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"entity":{"title":"Bar Percentage Entity","desc_present":"The entity that provides the percentage value for the bar.","desc_empty":"Select an entity that provides a percentage value (0-100). Battery sensors are ideal for bars.","no_entity_warning":"No entity selected - Please choose a sensor with values between 0-100"},"limit_entity":{"title":"Limit Value Entity (Optional)","desc":"Optional: Add a vertical indicator line on the bar (e.g. charge limit for EV battery)."},"appearance":{"title":"Bar Appearance","direction":"Fill Direction","direction_desc":"Choose which direction the bar fills from as the value increases.","left_to_right":"Left to Right","right_to_left":"Right to Left","height":"Bar Height","height_desc":"Adjust the thickness of the progress bar in pixels.","border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the bar.","style":"Bar Style","style_desc":"Choose the visual style of the progress bar.","style_flat":"Flat (Default)","style_glossy":"Glossy","style_embossed":"Embossed","style_inset":"Inset","style_gradient":"Gradient Overlay","style_neon":"Neon Glow","style_outline":"Outline","style_glass":"Glass","style_metallic":"Metallic","style_neumorphic":"Neumorphic","style_dashed":"Dashed","style_dots":"Dots","width":"Bar Width","width_desc":"Set the bar width as percentage of container.","alignment":"Bar Alignment","alignment_desc":"Choose how to align the bar when it\'s less than 100% width."},"labels":{"alignment":"Label Alignment","alignment_desc":"Control how left and right labels are positioned."},"percentage":{"title":"Percentage Text Display","desc":"Control the visibility and appearance of percentage values shown directly on the bar. These numbers provide a clear visual indicator of the current level.","text_size":"Text Size","text_size_desc":"Adjust the size of percentage text shown on the bar.","text_alignment":"Percentage Text Alignment"},"text_display":{"title":"Text Display","desc":"Control the visibility and appearance of text values shown directly on the bar. For difference and template modes, you can choose to display raw entity values instead of percentages.","show_value":"Show Value Instead of Percentage","show_value_desc":"When enabled, shows the actual entity value instead of percentage. Useful for displaying raw sensor values like \\"45 kWh\\" instead of \\"75%\\".","text_size":"Text Size","text_size_desc":"Adjust the size of the text displayed on the bar.","text_alignment":"Text Alignment"},"left":{"title":"Left Side","desc":"Configure the title and entity value shown on the left side of the bar. This is useful for displaying labels like \'Range\' or \'Battery\' alongside their values.","title_size":"Title Size","value_size":"Value Size","template_mode":"Template Mode","template_desc":"Use a template to format the displayed value. Templates use Home Assistant\'s Jinja2 syntax.","value_template":"Value Template","value_template_desc":"Template to format the left side value using Jinja2 syntax","enable_toggle":"Enable the toggle above to configure left side settings"},"right":{"title":"Right Side","desc":"Configure the title and entity value shown on the right side of the bar. This is ideal for complementary information like \'Time to Full\' or secondary measurements.","title_size":"Title Size","value_size":"Value Size","template_mode":"Template Mode","template_desc":"Use a template to format the displayed value. Templates use Home Assistant\'s Jinja2 syntax.","value_template":"Value Template","value_template_desc":"Template to format the right side value using Jinja2 syntax","enable_toggle":"Enable the toggle above to configure right side settings"},"colors":{"title":"Colors","bar_color":"Bar Color","background_color":"Background Color","border_color":"Border Color","limit_indicator":"Limit Indicator","percentage_text":"Percentage Text","text_color":"Text Color","text_color_desc":"Choose the color for the text displayed on the bar.","dot_color":"Dot Color","left_side":"Left Side Colors","right_side":"Right Side Colors","title_color":"Title Color","value_color":"Value Color"},"minimal":{"icon_config":"Minimal Style Icon","icon_enabled":"Enable Icon","icon_enabled_desc":"Show an icon on the minimal bar indicator","icon":"Icon","icon_desc":"Choose an icon to display (e.g., mdi:battery)","icon_mode":"Display Mode","icon_mode_desc":"How to display the icon","mode_dot_only":"Dot Only","mode_icon_only":"Icon Only","mode_icon_in_dot":"Icon in Dot","icon_size_auto":"Auto-Scale Icon","icon_size_auto_desc":"Automatically scale icon with bar height","icon_size":"Icon Size","icon_size_desc":"Custom icon size in pixels","use_dot_color":"Use Dot Color","use_dot_color_desc":"Use the dot color for the icon (matches gradient)","icon_color":"Icon Color","icon_color_desc":"Custom color for the icon","enable_toggle":"Enable the toggle above to configure icon settings"},"gradient":{"title":"Gradient Mode","desc":"Apply a color gradient to the bar fill. When enabled, choose how the gradient is displayed and customize color stops below.","full":"Full","cropped":"Cropped","value_based":"Value Based"},"animation":{"title":"Bar Animation","desc":"Animate the bar fill using presets like charging stripes, pulse, glow and more. You can trigger animations based on an entity\'s state or attribute, and optionally override the animation when another condition is met.","trigger":{"title":"Animation Trigger","desc":"Select an entity to watch and define the value + animation to apply when it matches.","entity_desc":"Entity to evaluate for animation trigger","type":"Trigger Type","type_desc":"Choose whether to compare entity state or an attribute","attribute_name_desc":"Attribute name to compare (e.g., charging_status)","match_value":"Match Value","match_value_desc":"Text to compare against state or attribute (comparison is text-based)."},"type":"Animation Type","type_desc":"Select how the bar should animate when triggered.","types":{"charging":"Charging (Diagonal Lines)","pulse":"Pulse","blinking":"Blinking","bouncing":"Bouncing","glow":"Glow","rainbow":"Rainbow","bubbles":"Bubbles","fill":"Fill","ripple":"Ripple","traffic":"Traffic (Barber Pole)","heartbeat":"Heartbeat","flicker":"Flicker","shimmer":"Shimmer","vibrate":"Vibrate"},"override":{"title":"Action Animation Override","desc":"Select an action entity and state to define when this animation should override the regular animation","entity_desc":"Entity to evaluate for override trigger","type_desc":"Animation to use when override condition matches.","attribute_name_desc":"Attribute name to compare","match_value":"Override Match Value","match_value_desc":"Text comparison against state or attribute","type":"Override Animation Type"}}},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width","width_desc":"Set the width (supports px, %, em, rem, vw, vh, etc.).","height":"Height","height_desc":"Set the height (supports px, %, em, rem, vw, vh, etc.).","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."},"alt":"Image","no_source":"No image source configured"},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"data_sources":{"title":"Data Sources","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."},"entity":{"label":"Entity","desc":"Select an entity to plot.","display_name_placeholder":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","state_default":"State (default)","forecast_attr":"Forecast Attribute","forecast_attr_desc":"Which forecast value to plot on the graph","expand_options":"Expand Options"},"line":{"show_points":"Show Points","fill_area":"Fill Area","line_width":"Line Width","line_style":"Line Style"},"line_styles":{"solid":"Solid","dashed":"Dashed","dotted":"Dotted"},"display":{"title":"Display Options","show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","chart_width":"Chart Width (%)","chart_width_desc":"Percentage of the module\'s available width. Alignment controls placement.","chart_alignment":"Chart Alignment","chart_alignment_desc":"Alignment of the chart within its container.","info_position":"Info Position","info_position_desc":"Position of the overlay showing name/value.","legend_position":"Legend Position","legend_position_desc":"Where to place the legend when enabled.","background_color":"Background Color","chart_options":"Chart Options","show_legend":"Show Legend","show_grid":"Show Grid","show_grid_values":"Show Grid Values","smooth_lines":"Smooth Lines","show_tooltips":"Show Tooltips","add_slice_gap":"Add Slice Gap"},"agg":{"mean":"Average","sum":"Sum","min":"Minimum","max":"Maximum","median":"Median","first":"First Value","last":"Last Value","count":"Count","delta":"Change"},"position":{"top":"Top","bottom":"Bottom","left":"Left","right":"Right","hidden":"Hidden","top_left":"Top Left","top_right":"Top Right","bottom_left":"Bottom Left","bottom_right":"Bottom Right","middle":"Center","center":"Center"},"pie":{"show_title":"Show Title in Slice","show_value":"Show Value in Slice"},"period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"reset_345":"Reset to default (345px)","reset_100":"Reset to default (100%)","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","chart_width":"Chart Width (%)"},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","drag_option":"Drag to reorder","default_badge":"DEFAULT","option":{"label":"Label","label_desc":"Display text for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","action":"Action","action_desc":"What happens when this option is selected","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"}},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text","enable_toggle_desc":"Enable the toggle above to configure icon settings"},"icon_field":"Icon","show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text","colors":{"title":"Colors","background":"Background Color","text":"Text Color"},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Color Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"}},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout_title":"Layout","layout_desc":"Arrangement of buttons and value","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position_title":"Value Position","value_position_desc":"Where to display the value relative to buttons","value_position_options":{"center":"Center (Between Buttons)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Value Spacing","button_spacing_desc":"Space between buttons and value display in pixels","button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"}},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","show_name_toggle":{"enable_toggle_desc":"Enable the toggle above to configure camera name display"},"name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","show_title_toggle":{"enable_toggle_desc":"Enable the toggle above to configure title settings"},"text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space."},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Color","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Color","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen","backdrop_filter":"Backdrop Filter","background_filter":"Background Filter","spread":"Spread","visible_default":"Visible (Default)","examples":"Examples","state_based_animation":"State-based Animation","animation_type":"Animation Type","animation_duration":"Animation Duration","animation_duration_desc":"Duration for the animation (e.g., 2s, 500ms, 1.5s)","intro_outro_animations":"Intro & Outro Animations","intro_animation":"Intro Animation","outro_animation":"Outro Animation","duration":"Duration","delay":"Delay","timing":"Timing","none":"None","ease":"Ease","border_style_none":"None","border_style_solid":"Solid","border_style_dashed":"Dashed","border_style_dotted":"Dotted","border_style_double":"Double","position_default":"– Default –","position_static":"Static","position_relative":"Relative","position_absolute":"Absolute","position_fixed":"Fixed","position_sticky":"Sticky"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","spinbox":"Spinbox Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","dropdown":"Dropdown Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text"}}}');var n=i.t(o,2);const a=JSON.parse('{"editor":{"tabs":{"layout":"Konstruktor rozvržení","settings":"Nastavení","about":"O aplikaci","pro":"Pro"},"settings":{"title":"Nastavení karty","description":"Konfigurace globálního vzhledu a chování karty."},"appearance":{"title":"Vzhled","description":"Ovládání vizuálního vzhledu vaší karty"},"spacing":{"title":"Rozestupy","description":"Ovládání rozestupů a umístění vaší karty"},"fields":{"card_background_color":"Barva pozadí karty","card_background_color_desc":"Barva pozadí celé karty","border_radius":"Poloměr ohraničení","border_radius_desc":"Zaoblené rohy karty (v pixelech)","card_padding":"Vnitřní okraje karty","card_padding_desc":"Vnitřní rozestupy uvnitř karty","card_margin":"Vnější okraje karty","card_margin_desc":"Vnější rozestupy kolem karty","unit_px":"px","reset_default":"Obnovit výchozí","reset_default_value":"Obnovit výchozí ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Přejít na celou obrazovku","return_dashboard":"Návrat na nástěnku","dashboard":"Nástěnka"},"layout":{"live_preview":"Živý náhled","toggle_preview":"Přepnout náhled","drag_to_move_module":"Přetáhněte pro přesun modulu","edit_module":"Upravit modul","duplicate_module":"Duplikovat modul","delete_module":"Smazat modul","drag_to_move_layout":"Přetáhněte pro přesun modulu rozvržení","horizontal_layout":"Horizontální rozvržení","vertical_layout":"Vertikální rozvržení","add_module_to_layout":"Přidat modul do rozvržení","layout_settings":"Nastavení rozvržení","duplicate_layout":"Duplikovat rozvržení","delete_layout":"Smazat rozvržení","click_to_add_module":"Klikněte pro přidání modulu","drop_modules_here":"Přetáhněte moduly sem","drag_to_reorder":"Přetáhněte pro změnu pořadí","edit_child_module":"Upravit podřízený modul","duplicate_child_module":"Duplikovat podřízený modul","delete_child_module":"Smazat podřízený modul","module_settings_title":"Nastavení modulu","general_tab":"Obecné","actions_tab":"Akce","other_tab":"Ostatní","logic_tab":"Logika","design_tab":"Vzhled","drag_to_resize":"Přetáhněte pro změnu velikosti","hidden_by_logic":"Skryto logikou","child_module_settings_title":"Nastavení podřízeného modulu","add_row":"Přidat řádek","add_row_tooltip":"Přidejte nový řádek do vašeho rozvržení","row_settings":"Nastavení řádku","column_settings":"Nastavení sloupce","row_background_color":"Barva pozadí řádku","column_gap":"Mezera mezi sloupci (px)","vertical_alignment":"Vertikální zarovnání","horizontal_alignment":"Horizontální zarovnání","column_preview":"Náhled sloupce","modules_count":"{count} modulů","alignment_top":"Nahoře","alignment_center":"Střed","alignment_bottom":"Dole","alignment_stretch":"Roztáhnout","alignment_left":"Vlevo","alignment_right":"Vpravo","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Vyvinuto","desc1":"Výkonný modulární stavitel karet pro Home Assistant","desc2":"Vytvářejte vlastní rozvržení s profesionálním rozhraním pro tvorbu stránek","desc3":"Modulární systém rozvržení s podmíněnou logikou a profesionálními nástroji pro design","github_repo":"GitHub repozitář","version":"Verze","join_discord":"Připojte se k našemu Discordu","support_title":"Podpořte Ultra Card","support_desc":"Vaše štědré příspěvky podporují vývoj úžasných funkcí pro tuto kartu! Bez podpory uživatelů jako jste vy by pokračující inovace nebyly možné.","leave_tip":"ZANECHAT PŘÍSPĚVEK (PAYPAL)"},"actions":{"title":"Konfigurace akcí","description":"Konfigurujte, jak tento modul reaguje na interakce uživatelů. Používá nativní systém akcí Home Assistantu pro konzistentní chování na vašem dashboardu.","tap_action":"Akce při klepnutí","tap_action_desc":"Akce provedená při klepnutí/kliknutí na modul","hold_action":"Akce při podržení","hold_action_desc":"Akce provedená při podržení modulu","double_tap_action":"Akce při dvojitém klepnutí","double_tap_action_desc":"Akce provedená při dvojitém klepnutí na modul","tap_behavior":"Chování při klepnutí","tap_behavior_desc":"Akce k provedení při klepnutí/kliknutí na prvek.","hold_behavior":"Chování při podržení","hold_behavior_desc":"Akce k provedení při stisknutí a podržení prvku.","double_tap_behavior":"Chování při dvojitém klepnutí","double_tap_behavior_desc":"Akce k provedení při dvojitém klepnutí/kliknutí na prvek.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"KONFIGURACE ENTITY","desc":"Konfigurace entity a aktivních/neaktivních stavů"},"entity":"Entita","entity_desc":"Vyberte entitu, kterou tato ikona představuje","inactive_state":"Neaktivní stav","inactive_state_desc":"Hodnota stavu považovaná za \\"neaktivní\\" (ponechte prázdné pro použití skutečného stavu entity)","active_state":"Aktivní stav","active_state_desc":"Hodnota stavu považovaná za \\"aktivní\\" (ponechte prázdné pro použití skutečného stavu entity)","active_animation":"Aktivní animace","active_animation_desc":"Animace při aktivní ikoně","active_icon":"Aktivní ikona","active_icon_background":"Pozadí aktivní ikony","active_icon_background_color":"Barva pozadí aktivní ikony","active_icon_color":"Barva aktivní ikony","active_icon_desc":"Ikona zobrazovaná při aktivním stavu","active_name":"Aktivní název","active_name_color":"Barva aktivního názvu","active_name_desc":"Vlastní název při aktivním stavu","active_state_color":"Barva aktivního stavu","active_state_text":"Text aktivního stavu","animation_bounce":"Poskakování","animation_fade":"Mizení","animation_flash":"Blikání","animation_none":"Žádný","animation_pulse":"Pulsování","animation_rotate_left":"Rotace vlevo","animation_rotate_right":"Rotace vpravo","animation_scale":"Škálování","animation_section":{"desc":"Konfigurace animací pro aktivní a neaktivní stavy","title":"Animace ikony"},"animation_shake":"Třesení","animation_spin":"Otáčení","animation_tada":"Tada","animation_vibrate":"Vibrace","background_color_active":"Barva pozadí při aktivním stavu","background_color_inactive":"Barva pozadí při neaktivním stavu","background_section":{"desc":"Konfigurace nastavení neaktivního pozadí","title":"Neaktivní pozadí"},"background_shape_active":"Tvar pozadí při aktivním stavu","background_shape_inactive":"Tvar pozadí při neaktivním stavu","custom_active_name":"Vlastní aktivní název","custom_active_name_desc":"Přepsat název entity při aktivním stavu (ponechte prázdné pro použití názvu entity)","custom_active_state":"Vlastní aktivní stav","custom_active_state_desc":"Vlastní text při aktivním stavu (ponechte prázdné pro skutečný stav)","custom_inactive_name":"Vlastní neaktivní název","custom_inactive_name_desc":"Přepsat název entity při neaktivním stavu (ponechte prázdné pro použití názvu entity)","custom_inactive_state":"Vlastní neaktivní stav","custom_inactive_state_desc":"Vlastní text při neaktivním stavu (ponechte prázdné pro skutečný stav)","icon_color_active":"Barva při aktivním stavu","icon_color_inactive":"Barva při neaktivním stavu","icon_section":{"title":"Konfigurace ikony"},"icon_size_active":"Velikost ikony při aktivním stavu","icon_size_inactive":"Velikost ikony při neaktivním stavu","inactive_animation":"Neaktivní animace","inactive_animation_desc":"Animace při neaktivní ikoně","inactive_icon":"Neaktivní ikona","inactive_icon_background":"Pozadí neaktivní ikony","inactive_icon_background_color":"Barva pozadí neaktivní ikony","inactive_icon_color":"Barva neaktivní ikony","inactive_icon_config":"Konfigurace neaktivní ikony","inactive_icon_config_desc":"Konfigurace nastavení neaktivní ikony","inactive_icon_desc":"Ikona zobrazovaná při neaktivním stavu","inactive_name":"Neaktivní název","inactive_name_color":"Barva neaktivního názvu","inactive_name_config":"Konfigurace neaktivního názvu","inactive_name_config_desc":"Konfigurace nastavení neaktivního názvu","inactive_name_desc":"Vlastní název při neaktivním stavu","inactive_state_color":"Barva neaktivního stavu","inactive_state_config":"Konfigurace neaktivního stavu","inactive_state_config_desc":"Konfigurace nastavení neaktivního stavu","inactive_state_text":"Text neaktivního stavu","name_color_active":"Barva názvu při aktivním stavu","name_color_inactive":"Barva názvu při neaktivním stavu","name_section":{"title":"Konfigurace názvu"},"name_size_active":"Velikost textu názvu při aktivním stavu","name_size_inactive":"Velikost textu názvu při neaktivním stavu","state_color_active":"Barva stavu při aktivním stavu","state_color_inactive":"Barva stavu při neaktivním stavu","state_section":{"title":"Konfigurace stavu"},"state_size_active":"Velikost textu stavu při aktivním stavu","state_size_inactive":"Velikost textu stavu při neaktivním stavu","template":"Šablona","template_mode":"Pokročilý režim šablony","template_section":{"desc":"Použijte šablony Jinja2 pro pokročilé ovládání ikon. Šablony mohou ovládat viditelnost (true/false pro zobrazení/skrytí ikon) a přizpůsobit text stavu. Vraťte vlastní text pro aktivní stav, vraťte skutečný stav entity pro neaktivní stav.","title":"Pokročilý režim šablony"}},"text":{"content_section":{"title":"Konfigurace obsahu","desc":"Konfigurace textového obsahu a základních nastavení pro tento modul."},"text_content":"Textový obsah","text_content_desc":"Zadejte textový obsah k zobrazení v tomto modulu.","icon_section":{"title":"Konfigurace ikony","desc":"Vyberte ikonu k zobrazení vedle textového obsahu."},"icon":"Ikona","icon_desc":"Vyberte ikonu k zobrazení vedle textu. Ponechte prázdné pro žádnou ikonu.","icon_position":"Pozice ikony","icon_position_desc":"Vyberte, kde umístit ikonu vzhledem k textu.","before_text":"Před textem","after_text":"Za textem","template_mode":"Režim šablony","template_mode_desc":"Použijte syntaxi šablon Home Assistantu pro vykreslení textu","value_template":"Šablona hodnoty","value_template_desc":"Šablona pro vykreslení textu pomocí syntaxe Jinja2","examples_title":"Běžné příklady:","example_basic":"Základní hodnota","example_percent":"S procenty","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Nastavení pruhu","desc":"Konfigurace způsobu výpočtu a zobrazení procent pruhu."},"perc_type":{"entity":"Entita (0-100)","attribute":"Atribut entity","difference":"Rozdíl","template":"Šablona"},"attribute_section":{"title":"Konfigurace atributu entity","desc":"Konfigurace nastavení atributu entity"},"attribute_entity":"Entita atributu","attribute_entity_desc":"Vyberte entitu obsahující atribut s procentuální hodnotou","attribute_name":"Název atributu","attribute_name_desc":"Zadejte název atributu obsahujícího procentuální hodnotu (např. \\"battery_level\\")","diff_section":{"title":"Konfigurace výpočtu rozdílu","desc":"Konfigurace nastavení výpočtu rozdílu"},"current_entity":"Entita aktuální hodnoty","current_entity_desc":"Entita představující aktuální/spotřebované množství (např. spotřebované palivo, vybité baterie)","total_entity":"Entita celkové hodnoty","total_entity_desc":"Entita představující celkové/maximální množství (např. kapacita nádrže, kapacita baterie)","template_section":{"title":"Konfigurace šablony","desc":"Konfigurace nastavení šablony"},"percentage_template":"Šablona procent","percentage_template_desc":"Zadejte šablonu Jinja2, která vrací číslo mezi 0-100 pro procenta. Příklad: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animujte výplň pruhu pomocí předvoleb jako nabíjecí pruhy, pulsování, záře a další. Můžete spustit animace na základě stavu nebo atributu entity a volitelně přepsat animaci při splnění jiné podmínky.","override":{"attribute_name_desc":"Název atributu k porovnání","desc":"Vyberte akční entitu a stav pro definování, kdy má tato animace přepsat běžnou animaci","entity_desc":"Entita k vyhodnocení pro přepsání spouštěče","match_value":"Hodnota shody přepsání","match_value_desc":"Textové porovnání se stavem nebo atributem","title":"Přepsání animace akce","type":"Typ přepsání animace","type_desc":"Animace k použití při shodě podmínky přepsání."},"title":"Animace pruhu","trigger":{"attribute_name_desc":"Název atributu k porovnání (např. charging_status)","desc":"Vyberte entitu ke sledování a definujte hodnotu + animaci k použití při shodě.","entity_desc":"Entita k vyhodnocení pro spouštěč animace","match_value":"Hodnota shody","match_value_desc":"Text k porovnání se stavem nebo atributem (porovnání je textové).","title":"Spouštěč animace","type":"Typ spouštěče","type_desc":"Vyberte, zda porovnávat stav entity nebo atribut"},"type":"Typ animace","type_desc":"Vyberte, jak se má pruh animovat při spuštění.","types":{"blinking":"Blikání","bouncing":"Poskakování","bubbles":"Bubliny","charging":"Nabíjení (diagonální čáry)","fill":"Plnění","flicker":"Třepotání","glow":"Záře","heartbeat":"Tlukot srdce","pulse":"Pulsování","rainbow":"Duha","ripple":"Vlnění","shimmer":"Třpyt","traffic":"Provoz (holičský sloup)","vibrate":"Vibrace"}},"appearance":{"direction":"Směr plnění","direction_desc":"Vyberte směr, kterým se pruh plní při zvyšování hodnoty.","left_to_right":"Zleva doprava","right_to_left":"Zprava doleva","alignment":"Zarovnání pruhu","alignment_desc":"Vyberte způsob zarovnání pruhu, když je šířka menší než 100%.","border_radius":"Poloměr ohraničení","border_radius_desc":"Ovládání zaoblených rohů pruhu.","height":"Výška pruhu","height_desc":"Upravte tloušťku indikátoru průběhu v pixelech.","style":"Styl pruhu","style_dashed":"Čárkovaný","style_desc":"Vyberte vizuální styl indikátoru průběhu.","style_dots":"Tečky","style_embossed":"Reliéfní","style_flat":"Plochý (výchozí)","style_glass":"Sklo","style_glossy":"Lesklý","style_gradient":"Gradientní překrytí","style_inset":"Zapuštěný","style_metallic":"Kovový","style_neon":"Neonová záře","style_neumorphic":"Neumorfní","style_outline":"Obrys","title":"Vzhled pruhu","width":"Šířka pruhu","width_desc":"Nastavte šířku pruhu jako procento kontejneru."},"attr_config":{"attribute_entity":"Entita atributu","attribute_entity_desc":"Vyberte entitu obsahující atribut s procentuální hodnotou","attribute_name":"Název atributu","attribute_name_desc":"Zadejte název atributu obsahujícího procentuální hodnotu (např. \\"battery_level\\")","desc":"Konfigurace nastavení atributu entity","title":"Konfigurace atributu entity"},"colors":{"background_color":"Barva pozadí","bar_color":"Barva pruhu","border_color":"Barva ohraničení","left_side":"Barvy levé strany","limit_indicator":"Indikátor limitu","percentage_text":"Text procent","right_side":"Barvy pravé strany","title":"Barvy","title_color":"Barva nadpisu","value_color":"Barva hodnoty","text_color":"Barva textu","text_color_desc":"Vyberte barvu pro text zobrazovaný na pruhu.","dot_color":"Barva tečky"},"minimal":{"icon_enabled":"Povolit ikonu","icon_enabled_desc":"Zobrazit ikonu na indikátoru minimální lišty","icon":"Ikona","icon_desc":"Vyberte ikonu k zobrazení (např. mdi:battery)","icon_mode":"Režim zobrazení","icon_mode_desc":"Jak zobrazit ikonu","mode_dot_only":"Pouze tečka","mode_icon_only":"Pouze ikona","mode_icon_in_dot":"Ikona v tečce","icon_size_auto":"Automatické škálování ikony","icon_size_auto_desc":"Automaticky škálovat ikonu s výškou lišty","icon_size":"Velikost ikony","icon_size_desc":"Vlastní velikost ikony v pixelech","use_dot_color":"Použít barvu tečky","use_dot_color_desc":"Použít barvu tečky pro ikonu (odpovídá přechodu)","icon_color":"Barva ikony","icon_color_desc":"Vlastní barva pro ikonu","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Entita aktuální hodnoty","current_entity_desc":"Entita představující aktuální/spotřebované množství (např. spotřebované palivo, vybité baterie)","desc":"Konfigurace nastavení výpočtu rozdílu","title":"Konfigurace výpočtu rozdílu","total_entity":"Entita celkové hodnoty","total_entity_desc":"Entita představující celkové/maximální množství (např. kapacita nádrže, kapacita baterie)"},"entity":{"desc_empty":"Vyberte entitu poskytující procentuální hodnotu (0-100). Senzory baterie jsou ideální pro pruhy.","desc_present":"Entita poskytující procentuální hodnotu pro pruh.","no_entity_warning":"Žádná entita nevybrána - Vyberte prosím senzor s hodnotami mezi 0-100","title":"Entita procent pruhu"},"gradient":{"cropped":"Oříznutý","desc":"Použijte barevný gradient na výplň pruhu. Po aktivaci vyberte způsob zobrazení gradientu a přizpůsobte body barev níže.","full":"Plný","title":"Režim gradientu","value_based":"Založený na hodnotě"},"labels":{"alignment":"Zarovnání štítku","alignment_desc":"Ovládání umístění levých a pravých štítků."},"left":{"desc":"Konfigurace nadpisu a hodnoty entity zobrazené na levé straně pruhu. To je užitečné pro zobrazení štítků jako \'Dosah\' nebo \'Baterie\' spolu s jejich hodnotami.","enable_toggle":"Aktivujte přepínač výše pro konfiguraci nastavení levé strany","template_desc":"Použijte šablonu pro formátování zobrazené hodnoty. Šablony používají syntaxi Jinja2 Home Assistantu.","template_mode":"Režim šablony","title":"Levá strana","title_size":"Velikost nadpisu","value_size":"Velikost hodnoty","value_template":"Šablona hodnoty","value_template_desc":"Šablona pro formátování hodnoty levé strany pomocí syntaxe Jinja2"},"limit_entity":{"desc":"Volitelné: Přidejte vertikální indikátorovou čáru na pruh (např. limit nabití pro EV baterii).","title":"Entita limitní hodnoty (volitelné)"},"percentage":{"desc":"Ovládání viditelnosti a vzhledu procentuálních hodnot zobrazených přímo na pruhu. Tato čísla poskytují jasný vizuální indikátor aktuální úrovně.","text_alignment":"Zarovnání textu procent","text_size":"Velikost textu","text_size_desc":"Upravte velikost textu procent zobrazeného na pruhu.","title":"Zobrazení textu procent"},"right":{"desc":"Konfigurace nadpisu a hodnoty entity zobrazené na pravé straně pruhu. To je ideální pro doplňující informace jako \'Čas do plného nabití\' nebo sekundární měření.","enable_toggle":"Aktivujte přepínač výše pro konfiguraci nastavení pravé strany","template_desc":"Použijte šablonu pro formátování zobrazené hodnoty. Šablony používají syntaxi Jinja2 Home Assistantu.","template_mode":"Režim šablony","title":"Pravá strana","title_size":"Velikost nadpisu","value_size":"Velikost hodnoty","value_template":"Šablona hodnoty","value_template_desc":"Šablona pro formátování hodnoty pravé strany pomocí syntaxe Jinja2"},"template_config":{"desc":"Konfigurace nastavení šablony","percentage_template":"Šablona procent","percentage_template_desc":"Zadejte šablonu Jinja2, která vrací číslo mezi 0-100 pro procenta. Příklad: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Konfigurace šablony"},"text_display":{"title":"Zobrazení textu","desc":"Ovládejte viditelnost a vzhled textových hodnot zobrazených přímo na pruhu. Pro rozdílové a šablonové režimy můžete zvolit zobrazení surových hodnot entit místo procent.","show_value":"Zobrazit hodnotu místo procenta","show_value_desc":"Když je povoleno, zobrazuje skutečnou hodnotu entity místo procenta. Užitečné pro zobrazování surových hodnot senzorů jako \\"45 kWh\\" místo \\"75%\\".","text_size":"Velikost textu","text_size_desc":"Upravte velikost textu zobrazovaného na pruhu.","text_alignment":"Zarovnání textu"}},"image":{"settings":"Nastavení obrázku","source_type":"Typ zdroje obrázku","source_type_desc":"Vyberte způsob specifikace zdroje obrázku.","source":{"default":"Výchozí obrázek","url":"URL obrázku","upload":"Nahrát obrázek","entity":"Obrázek entity","attribute":"Atribut entity"},"url_section":{"title":"Konfigurace URL obrázku"},"image_url":"URL obrázku","image_url_desc":"Zadejte přímou URL obrázku, který chcete zobrazit.","upload_section":{"title":"Konfigurace nahrání obrázku"},"upload":"Nahrát obrázek","upload_desc":"Klikněte pro nahrání souboru obrázku z vašeho zařízení.","entity_section":{"title":"Konfigurace obrázku entity"},"entity":"Entita","entity_desc":"Vyberte entitu s obrázkem (např. osoba, kamery).","attribute_section":{"title":"Konfigurace atributu entity"},"entity_attr_desc":"Vyberte entitu obsahující URL obrázku v jednom ze svých atributů.","attribute_name":"Název atributu","attribute_name_desc":"Zadejte cestu atributu obsahující URL obrázku (podporována tečková notace, např. vehicle_data.vehicleDetails.generalDashboard).","width":"Šířka (%)","width_desc":"Nastavte šířku jako procento kontejneru.","height":"Výška (px)","height_desc":"Nastavte výšku v pixelech.","crop_fit":"Ořez a přizpůsobení","crop_fit_desc":"Ovládání způsobu, jak se obrázek vejde do kontejneru.","fit":{"cover":"Pokrýt (oříznout pro vyplnění)","contain":"Obsahovat (vejde celý obrázek)","fill":"Vyplnit (roztáhnout pro přizpůsobení)","scale_down":"Zmenšit","none":"Žádné (původní velikost)"},"border_radius":"Poloměr ohraničení","border_radius_desc":"Ovládání zaoblených rohů obrázku.","tap_actions":"Akce klepnutí","filters":"Filtry","filter":{"blur":"Rozmazání","blur_desc":"Použijte efekt rozmazání na váš obrázek.","brightness":"Jas (%)","brightness_desc":"Upravte jas vašeho obrázku.","contrast":"Kontrast (%)","contrast_desc":"Upravte kontrast vašeho obrázku.","saturation":"Sytost (%)","saturation_desc":"Upravte sytost vašeho obrázku."},"hover":{"title":"Efekty při najetí","effect_type":"Typ efektu","effect_type_desc":"Vyberte typ efektu při najetí.","scale":"Škálování (přiblížení/oddálení)","rotate":"Rotace","fade":"Mizení (změna průhlednosti)","blur":"Rozmazání","brightness":"Jas","glow":"Záře (stín rámečku)","slide":"Posouvání (překlad)","scale_amount":"Škálování (%)","scale_amount_desc":"Upravte škálování obrázku při najetí.","rotate_amount":"Rotace (°)","rotate_amount_desc":"Rotujte obrázek při najetí.","opacity":"Průhlednost (%)","opacity_desc":"Změňte průhlednost obrázku při najetí.","blur_amount":"Rozmazání (px)","blur_amount_desc":"Použijte efekt rozmazání na obrázek při najetí.","brightness_amount":"Jas (%)","brightness_amount_desc":"Upravte jas obrázku při najetí.","glow_intensity":"Intenzita záře","glow_intensity_desc":"Vyberte intenzitu efektu záře při najetí.","glow_light":"Slabá záře","glow_medium":"Střední záře","glow_heavy":"Silná záře","glow_custom":"Vlastní stín","translate_x":"Horizontální (px)","translate_x_desc":"Posuňte obrázek horizontálně při najetí.","translate_y":"Vertikální (px)","translate_y_desc":"Posuňte obrázek vertikálně při najetí."},"alt":"Obrázek","no_source":"Žádný zdroj obrázku nenakonfigurován"},"graphs":{"chart_type":{"title":"Typ grafu","type":"Typ","desc":"Vyberte styl vizualizace pro vaše data."},"types":{"line":"Čárový graf","bar":"Sloupcový graf","pie":"Koláčový graf","donut":"Kobliha graf"},"data_sources":{"title":"Zdroje dat","add_entity":"Přidat entitu","add_first_entity":"Přidejte svou první entitu pro vytvoření grafu","no_entities":"Žádné entity nepřidány"},"entity":"Entita","entity_desc":"Vyberte entitu k zobrazení.","display_name_optional":"Zobrazovaný název (volitelný)","use_as_card_info":"Použít jako informace karty","attribute":"Atribut","attribute_desc":"Použijte stav entity nebo vyberte konkrétní atribut ke sledování.","attribute_state_default":"Stav (výchozí)","show_points":"Zobrazit body","fill_area":"Vyplnit oblast","line_style":"Styl čáry","line_solid":"Plná","line_dashed":"Čárkovaný","line_dotted":"Tečkovaná","pie_show_title":"Zobrazit nadpis v sekci","pie_show_value":"Zobrazit hodnotu v sekci","expand_options":"Rozbalit možnosti","no_entities":"Žádné entity nepřidány","add_first_entity":"Přidejte svou první entitu pro vytvoření grafu","add_entity":"Přidat entitu","display_options":{"title":"Možnosti zobrazení"},"show_title":"Zobrazit nadpis grafu","show_value":"Zobrazit hodnotu grafu","chart_title":"Nadpis grafu","chart_title_placeholder":"Zadejte nadpis grafu","time_period":"Časové období","time_period_desc":"Kolik historických dat zobrazit.","period":{"1h":"Poslední hodina","3h":"Poslední 3 hodiny","6h":"Poslední 6 hodin","12h":"Poslední 12 hodin","24h":"Poslední 24 hodin","2d":"Poslední 2 dny","7d":"Poslední týden","30d":"Poslední měsíc","90d":"Poslední 3 měsíce","365d":"Poslední rok"},"normalize_values":"Normalizovat hodnoty na stejnou škálu","normalize_desc":"Užitečné při porovnávání entit s různými jednotkami (např. % vs míle)","chart_height":"Výška grafu","reset_345":"Obnovit výchozí (345px)","chart_width":"Šířka grafu (%)","reset_100":"Obnovit výchozí (100%)","agg":{"count":"Počet","delta":"Změna","first":"První hodnota","last":"Poslední hodnota","max":"Maximum","mean":"Průměr","median":"Medián","min":"Minimum","sum":"Součet"},"display":{"add_slice_gap":"Přidat mezeru mezi sekcemi","background_color":"Barva pozadí","chart_alignment":"Zarovnání grafu","chart_alignment_desc":"Zarovnání grafu v jeho kontejneru.","chart_height":"Výška grafu","chart_options":"Možnosti grafu","chart_title":"Nadpis grafu","chart_title_placeholder":"Zadejte nadpis grafu","chart_width":"Šířka grafu (%)","chart_width_desc":"Procento dostupné šířky modulu. Zarovnání ovládá umístění.","info_position":"Pozice informací","info_position_desc":"Pozice překrytí zobrazující název/hodnotu.","legend_position":"Pozice legendy","legend_position_desc":"Kde umístit legendu při aktivaci.","normalize_desc":"Užitečné při porovnávání entit s různými jednotkami (např. % vs míle)","normalize_values":"Normalizovat hodnoty na stejnou škálu","show_grid":"Zobrazit mřížku","show_legend":"Zobrazit legendu","show_title":"Zobrazit nadpis grafu","show_tooltips":"Zobrazit nápovědy","show_value":"Zobrazit hodnotu grafu","smooth_lines":"Hladké čáry","time_period":"Časové období","time_period_desc":"Kolik historických dat zobrazit.","title":"Možnosti zobrazení","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Vyplnit oblast","line_style":"Styl čáry","line_width":"Šířka čáry","show_points":"Zobrazit body"},"line_styles":{"dashed":"Čárkovaný","dotted":"Tečkovaná","solid":"Plná"},"pie":{"show_title":"Zobrazit nadpis v sekci","show_value":"Zobrazit hodnotu v sekci"},"position":{"bottom":"Dole","bottom_left":"Vlevo dole","bottom_right":"Vpravo dole","center":"Střed","hidden":"Skrytý","left":"Vlevo","middle":"Střed","right":"Vpravo","top":"Nahoře","top_left":"Vlevo nahoře","top_right":"Vpravo nahoře"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Základní nastavení","desc":"Konfigurace vzhledu tlačítka a textového obsahu."},"text":{"title":"Text tlačítka","desc":"Text zobrazovaný na tlačítku (ponechte prázdné pouze pro ikonu)."},"style":{"title":"Styl tlačítka","desc":"Vizuální styl tlačítka"},"alignment":{"title":"Zarovnání","desc":"Způsob zarovnání tlačítka v jeho kontejneru"},"styles":{"flat":"Plochý (výchozí)","glossy":"Lesklý","embossed":"Reliéfní","inset":"Zapuštěný","gradient_overlay":"Gradientní překrytí","neon_glow":"Neonová záře","outline":"Obrys","glass":"Sklo","metallic":"Kovový"},"align":{"left":"Vlevo","center":"Střed","right":"Vpravo","justify":"Zarovnat (plná šířka)"},"icon":{"title":"Nastavení ikony","desc":"Konfigurace zobrazení a umístění ikony pro tlačítko.","before":"Před textem","after":"Za textem","enable_toggle_desc":"Aktivujte přepínač výše pro konfiguraci nastavení ikony"},"colors":{"title":"Barvy","background":"Barva pozadí","text":"Barva textu"},"hover":{"effect_type":"Typ efektu","effect_type_desc":"Vyberte efekt při najetí pro toto tlačítko.","none":"Žádný","color":"Změna barvy","scale":"Škálování","glow":"Záře","lift":"Zvednutí (překlad Y)","hover_color":"Barva při najetí","glow_color":"Barva záře","title":"Efekty při najetí","enable_toggle_desc":"Aktivujte přepínač výše pro konfiguraci efektů při najetí"},"actions":{"type":"Typ akce","type_desc":"Vyberte, co se stane při kliknutí na tlačítko","entity":"Entita","entity_desc":"Vyberte entitu pro interakci","navigation_path":"Navigační cesta","navigation_path_desc":"Cesta pro navigaci (např. /dashboard/energy)","service":"Služba","service_desc":"Služba k volání (např. light.turn_on)","service_data":"Data služby (JSON)","service_data_desc":"Volitelná data předaná službě (formát JSON)"},"tap":{"title":"Akce při klepnutí","desc":"Akce k provedení při klepnutí na tlačítko"},"hold":{"title":"Akce při podržení","desc":"Akce k provedení při podržení tlačítka"},"double":{"title":"Akce při dvojitém klepnutí","desc":"Akce k provedení při dvojitém klepnutí na tlačítko"},"show_icon":"Zobrazit ikonu","show_icon_desc":"Zobrazit ikonu na tlačítku","icon_desc":"Ikona k zobrazení (např. mdi:home)","icon_position":"Pozice ikony","icon_position_desc":"Pozice ikony vzhledem k textu","icon_field":"Ikona"},"info":{"entity_section":{"title":"KONFIGURACE ENTITY"},"entity":"Entita","entity_desc":"Vyberte entitu k zobrazení","icon_section":{"title":"Nastavení ikony"},"show_icon":"Zobrazit ikonu","show_icon_desc":"Zobrazit ikonu vedle hodnoty entity","icon":"Ikona","icon_desc":"Vyberte ikonu k zobrazení","icon_color":"Barva ikony","name_section":{"title":"Nastavení názvu"},"show_name":"Zobrazit název","show_name_desc":"Zobrazit název entity nad hodnotou","custom_name":"Vlastní název","custom_name_desc":"Přepsat název entity vlastním názvem","name_color":"Barva názvu","state_section":{"title":"Nastavení stavu"},"show_state":"Zobrazit stav","show_state_desc":"Zobrazit stav/hodnotu entity","show_units":"Zobrazit jednotky","show_units_desc":"Zobrazit měrnou jednotku (pokud je dostupná)","state_color":"Barva stavu","template":{"title":"Režim šablony","desc":"Použijte šablonu pro formátování hodnoty entity. Šablony umožňují použít syntaxi šablon Home Assistantu pro složité formátování.","mode":"Režim šablony","mode_desc":"Použijte syntaxi šablon Home Assistantu pro formátování hodnoty","value":"Šablona hodnoty","value_desc":"Šablona pro formátování hodnoty entity pomocí syntaxe Jinja2"},"size_section":{"title":"Nastavení velikosti"},"icon_size":"Velikost ikony","icon_size_desc":"Velikost ikony v pixelech","name_size":"Velikost názvu","name_size_desc":"Velikost textu názvu entity v pixelech","value_size":"Velikost hodnoty","value_size_desc":"Velikost textu hodnoty entity v pixelech","icon_gap":"Mezera ikony","icon_gap_desc":"Mezera mezi ikonou a obsahem v pixelech","layout_section":{"title":"Rozvržení a umístění"},"icon_position":"Pozice ikony","overall_alignment":"Celkové zarovnání","icon_alignment":"Zarovnání ikony","content_alignment":"Zarovnání obsahu","examples_title":"Běžné příklady:","example_basic":"Základní hodnota","example_units":"S jednotkami","example_round":"Zaokrouhlit na 1 desetinné místo"},"camera":{"config":{"title":"Konfigurace kamery","desc":"Konfigurace entity kamery a nastavení zobrazení."},"entity":"Entita kamery","entity_desc":"Vyberte entitu kamery k zobrazení. Měla by to být entita kamery nebo mjpeg z Home Assistantu.","name":"Název kamery","name_desc":"Vlastní název pro kameru. Ponechte prázdné pro použití názvu entity.","show_name":"Zobrazit název kamery","show_name_desc":"Zobrazit název kamery v kanálu","name_position":{"group_title":"Pozice názvu kamery","title":"Pozice názvu","desc":"Vyberte, kde se název kamery objeví jako překrytí na obrázku kamery.","options":{"top_left":"Vlevo nahoře","top_right":"Vpravo nahoře","center":"Střed","bottom_left":"Vlevo dole","bottom_right":"Vpravo dole"}},"display":{"title":"Nastavení zobrazení"},"live_view":{"title":"Živý náhled","desc":"Aktivujte pro zobrazení živého streamu kamery (vyžaduje integraci stream). Při deaktivaci zobrazuje statické snímky."},"auto_refresh":{"section_title":"Nastavení automatického obnovení","title":"Automatické obnovení","desc":"Automaticky obnovovat obrázek kamery v pravidelných intervalech"},"refresh_interval":{"title":"Interval obnovení (sekundy)","desc":"Jak často automaticky obnovovat obrázek kamery."},"dimensions":{"title":"Rozměry"},"width":"Šířka (px)","width_desc":"Nastavte šířku zobrazení kamery. Rozsah: 100-1000px","height":"Výška (px)","height_desc":"Nastavte výšku zobrazení kamery. Rozsah: 100-1000px","link_aspect":"Propojit poměr stran","unlink_aspect":"Odpojit poměr stran","aspect_linked":{"title":"Poměr stran propojen","desc":"Rozměry udržují poměr {ratio}:1. Úprava jednoho rozměru automaticky aktualizuje druhý pro zachování proporcí."},"aspect_independent":{"title":"Nezávislé rozměry","desc":"Šířka a výška mohou být upraveny nezávisle. Klikněte na tlačítko propojení výše pro zachování poměru stran."},"crop":{"title":"Ořez a pozice","desc":"Upravte ořez a pozici zobrazení kamery. Užitečné pro zaměření na konkrétní oblasti nebo odstranění nežádoucích okrajů.","left_title":"Levý ořez (%)","left_desc":"Ořez z levého okraje. Vyšší hodnoty zobrazují méně z levé strany.","right_title":"Pravý ořez (%)","right_desc":"Ořez z pravého okraje. Vyšší hodnoty zobrazují méně z pravé strany.","top_title":"Horní ořez (%)","top_desc":"Ořez z horního okraje. Vyšší hodnoty zobrazují méně z horní oblasti.","bottom_title":"Dolní ořez (%)","bottom_desc":"Ořez z dolního okraje. Vyšší hodnoty zobrazují méně z dolní oblasti.","active_applied":"Aktivní ořezy použity","reset_all":"Obnovit všechny ořezy"},"template":{"title":"Režim šablony","desc":"Použijte šablonu pro dynamické nastavení entity kamery. Šablony umožňují použít syntaxi šablon Home Assistantu pro podmíněný výběr kamery.","mode_label":"Režim šablony","mode_desc":"Použijte syntaxi šablon Home Assistantu pro dynamický výběr entity kamery","camera_template_label":"Šablona kamery","camera_template_desc":"Šablona pro dynamické nastavení entity kamery pomocí syntaxe Jinja2","examples_title":"Běžné příklady:","example1_desc":"Zobrazit kameru při slunečném počasí","example2_desc":"Přepínat mezi kamerami na základě vstupního boolean","example3_desc":"Použít input select pro výběr entity kamery"},"show_name_toggle":{"enable_toggle_desc":"Aktivujte přepínač výše pro konfiguraci zobrazení názvu kamery"}},"separator":{"config":{"title":"Konfigurace oddělovače"},"style":{"title":"Styl oddělovače","desc":"Vyberte vizuální styl oddělovací čáry."},"options":{"solid":"Plná čára","double":"Dvojitá čára","dotted":"Tečkovaná čára","double_dotted":"Dvojitě tečkovaná","shadow":"Stín","blank":"Prázdné místo"},"appearance":{"title":"Vzhled"},"thickness":"Tloušťka (px)","thickness_desc":"Tloušťka oddělovací čáry.","width":"Šířka (%)","width_desc":"Šířka oddělovače jako procento kontejneru.","color":{"title":"Barva","desc":"Barva oddělovací čáry."},"show_title":"Zobrazit nadpis","show_title_desc":"Přidejte text do středu oddělovací čáry (např. ------ Text ------)","text_content":{"title":"Textový obsah","desc":"Text zobrazovaný ve středu oddělovače."},"font_size":"Velikost písma","font_size_desc":"Velikost textu v pixelech.","text_color":{"title":"Barva textu","desc":"Barva textu oddělovače."},"text_format":{"title":"Formátování textu","desc":"Použijte styly formátování na text oddělovače.","bold":"Tučné","italic":"Kurzíva","underline":"Podtržené","uppercase":"Velká písmena","strikethrough":"Přeškrtnuté"},"spacer":{"title":"Výška rozestupu"},"height":"Výška (px)","height_desc":"Ovládá vizuální mezeru pro prázdné místo.","show_title_toggle":{"enable_toggle_desc":"Aktivujte přepínač výše pro konfiguraci nastavení nadpisu"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Název modulu:","module_name_placeholder":"Dejte tomuto modulu vlastní název, aby se lépe identifikoval v editoru.","module_name_help":"Dejte tomuto modulu vlastní název, aby se lépe identifikoval v editoru."},"layout_logic":{"display_title":"Zobrazit tento prvek","display_desc":"Ovládání, kdy je tento prvek zobrazen. Vyberte \\"Vždy\\" pro zachování viditelnosti. Vyberte \\"Pokud jsou splněny VŠECHNY podmínky níže\\" nebo \\"Pokud je splněna JAKÁKOLI podmínka níže\\" pro zobrazení pouze když podmínky, které přidáte níže, jsou vyhodnoceny jako pravdivé.","always":"Vždy","every":"Pokud jsou splněny VŠECHNY podmínky níže","any":"Pokud je splněna JAKÁKOLI podmínka níže","conditions":"Podmínky","add_condition":"Přidat podmínku","no_conditions":"Zatím nejsou přidány žádné podmínky. Klikněte na \\"Přidat podmínku\\" pro začátek.","condition_types":{"entity_state":"Stav entity","entity_attribute":"Atribut entity","time":"Časový rozsah","template":"Šablona"},"condition_fields":{"entity":"Entita","operator":"Operátor","value":"Hodnota","attribute":"Atribut","time_from":"Od","time_to":"Do","template":"Šablona"},"condition_header":"Podmínka","custom_name":"Vlastní název","custom_name_desc":"Volitelné: Dejte této podmínce vlastní název pro snadnější identifikaci","condition_type":"Typ podmínky"},"hover_effects":{"title":"Efekty při najetí","description":"Konfigurujte vizuální efekty, které se zobrazí při najetí myší na tento modul, řádek nebo sloupec.","effect":"Efekt při najetí","effect_desc":"Vyberte vizuální efekt, který se použije při najetí myší","effects":{"none":"Žádný","highlight":"Zvýraznění","outline":"Obrys","grow":"Zvětšení","shrink":"Zmenšení","pulse":"Pulsování","bounce":"Odskok","float":"Plavání","glow":"Záření","shadow":"Stín","rotate":"Rotace","skew":"Naklonění","wobble":"Kolísání","buzz":"Vibrace","fade":"Miznění"}},"design":{"copy":"Kopírovat","paste":"Vložit","reset_all":"Obnovit vše","copy_tooltip":"Kopírovat aktuální nastavení vzhledu (funguje napříč všemi Ultra kartami)","paste_tooltip_has":"Vložit zkopírovaná nastavení vzhledu (z mezikarty schránky)","paste_tooltip_none":"Žádná nastavení vzhledu v mezikarty schránce","reset_all_tooltip":"Obnovit všechna nastavení vzhledu na výchozí","text_section":"Text","text_color":"Barva textu","alignment":"Zarovnání","inherit_alignment":"Zdědit (bez zarovnání)","font_size":"Velikost písma","font_size_placeholder":"16px (výchozí), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Obnovit velikost písma na výchozí","line_height":"Výška řádku","line_height_placeholder":"0 (výchozí), 28px, 1.7","reset_line_height":"Obnovit výšku řádku na výchozí","letter_spacing":"Rozestup písmen","letter_spacing_placeholder":"auto (výchozí), 1px, -0.04em","reset_letter_spacing":"Obnovit rozestup písmen na výchozí","font":"Písmo","font_weight":"Tloušťka písma","text_transform":"Transformace textu","font_style":"Styl písma","default_option":"– Výchozí –","weight_thin":"100 - Tenké","weight_light":"300 - Světlé","weight_normal":"400 - Normální","weight_medium":"500 - Střední","weight_semi_bold":"600 - Polo tučné","weight_bold":"700 - Tučné","weight_black":"900 - Černé","transform_none":"Žádný","transform_uppercase":"VELKÁ PÍSMENA","transform_lowercase":"malá písmena","transform_capitalize":"Velká první písmena","style_normal":"Normální","style_italic":"Kurzíva","style_oblique":"Šikmé","background_section":"Pozadí","background_color":"Barva pozadí","background_image_type":"Typ obrázku pozadí","bg_none":"Žádný","bg_upload":"Nahrát obrázek","bg_entity":"Obrázek entity","bg_url":"URL obrázku","sizes_section":"Velikosti","spacing_section":"Rozestupy","border_section":"Ohraničení","text_shadow_section":"Stín textu","box_shadow_section":"Stín rámečku","position_section":"Pozice","overflow_section":"Přetečení","animations_section":"Animace","width":"Šířka","height":"Výška","max_width":"Maximální šířka","max_height":"Maximální výška","min_width":"Minimální šířka","min_height":"Minimální výška","border_radius":"Poloměr ohraničení","border_style":"Styl ohraničení","border_width":"Šířka ohraničení","border_color":"Barva ohraničení","margin":"Okraj","padding":"Vnitřní okraj","top":"Nahoře","right":"Vpravo","bottom":"Dole","left":"Vlevo","unlock_sides":"Odemknout pro nezávislé úpravy stran","lock_sides":"Zamknout pro společné úpravy všech stran","horizontal_shift":"Horizontální posun","vertical_shift":"Vertikální posun","blur":"Rozmazání","text_shadow_color":"Barva stínu textu","box_shadow_color":"Barva stínu rámečku","overflow":"Přetečení","clip_path":"Cesta ořezu","upload_bg_image":"Nahrát obrázek pozadí","bg_image_entity":"Entita obrázku pozadí","bg_image_url":"URL obrázku pozadí","choose_file":"Vybrat soubor","no_file_chosen":"Žádný soubor nevybrán","backdrop_filter":"Filtr pozadí","spread":"Rozšíření","visible_default":"Viditelné (výchozí)","examples":"Příklady","state_based_animation":"Animace založená na stavu","animation_type":"Typ animace","animation_duration":"Doba trvání animace","animation_duration_desc":"Doba trvání animace (např. 2s, 500ms, 1.5s)","intro_outro_animations":"Úvodní a závěrečné animace","intro_animation":"Úvodní animace","outro_animation":"Závěrečná animace","duration":"Doba trvání","delay":"Zpoždění","timing":"Načasování","none":"Žádný","ease":"Zmírnění","border_style_none":"Žádný","border_style_solid":"Plná","border_style_dashed":"Čárkovaný","border_style_dotted":"Tečkovaná","border_style_double":"Double","position_default":"– Výchozí –","position_static":"Statická","position_relative":"Relativní","position_absolute":"Absolutní","position_fixed":"Pevná","position_sticky":"Lepkavá","background_filter":"Background Filter"},"modules":{"text":"Textový modul","image":"Obrázkový modul","icon":"Ikonový modul","bar":"Sloupcový modul","info":"Informační modul","button":"Tlačítkový modul","separator":"Modul oddělovače","markdown":"Markdown modul","camera":"Kamerový modul","graphs":"Modul grafů","no_text_configured":"Žádný text nenakonfigurován","no_image_configured":"Žádný obrázek nenakonfigurován","uploaded_image":"Nahraný obrázek","icons_configured":"{count} ikon nakonfigurováno","no_icons_configured":"Žádné ikony nenakonfigurovány","default_entity_suggestion":"Entita: sensor.battery_level","sample_text":"Ukázkový text","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Atribut","attribute_name":"Název atributu","baseline":"Základní linie","bottom":"Dole","center":"Střed","entity":"Entita","justify":"Zarovnat","left":"Vlevo","none":"Žádný","right":"Vpravo","space_around":"Mezera kolem","space_between":"Mezera mezi","state":"Stav","stretch":"Roztáhnout","top":"Nahoře"},"horizontal":{"alignment":{"horizontal":"Horizontální zarovnání","horizontal_desc":"Vyberte způsob horizontálního zarovnání prvků v kontejneru.","vertical":"Vertikální zarovnání","vertical_desc":"Vyberte způsob vertikálního zarovnání prvků v kontejneru."},"empty":{"add_modules":"Přidejte moduly v konstruktoru rozvržení pro jejich zobrazení zde","no_modules":"Zatím nejsou přidány žádné moduly"},"gap":{"between_items":"Mezera mezi položkami","desc":"Nastavte rozestupy mezi horizontálními prvky (v jednotkách rem). Použijte záporné hodnoty pro překrývání prvků.","title":"Konfigurace mezer"},"layout":{"desc":"Konfigurace způsobu horizontálního uspořádání prvků v kontejneru.","title":"Konfigurace rozvržení"},"wrapping":{"desc":"Povolit prvkům přejít na další řádek při překročení šířky kontejneru.","title":"Povolit zalamování"}},"markdown":{"code_highlighting":"Zvýraznění kódu","code_highlighting_desc":"Zvýraznění syntaxe pro bloky kódu","content":{"desc":"Zadejte váš markdown obsah s plnou podporou formátování","label":"Obsah","title":"Markdown obsah"},"enable_html":"Povolit HTML","enable_html_desc":"Povolit HTML tagy v markdown obsahu","enable_tables":"Povolit tabulky","enable_tables_desc":"Podpora syntaxe markdown tabulek","features":{"title":"Funkce Markdown"}},"vertical":{"alignment":{"vertical":"Vertikální zarovnání","vertical_desc":"Vyberte způsob vertikálního zarovnání prvků v kontejneru."},"empty":{"add_modules":"Přidejte moduly v konstruktoru rozvržení pro jejich zobrazení zde","no_modules":"Zatím nejsou přidány žádné moduly"},"gap":{"between_items":"Mezera mezi položkami","desc":"Nastavte rozestupy mezi vertikálními prvky (v jednotkách rem). Použijte záporné hodnoty pro překrývání prvků.","title":"Konfigurace mezer"},"layout":{"desc":"Konfigurace způsobu vertikálního uspořádání prvků v kontejneru.","title":"Konfigurace rozvržení"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var r=i.t(a,2);const s=JSON.parse('{"editor":{"tabs":{"layout":"Layoutbygger","settings":"Indstillinger","about":"Om","pro":"Pro"},"settings":{"title":"Kortindstillinger","description":"Konfigurer kortets generelle udseende og adfærd."},"appearance":{"title":"Udseende","description":"Kontroller det visuelle udtryk for dit kort"},"spacing":{"title":"Mellemrum","description":"Kontroller mellemrum og positionering af dit kort"},"fields":{"card_background_color":"Kortets baggrundsfarve","card_background_color_desc":"Baggrundsfarve for hele kortet","border_radius":"Hjørneradius","border_radius_desc":"Afrundede hjørner for kortet (i pixel)","card_padding":"Indre afstand","card_padding_desc":"Indvendig afstand i kortet","card_margin":"Ydre margin","card_margin_desc":"Ydre afstand omkring kortet","unit_px":"px","reset_default":"Nulstil til standard","reset_default_value":"Nulstil til standard ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Fuld skærm","return_dashboard":"Tilbage til dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live forhåndsvisning","toggle_preview":"Skift forhåndsvisning","drag_to_move_module":"Træk for at flytte modul","edit_module":"Rediger modul","duplicate_module":"Dupliker modul","delete_module":"Slet modul","drag_to_move_layout":"Træk for at flytte layout","horizontal_layout":"Vandret layout","vertical_layout":"Lodret layout","add_module_to_layout":"Tilføj modul til layout","layout_settings":"Layoutindstillinger","duplicate_layout":"Dupliker layout","delete_layout":"Slet layout","click_to_add_module":"Klik for at tilføje et modul","drop_modules_here":"Slip moduler her","drag_to_reorder":"Træk for at omarrangere","edit_child_module":"Rediger undermodul","duplicate_child_module":"Dupliker undermodul","delete_child_module":"Slet undermodul","module_settings_title":"Modulindstillinger","general_tab":"Generelt","actions_tab":"Handlinger","other_tab":"Andet","logic_tab":"Logik","design_tab":"Design","drag_to_resize":"Træk for at ændre størrelse","hidden_by_logic":"Skjult af logik","child_module_settings_title":"Indstillinger for undermodul","add_row":"Tilføj række","add_row_tooltip":"Tilføj en ny række til dit layout","row_settings":"Rækkeindstillinger","column_settings":"Kolonneindstillinger","row_background_color":"Rækkens baggrundsfarve","column_gap":"Kolonneafstand (px)","vertical_alignment":"Lodret justering","horizontal_alignment":"Vandret justering","column_preview":"Forhåndsvisning af kolonne","modules_count":"{count} moduler","alignment_top":"Øverst","alignment_center":"Center","alignment_bottom":"Nederst","alignment_stretch":"Stræk","alignment_left":"Venstre","alignment_right":"Højre","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Udviklet af","desc1":"En kraftfuld modulær kortbygger til Home Assistant","desc2":"Opret brugerdefinerede layouts med en professionel sidebygger-grænseflade","desc3":"Modulært layout-system med betinget logik og professionelle designværktøjer","github_repo":"GitHub-arkiv","version":"Version","join_discord":"Deltag på vores Discord","support_title":"Støt Ultra Card","support_desc":"Dine generøse bidrag driver udviklingen af fantastiske funktioner til dette kort! Uden støtte fra brugere som dig, ville fortsat innovation ikke være mulig.","leave_tip":"GIV ET BIDRAG (PAYPAL)"},"actions":{"title":"Handlingskonfiguration","description":"Konfigurer hvordan modulet reagerer på brugerinteraktioner. Bruger Home Assistants indbyggede handlingssystem for ensartet adfærd på dit dashboard.","tap_action":"Tryk-handling","tap_action_desc":"Handling der udføres ved tryk/klik på modulet","hold_action":"Hold-handling","hold_action_desc":"Handling der udføres ved at holde nede på modulet","double_tap_action":"Dobbelttryk-handling","double_tap_action_desc":"Handling der udføres ved dobbelttryk på modulet","tap_behavior":"Tryk-adfærd","tap_behavior_desc":"Handling der udføres når elementet trykkes/klikkes.","hold_behavior":"Hold-adfærd","hold_behavior_desc":"Handling der udføres når elementet holdes nede.","double_tap_behavior":"Dobbelttryk-adfærd","double_tap_behavior_desc":"Handling der udføres når elementet dobbelttrykkes/klikkes.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITETSKONFIGURATION","desc":"Konfigurer entitet og aktive/inaktive tilstande"},"entity":"Entitet","entity_desc":"Vælg den entitet, som dette ikon repræsenterer","inactive_state":"Inaktiv tilstand","inactive_state_desc":"Tilstandsværdi der betragtes som \\"inaktiv\\" (lad stå tom for at bruge faktisk entitetstilstand)","active_state":"Aktiv tilstand","active_state_desc":"Tilstandsværdi der betragtes som \\"aktiv\\" (lad stå tom for at bruge faktisk entitetstilstand)","active_animation":"Aktiv animation","active_animation_desc":"Animation når ikon er aktiv","active_icon":"Aktivt ikon","active_icon_background":"Aktivt ikon baggrund","active_icon_background_color":"Aktivt ikon baggrundsfarve","active_icon_color":"Aktivt ikon farve","active_icon_desc":"Ikon der skal vises når aktiv","active_name":"Aktivt navn","active_name_color":"Aktivt navn farve","active_name_desc":"Brugerdefineret navn når aktiv","active_state_color":"Aktiv tilstandsfarve","active_state_text":"Aktiv tilstandstekst","animation_bounce":"Hop","animation_fade":"Fade","animation_flash":"Blink","animation_none":"Ingen","animation_pulse":"Puls","animation_rotate_left":"Roter venstre","animation_rotate_right":"Roter højre","animation_scale":"Skalering","animation_section":{"desc":"Konfigurer animationer for aktive og inaktive tilstande","title":"Ikonanimation"},"animation_shake":"Ryst","animation_spin":"Spin","animation_tada":"Tada","animation_vibrate":"Vibrer","background_color_active":"Baggrundsfarve når aktiv","background_color_inactive":"Baggrundsfarve når inaktiv","background_section":{"desc":"Konfigurer indstillinger for inaktiv baggrund","title":"Inaktiv baggrund"},"background_shape_active":"Baggrundsform når aktiv","background_shape_inactive":"Baggrundsform når inaktiv","custom_active_name":"Brugerdefineret aktivt navn","custom_active_name_desc":"Overskriv entitetsnavn når aktiv (lad stå tom for at bruge entitetsnavn)","custom_active_state":"Brugerdefineret aktiv tilstand","custom_active_state_desc":"Brugerdefineret tekst når aktiv (lad stå tom for at bruge faktisk tilstand)","custom_inactive_name":"Brugerdefineret inaktivt navn","custom_inactive_name_desc":"Overskriv entitetsnavn når inaktiv (lad stå tom for at bruge entitetsnavn)","custom_inactive_state":"Brugerdefineret inaktiv tilstand","custom_inactive_state_desc":"Brugerdefineret tekst når inaktiv (lad stå tom for at bruge faktisk tilstand)","icon_color_active":"Farve når aktiv","icon_color_inactive":"Farve når inaktiv","icon_section":{"title":"Ikonkonfiguration"},"icon_size_active":"Ikonstørrelse når aktiv","icon_size_inactive":"Ikonstørrelse når inaktiv","inactive_animation":"Inaktiv animation","inactive_animation_desc":"Animation når ikon er inaktiv","inactive_icon":"Inaktivt ikon","inactive_icon_background":"Inaktivt ikon baggrund","inactive_icon_background_color":"Inaktivt ikon baggrundsfarve","inactive_icon_color":"Inaktivt ikon farve","inactive_icon_config":"Konfiguration af inaktivt ikon","inactive_icon_config_desc":"Konfigurer indstillinger for inaktivt ikon","inactive_icon_desc":"Ikon der skal vises når inaktiv","inactive_name":"Inaktivt navn","inactive_name_color":"Inaktivt navn farve","inactive_name_config":"Konfiguration af inaktivt navn","inactive_name_config_desc":"Konfigurer indstillinger for inaktivt navn","inactive_name_desc":"Brugerdefineret navn når inaktiv","inactive_state_color":"Inaktiv tilstandsfarve","inactive_state_config":"Konfiguration af inaktiv tilstand","inactive_state_config_desc":"Konfigurer indstillinger for inaktiv tilstand","inactive_state_text":"Inaktiv tilstandstekst","name_color_active":"Navnefarve når aktiv","name_color_inactive":"Navnefarve når inaktiv","name_section":{"title":"Navnekonfiguration"},"name_size_active":"Navnetekststørrelse når aktiv","name_size_inactive":"Navnetekststørrelse når inaktiv","state_color_active":"Tilstandsfarve når aktiv","state_color_inactive":"Tilstandsfarve når inaktiv","state_section":{"title":"Tilstandskonfiguration"},"state_size_active":"Tilstandstekststørrelse når aktiv","state_size_inactive":"Tilstandstekststørrelse når inaktiv","template":"Skabelon","template_mode":"Avanceret skabelontilstand","template_section":{"desc":"Brug Jinja2-skabeloner til avanceret ikonstyring. Skabeloner kan styre synlighed (sand/falsk for at vise/skjule ikoner) og tilpasse tilstandstekst. Returnér brugerdefineret tekst for aktiv tilstand, returnér faktisk entitetstilstand for inaktiv.","title":"Avanceret skabelontilstand"}},"text":{"content_section":{"title":"Indholdskonfiguration","desc":"Konfigurer tekstindhold og grundlæggende indstillinger for dette modul."},"text_content":"Tekstindhold","text_content_desc":"Indtast den tekst, der skal vises i dette modul.","icon_section":{"title":"Ikonkonfiguration","desc":"Vælg et ikon, der vises sammen med tekstindholdet."},"icon":"Ikon","icon_desc":"Vælg et ikon der vises sammen med teksten. Lad stå tom for intet ikon.","icon_position":"Ikonposition","icon_position_desc":"Vælg hvor ikonet skal placeres i forhold til teksten.","before_text":"Før tekst","after_text":"Efter tekst","template_mode":"Skabelontilstand","template_mode_desc":"Brug Home Assistants skabelonsyntaks til at gengive tekst","value_template":"Værdi-skabelon","value_template_desc":"Skabelon til at gengive teksten ved hjælp af Jinja2-syntaks","examples_title":"Almindelige eksempler:","example_basic":"Grundværdi","example_percent":"Med procent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Bjælkeindstillinger","desc":"Konfigurer hvordan bjælkeprocenten beregnes og vises."},"perc_type":{"entity":"Entitet (0-100)","attribute":"Entitetsattribut","difference":"Forskel","template":"Skabelon"},"attribute_section":{"title":"Konfiguration af entitetsattribut","desc":"Konfigurer entitetsattributindstillinger"},"attribute_entity":"Attributentitet","attribute_entity_desc":"Vælg entiteten der indeholder attributten med procentværdien","attribute_name":"Attributnavn","attribute_name_desc":"Indtast navnet på attributten der indeholder procentværdien (f.eks. \\"battery_level\\")","diff_section":{"title":"Konfiguration af forskelberegning","desc":"Konfigurer indstillinger for forskelberegning"},"current_entity":"Nuværende værdi-entitet","current_entity_desc":"Entitet der repræsenterer den nuværende/brugte mængde (f.eks. brugt brændstof, forbrugt batteri)","total_entity":"Total værdi-entitet","total_entity_desc":"Entitet der repræsenterer den totale/maksimale mængde (f.eks. brændstofkapacitet, batterikapacitet)","template_section":{"title":"Skabelonkonfiguration","desc":"Konfigurer skabelonindstillinger"},"percentage_template":"Procentskabelon","percentage_template_desc":"Indtast en Jinja2-skabelon der returnerer et tal mellem 0-100 for procenten. Eksempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animer bjælkefyldet ved hjælp af forudindstillinger som ladestriber, puls, glød og mere. Du kan udløse animationer baseret på en entitets tilstand eller attribut, og eventuelt overstyre animationen når en anden betingelse er opfyldt.","override":{"attribute_name_desc":"Attributnavn der skal sammenlignes","desc":"Vælg en handlingsentitet og tilstand for at definere hvornår denne animation skal overstyre den almindelige animation","entity_desc":"Entitet der skal evalueres for overstyring af trigger","match_value":"Overstyring af matchværdi","match_value_desc":"Tekstsammenligning mod tilstand eller attribut","title":"Overstyring af handlingsanimation","type":"Overstyring af animationstype","type_desc":"Animation der skal bruges når overstyringsbetingelsen matcher."},"title":"Bjælkeanimation","trigger":{"attribute_name_desc":"Attributnavn der skal sammenlignes (f.eks. charging_status)","desc":"Vælg en entitet der skal overvåges og definer værdien + animation der skal anvendes når den matcher.","entity_desc":"Entitet der skal evalueres for animationstrigger","match_value":"Matchværdi","match_value_desc":"Tekst der skal sammenlignes med tilstand eller attribut (sammenligning er tekstbaseret).","title":"Animationstrigger","type":"Triggertype","type_desc":"Vælg om der skal sammenlignes entitetstilstand eller en attribut"},"type":"Animationstype","type_desc":"Vælg hvordan bjælken skal animeres når den udløses.","types":{"blinking":"Blinkende","bouncing":"Hoppende","bubbles":"Bobler","charging":"Opladning (diagonale linjer)","fill":"Fyld","flicker":"Flimmer","glow":"Glød","heartbeat":"Hjerteslag","pulse":"Puls","rainbow":"Regnbue","ripple":"Krusning","shimmer":"Skimmer","traffic":"Trafik (barberstang)","vibrate":"Vibrer"}},"appearance":{"direction":"Fylderetning","direction_desc":"Vælg retningen bjælken fylder i når værdien stiger.","left_to_right":"Venstre til højre","right_to_left":"Højre til venstre","alignment":"Bjælkejustering","alignment_desc":"Vælg hvordan bjælken skal justeres når den er mindre end 100% bredde.","border_radius":"Kantradius","border_radius_desc":"Kontroller de afrundede hjørner af bjælken.","height":"Bjælkehøjde","height_desc":"Juster tykkelsen af fremskridtsbjælken i pixels.","style":"Bjælkestil","style_dashed":"Stiplet","style_desc":"Vælg den visuelle stil af fremskridtsbjælken.","style_dots":"Prikker","style_embossed":"Præget","style_flat":"Flad (standard)","style_glass":"Glas","style_glossy":"Blank","style_gradient":"Gradientoverlay","style_inset":"Indsat","style_metallic":"Metallisk","style_neon":"Neonglød","style_neumorphic":"Neumorfisk","style_outline":"Kontur","title":"Bjælkeudseende","width":"Bjælkebredde","width_desc":"Indstil bjælkebredden som procent af container."},"attr_config":{"attribute_entity":"Attributentitet","attribute_entity_desc":"Vælg entiteten der indeholder attributten med procentværdien","attribute_name":"Attributnavn","attribute_name_desc":"Indtast navnet på attributten der indeholder procentværdien (f.eks. \\"battery_level\\")","desc":"Konfigurer entitetsattributindstillinger","title":"Konfiguration af entitetsattribut"},"colors":{"background_color":"Baggrundsfarve","bar_color":"Bjælkefarve","border_color":"Kantfarve","left_side":"Venstre side farver","limit_indicator":"Grænseindikator","percentage_text":"Procenttekst","right_side":"Højre side farver","title":"Farver","title_color":"Titelfarve","value_color":"Værdifarve","text_color":"Tekstfarve","text_color_desc":"Vælg farven for teksten vist på bjælken.","dot_color":"Punktfarve"},"minimal":{"icon_enabled":"Aktivér ikon","icon_enabled_desc":"Vis et ikon på den minimale barindikator","icon":"Ikon","icon_desc":"Vælg et ikon at vise (f.eks. mdi:battery)","icon_mode":"Visningstilstand","icon_mode_desc":"Hvordan ikonet skal vises","mode_dot_only":"Kun punkt","mode_icon_only":"Kun ikon","mode_icon_in_dot":"Ikon i punkt","icon_size_auto":"Skaler ikon automatisk","icon_size_auto_desc":"Skaler ikon automatisk med barhøjde","icon_size":"Ikonstørrelse","icon_size_desc":"Brugerdefineret ikonstørrelse i pixels","use_dot_color":"Brug punktfarve","use_dot_color_desc":"Brug punktfarven til ikonet (matcher gradient)","icon_color":"Ikonfarve","icon_color_desc":"Brugerdefineret farve til ikonet","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Nuværende værdi-entitet","current_entity_desc":"Entitet der repræsenterer den nuværende/brugte mængde (f.eks. brugt brændstof, forbrugt batteri)","desc":"Konfigurer indstillinger for forskelberegning","title":"Konfiguration af forskelberegning","total_entity":"Total værdi-entitet","total_entity_desc":"Entitet der repræsenterer den totale/maksimale mængde (f.eks. brændstofkapacitet, batterikapacitet)"},"entity":{"desc_empty":"Vælg en entitet der giver en procentværdi (0-100). Batterisensorer er ideelle til bjælker.","desc_present":"Entiteten der giver procentværdien for bjælken.","no_entity_warning":"Ingen entitet valgt - Vælg venligst en sensor med værdier mellem 0-100","title":"Bjælke procent-entitet"},"gradient":{"cropped":"Beskåret","desc":"Anvend en farvegradient på bjælkefyldet. Når aktiveret, vælg hvordan gradienten vises og tilpas farvestop nedenfor.","full":"Fuld","title":"Gradienttilstand","value_based":"Værdibaseret"},"labels":{"alignment":"Etikettejustering","alignment_desc":"Kontroller hvordan venstre og højre etiketter er positioneret."},"left":{"desc":"Konfigurer titlen og entitetsværdien vist på venstre side af bjælken. Dette er nyttigt til at vise etiketter som \'Rækkevidde\' eller \'Batteri\' sammen med deres værdier.","enable_toggle":"Aktiver skifteren ovenfor for at konfigurere venstre side indstillinger","template_desc":"Brug en skabelon til at formatere den viste værdi. Skabeloner bruger Home Assistants Jinja2-syntaks.","template_mode":"Skabelontilstand","title":"Venstre side","title_size":"Titelstørrelse","value_size":"Værdistørrelse","value_template":"Værdiskabelon","value_template_desc":"Skabelon til formatering af venstre side værdien ved hjælp af Jinja2-syntaks"},"limit_entity":{"desc":"Valgfrit: Tilføj en vertikal indikatorlinje på bjælken (f.eks. ladegrænse for EV-batteri).","title":"Grænseværdi-entitet (valgfrit)"},"percentage":{"desc":"Kontroller synligheden og udseendet af procentværdier vist direkte på bjælken. Disse tal giver en klar visuel indikator for det nuværende niveau.","text_alignment":"Procenttekst justering","text_size":"Tekststørrelse","text_size_desc":"Juster størrelsen af procenttekst vist på bjælken.","title":"Procenttekst visning"},"right":{"desc":"Konfigurer titlen og entitetsværdien vist på højre side af bjælken. Dette er ideelt til supplerende information som \'Tid til fuld\' eller sekundære målinger.","enable_toggle":"Aktiver skifteren ovenfor for at konfigurere højre side indstillinger","template_desc":"Brug en skabelon til at formatere den viste værdi. Skabeloner bruger Home Assistants Jinja2-syntaks.","template_mode":"Skabelontilstand","title":"Højre side","title_size":"Titelstørrelse","value_size":"Værdistørrelse","value_template":"Værdiskabelon","value_template_desc":"Skabelon til formatering af højre side værdien ved hjælp af Jinja2-syntaks"},"template_config":{"desc":"Konfigurer skabelonindstillinger","percentage_template":"Procentskabelon","percentage_template_desc":"Indtast en Jinja2-skabelon der returnerer et tal mellem 0-100 for procenten. Eksempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Skabelonkonfiguration"},"text_display":{"title":"Tekstvisning","desc":"Kontroller synligheden og udseendet af tekstværdier vist direkte på bjælken. For forskel- og skabelontilstande kan du vælge at vise rå entitetsværdier i stedet for procenter.","show_value":"Vis værdi i stedet for procent","show_value_desc":"Når aktiveret, viser den faktiske entitetsværdi i stedet for procent. Nyttig til visning af rå sensorværdier som \\"45 kWh\\" i stedet for \\"75%\\".","text_size":"Tekststørrelse","text_size_desc":"Juster størrelsen på teksten vist på bjælken.","text_alignment":"Tekstjustering"}},"image":{"settings":"Billedindstillinger","source_type":"Type af billedkilde","source_type_desc":"Vælg hvordan du vil angive billedkilden.","source":{"default":"Standardbillede","url":"Billede-URL","upload":"Upload billede","entity":"Entitetsbillede","attribute":"Entitetsattribut"},"url_section":{"title":"Konfiguration af billede-URL"},"image_url":"Billede-URL","image_url_desc":"Indtast den direkte URL til billedet, du vil vise.","upload_section":{"title":"Konfiguration af billedupload"},"upload":"Upload billede","upload_desc":"Klik for at uploade en billedfil fra din enhed.","entity_section":{"title":"Konfiguration af entitetsbillede"},"entity":"Entitet","entity_desc":"Vælg en entitet der har et billede (fx person, kamera).","attribute_section":{"title":"Konfiguration af entitetsattribut"},"entity_attr_desc":"Vælg den entitet der indeholder billed-URL\'en i en af sine attributter.","attribute_name":"Attributnavn","attribute_name_desc":"Indtast attributstien der indeholder billed-URL\'en (punktnotation understøttes, fx vehicle_data.vehicleDetails.generalDashboard).","width":"Bredde (%)","width_desc":"Angiv bredden som en procentdel af beholderen.","height":"Højde (px)","height_desc":"Angiv højden i pixel.","crop_fit":"Beskær & tilpas","crop_fit_desc":"Kontroller hvordan billedet passer i sin beholder.","fit":{"cover":"Dæk (beskær for at udfylde)","contain":"Indeholder (tilpas hele billedet)","fill":"Fyld (stræk for at tilpasse)","scale_down":"Skaler ned","none":"Ingen (oprindelig størrelse)"},"border_radius":"Hjørneradius","border_radius_desc":"Kontroller billedets afrundede hjørner.","tap_actions":"Tryk-handlinger","filters":"Filtre","filter":{"blur":"Sløring","blur_desc":"Anvend en sløringseffekt på dit billede.","brightness":"Lysstyrke (%)","brightness_desc":"Juster lysstyrken på dit billede.","contrast":"Kontrast (%)","contrast_desc":"Ændr kontrasten på dit billede.","saturation":"Mætning (%)","saturation_desc":"Juster mætningsniveauet på dit billede."},"hover":{"title":"Hover-effekter","effect_type":"Effekttype","effect_type_desc":"Vælg typen af hover-effekt.","scale":"Skalér (zoom ind/ud)","rotate":"Roter","fade":"Fade (ændring af opacitet)","blur":"Slør","brightness":"Lysstyrke","glow":"Glød (kasseskægge)","slide":"Glid (translation)","scale_amount":"Skalering (%)","scale_amount_desc":"Juster billedets skalering ved hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Roter billedet ved hover.","opacity":"Opacitet (%)","opacity_desc":"Ændr billedets opacitet ved hover.","blur_amount":"Sløring (px)","blur_amount_desc":"Anvend sløring på billedet ved hover.","brightness_amount":"Lysstyrke (%)","brightness_amount_desc":"Juster lysstyrken ved hover.","glow_intensity":"Glød-intensitet","glow_intensity_desc":"Vælg intensiteten af glødeffekten ved hover.","glow_light":"Let glød","glow_medium":"Middel glød","glow_heavy":"Kraftig glød","glow_custom":"Brugerdefineret skygge","translate_x":"Vandret (px)","translate_x_desc":"Flyt billedet vandret ved hover.","translate_y":"Lodret (px)","translate_y_desc":"Flyt billedet lodret ved hover."},"alt":"Billede","no_source":"Ingen billedkilde konfigureret"},"graphs":{"chart_type":{"title":"Diagramtype","type":"Type","desc":"Vælg visualiseringsstil for dine data."},"types":{"line":"Linjediagram","bar":"Søjlediagram","pie":"Cirkeldiagram","donut":"Donutdiagram"},"data_sources":{"title":"Datakilder","add_entity":"Tilføj entitet","add_first_entity":"Tilføj din første entitet for at oprette et diagram","no_entities":"Ingen entiteter tilføjet"},"entity":"Entitet","entity_desc":"Vælg en entitet der skal plottes.","display_name_optional":"Visningsnavn (valgfrit)","use_as_card_info":"Brug som kortinfo","attribute":"Attribut","attribute_desc":"Brug entitetstilstand eller vælg en specifik attribut at følge.","attribute_state_default":"Tilstand (standard)","show_points":"Vis punkter","fill_area":"Udfyld område","line_style":"Linjestil","line_solid":"Fuld","line_dashed":"Stiplet","line_dotted":"Prikket","pie_show_title":"Vis titel i sektor","pie_show_value":"Vis værdi i sektor","expand_options":"Udvid indstillinger","no_entities":"Ingen entiteter tilføjet","add_first_entity":"Tilføj din første entitet for at oprette et diagram","add_entity":"Tilføj entitet","display_options":{"title":"Visningsindstillinger"},"show_title":"Vis diagramtitel","show_value":"Vis diagramværdi","chart_title":"Diagramtitel","chart_title_placeholder":"Indtast diagramtitel","time_period":"Tidsperiode","time_period_desc":"Hvor mange historiske data der skal vises.","period":{"1h":"Seneste time","3h":"Seneste 3 timer","6h":"Seneste 6 timer","12h":"Seneste 12 timer","24h":"Seneste 24 timer","2d":"Seneste 2 dage","7d":"Seneste uge","30d":"Seneste måned","90d":"Seneste 3 måneder","365d":"Seneste år"},"normalize_values":"Normalisér værdier til samme skala","normalize_desc":"Nyttigt ved sammenligning af entiteter med forskellige enheder (fx % vs miles)","chart_height":"Diagramhøjde","reset_345":"Nulstil til standard (345px)","chart_width":"Diagrambredde (%)","reset_100":"Nulstil til standard (100%)","agg":{"count":"Antal","delta":"Ændring","first":"Første værdi","last":"Sidste værdi","max":"Maksimum","mean":"Gennemsnit","median":"Median","min":"Minimum","sum":"Sum"},"display":{"add_slice_gap":"Tilføj sektormellemrum","background_color":"Baggrundsfarve","chart_alignment":"Diagramjustering","chart_alignment_desc":"Justering af diagrammet i dets beholder.","chart_height":"Diagramhøjde","chart_options":"Diagramindstillinger","chart_title":"Diagramtitel","chart_title_placeholder":"Indtast diagramtitel","chart_width":"Diagrambredde (%)","chart_width_desc":"Procentdel af modulets tilgængelige bredde. Justering styrer placering.","info_position":"Info-position","info_position_desc":"Position for overlejring der viser navn/værdi.","legend_position":"Forklaringsposition","legend_position_desc":"Hvor forklaringen placeres når aktiveret.","normalize_desc":"Nyttigt ved sammenligning af entiteter med forskellige enheder (fx % vs miles)","normalize_values":"Normalisér værdier til samme skala","show_grid":"Vis gitter","show_legend":"Vis forklaring","show_title":"Vis diagramtitel","show_tooltips":"Vis værktøjstips","show_value":"Vis diagramværdi","smooth_lines":"Udglattede linjer","time_period":"Tidsperiode","time_period_desc":"Hvor mange historiske data der skal vises.","title":"Visningsindstillinger","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Udfyld område","line_style":"Linjestil","line_width":"Linjebredde","show_points":"Vis punkter"},"line_styles":{"dashed":"Stiplet","dotted":"Prikket","solid":"Fuld"},"pie":{"show_title":"Vis titel i sektor","show_value":"Vis værdi i sektor"},"position":{"bottom":"Bund","bottom_left":"Nederst til venstre","bottom_right":"Nederst til højre","center":"Center","hidden":"Skjult","left":"Venstre","middle":"Midten","right":"Højre","top":"Top","top_left":"Øverst til venstre","top_right":"Øverst til højre"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Grundindstillinger","desc":"Konfigurer knappens udseende og tekstindhold."},"text":{"title":"Knaptekst","desc":"Tekst der vises på knappen (lad stå tom for kun ikon)."},"style":{"title":"Knapstil","desc":"Knapens visuelle stil"},"alignment":{"title":"Justering","desc":"Hvordan knappen justeres i sin beholder"},"styles":{"flat":"Flad (standard)","glossy":"Blank","embossed":"Præget","inset":"Indsat","gradient_overlay":"Farveovergang","neon_glow":"Neonglød","outline":"Kontur","glass":"Glas","metallic":"Metallisk"},"align":{"left":"Venstre","center":"Center","right":"Højre","justify":"Juster (fuld bredde)"},"icon":{"title":"Ikonindstillinger","desc":"Konfigurer ikonvisning og -placering for knappen.","before":"Før tekst","after":"Efter tekst","enable_toggle_desc":"Aktivér skifteren ovenfor for at konfigurere ikonindstillinger"},"colors":{"title":"Farver","background":"Baggrundsfarve","text":"Tekstfarve"},"hover":{"effect_type":"Effekttype","effect_type_desc":"Vælg hover-effekt for denne knap.","none":"Ingen","color":"Farveskift","scale":"Skalér","glow":"Glød","lift":"Løft (Y-translation)","hover_color":"Farve ved hover","glow_color":"Glødfarve","title":"Hover-effekter","enable_toggle_desc":"Aktivér skifteren ovenfor for at konfigurere hover-effekter"},"actions":{"type":"Handlingstype","type_desc":"Vælg hvad der sker, når knappen klikkes","entity":"Entitet","entity_desc":"Vælg den entitet der interageres med","navigation_path":"Navigationssti","navigation_path_desc":"Sti at navigere til (fx /dashboard/energy)","service":"Tjeneste","service_desc":"Service der skal kaldes (fx light.turn_on)","service_data":"Service-data (JSON)","service_data_desc":"Valgfrie data der sendes til servicen (JSON-format)"},"tap":{"title":"Tryk-handling","desc":"Handling der udføres når knappen trykkes"},"hold":{"title":"Hold-handling","desc":"Handling der udføres når knappen holdes nede"},"double":{"title":"Dobbelttryk-handling","desc":"Handling der udføres når knappen dobbelttrykkes"},"show_icon":"Vis ikon","show_icon_desc":"Vis et ikon på knappen","icon_desc":"Ikon der vises (fx mdi:home)","icon_position":"Ikonposition","icon_position_desc":"Ikonets position i forhold til tekst","icon_field":"Ikon"},"info":{"entity_section":{"title":"ENTITETSKONFIGURATION"},"entity":"Entitet","entity_desc":"Vælg entiteten der skal vises","icon_section":{"title":"Ikonindstillinger"},"show_icon":"Vis ikon","show_icon_desc":"Vis et ikon ved siden af entitetsværdien","icon":"Ikon","icon_desc":"Vælg et ikon der skal vises","icon_color":"Ikonfarve","name_section":{"title":"Navneindstillinger"},"show_name":"Vis navn","show_name_desc":"Vis entitetsnavnet over værdien","custom_name":"Brugerdefineret navn","custom_name_desc":"Overskriv entitetsnavnet med et brugerdefineret navn","name_color":"Navnefarve","state_section":{"title":"Tilstandsindstillinger"},"show_state":"Vis tilstand","show_state_desc":"Vis entitetstilstand/værdi","show_units":"Vis enheder","show_units_desc":"Vis måleenheden (hvis tilgængelig)","state_color":"Tilstandsfarve","template":{"title":"Skabelontilstand","desc":"Brug en skabelon til at formatere entitetsværdien. Skabeloner giver dig mulighed for at bruge Home Assistants skabelonsyntaks til kompleks formatering.","mode":"Skabelontilstand","mode_desc":"Brug Home Assistants skabelonsyntaks til at formatere værdien","value":"Værdiskabelon","value_desc":"Skabelon til formatering af entitetsværdien ved hjælp af Jinja2-syntaks"},"size_section":{"title":"Størrelsesindstillinger"},"icon_size":"Ikonstørrelse","icon_size_desc":"Størrelse af ikonet i pixels","name_size":"Navnestørrelse","name_size_desc":"Størrelse af entitetsnavnets tekst i pixels","value_size":"Værdistørrelse","value_size_desc":"Størrelse af entitetsværdiens tekst i pixels","icon_gap":"Ikonafstand","icon_gap_desc":"Afstand mellem ikon og indhold i pixels","layout_section":{"title":"Layout og positionering"},"icon_position":"Ikonposition","overall_alignment":"Samlet justering","icon_alignment":"Ikonjustering","content_alignment":"Indholdsjustering","examples_title":"Almindelige eksempler:","example_basic":"Grundværdi","example_units":"Med enheder","example_round":"Afrund til 1 decimal"},"camera":{"config":{"title":"Kamerakonfiguration","desc":"Konfigurer kameraentiteten og visningsindstillinger."},"entity":"Kameraentitet","entity_desc":"Vælg kameraentiteten der skal vises. Dette skal være en kamera- eller mjpeg-entitet fra Home Assistant.","name":"Kameranavn","name_desc":"Brugerdefineret navn til kameraet. Lad stå tomt for at bruge entitetsnavnet.","show_name":"Vis kameranavn","show_name_desc":"Vis kameranavnet på feedet","name_position":{"group_title":"Position af kameranavn","title":"Navneposition","desc":"Vælg hvor kameranavnet vises som et overlay på kamerabilledet.","options":{"top_left":"Øverst til venstre","top_right":"Øverst til højre","center":"Center","bottom_left":"Nederst til venstre","bottom_right":"Nederst til højre"}},"display":{"title":"Visningsindstillinger"},"live_view":{"title":"Live visning","desc":"Aktiver for at vise live kamerastream (kræver stream-integration). Når deaktiveret, vises stillbilleder."},"auto_refresh":{"section_title":"Indstillinger for automatisk opdatering","title":"Automatisk opdatering","desc":"Opdater automatisk kamerabilledet med jævne mellemrum"},"refresh_interval":{"title":"Opdateringsinterval (sekunder)","desc":"Hvor ofte kamerabilledet skal opdateres automatisk."},"dimensions":{"title":"Dimensioner"},"width":"Bredde (px)","width_desc":"Indstil bredden af kameravisningen. Område: 100-1000px","height":"Højde (px)","height_desc":"Indstil højden af kameravisningen. Område: 100-1000px","link_aspect":"Sammenkæd billedformat","unlink_aspect":"Frakobl billedformat","aspect_linked":{"title":"Billedformat sammenkædet","desc":"Dimensioner opretholder {ratio}:1 forhold. Justering af én dimension opdaterer automatisk den anden for at bevare proportioner."},"aspect_independent":{"title":"Uafhængige dimensioner","desc":"Bredde og højde kan justeres uafhængigt. Klik på sammenkædningsknappen ovenfor for at bevare billedformatet."},"crop":{"title":"Beskær og position","desc":"Juster beskæring og position af kameravisningen. Nyttigt til at fokusere på specifikke områder eller fjerne uønskede kanter.","left_title":"Venstre beskæring (%)","left_desc":"Beskær fra venstre kant. Højere værdier viser mindre af venstre side.","right_title":"Højre beskæring (%)","right_desc":"Beskær fra højre kant. Højere værdier viser mindre af højre side.","top_title":"Top beskæring (%)","top_desc":"Beskær fra øverste kant. Højere værdier viser mindre af det øverste område.","bottom_title":"Bund beskæring (%)","bottom_desc":"Beskær fra nederste kant. Højere værdier viser mindre af det nederste område.","active_applied":"Aktive beskæringer anvendt","reset_all":"Nulstil alle beskæringer"},"template":{"title":"Skabelontilstand","desc":"Brug en skabelon til dynamisk at indstille kameraentiteten. Skabeloner giver mulighed for at bruge Home Assistants skabelonsyntaks til betinget kameravalg.","mode_label":"Skabelontilstand","mode_desc":"Brug Home Assistants skabelonsyntaks til dynamisk at vælge kameraentitet","camera_template_label":"Kameraskabelon","camera_template_desc":"Skabelon til dynamisk indstilling af kameraentiteten ved hjælp af Jinja2-syntaks","examples_title":"Almindelige eksempler:","example1_desc":"Vis kamera når vejret er solrigt","example2_desc":"Skift mellem kameraer baseret på input boolean","example3_desc":"Brug input select til at vælge kameraentitet"},"show_name_toggle":{"enable_toggle_desc":"Aktiver skifteren ovenfor for at konfigurere visning af kameranavn"}},"separator":{"config":{"title":"Separator-konfiguration"},"style":{"title":"Separator-stil","desc":"Vælg den visuelle stil for separationslinjen."},"options":{"solid":"Fuld linje","double":"Dobbelt linje","dotted":"Prikket linje","double_dotted":"Dobbelt prikker","shadow":"Skygge","blank":"Tomt mellemrum"},"appearance":{"title":"Udseende"},"thickness":"Tykkelse (px)","thickness_desc":"Tykkelsen på separationslinjen.","width":"Bredde (%)","width_desc":"Separatorens bredde som procent af beholderen.","color":{"title":"Farve","desc":"Farve på separationslinjen."},"show_title":"Vis titel","show_title_desc":"Tilføj tekst i midten af separationslinjen (fx ------ Tekst ------)","text_content":{"title":"Tekstindhold","desc":"Tekst der vises i midten af separationslinjen."},"font_size":"Skriftstørrelse","font_size_desc":"Tekstens størrelse i pixel.","text_color":{"title":"Tekstfarve","desc":"Farve på separatorens tekst."},"text_format":{"title":"Tekstformatering","desc":"Anvend formateringsstile på separatorens tekst.","bold":"Fed","italic":"Kursiv","underline":"Understreget","uppercase":"Store bogstaver","strikethrough":"Gennemstreget"},"spacer":{"title":"Mellemrums-højde"},"height":"Højde (px)","height_desc":"Kontrollerer det visuelle mellemrum for Tomt mellemrum.","show_title_toggle":{"enable_toggle_desc":"Aktivér skifteren ovenfor for at konfigurere titelindstillinger"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Modulnavn:","module_name_placeholder":"Giv dette modul et brugerdefineret navn for at gøre det lettere at identificere i editoren.","module_name_help":"Giv dette modul et brugerdefineret navn for at gøre det lettere at identificere i editoren."},"layout_logic":{"display_title":"Vis dette element","display_desc":"Kontrollér hvornår dette element vises. Vælg \\"Altid\\" for at holde det synligt. Vælg \\"Hvis ALLE betingelser nedenfor er opfyldt\\" eller \\"Hvis ENHVER betingelse nedenfor er opfyldt\\" for kun at vise det, når de tilføjede betingelser er sande.","always":"Altid","every":"Hvis ALLE betingelser er opfyldt","any":"Hvis ENHVER betingelse er opfyldt","conditions":"Betingelser","add_condition":"Tilføj betingelse","no_conditions":"Ingen betingelser tilføjet endnu. Klik \\"Tilføj betingelse\\" for at starte.","condition_types":{"entity_state":"Entitetstilstand","entity_attribute":"Entitetsattribut","time":"Tidsinterval","template":"Skabelon"},"condition_fields":{"entity":"Entitet","operator":"Operator","value":"Værdi","attribute":"Attribut","time_from":"Fra","time_to":"Til","template":"Skabelon"},"condition_header":"Betingelse","custom_name":"Brugernavn","custom_name_desc":"Valgfrit: Giv denne betingelse et navn for nemmere identifikation","condition_type":"Betingelsestype"},"hover_effects":{"title":"Hover-effekter","description":"Konfigurer visuelle effekter, der vises når du holder musen over dette modul, række eller kolonne.","effect":"Hover-effekt","effect_desc":"Vælg den visuelle effekt, der skal anvendes ved hover","effects":{"none":"Ingen","highlight":"Fremhæv","outline":"Kontur","grow":"Voks","shrink":"Skrump","pulse":"Pulsere","bounce":"Hoppe","float":"Svæve","glow":"Glød","shadow":"Skygge","rotate":"Roter","skew":"Skæv","wobble":"Vakle","buzz":"Vibrere","fade":"Fade"}},"design":{"copy":"Kopier","paste":"Indsæt","reset_all":"Nulstil alt","copy_tooltip":"Kopier nuværende designindstillinger (virker på tværs af alle Ultra Cards)","paste_tooltip_has":"Indsæt kopierede designindstillinger (fra tværkort-udklipsholder)","paste_tooltip_none":"Ingen designindstillinger i tværkort-udklipsholder","reset_all_tooltip":"Nulstil alle designindstillinger til standard","text_section":"Tekst","text_color":"Tekstfarve","alignment":"Justering","inherit_alignment":"Arv (ingen justering)","font_size":"Skriftstørrelse","font_size_placeholder":"16px (standard), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Nulstil skriftstørrelse til standard","line_height":"Linjehøjde","line_height_placeholder":"0 (standard), 28px, 1.7","reset_line_height":"Nulstil linjehøjde til standard","letter_spacing":"Bogstavafstand","letter_spacing_placeholder":"auto (standard), 1px, -0.04em","reset_letter_spacing":"Nulstil bogstavafstand til standard","font":"Skrifttype","font_weight":"Skriftvægt","text_transform":"Teksttransformation","font_style":"Skriftstil","default_option":"– Standard –","weight_thin":"100 - Tynd","weight_light":"300 - Let","weight_normal":"400 - Normal","weight_medium":"500 - Mellem","weight_semi_bold":"600 - Halvfed","weight_bold":"700 - Fed","weight_black":"900 - Sort","transform_none":"Ingen","transform_uppercase":"STORE BOGSTAVER","transform_lowercase":"små bogstaver","transform_capitalize":"Stort begyndelsesbogstav","style_normal":"Normal","style_italic":"Kursiv","style_oblique":"Skrå","background_section":"Baggrund","background_color":"Baggrundsfarve","background_image_type":"Baggrundsbilledtype","bg_none":"Ingen","bg_upload":"Upload billede","bg_entity":"Entitetsbillede","bg_url":"Billede-URL","sizes_section":"Størrelser","spacing_section":"Spacing","border_section":"Kant","text_shadow_section":"Tekstskygge","box_shadow_section":"Boksskygge","position_section":"Position","overflow_section":"Overløb","animations_section":"Animationer","width":"Bredde","height":"Højde","max_width":"Maks bredde","max_height":"Maks højde","min_width":"Min bredde","min_height":"Min højde","border_radius":"Kantradius","border_style":"Kantstil","border_width":"Kantbredde","border_color":"Kantfarve","margin":"Margin","padding":"Polstring","top":"Top","right":"Højre","bottom":"Bund","left":"Venstre","unlock_sides":"Lås op for at redigere sider uafhængigt","lock_sides":"Lås for at redigere alle sider sammen","horizontal_shift":"Vandret forskydning","vertical_shift":"Lodret forskydning","blur":"Sløring","text_shadow_color":"Tekstskyggefarve","box_shadow_color":"Boksskyggefarve","overflow":"Overløb","clip_path":"Klippesti","upload_bg_image":"Upload baggrundsbillede","bg_image_entity":"Baggrundsbillede-entitet","bg_image_url":"Baggrundsbillede-URL","choose_file":"Vælg fil","no_file_chosen":"Ingen fil valgt","backdrop_filter":"Baggrundsfilter","spread":"Spredning","visible_default":"Synlig (standard)","examples":"Eksempler","state_based_animation":"Tilstandsbaseret animation","animation_type":"Animationstype","animation_duration":"Animationsvarighed","animation_duration_desc":"Varighed for animationen (f.eks. 2s, 500ms, 1.5s)","intro_outro_animations":"Intro- og outro-animationer","intro_animation":"Intro-animation","outro_animation":"Outro-animation","duration":"Varighed","delay":"Forsinkelse","timing":"Timing","none":"Ingen","ease":"Ease","border_style_none":"Ingen","border_style_solid":"Fuld linje","border_style_dashed":"Stiplet","border_style_dotted":"Prikket","border_style_double":"Double","position_default":"– Standard –","position_static":"Statisk","position_relative":"Relativ","position_absolute":"Absolut","position_fixed":"Fast","position_sticky":"Klæbrig","background_filter":"Background Filter"},"modules":{"text":"Tekstmodul","image":"Billede modul","icon":"Ikon modul","bar":"Bjælke modul","info":"Info-modul","button":"Knap modul","separator":"Separator-modul","markdown":"Markdown-modul","camera":"Kamera modul","graphs":"Diagram-modul","no_text_configured":"Ingen tekst konfigureret","no_image_configured":"Intet billede konfigureret","uploaded_image":"Uploadet billede","icons_configured":"{count} ikoner konfigureret","no_icons_configured":"Ingen ikoner konfigureret","default_entity_suggestion":"Entitet: sensor.battery_level","sample_text":"Eksempeltekst","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Attribut","attribute_name":"Attributnavn","baseline":"Grundlinje","bottom":"Bund","center":"Center","entity":"Entitet","justify":"Justér","left":"Venstre","none":"Ingen","right":"Højre","space_around":"Plads omkring","space_between":"Plads mellem","state":"Tilstand","stretch":"Stræk","top":"Top"},"horizontal":{"alignment":{"horizontal":"Vandret justering","horizontal_desc":"Vælg hvordan elementer justeres vandret i beholderen.","vertical":"Lodret justering","vertical_desc":"Vælg hvordan elementer justeres lodret i beholderen."},"empty":{"add_modules":"Tilføj moduler i layoutbyggeren for at se dem her","no_modules":"Ingen moduler tilføjet endnu"},"gap":{"between_items":"Mellemrum mellem elementer","desc":"Angiv mellemrum mellem vandrette elementer (i rem). Brug negative værdier for overlap.","title":"Mellemrumskonfiguration"},"layout":{"desc":"Konfigurer hvordan elementer arrangeres vandret i beholderen.","title":"Layoutkonfiguration"},"wrapping":{"desc":"Tillad at elementer brydes til næste linje når de overstiger beholderens bredde.","title":"Tillad linjeskift"}},"markdown":{"code_highlighting":"Kodefremhævning","code_highlighting_desc":"Syntaksfremhævning for kodeblokke","content":{"desc":"Indtast dit Markdown-indhold med fuld formatteringsunderstøttelse","label":"Indhold","title":"Markdown-indhold"},"enable_html":"Aktivér HTML","enable_html_desc":"Tillad HTML-tags i Markdown-indhold","enable_tables":"Aktivér tabeller","enable_tables_desc":"Understøttelse af Markdown-tabelsyntaks","features":{"title":"Markdown-funktioner"}},"vertical":{"alignment":{"vertical":"Lodret justering","vertical_desc":"Vælg hvordan elementer justeres lodret i beholderen."},"empty":{"add_modules":"Tilføj moduler i layoutbyggeren for at se dem her","no_modules":"Ingen moduler tilføjet endnu"},"gap":{"between_items":"Mellemrum mellem elementer","desc":"Angiv mellemrum mellem lodrette elementer (i rem). Brug negative værdier for overlap.","title":"Mellemrumskonfiguration"},"layout":{"desc":"Konfigurer hvordan elementer arrangeres lodret i beholderen.","title":"Layoutkonfiguration"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var l=i.t(s,2);const d=JSON.parse('{"editor":{"tabs":{"layout":"Layout-Builder","settings":"Einstellungen","about":"Über","pro":"Pro"},"settings":{"title":"Karten-Einstellungen","description":"Konfigurieren Sie das globale Erscheinungsbild und Verhalten der Karte."},"appearance":{"title":"Erscheinungsbild","description":"Steuern Sie das visuelle Erscheinungsbild Ihrer Karte"},"spacing":{"title":"Abstand","description":"Steuern Sie den Abstand und die Positionierung Ihrer Karte"},"fields":{"card_background_color":"Karten-Hintergrundfarbe","card_background_color_desc":"Die Hintergrundfarbe der gesamten Karte","border_radius":"Rahmen-Radius","border_radius_desc":"Abgerundete Ecken für die Karte (in Pixeln)","card_border_color":"Rahmen-Farbe","card_border_color_desc":"Die Rahmenfarbe der Karte","card_border_width":"Rahmen-Breite","card_border_width_desc":"Die Dicke des Kartenrahmens (in Pixeln)","card_padding":"Karten-Innenabstand","card_padding_desc":"Interner Abstand innerhalb der Karte","card_margin":"Karten-Außenabstand","card_margin_desc":"Externer Abstand um die Karte","unit_px":"px","reset_default":"Auf Standard zurücksetzen","reset_default_value":"Auf Standard zurücksetzen ({value})","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Vollbild aktivieren","return_dashboard":"Zurück zum Dashboard","dashboard":"Dashboard"},"common":{"left":"Links","center":"Mitte","right":"Rechts","top":"Oben","bottom":"Unten","none":"Keine","state":"Zustand","attribute":"Attribut","attribute_name":"Attributname","entity":"Entität","space_between":"Abstand zwischen","space_around":"Abstand um","justify":"Ausrichten","stretch":"Strecken","baseline":"Grundlinie"},"horizontal":{"layout":{"title":"Layout-Konfiguration","desc":"Konfigurieren Sie, wie Elemente horizontal im Container angeordnet werden."},"alignment":{"horizontal":"Horizontale Ausrichtung","horizontal_desc":"Wählen Sie, wie Elemente horizontal im Container ausgerichtet werden.","vertical":"Vertikale Ausrichtung","vertical_desc":"Wählen Sie, wie Elemente vertikal im Container ausgerichtet werden."},"wrapping":{"title":"Umbruch erlauben","desc":"Erlaubt Elementen, zur nächsten Zeile zu wechseln, wenn sie die Container-Breite überschreiten."},"gap":{"title":"Abstand-Konfiguration","between_items":"Abstand zwischen Elementen","desc":"Setzen Sie den Abstand zwischen horizontalen Elementen (in rem-Einheiten). Verwenden Sie negative Werte zum Überlappen von Elementen."},"empty":{"no_modules":"Noch keine Module hinzugefügt","add_modules":"Fügen Sie Module im Layout-Builder hinzu, um sie hier zu sehen"}},"vertical":{"layout":{"title":"Layout-Konfiguration","desc":"Konfigurieren Sie, wie Elemente vertikal im Container angeordnet werden."},"alignment":{"vertical":"Vertikale Ausrichtung","vertical_desc":"Wählen Sie, wie Elemente vertikal im Container ausgerichtet werden."},"gap":{"title":"Abstand-Konfiguration","between_items":"Abstand zwischen Elementen","desc":"Setzen Sie den Abstand zwischen vertikalen Elementen (in rem-Einheiten). Verwenden Sie negative Werte zum Überlappen von Elementen."},"empty":{"no_modules":"Noch keine Module hinzugefügt","add_modules":"Fügen Sie Module im Layout-Builder hinzu, um sie hier zu sehen"}},"layout":{"live_preview":"Live-Vorschau","toggle_preview":"Vorschau umschalten","drag_to_move_module":"Ziehen zum Verschieben des Moduls","edit_module":"Modul bearbeiten","duplicate_module":"Modul duplizieren","delete_module":"Modul löschen","drag_to_move_layout":"Ziehen zum Verschieben des Layout-Moduls","horizontal_layout":"Horizontales Layout","vertical_layout":"Vertikales Layout","add_module_to_layout":"Modul zum Layout hinzufügen","layout_settings":"Layout-Einstellungen","duplicate_layout":"Layout duplizieren","delete_layout":"Layout löschen","click_to_add_module":"Klicken zum Hinzufügen eines Moduls","drop_modules_here":"Module hier ablegen","drag_to_reorder":"Ziehen zum Neuordnen","edit_child_module":"Untermodul bearbeiten","duplicate_child_module":"Untermodul duplizieren","delete_child_module":"Untermodul löschen","module_settings_title":"Modul-Einstellungen","child_module_settings_title":"Untermodul-Einstellungen","general_tab":"Allgemein","actions_tab":"Aktionen","other_tab":"Andere","logic_tab":"Logik","design_tab":"Design","drag_to_resize":"Ziehen zum Ändern der Größe","hidden_by_logic":"Durch Logik verborgen","add_row":"Zeile hinzufügen","add_row_tooltip":"Eine neue Zeile zu Ihrem Layout hinzufügen","undo":"Rückgängig","undo_tooltip":"Letzte Änderung rückgängig machen (Strg+Z)","redo":"Wiederholen","redo_tooltip":"Letzte rückgängig gemachte Änderung wiederholen (Strg+Y)","row_settings":"Zeilen-Einstellungen","column_settings":"Spalten-Einstellungen","row_background_color":"Zeilen-Hintergrundfarbe","column_gap":"Spaltenabstand (px)","vertical_alignment":"Vertikale Ausrichtung","horizontal_alignment":"Horizontale Ausrichtung","column_preview":"Spalten-Vorschau","modules_count":"{count} Module","alignment_top":"Oben","alignment_center":"Mitte","alignment_bottom":"Unten","alignment_stretch":"Strecken","alignment_left":"Links","alignment_right":"Rechts","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"layout_logic":{"display_title":"Dieses Element anzeigen","display_desc":"Steuern Sie, wann dieses Element angezeigt wird. Wählen Sie \\"Immer\\" um es sichtbar zu halten. Wählen Sie \\"Wenn ALLE Bedingungen erfüllt sind\\" oder \\"Wenn EINE Bedingung erfüllt ist\\" um es nur anzuzeigen, wenn die hinzugefügten Bedingungen als wahr bewertet werden.","always":"Immer","every":"Wenn ALLE Bedingungen erfüllt sind","any":"Wenn EINE Bedingung erfüllt ist","conditions":"Bedingungen","add_condition":"Bedingung hinzufügen","no_conditions":"Noch keine Bedingungen hinzugefügt. Klicken Sie auf \\"Bedingung hinzufügen\\" um zu beginnen.","condition_types":{"entity_state":"Entitätszustand","entity_attribute":"Entitätsattribut","time":"Zeitbereich","template":"Vorlage"},"condition_fields":{"entity":"Entität","operator":"Operator","value":"Wert","attribute":"Attribut","time_from":"Von","time_to":"Bis","template":"Vorlage"},"condition_header":"Bedingung","custom_name":"Benutzerdefinierter Name","custom_name_desc":"Optional: Geben Sie dieser Bedingung einen benutzerdefinierten Namen zur leichteren Identifikation","condition_type":"Bedingungstyp"},"hover_effects":{"title":"Hover-Effekte","description":"Konfigurieren Sie visuelle Effekte, die beim Bewegen des Mauszeigers über dieses Modul, diese Zeile oder Spalte angezeigt werden.","effect":"Hover-Effekt","effect_desc":"Wählen Sie den visuellen Effekt aus, der beim Hovern angewendet werden soll","effects":{"none":"Keine","highlight":"Hervorheben","outline":"Umriss","grow":"Vergrößern","shrink":"Verkleinern","pulse":"Pulsieren","bounce":"Springen","float":"Schweben","glow":"Leuchten","shadow":"Schatten","rotate":"Drehen","skew":"Neigen","wobble":"Wackeln","buzz":"Vibrieren","fade":"Ausblenden"}},"about":{"developed_by":"Entwickelt von","desc1":"Ein leistungsstarker modularer Karten-Builder für Home Assistant","desc2":"Erstellen Sie benutzerdefinierte Layouts mit einer professionellen Page-Builder-Oberfläche","desc3":"Modulares Layout-System mit bedingter Logik und professionellen Design-Tools","github_repo":"Besuchen Sie unser Github","join_discord":"Unserem Discord beitreten","support_title":"Ultra Card unterstützen","support_desc":"Ihre großzügigen Spenden fördern die Entwicklung erstaunlicher Funktionen für diese Karte! Ohne die Unterstützung von Benutzern wie Ihnen wäre kontinuierliche Innovation nicht möglich.","leave_tip":"TRINKGELD GEBEN (PAYPAL)","version":"Version"},"actions":{"title":"Link-Konfiguration","description":"Konfigurieren Sie, was passiert, wenn Benutzer mit diesem Element interagieren. Wählen Sie verschiedene Aktionen für Tippen, Halten und Doppeltippen.","tap_action":"Tipp-Aktion","tap_action_desc":"Aktion, die beim Tippen/Klicken auf das Modul ausgeführt wird","hold_action":"Halte-Aktion","hold_action_desc":"Aktion, die beim Gedrückthalten des Moduls ausgeführt wird","double_tap_action":"Doppeltipp-Aktion","double_tap_action_desc":"Aktion, die beim Doppeltippen auf das Modul ausgeführt wird","tap_behavior":"Tipp-Verhalten","tap_behavior_desc":"Aktion, die ausgeführt wird, wenn das Element getippt/geklickt wird.","hold_behavior":"Halte-Verhalten","hold_behavior_desc":"Aktion, die ausgeführt wird, wenn das Element gedrückt und gehalten wird.","double_tap_behavior":"Doppeltipp-Verhalten","double_tap_behavior_desc":"Aktion, die ausgeführt wird, wenn das Element doppelt getippt/geklickt wird.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITÄTS-KONFIGURATION","desc":"Konfigurieren Sie die Entität und aktive/inaktive Zustände"},"entity":"Entität","entity_desc":"Wählen Sie die Entität aus, die dieses Symbol repräsentiert","inactive_state":"Inaktiver Zustand","inactive_state_desc":"Zustandswert gilt als \\"inaktiv\\" (leer lassen, um den tatsächlichen Entitätszustand zu verwenden)","active_state":"Aktiver Zustand","active_state_desc":"Zustandswert gilt als \\"aktiv\\" (leer lassen, um den tatsächlichen Entitätszustand zu verwenden)","icon_section":{"title":"Symbol-Konfiguration"},"inactive_icon":"Inaktives Symbol","inactive_icon_desc":"Symbol, das bei Inaktivität angezeigt wird","inactive_icon_config":"Inaktive Symbol-Konfiguration","inactive_icon_config_desc":"Konfigurieren Sie die Einstellungen für inaktive Symbole","active_icon":"Aktives Symbol","active_icon_desc":"Symbol, das bei Aktivität angezeigt wird","icon_color_inactive":"Farbe bei Inaktivität","icon_color_active":"Farbe bei Aktivität","background_shape_inactive":"Hintergrundform bei Inaktivität","background_shape_active":"Hintergrundform bei Aktivität","background_color_inactive":"Hintergrundfarbe bei Inaktivität","background_color_active":"Hintergrundfarbe bei Aktivität","icon_size_inactive":"Symbolgröße bei Inaktivität","icon_size_active":"Symbolgröße bei Aktivität","inactive_icon_color":"Inaktive Symbolfarbe","active_icon_color":"Aktive Symbolfarbe","inactive_icon_background":"Inaktiver Symbolhintergrund","active_icon_background":"Aktiver Symbolhintergrund","inactive_icon_background_color":"Inaktive Symbolhintergrundfarbe","active_icon_background_color":"Aktive Symbolhintergrundfarbe","name_section":{"title":"Name-Konfiguration"},"inactive_name":"Inaktiver Name","inactive_name_desc":"Benutzerdefinierter Name bei Inaktivität","inactive_name_config":"Inaktive Name-Konfiguration","inactive_name_config_desc":"Konfigurieren Sie die Einstellungen für inaktive Namen","active_name":"Aktiver Name","active_name_desc":"Benutzerdefinierter Name bei Aktivität","custom_inactive_name":"Benutzerdefinierter inaktiver Name","custom_inactive_name_desc":"Entitätsname bei Inaktivität überschreiben (leer lassen, um Entitätsname zu verwenden)","custom_active_name":"Benutzerdefinierter aktiver Name","custom_active_name_desc":"Entitätsname bei Aktivität überschreiben (leer lassen, um Entitätsname zu verwenden)","name_color_inactive":"Namefarbe bei Inaktivität","name_color_active":"Namefarbe bei Aktivität","name_size_inactive":"Nametextgröße bei Inaktivität","name_size_active":"Nametextgröße bei Aktivität","inactive_name_color":"Inaktive Namefarbe","active_name_color":"Aktive Namefarbe","state_section":{"title":"Zustand-Konfiguration"},"inactive_state_color":"Inaktive Zustandsfarbe","active_state_color":"Aktive Zustandsfarbe","inactive_state_text":"Inaktiver Zustandstext","active_state_text":"Aktiver Zustandstext","inactive_state_config":"Inaktive Zustand-Konfiguration","inactive_state_config_desc":"Konfigurieren Sie die Einstellungen für inaktive Zustände","custom_inactive_state":"Benutzerdefinierter inaktiver Zustand","custom_inactive_state_desc":"Benutzerdefinierter Text bei Inaktivität (leer lassen, um tatsächlichen Zustand zu verwenden)","custom_active_state":"Benutzerdefinierter aktiver Zustand","custom_active_state_desc":"Benutzerdefinierter Text bei Aktivität (leer lassen, um tatsächlichen Zustand zu verwenden)","state_color_inactive":"Zustandsfarbe bei Inaktivität","state_color_active":"Zustandsfarbe bei Aktivität","state_size_inactive":"Zustandstextgröße bei Inaktivität","state_size_active":"Zustandstextgröße bei Aktivität","background_section":{"title":"Inaktiver Hintergrund","desc":"Konfigurieren Sie die Einstellungen für inaktive Hintergründe"},"template_section":{"title":"Erweiterter Vorlagen-Modus","desc":"Verwenden Sie Jinja2-Vorlagen für erweiterte Symbolsteuerung. Vorlagen können die Sichtbarkeit steuern (wahr/falsch zum Ein-/Ausblenden von Symbolen) und Zustandstext anpassen. Geben Sie benutzerdefinierten Text für aktiven Zustand zurück, geben Sie tatsächlichen Entitätszustand für inaktiven Zustand zurück."},"template_mode":"Erweiterter Vorlagen-Modus","template":"Vorlage","animation_section":{"title":"Symbol-Animation","desc":"Konfigurieren Sie Animationen für aktive und inaktive Zustände"},"active_animation":"Aktive Animation","active_animation_desc":"Animation wenn Symbol aktiv ist","inactive_animation":"Inaktive Animation","inactive_animation_desc":"Animation wenn Symbol inaktiv ist","animation_none":"Keine","animation_pulse":"Pulsieren","animation_spin":"Drehen","animation_bounce":"Springen","animation_flash":"Blitzen","animation_shake":"Schütteln","animation_vibrate":"Vibrieren","animation_rotate_left":"Links drehen","animation_rotate_right":"Rechts drehen","animation_fade":"Ausblenden","animation_scale":"Skalieren","animation_tada":"Tada"},"text":{"content_section":{"title":"Inhalts-Konfiguration","desc":"Konfigurieren Sie den Textinhalt und die Grundeinstellungen für dieses Modul."},"text_content":"Textinhalt","text_content_desc":"Geben Sie den Textinhalt ein, der in diesem Modul angezeigt werden soll.","icon_section":{"title":"Symbol-Konfiguration","desc":"Wählen Sie ein Symbol, das neben dem Textinhalt angezeigt werden soll."},"icon":"Symbol","icon_desc":"Wählen Sie ein Symbol, das neben dem Text angezeigt werden soll. Lassen Sie es leer für kein Symbol.","icon_position":"Symbol-Position","icon_position_desc":"Wählen Sie, wo das Symbol relativ zum Text positioniert werden soll.","before_text":"Vor dem Text","after_text":"Nach dem Text","template_mode":"Vorlagen-Modus","template_mode_desc":"Verwenden Sie die Home Assistant Vorlagen-Syntax zum Rendern von Text","value_template":"Wert-Vorlage","value_template_desc":"Vorlage zum Rendern des Textes mit Jinja2-Syntax","examples_title":"Häufige Beispiele:","example_basic":"Grundwert","example_percent":"Mit Prozent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"markdown":{"content":{"title":"Markdown-Inhalt","label":"Inhalt","desc":"Geben Sie Ihren Markdown-Inhalt mit vollständiger Formatierungsunterstützung ein"},"features":{"title":"Markdown-Funktionen"},"enable_html":"HTML aktivieren","enable_html_desc":"HTML-Tags im Markdown-Inhalt erlauben","enable_tables":"Tabellen aktivieren","enable_tables_desc":"Unterstützung für Markdown-Tabellensyntax","code_highlighting":"Code-Hervorhebung","code_highlighting_desc":"Syntaxhervorhebung für Codeblöcke"},"bar":{"bar_settings":{"title":"Balken-Einstellungen","desc":"Konfigurieren Sie, wie der Balkenprozentsatz berechnet und angezeigt wird."},"perc_type":{"entity":"Entität (0–100)","attribute":"Entitätsattribut","difference":"Differenz","template":"Vorlage"},"attribute_section":{"title":"Entitätsattribut-Konfiguration","desc":"Entitätsattribut-Einstellungen konfigurieren"},"attribute_entity":"Attribut-Entität","attribute_entity_desc":"Wählen Sie die Entität aus, die das Attribut mit dem Prozentwert enthält","attribute_name":"Attributname","attribute_name_desc":"Geben Sie den Namen des Attributs ein, das den Prozentwert enthält (z. B. \\"battery_level\\")","diff_section":{"title":"Konfiguration der Differenzberechnung","desc":"Einstellungen der Differenzberechnung konfigurieren"},"current_entity":"Entität für aktuellen Wert","current_entity_desc":"Entität, die den aktuellen/genutzten Betrag darstellt (z. B. verbrauchter Kraftstoff, verbrauchte Batterie)","total_entity":"Entität für Gesamtwert","total_entity_desc":"Entität, die den Gesamt-/Maximalwert darstellt (z. B. Tankkapazität, Batteriekapazität)","template_section":{"title":"Vorlagen-Konfiguration","desc":"Vorlageneinstellungen konfigurieren"},"percentage_template":"Prozent-Vorlage","percentage_template_desc":"Geben Sie eine Jinja2-Vorlage ein, die eine Zahl zwischen 0–100 für den Prozentwert zurückgibt. Beispiel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","attr_config":{"title":"Entitätsattribut-Konfiguration","desc":"Entitätsattribut-Einstellungen konfigurieren","attribute_entity":"Attribut-Entität","attribute_entity_desc":"Wählen Sie die Entität aus, die das Attribut mit dem Prozentwert enthält","attribute_name":"Attributname","attribute_name_desc":"Geben Sie den Namen des Attributs ein, das den Prozentwert enthält (z. B. \\"battery_level\\")"},"diff_config":{"title":"Konfiguration der Differenzberechnung","desc":"Einstellungen der Differenzberechnung konfigurieren","current_entity":"Entität für aktuellen Wert","current_entity_desc":"Entität, die den aktuellen/genutzten Betrag darstellt (z. B. verbrauchter Kraftstoff, verbrauchte Batterie)","total_entity":"Entität für Gesamtwert","total_entity_desc":"Entität, die den Gesamt-/Maximalwert darstellt (z. B. Tankkapazität, Batteriekapazität)"},"template_config":{"title":"Vorlagen-Konfiguration","desc":"Vorlageneinstellungen konfigurieren","percentage_template":"Prozent-Vorlage","percentage_template_desc":"Geben Sie eine Jinja2-Vorlage ein, die eine Zahl zwischen 0–100 für den Prozentwert zurückgibt. Beispiel: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"entity":{"title":"Prozent-Entität des Balkens","desc_present":"Die Entität, die den Prozentwert für den Balken liefert.","desc_empty":"Wählen Sie eine Entität, die einen Prozentwert (0–100) liefert. Batteriesensoren eignen sich ideal für Balken.","no_entity_warning":"Keine Entität ausgewählt – Bitte wählen Sie einen Sensor mit Werten zwischen 0–100"},"limit_entity":{"title":"Grenzwert-Entität (optional)","desc":"Optional: Fügen Sie eine vertikale Indikatorlinie auf dem Balken hinzu (z. B. Ladungsgrenze für EV-Batterie)."},"appearance":{"title":"Balken-Erscheinungsbild","direction":"Füllrichtung","direction_desc":"Wählen Sie die Richtung, in die sich der Balken bei steigendem Wert füllt.","left_to_right":"Links nach Rechts","right_to_left":"Rechts nach Links","height":"Balkenhöhe","height_desc":"Passen Sie die Dicke des Fortschrittsbalkens in Pixeln an.","border_radius":"Rahmen-Radius","border_radius_desc":"Steuern Sie die abgerundeten Ecken des Balkens.","style":"Balkenstil","style_desc":"Wählen Sie den visuellen Stil des Fortschrittsbalkens.","style_flat":"Flach (Standard)","style_glossy":"Glänzend","style_embossed":"Geprägt","style_inset":"Vertieft","style_gradient":"Farbverlauf-Überlagerung","style_neon":"Neon-Leuchten","style_outline":"Umriss","style_glass":"Glas","style_metallic":"Metallisch","style_neumorphic":"Neumorph","style_dashed":"Gestrichelt","style_dots":"Punkte","width":"Balkenbreite","width_desc":"Legen Sie die Balkenbreite als Prozentsatz des Containers fest.","alignment":"Balkenausrichtung","alignment_desc":"Wählen Sie, wie der Balken ausgerichtet wird, wenn er weniger als 100 % Breite hat."},"labels":{"alignment":"Beschriftungsausrichtung","alignment_desc":"Steuern Sie, wie linke und rechte Beschriftungen positioniert werden."},"percentage":{"title":"Anzeige von Prozenttext","desc":"Steuern Sie die Sichtbarkeit und das Erscheinungsbild der Prozentwerte, die direkt auf dem Balken angezeigt werden. Diese Zahlen liefern einen klaren visuellen Indikator für den aktuellen Stand.","text_size":"Textgröße","text_size_desc":"Passen Sie die Größe des Prozenttextes auf dem Balken an.","text_alignment":"Ausrichtung des Prozenttexts"},"text_display":{"title":"Textanzeige","desc":"Steuern Sie die Sichtbarkeit und das Erscheinungsbild der Textwerte, die direkt auf dem Balken angezeigt werden. Bei Differenz- und Vorlagenmodi können Sie wählen, ob Rohentitätswerte anstelle von Prozentsätzen angezeigt werden sollen.","show_value":"Wert statt Prozentsatz anzeigen","show_value_desc":"Wenn aktiviert, wird der tatsächliche Entitätswert anstelle des Prozentsatzes angezeigt. Nützlich für die Anzeige von Rohsensorwerten wie \\"45 kWh\\" anstelle von \\"75%\\".","text_size":"Textgröße","text_size_desc":"Passen Sie die Größe des auf dem Balken angezeigten Textes an.","text_alignment":"Textausrichtung"},"left":{"title":"Linke Seite","desc":"Konfigurieren Sie den Titel und den Entitätswert, der auf der linken Seite des Balkens angezeigt wird. Dies ist nützlich, um Beschriftungen wie \'Reichweite\' oder \'Batterie\' zusammen mit ihren Werten anzuzeigen.","title_size":"Titelgröße","value_size":"Wertgröße","template_mode":"Vorlagen-Modus","template_desc":"Verwenden Sie eine Vorlage, um den angezeigten Wert zu formatieren. Vorlagen verwenden die Jinja2-Syntax von Home Assistant.","value_template":"Wert-Vorlage","value_template_desc":"Vorlage zur Formatierung des Werts auf der linken Seite mit Jinja2-Syntax","enable_toggle":"Aktivieren Sie den Schalter oben, um die Einstellungen für die linke Seite zu konfigurieren"},"right":{"title":"Rechte Seite","desc":"Konfigurieren Sie den Titel und den Entitätswert, der auf der rechten Seite des Balkens angezeigt wird. Dies ist ideal für ergänzende Informationen wie \'Zeit bis voll\' oder sekundäre Messwerte.","title_size":"Titelgröße","value_size":"Wertgröße","template_mode":"Vorlagen-Modus","template_desc":"Verwenden Sie eine Vorlage, um den angezeigten Wert zu formatieren. Vorlagen verwenden die Jinja2-Syntax von Home Assistant.","value_template":"Wert-Vorlage","value_template_desc":"Vorlage zur Formatierung des Werts auf der rechten Seite mit Jinja2-Syntax","enable_toggle":"Aktivieren Sie den Schalter oben, um die Einstellungen für die rechte Seite zu konfigurieren"},"colors":{"title":"Farben","bar_color":"Balkenfarbe","background_color":"Hintergrundfarbe","border_color":"Randfarbe","limit_indicator":"Grenzwertanzeige","percentage_text":"Prozenttext","text_color":"Textfarbe","text_color_desc":"Wählen Sie die Farbe für den auf dem Balken angezeigten Text.","dot_color":"Punktfarbe","left_side":"Farben der linken Seite","right_side":"Farben der rechten Seite","title_color":"Titelfarbe","value_color":"Wertfarbe"},"minimal":{"icon_enabled":"Symbol aktivieren","icon_enabled_desc":"Ein Symbol auf dem minimalen Balken-Indikator anzeigen","icon":"Symbol","icon_desc":"Wählen Sie ein Symbol zur Anzeige (z. B. mdi:battery)","icon_mode":"Anzeigemodus","icon_mode_desc":"Wie das Symbol angezeigt werden soll","mode_dot_only":"Nur Punkt","mode_icon_only":"Nur Symbol","mode_icon_in_dot":"Symbol im Punkt","icon_size_auto":"Symbol automatisch skalieren","icon_size_auto_desc":"Symbol automatisch mit Balkenhöhe skalieren","icon_size":"Symbolgröße","icon_size_desc":"Benutzerdefinierte Symbolgröße in Pixeln","use_dot_color":"Punktfarbe verwenden","use_dot_color_desc":"Die Punktfarbe für das Symbol verwenden (entspricht dem Farbverlauf)","icon_color":"Symbolfarbe","icon_color_desc":"Benutzerdefinierte Farbe für das Symbol","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"gradient":{"title":"Farbverlaufsmodus","desc":"Wenden Sie einen Farbverlauf auf die Balkenfüllung an. Wenn aktiviert, wählen Sie, wie der Verlauf angezeigt wird, und passen Sie unten die Farbstopps an.","full":"Voll","cropped":"Zugeschnitten","value_based":"Wertbasiert"},"animation":{"title":"Balkenanimation","desc":"Animieren Sie die Balkenfüllung mit Presets wie Lade-Streifen, Pulsieren, Leuchten und mehr. Sie können Animationen basierend auf dem Zustand oder einem Attribut einer Entität auslösen und optional die Animation überschreiben, wenn eine andere Bedingung erfüllt ist.","trigger":{"title":"Animationsauslöser","desc":"Wählen Sie eine Entität aus und definieren Sie den Wert + die Animation, die angewendet werden soll, wenn dieser übereinstimmt.","entity_desc":"Entität für Animationsauslöser","type":"Auslösertype","type_desc":"Wählen Sie, ob der Entitätszustand oder ein Attribut verglichen werden soll","attribute_name_desc":"Attributname zum Vergleichen (z. B. charging_status)","match_value":"Vergleichswert","match_value_desc":"Text zum Vergleich mit Zustand oder Attribut (Vergleich ist textbasiert)."},"type":"Animationstyp","type_desc":"Wählen Sie, wie der Balken animiert werden soll, wenn er ausgelöst wird.","types":{"charging":"Laden (diagonale Linien)","pulse":"Pulsieren","blinking":"Blinken","bouncing":"Springen","glow":"Leuchten","rainbow":"Regenbogen","bubbles":"Blasen","fill":"Füllen","ripple":"Wellen","traffic":"Laufband (Barber Pole)","heartbeat":"Herzschlag","flicker":"Flackern","shimmer":"Schimmern","vibrate":"Vibrieren"},"override":{"title":"Aktions-Animations-Override","desc":"Wählen Sie eine Aktions-Entität und einen Zustand, um festzulegen, wann diese Animation die reguläre Animation überschreiben soll","entity_desc":"Entität zur Auswertung für den Override-Auslöser","type_desc":"Animation, die verwendet wird, wenn die Override-Bedingung erfüllt ist.","attribute_name_desc":"Attributname zum Vergleichen","match_value":"Override-Vergleichswert","match_value_desc":"Textvergleich mit Zustand oder Attribut","type":"Override-Animationstyp"}}},"image":{"settings":"Bildeinstellungen","source_type":"Bildquellentyp","source_type_desc":"Wählen Sie aus, wie Sie die Bildquelle angeben möchten.","source":{"default":"Standardbild","url":"Bild-URL","upload":"Bild hochladen","entity":"Entitätsbild","attribute":"Entitätsattribut"},"url_section":{"title":"Konfiguration der Bild-URL"},"image_url":"Bild-URL","image_url_desc":"Geben Sie die direkte URL zu dem Bild ein, das Sie anzeigen möchten.","upload_section":{"title":"Konfiguration Bild-Upload"},"upload":"Bild hochladen","upload_desc":"Klicken Sie, um eine Bilddatei von Ihrem Gerät hochzuladen.","entity_section":{"title":"Konfiguration Entitätsbild"},"entity":"Entität","entity_desc":"Wählen Sie eine Entität mit Bild (z. B. Personen- oder Kamera-Entitäten).","attribute_section":{"title":"Entitätsattribut-Konfiguration"},"entity_attr_desc":"Wählen Sie die Entität aus, die die Bild-URL in einem ihrer Attribute enthält.","attribute_name":"Attributname","attribute_name_desc":"Geben Sie den Attributpfad ein, der die Bild-URL enthält (Punktnotation wird unterstützt, z. B. vehicle_data.vehicleDetails.generalDashboard).","width":"Breite (%)","width_desc":"Legen Sie die Breite als Prozentsatz des Containers fest.","height":"Höhe (px)","height_desc":"Legen Sie die Höhe in Pixeln fest.","crop_fit":"Zuschneiden & Anpassen","crop_fit_desc":"Steuern Sie, wie das Bild in seinen Container passt.","fit":{"cover":"Abdecken (zum Füllen zuschneiden)","contain":"Einpassen (gesamtes Bild anzeigen)","fill":"Füllen (zum Anpassen strecken)","scale_down":"Herunterskalieren","none":"Keine (Originalgröße)"},"border_radius":"Rahmen-Radius","border_radius_desc":"Steuern Sie die abgerundeten Ecken des Bildes.","tap_actions":"Tipp-Aktionen","filters":"Filter","filter":{"blur":"Weichzeichnen","blur_desc":"Wenden Sie einen Weichzeichnungseffekt auf Ihr Bild an.","brightness":"Helligkeit (%)","brightness_desc":"Passen Sie die Helligkeit Ihres Bildes an.","contrast":"Kontrast (%)","contrast_desc":"Ändern Sie den Kontrast Ihres Bildes.","saturation":"Sättigung (%)","saturation_desc":"Passen Sie die Sättigung Ihres Bildes an."},"hover":{"title":"Hover-Effekte","effect_type":"Effekttyp","effect_type_desc":"Wählen Sie den Typ des Hover-Effekts.","scale":"Skalieren (heran-/herauszoomen)","rotate":"Drehen","fade":"Überblenden (Deckkraftänderung)","blur":"Weichzeichnen","brightness":"Helligkeit","glow":"Leuchten (Schlagschatten)","slide":"Verschieben (Translate)","scale_amount":"Skalierung (%)","scale_amount_desc":"Passen Sie die Skalierung des Bildes beim Hover an.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotieren Sie das Bild beim Hover.","opacity":"Deckkraft (%)","opacity_desc":"Ändern Sie die Deckkraft des Bildes beim Hover.","blur_amount":"Weichzeichnen (px)","blur_amount_desc":"Wenden Sie beim Hover einen Weichzeichnungseffekt auf das Bild an.","brightness_amount":"Helligkeit (%)","brightness_amount_desc":"Passen Sie die Helligkeit des Bildes beim Hover an.","glow_intensity":"Leuchtintensität","glow_intensity_desc":"Wählen Sie die Intensität des Leuchteffekts beim Hover.","glow_light":"Leichtes Leuchten","glow_medium":"Mittleres Leuchten","glow_heavy":"Starkes Leuchten","glow_custom":"Benutzerdefinierter Schatten","translate_x":"Horizontal (px)","translate_x_desc":"Verschieben Sie das Bild beim Hover horizontal.","translate_y":"Vertikal (px)","translate_y_desc":"Verschieben Sie das Bild beim Hover vertikal."},"alt":"Bild","no_source":"Keine Bildquelle konfiguriert"},"graphs":{"chart_type":{"title":"Diagrammtyp","type":"Typ","desc":"Wählen Sie den Visualisierungsstil für Ihre Daten."},"types":{"line":"Liniendiagramm","bar":"Balkendiagramm","pie":"Kreisdiagramm","donut":"Donut-Diagramm"},"data_sources":{"title":"Datenquellen","no_entities":"Keine Entitäten hinzugefügt","add_first_entity":"Fügen Sie Ihre erste Entität hinzu, um ein Diagramm zu erstellen","add_entity":"Entität hinzufügen"},"entity":"Entität","line":{"show_points":"Punkte anzeigen","fill_area":"Fläche füllen","line_width":"Linienbreite","line_style":"Linienstil"},"line_styles":{"solid":"Durchgezogen","dashed":"Gestrichelt","dotted":"Gepunktet"},"display":{"title":"Anzeigeoptionen","show_title":"Diagrammtitel anzeigen","show_value":"Diagrammwert anzeigen","chart_title":"Diagrammtitel","chart_title_placeholder":"Diagrammtitel eingeben","time_period":"Zeitraum","time_period_desc":"Wie viele historische Daten angezeigt werden sollen.","normalize_values":"Werte auf gleiche Skala normalisieren","normalize_desc":"Nützlich beim Vergleich von Entitäten mit unterschiedlichen Einheiten (z. B. % vs. Meilen)","chart_height":"Diagrammhöhe","chart_width":"Diagrammbreite (%)","chart_width_desc":"Prozentsatz der verfügbaren Modulbreite. Ausrichtung steuert die Platzierung.","chart_alignment":"Diagrammausrichtung","chart_alignment_desc":"Ausrichtung des Diagramms innerhalb seines Containers.","info_position":"Info-Position","info_position_desc":"Position der Überlagerung mit Name/Wert.","legend_position":"Legendenposition","legend_position_desc":"Position der Legende, wenn aktiviert.","background_color":"Hintergrundfarbe","chart_options":"Diagrammoptionen","show_legend":"Legende anzeigen","show_grid":"Gitter anzeigen","smooth_lines":"Linien glätten","show_tooltips":"Tooltips anzeigen","add_slice_gap":"Segmentabstand hinzufügen","show_grid_values":"Show Grid Values"},"agg":{"mean":"Durchschnitt","sum":"Summe","min":"Minimum","max":"Maximum","median":"Median","first":"Erster Wert","last":"Letzter Wert","count":"Anzahl","delta":"Änderung"},"position":{"top":"Oben","bottom":"Unten","left":"Links","right":"Rechts","hidden":"Ausgeblendet","top_left":"Oben links","top_right":"Oben rechts","bottom_left":"Unten links","bottom_right":"Unten rechts","middle":"Mitte","center":"Mitte"},"pie":{"show_title":"Titel im Segment anzeigen","show_value":"Wert im Segment anzeigen"},"period":{"1h":"Letzte Stunde","3h":"Letzte 3 Stunden","6h":"Letzte 6 Stunden","12h":"Letzte 12 Stunden","24h":"Letzte 24 Stunden","2d":"Letzte 2 Tage","7d":"Letzte Woche","30d":"Letzter Monat","90d":"Letzte 3 Monate","365d":"Letztes Jahr"},"reset_345":"Auf Standard zurücksetzen (345px)","reset_100":"Auf Standard zurücksetzen (100%)","entity_desc":"Wählen Sie eine Entität zum Plotten.","display_name_optional":"Anzeigename (optional)","use_as_card_info":"Als Karteninfo verwenden","attribute":"Attribut","attribute_desc":"Entitätszustand verwenden oder ein bestimmtes Attribut zum Verfolgen auswählen.","attribute_state_default":"Zustand (Standard)","show_points":"Punkte anzeigen","fill_area":"Fläche füllen","line_style":"Linienstil","line_solid":"Durchgezogen","line_dashed":"Gestrichelt","line_dotted":"Gepunktet","pie_show_title":"Titel im Segment anzeigen","pie_show_value":"Wert im Segment anzeigen","expand_options":"Optionen erweitern","no_entities":"Keine Entitäten hinzugefügt","add_first_entity":"Fügen Sie Ihre erste Entität hinzu, um ein Diagramm zu erstellen","add_entity":"Entität hinzufügen","display_options":{"title":"Anzeigeoptionen"},"show_title":"Diagrammtitel anzeigen","show_value":"Diagrammwert anzeigen","chart_title":"Diagrammtitel","chart_title_placeholder":"Diagrammtitel eingeben","time_period":"Zeitraum","time_period_desc":"Wie viele historische Daten angezeigt werden sollen.","normalize_values":"Werte auf gleiche Skala normalisieren","normalize_desc":"Nützlich beim Vergleich von Entitäten mit unterschiedlichen Einheiten (z. B. % vs. Meilen)","chart_height":"Diagrammhöhe","chart_width":"Diagrammbreite (%)","data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"info":{"entity_section":{"title":"ENTITÄTS-KONFIGURATION"},"entity":"Entität","entity_desc":"Wählen Sie die anzuzeigende Entität aus","icon_section":{"title":"Symbol-Einstellungen"},"show_icon":"Symbol anzeigen","show_icon_desc":"Ein Symbol neben dem Entitätswert anzeigen","icon":"Symbol","icon_desc":"Wählen Sie ein anzuzeigendes Symbol","icon_color":"Symbolfarbe","name_section":{"title":"Name-Einstellungen"},"show_name":"Name anzeigen","show_name_desc":"Den Entitätsnamen über dem Wert anzeigen","custom_name":"Benutzerdefinierter Name","custom_name_desc":"Den Entitätsnamen durch einen benutzerdefinierten Namen ersetzen","name_color":"Farbe des Namens","state_section":{"title":"Zustandseinstellungen"},"show_state":"Zustand anzeigen","show_state_desc":"Den Entitätszustand/-wert anzeigen","show_units":"Einheiten anzeigen","show_units_desc":"Die Maßeinheit anzeigen (falls verfügbar)","state_color":"Zustandsfarbe","template":{"title":"Vorlagen-Modus","desc":"Verwenden Sie eine Vorlage, um den Entitätswert zu formatieren. Vorlagen ermöglichen die Verwendung der Home-Assistant-Templating-Syntax für komplexe Formatierungen.","mode":"Vorlagen-Modus","mode_desc":"Verwenden Sie die Home-Assistant-Templating-Syntax zur Formatierung des Werts","value":"Wert-Vorlage","value_desc":"Vorlage zur Formatierung des Entitätswerts mit Jinja2-Syntax"},"size_section":{"title":"Größeneinstellungen"},"icon_size":"Symbolgröße","icon_size_desc":"Größe des Symbols in Pixeln","name_size":"Namensgröße","name_size_desc":"Größe des Entitätsnamens in Pixeln","value_size":"Wertgröße","value_size_desc":"Größe des Entitätswerts in Pixeln","icon_gap":"Symbolabstand","icon_gap_desc":"Abstand zwischen Symbol und Inhalt in Pixeln","layout_section":{"title":"Layout & Positionierung"},"icon_position":"Symbol-Position","overall_alignment":"Gesamtausrichtung","icon_alignment":"Symbolausrichtung","content_alignment":"Inhaltsausrichtung","examples_title":"Häufige Beispiele:","example_basic":"Grundwert","example_units":"Mit Einheiten","example_round":"Auf 1 Dezimalstelle runden"},"button":{"basic":{"title":"Grundeinstellungen","desc":"Konfigurieren Sie das Erscheinungsbild der Schaltfläche und den Textinhalt."},"text":{"title":"Schaltflächentext","desc":"Text, der auf der Schaltfläche angezeigt wird (leer lassen für nur Symbol)."},"style":{"title":"Schaltflächenstil","desc":"Visueller Stil der Schaltfläche"},"alignment":{"title":"Ausrichtung","desc":"Wie die Schaltfläche in ihrem Container ausgerichtet ist"},"styles":{"flat":"Flach (Standard)","glossy":"Glänzend","embossed":"Geprägt","inset":"Vertieft","gradient_overlay":"Farbverlauf-Überlagerung","neon_glow":"Neon-Leuchten","outline":"Umriss","glass":"Glas","metallic":"Metallisch"},"align":{"left":"Links","center":"Mitte","right":"Rechts","justify":"Auffüllen (volle Breite)"},"icon":{"title":"Symboleinstellungen","desc":"Anzeige und Positionierung des Symbols für die Schaltfläche konfigurieren.","before":"Vor dem Text","after":"Nach dem Text","enable_toggle_desc":"Aktivieren Sie den Schalter oben, um die Symboleinstellungen zu konfigurieren"},"icon_field":"Symbol","show_icon":"Symbol anzeigen","show_icon_desc":"Ein Symbol auf der Schaltfläche anzeigen","icon_desc":"Anzuzeigendes Symbol (z. B. mdi:home)","icon_position":"Symbol-Position","icon_position_desc":"Position des Symbols relativ zum Text","colors":{"title":"Farben","background":"Hintergrundfarbe","text":"Textfarbe"},"hover":{"title":"Hover-Effekte","effect_type":"Effekttyp","effect_type_desc":"Wählen Sie den Hover-Effekt für diese Schaltfläche.","none":"Keine","color":"Farbänderung","scale":"Skalieren","glow":"Leuchten","lift":"Anheben (translate Y)","hover_color":"Hover-Farbe","glow_color":"Leuchtfarbe","enable_toggle_desc":"Aktivieren Sie den Schalter oben, um die Hover-Effekte zu konfigurieren"},"actions":{"type":"Aktionstyp","type_desc":"Wählen Sie, was beim Klick auf die Schaltfläche passiert","entity":"Entität","entity_desc":"Wählen Sie die Entität für die Interaktion","navigation_path":"Navigationspfad","navigation_path_desc":"Pfad zum Navigieren (z. B. /dashboard/energy)","service":"Dienst","service_desc":"Aufzurufender Dienst (z. B. light.turn_on)","service_data":"Servicedaten (JSON)","service_data_desc":"Optionale Daten, die an den Dienst übergeben werden (JSON-Format)"},"tap":{"title":"Tipp-Aktion","desc":"Aktion, die beim Tippen ausgeführt wird"},"hold":{"title":"Halte-Aktion","desc":"Aktion, die beim Gedrückthalten ausgeführt wird"},"double":{"title":"Doppeltipp-Aktion","desc":"Aktion, die beim Doppeltippen ausgeführt wird"}},"layout_extra":{"module_name":"Modulname:","module_name_placeholder":"Geben Sie diesem Modul einen benutzerdefinierten Namen, um es im Editor leichter zu identifizieren.","module_name_help":"Geben Sie diesem Modul einen benutzerdefinierten Namen, um es im Editor leichter zu identifizieren."},"camera":{"config":{"title":"Kamera-Konfiguration","desc":"Konfigurieren Sie die Kamera-Entität und Anzeigeeinstellungen."},"entity":"Kamera-Entität","entity_desc":"Wählen Sie die anzuzeigende Kamera-Entität. Dies sollte eine Kamera- oder MJPEG-Entität aus Home Assistant sein.","name":"Kameraname","name_desc":"Benutzerdefinierter Name für die Kamera. Leer lassen, um den Entitätsnamen zu verwenden.","show_name":"Kameranamen anzeigen","show_name_desc":"Den Kameranamen im Feed anzeigen","show_name_toggle":{"enable_toggle_desc":"Aktivieren Sie den obigen Schalter, um die Anzeige des Kameranamens zu konfigurieren"},"name_position":{"group_title":"Position des Kameranamens","title":"Namensposition","desc":"Wählen Sie, wo der Kameraname als Overlay auf dem Kamerabild erscheint.","options":{"top_left":"Oben links","top_right":"Oben rechts","center":"Mitte","bottom_left":"Unten links","bottom_right":"Unten rechts"}},"display":{"title":"Anzeigeeinstellungen"},"live_view":{"title":"Live-Ansicht","desc":"Aktivieren, um den Live-Kamerastream anzuzeigen (erfordert Stream-Integration). Wenn deaktiviert, werden Standbilder angezeigt."},"auto_refresh":{"section_title":"Automatische Aktualisierung","title":"Automatisch aktualisieren","desc":"Das Kamerabild in regelmäßigen Abständen automatisch aktualisieren"},"refresh_interval":{"title":"Aktualisierungsintervall (Sekunden)","desc":"Wie oft das Kamerabild automatisch aktualisiert werden soll."},"dimensions":{"title":"Abmessungen"},"width":"Breite (px)","width_desc":"Legen Sie die Breite der Kameraanzeige fest. Bereich: 100–1000 px","height":"Höhe (px)","height_desc":"Legen Sie die Höhe der Kameraanzeige fest. Bereich: 100–1000 px","link_aspect":"Seitenverhältnis verknüpfen","unlink_aspect":"Seitenverhältnis lösen","aspect_linked":{"title":"Seitenverhältnis verknüpft","desc":"Abmessungen behalten das Verhältnis {ratio}:1 bei. Das Anpassen einer Abmessung aktualisiert automatisch die andere, um die Proportionen beizubehalten."},"aspect_independent":{"title":"Unabhängige Abmessungen","desc":"Breite und Höhe können unabhängig angepasst werden. Klicken Sie oben auf Verknüpfen, um das Seitenverhältnis beizubehalten."},"crop":{"title":"Zuschnitt & Position","desc":"Passen Sie Zuschnitt und Position der Kameraansicht an. Nützlich, um bestimmte Bereiche zu fokussieren oder unerwünschte Ränder zu entfernen.","left_title":"Zuschnitt links (%)","left_desc":"Vom linken Rand zuschneiden. Höhere Werte zeigen weniger von der linken Seite.","right_title":"Zuschnitt rechts (%)","right_desc":"Vom rechten Rand zuschneiden. Höhere Werte zeigen weniger von der rechten Seite.","top_title":"Zuschnitt oben (%)","top_desc":"Vom oberen Rand zuschneiden. Höhere Werte zeigen weniger vom oberen Bereich.","bottom_title":"Zuschnitt unten (%)","bottom_desc":"Vom unteren Rand zuschneiden. Höhere Werte zeigen weniger vom unteren Bereich.","active_applied":"Aktive Zuschnitte angewendet","reset_all":"Alle Zuschnitte zurücksetzen"},"template":{"title":"Vorlagen-Modus","desc":"Verwenden Sie eine Vorlage, um die Kamera-Entität dynamisch festzulegen. Vorlagen erlauben die Home-Assistant-Templating-Syntax für bedingte Kameraauswahl.","mode_label":"Vorlagen-Modus","mode_desc":"Verwenden Sie die Home-Assistant-Templating-Syntax, um die Kamera-Entität dynamisch zu wählen","camera_template_label":"Kamera-Vorlage","camera_template_desc":"Vorlage zum dynamischen Setzen der Kamera-Entität mittels Jinja2-Syntax","examples_title":"Häufige Beispiele:","example1_desc":"Kamera anzeigen, wenn das Wetter sonnig ist","example2_desc":"Zwischen Kameras basierend auf einem Input-Bool wechseln","example3_desc":"Input Select verwenden, um die Kamera-Entität zu wählen"}},"separator":{"config":{"title":"Trennzeichen-Konfiguration"},"style":{"title":"Trennzeichenstil","desc":"Wählen Sie den visuellen Stil der Trennlinie."},"options":{"solid":"Durchgezogene Linie","double":"Doppellinie","dotted":"Gepunktete Linie","double_dotted":"Doppelt gepunktet","shadow":"Schatten","blank":"Leerraum"},"appearance":{"title":"Erscheinungsbild"},"thickness":"Dicke (px)","thickness_desc":"Dicke der Trennlinie.","width":"Breite (%)","width_desc":"Breite des Trennzeichens als Prozentsatz des Containers.","color":{"title":"Farbe","desc":"Farbe der Trennlinie."},"show_title":"Titel anzeigen","show_title_desc":"Fügen Sie Text in der Mitte der Trennlinie hinzu (z. B. ------ Text ------)","show_title_toggle":{"enable_toggle_desc":"Aktivieren Sie den obigen Schalter, um die Titel-Einstellungen zu konfigurieren"},"text_content":{"title":"Textinhalt","desc":"Text, der in der Mitte des Trennzeichens angezeigt wird."},"font_size":"Schriftgröße","font_size_desc":"Größe des Textes in Pixeln.","text_color":{"title":"Textfarbe","desc":"Farbe des Trennzeichen-Textes."},"text_format":{"title":"Textformatierung","desc":"Formatierungsstile auf den Trennzeichen-Text anwenden.","bold":"Fett","italic":"Kursiv","underline":"Unterstreichen","uppercase":"Großbuchstaben","strikethrough":"Durchgestrichen"},"spacer":{"title":"Abstandshöhe"},"height":"Höhe (px)","height_desc":"Steuert den sichtbaren Abstand für Leerraum.","orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"design":{"copy":"Kopieren","paste":"Einfügen","reset_all":"Alle zurücksetzen","copy_tooltip":"Aktuelle Design-Einstellungen kopieren (funktioniert kartenübergreifend)","paste_tooltip_has":"Kopierte Design-Einstellungen einfügen (aus der kartenübergreifenden Zwischenablage)","paste_tooltip_none":"Keine Design-Einstellungen in der kartenübergreifenden Zwischenablage","reset_all_tooltip":"Alle Design-Einstellungen auf Standard zurücksetzen","text_section":"Text","text_color":"Textfarbe","alignment":"Ausrichtung","inherit_alignment":"Vererben (keine Ausrichtung)","font_size":"Schriftgröße","font_size_placeholder":"16px (Standard), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Schriftgröße auf Standard zurücksetzen","line_height":"Zeilenhöhe","line_height_placeholder":"0 (Standard), 28px, 1.7","reset_line_height":"Zeilenhöhe auf Standard zurücksetzen","letter_spacing":"Buchstabenabstand","letter_spacing_placeholder":"auto (Standard), 1px, -0.04em","reset_letter_spacing":"Buchstabenabstand auf Standard zurücksetzen","font":"Schriftart","font_weight":"Schriftstärke","text_transform":"Texttransformation","font_style":"Schriftstil","default_option":"– Standard –","weight_thin":"100 - Dünn","weight_light":"300 - Leicht","weight_normal":"400 - Normal","weight_medium":"500 - Mittel","weight_semi_bold":"600 - Halb-fett","weight_bold":"700 - Fett","weight_black":"900 - Schwarz","transform_none":"Keine","transform_uppercase":"GROßBUCHSTABEN","transform_lowercase":"kleinschreibung","transform_capitalize":"Großschreibung","style_normal":"Normal","style_italic":"Kursiv","style_oblique":"Schräg","background_section":"Hintergrund","background_color":"Hintergrundfarbe","background_image_type":"Hintergrundbild-Typ","bg_none":"Keine","bg_upload":"Bild hochladen","bg_entity":"Entitätsbild","bg_url":"Bild-URL","sizes_section":"Größen","spacing_section":"Abstand","border_section":"Rahmen","text_shadow_section":"Textschatten","box_shadow_section":"Boxschatten","position_section":"Position","overflow_section":"Überlauf","animations_section":"Animationen","width":"Breite","height":"Höhe","max_width":"Maximale Breite","max_height":"Maximale Höhe","min_width":"Minimale Breite","min_height":"Minimale Höhe","border_radius":"Rahmen-Radius","border_style":"Rahmenstil","border_width":"Rahmenbreite","border_color":"Rahmenfarbe","margin":"Außenabstand","padding":"Innenabstand","top":"Oben","right":"Rechts","bottom":"Unten","left":"Links","unlock_sides":"Entsperren, um Seiten unabhängig zu bearbeiten","lock_sides":"Sperren, um alle Seiten gemeinsam zu bearbeiten","horizontal_shift":"Horizontalverschiebung","vertical_shift":"Vertikalverschiebung","blur":"Weichzeichnen","text_shadow_color":"Textschattenfarbe","box_shadow_color":"Boxschattenfarbe","overflow":"Überlauf","clip_path":"Clip-Pfad","upload_bg_image":"Hintergrundbild hochladen","bg_image_entity":"Hintergrundbild-Entität","bg_image_url":"Hintergrundbild-URL","choose_file":"Datei auswählen","no_file_chosen":"Keine Datei ausgewählt","backdrop_filter":"Hintergrundfilter","spread":"Ausbreitung","visible_default":"Sichtbar (Standard)","examples":"Beispiele","state_based_animation":"Zustandsbasierte Animation","animation_type":"Animationstyp","animation_duration":"Animationsdauer","animation_duration_desc":"Dauer der Animation (z. B. 2s, 500ms, 1.5s)","intro_outro_animations":"Intro- & Outro-Animationen","intro_animation":"Intro-Animation","outro_animation":"Outro-Animation","duration":"Dauer","delay":"Verzögerung","timing":"Timing","none":"Keine","ease":"Ease","border_style_none":"Keine","border_style_solid":"Durchgezogen","border_style_dashed":"Gestrichelt","border_style_dotted":"Gepunktet","border_style_double":"Doppelt","position_default":"– Standard –","position_static":"Statisch","position_relative":"Relativ","position_absolute":"Absolut","position_fixed":"Fixiert","position_sticky":"Sticky","background_filter":"Background Filter"},"modules":{"text":"Text-Modul","image":"Bild-Modul","icon":"Symbol-Modul","bar":"Balken-Modul","info":"Info-Modul","button":"Button-Modul","separator":"Trennzeichen-Modul","markdown":"Markdown-Modul","camera":"Kamera-Modul","graphs":"Diagramm-Modul","no_text_configured":"Kein Text konfiguriert","no_image_configured":"Kein Bild konfiguriert","uploaded_image":"Hochgeladenes Bild","icons_configured":"{count} Symbole konfiguriert","no_icons_configured":"Keine Symbole konfiguriert","default_entity_suggestion":"Entität: sensor.battery_level","sample_text":"Beispieltext","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var c=i.t(d,2);const p=JSON.parse('{"editor":{"tabs":{"layout":"Layout Builder","settings":"Settings","about":"About","pro":"Pro"},"settings":{"title":"Card Settings","description":"Configure global card appearance and behaviour."},"appearance":{"title":"Appearance","description":"Control the visual appearance of your card"},"spacing":{"title":"Spacing","description":"Control the spacing and positioning of your card"},"fields":{"card_background_color":"Card Background Colour","card_background_color_desc":"The background colour of the entire card","border_radius":"Border Radius","border_radius_desc":"Rounded corners for the card (in pixels)","card_border_color":"Border Colour","card_border_color_desc":"The border colour of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_padding":"Card Padding","card_padding_desc":"Internal spacing within the card","card_margin":"Card Margin","card_margin_desc":"External spacing around the card","unit_px":"px","reset_default":"Reset to default","reset_default_value":"Reset to default ({value})","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Enter Full Screen","return_dashboard":"Return to Dashboard","dashboard":"Dashboard"},"common":{"left":"Left","center":"Center","right":"Right","top":"Top","bottom":"Bottom","none":"None","state":"State","attribute":"Attribute","attribute_name":"Attribute Name","entity":"Entity","space_between":"Space Between","space_around":"Space Around","justify":"Justify","stretch":"Stretch","baseline":"Baseline"},"horizontal":{"layout":{"title":"Layout Configuration","desc":"Configure how elements are arranged horizontally within the container."},"alignment":{"horizontal":"Horizontal Alignment","horizontal_desc":"Choose how elements are aligned horizontally within the container.","vertical":"Vertical Alignment","vertical_desc":"Choose how elements are aligned vertically within the container."},"wrapping":{"title":"Allow Wrapping","desc":"Allow elements to wrap to the next line when they exceed the container width."},"gap":{"title":"Gap Configuration","between_items":"Gap Between Items","desc":"Set the spacing between horizontal elements (in rem units). Use negative values to overlap elements."},"empty":{"no_modules":"No modules added yet","add_modules":"Add modules in the layout builder to see them here"}},"vertical":{"layout":{"title":"Layout Configuration","desc":"Configure how elements are arranged vertically within the container."},"alignment":{"vertical":"Vertical Alignment","vertical_desc":"Choose how elements are aligned vertically within the container."},"gap":{"title":"Gap Configuration","between_items":"Gap Between Items","desc":"Set the spacing between vertical elements (in rem units). Use negative values to overlap elements."},"empty":{"no_modules":"No modules added yet","add_modules":"Add modules in the layout builder to see them here"}},"layout":{"live_preview":"Live Preview","toggle_preview":"Toggle preview","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)","drag_to_move_module":"Drag to move module","edit_module":"Edit Module","duplicate_module":"Duplicate Module","delete_module":"Delete Module","drag_to_move_layout":"Drag to move layout module","horizontal_layout":"Horizontal Layout","vertical_layout":"Vertical Layout","add_module_to_layout":"Add Module to Layout","layout_settings":"Layout Settings","duplicate_layout":"Duplicate Layout","delete_layout":"Delete Layout","click_to_add_module":"Click to add a module","drop_modules_here":"Drop modules here","drag_to_reorder":"Drag to reorder","edit_child_module":"Edit Child Module","duplicate_child_module":"Duplicate Child Module","delete_child_module":"Delete Child Module","module_settings_title":"Module Settings","child_module_settings_title":"Child Module Settings","general_tab":"General","actions_tab":"Actions","other_tab":"Other","logic_tab":"Logic","design_tab":"Design","drag_to_resize":"Drag to resize","hidden_by_logic":"Hidden by Logic","add_row":"Add Row","add_row_tooltip":"Add a new row to your layout","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","row_settings":"Row Settings","column_settings":"Column Settings","row_background_color":"Row Background Colour","column_gap":"Column Gap (px)","vertical_alignment":"Vertical Alignment","horizontal_alignment":"Horizontal Alignment","column_preview":"Column Preview","modules_count":"{count} modules","alignment_top":"Top","alignment_center":"Center","alignment_bottom":"Bottom","alignment_stretch":"Stretch","alignment_left":"Left","alignment_right":"Right"},"layout_logic":{"display_title":"Display this Element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Always","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Conditions","add_condition":"Add Condition","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started.","condition_types":{"entity_state":"Entity State","entity_attribute":"Entity Attribute","time":"Time Range","template":"Template"},"condition_fields":{"entity":"Entity","operator":"Operator","value":"Value","attribute":"Attribute","time_from":"From","time_to":"To","template":"Template"},"condition_header":"Condition","custom_name":"Custom Name","custom_name_desc":"Optional: Give this condition a custom name for easier identification","condition_type":"Condition Type"},"hover_effects":{"title":"Hover Effects","description":"Configure visual effects that appear when hovering over this module, row, or column.","effect":"Hover Effect","effect_desc":"Select the visual effect to apply when hovering","effects":{"none":"None","highlight":"Highlight","outline":"Outline","grow":"Grow","shrink":"Shrink","pulse":"Pulse","bounce":"Bounce","float":"Float","glow":"Glow","shadow":"Shadow","rotate":"Rotate","skew":"Skew","wobble":"Wobble","buzz":"Buzz","fade":"Fade"}},"about":{"developed_by":"Developed by","desc1":"A powerful modular card builder for Home Assistant","desc2":"Create custom layouts with a professional page-builder interface","desc3":"Modular layout system with conditional logic and professional design tools","github_repo":"Check Out Our Github","join_discord":"Join Our Discord","support_title":"Support Ultra Card","support_desc":"Your generous tips fuel the development of amazing features for this card! Without support from users like you, continued innovation wouldn\'t be possible.","leave_tip":"LEAVE A TIP (PAYPAL)","version":"Version"},"actions":{"title":"Link Configuration","description":"Configure what happens when users interact with this element. Choose different actions for tap, hold, and double-tap gestures.","tap_action":"Tap Action","tap_action_desc":"Action performed when tapping/clicking the module","hold_action":"Hold Action","hold_action_desc":"Action performed when holding down on the module","double_tap_action":"Double Tap Action","double_tap_action_desc":"Action performed when double-tapping the module","tap_behavior":"Tap Behaviour","tap_behavior_desc":"Action to perform when the element is tapped/clicked.","hold_behavior":"Hold Behaviour","hold_behavior_desc":"Action to perform when the element is pressed and held.","double_tap_behavior":"Double Tap Behaviour","double_tap_behavior_desc":"Action to perform when the element is double-tapped/clicked.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITY CONFIGURATION","desc":"Configure the entity and active/inactive states"},"entity":"Entity","entity_desc":"Select the entity this icon represents","inactive_state":"Inactive State","inactive_state_desc":"State value considered \\"inactive\\" (leave blank to use actual entity state)","active_state":"Active State","active_state_desc":"State value considered \\"active\\" (leave blank to use actual entity state)","icon_section":{"title":"Icon Configuration"},"inactive_icon":"Inactive Icon","inactive_icon_desc":"Icon to show when inactive","inactive_icon_config":"Inactive Icon Configuration","inactive_icon_config_desc":"Configure inactive icon settings","active_icon":"Active Icon","active_icon_desc":"Icon to show when active","icon_color_inactive":"Colour when inactive","icon_color_active":"Colour when active","background_shape_inactive":"Background shape when inactive","background_shape_active":"Background shape when active","background_color_inactive":"Background colour when inactive","background_color_active":"Background colour when active","icon_size_inactive":"Icon size when inactive","icon_size_active":"Icon size when active","inactive_icon_color":"Inactive icon colour","active_icon_color":"Active icon colour","inactive_icon_background":"Inactive icon background","active_icon_background":"Active icon background","inactive_icon_background_color":"Inactive icon background colour","active_icon_background_color":"Active icon background colour","name_section":{"title":"Name Configuration"},"inactive_name":"Inactive Name","inactive_name_desc":"Custom name when inactive","inactive_name_config":"Inactive Name Configuration","inactive_name_config_desc":"Configure inactive name settings","active_name":"Active Name","active_name_desc":"Custom name when active","custom_inactive_name":"Custom Inactive Name","custom_inactive_name_desc":"Override entity name when inactive (leave empty to use entity name)","custom_active_name":"Custom Active Name","custom_active_name_desc":"Override entity name when active (leave empty to use entity name)","name_color_inactive":"Name colour when inactive","name_color_active":"Name colour when active","name_size_inactive":"Name text size when inactive","name_size_active":"Name text size when active","inactive_name_color":"Inactive name colour","active_name_color":"Active name colour","state_section":{"title":"State Configuration"},"inactive_state_color":"Inactive state colour","active_state_color":"Active state colour","inactive_state_text":"Inactive state text","active_state_text":"Active state text","inactive_state_config":"Inactive State Configuration","inactive_state_config_desc":"Configure inactive state settings","custom_inactive_state":"Custom Inactive State","custom_inactive_state_desc":"Custom text when inactive (leave empty to use actual state)","custom_active_state":"Custom Active State","custom_active_state_desc":"Custom text when active (leave empty to use actual state)","state_color_inactive":"State colour when inactive","state_color_active":"State colour when active","state_size_inactive":"State text size when inactive","state_size_active":"State text size when active","background_section":{"title":"Inactive Background","desc":"Configure inactive background settings"},"template_section":{"title":"Advanced Template Mode","desc":"Use Jinja2 templates for advanced icon control. Templates can control visibility (true/false to show/hide icons) and customize state text. Return custom text for Active State, return actual entity state for Inactive State."},"template_mode":"Advanced Template Mode","template":"Template","animation_section":{"title":"Icon Animation","desc":"Configure animations for active and inactive states"},"active_animation":"Active Animation","active_animation_desc":"Animation when icon is active","inactive_animation":"Inactive Animation","inactive_animation_desc":"Animation when icon is inactive","animation_none":"None","animation_pulse":"Pulse","animation_spin":"Spin","animation_bounce":"Bounce","animation_flash":"Flash","animation_shake":"Shake","animation_vibrate":"Vibrate","animation_rotate_left":"Rotate Left","animation_rotate_right":"Rotate Right","animation_fade":"Fade","animation_scale":"Scale","animation_tada":"Tada"},"text":{"content_section":{"title":"Content Configuration","desc":"Configure the text content and basic settings for this module."},"text_content":"Text Content","text_content_desc":"Enter the text content to display in this module.","icon_section":{"title":"Icon Configuration","desc":"Choose an icon to display alongside the text content."},"icon":"Icon","icon_desc":"Choose an icon to display alongside the text. Leave empty for no icon.","icon_position":"Icon Position","icon_position_desc":"Choose where to position the icon relative to the text.","before_text":"Before Text","after_text":"After Text","template_mode":"Template Mode","template_mode_desc":"Use Home Assistant templating syntax to render text","value_template":"Value Template","value_template_desc":"Template to render the text using Jinja2 syntax","examples_title":"Common Examples:","example_basic":"Basic value","example_percent":"With percent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"markdown":{"content":{"title":"Markdown Content","label":"Content","desc":"Enter your markdown content with full formatting support"},"features":{"title":"Markdown Features"},"enable_html":"Enable HTML","enable_html_desc":"Allow HTML tags in markdown content","enable_tables":"Enable Tables","enable_tables_desc":"Support for markdown table syntax","code_highlighting":"Code Highlighting","code_highlighting_desc":"Syntax highlighting for code blocks"},"bar":{"bar_settings":{"title":"Bar Settings","desc":"Configure how the bar percentage is calculated and displayed."},"perc_type":{"entity":"Entity (0-100)","attribute":"Entity Attribute","difference":"Difference","template":"Template"},"attribute_section":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings"},"attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")","diff_section":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings"},"current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)","template_section":{"title":"Template Configuration","desc":"Configure template settings"},"percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}","attr_config":{"title":"Entity Attribute Configuration","desc":"Configure entity attribute settings","attribute_entity":"Attribute Entity","attribute_entity_desc":"Select the entity that contains the attribute with the percentage value","attribute_name":"Attribute Name","attribute_name_desc":"Enter the name of the attribute that contains the percentage value (e.g., \\"battery_level\\")"},"diff_config":{"title":"Difference Calculation Configuration","desc":"Configure difference calculation settings","current_entity":"Current Value Entity","current_entity_desc":"Entity representing the current/used amount (e.g., fuel used, battery consumed)","total_entity":"Total Value Entity","total_entity_desc":"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)"},"template_config":{"title":"Template Configuration","desc":"Configure template settings","percentage_template":"Percentage Template","percentage_template_desc":"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"entity":{"title":"Bar Percentage Entity","desc_present":"The entity that provides the percentage value for the bar.","desc_empty":"Select an entity that provides a percentage value (0-100). Battery sensors are ideal for bars.","no_entity_warning":"No entity selected - Please choose a sensor with values between 0-100"},"limit_entity":{"title":"Limit Value Entity (Optional)","desc":"Optional: Add a vertical indicator line on the bar (e.g. charge limit for EV battery)."},"appearance":{"title":"Bar Appearance","direction":"Fill Direction","direction_desc":"Choose which direction the bar fills from as the value increases.","left_to_right":"Left to Right","right_to_left":"Right to Left","height":"Bar Height","height_desc":"Adjust the thickness of the progress bar in pixels.","border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the bar.","style":"Bar Style","style_desc":"Choose the visual style of the progress bar.","style_flat":"Flat (Default)","style_glossy":"Glossy","style_embossed":"Embossed","style_inset":"Inset","style_gradient":"Gradient Overlay","style_neon":"Neon Glow","style_outline":"Outline","style_glass":"Glass","style_metallic":"Metallic","style_neumorphic":"Neumorphic","style_dashed":"Dashed","style_dots":"Dots","width":"Bar Width","width_desc":"Set the bar width as percentage of container.","alignment":"Bar Alignment","alignment_desc":"Choose how to align the bar when it\'s less than 100% width."},"labels":{"alignment":"Label Alignment","alignment_desc":"Control how left and right labels are positioned."},"percentage":{"title":"Percentage Text Display","desc":"Control the visibility and appearance of percentage values shown directly on the bar. These numbers provide a clear visual indicator of the current level.","text_size":"Text Size","text_size_desc":"Adjust the size of percentage text shown on the bar.","text_alignment":"Percentage Text Alignment"},"left":{"title":"Left Side","desc":"Configure the title and entity value shown on the left side of the bar. This is useful for displaying labels like \'Range\' or \'Battery\' alongside their values.","title_size":"Title Size","value_size":"Value Size","template_mode":"Template Mode","template_desc":"Use a template to format the displayed value. Templates use Home Assistant\'s Jinja2 syntax.","value_template":"Value Template","value_template_desc":"Template to format the left side value using Jinja2 syntax","enable_toggle":"Enable the toggle above to configure left side settings"},"right":{"title":"Right Side","desc":"Configure the title and entity value shown on the right side of the bar. This is ideal for complementary information like \'Time to Full\' or secondary measurements.","title_size":"Title Size","value_size":"Value Size","template_mode":"Template Mode","template_desc":"Use a template to format the displayed value. Templates use Home Assistant\'s Jinja2 syntax.","value_template":"Value Template","value_template_desc":"Template to format the right side value using Jinja2 syntax","enable_toggle":"Enable the toggle above to configure right side settings"},"colors":{"title":"Colors","bar_color":"Bar Colour","background_color":"Background Colour","border_color":"Border Colour","limit_indicator":"Limit Indicator","percentage_text":"Percentage Text","left_side":"Left Side Colors","right_side":"Right Side Colors","title_color":"Title Colour","value_color":"Value Colour","text_color":"Text Colour","text_color_desc":"Choose the colour for the text displayed on the bar.","dot_color":"Dot Colour"},"minimal":{"icon_enabled":"Enable Icon","icon_enabled_desc":"Show an icon on the minimal bar indicator","icon":"Icon","icon_desc":"Choose an icon to display (e.g., mdi:battery)","icon_mode":"Display Mode","icon_mode_desc":"How to display the icon","mode_dot_only":"Dot Only","mode_icon_only":"Icon Only","mode_icon_in_dot":"Icon in Dot","icon_size_auto":"Auto-Scale Icon","icon_size_auto_desc":"Automatically scale icon with bar height","icon_size":"Icon Size","icon_size_desc":"Custom icon size in pixels","use_dot_color":"Use Dot Colour","use_dot_color_desc":"Use the dot colour for the icon (matches gradient)","icon_color":"Icon Colour","icon_color_desc":"Custom colour for the icon","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"gradient":{"title":"Gradient Mode","desc":"Apply a colour gradient to the bar fill. When enabled, choose how the gradient is displayed and customize colour stops below.","full":"Full","cropped":"Cropped","value_based":"Value Based"},"animation":{"title":"Bar Animation","desc":"Animate the bar fill using presets like charging stripes, pulse, glow and more. You can trigger animations based on an entity\'s state or attribute, and optionally override the animation when another condition is met.","trigger":{"title":"Animation Trigger","desc":"Select an entity to watch and define the value + animation to apply when it matches.","entity_desc":"Entity to evaluate for animation trigger","type":"Trigger Type","type_desc":"Choose whether to compare entity state or an attribute","attribute_name_desc":"Attribute name to compare (e.g., charging_status)","match_value":"Match Value","match_value_desc":"Text to compare against state or attribute (comparison is text-based)."},"type":"Animation Type","type_desc":"Select how the bar should animate when triggered.","types":{"charging":"Charging (Diagonal Lines)","pulse":"Pulse","blinking":"Blinking","bouncing":"Bouncing","glow":"Glow","rainbow":"Rainbow","bubbles":"Bubbles","fill":"Fill","ripple":"Ripple","traffic":"Traffic (Barber Pole)","heartbeat":"Heartbeat","flicker":"Flicker","shimmer":"Shimmer","vibrate":"Vibrate"},"override":{"title":"Action Animation Override","desc":"Select an action entity and state to define when this animation should override the regular animation","entity_desc":"Entity to evaluate for override trigger","type_desc":"Animation to use when override condition matches.","attribute_name_desc":"Attribute name to compare","match_value":"Override Match Value","match_value_desc":"Text comparison against state or attribute","type":"Override Animation Type"}},"text_display":{"title":"Text Display","desc":"Control the visibility and appearance of text values shown directly on the bar. For difference and template modes, you can choose to display raw entity values instead of percentages.","show_value":"Show Value Instead of Percentage","show_value_desc":"When enabled, shows the actual entity value instead of percentage. Useful for displaying raw sensor values like \\"45 kWh\\" instead of \\"75%\\".","text_size":"Text Size","text_size_desc":"Adjust the size of the text displayed on the bar.","text_alignment":"Text Alignment"}},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entity Attribute"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entity","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entity Attribute Configuration"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribute Name","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Border Radius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."},"alt":"Image","no_source":"No image source configured"},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity"},"entity":"Entity","line":{"show_points":"Show Points","fill_area":"Fill Area","line_width":"Line Width","line_style":"Line Style"},"line_styles":{"solid":"Solid","dashed":"Dashed","dotted":"Dotted"},"display":{"title":"Display Options","show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","chart_width":"Chart Width (%)","chart_width_desc":"Percentage of the module\'s available width. Alignment controls placement.","chart_alignment":"Chart Alignment","chart_alignment_desc":"Alignment of the chart within its container.","info_position":"Info Position","info_position_desc":"Position of the overlay showing name/value.","legend_position":"Legend Position","legend_position_desc":"Where to place the legend when enabled.","background_color":"Background Colour","chart_options":"Chart Options","show_legend":"Show Legend","show_grid":"Show Grid","smooth_lines":"Smooth Lines","show_tooltips":"Show Tooltips","add_slice_gap":"Add Slice Gap","show_grid_values":"Show Grid Values"},"agg":{"mean":"Average","sum":"Sum","min":"Minimum","max":"Maximum","median":"Median","first":"First Value","last":"Last Value","count":"Count","delta":"Change"},"position":{"top":"Top","bottom":"Bottom","left":"Left","right":"Right","hidden":"Hidden","top_left":"Top Left","top_right":"Top Right","bottom_left":"Bottom Left","bottom_right":"Bottom Right","middle":"Center","center":"Center"},"pie":{"show_title":"Show Title in Slice","show_value":"Show Value in Slice"},"period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"reset_345":"Reset to default (345px)","reset_100":"Reset to default (100%)","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribute","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","chart_width":"Chart Width (%)","data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"info":{"entity_section":{"title":"ENTITY CONFIGURATION"},"entity":"Entity","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icon","icon_desc":"Choose an icon to display","icon_color":"Icon Colour","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Colour","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Colour","template":{"title":"Template Mode","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Template Mode","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Value Template","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icon Position","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Common Examples:","example_basic":"Basic value","example_units":"With units","example_round":"Round to 1 decimal"},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"align":{"left":"Left","center":"Center","right":"Right","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Before Text","after":"After Text","enable_toggle_desc":"Enable the toggle above to configure icon settings"},"icon_field":"Icon","show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icon Position","icon_position_desc":"Position of the icon relative to text","colors":{"title":"Colors","background":"Background Colour","text":"Text Colour"},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"None","color":"Colour Change","scale":"Scale","glow":"Glow","lift":"Lift (translate Y)","hover_color":"Hover Colour","glow_color":"Glow Colour","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entity","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tap Action","desc":"Action to perform when button is tapped"},"hold":{"title":"Hold Action","desc":"Action to perform when button is held down"},"double":{"title":"Double Tap Action","desc":"Action to perform when button is double-tapped"}},"layout_extra":{"module_name":"Module Name:","module_name_placeholder":"Give this module a custom name to make it easier to identify in the editor.","module_name_help":"Give this module a custom name to make it easier to identify in the editor."},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","show_name_toggle":{"enable_toggle_desc":"Enable the toggle above to configure camera name display"},"name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Center","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Template Mode","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Template Mode","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Common Examples:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Appearance"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Colour","desc":"Colour of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","show_title_toggle":{"enable_toggle_desc":"Enable the toggle above to configure title settings"},"text_content":{"title":"Text Content","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Colour","desc":"Colour of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space.","orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Text","text_color":"Text Colour","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"None","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Background","background_color":"Background Colour","background_image_type":"Background Image Type","bg_none":"None","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Spacing","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Width","height":"Height","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Border Radius","border_style":"Border Style","border_width":"Border Width","border_color":"Border Colour","margin":"Margin","padding":"Padding","top":"Top","right":"Right","bottom":"Bottom","left":"Left","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Colour","box_shadow_color":"Box Shadow Colour","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen","backdrop_filter":"Backdrop Filter","spread":"Spread","visible_default":"Visible (Default)","examples":"Examples","state_based_animation":"State-based Animation","animation_type":"Animation Type","animation_duration":"Animation Duration","animation_duration_desc":"Duration for the animation (e.g., 2s, 500ms, 1.5s)","intro_outro_animations":"Intro & Outro Animations","intro_animation":"Intro Animation","outro_animation":"Outro Animation","duration":"Duration","delay":"Delay","timing":"Timing","none":"None","ease":"Ease","border_style_none":"None","border_style_solid":"Solid","border_style_dashed":"Dashed","border_style_dotted":"Dotted","border_style_double":"Double","position_default":"– Default –","position_static":"Static","position_relative":"Relative","position_absolute":"Absolute","position_fixed":"Fixed","position_sticky":"Sticky","background_filter":"Background Filter"},"modules":{"text":"Text Module","image":"Image Module","icon":"Icon Module","bar":"Bar Module","info":"Info Module","button":"Button Module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera Module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var u=i.t(p,2);const h=JSON.parse('{"editor":{"tabs":{"layout":"Constructor de diseño","settings":"Configuración","about":"Acerca de","pro":"Pro"},"settings":{"title":"Configuración de tarjeta","description":"Configura la apariencia global y el comportamiento de la tarjeta."},"appearance":{"title":"Apariencia","description":"Controla la apariencia visual de tu tarjeta"},"spacing":{"title":"Espaciado","description":"Controla el espaciado y posicionamiento de tu tarjeta"},"fields":{"reset_default_value":"Restablecer al valor predeterminado ({value})","card_background_color":"Color de fondo de tarjeta","card_background_color_desc":"El color de fondo de toda la tarjeta","border_radius":"Radio del borde","border_radius_desc":"Esquinas redondeadas para la tarjeta (en píxeles)","card_border_color":"Color del borde","card_border_color_desc":"El color del borde de la tarjeta","card_border_width":"Ancho del borde","card_border_width_desc":"El grosor del borde de la tarjeta (en píxeles)","card_padding":"Relleno de tarjeta","card_padding_desc":"Espaciado interno dentro de la tarjeta","card_margin":"Margen de tarjeta","card_margin_desc":"Espaciado externo alrededor de la tarjeta","unit_px":"px","reset_default":"Restablecer a predeterminado","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Pantalla completa","return_dashboard":"Volver al panel","dashboard":"Panel"},"layout":{"live_preview":"Vista previa","toggle_preview":"Mostrar/ocultar vista previa","drag_to_move_module":"Arrastrar para mover módulo","edit_module":"Editar módulo","duplicate_module":"Duplicar módulo","delete_module":"Eliminar módulo","drag_to_move_layout":"Arrastrar para mover el diseño","horizontal_layout":"Diseño Horizontal","vertical_layout":"Diseño Vertical","add_module_to_layout":"Añadir módulo al diseño","layout_settings":"Ajustes de diseño","duplicate_layout":"Duplicar diseño","delete_layout":"Eliminar diseño","click_to_add_module":"Clic para añadir un módulo","drop_modules_here":"Suelta módulos aquí","drag_to_reorder":"Arrastrar para reordenar","edit_child_module":"Editar módulo hijo","duplicate_child_module":"Duplicar módulo hijo","delete_child_module":"Eliminar módulo hijo","module_settings_title":"Ajustes del módulo","child_module_settings_title":"Ajustes del módulo hijo","general_tab":"General","actions_tab":"Acciones","other_tab":"Otro","logic_tab":"Lógica","design_tab":"Diseño","drag_to_resize":"Arrastrar para redimensionar","hidden_by_logic":"Oculto por lógica","add_row":"Añadir fila","add_row_tooltip":"Añadir una nueva fila a tu diseño","undo":"Deshacer","undo_tooltip":"Deshacer último cambio (Ctrl+Z)","redo":"Rehacer","redo_tooltip":"Rehacer último cambio deshecho (Ctrl+Y)","row_settings":"Configuración de fila","column_settings":"Configuración de columna","row_background_color":"Color de fondo de fila","column_gap":"Espacio entre columnas (px)","vertical_alignment":"Alineación vertical","horizontal_alignment":"Alineación horizontal","column_preview":"Vista previa de columna","modules_count":"{count} módulos","alignment_top":"Arriba","alignment_center":"Centro","alignment_bottom":"Abajo","alignment_stretch":"Estirar","alignment_left":"Izquierda","alignment_right":"Derecha","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"common":{"left":"Izquierda","center":"Centro","right":"Derecha","top":"Arriba","bottom":"Abajo","none":"Ninguno","state":"Estado","attribute":"Atributo","attribute_name":"Nombre del atributo","entity":"Entidad","space_between":"Espacio entre","space_around":"Espacio alrededor","justify":"Justificar","stretch":"Estirar","baseline":"Línea base"},"horizontal":{"layout":{"title":"Configuración de diseño","desc":"Configura cómo se organizan los elementos horizontalmente dentro del contenedor."},"alignment":{"horizontal":"Alineación horizontal","horizontal_desc":"Elige cómo se alinean los elementos horizontalmente dentro del contenedor.","vertical":"Alineación vertical","vertical_desc":"Elige cómo se alinean los elementos verticalmente dentro del contenedor."},"wrapping":{"title":"Permitir ajuste","desc":"Permite que los elementos se ajusten a la siguiente línea cuando excedan el ancho del contenedor."},"gap":{"title":"Configuración de espacio","between_items":"Espacio entre elementos","desc":"Establece el espaciado entre elementos horizontales (en unidades rem). Usa valores negativos para superponer elementos."},"empty":{"no_modules":"Aún no se han añadido módulos","add_modules":"Añade módulos en el constructor de diseño para verlos aquí"}},"vertical":{"layout":{"title":"Configuración de diseño","desc":"Configura cómo se organizan los elementos verticalmente dentro del contenedor."},"alignment":{"vertical":"Alineación vertical","vertical_desc":"Elige cómo se alinean los elementos verticalmente dentro del contenedor."},"gap":{"title":"Configuración de espacio","between_items":"Espacio entre elementos","desc":"Establece el espaciado entre elementos verticales (en unidades rem). Usa valores negativos para superponer elementos."},"empty":{"no_modules":"Aún no se han añadido módulos","add_modules":"Añade módulos en el constructor de diseño para verlos aquí"}},"layout_extra":{"module_name":"Nombre del módulo:","module_name_placeholder":"Asigna un nombre para identificarlo fácilmente en el editor.","module_name_help":"Asigna un nombre para identificarlo fácilmente en el editor."},"layout_logic":{"display_title":"Mostrar este elemento","display_desc":"Controla cuándo se muestra este elemento. Elige \\"Siempre\\" para mantenerlo visible. Selecciona \\"Si TODAS las condiciones se cumplen\\" o \\"Si CUALQUIER condición se cumple\\" para mostrarlo solo cuando las condiciones añadidas se evalúen como verdaderas.","always":"Siempre","every":"Si TODAS las condiciones se cumplen","any":"Si CUALQUIER condición se cumple","conditions":"Condiciones","add_condition":"Añadir condición","no_conditions":"Aún no hay condiciones. Haz clic en \\"Añadir condición\\" para empezar.","condition_types":{"entity_state":"Estado de entidad","entity_attribute":"Atributo de entidad","time":"Rango de tiempo","template":"Plantilla"},"condition_fields":{"entity":"Entidad","operator":"Operador","value":"Valor","attribute":"Atributo","time_from":"Desde","time_to":"Hasta","template":"Plantilla"},"condition_header":"Condición","custom_name":"Nombre personalizado","custom_name_desc":"Opcional: Asigna un nombre personalizado a esta condición para identificarla más fácilmente","condition_type":"Tipo de condición"},"hover_effects":{"title":"Efectos de hover","description":"Configura efectos visuales que aparecen al pasar el cursor sobre este módulo, fila o columna.","effect":"Efecto de hover","effect_desc":"Selecciona el efecto visual que se aplicará al pasar el cursor","effects":{"none":"Ninguno","highlight":"Resaltar","outline":"Contorno","grow":"Crecer","shrink":"Encoger","pulse":"Pulso","bounce":"Rebotar","float":"Flotar","glow":"Brillo","shadow":"Sombra","rotate":"Rotar","skew":"Inclinar","wobble":"Tambalear","buzz":"Vibrar","fade":"Desvanecer"}},"about":{"developed_by":"Desarrollado por","desc1":"Un potente constructor de tarjetas modulares para Home Assistant","desc2":"Crea diseños personalizados con una interfaz profesional de constructor de páginas","desc3":"Sistema de diseño modular con lógica condicional y herramientas de diseño profesionales","github_repo":"Visita nuestro Github","join_discord":"Únete a nuestro Discord","support_title":"Apoya Ultra Card","support_desc":"¡Tus generosas propinas impulsan el desarrollo de características increíbles para esta tarjeta! Sin el apoyo de usuarios como tú, la innovación continua no sería posible.","leave_tip":"DEJA UNA PROPINA (PAYPAL)","version":"Versión"},"actions":{"title":"Configuración de enlaces","description":"Configura qué sucede cuando los usuarios interactúan con este elemento. Elige diferentes acciones para gestos de toque, mantener presionado y doble toque.","tap_action":"Acción de toque","tap_action_desc":"Acción realizada al tocar/hacer clic en el módulo","hold_action":"Acción de mantener presionado","hold_action_desc":"Acción realizada al mantener presionado el módulo","double_tap_action":"Acción de doble toque","double_tap_action_desc":"Acción realizada al hacer doble toque en el módulo","tap_behavior":"Comportamiento de toque","tap_behavior_desc":"Acción a realizar cuando se toca/hace clic en el elemento.","hold_behavior":"Comportamiento de mantener presionado","hold_behavior_desc":"Acción a realizar cuando se presiona y mantiene el elemento.","double_tap_behavior":"Comportamiento de doble toque","double_tap_behavior_desc":"Acción a realizar cuando se hace doble toque/clic en el elemento.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"CONFIGURACIÓN DE ENTIDAD","desc":"Configura la entidad y los estados activo/inactivo"},"entity":"Entidad","entity_desc":"Selecciona la entidad que representa este icono","inactive_state":"Estado inactivo","inactive_state_desc":"Valor de estado considerado \\"inactivo\\" (dejar en blanco para usar el estado real de la entidad)","active_state":"Estado activo","active_state_desc":"Valor de estado considerado \\"activo\\" (dejar en blanco para usar el estado real de la entidad)","icon_section":{"title":"Configuración de icono"},"inactive_icon":"Icono inactivo","inactive_icon_desc":"Icono a mostrar cuando está inactivo","inactive_icon_config":"Configuración de icono inactivo","inactive_icon_config_desc":"Configura los ajustes del icono inactivo","active_icon":"Icono activo","active_icon_desc":"Icono a mostrar cuando está activo","icon_color_inactive":"Color cuando está inactivo","icon_color_active":"Color cuando está activo","background_shape_inactive":"Forma de fondo cuando está inactivo","background_shape_active":"Forma de fondo cuando está activo","background_color_inactive":"Color de fondo cuando está inactivo","background_color_active":"Color de fondo cuando está activo","icon_size_inactive":"Tamaño del icono cuando está inactivo","icon_size_active":"Tamaño del icono cuando está activo","inactive_icon_color":"Color del icono inactivo","active_icon_color":"Color del icono activo","inactive_icon_background":"Fondo del icono inactivo","active_icon_background":"Fondo del icono activo","inactive_icon_background_color":"Color de fondo del icono inactivo","active_icon_background_color":"Color de fondo del icono activo","name_section":{"title":"Configuración de nombre"},"inactive_name":"Nombre inactivo","inactive_name_desc":"Nombre personalizado cuando está inactivo","inactive_name_config":"Configuración de nombre inactivo","inactive_name_config_desc":"Configura los ajustes del nombre inactivo","active_name":"Nombre activo","active_name_desc":"Nombre personalizado cuando está activo","custom_inactive_name":"Nombre inactivo personalizado","custom_inactive_name_desc":"Anular el nombre de la entidad cuando está inactivo (dejar vacío para usar el nombre de la entidad)","custom_active_name":"Nombre activo personalizado","custom_active_name_desc":"Anular el nombre de la entidad cuando está activo (dejar vacío para usar el nombre de la entidad)","name_color_inactive":"Color del nombre cuando está inactivo","name_color_active":"Color del nombre cuando está activo","name_size_inactive":"Tamaño del texto del nombre cuando está inactivo","name_size_active":"Tamaño del texto del nombre cuando está activo","inactive_name_color":"Color del nombre inactivo","active_name_color":"Color del nombre activo","state_section":{"title":"Configuración de estado"},"inactive_state_color":"Color del estado inactivo","active_state_color":"Color del estado activo","inactive_state_text":"Texto de estado inactivo","active_state_text":"Texto de estado activo","inactive_state_config":"Configuración de estado inactivo","inactive_state_config_desc":"Configura los ajustes del estado inactivo","custom_inactive_state":"Estado inactivo personalizado","custom_inactive_state_desc":"Texto personalizado cuando está inactivo (dejar vacío para usar el estado real)","custom_active_state":"Estado activo personalizado","custom_active_state_desc":"Texto personalizado cuando está activo (dejar vacío para usar el estado real)","state_color_inactive":"Color del estado cuando está inactivo","state_color_active":"Color del estado cuando está activo","state_size_inactive":"Tamaño del texto del estado cuando está inactivo","state_size_active":"Tamaño del texto del estado cuando está activo","background_section":{"title":"Fondo inactivo","desc":"Configura los ajustes del fondo inactivo"},"template_section":{"title":"Modo de plantilla avanzado","desc":"Usa plantillas Jinja2 para control avanzado de iconos. Las plantillas pueden controlar la visibilidad (verdadero/falso para mostrar/ocultar iconos) y personalizar el texto de estado. Devuelve texto personalizado para Estado Activo, devuelve el estado real de la entidad para Estado Inactivo."},"template_mode":"Modo de plantilla avanzado","template":"Plantilla","animation_section":{"title":"Animación de icono","desc":"Configura animaciones para estados activos e inactivos"},"active_animation":"Animación activa","active_animation_desc":"Animación cuando el icono está activo","inactive_animation":"Animación inactiva","inactive_animation_desc":"Animación cuando el icono está inactivo","animation_none":"Ninguna","animation_pulse":"Pulso","animation_spin":"Girar","animation_bounce":"Rebotar","animation_flash":"Destello","animation_shake":"Temblar","animation_vibrate":"Vibrar","animation_rotate_left":"Rotar izquierda","animation_rotate_right":"Rotar derecha","animation_fade":"Desvanecer","animation_scale":"Escalar","animation_tada":"Tada"},"markdown":{"content":{"title":"Contenido de Markdown","label":"Contenido","desc":"Introduce tu contenido markdown con soporte completo de formato"},"features":{"title":"Características de Markdown"},"enable_html":"Habilitar HTML","enable_html_desc":"Permitir etiquetas HTML en el contenido markdown","enable_tables":"Habilitar tablas","enable_tables_desc":"Soporte para sintaxis de tablas markdown","code_highlighting":"Resaltado de código","code_highlighting_desc":"Resaltado de sintaxis para bloques de código"},"text":{"content_section":{"title":"Configuración de contenido","desc":"Configura el contenido de texto y los ajustes básicos de este módulo."},"text_content":"Contenido de texto","text_content_desc":"Introduce el texto que se mostrará en este módulo.","icon_section":{"title":"Configuración del icono","desc":"Elige un icono para mostrar junto al texto."},"icon":"Icono","icon_desc":"Elige un icono para mostrar junto al texto. Déjalo vacío para no mostrar icono.","icon_position":"Posición del icono","icon_position_desc":"Elige dónde posicionar el icono respecto al texto.","before_text":"Antes del texto","after_text":"Después del texto","template_mode":"Modo plantilla","template_mode_desc":"Usa la sintaxis de plantillas de Home Assistant para renderizar el texto","value_template":"Plantilla de valor","value_template_desc":"Plantilla para renderizar el texto usando sintaxis Jinja2","examples_title":"Ejemplos comunes:","example_basic":"Valor básico","example_percent":"Con porcentaje","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Configuración de barra","desc":"Configura cómo se calcula y muestra el porcentaje de la barra."},"perc_type":{"entity":"Entidad (0-100)","attribute":"Atributo de entidad","difference":"Diferencia","template":"Plantilla"},"attribute_section":{"title":"Configuración de atributo de entidad","desc":"Configura los ajustes del atributo de entidad"},"attribute_entity":"Entidad del atributo","attribute_entity_desc":"Selecciona la entidad que contiene el atributo con el valor del porcentaje","attribute_name":"Nombre del atributo","attribute_name_desc":"Ingresa el nombre del atributo que contiene el valor del porcentaje (ej., \\"battery_level\\")","diff_section":{"title":"Configuración de cálculo de diferencia","desc":"Configura los ajustes de cálculo de diferencia"},"current_entity":"Entidad de valor actual","current_entity_desc":"Entidad que representa la cantidad actual/usada (ej., combustible usado, batería consumida)","total_entity":"Entidad de valor total","total_entity_desc":"Entidad que representa la cantidad total/máxima (ej., capacidad de combustible, capacidad de batería)","template_section":{"title":"Configuración de plantilla","desc":"Configura los ajustes de plantilla"},"percentage_template":"Plantilla de porcentaje","percentage_template_desc":"Ingresa una plantilla Jinja2 que devuelva un número entre 0-100 para el porcentaje. Ejemplo: {{ (states(\'sensor.battery_level\') | float) * 100 }}","attr_config":{"title":"Configuración de atributo de entidad","desc":"Configura los ajustes del atributo de entidad","attribute_entity":"Entidad del atributo","attribute_entity_desc":"Selecciona la entidad que contiene el atributo con el valor del porcentaje","attribute_name":"Nombre del atributo","attribute_name_desc":"Ingresa el nombre del atributo que contiene el valor del porcentaje (ej., \\"battery_level\\")"},"diff_config":{"title":"Configuración de cálculo de diferencia","desc":"Configura los ajustes del cálculo de diferencia","current_entity":"Entidad de valor actual","current_entity_desc":"Entidad que representa la cantidad actual/usada (ej., combustible usado, batería consumida)","total_entity":"Entidad de valor total","total_entity_desc":"Entidad que representa la cantidad total/máxima (ej., capacidad de combustible, capacidad de batería)"},"template_config":{"title":"Configuración de plantilla","desc":"Configura los ajustes de plantilla","percentage_template":"Plantilla de porcentaje","percentage_template_desc":"Ingresa una plantilla Jinja2 que devuelva un número entre 0-100 para el porcentaje. Ejemplo: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"entity":{"title":"Entidad de porcentaje de barra","desc_present":"La entidad que proporciona el valor del porcentaje para la barra.","desc_empty":"Selecciona una entidad que proporcione un valor de porcentaje (0-100). Los sensores de batería son ideales para barras.","no_entity_warning":"No se seleccionó entidad - Por favor elige un sensor con valores entre 0-100"},"limit_entity":{"title":"Entidad de valor límite (opcional)","desc":"Opcional: Añade una línea indicadora vertical en la barra (ej. límite de carga para batería EV)."},"appearance":{"title":"Apariencia de la barra","direction":"Dirección de llenado","direction_desc":"Elija la dirección en la que se llena la barra a medida que aumenta el valor.","left_to_right":"Izquierda a derecha","right_to_left":"Derecha a izquierda","height":"Altura de la barra","height_desc":"Ajusta el grosor de la barra de progreso en píxeles.","border_radius":"Radio del borde","border_radius_desc":"Controla las esquinas redondeadas de la barra.","style":"Estilo de barra","style_desc":"Elige el estilo visual de la barra de progreso.","style_flat":"Plano (Predeterminado)","style_glossy":"Brillante","style_embossed":"Relieve","style_inset":"Hundido","style_gradient":"Superposición de gradiente","style_neon":"Resplandor neón","style_outline":"Contorno","style_glass":"Cristal","style_metallic":"Metálico","style_neumorphic":"Neumórfico","style_dashed":"Punteado","style_dots":"Puntos","width":"Ancho de barra","width_desc":"Establece el ancho de la barra como porcentaje del contenedor.","alignment":"Alineación de barra","alignment_desc":"Elige cómo alinear la barra cuando es menos del 100% de ancho."},"labels":{"alignment":"Alineación de etiquetas","alignment_desc":"Controla cómo se posicionan las etiquetas izquierda y derecha."},"percentage":{"title":"Visualización de texto de porcentaje","desc":"Controla la visibilidad y apariencia de los valores de porcentaje mostrados directamente en la barra. Estos números proporcionan un indicador visual claro del nivel actual.","text_size":"Tamaño del texto","text_size_desc":"Ajusta el tamaño del texto de porcentaje mostrado en la barra.","text_alignment":"Alineación del texto de porcentaje"},"left":{"title":"Lado izquierdo","desc":"Configura el título y valor de entidad mostrado en el lado izquierdo de la barra. Esto es útil para mostrar etiquetas como \'Rango\' o \'Batería\' junto con sus valores.","title_size":"Tamaño del título","value_size":"Tamaño del valor","template_mode":"Modo plantilla","template_desc":"Usa una plantilla para formatear el valor mostrado. Las plantillas usan la sintaxis Jinja2 de Home Assistant.","value_template":"Plantilla de valor","value_template_desc":"Plantilla para formatear el valor del lado izquierdo usando sintaxis Jinja2","enable_toggle":"Activa el interruptor arriba para configurar los ajustes del lado izquierdo"},"right":{"title":"Lado derecho","desc":"Configura el título y valor de entidad mostrado en el lado derecho de la barra. Esto es ideal para información complementaria como \'Tiempo hasta lleno\' o mediciones secundarias.","title_size":"Tamaño del título","value_size":"Tamaño del valor","template_mode":"Modo plantilla","template_desc":"Usa una plantilla para formatear el valor mostrado. Las plantillas usan la sintaxis Jinja2 de Home Assistant.","value_template":"Plantilla de valor","value_template_desc":"Plantilla para formatear el valor del lado derecho usando sintaxis Jinja2","enable_toggle":"Activa el interruptor arriba para configurar los ajustes del lado derecho"},"colors":{"title":"Colores","bar_color":"Color de la barra","background_color":"Color de fondo","border_color":"Color del borde","limit_indicator":"Indicador de límite","percentage_text":"Texto de porcentaje","left_side":"Colores del lado izquierdo","right_side":"Colores del lado derecho","title_color":"Color del título","value_color":"Color del valor","text_color":"Color del texto","text_color_desc":"Elige el color para el texto mostrado en la barra.","dot_color":"Color del punto"},"minimal":{"icon_enabled":"Activar icono","icon_enabled_desc":"Mostrar un icono en el indicador de barra minimal","icon":"Icono","icon_desc":"Elige un icono para mostrar (ej., mdi:battery)","icon_mode":"Modo de visualización","icon_mode_desc":"Cómo mostrar el icono","mode_dot_only":"Solo punto","mode_icon_only":"Solo icono","mode_icon_in_dot":"Icono en el punto","icon_size_auto":"Escalar icono automáticamente","icon_size_auto_desc":"Escalar automáticamente el icono con la altura de la barra","icon_size":"Tamaño del icono","icon_size_desc":"Tamaño personalizado del icono en píxeles","use_dot_color":"Usar color del punto","use_dot_color_desc":"Usar el color del punto para el icono (coincide con el gradiente)","icon_color":"Color del icono","icon_color_desc":"Color personalizado para el icono","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"gradient":{"title":"Modo gradiente","desc":"Aplica un gradiente de color al relleno de la barra. Cuando está habilitado, elige cómo se muestra el gradiente y personaliza las paradas de color abajo.","full":"Completo","cropped":"Recortado","value_based":"Basado en valor"},"animation":{"title":"Animación de barra","desc":"Anima el relleno de la barra usando presets como rayas de carga, pulso, brillo y más. Puedes activar animaciones basadas en el estado o atributo de una entidad, y opcionalmente anular la animación cuando se cumple otra condición.","trigger":{"title":"Disparador de animación","desc":"Selecciona una entidad para observar y define el valor + animación a aplicar cuando coincida.","entity_desc":"Entidad para evaluar el disparador de animación","type":"Tipo de disparador","type_desc":"Elige si comparar el estado de la entidad o un atributo","attribute_name_desc":"Nombre del atributo a comparar (ej., charging_status)","match_value":"Valor de coincidencia","match_value_desc":"Texto para comparar contra el estado o atributo (la comparación es basada en texto)."},"type":"Tipo de animación","type_desc":"Selecciona cómo debe animarse la barra cuando se activa.","types":{"charging":"Carga (Líneas diagonales)","pulse":"Pulso","blinking":"Parpadeo","bouncing":"Rebote","glow":"Resplandor","rainbow":"Arcoíris","bubbles":"Burbujas","fill":"Relleno","ripple":"Ondulación","traffic":"Tráfico (Poste de barbero)","heartbeat":"Latido","flicker":"Parpadeo","shimmer":"Brillo","vibrate":"Vibración"},"override":{"title":"Anulación de animación de acción","desc":"Selecciona una entidad de acción y estado para definir cuándo esta animación debe anular la animación regular","entity_desc":"Entidad para evaluar el disparador de anulación","type_desc":"Animación a usar cuando la condición de anulación coincide.","attribute_name_desc":"Nombre del atributo a comparar","match_value":"Valor de coincidencia de anulación","match_value_desc":"Comparación de texto contra estado o atributo","type":"Tipo de animación de anulación"}},"text_display":{"title":"Visualización de texto","desc":"Controla la visibilidad y apariencia de los valores de texto mostrados directamente en la barra. Para los modos de diferencia y plantilla, puedes elegir mostrar valores de entidad sin procesar en lugar de porcentajes.","show_value":"Mostrar valor en lugar de porcentaje","show_value_desc":"Cuando está habilitado, muestra el valor real de la entidad en lugar del porcentaje. Útil para mostrar valores de sensor sin procesar como \\"45 kWh\\" en lugar de \\"75%\\".","text_size":"Tamaño del texto","text_size_desc":"Ajusta el tamaño del texto mostrado en la barra.","text_alignment":"Alineación del texto"}},"image":{"settings":"Configuración de imagen","source_type":"Tipo de fuente de imagen","source_type_desc":"Elige cómo quieres especificar la fuente de la imagen.","source":{"default":"Imagen predeterminada","url":"URL de imagen","upload":"Subir imagen","entity":"Imagen de entidad","attribute":"Atributo de entidad"},"url_section":{"title":"Configuración de URL de imagen"},"image_url":"URL de imagen","image_url_desc":"Ingresa la URL directa de la imagen que quieres mostrar.","upload_section":{"title":"Configuración de subida de imagen"},"upload":"Subir imagen","upload_desc":"Haz clic para subir un archivo de imagen desde tu dispositivo.","entity_section":{"title":"Configuración de imagen de entidad"},"entity":"Entidad","entity_desc":"Selecciona una entidad que tenga una imagen (ej., entidades de persona, cámara).","attribute_section":{"title":"Configuración de atributo de entidad"},"entity_attr_desc":"Selecciona la entidad que contiene la URL de la imagen en uno de sus atributos.","attribute_name":"Nombre del atributo","attribute_name_desc":"Ingresa la ruta del atributo que contiene la URL de la imagen (notación de punto soportada, ej., vehicle_data.vehicleDetails.generalDashboard).","width":"Ancho (%)","width_desc":"Establece el ancho como porcentaje del contenedor.","height":"Alto (px)","height_desc":"Establece la altura en píxeles.","crop_fit":"Recorte y ajuste","crop_fit_desc":"Controla cómo se ajusta la imagen dentro de su contenedor.","fit":{"cover":"Cubrir (recortar para llenar)","contain":"Contener (ajustar imagen completa)","fill":"Llenar (estirar para ajustar)","scale_down":"Reducir escala","none":"Ninguno (tamaño original)"},"border_radius":"Radio del borde","border_radius_desc":"Controla las esquinas redondeadas de la imagen.","tap_actions":"Acciones de toque","filters":"Filtros","filter":{"blur":"Desenfoque","blur_desc":"Aplica un efecto de desenfoque a tu imagen.","brightness":"Brillo (%)","brightness_desc":"Ajusta el brillo de tu imagen.","contrast":"Contraste (%)","contrast_desc":"Modifica el contraste de tu imagen.","saturation":"Saturación (%)","saturation_desc":"Ajusta la saturación de tu imagen."},"hover":{"title":"Efectos al pasar el cursor","effect_type":"Tipo de efecto","effect_type_desc":"Elige el tipo de efecto al pasar el cursor.","scale":"Escala (zoom in/out)","rotate":"Rotar","fade":"Desvanecer (cambio de opacidad)","blur":"Desenfocar","brightness":"Brillo","glow":"Resplandor (sombra de caja)","slide":"Deslizar (trasladar)","scale_amount":"Escala (%)","scale_amount_desc":"Ajusta la escala de la imagen al pasar el cursor.","rotate_amount":"Rotación (°)","rotate_amount_desc":"Rota la imagen al pasar el cursor.","opacity":"Opacidad (%)","opacity_desc":"Cambia la opacidad de la imagen al pasar el cursor.","blur_amount":"Desenfoque (px)","blur_amount_desc":"Aplica un efecto de desenfoque a la imagen al pasar el cursor.","brightness_amount":"Brillo (%)","brightness_amount_desc":"Ajusta el brillo de la imagen al pasar el cursor.","glow_intensity":"Intensidad del resplandor","glow_intensity_desc":"Elige la intensidad del efecto de resplandor al pasar el cursor.","glow_light":"Resplandor ligero","glow_medium":"Resplandor medio","glow_heavy":"Resplandor intenso","glow_custom":"Sombra personalizada","translate_x":"Horizontal (px)","translate_x_desc":"Traslada la imagen horizontalmente al pasar el cursor.","translate_y":"Vertical (px)","translate_y_desc":"Traslada la imagen verticalmente al pasar el cursor."},"alt":"Imagen","no_source":"No hay fuente de imagen configurada"},"graphs":{"chart_type":{"title":"Tipo de gráfico","type":"Tipo","desc":"Selecciona el estilo de visualización para tus datos."},"types":{"line":"Gráfico de líneas","bar":"Gráfico de barras","pie":"Gráfico circular","donut":"Gráfico de dona"},"data_sources":{"title":"Fuentes de datos","no_entities":"No hay entidades añadidas","add_first_entity":"Añade tu primera entidad para crear un gráfico","add_entity":"Añadir entidad"},"entity":"Entidad","line":{"show_points":"Mostrar puntos","fill_area":"Rellenar área","line_width":"Ancho de línea","line_style":"Estilo de línea"},"line_styles":{"solid":"Sólido","dashed":"Discontinuo","dotted":"Punteado"},"display":{"title":"Opciones de visualización","show_title":"Mostrar título del gráfico","show_value":"Mostrar valor del gráfico","chart_title":"Título del gráfico","chart_title_placeholder":"Introduce el título del gráfico","time_period":"Período de tiempo","time_period_desc":"Cuántos datos históricos mostrar.","normalize_values":"Normalizar valores a la misma escala","normalize_desc":"Útil al comparar entidades con diferentes unidades (ej., % vs millas)","chart_height":"Altura del gráfico","chart_width":"Ancho del gráfico (%)","chart_width_desc":"Porcentaje del ancho disponible del módulo. La alineación controla la ubicación.","chart_alignment":"Alineación del gráfico","chart_alignment_desc":"Alineación del gráfico dentro de su contenedor.","info_position":"Posición de información","info_position_desc":"Posición de la superposición que muestra el nombre/valor.","legend_position":"Posición de leyenda","legend_position_desc":"Dónde colocar la leyenda cuando esté habilitada.","background_color":"Color de fondo","chart_options":"Opciones del gráfico","show_legend":"Mostrar leyenda","show_grid":"Mostrar cuadrícula","smooth_lines":"Líneas suaves","show_tooltips":"Mostrar información emergente","add_slice_gap":"Añadir espacio entre segmentos","show_grid_values":"Show Grid Values"},"period":{"1h":"Última hora","3h":"Últimas 3 horas","6h":"Últimas 6 horas","12h":"Últimas 12 horas","24h":"Últimas 24 horas","2d":"Últimos 2 días","7d":"Última semana","30d":"Último mes","90d":"Últimos 3 meses","365d":"Último año"},"agg":{"mean":"Promedio","sum":"Suma","min":"Mínimo","max":"Máximo","median":"Mediana","first":"Primer valor","last":"Último valor","count":"Recuento","delta":"Cambio"},"position":{"top":"Arriba","bottom":"Abajo","left":"Izquierda","right":"Derecha","hidden":"Oculto","top_left":"Arriba izquierda","top_right":"Arriba derecha","bottom_left":"Abajo izquierda","bottom_right":"Abajo derecha","middle":"Centro","center":"Centro"},"pie":{"show_title":"Mostrar título en segmento","show_value":"Mostrar valor en segmento"},"reset_345":"Restablecer a predeterminado (345px)","reset_100":"Restablecer a predeterminado (100%)","entity_desc":"Selecciona una entidad para graficar.","display_name_optional":"Nombre a mostrar (opcional)","use_as_card_info":"Usar como información de tarjeta","attribute":"Atributo","attribute_desc":"Usa el estado de la entidad o selecciona un atributo específico a seguir.","attribute_state_default":"Estado (predeterminado)","show_points":"Mostrar puntos","fill_area":"Rellenar área","line_style":"Estilo de línea","line_solid":"Sólido","line_dashed":"Discontinuo","line_dotted":"Punteado","pie_show_title":"Mostrar título en segmento","pie_show_value":"Mostrar valor en segmento","expand_options":"Expandir opciones","no_entities":"No hay entidades añadidas","add_first_entity":"Añade tu primera entidad para crear un gráfico","add_entity":"Añadir entidad","display_options":{"title":"Opciones de visualización"},"show_title":"Mostrar título del gráfico","show_value":"Mostrar valor del gráfico","chart_title":"Título del gráfico","chart_title_placeholder":"Introduce el título del gráfico","time_period":"Período de tiempo","time_period_desc":"Cuántos datos históricos mostrar.","normalize_values":"Normalizar valores a la misma escala","normalize_desc":"Útil al comparar entidades con diferentes unidades (ej., % vs millas)","chart_height":"Altura del gráfico","chart_width":"Ancho del gráfico (%)","data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Configuración básica","desc":"Configura la apariencia del botón y el contenido del texto."},"text":{"title":"Texto del botón","desc":"Texto a mostrar en el botón (dejar en blanco para solo icono)."},"style":{"title":"Estilo del botón","desc":"Estilo visual del botón"},"alignment":{"title":"Alineación","desc":"Cómo se alinea el botón dentro de su contenedor"},"styles":{"flat":"Plano (Predeterminado)","glossy":"Brillante","embossed":"Relieve","inset":"Hundido","gradient_overlay":"Superposición de gradiente","neon_glow":"Resplandor neón","outline":"Contorno","glass":"Cristal","metallic":"Metálico"},"align":{"left":"Izquierda","center":"Centro","right":"Derecha","justify":"Justificar (Ancho completo)"},"icon":{"title":"Configuración de icono","desc":"Configura la visualización y posicionamiento del icono para el botón.","before":"Antes del texto","after":"Después del texto","enable_toggle_desc":"Activa el interruptor arriba para configurar los ajustes del icono"},"icon_field":"Icono","icon_desc":"Icono a mostrar (ej., mdi:home)","icon_position":"Posición del icono","icon_position_desc":"Posición del icono relativa al texto","show_icon":"Mostrar icono","show_icon_desc":"Mostrar un icono en el botón","colors":{"title":"Colores","background":"Color de fondo","text":"Color del texto"},"hover":{"effect_type":"Tipo de efecto","effect_type_desc":"Elige el efecto de hover para este botón.","none":"Ninguno","color":"Cambio de color","scale":"Escala","glow":"Resplandor","lift":"Elevar (trasladar Y)","hover_color":"Color al pasar el cursor","glow_color":"Color del resplandor","title":"Efectos de hover","enable_toggle_desc":"Activa el interruptor arriba para configurar efectos de hover"},"actions":{"type":"Tipo de acción","type_desc":"Elige qué sucede cuando se hace clic en el botón","entity":"Entidad","entity_desc":"Selecciona la entidad con la que interactuar","navigation_path":"Ruta de navegación","navigation_path_desc":"Ruta a la que navegar (ej., /dashboard/energy)","service":"Servicio","service_desc":"Servicio a llamar (ej., light.turn_on)","service_data":"Datos del servicio (JSON)","service_data_desc":"Datos opcionales para pasar al servicio (formato JSON)"},"tap":{"title":"Acción de toque","desc":"Acción a realizar cuando se toca el botón"},"hold":{"title":"Acción de mantener presionado","desc":"Acción a realizar cuando se mantiene presionado el botón"},"double":{"title":"Acción de doble toque","desc":"Acción a realizar cuando se hace doble toque en el botón"}},"info":{"entity_section":{"title":"CONFIGURACIÓN DE ENTIDAD"},"entity":"Entidad","entity_desc":"Selecciona la entidad a mostrar","icon_section":{"title":"Configuración de icono"},"show_icon":"Mostrar icono","show_icon_desc":"Mostrar un icono junto al valor de la entidad","icon":"Icono","icon_desc":"Elige un icono a mostrar","icon_color":"Color del icono","name_section":{"title":"Configuración de nombre"},"show_name":"Mostrar nombre","show_name_desc":"Mostrar el nombre de la entidad arriba del valor","custom_name":"Nombre personalizado","custom_name_desc":"Anular el nombre de la entidad con un nombre personalizado","name_color":"Color del nombre","state_section":{"title":"Configuración de estado"},"show_state":"Mostrar estado","show_state_desc":"Mostrar el estado/valor de la entidad","show_units":"Mostrar unidades","show_units_desc":"Mostrar la unidad de medida (si está disponible)","state_color":"Color del estado","template":{"title":"Modo de plantilla","desc":"Usa una plantilla para formatear el valor de la entidad. Las plantillas permiten usar la sintaxis de plantillas de Home Assistant para formato complejo.","mode":"Modo de plantilla","mode_desc":"Usa la sintaxis de plantillas de Home Assistant para formatear el valor","value":"Plantilla de valor","value_desc":"Plantilla para formatear el valor de la entidad usando sintaxis Jinja2"},"size_section":{"title":"Configuración de tamaños"},"icon_size":"Tamaño del icono","icon_size_desc":"Tamaño del icono en píxeles","name_size":"Tamaño del nombre","name_size_desc":"Tamaño del texto del nombre de la entidad en píxeles","value_size":"Tamaño del valor","value_size_desc":"Tamaño del texto del valor de la entidad en píxeles","icon_gap":"Espacio del icono","icon_gap_desc":"Espacio entre el icono y el contenido en píxeles","layout_section":{"title":"Diseño y posicionamiento"},"icon_position":"Posición del icono","overall_alignment":"Alineación general","icon_alignment":"Alineación del icono","content_alignment":"Alineación del contenido","examples_title":"Ejemplos comunes:","example_basic":"Valor básico","example_units":"Con unidades","example_round":"Redondear a 1 decimal"},"camera":{"config":{"title":"Configuración de cámara","desc":"Configura la entidad de cámara y ajustes de visualización."},"entity":"Entidad de cámara","entity_desc":"Selecciona la entidad de cámara a mostrar. Debe ser una entidad de cámara o mjpeg de Home Assistant.","name":"Nombre de cámara","name_desc":"Nombre personalizado para la cámara. Dejar vacío para usar el nombre de la entidad.","show_name":"Mostrar nombre de cámara","show_name_desc":"Mostrar el nombre de la cámara en la transmisión","show_name_toggle":{"enable_toggle_desc":"Activa el interruptor arriba para configurar la visualización del nombre de cámara"},"name_position":{"group_title":"Posición del nombre de cámara","title":"Posición del nombre","desc":"Elige dónde aparece el nombre de la cámara como superposición en la imagen de la cámara.","options":{"top_left":"Arriba izquierda","top_right":"Arriba derecha","center":"Centro","bottom_left":"Abajo izquierda","bottom_right":"Abajo derecha"}},"display":{"title":"Configuración de visualización"},"live_view":{"title":"Vista en vivo","desc":"Habilitar para mostrar transmisión de cámara en vivo (requiere integración de stream). Cuando está deshabilitado, muestra instantáneas de imagen fija."},"auto_refresh":{"section_title":"Configuración de actualización automática","title":"Actualización automática","desc":"Actualizar automáticamente la imagen de la cámara a intervalos regulares"},"refresh_interval":{"title":"Intervalo de actualización (segundos)","desc":"Con qué frecuencia actualizar automáticamente la imagen de la cámara."},"dimensions":{"title":"Dimensiones"},"width":"Ancho (px)","width_desc":"Establece el ancho de la visualización de la cámara. Rango: 100-1000px","height":"Alto (px)","height_desc":"Establece la altura de la visualización de la cámara. Rango: 100-1000px","link_aspect":"Vincular relación de aspecto","unlink_aspect":"Desvincular relación de aspecto","aspect_linked":{"title":"Relación de aspecto vinculada","desc":"Las dimensiones mantienen una relación {ratio}:1. Ajustar una dimensión actualiza automáticamente la otra para mantener las proporciones."},"aspect_independent":{"title":"Dimensiones independientes","desc":"El ancho y alto se pueden ajustar independientemente. Haz clic en el botón de enlace arriba para mantener la relación de aspecto."},"crop":{"title":"Recorte y posición","desc":"Ajusta el recorte y posición de la vista de cámara. Útil para enfocar en áreas específicas o eliminar bordes no deseados.","left_title":"Recorte izquierdo (%)","left_desc":"Recortar desde el borde izquierdo. Valores más altos muestran menos del lado izquierdo.","right_title":"Recorte derecho (%)","right_desc":"Recortar desde el borde derecho. Valores más altos muestran menos del lado derecho.","top_title":"Recorte superior (%)","top_desc":"Recortar desde el borde superior. Valores más altos muestran menos del área superior.","bottom_title":"Recorte inferior (%)","bottom_desc":"Recortar desde el borde inferior. Valores más altos muestran menos del área inferior.","active_applied":"Recortes activos aplicados","reset_all":"Restablecer todos los recortes"},"template":{"title":"Modo de plantilla","desc":"Usa una plantilla para establecer dinámicamente la entidad de cámara. Las plantillas permiten usar la sintaxis de plantillas de Home Assistant para selección condicional de cámara.","mode_label":"Modo de plantilla","mode_desc":"Usa la sintaxis de plantillas de Home Assistant para seleccionar dinámicamente la entidad de cámara","camera_template_label":"Plantilla de cámara","camera_template_desc":"Plantilla para establecer dinámicamente la entidad de cámara usando sintaxis Jinja2","examples_title":"Ejemplos comunes:","example1_desc":"Mostrar cámara cuando el clima esté soleado","example2_desc":"Cambiar entre cámaras basado en booleano de entrada","example3_desc":"Usar selector de entrada para elegir entidad de cámara"}},"separator":{"config":{"title":"Configuración de separador"},"style":{"title":"Estilo de separador","desc":"Elige el estilo visual de la línea separadora."},"options":{"solid":"Línea sólida","double":"Línea doble","dotted":"Línea punteada","double_dotted":"Doble punteada","shadow":"Sombra","blank":"Espacio en blanco"},"appearance":{"title":"Apariencia"},"thickness":"Grosor (px)","thickness_desc":"Grosor de la línea separadora.","width":"Ancho (%)","width_desc":"Ancho del separador como porcentaje del contenedor.","color":{"title":"Color","desc":"Color de la línea separadora."},"show_title":"Mostrar título","show_title_desc":"Añadir texto en el medio de la línea separadora (ej., ------ Texto ------)","show_title_toggle":{"enable_toggle_desc":"Activa el interruptor arriba para configurar los ajustes del título"},"text_content":{"title":"Contenido del texto","desc":"Texto a mostrar en el medio del separador."},"font_size":"Tamaño de fuente","font_size_desc":"Tamaño del texto en píxeles.","text_color":{"title":"Color del texto","desc":"Color del texto del separador."},"text_format":{"desc":"Aplica estilos de formato al texto del separador.","title":"Formato del texto","bold":"Negrita","italic":"Cursiva","underline":"Subrayado","uppercase":"Mayúsculas","strikethrough":"Tachado"},"spacer":{"title":"Altura del espaciador"},"height":"Altura (px)","height_desc":"Controla el espacio visual para el espacio en blanco.","orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"design":{"copy":"Copiar","paste":"Pegar","reset_all":"Restablecer todo","copy_tooltip":"Copiar configuración de diseño actual (funciona en todas las Ultra Cards)","paste_tooltip_has":"Pegar configuración de diseño copiada (desde portapapeles)","paste_tooltip_none":"No hay configuración de diseño en el portapapeles","reset_all_tooltip":"Restablecer toda la configuración de diseño por defecto","text_section":"Texto","text_color":"Color del texto","alignment":"Alineación","inherit_alignment":"Heredar (sin alineación)","font_size":"Tamaño de fuente","font_size_placeholder":"16px (por defecto), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Restablecer tamaño de fuente por defecto","line_height":"Altura de línea","line_height_placeholder":"0 (por defecto), 28px, 1.7","reset_line_height":"Restablecer altura de línea por defecto","letter_spacing":"Espaciado de letras","letter_spacing_placeholder":"auto (por defecto), 1px, -0.04em","reset_letter_spacing":"Restablecer espaciado de letras por defecto","font":"Fuente","font_weight":"Grosor de fuente","text_transform":"Transformación de texto","font_style":"Estilo de fuente","default_option":"– Por defecto –","weight_thin":"100 - Fino","weight_light":"300 - Ligero","weight_normal":"400 - Normal","weight_medium":"500 - Medio","weight_semi_bold":"600 - Semi negrita","weight_bold":"700 - Negrita","weight_black":"900 - Negro","transform_none":"Ninguno","transform_uppercase":"MAYÚSCULAS","transform_lowercase":"minúsculas","transform_capitalize":"Capitalizar","style_normal":"Normal","style_italic":"Cursiva","style_oblique":"Oblicua","background_section":"Fondo","background_color":"Color de fondo","background_image_type":"Tipo de imagen de fondo","bg_none":"Ninguno","bg_upload":"Subir imagen","bg_entity":"Imagen de entidad","bg_url":"URL de imagen","sizes_section":"Tamaños","spacing_section":"Espaciado","border_section":"Borde","text_shadow_section":"Sombra de texto","box_shadow_section":"Sombra de caja","position_section":"Posición","overflow_section":"Desbordamiento","animations_section":"Animaciones","width":"Ancho","height":"Alto","max_width":"Ancho máximo","max_height":"Alto máximo","min_width":"Ancho mínimo","min_height":"Alto mínimo","border_radius":"Radio del borde","border_style":"Estilo del borde","border_width":"Grosor del borde","border_color":"Color del borde","margin":"Margen","padding":"Relleno","top":"Arriba","right":"Derecha","bottom":"Abajo","left":"Izquierda","unlock_sides":"Desbloquear para editar lados independientemente","lock_sides":"Bloquear para editar todos los lados juntos","horizontal_shift":"Desplazamiento horizontal","vertical_shift":"Desplazamiento vertical","blur":"Desenfoque","text_shadow_color":"Color de sombra del texto","box_shadow_color":"Color de sombra de caja","overflow":"Desbordamiento","clip_path":"Ruta de recorte","upload_bg_image":"Subir imagen de fondo","bg_image_entity":"Entidad de imagen de fondo","bg_image_url":"URL de imagen de fondo","choose_file":"Elegir archivo","no_file_chosen":"Ningún archivo elegido","backdrop_filter":"Filtro de fondo","spread":"Extensión","visible_default":"Visible (Predeterminado)","examples":"Ejemplos","state_based_animation":"Animación basada en estado","animation_type":"Tipo de animación","animation_duration":"Duración de animación","animation_duration_desc":"Duración de la animación (ej., 2s, 500ms, 1.5s)","intro_outro_animations":"Animaciones de entrada y salida","intro_animation":"Animación de entrada","outro_animation":"Animación de salida","duration":"Duración","delay":"Retraso","timing":"Temporización","none":"Ninguno","ease":"Suave","border_style_none":"Ninguno","border_style_solid":"Sólido","border_style_dashed":"Discontinuo","border_style_dotted":"Punteado","border_style_double":"Doble","position_default":"– Predeterminado –","position_static":"Estático","position_relative":"Relativo","position_absolute":"Absoluto","position_fixed":"Fijo","position_sticky":"Pegajoso","background_filter":"Background Filter"},"modules":{"text":"Módulo de texto","image":"Módulo de imagen","icon":"Módulo de icono","bar":"Módulo de barra","info":"Módulo de información","button":"Módulo de botón","separator":"Módulo separador","markdown":"Módulo de markdown","camera":"Módulo de cámara","graphs":"Módulo de gráficos","no_text_configured":"Sin texto configurado","no_image_configured":"Sin imagen configurada","uploaded_image":"Imagen subida","icons_configured":"{count} iconos configurados","no_icons_configured":"Sin iconos configurados","default_entity_suggestion":"Entidad: sensor.battery_level","sample_text":"Texto de ejemplo","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var g=i.t(h,2);const m=JSON.parse('{"editor":{"tabs":{"layout":"Constructeur de mise en page","settings":"Paramètres","about":"À propos","pro":"Pro"},"settings":{"title":"Paramètres de carte","description":"Configurez l\'apparence globale et le comportement de la carte."},"appearance":{"title":"Apparence","description":"Contrôlez l\'apparence visuelle de votre carte"},"spacing":{"title":"Espacement","description":"Contrôlez l\'espacement et le positionnement de votre carte"},"fields":{"card_background_color":"Couleur d\'arrière-plan de la carte","card_background_color_desc":"La couleur d\'arrière-plan de toute la carte","border_radius":"Rayon de bordure","border_radius_desc":"Coins arrondis de la carte (en pixels)","card_border_color":"Couleur de bordure","card_border_color_desc":"La couleur de bordure de la carte","card_border_width":"Largeur de bordure","card_border_width_desc":"L\'épaisseur de la bordure de la carte (en pixels)","card_padding":"Rembourrage de la carte","card_padding_desc":"Espacement interne à l\'intérieur de la carte","card_margin":"Marge de la carte","card_margin_desc":"Espacement externe autour de la carte","unit_px":"px","reset_default":"Réinitialiser par défaut","reset_default_value":"Réinitialiser par défaut ({value})","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Plein écran","return_dashboard":"Retour au tableau de bord","dashboard":"Tableau de bord"},"common":{"left":"Gauche","center":"Centre","right":"Droite","top":"Haut","bottom":"Bas","none":"Aucun","state":"État","attribute":"Attribut","attribute_name":"Nom de l\'attribut","entity":"Entité","space_between":"Espace entre","space_around":"Espace autour","justify":"Justifier","stretch":"Étirer","baseline":"Ligne de base"},"horizontal":{"layout":{"title":"Configuration de la mise en page","desc":"Configurez la disposition horizontale des éléments dans le conteneur."},"alignment":{"horizontal":"Alignement horizontal","horizontal_desc":"Choisissez comment les éléments sont alignés horizontalement dans le conteneur.","vertical":"Alignement vertical","vertical_desc":"Choisissez comment les éléments sont alignés verticalement dans le conteneur."},"wrapping":{"title":"Autoriser le retour à la ligne","desc":"Autorise les éléments à passer à la ligne lorsqu\'ils dépassent la largeur du conteneur."},"gap":{"title":"Configuration des espacements","between_items":"Espace entre les éléments","desc":"Définissez l\'espacement entre les éléments horizontaux (en unités rem). Utilisez des valeurs négatives pour superposer les éléments."},"empty":{"no_modules":"Aucun module ajouté","add_modules":"Ajoutez des modules dans le constructeur de mise en page pour les voir ici"}},"vertical":{"layout":{"title":"Configuration de la mise en page","desc":"Configurez la disposition verticale des éléments dans le conteneur."},"alignment":{"vertical":"Alignement vertical","vertical_desc":"Choisissez comment les éléments sont alignés verticalement dans le conteneur."},"gap":{"title":"Configuration des espacements","between_items":"Espace entre les éléments","desc":"Définissez l\'espacement entre les éléments verticaux (en unités rem). Utilisez des valeurs négatives pour superposer les éléments."},"empty":{"no_modules":"Aucun module ajouté","add_modules":"Ajoutez des modules dans le constructeur de mise en page pour les voir ici"}},"layout":{"live_preview":"Aperçu en direct","toggle_preview":"Afficher/masquer l\'aperçu","drag_to_move_module":"Glisser pour déplacer le module","edit_module":"Modifier le module","duplicate_module":"Dupliquer le module","delete_module":"Supprimer le module","drag_to_move_layout":"Glisser pour déplacer la mise en page","horizontal_layout":"Disposition horizontale","vertical_layout":"Disposition verticale","add_module_to_layout":"Ajouter un module à la mise en page","layout_settings":"Paramètres de mise en page","duplicate_layout":"Dupliquer la mise en page","delete_layout":"Supprimer la mise en page","click_to_add_module":"Cliquer pour ajouter un module","drop_modules_here":"Déposer les modules ici","drag_to_reorder":"Glisser pour réorganiser","edit_child_module":"Modifier le module enfant","duplicate_child_module":"Dupliquer le module enfant","delete_child_module":"Supprimer le module enfant","module_settings_title":"Paramètres du module","child_module_settings_title":"Paramètres du module enfant","general_tab":"Général","actions_tab":"Actions","other_tab":"Autre","logic_tab":"Logique","design_tab":"Design","drag_to_resize":"Glisser pour redimensionner","hidden_by_logic":"Masqué par la logique","add_row":"Ajouter une ligne","add_row_tooltip":"Ajouter une nouvelle ligne à votre mise en page","undo":"Annuler","undo_tooltip":"Annuler la dernière modification (Ctrl+Z)","redo":"Refaire","redo_tooltip":"Refaire la dernière modification annulée (Ctrl+Y)","row_settings":"Paramètres de ligne","column_settings":"Paramètres de colonne","row_background_color":"Couleur d\'arrière-plan de la ligne","column_gap":"Espacement des colonnes (px)","vertical_alignment":"Alignement vertical","horizontal_alignment":"Alignement horizontal","column_preview":"Aperçu de la colonne","modules_count":"{count} modules","alignment_top":"Haut","alignment_center":"Centre","alignment_bottom":"Bas","alignment_stretch":"Étirer","alignment_left":"Gauche","alignment_right":"Droite","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"layout_logic":{"display_title":"Afficher cet élément","display_desc":"Contrôlez quand cet élément est affiché. Choisissez \\"Toujours\\" pour le garder visible. Sélectionnez \\"Si TOUTES les conditions ci-dessous sont remplies\\" ou \\"Si N\'IMPORTE QUELLE condition ci-dessous est remplie\\" pour l\'afficher uniquement lorsque les conditions ajoutées sont vraies.","always":"Toujours","every":"Si TOUTES les conditions ci-dessous sont remplies","any":"Si N\'IMPORTE QUELLE condition ci-dessous est remplie","conditions":"Conditions","add_condition":"Ajouter une condition","no_conditions":"Aucune condition ajoutée pour le moment. Cliquez sur \\"Ajouter une condition\\" pour commencer.","condition_types":{"entity_state":"État de l\'entité","entity_attribute":"Attribut de l\'entité","time":"Plage horaire","template":"Modèle"},"condition_fields":{"entity":"Entité","operator":"Opérateur","value":"Valeur","attribute":"Attribut","time_from":"De","time_to":"À","template":"Modèle"},"condition_header":"Condition","custom_name":"Nom personnalisé","custom_name_desc":"Optionnel : Donnez un nom personnalisé à cette condition pour l\'identifier plus facilement","condition_type":"Type de condition"},"hover_effects":{"title":"Effets au survol","description":"Configurez les effets visuels qui apparaissent au survol de ce module, de cette ligne ou de cette colonne.","effect":"Effet au survol","effect_desc":"Sélectionnez l\'effet visuel à appliquer au survol","effects":{"none":"Aucun","highlight":"Surligner","outline":"Contour","grow":"Agrandir","shrink":"Réduire","pulse":"Pulsation","bounce":"Rebondir","float":"Flotter","glow":"Lueur","shadow":"Ombre","rotate":"Pivoter","skew":"Incliner","wobble":"Osciller","buzz":"Vibrer","fade":"Fondu"}},"about":{"developed_by":"Développé par","desc1":"Un puissant constructeur de cartes modulaires pour Home Assistant","desc2":"Créez des mises en page personnalisées avec une interface professionnelle de création de pages","desc3":"Système de mise en page modulaire avec logique conditionnelle et outils de conception professionnels","github_repo":"Consultez notre GitHub","join_discord":"Rejoignez notre Discord","support_title":"Soutenez Ultra Card","support_desc":"Vos généreux dons financent le développement de fonctionnalités incroyables pour cette carte ! Sans le soutien d\'utilisateurs comme vous, l\'innovation continue ne serait pas possible.","leave_tip":"FAIRE UN DON (PAYPAL)","version":"Version"},"actions":{"title":"Configuration des actions","description":"Configurez ce qui se passe lorsque les utilisateurs interagissent avec cet élément. Choisissez des actions différentes pour toucher, maintenir et double toucher.","tap_action":"Action au toucher","tap_action_desc":"Action effectuée lors d\'un toucher/clic sur le module","hold_action":"Action au maintien","hold_action_desc":"Action effectuée lors d\'un maintien sur le module","double_tap_action":"Action au double appui","double_tap_action_desc":"Action effectuée lors d\'un double appui sur le module","tap_behavior":"Comportement au toucher","tap_behavior_desc":"Action à effectuer lorsque l\'élément est touché/clické.","hold_behavior":"Comportement au maintien","hold_behavior_desc":"Action à effectuer lorsque l\'élément est pressé et maintenu.","double_tap_behavior":"Comportement au double appui","double_tap_behavior_desc":"Action à effectuer lorsque l\'élément est doublement touché/clické.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"CONFIGURATION DE L\'ENTITÉ","desc":"Configurez l\'entité et les états actif/inactif"},"entity":"Entité","entity_desc":"Sélectionnez l\'entité que cet icône représente","inactive_state":"État inactif","inactive_state_desc":"Valeur d\'état considérée comme \\"inactive\\" (laisser vide pour utiliser l\'état réel de l\'entité)","active_state":"État actif","active_state_desc":"Valeur d\'état considérée comme \\"active\\" (laisser vide pour utiliser l\'état réel de l\'entité)","icon_section":{"title":"Configuration de l\'icône"},"inactive_icon":"Icône inactif","inactive_icon_desc":"Icône affiché lorsque inactif","inactive_icon_config":"Configuration de l\'icône inactif","inactive_icon_config_desc":"Configurer les paramètres de l\'icône inactif","active_icon":"Icône actif","active_icon_desc":"Icône affiché lorsque actif","icon_color_inactive":"Couleur lorsque inactif","icon_color_active":"Couleur lorsque actif","background_shape_inactive":"Forme d\'arrière-plan lorsque inactif","background_shape_active":"Forme d\'arrière-plan lorsque actif","background_color_inactive":"Couleur d\'arrière-plan lorsque inactif","background_color_active":"Couleur d\'arrière-plan lorsque actif","icon_size_inactive":"Taille de l\'icône lorsque inactif","icon_size_active":"Taille de l\'icône lorsque actif","inactive_icon_color":"Couleur de l\'icône inactif","active_icon_color":"Couleur de l\'icône actif","inactive_icon_background":"Arrière-plan de l\'icône inactif","active_icon_background":"Arrière-plan de l\'icône actif","inactive_icon_background_color":"Couleur d\'arrière-plan de l\'icône inactif","active_icon_background_color":"Couleur d\'arrière-plan de l\'icône actif","name_section":{"title":"Configuration du nom"},"inactive_name":"Nom inactif","inactive_name_desc":"Nom personnalisé lorsque inactif","inactive_name_config":"Configuration du nom inactif","inactive_name_config_desc":"Configurer les paramètres de nom inactif","active_name":"Nom actif","active_name_desc":"Nom personnalisé lorsque actif","custom_inactive_name":"Nom inactif personnalisé","custom_inactive_name_desc":"Remplacer le nom de l\'entité lorsque inactif (laisser vide pour utiliser le nom de l\'entité)","custom_active_name":"Nom actif personnalisé","custom_active_name_desc":"Remplacer le nom de l\'entité lorsque actif (laisser vide pour utiliser le nom de l\'entité)","name_color_inactive":"Couleur du nom lorsque inactif","name_color_active":"Couleur du nom lorsque actif","name_size_inactive":"Taille du texte du nom lorsque inactif","name_size_active":"Taille du texte du nom lorsque actif","inactive_name_color":"Couleur du nom inactif","active_name_color":"Couleur du nom actif","state_section":{"title":"Configuration de l\'état"},"inactive_state_color":"Couleur de l\'état inactif","active_state_color":"Couleur de l\'état actif","inactive_state_text":"Texte de l\'état inactif","active_state_text":"Texte de l\'état actif","inactive_state_config":"Configuration de l\'état inactif","inactive_state_config_desc":"Configurer les paramètres de l\'état inactif","custom_inactive_state":"État inactif personnalisé","custom_inactive_state_desc":"Texte personnalisé lorsque inactif (laisser vide pour utiliser l\'état réel)","custom_active_state":"État actif personnalisé","custom_active_state_desc":"Texte personnalisé lorsque actif (laisser vide pour utiliser l\'état réel)","state_color_inactive":"Couleur de l\'état lorsque inactif","state_color_active":"Couleur de l\'état lorsque actif","state_size_inactive":"Taille du texte de l\'état lorsque inactif","state_size_active":"Taille du texte de l\'état lorsque actif","background_section":{"title":"Arrière-plan inactif","desc":"Configurer les paramètres d\'arrière-plan inactif"},"template_section":{"title":"Mode modèle avancé","desc":"Utilisez des modèles Jinja2 pour un contrôle avancé des icônes. Les modèles peuvent contrôler la visibilité (vrai/faux pour afficher/masquer les icônes) et personnaliser le texte de l\'état. Renvoyez un texte personnalisé pour l\'état actif, renvoyez l\'état réel de l\'entité pour l\'état inactif."},"template_mode":"Mode modèle avancé","template":"Modèle","animation_section":{"title":"Animation de l\'icône","desc":"Configurez des animations pour les états actifs et inactifs"},"active_animation":"Animation active","active_animation_desc":"Animation lorsque l\'icône est active","inactive_animation":"Animation inactive","inactive_animation_desc":"Animation lorsque l\'icône est inactive","animation_none":"Aucun","animation_pulse":"Pulsation","animation_spin":"Rotation","animation_bounce":"Rebond","animation_flash":"Clignoter","animation_shake":"Secouer","animation_vibrate":"Vibrer","animation_rotate_left":"Rotation gauche","animation_rotate_right":"Rotation droite","animation_fade":"Fondu","animation_scale":"Échelle","animation_tada":"Tada"},"text":{"content_section":{"title":"Configuration du contenu","desc":"Configurez le contenu texte et les paramètres de base de ce module."},"text_content":"Contenu du texte","text_content_desc":"Saisissez le contenu texte à afficher dans ce module.","icon_section":{"title":"Configuration de l\'icône","desc":"Choisissez une icône à afficher à côté du contenu texte."},"icon":"Icône","icon_desc":"Choisissez une icône à afficher à côté du texte. Laissez vide pour aucune icône.","icon_position":"Position de l\'icône","icon_position_desc":"Choisissez où positionner l\'icône par rapport au texte.","before_text":"Avant le texte","after_text":"Après le texte","template_mode":"Mode modèle","template_mode_desc":"Utilisez la syntaxe de templating Home Assistant pour rendre le texte","value_template":"Modèle de valeur","value_template_desc":"Modèle pour rendre le texte en utilisant la syntaxe Jinja2","examples_title":"Exemples courants :","example_basic":"Valeur de base","example_percent":"Avec pourcentage","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"markdown":{"content":{"title":"Contenu Markdown","label":"Contenu","desc":"Saisissez votre contenu Markdown avec une prise en charge complète de la mise en forme"},"features":{"title":"Fonctionnalités Markdown"},"enable_html":"Activer HTML","enable_html_desc":"Autoriser les balises HTML dans le contenu Markdown","enable_tables":"Activer les tableaux","enable_tables_desc":"Prise en charge de la syntaxe des tableaux Markdown","code_highlighting":"Coloration syntaxique","code_highlighting_desc":"Coloration syntaxique pour les blocs de code"},"bar":{"bar_settings":{"title":"Paramètres de barre","desc":"Configurez comment le pourcentage de la barre est calculé et affiché."},"perc_type":{"entity":"Entité (0-100)","attribute":"Attribut d\'entité","difference":"Différence","template":"Modèle"},"attribute_section":{"title":"Configuration d\'attribut d\'entité","desc":"Configurer les paramètres d\'attribut d\'entité"},"attribute_entity":"Entité d\'attribut","attribute_entity_desc":"Sélectionnez l\'entité qui contient l\'attribut avec la valeur de pourcentage","attribute_name":"Nom d\'attribut","attribute_name_desc":"Entrez le nom de l\'attribut qui contient la valeur de pourcentage (ex. \\"battery_level\\")","diff_section":{"title":"Configuration de calcul de différence","desc":"Configurer les paramètres de calcul de différence"},"current_entity":"Entité de valeur actuelle","current_entity_desc":"Entité représentant la quantité actuelle/utilisée (ex. carburant utilisé, batterie consommée)","total_entity":"Entité de valeur totale","total_entity_desc":"Entité représentant la quantité totale/maximale (ex. capacité de carburant, capacité de batterie)","template_section":{"title":"Configuration de modèle","desc":"Configurer les paramètres de modèle"},"percentage_template":"Modèle de pourcentage","percentage_template_desc":"Entrez un modèle Jinja2 qui retourne un nombre entre 0-100 pour le pourcentage. Exemple : {{ (states(\'sensor.battery_level\') | float) * 100 }}","attr_config":{"title":"Configuration d\'attribut d\'entité","desc":"Configurer les paramètres d\'attribut d\'entité","attribute_entity":"Entité d\'attribut","attribute_entity_desc":"Sélectionnez l\'entité qui contient l\'attribut avec la valeur de pourcentage","attribute_name":"Nom d\'attribut","attribute_name_desc":"Entrez le nom de l\'attribut qui contient la valeur de pourcentage (ex. \\"battery_level\\")"},"diff_config":{"title":"Configuration de calcul de différence","desc":"Configurer les paramètres de calcul de différence","current_entity":"Entité de valeur actuelle","current_entity_desc":"Entité représentant la quantité actuelle/utilisée (ex. carburant utilisé, batterie consommée)","total_entity":"Entité de valeur totale","total_entity_desc":"Entité représentant la quantité totale/maximale (ex. capacité de carburant, capacité de batterie)"},"template_config":{"title":"Configuration de modèle","desc":"Configurer les paramètres de modèle","percentage_template":"Modèle de pourcentage","percentage_template_desc":"Entrez un modèle Jinja2 qui retourne un nombre entre 0-100 pour le pourcentage. Exemple : {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"entity":{"title":"Entité de pourcentage de barre","desc_present":"L\'entité qui fournit la valeur de pourcentage pour la barre.","desc_empty":"Sélectionnez une entité qui fournit une valeur de pourcentage (0-100). Les capteurs de batterie sont idéaux pour les barres.","no_entity_warning":"Aucune entité sélectionnée - Veuillez choisir un capteur avec des valeurs entre 0-100"},"limit_entity":{"title":"Entité de valeur limite (optionnel)","desc":"Optionnel : Ajoutez une ligne d\'indicateur vertical sur la barre (ex. limite de charge pour batterie VE)."},"appearance":{"title":"Apparence de barre","direction":"Direction de remplissage","direction_desc":"Choisissez la direction dans laquelle la barre se remplit lorsque la valeur augmente.","left_to_right":"Gauche vers droite","right_to_left":"Droite vers gauche","height":"Hauteur de barre","height_desc":"Ajustez l\'épaisseur de la barre de progression en pixels.","border_radius":"Rayon de bordure","border_radius_desc":"Contrôlez les coins arrondis de la barre.","style":"Style de barre","style_desc":"Choisissez le style visuel de la barre de progression.","style_flat":"Plat (par défaut)","style_glossy":"Brillant","style_embossed":"Embossé","style_inset":"Incrusté","style_gradient":"Superposition de dégradé","style_neon":"Lueur néon","style_outline":"Contour","style_glass":"Verre","style_metallic":"Métallique","style_neumorphic":"Néomorphique","style_dashed":"Tirets","style_dots":"Points","width":"Largeur de barre","width_desc":"Définissez la largeur de la barre en pourcentage du conteneur.","alignment":"Alignement de barre","alignment_desc":"Choisissez comment aligner la barre quand elle fait moins de 100% de largeur."},"labels":{"alignment":"Alignement d\'étiquette","alignment_desc":"Contrôlez comment les étiquettes gauche et droite sont positionnées."},"percentage":{"title":"Affichage du texte de pourcentage","desc":"Contrôlez la visibilité et l\'apparence des valeurs de pourcentage affichées directement sur la barre. Ces chiffres fournissent un indicateur visuel clair du niveau actuel.","text_size":"Taille du texte","text_size_desc":"Ajustez la taille du texte de pourcentage affiché sur la barre.","text_alignment":"Alignement du texte de pourcentage"},"text_display":{"title":"Affichage du texte","desc":"Contrôlez la visibilité et l\'apparence des valeurs de texte affichées directement sur la barre. Pour les modes différence et modèle, vous pouvez choisir d\'afficher les valeurs d\'entité brutes au lieu des pourcentages.","show_value":"Afficher la valeur au lieu du pourcentage","show_value_desc":"Lorsque activé, affiche la valeur réelle de l\'entité au lieu du pourcentage. Utile pour afficher des valeurs de capteur brutes comme \\"45 kWh\\" au lieu de \\"75%\\".","text_size":"Taille du texte","text_size_desc":"Ajustez la taille du texte affiché sur la barre.","text_alignment":"Alignement du texte"},"left":{"title":"Côté gauche","desc":"Configurez le titre et la valeur d\'entité affichés sur le côté gauche de la barre. Ceci est utile pour afficher des étiquettes comme \'Portée\' ou \'Batterie\' avec leurs valeurs.","title_size":"Taille du titre","value_size":"Taille de la valeur","template_mode":"Mode modèle","template_desc":"Utilisez un modèle pour formater la valeur affichée. Les modèles utilisent la syntaxe Jinja2 de Home Assistant.","value_template":"Modèle de valeur","value_template_desc":"Modèle pour formater la valeur du côté gauche en utilisant la syntaxe Jinja2","enable_toggle":"Activez le commutateur ci-dessus pour configurer les paramètres du côté gauche"},"right":{"title":"Côté droit","desc":"Configurez le titre et la valeur d\'entité affichés sur le côté droit de la barre. Ceci est idéal pour des informations complémentaires comme \'Temps jusqu\'au plein\' ou des mesures secondaires.","title_size":"Taille du titre","value_size":"Taille de la valeur","template_mode":"Mode modèle","template_desc":"Utilisez un modèle pour formater la valeur affichée. Les modèles utilisent la syntaxe Jinja2 de Home Assistant.","value_template":"Modèle de valeur","value_template_desc":"Modèle pour formater la valeur du côté droit en utilisant la syntaxe Jinja2","enable_toggle":"Activez le commutateur ci-dessus pour configurer les paramètres du côté droit"},"colors":{"title":"Couleurs","bar_color":"Couleur de la barre","background_color":"Couleur d\'arrière-plan","border_color":"Couleur de bordure","limit_indicator":"Indicateur de limite","percentage_text":"Texte du pourcentage","text_color":"Couleur du texte","text_color_desc":"Choisissez la couleur pour le texte affiché sur la barre.","dot_color":"Couleur du point","left_side":"Couleurs du côté gauche","right_side":"Couleurs du côté droit","title_color":"Couleur du titre","value_color":"Couleur de la valeur"},"minimal":{"icon_enabled":"Activer l\'icône","icon_enabled_desc":"Afficher une icône sur l\'indicateur de barre minimal","icon":"Icône","icon_desc":"Choisissez une icône à afficher (p. ex., mdi:battery)","icon_mode":"Mode d\'affichage","icon_mode_desc":"Comment afficher l\'icône","mode_dot_only":"Point seulement","mode_icon_only":"Icône seulement","mode_icon_in_dot":"Icône dans le point","icon_size_auto":"Redimensionner automatiquement l\'icône","icon_size_auto_desc":"Redimensionner automatiquement l\'icône avec la hauteur de la barre","icon_size":"Taille de l\'icône","icon_size_desc":"Taille personnalisée de l\'icône en pixels","use_dot_color":"Utiliser la couleur du point","use_dot_color_desc":"Utiliser la couleur du point pour l\'icône (correspond au dégradé)","icon_color":"Couleur de l\'icône","icon_color_desc":"Couleur personnalisée pour l\'icône","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"gradient":{"title":"Mode dégradé","desc":"Appliquez un dégradé de couleur au remplissage de la barre. Quand activé, choisissez comment le dégradé est affiché et personnalisez les arrêts de couleur ci-dessous.","full":"Complet","cropped":"Recadré","value_based":"Basé sur la valeur"},"animation":{"title":"Animation de barre","desc":"Animez le remplissage de la barre en utilisant des préréglages comme les rayures de charge, le pouls, la lueur et plus. Vous pouvez déclencher des animations basées sur l\'état ou l\'attribut d\'une entité, et éventuellement remplacer l\'animation quand une autre condition est remplie.","trigger":{"title":"Déclencheur d\'animation","desc":"Sélectionnez une entité à surveiller et définissez la valeur + animation à appliquer quand elle correspond.","entity_desc":"Entité à évaluer pour le déclencheur d\'animation","type":"Type de déclencheur","type_desc":"Choisissez s\'il faut comparer l\'état de l\'entité ou un attribut","attribute_name_desc":"Nom d\'attribut à comparer (ex. charging_status)","match_value":"Valeur de correspondance","match_value_desc":"Texte à comparer avec l\'état ou l\'attribut (la comparaison est basée sur le texte)."},"type":"Type d\'animation","type_desc":"Sélectionnez comment la barre doit s\'animer quand déclenchée.","types":{"charging":"Charge (lignes diagonales)","pulse":"Pouls","blinking":"Clignotant","bouncing":"Rebondissant","glow":"Lueur","rainbow":"Arc-en-ciel","bubbles":"Bulles","fill":"Remplir","ripple":"Ondulation","traffic":"Trafic (poteau de barbier)","heartbeat":"Battement de cœur","flicker":"Scintillement","shimmer":"Miroitement","vibrate":"Vibrer"},"override":{"title":"Remplacement d\'animation d\'action","desc":"Sélectionnez une entité d\'action et un état pour définir quand cette animation doit remplacer l\'animation normale","entity_desc":"Entité à évaluer pour le déclencheur de remplacement","type_desc":"Animation à utiliser quand la condition de remplacement correspond.","attribute_name_desc":"Nom d\'attribut à comparer","match_value":"Valeur de correspondance de remplacement","match_value_desc":"Comparaison de texte contre l\'état ou l\'attribut","type":"Type d\'animation de remplacement"}}},"image":{"settings":"Paramètres d\'image","source_type":"Type de source d\'image","source_type_desc":"Choisissez comment vous souhaitez spécifier la source de l\'image.","source":{"default":"Image par défaut","url":"URL de l\'image","upload":"Téléverser une image","entity":"Image d\'entité","attribute":"Attribut d\'entité"},"url_section":{"title":"Configuration de l\'URL de l\'image"},"image_url":"URL de l\'image","image_url_desc":"Entrez l\'URL directe de l\'image que vous souhaitez afficher.","upload_section":{"title":"Configuration du téléversement d\'image"},"upload":"Téléverser une image","upload_desc":"Cliquez pour téléverser une image depuis votre appareil.","entity_section":{"title":"Configuration de l\'image d\'entité"},"entity":"Entité","entity_desc":"Sélectionnez une entité qui possède une image (par ex., personne, caméra).","attribute_section":{"title":"Configuration de l\'attribut d\'entité"},"entity_attr_desc":"Sélectionnez l\'entité qui contient l\'URL de l\'image dans l\'un de ses attributs.","attribute_name":"Nom de l\'attribut","attribute_name_desc":"Saisissez le chemin de l\'attribut qui contient l\'URL de l\'image (notation par points prise en charge, p. ex., vehicle_data.vehicleDetails.generalDashboard).","width":"Largeur (%)","width_desc":"Définissez la largeur en pourcentage du conteneur.","height":"Hauteur (px)","height_desc":"Définissez la hauteur en pixels.","crop_fit":"Recadrer et ajuster","crop_fit_desc":"Contrôlez la façon dont l\'image s\'adapte à son conteneur.","fit":{"cover":"Couvrir (recadrer pour remplir)","contain":"Contenir (ajuster l\'image entière)","fill":"Remplir (étirer pour ajuster)","scale_down":"Réduire","none":"Aucun (taille originale)"},"border_radius":"Rayon de bordure","border_radius_desc":"Contrôlez les coins arrondis de l\'image.","tap_actions":"Actions au toucher","filters":"Filtres","filter":{"blur":"Flou","blur_desc":"Appliquez un effet de flou à votre image.","brightness":"Luminosité (%)","brightness_desc":"Ajustez la luminosité de votre image.","contrast":"Contraste (%)","contrast_desc":"Modifiez le contraste de votre image.","saturation":"Saturation (%)","saturation_desc":"Ajustez la saturation de votre image."},"hover":{"title":"Effets au survol","effect_type":"Type d\'effet","effect_type_desc":"Choisissez le type d\'effet au survol.","scale":"Échelle (zoom avant/arrière)","rotate":"Rotation","fade":"Fondu (changement d\'opacité)","blur":"Flou","brightness":"Luminosité","glow":"Lueur (ombre portée)","slide":"Glisser (translation)","scale_amount":"Échelle (%)","scale_amount_desc":"Ajustez l\'échelle de l\'image au survol.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Faites pivoter l\'image au survol.","opacity":"Opacité (%)","opacity_desc":"Modifiez l\'opacité de l\'image au survol.","blur_amount":"Flou (px)","blur_amount_desc":"Appliquez un effet de flou à l\'image au survol.","brightness_amount":"Luminosité (%)","brightness_amount_desc":"Ajustez la luminosité de l\'image au survol.","glow_intensity":"Intensité de la lueur","glow_intensity_desc":"Choisissez l\'intensité de l\'effet de lueur au survol.","glow_light":"Lueur légère","glow_medium":"Lueur moyenne","glow_heavy":"Lueur forte","glow_custom":"Ombre personnalisée","translate_x":"Horizontal (px)","translate_x_desc":"Translatez l\'image horizontalement au survol.","translate_y":"Vertical (px)","translate_y_desc":"Translatez l\'image verticalement au survol."},"alt":"Image","no_source":"Aucune source d\'image configurée"},"graphs":{"chart_type":{"title":"Type de graphique","type":"Type","desc":"Sélectionnez le style de visualisation pour vos données."},"types":{"line":"Graphique linéaire","bar":"Diagramme à barres","pie":"Diagramme circulaire","donut":"Diagramme en anneau"},"data_sources":{"title":"Sources de données","no_entities":"Aucune entité ajoutée","add_first_entity":"Ajoutez votre première entité pour créer un graphique","add_entity":"Ajouter une entité"},"entity":"Entité","line":{"show_points":"Afficher les points","fill_area":"Remplir la zone","line_width":"Épaisseur de ligne","line_style":"Style de ligne"},"line_styles":{"solid":"Plein","dashed":"Tirets","dotted":"Pointillé"},"display":{"title":"Options d\'affichage","show_title":"Afficher le titre du graphique","show_value":"Afficher la valeur du graphique","chart_title":"Titre du graphique","chart_title_placeholder":"Saisir le titre du graphique","time_period":"Période","time_period_desc":"Quantité de données historiques à afficher.","normalize_values":"Normaliser les valeurs sur la même échelle","normalize_desc":"Utile pour comparer des entités avec des unités différentes (p. ex., % vs miles)","chart_height":"Hauteur du graphique","chart_width":"Largeur du graphique (%)","chart_width_desc":"Pourcentage de la largeur disponible du module. L\'alignement contrôle le placement.","chart_alignment":"Alignement du graphique","chart_alignment_desc":"Alignement du graphique dans son conteneur.","info_position":"Position des infos","info_position_desc":"Position de la superposition affichant le nom/la valeur.","legend_position":"Position de la légende","legend_position_desc":"Où placer la légende lorsqu\'elle est activée.","background_color":"Couleur d\'arrière-plan","chart_options":"Options du graphique","show_legend":"Afficher la légende","show_grid":"Afficher la grille","smooth_lines":"Lignes lissées","show_tooltips":"Afficher les infobulles","add_slice_gap":"Ajouter un espace entre les parts","show_grid_values":"Show Grid Values"},"agg":{"mean":"Moyenne","sum":"Somme","min":"Minimum","max":"Maximum","median":"Médiane","first":"Première valeur","last":"Dernière valeur","count":"Nombre","delta":"Variation"},"position":{"top":"Haut","bottom":"Bas","left":"Gauche","right":"Droite","hidden":"Masqué","top_left":"En haut à gauche","top_right":"En haut à droite","bottom_left":"En bas à gauche","bottom_right":"En bas à droite","middle":"Centre","center":"Centre"},"pie":{"show_title":"Afficher le titre dans la part","show_value":"Afficher la valeur dans la part"},"period":{"1h":"Dernière heure","3h":"3 dernières heures","6h":"6 dernières heures","12h":"12 dernières heures","24h":"24 dernières heures","2d":"2 derniers jours","7d":"Semaine dernière","30d":"Mois dernier","90d":"3 derniers mois","365d":"Année dernière"},"reset_345":"Réinitialiser par défaut (345px)","reset_100":"Réinitialiser par défaut (100%)","entity_desc":"Sélectionnez une entité à tracer.","display_name_optional":"Nom d\'affichage (facultatif)","use_as_card_info":"Utiliser comme info de carte","attribute":"Attribut","attribute_desc":"Utilisez l\'état de l\'entité ou sélectionnez un attribut spécifique à suivre.","attribute_state_default":"État (par défaut)","show_points":"Afficher les points","fill_area":"Remplir la zone","line_style":"Style de ligne","line_solid":"Plein","line_dashed":"Tirets","line_dotted":"Pointillé","pie_show_title":"Afficher le titre dans la part","pie_show_value":"Afficher la valeur dans la part","expand_options":"Développer les options","no_entities":"Aucune entité ajoutée","add_first_entity":"Ajoutez votre première entité pour créer un graphique","add_entity":"Ajouter une entité","display_options":{"title":"Options d\'affichage"},"show_title":"Afficher le titre du graphique","show_value":"Afficher la valeur du graphique","chart_title":"Titre du graphique","chart_title_placeholder":"Saisir le titre du graphique","time_period":"Période","time_period_desc":"Quantité de données historiques à afficher.","normalize_values":"Normaliser les valeurs sur la même échelle","normalize_desc":"Utile pour comparer des entités avec des unités différentes (p. ex., % vs miles)","chart_height":"Hauteur du graphique","chart_width":"Largeur du graphique (%)","data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"info":{"entity_section":{"title":"CONFIGURATION DE L\'ENTITÉ"},"entity":"Entité","entity_desc":"Sélectionnez l\'entité à afficher","icon_section":{"title":"Paramètres de l\'icône"},"show_icon":"Afficher l\'icône","show_icon_desc":"Afficher une icône à côté de la valeur de l\'entité","icon":"Icône","icon_desc":"Choisissez une icône à afficher","icon_color":"Couleur de l\'icône","name_section":{"title":"Paramètres du nom"},"show_name":"Afficher le nom","show_name_desc":"Afficher le nom de l\'entité au-dessus de la valeur","custom_name":"Nom personnalisé","custom_name_desc":"Remplacer le nom de l\'entité par un nom personnalisé","name_color":"Couleur du nom","state_section":{"title":"Paramètres d\'état"},"show_state":"Afficher l\'état","show_state_desc":"Afficher l\'état/la valeur de l\'entité","show_units":"Afficher les unités","show_units_desc":"Afficher l\'unité de mesure (si disponible)","state_color":"Couleur de l\'état","template":{"title":"Mode modèle","desc":"Utilisez un modèle pour formater la valeur de l\'entité. Les modèles vous permettent d\'utiliser la syntaxe de templating de Home Assistant pour un formatage complexe.","mode":"Mode modèle","mode_desc":"Utilisez la syntaxe de templating de Home Assistant pour formater la valeur","value":"Modèle de valeur","value_desc":"Modèle pour formater la valeur de l\'entité en utilisant la syntaxe Jinja2"},"size_section":{"title":"Paramètres de taille"},"icon_size":"Taille de l\'icône","icon_size_desc":"Taille de l\'icône en pixels","name_size":"Taille du nom","name_size_desc":"Taille du texte du nom de l\'entité en pixels","value_size":"Taille de la valeur","value_size_desc":"Taille du texte de la valeur de l\'entité en pixels","icon_gap":"Espacement de l\'icône","icon_gap_desc":"Espace entre l\'icône et le contenu en pixels","layout_section":{"title":"Disposition et positionnement"},"icon_position":"Position de l\'icône","overall_alignment":"Alignement global","icon_alignment":"Alignement de l\'icône","content_alignment":"Alignement du contenu","examples_title":"Exemples courants :","example_basic":"Valeur de base","example_units":"Avec unités","example_round":"Arrondir à 1 décimale"},"button":{"basic":{"title":"Paramètres de base","desc":"Configurez l\'apparence du bouton et le contenu du texte."},"text":{"title":"Texte du bouton","desc":"Texte à afficher sur le bouton (laisser vide pour icône seule)."},"style":{"title":"Style du bouton","desc":"Style visuel du bouton"},"alignment":{"title":"Alignement","desc":"Comment le bouton est aligné dans son conteneur"},"styles":{"flat":"Plat (par défaut)","glossy":"Lustré","embossed":"Embossé","inset":"Enfoncé","gradient_overlay":"Superposition en dégradé","neon_glow":"Lueur néon","outline":"Contour","glass":"Verre","metallic":"Métallique"},"align":{"left":"Gauche","center":"Centre","right":"Droite","justify":"Justifier (pleine largeur)"},"icon":{"title":"Paramètres de l\'icône","desc":"Configurez l\'affichage et le positionnement de l\'icône pour le bouton.","before":"Avant le texte","after":"Après le texte","enable_toggle_desc":"Activez l\'interrupteur ci-dessus pour configurer les paramètres de l\'icône"},"icon_field":"Icône","show_icon":"Afficher l\'icône","show_icon_desc":"Afficher une icône sur le bouton","icon_desc":"Icône à afficher (p. ex., mdi:home)","icon_position":"Position de l\'icône","icon_position_desc":"Position de l\'icône par rapport au texte","colors":{"title":"Couleurs","background":"Couleur d\'arrière-plan","text":"Couleur du texte"},"hover":{"title":"Effets au survol","effect_type":"Type d\'effet","effect_type_desc":"Choisissez l\'effet au survol pour ce bouton.","none":"Aucun","color":"Changement de couleur","scale":"Échelle","glow":"Lueur","lift":"Élévation (translation Y)","hover_color":"Couleur au survol","glow_color":"Couleur de la lueur","enable_toggle_desc":"Activez l\'interrupteur ci-dessus pour configurer les effets au survol"},"actions":{"type":"Type d\'action","type_desc":"Choisissez ce qui se passe lorsque le bouton est cliqué","entity":"Entité","entity_desc":"Sélectionnez l\'entité avec laquelle interagir","navigation_path":"Chemin de navigation","navigation_path_desc":"Chemin vers lequel naviguer (p. ex., /dashboard/energy)","service":"Service","service_desc":"Service à appeler (p. ex., light.turn_on)","service_data":"Données de service (JSON)","service_data_desc":"Données facultatives à transmettre au service (format JSON)"},"tap":{"title":"Action au toucher","desc":"Action à effectuer lorsque le bouton est touché"},"hold":{"title":"Action au maintien","desc":"Action à effectuer lorsque le bouton est maintenu enfoncé"},"double":{"title":"Action au double appui","desc":"Action à effectuer lorsque le bouton est doublement touché"}},"layout_extra":{"module_name":"Nom du module :","module_name_placeholder":"Donnez un nom personnalisé à ce module pour l\'identifier plus facilement dans l\'éditeur.","module_name_help":"Donnez un nom personnalisé à ce module pour l\'identifier plus facilement dans l\'éditeur."},"camera":{"config":{"title":"Configuration de la caméra","desc":"Configurez l\'entité caméra et les paramètres d\'affichage."},"entity":"Entité caméra","entity_desc":"Sélectionnez l\'entité caméra à afficher. Il doit s\'agir d\'une entité camera ou mjpeg de Home Assistant.","name":"Nom de la caméra","name_desc":"Nom personnalisé pour la caméra. Laisser vide pour utiliser le nom de l\'entité.","show_name":"Afficher le nom de la caméra","show_name_desc":"Afficher le nom de la caméra sur le flux","show_name_toggle":{"enable_toggle_desc":"Activez l\'interrupteur ci-dessus pour configurer l\'affichage du nom de la caméra"},"name_position":{"group_title":"Position du nom de la caméra","title":"Position du nom","desc":"Choisissez où le nom de la caméra apparaît en superposition sur l\'image de la caméra.","options":{"top_left":"En haut à gauche","top_right":"En haut à droite","center":"Centre","bottom_left":"En bas à gauche","bottom_right":"En bas à droite"}},"display":{"title":"Paramètres d\'affichage"},"live_view":{"title":"Vue en direct","desc":"Activez pour afficher le flux vidéo en direct (nécessite l\'intégration stream). Désactivé, affiche des images fixes."},"auto_refresh":{"section_title":"Paramètres d\'actualisation automatique","title":"Actualisation automatique","desc":"Actualiser automatiquement l\'image de la caméra à intervalles réguliers"},"refresh_interval":{"title":"Intervalle d\'actualisation (secondes)","desc":"Fréquence d\'actualisation automatique de l\'image de la caméra."},"dimensions":{"title":"Dimensions"},"width":"Largeur (px)","width_desc":"Définissez la largeur de l\'affichage de la caméra. Plage : 100-1000px","height":"Hauteur (px)","height_desc":"Définissez la hauteur de l\'affichage de la caméra. Plage : 100-1000px","link_aspect":"Lier le format d\'image","unlink_aspect":"Dissocier le format d\'image","aspect_linked":{"title":"Format d\'image lié","desc":"Les dimensions conservent un ratio de {ratio}:1. L\'ajustement d\'une dimension met automatiquement à jour l\'autre pour conserver les proportions."},"aspect_independent":{"title":"Dimensions indépendantes","desc":"La largeur et la hauteur peuvent être ajustées indépendamment. Cliquez sur le bouton de liaison ci-dessus pour conserver le format d\'image."},"crop":{"title":"Recadrage et position","desc":"Ajustez le recadrage et la position de la vue caméra. Utile pour se concentrer sur des zones spécifiques ou supprimer des bords indésirables.","left_title":"Recadrage gauche (%)","left_desc":"Recadrer depuis le bord gauche. Des valeurs plus élevées montrent moins de la partie gauche.","right_title":"Recadrage droit (%)","right_desc":"Recadrer depuis le bord droit. Des valeurs plus élevées montrent moins de la partie droite.","top_title":"Recadrage supérieur (%)","top_desc":"Recadrer depuis le bord supérieur. Des valeurs plus élevées montrent moins de la zone supérieure.","bottom_title":"Recadrage inférieur (%)","bottom_desc":"Recadrer depuis le bord inférieur. Des valeurs plus élevées montrent moins de la zone inférieure.","active_applied":"Recadrages actifs appliqués","reset_all":"Réinitialiser tous les recadrages"},"template":{"title":"Mode modèle","desc":"Utilisez un modèle pour définir dynamiquement l\'entité caméra. Les modèles permettent d\'utiliser la syntaxe de templating de Home Assistant pour une sélection conditionnelle de la caméra.","mode_label":"Mode modèle","mode_desc":"Utilisez la syntaxe de templating de Home Assistant pour sélectionner dynamiquement l\'entité caméra","camera_template_label":"Modèle de caméra","camera_template_desc":"Modèle pour définir dynamiquement l\'entité caméra en utilisant la syntaxe Jinja2","examples_title":"Exemples courants :","example1_desc":"Afficher la caméra lorsque la météo est ensoleillée","example2_desc":"Basculer entre les caméras en fonction d\'un booléen d\'entrée","example3_desc":"Utiliser un input select pour choisir l\'entité caméra"}},"separator":{"config":{"title":"Configuration du séparateur"},"style":{"title":"Style du séparateur","desc":"Choisissez le style visuel de la ligne de séparation."},"options":{"solid":"Ligne continue","double":"Double ligne","dotted":"Ligne pointillée","double_dotted":"Double pointillé","shadow":"Ombre","blank":"Espace vide"},"appearance":{"title":"Apparence"},"thickness":"Épaisseur (px)","thickness_desc":"Épaisseur de la ligne de séparation.","width":"Largeur (%)","width_desc":"Largeur du séparateur en pourcentage du conteneur.","color":{"title":"Couleur","desc":"Couleur de la ligne de séparation."},"show_title":"Afficher le titre","show_title_desc":"Ajouter du texte au milieu de la ligne de séparation (p. ex., ------ Texte ------)","show_title_toggle":{"enable_toggle_desc":"Activez l\'interrupteur ci-dessus pour configurer les paramètres du titre"},"text_content":{"title":"Contenu du texte","desc":"Texte à afficher au milieu du séparateur."},"font_size":"Taille de police","font_size_desc":"Taille du texte en pixels.","text_color":{"title":"Couleur du texte","desc":"Couleur du texte du séparateur."},"text_format":{"title":"Formatage du texte","desc":"Appliquez des styles de formatage au texte du séparateur.","bold":"Gras","italic":"Italique","underline":"Souligné","uppercase":"Majuscules","strikethrough":"Barré"},"spacer":{"title":"Hauteur de l\'espacement"},"height":"Hauteur (px)","height_desc":"Contrôle l\'espace visuel pour l\'Espace vide.","orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"design":{"copy":"Copier","paste":"Coller","reset_all":"Tout réinitialiser","copy_tooltip":"Copier les paramètres de conception actuels (fonctionne sur toutes les Ultra Cards)","paste_tooltip_has":"Coller les paramètres de conception copiés (depuis le presse-papiers inter-cartes)","paste_tooltip_none":"Aucun paramètre de conception dans le presse-papiers inter-cartes","reset_all_tooltip":"Réinitialiser tous les paramètres de conception par défaut","text_section":"Texte","text_color":"Couleur du texte","alignment":"Alignement","inherit_alignment":"Hériter (pas d\'alignement)","font_size":"Taille de police","font_size_placeholder":"16px (par défaut), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Réinitialiser la taille de police par défaut","line_height":"Interligne","line_height_placeholder":"0 (par défaut), 28px, 1.7","reset_line_height":"Réinitialiser l\'interligne par défaut","letter_spacing":"Espacement des lettres","letter_spacing_placeholder":"auto (par défaut), 1px, -0.04em","reset_letter_spacing":"Réinitialiser l\'espacement des lettres par défaut","font":"Police","font_weight":"Graisse de police","text_transform":"Transformation du texte","font_style":"Style de police","default_option":"– Par défaut –","weight_thin":"100 - Très fin","weight_light":"300 - Léger","weight_normal":"400 - Normal","weight_medium":"500 - Moyen","weight_semi_bold":"600 - Semi-gras","weight_bold":"700 - Gras","weight_black":"900 - Noir","transform_none":"Aucun","transform_uppercase":"MAJUSCULES","transform_lowercase":"minuscules","transform_capitalize":"Capitaliser","style_normal":"Normal","style_italic":"Italique","style_oblique":"Oblique","background_section":"Arrière-plan","background_color":"Couleur d\'arrière-plan","background_image_type":"Type d\'image d\'arrière-plan","bg_none":"Aucun","bg_upload":"Téléverser une image","bg_entity":"Image d\'entité","bg_url":"URL de l\'image","sizes_section":"Tailles","spacing_section":"Espacement","border_section":"Bordure","text_shadow_section":"Ombre du texte","box_shadow_section":"Ombre portée","position_section":"Position","overflow_section":"Débordement","animations_section":"Animations","width":"Largeur","height":"Hauteur","max_width":"Largeur max","max_height":"Hauteur max","min_width":"Largeur min","min_height":"Hauteur min","border_radius":"Rayon de bordure","border_style":"Style de bordure","border_width":"Largeur de bordure","border_color":"Couleur de bordure","margin":"Marge","padding":"Rembourrage","top":"Haut","right":"Droite","bottom":"Bas","left":"Gauche","unlock_sides":"Déverrouiller pour modifier les côtés indépendamment","lock_sides":"Verrouiller pour modifier tous les côtés ensemble","horizontal_shift":"Décalage horizontal","vertical_shift":"Décalage vertical","blur":"Flou","text_shadow_color":"Couleur de l\'ombre du texte","box_shadow_color":"Couleur de l\'ombre portée","overflow":"Débordement","clip_path":"Clip-path","upload_bg_image":"Téléverser l\'image d\'arrière-plan","bg_image_entity":"Entité d\'image d\'arrière-plan","bg_image_url":"URL de l\'image d\'arrière-plan","choose_file":"Choisir un fichier","no_file_chosen":"Aucun fichier choisi","backdrop_filter":"Filtre d\'arrière-plan","spread":"Propagation","visible_default":"Visible (par défaut)","examples":"Exemples","state_based_animation":"Animation basée sur l\'état","animation_type":"Type d\'animation","animation_duration":"Durée de l\'animation","animation_duration_desc":"Durée de l\'animation (p. ex., 2s, 500ms, 1.5s)","intro_outro_animations":"Animations d\'introduction et de sortie","intro_animation":"Animation d\'introduction","outro_animation":"Animation de sortie","duration":"Durée","delay":"Délai","timing":"Synchronisation","none":"Aucun","ease":"Ease","border_style_none":"Aucun","border_style_solid":"Plein","border_style_dashed":"Tirets","border_style_dotted":"Pointillé","border_style_double":"Double","position_default":"– Par défaut –","position_static":"Statique","position_relative":"Relative","position_absolute":"Absolue","position_fixed":"Fixe","position_sticky":"Adhésive","background_filter":"Background Filter"},"modules":{"text":"Module de texte","image":"Module d\'image","icon":"Module d\'icône","bar":"Module de barre","info":"Module d\'info","button":"Module de bouton","separator":"Module de séparateur","markdown":"Module Markdown","camera":"Module de caméra","graphs":"Module de graphiques","no_text_configured":"Aucun texte configuré","no_image_configured":"Aucune image configurée","uploaded_image":"Image téléversée","icons_configured":"{count} icônes configurées","no_icons_configured":"Aucune icône configurée","default_entity_suggestion":"Entité : sensor.battery_level","sample_text":"Texte d\'exemple","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var f=i.t(m,2);const _=JSON.parse('{"editor":{"tabs":{"layout":"Costruttore di layout","settings":"Impostazioni","about":"Informazioni","pro":"Pro"},"settings":{"title":"Impostazioni carta","description":"Configura l\'aspetto globale e il comportamento della carta."},"appearance":{"title":"Aspetto","description":"Controlla l\'aspetto visivo della tua scheda"},"spacing":{"title":"Spaziatura","description":"Controlla la spaziatura e il posizionamento della tua scheda"},"fields":{"card_background_color":"Colore di sfondo della scheda","card_background_color_desc":"Il colore di sfondo dell\'intera scheda","border_radius":"Raggio del bordo","border_radius_desc":"Angoli arrotondati della scheda (in pixel)","card_padding":"Imbottitura della scheda","card_padding_desc":"Spaziatura interna all\'interno della scheda","card_margin":"Margine della scheda","card_margin_desc":"Spaziatura esterna intorno alla scheda","unit_px":"px","reset_default":"Ripristina predefinito","reset_default_value":"Ripristina predefinito ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Schermo intero","return_dashboard":"Torna alla dashboard","dashboard":"Dashboard"},"common":{"left":"Sinistra","center":"Centro","right":"Destra","top":"Alto","bottom":"Basso","none":"Nessuno","state":"Stato","attribute":"Attributo","attribute_name":"Nome attributo","entity":"Entità","space_between":"Spazio tra","space_around":"Spazio intorno","justify":"Giustifica","stretch":"Allunga","baseline":"Linea di base"},"horizontal":{"layout":{"title":"Configurazione layout","desc":"Configura come gli elementi sono disposti orizzontalmente all\'interno del contenitore."},"alignment":{"horizontal":"Allineamento orizzontale","horizontal_desc":"Scegli come allineare gli elementi orizzontalmente nel contenitore.","vertical":"Allineamento verticale","vertical_desc":"Scegli come allineare gli elementi verticalmente nel contenitore."},"wrapping":{"title":"Consenti a capo","desc":"Consenti agli elementi di andare a capo quando superano la larghezza del contenitore."},"gap":{"title":"Configurazione spaziatura","between_items":"Spazio tra elementi","desc":"Imposta la spaziatura tra gli elementi orizzontali (in unità rem). Usa valori negativi per sovrapporre gli elementi."},"empty":{"no_modules":"Nessun modulo aggiunto","add_modules":"Aggiungi moduli nel costruttore di layout per vederli qui"}},"vertical":{"layout":{"title":"Configurazione layout","desc":"Configura come gli elementi sono disposti verticalmente all\'interno del contenitore."},"alignment":{"vertical":"Allineamento verticale","vertical_desc":"Scegli come allineare gli elementi verticalmente nel contenitore."},"gap":{"title":"Configurazione spaziatura","between_items":"Spazio tra elementi","desc":"Imposta la spaziatura tra gli elementi verticali (in unità rem). Usa valori negativi per sovrapporre gli elementi."},"empty":{"no_modules":"Nessun modulo aggiunto","add_modules":"Aggiungi moduli nel costruttore di layout per vederli qui"}},"layout":{"live_preview":"Anteprima dal vivo","toggle_preview":"Attiva/disattiva anteprima","drag_to_move_module":"Trascina per spostare il modulo","edit_module":"Modifica modulo","duplicate_module":"Duplica modulo","delete_module":"Elimina modulo","drag_to_move_layout":"Trascina per spostare il layout","horizontal_layout":"Layout orizzontale","vertical_layout":"Layout verticale","add_module_to_layout":"Aggiungi modulo al layout","layout_settings":"Impostazioni layout","duplicate_layout":"Duplica layout","delete_layout":"Elimina layout","click_to_add_module":"Clicca per aggiungere un modulo","drop_modules_here":"Rilascia i moduli qui","drag_to_reorder":"Trascina per riordinare","edit_child_module":"Modifica modulo figlio","duplicate_child_module":"Duplica modulo figlio","delete_child_module":"Elimina modulo figlio","module_settings_title":"Impostazioni modulo","child_module_settings_title":"Impostazioni modulo figlio","general_tab":"Generale","actions_tab":"Azioni","other_tab":"Altro","logic_tab":"Logica","design_tab":"Design","drag_to_resize":"Trascina per ridimensionare","hidden_by_logic":"Nascosto dalla logica","add_row":"Aggiungi riga","add_row_tooltip":"Aggiungi una nuova riga al tuo layout","row_settings":"Impostazioni riga","column_settings":"Impostazioni colonna","row_background_color":"Colore sfondo riga","column_gap":"Spazio tra colonne (px)","vertical_alignment":"Allineamento verticale","horizontal_alignment":"Allineamento orizzontale","column_preview":"Anteprima colonna","modules_count":"{count} moduli","alignment_top":"Alto","alignment_center":"Centro","alignment_bottom":"Basso","alignment_stretch":"Allunga","alignment_left":"Sinistra","alignment_right":"Destra","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"layout_logic":{"display_title":"Mostra questo elemento","display_desc":"Controlla quando viene mostrato questo elemento. Scegli \\"Sempre\\" per mantenerlo visibile. Seleziona \\"Se TUTTE le condizioni qui sotto sono soddisfatte\\" oppure \\"Se QUALSIASI condizione qui sotto è soddisfatta\\" per visualizzarlo solo quando le condizioni aggiunte risultano vere.","always":"Sempre","every":"Se TUTTE le condizioni qui sotto sono soddisfatte","any":"Se QUALSIASI condizione qui sotto è soddisfatta","conditions":"Condizioni","add_condition":"Aggiungi condizione","no_conditions":"Nessuna condizione aggiunta. Clicca \\"Aggiungi condizione\\" per iniziare.","condition_types":{"entity_state":"Stato entità","entity_attribute":"Attributo entità","time":"Intervallo di tempo","template":"Modello"},"condition_fields":{"entity":"Entità","operator":"Operatore","value":"Valore","attribute":"Attributo","time_from":"Da","time_to":"A","template":"Modello"},"condition_header":"Condizione","custom_name":"Nome personalizzato","custom_name_desc":"Opzionale: assegna un nome personalizzato a questa condizione per identificarla più facilmente","condition_type":"Tipo di condizione"},"hover_effects":{"title":"Effetti al passaggio del mouse","description":"Configura gli effetti visivi che compaiono quando passi il mouse su questo modulo, riga o colonna.","effect":"Effetto hover","effect_desc":"Seleziona l\'effetto visivo da applicare al passaggio del mouse","effects":{"none":"Nessuno","highlight":"Evidenzia","outline":"Contorno","grow":"Cresci","shrink":"Riduci","pulse":"Impulso","bounce":"Rimbalzo","float":"Fluttuare","glow":"Bagliore","shadow":"Ombra","rotate":"Ruota","skew":"Inclina","wobble":"Oscilla","buzz":"Vibra","fade":"Dissolvenza"}},"about":{"developed_by":"Sviluppato da","desc1":"Un potente generatore di schede modulari per Home Assistant","desc2":"Crea layout personalizzati con un\'interfaccia professionale di page builder","desc3":"Sistema di layout modulare con logica condizionale e strumenti di design professionali","github_repo":"Visita il nostro GitHub","join_discord":"Unisciti al nostro Discord","support_title":"Sostieni Ultra Card","support_desc":"Le tue generose donazioni alimentano lo sviluppo di funzionalità straordinarie per questa scheda! Senza il supporto di utenti come te, l\'innovazione continua non sarebbe possibile.","leave_tip":"FAI UNA DONAZIONE (PAYPAL)","version":"Versione"},"actions":{"title":"Configurazione azioni","description":"Configura cosa accade quando gli utenti interagiscono con questo elemento. Scegli azioni diverse per tocco, pressione prolungata e doppio tocco.","tap_action":"Azione al tocco","tap_action_desc":"Azione eseguita toccando/facendo clic sul modulo","hold_action":"Azione alla pressione","hold_action_desc":"Azione eseguita tenendo premuto sul modulo","double_tap_action":"Azione al doppio tocco","double_tap_action_desc":"Azione eseguita al doppio tocco sul modulo","tap_behavior":"Comportamento al tocco","tap_behavior_desc":"Azione da eseguire quando l\'elemento viene toccato/cliccato.","hold_behavior":"Comportamento alla pressione","hold_behavior_desc":"Azione da eseguire quando l\'elemento viene premuto e tenuto.","double_tap_behavior":"Comportamento al doppio tocco","double_tap_behavior_desc":"Azione da eseguire quando l\'elemento viene toccato/cliccato due volte.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"CONFIGURAZIONE ENTITÀ","desc":"Configura l\'entità e gli stati attivo/inattivo"},"entity":"Entità","entity_desc":"Seleziona l\'entità che questa icona rappresenta","inactive_state":"Stato inattivo","inactive_state_desc":"Valore di stato considerato \\"inattivo\\" (lascia vuoto per usare lo stato reale dell\'entità)","active_state":"Stato attivo","active_state_desc":"Valore di stato considerato \\"attivo\\" (lascia vuoto per usare lo stato reale dell\'entità)","icon_section":{"title":"Configurazione icona"},"inactive_icon":"Icona inattiva","inactive_icon_desc":"Icona da mostrare quando inattivo","inactive_icon_config":"Configurazione icona inattiva","inactive_icon_config_desc":"Configura le impostazioni dell\'icona inattiva","active_icon":"Icona attiva","active_icon_desc":"Icona da mostrare quando attivo","icon_color_inactive":"Colore quando inattivo","icon_color_active":"Colore quando attivo","background_shape_inactive":"Forma sfondo quando inattivo","background_shape_active":"Forma sfondo quando attivo","background_color_inactive":"Colore sfondo quando inattivo","background_color_active":"Colore sfondo quando attivo","icon_size_inactive":"Dimensione icona quando inattivo","icon_size_active":"Dimensione icona quando attivo","inactive_icon_color":"Colore icona inattiva","active_icon_color":"Colore icona attiva","inactive_icon_background":"Sfondo icona inattiva","active_icon_background":"Sfondo icona attiva","inactive_icon_background_color":"Colore sfondo icona inattiva","active_icon_background_color":"Colore sfondo icona attiva","name_section":{"title":"Configurazione nome"},"inactive_name":"Nome inattivo","inactive_name_desc":"Nome personalizzato quando inattivo","inactive_name_config":"Configurazione nome inattivo","inactive_name_config_desc":"Configura le impostazioni del nome inattivo","active_name":"Nome attivo","active_name_desc":"Nome personalizzato quando attivo","custom_inactive_name":"Nome inattivo personalizzato","custom_inactive_name_desc":"Sostituisci il nome dell\'entità quando inattivo (lascia vuoto per usare il nome dell\'entità)","custom_active_name":"Nome attivo personalizzato","custom_active_name_desc":"Sostituisci il nome dell\'entità quando attivo (lascia vuoto per usare il nome dell\'entità)","name_color_inactive":"Colore nome quando inattivo","name_color_active":"Colore nome quando attivo","name_size_inactive":"Dimensione testo nome quando inattivo","name_size_active":"Dimensione testo nome quando attivo","inactive_name_color":"Colore nome inattivo","active_name_color":"Colore nome attivo","state_section":{"title":"Configurazione stato"},"inactive_state_color":"Colore stato inattivo","active_state_color":"Colore stato attivo","inactive_state_text":"Testo stato inattivo","active_state_text":"Testo stato attivo","inactive_state_config":"Configurazione stato inattivo","inactive_state_config_desc":"Configura le impostazioni dello stato inattivo","custom_inactive_state":"Stato inattivo personalizzato","custom_inactive_state_desc":"Testo personalizzato quando inattivo (lascia vuoto per usare lo stato reale)","custom_active_state":"Stato attivo personalizzato","custom_active_state_desc":"Testo personalizzato quando attivo (lascia vuoto per usare lo stato reale)","state_color_inactive":"Colore stato quando inattivo","state_color_active":"Colore stato quando attivo","state_size_inactive":"Dimensione testo stato quando inattivo","state_size_active":"Dimensione testo stato quando attivo","background_section":{"title":"Sfondo inattivo","desc":"Configura le impostazioni dello sfondo inattivo"},"template_section":{"title":"Modalità modello avanzata","desc":"Usa modelli Jinja2 per un controllo avanzato delle icone. I modelli possono controllare la visibilità (vero/falso per mostrare/nascondere le icone) e personalizzare il testo dello stato. Restituisci testo personalizzato per lo stato attivo, restituisci lo stato reale dell\'entità per lo stato inattivo."},"template_mode":"Modalità modello avanzata","template":"Modello","animation_section":{"title":"Animazione icona","desc":"Configura le animazioni per gli stati attivo e inattivo"},"active_animation":"Animazione attiva","active_animation_desc":"Animazione quando l\'icona è attiva","inactive_animation":"Animazione inattiva","inactive_animation_desc":"Animazione quando l\'icona è inattiva","animation_none":"Nessuno","animation_pulse":"Impulso","animation_spin":"Rotazione","animation_bounce":"Rimbalzo","animation_flash":"Lampeggio","animation_shake":"Scuotere","animation_vibrate":"Vibrare","animation_rotate_left":"Ruota a sinistra","animation_rotate_right":"Ruota a destra","animation_fade":"Dissolvenza","animation_scale":"Scala","animation_tada":"Tada"},"text":{"content_section":{"title":"Configurazione contenuto","desc":"Configura il contenuto testuale e le impostazioni di base per questo modulo."},"text_content":"Contenuto del testo","text_content_desc":"Inserisci il contenuto testuale da visualizzare in questo modulo.","icon_section":{"title":"Configurazione icona","desc":"Scegli un\'icona da visualizzare accanto al contenuto testuale."},"icon":"Icona","icon_desc":"Scegli un\'icona da visualizzare accanto al testo. Lascia vuoto per nessuna icona.","icon_position":"Posizione icona","icon_position_desc":"Scegli dove posizionare l\'icona rispetto al testo.","before_text":"Prima del testo","after_text":"Dopo il testo","template_mode":"Modalità modello","template_mode_desc":"Usa la sintassi di templating di Home Assistant per renderizzare il testo","value_template":"Modello valore","value_template_desc":"Modello per renderizzare il testo usando la sintassi Jinja2","examples_title":"Esempi comuni:","example_basic":"Valore base","example_percent":"Con percentuale","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"markdown":{"content":{"title":"Contenuto Markdown","label":"Contenuto","desc":"Inserisci il contenuto Markdown con pieno supporto alla formattazione"},"features":{"title":"Funzionalità Markdown"},"enable_html":"Abilita HTML","enable_html_desc":"Consenti tag HTML nel contenuto Markdown","enable_tables":"Abilita tabelle","enable_tables_desc":"Supporto per la sintassi delle tabelle in Markdown","code_highlighting":"Evidenziazione del codice","code_highlighting_desc":"Evidenziazione della sintassi per i blocchi di codice"},"bar":{"bar_settings":{"title":"Impostazioni barra","desc":"Configura come viene calcolata e visualizzata la percentuale della barra."},"perc_type":{"entity":"Entità (0-100)","attribute":"Attributo entità","difference":"Differenza","template":"Modello"},"attribute_section":{"title":"Configurazione attributo entità","desc":"Configura le impostazioni dell\'attributo dell\'entità"},"attribute_entity":"Entità attributo","attribute_entity_desc":"Seleziona l\'entità che contiene l\'attributo con il valore percentuale","attribute_name":"Nome attributo","attribute_name_desc":"Inserisci il nome dell\'attributo che contiene il valore percentuale (es., \\"battery_level\\")","diff_section":{"title":"Configurazione calcolo differenza","desc":"Configura le impostazioni del calcolo della differenza"},"current_entity":"Entità valore attuale","current_entity_desc":"Entità che rappresenta la quantità attuale/utilizzata (es., carburante usato, batteria consumata)","total_entity":"Entità valore totale","total_entity_desc":"Entità che rappresenta la quantità totale/massima (es., capacità serbatoio, capacità batteria)","template_section":{"title":"Configurazione modello","desc":"Configura le impostazioni del modello"},"percentage_template":"Modello percentuale","percentage_template_desc":"Inserisci un modello Jinja2 che restituisca un numero tra 0 e 100 per la percentuale. Esempio: {{ (states(\'sensor.battery_level\') | float) * 100 }}","attr_config":{"title":"Configurazione attributo entità","desc":"Configura le impostazioni dell\'attributo dell\'entità","attribute_entity":"Entità attributo","attribute_entity_desc":"Seleziona l\'entità che contiene l\'attributo con il valore percentuale","attribute_name":"Nome attributo","attribute_name_desc":"Inserisci il nome dell\'attributo che contiene il valore percentuale (es., \\"battery_level\\")"},"diff_config":{"title":"Configurazione calcolo differenza","desc":"Configura le impostazioni del calcolo della differenza","current_entity":"Entità valore attuale","current_entity_desc":"Entità che rappresenta la quantità attuale/utilizzata (es., carburante usato, batteria consumata)","total_entity":"Entità valore totale","total_entity_desc":"Entità che rappresenta la quantità totale/massima (es., capacità serbatoio, capacità batteria)"},"template_config":{"title":"Configurazione modello","desc":"Configura le impostazioni del modello","percentage_template":"Modello percentuale","percentage_template_desc":"Inserisci un modello Jinja2 che restituisca un numero tra 0 e 100 per la percentuale. Esempio: {{ (states(\'sensor.battery_level\') | float) * 100 }}"},"entity":{"title":"Entità percentuale barra","desc_present":"L\'entità che fornisce il valore percentuale per la barra.","desc_empty":"Seleziona un\'entità che fornisce un valore percentuale (0-100). I sensori batteria sono ideali.","no_entity_warning":"Nessuna entità selezionata - Scegli un sensore con valori tra 0 e 100"},"limit_entity":{"title":"Entità valore limite (facoltativa)","desc":"Facoltativo: aggiungi una linea indicatrice verticale sulla barra (es. limite di carica per batteria EV)."},"appearance":{"title":"Aspetto barra","direction":"Direzione di riempimento","direction_desc":"Scegli la direzione in cui si riempie la barra all\'aumentare del valore.","left_to_right":"Da sinistra a destra","right_to_left":"Da destra a sinistra","height":"Altezza barra","height_desc":"Regola lo spessore della barra di avanzamento in pixel.","border_radius":"Raggio del bordo","border_radius_desc":"Controlla gli angoli arrotondati della barra.","style":"Stile barra","style_desc":"Scegli lo stile visivo della barra di avanzamento.","style_flat":"Piatto (predefinito)","style_glossy":"Lucido","style_embossed":"Rilievo","style_inset":"Incassato","style_gradient":"Sovrapposizione gradiente","style_neon":"Bagliore neon","style_outline":"Contorno","style_glass":"Vetro","style_metallic":"Metallico","style_neumorphic":"Neumorfico","style_dashed":"Tratteggiato","style_dots":"Punti","width":"Larghezza barra","width_desc":"Imposta la larghezza della barra come percentuale del contenitore.","alignment":"Allineamento barra","alignment_desc":"Scegli come allineare la barra quando è inferiore al 100% di larghezza."},"labels":{"alignment":"Allineamento etichette","alignment_desc":"Controlla come sono posizionate le etichette di sinistra e destra."},"percentage":{"title":"Visualizzazione testo percentuale","desc":"Controlla visibilità e aspetto dei valori percentuali mostrati direttamente sulla barra. Questi numeri forniscono un chiaro indicatore del livello attuale.","text_size":"Dimensione testo","text_size_desc":"Regola la dimensione del testo percentuale mostrato sulla barra.","text_alignment":"Allineamento testo percentuale"},"left":{"title":"Lato sinistro","desc":"Configura il titolo e il valore dell\'entità mostrati sul lato sinistro della barra. Utile per etichette come \'Autonomia\' o \'Batteria\' insieme ai loro valori.","title_size":"Dimensione titolo","value_size":"Dimensione valore","template_mode":"Modalità modello","template_desc":"Usa un modello per formattare il valore mostrato. I modelli usano la sintassi Jinja2 di Home Assistant.","value_template":"Modello valore","value_template_desc":"Modello per formattare il valore del lato sinistro usando la sintassi Jinja2","enable_toggle":"Abilita l\'interruttore sopra per configurare le impostazioni del lato sinistro"},"right":{"title":"Lato destro","desc":"Configura il titolo e il valore dell\'entità mostrati sul lato destro della barra. Ideale per informazioni complementari come \'Tempo al pieno\' o misurazioni secondarie.","title_size":"Dimensione titolo","value_size":"Dimensione valore","template_mode":"Modalità modello","template_desc":"Usa un modello per formattare il valore mostrato. I modelli usano la sintassi Jinja2 di Home Assistant.","value_template":"Modello valore","value_template_desc":"Modello per formattare il valore del lato destro usando la sintassi Jinja2","enable_toggle":"Abilita l\'interruttore sopra per configurare le impostazioni del lato destro"},"colors":{"title":"Colori","bar_color":"Colore barra","background_color":"Colore sfondo","border_color":"Colore bordo","limit_indicator":"Indicatore limite","percentage_text":"Testo percentuale","left_side":"Colori lato sinistro","right_side":"Colori lato destro","title_color":"Colore titolo","value_color":"Colore valore","text_color":"Colore testo","text_color_desc":"Scegli il colore per il testo mostrato sulla barra.","dot_color":"Colore punto"},"minimal":{"icon_enabled":"Abilita icona","icon_enabled_desc":"Mostra un\'icona sull\'indicatore della barra minimal","icon":"Icona","icon_desc":"Scegli un\'icona da visualizzare (es., mdi:battery)","icon_mode":"Modalità di visualizzazione","icon_mode_desc":"Come visualizzare l\'icona","mode_dot_only":"Solo punto","mode_icon_only":"Solo icona","mode_icon_in_dot":"Icona nel punto","icon_size_auto":"Ridimensiona automaticamente l\'icona","icon_size_auto_desc":"Ridimensiona automaticamente l\'icona con l\'altezza della barra","icon_size":"Dimensione icona","icon_size_desc":"Dimensione personalizzata dell\'icona in pixel","use_dot_color":"Usa colore del punto","use_dot_color_desc":"Usa il colore del punto per l\'icona (corrisponde al gradiente)","icon_color":"Colore icona","icon_color_desc":"Colore personalizzato per l\'icona","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"gradient":{"title":"Modalità gradiente","desc":"Applica un gradiente di colore al riempimento della barra. Quando abilitato, scegli come visualizzare il gradiente e personalizza i punti colore qui sotto.","full":"Completo","cropped":"Ritagliato","value_based":"Basato sul valore"},"animation":{"title":"Animazione barra","desc":"Anima il riempimento della barra usando preset come strisce di carica, impulso, bagliore e altro. Puoi attivare animazioni in base allo stato o all\'attributo di un\'entità e, facoltativamente, sovrascrivere l\'animazione quando si verifica un\'altra condizione.","trigger":{"title":"Trigger animazione","desc":"Seleziona un\'entità da osservare e definisci valore + animazione da applicare quando corrisponde.","entity_desc":"Entità da valutare per il trigger dell\'animazione","type":"Tipo di trigger","type_desc":"Scegli se confrontare lo stato dell\'entità o un attributo","attribute_name_desc":"Nome attributo da confrontare (es., charging_status)","match_value":"Valore di corrispondenza","match_value_desc":"Testo da confrontare con stato o attributo (il confronto è testuale)."},"type":"Tipo di animazione","type_desc":"Seleziona come deve animarsi la barra quando attivata.","types":{"charging":"Carica (linee diagonali)","pulse":"Impulso","blinking":"Lampeggiante","bouncing":"Rimbalzante","glow":"Bagliore","rainbow":"Arcobaleno","bubbles":"Bolle","fill":"Riempimento","ripple":"Increspatura","traffic":"Traffic (asta da barbiere)","heartbeat":"Battito cardiaco","flicker":"Sfarfallio","shimmer":"Sbrilluccichio","vibrate":"Vibrare"},"override":{"title":"Sostituzione animazione dell\'azione","desc":"Seleziona un\'entità azione e uno stato per definire quando questa animazione deve sostituire quella normale","entity_desc":"Entità da valutare per il trigger di sostituzione","type_desc":"Animazione da usare quando la condizione di sostituzione corrisponde.","attribute_name_desc":"Nome attributo da confrontare","match_value":"Valore di corrispondenza per sostituzione","match_value_desc":"Confronto testuale con stato o attributo","type":"Tipo di animazione di sostituzione"}},"text_display":{"title":"Visualizzazione testo","desc":"Controlla la visibilità e l\'aspetto dei valori di testo mostrati direttamente sulla barra. Per le modalità differenza e modello, puoi scegliere di mostrare valori di entità grezzi invece delle percentuali.","show_value":"Mostra valore invece della percentuale","show_value_desc":"Quando abilitato, mostra il valore effettivo dell\'entità invece della percentuale. Utile per mostrare valori di sensore grezzi come \\"45 kWh\\" invece di \\"75%\\".","text_size":"Dimensione testo","text_size_desc":"Regola la dimensione del testo mostrato sulla barra.","text_alignment":"Allineamento testo"}},"image":{"settings":"Impostazioni immagine","source_type":"Tipo di sorgente immagine","source_type_desc":"Scegli come specificare la sorgente dell\'immagine.","source":{"default":"Immagine predefinita","url":"URL immagine","upload":"Carica immagine","entity":"Immagine entità","attribute":"Attributo entità"},"url_section":{"title":"Configurazione URL immagine"},"image_url":"URL immagine","image_url_desc":"Inserisci l\'URL diretto dell\'immagine che vuoi visualizzare.","upload_section":{"title":"Configurazione caricamento immagine"},"upload":"Carica immagine","upload_desc":"Clicca per caricare un file immagine dal tuo dispositivo.","entity_section":{"title":"Configurazione immagine entità"},"entity":"Entità","entity_desc":"Seleziona un\'entità che abbia un\'immagine (es., persona, camera).","attribute_section":{"title":"Configurazione attributo entità"},"entity_attr_desc":"Seleziona l\'entità che contiene l\'URL dell\'immagine in uno dei suoi attributi.","attribute_name":"Nome attributo","attribute_name_desc":"Inserisci il percorso dell\'attributo che contiene l\'URL dell\'immagine (supportata notazione a punti, es., vehicle_data.vehicleDetails.generalDashboard).","width":"Larghezza (%)","width_desc":"Imposta la larghezza come percentuale del contenitore.","height":"Altezza (px)","height_desc":"Imposta l\'altezza in pixel.","crop_fit":"Ritaglia e adatta","crop_fit_desc":"Controlla come l\'immagine si adatta al suo contenitore.","fit":{"cover":"Copri (ritaglia per riempire)","contain":"Contieni (adatta l\'intera immagine)","fill":"Riempi (stira per adattare)","scale_down":"Riduci","none":"Nessuno (dimensione originale)"},"border_radius":"Raggio del bordo","border_radius_desc":"Controlla gli angoli arrotondati dell\'immagine.","tap_actions":"Azioni al tocco","filters":"Filtri","filter":{"blur":"Sfocatura","blur_desc":"Applica un effetto di sfocatura alla tua immagine.","brightness":"Luminosità (%)","brightness_desc":"Regola la luminosità della tua immagine.","contrast":"Contrasto (%)","contrast_desc":"Modifica il contrasto della tua immagine.","saturation":"Saturazione (%)","saturation_desc":"Regola la saturazione della tua immagine."},"hover":{"title":"Effetti hover","effect_type":"Tipo di effetto","effect_type_desc":"Scegli il tipo di effetto hover.","scale":"Scala (zoom avanti/indietro)","rotate":"Ruota","fade":"Dissolvenza (variazione opacità)","blur":"Sfocatura","brightness":"Luminosità","glow":"Bagliore (ombra)","slide":"Scorri (traslazione)","scale_amount":"Scala (%)","scale_amount_desc":"Regola la scala dell\'immagine al passaggio del mouse.","rotate_amount":"Rotazione (°)","rotate_amount_desc":"Ruota l\'immagine al passaggio del mouse.","opacity":"Opacità (%)","opacity_desc":"Cambia l\'opacità dell\'immagine al passaggio del mouse.","blur_amount":"Sfocatura (px)","blur_amount_desc":"Applica un effetto di sfocatura all\'immagine al passaggio del mouse.","brightness_amount":"Luminosità (%)","brightness_amount_desc":"Regola la luminosità dell\'immagine al passaggio del mouse.","glow_intensity":"Intensità bagliore","glow_intensity_desc":"Scegli l\'intensità dell\'effetto bagliore al passaggio del mouse.","glow_light":"Bagliore leggero","glow_medium":"Bagliore medio","glow_heavy":"Bagliore intenso","glow_custom":"Ombra personalizzata","translate_x":"Orizzontale (px)","translate_x_desc":"Trasla l\'immagine orizzontalmente al passaggio del mouse.","translate_y":"Verticale (px)","translate_y_desc":"Trasla l\'immagine verticalmente al passaggio del mouse."},"alt":"Immagine","no_source":"Nessuna sorgente immagine configurata"},"graphs":{"chart_type":{"title":"Tipo di grafico","type":"Tipo","desc":"Seleziona lo stile di visualizzazione per i tuoi dati."},"types":{"line":"Grafico a linee","bar":"Grafico a barre","pie":"Grafico a torta","donut":"Grafico ad anello"},"data_sources":{"title":"Sorgenti dati","no_entities":"Nessuna entità aggiunta","add_first_entity":"Aggiungi la tua prima entità per creare un grafico","add_entity":"Aggiungi entità"},"entity":"Entità","line":{"show_points":"Mostra punti","fill_area":"Riempimento area","line_width":"Spessore linea","line_style":"Stile linea"},"line_styles":{"solid":"Pieno","dashed":"Tratteggiato","dotted":"Punteggiato"},"display":{"title":"Opzioni di visualizzazione","show_title":"Mostra titolo grafico","show_value":"Mostra valore grafico","chart_title":"Titolo grafico","chart_title_placeholder":"Inserisci il titolo del grafico","time_period":"Periodo","time_period_desc":"Quanti dati storici mostrare.","normalize_values":"Normalizza i valori sulla stessa scala","normalize_desc":"Utile quando si confrontano entità con unità diverse (es., % vs miglia)","chart_height":"Altezza grafico","chart_width":"Larghezza grafico (%)","chart_width_desc":"Percentuale della larghezza disponibile del modulo. L\'allineamento controlla il posizionamento.","chart_alignment":"Allineamento grafico","chart_alignment_desc":"Allineamento del grafico all\'interno del suo contenitore.","info_position":"Posizione info","info_position_desc":"Posizione della sovrapposizione che mostra nome/valore.","legend_position":"Posizione legenda","legend_position_desc":"Dove posizionare la legenda quando abilitata.","background_color":"Colore sfondo","chart_options":"Opzioni grafico","show_legend":"Mostra legenda","show_grid":"Mostra griglia","smooth_lines":"Linee smussate","show_tooltips":"Mostra suggerimenti","add_slice_gap":"Aggiungi spazio tra le fette","show_grid_values":"Show Grid Values"},"agg":{"mean":"Media","sum":"Somma","min":"Minimo","max":"Massimo","median":"Mediana","first":"Primo valore","last":"Ultimo valore","count":"Conteggio","delta":"Variazione"},"position":{"top":"Alto","bottom":"Basso","left":"Sinistra","right":"Destra","hidden":"Nascosto","top_left":"In alto a sinistra","top_right":"In alto a destra","bottom_left":"In basso a sinistra","bottom_right":"In basso a destra","middle":"Centro","center":"Centro"},"pie":{"show_title":"Mostra titolo nella fetta","show_value":"Mostra valore nella fetta"},"period":{"1h":"Ultima ora","3h":"Ultime 3 ore","6h":"Ultime 6 ore","12h":"Ultime 12 ore","24h":"Ultime 24 ore","2d":"Ultimi 2 giorni","7d":"Ultima settimana","30d":"Ultimo mese","90d":"Ultimi 3 mesi","365d":"Ultimo anno"},"reset_345":"Ripristina predefinito (345px)","reset_100":"Ripristina predefinito (100%)","entity_desc":"Seleziona un\'entità da tracciare.","display_name_optional":"Nome visualizzato (facoltativo)","use_as_card_info":"Usa come info scheda","attribute":"Attributo","attribute_desc":"Usa lo stato dell\'entità o seleziona un attributo specifico da tracciare.","attribute_state_default":"Stato (predefinito)","show_points":"Mostra punti","fill_area":"Riempimento area","line_style":"Stile linea","line_solid":"Pieno","line_dashed":"Tratteggiato","line_dotted":"Punteggiato","pie_show_title":"Mostra titolo nella fetta","pie_show_value":"Mostra valore nella fetta","expand_options":"Espandi opzioni","no_entities":"Nessuna entità aggiunta","add_first_entity":"Aggiungi la tua prima entità per creare un grafico","add_entity":"Aggiungi entità","display_options":{"title":"Opzioni di visualizzazione"},"show_title":"Mostra titolo grafico","show_value":"Mostra valore grafico","chart_title":"Titolo grafico","chart_title_placeholder":"Inserisci il titolo del grafico","time_period":"Periodo","time_period_desc":"Quanti dati storici mostrare.","normalize_values":"Normalizza i valori sulla stessa scala","normalize_desc":"Utile quando si confrontano entità con unità diverse (es., % vs miglia)","chart_height":"Altezza grafico","chart_width":"Larghezza grafico (%)","data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"info":{"entity_section":{"title":"CONFIGURAZIONE ENTITÀ"},"entity":"Entità","entity_desc":"Seleziona l\'entità da visualizzare","icon_section":{"title":"Impostazioni icona"},"show_icon":"Mostra icona","show_icon_desc":"Mostra un\'icona accanto al valore dell\'entità","icon":"Icona","icon_desc":"Scegli un\'icona da visualizzare","icon_color":"Colore icona","name_section":{"title":"Impostazioni nome"},"show_name":"Mostra nome","show_name_desc":"Mostra il nome dell\'entità sopra il valore","custom_name":"Nome personalizzato","custom_name_desc":"Sostituisci il nome dell\'entità con un nome personalizzato","name_color":"Colore nome","state_section":{"title":"Impostazioni stato"},"show_state":"Mostra stato","show_state_desc":"Mostra lo stato/valore dell\'entità","show_units":"Mostra unità","show_units_desc":"Mostra l\'unità di misura (se disponibile)","state_color":"Colore stato","template":{"title":"Modalità modello","desc":"Usa un modello per formattare il valore dell\'entità. I modelli consentono di utilizzare la sintassi di templating di Home Assistant per formattazioni complesse.","mode":"Modalità modello","mode_desc":"Usa la sintassi di templating di Home Assistant per formattare il valore","value":"Modello valore","value_desc":"Modello per formattare il valore dell\'entità usando la sintassi Jinja2"},"size_section":{"title":"Impostazioni dimensioni"},"icon_size":"Dimensione icona","icon_size_desc":"Dimensione dell\'icona in pixel","name_size":"Dimensione nome","name_size_desc":"Dimensione del testo del nome dell\'entità in pixel","value_size":"Dimensione valore","value_size_desc":"Dimensione del testo del valore dell\'entità in pixel","icon_gap":"Spazio icona","icon_gap_desc":"Spazio tra icona e contenuto in pixel","layout_section":{"title":"Layout e posizionamento"},"icon_position":"Posizione icona","overall_alignment":"Allineamento generale","icon_alignment":"Allineamento icona","content_alignment":"Allineamento contenuto","examples_title":"Esempi comuni:","example_basic":"Valore base","example_units":"Con unità","example_round":"Arrotonda a 1 decimale"},"button":{"basic":{"title":"Impostazioni di base","desc":"Configura l\'aspetto del pulsante e il contenuto del testo."},"text":{"title":"Testo pulsante","desc":"Testo da visualizzare sul pulsante (lascia vuoto per solo icona)."},"style":{"title":"Stile pulsante","desc":"Stile visivo del pulsante"},"alignment":{"title":"Allineamento","desc":"Come il pulsante è allineato nel suo contenitore"},"styles":{"flat":"Piatto (predefinito)","glossy":"Lucido","embossed":"In rilievo","inset":"Incassato","gradient_overlay":"Sovrapposizione gradiente","neon_glow":"Bagliore neon","outline":"Contorno","glass":"Vetro","metallic":"Metallico"},"align":{"left":"Sinistra","center":"Centro","right":"Destra","justify":"Giustifica (larghezza piena)"},"icon":{"title":"Impostazioni icona","desc":"Configura visualizzazione e posizionamento dell\'icona per il pulsante.","before":"Prima del testo","after":"Dopo il testo","enable_toggle_desc":"Abilita l\'interruttore sopra per configurare le impostazioni dell\'icona"},"icon_field":"Icona","show_icon":"Mostra icona","show_icon_desc":"Mostra un\'icona sul pulsante","icon_desc":"Icona da visualizzare (es., mdi:home)","icon_position":"Posizione icona","icon_position_desc":"Posizione dell\'icona rispetto al testo","colors":{"title":"Colori","background":"Colore sfondo","text":"Colore testo"},"hover":{"title":"Effetti hover","effect_type":"Tipo di effetto","effect_type_desc":"Scegli l\'effetto hover per questo pulsante.","none":"Nessuno","color":"Cambio colore","scale":"Scala","glow":"Bagliore","lift":"Sollevamento (traslazione Y)","hover_color":"Colore hover","glow_color":"Colore bagliore","enable_toggle_desc":"Abilita l\'interruttore sopra per configurare gli effetti hover"},"actions":{"type":"Tipo di azione","type_desc":"Scegli cosa accade quando si clicca il pulsante","entity":"Entità","entity_desc":"Seleziona l\'entità con cui interagire","navigation_path":"Percorso di navigazione","navigation_path_desc":"Percorso verso cui navigare (es., /dashboard/energy)","service":"Servizio","service_desc":"Servizio da chiamare (es., light.turn_on)","service_data":"Dati servizio (JSON)","service_data_desc":"Dati facoltativi da passare al servizio (formato JSON)"},"tap":{"title":"Azione al tocco","desc":"Azione da eseguire quando si tocca il pulsante"},"hold":{"title":"Azione alla pressione","desc":"Azione da eseguire quando il pulsante è tenuto premuto"},"double":{"title":"Azione al doppio tocco","desc":"Azione da eseguire quando il pulsante viene toccato due volte"}},"layout_extra":{"module_name":"Nome del modulo:","module_name_placeholder":"Assegna un nome personalizzato a questo modulo per identificarlo più facilmente nell\'editor.","module_name_help":"Assegna un nome personalizzato a questo modulo per identificarlo più facilmente nell\'editor."},"camera":{"config":{"title":"Configurazione telecamera","desc":"Configura l\'entità telecamera e le impostazioni di visualizzazione."},"entity":"Entità telecamera","entity_desc":"Seleziona l\'entità telecamera da visualizzare. Dovrebbe essere un\'entità camera o mjpeg da Home Assistant.","name":"Nome telecamera","name_desc":"Nome personalizzato per la telecamera. Lascia vuoto per usare il nome dell\'entità.","show_name":"Mostra nome telecamera","show_name_desc":"Visualizza il nome della telecamera nel feed","show_name_toggle":{"enable_toggle_desc":"Abilita l\'interruttore sopra per configurare la visualizzazione del nome della telecamera"},"name_position":{"group_title":"Posizione nome telecamera","title":"Posizione nome","desc":"Scegli dove il nome della telecamera appare come sovrapposizione sull\'immagine della telecamera.","options":{"top_left":"In alto a sinistra","top_right":"In alto a destra","center":"Centro","bottom_left":"In basso a sinistra","bottom_right":"In basso a destra"}},"display":{"title":"Impostazioni visualizzazione"},"live_view":{"title":"Vista dal vivo","desc":"Abilita per mostrare lo stream della telecamera dal vivo (richiede integrazione stream). Quando disabilitato, mostra istantanee di immagini fisse."},"auto_refresh":{"section_title":"Impostazioni aggiornamento automatico","title":"Aggiornamento automatico","desc":"Aggiorna automaticamente l\'immagine della telecamera a intervalli regolari"},"refresh_interval":{"title":"Intervallo di aggiornamento (secondi)","desc":"Quanto spesso aggiornare automaticamente l\'immagine della telecamera."},"dimensions":{"title":"Dimensioni"},"width":"Larghezza (px)","width_desc":"Imposta la larghezza del display della telecamera. Intervallo: 100-1000px","height":"Altezza (px)","height_desc":"Imposta l\'altezza del display della telecamera. Intervallo: 100-1000px","link_aspect":"Collega rapporto d\'aspetto","unlink_aspect":"Scollega rapporto d\'aspetto","aspect_linked":{"title":"Rapporto d\'aspetto collegato","desc":"Le dimensioni mantengono un rapporto {ratio}:1. Regolare una dimensione aggiorna automaticamente l\'altra per mantenere le proporzioni."},"aspect_independent":{"title":"Dimensioni indipendenti","desc":"Larghezza e altezza possono essere regolate indipendentemente. Clicca il pulsante di collegamento sopra per mantenere il rapporto d\'aspetto."},"crop":{"title":"Ritaglia e posizione","desc":"Regola il ritaglio e la posizione della vista della telecamera. Utile per focalizzare su aree specifiche o rimuovere bordi indesiderati.","left_title":"Ritaglio sinistro (%)","left_desc":"Ritaglia dal bordo sinistro. Valori più alti mostrano meno del lato sinistro.","right_title":"Ritaglio destro (%)","right_desc":"Ritaglia dal bordo destro. Valori più alti mostrano meno del lato destro.","top_title":"Ritaglio superiore (%)","top_desc":"Ritaglia dal bordo superiore. Valori più alti mostrano meno dell\'area superiore.","bottom_title":"Ritaglio inferiore (%)","bottom_desc":"Ritaglia dal bordo inferiore. Valori più alti mostrano meno dell\'area inferiore.","active_applied":"Ritagli attivi applicati","reset_all":"Reimposta tutti i ritagli"},"template":{"title":"Modalità modello","desc":"Usa un modello per impostare dinamicamente l\'entità telecamera. I modelli permettono di usare la sintassi di templating di Home Assistant per la selezione condizionale della telecamera.","mode_label":"Modalità modello","mode_desc":"Usa la sintassi di templating di Home Assistant per selezionare dinamicamente l\'entità telecamera","camera_template_label":"Modello telecamera","camera_template_desc":"Modello per impostare dinamicamente l\'entità telecamera usando la sintassi Jinja2","examples_title":"Esempi comuni:","example1_desc":"Mostra telecamera quando il tempo è soleggiato","example2_desc":"Cambia tra telecamere basato su input boolean","example3_desc":"Usa input select per scegliere l\'entità telecamera"}},"separator":{"config":{"title":"Configurazione separatore"},"style":{"title":"Stile separatore","desc":"Scegli lo stile visivo della linea di separazione."},"options":{"solid":"Linea continua","double":"Doppia linea","dotted":"Linea tratteggiata","double_dotted":"Doppio tratteggio","shadow":"Ombra","blank":"Spazio vuoto"},"appearance":{"title":"Aspetto"},"thickness":"Spessore (px)","thickness_desc":"Spessore della linea di separazione.","width":"Larghezza (%)","width_desc":"Larghezza del separatore come percentuale del contenitore.","color":{"title":"Colore","desc":"Colore della linea di separazione."},"show_title":"Mostra titolo","show_title_desc":"Aggiungi testo al centro della linea di separazione (es., ------ Testo ------)","show_title_toggle":{"enable_toggle_desc":"Abilita l\'interruttore sopra per configurare le impostazioni del titolo"},"text_content":{"title":"Contenuto testo","desc":"Testo da visualizzare al centro del separatore."},"font_size":"Dimensione carattere","font_size_desc":"Dimensione del testo in pixel.","text_color":{"title":"Colore testo","desc":"Colore del testo del separatore."},"text_format":{"title":"Formattazione testo","desc":"Applica stili di formattazione al testo del separatore.","bold":"Grassetto","italic":"Corsivo","underline":"Sottolineato","uppercase":"Maiuscolo","strikethrough":"Barrato"},"spacer":{"title":"Altezza spazio"},"height":"Altezza (px)","height_desc":"Controlla lo spazio visivo per Spazio vuoto.","orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"design":{"copy":"Copia","paste":"Incolla","reset_all":"Reimposta tutto","copy_tooltip":"Copia le impostazioni di design correnti (funziona su tutte le Ultra Card)","paste_tooltip_has":"Incolla le impostazioni di design copiate (dal clipboard tra schede)","paste_tooltip_none":"Nessuna impostazione di design nel clipboard tra schede","reset_all_tooltip":"Reimposta tutte le impostazioni di design ai valori predefiniti","text_section":"Testo","text_color":"Colore testo","alignment":"Allineamento","inherit_alignment":"Eredita (nessun allineamento)","font_size":"Dimensione carattere","font_size_placeholder":"16px (predefinito), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reimposta dimensione carattere predefinita","line_height":"Interlinea","line_height_placeholder":"0 (predefinito), 28px, 1.7","reset_line_height":"Reimposta interlinea predefinita","letter_spacing":"Spaziatura lettere","letter_spacing_placeholder":"auto (predefinito), 1px, -0.04em","reset_letter_spacing":"Reimposta spaziatura lettere predefinita","font":"Carattere","font_weight":"Spessore carattere","text_transform":"Trasformazione testo","font_style":"Stile carattere","default_option":"– Predefinito –","weight_thin":"100 - Sottile","weight_light":"300 - Leggero","weight_normal":"400 - Normale","weight_medium":"500 - Medio","weight_semi_bold":"600 - Semi grassetto","weight_bold":"700 - Grassetto","weight_black":"900 - Nero","transform_none":"Nessuno","transform_uppercase":"MAIUSCOLO","transform_lowercase":"minuscolo","transform_capitalize":"Iniziale maiuscola","style_normal":"Normale","style_italic":"Corsivo","style_oblique":"Obliquo","background_section":"Sfondo","background_color":"Colore sfondo","background_image_type":"Tipo immagine di sfondo","bg_none":"Nessuno","bg_upload":"Carica immagine","bg_entity":"Immagine entità","bg_url":"URL immagine","sizes_section":"Dimensioni","spacing_section":"Spaziatura","border_section":"Bordo","text_shadow_section":"Ombra testo","box_shadow_section":"Ombra del riquadro","position_section":"Posizione","overflow_section":"Overflow","animations_section":"Animazioni","width":"Larghezza","height":"Altezza","max_width":"Larghezza max","max_height":"Altezza max","min_width":"Larghezza min","min_height":"Altezza min","border_radius":"Raggio del bordo","border_style":"Stile bordo","border_width":"Spessore bordo","border_color":"Colore bordo","margin":"Margine","padding":"Spaziatura interna","top":"Alto","right":"Destra","bottom":"Basso","left":"Sinistra","unlock_sides":"Sblocca per modificare i lati indipendentemente","lock_sides":"Blocca per modificare tutti i lati insieme","horizontal_shift":"Spostamento orizzontale","vertical_shift":"Spostamento verticale","blur":"Sfocatura","text_shadow_color":"Colore ombra testo","box_shadow_color":"Colore ombra riquadro","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Carica immagine di sfondo","bg_image_entity":"Entità immagine di sfondo","bg_image_url":"URL immagine di sfondo","choose_file":"Scegli file","no_file_chosen":"Nessun file selezionato","backdrop_filter":"Filtro sfondo","spread":"Diffusione","visible_default":"Visibile (predefinito)","examples":"Esempi","state_based_animation":"Animazione basata sullo stato","animation_type":"Tipo di animazione","animation_duration":"Durata animazione","animation_duration_desc":"Durata dell\'animazione (es., 2s, 500ms, 1.5s)","intro_outro_animations":"Animazioni di entrata e uscita","intro_animation":"Animazione di entrata","outro_animation":"Animazione di uscita","duration":"Durata","delay":"Ritardo","timing":"Temporizzazione","none":"Nessuno","ease":"Ease","border_style_none":"Nessuno","border_style_solid":"Pieno","border_style_dashed":"Tratteggiato","border_style_dotted":"Punteggiato","border_style_double":"Doppio","position_default":"– Predefinito –","position_static":"Statico","position_relative":"Relativo","position_absolute":"Assoluto","position_fixed":"Fisso","position_sticky":"Adesivo","background_filter":"Background Filter"},"modules":{"text":"Modulo testo","image":"Modulo immagine","icon":"Modulo icona","bar":"Modulo barra","info":"Modulo info","button":"Modulo pulsante","separator":"Modulo separatore","markdown":"Modulo Markdown","camera":"Modulo telecamera","graphs":"Modulo grafici","no_text_configured":"Nessun testo configurato","no_image_configured":"Nessuna immagine configurata","uploaded_image":"Immagine caricata","icons_configured":"{count} icone configurate","no_icons_configured":"Nessuna icona configurata","default_entity_suggestion":"Entità: sensor.battery_level","sample_text":"Testo di esempio","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var v=i.t(_,2);const b=JSON.parse('{"editor":{"tabs":{"layout":"Layoutbygger","settings":"Innstillinger","about":"Om","pro":"Pro"},"settings":{"title":"Kortinnstillinger","description":"Konfigurer global kortutseende og oppførsel."},"appearance":{"title":"Utseende","description":"Kontroller det visuelle utseendet til kortet ditt"},"spacing":{"title":"Avstand","description":"Kontroller avstanden og posisjoneringen til kortet ditt"},"fields":{"card_background_color":"Kort bakgrunnsfarge","card_background_color_desc":"Bakgrunnsfargen til hele kortet","border_radius":"Kantradius","border_radius_desc":"Avrundede hjørner for kortet (i piksler)","card_padding":"Kort polstring","card_padding_desc":"Intern avstand innenfor kortet","card_margin":"Kort marg","card_margin_desc":"Ekstern avstand rundt kortet","unit_px":"px","reset_default":"Tilbakestill til standard","reset_default_value":"Tilbakestill til standard ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Gå til fullskjerm","return_dashboard":"Tilbake til dashbord","dashboard":"Dashbord"},"layout":{"live_preview":"Live forhåndsvisning","toggle_preview":"Veksle forhåndsvisning","drag_to_move_module":"Dra for å flytte modul","edit_module":"Rediger modul","duplicate_module":"Dupliser modul","delete_module":"Slett modul","drag_to_move_layout":"Dra for å flytte layoutmodul","horizontal_layout":"Horisontal layout","vertical_layout":"Vertikal layout","add_module_to_layout":"Legg til modul i layout","layout_settings":"Layoutinnstillinger","duplicate_layout":"Dupliser layout","delete_layout":"Slett layout","click_to_add_module":"Klikk for å legge til en modul","drop_modules_here":"Slipp moduler her","drag_to_reorder":"Dra for å endre rekkefølge","edit_child_module":"Rediger undermodul","duplicate_child_module":"Dupliser undermodul","delete_child_module":"Slett undermodul","module_settings_title":"Modulinnstillinger","general_tab":"Generelt","actions_tab":"Handlinger","other_tab":"Annet","logic_tab":"Logikk","design_tab":"Design","drag_to_resize":"Dra for å endre størrelse","hidden_by_logic":"Skjult av logikk","child_module_settings_title":"Undermodulinnstillinger","add_row":"Legg til rad","add_row_tooltip":"Legg til en ny rad til layoutet ditt","row_settings":"Radinnstillinger","column_settings":"Kolonneinnstillinger","row_background_color":"Rad bakgrunnsfarge","column_gap":"Kolonneavstand (px)","vertical_alignment":"Vertikal justering","horizontal_alignment":"Horisontal justering","column_preview":"Kolonneforhåndsvisning","modules_count":"{count} moduler","alignment_top":"Topp","alignment_center":"Senter","alignment_bottom":"Bunn","alignment_stretch":"Strekk","alignment_left":"Venstre","alignment_right":"Høyre","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Utviklet av","desc1":"En kraftig modulær kortbygger for Home Assistant","desc2":"Lag tilpassede layouter med et profesjonelt sidebygger-grensesnitt","desc3":"Modulært layoutsystem med betinget logikk og profesjonelle designverktøy","github_repo":"GitHub-repositorium","version":"Versjon","join_discord":"Bli med på vår Discord","support_title":"Støtt Ultra Card","support_desc":"Dine sjenerøse tips driver utviklingen av fantastiske funksjoner for dette kortet! Uten støtte fra brukere som deg, ville fortsatt innovasjon ikke vært mulig.","leave_tip":"GI ET TIPS (PAYPAL)"},"actions":{"title":"Handlingskonfigurasjon","description":"Konfigurer hvordan denne modulen reagerer på brukerinteraksjoner. Bruker Home Assistants innebygde handlingssystem for konsistent oppførsel på dashbordet ditt.","tap_action":"Trykk-handling","tap_action_desc":"Handling utført ved å trykke/klikke på modulen","hold_action":"Hold-handling","hold_action_desc":"Handling utført ved å holde nede på modulen","double_tap_action":"Dobbelttrykk-handling","double_tap_action_desc":"Handling utført ved dobbelttrykking på modulen","tap_behavior":"Trykk-oppførsel","tap_behavior_desc":"Handling å utføre når elementet trykkes/klikkes.","hold_behavior":"Hold-oppførsel","hold_behavior_desc":"Handling å utføre når elementet trykkes og holdes.","double_tap_behavior":"Dobbelttrykk-oppførsel","double_tap_behavior_desc":"Handling å utføre når elementet dobbeltrykkes/klikkes.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITETSKONFIGURASJON","desc":"Konfigurer entiteten og aktive/inaktive tilstander"},"entity":"Entitet","entity_desc":"Velg entiteten dette ikonet representerer","inactive_state":"Inaktiv tilstand","inactive_state_desc":"Tilstandsverdi ansett som \\"inaktiv\\" (la stå tom for å bruke faktisk entitetstilstand)","active_state":"Aktiv tilstand","active_state_desc":"Tilstandsverdi ansett som \\"aktiv\\" (la stå tom for å bruke faktisk entitetstilstand)","active_animation":"Aktiv animasjon","active_animation_desc":"Animasjon når ikon er aktiv","active_icon":"Aktivt ikon","active_icon_background":"Aktivt ikon bakgrunn","active_icon_background_color":"Aktivt ikon bakgrunnsfarge","active_icon_color":"Aktivt ikon farge","active_icon_desc":"Ikon å vise når aktiv","active_name":"Aktivt navn","active_name_color":"Aktivt navn farge","active_name_desc":"Tilpasset navn når aktiv","active_state_color":"Aktiv tilstandsfarge","active_state_text":"Aktiv tilstandstekst","animation_bounce":"Hopp","animation_fade":"Fade","animation_flash":"Blink","animation_none":"Ingen","animation_pulse":"Puls","animation_rotate_left":"Roter venstre","animation_rotate_right":"Roter høyre","animation_scale":"Skaler","animation_section":{"desc":"Konfigurer animasjoner for aktive og inaktive tilstander","title":"Ikonanimasjon"},"animation_shake":"Rist","animation_spin":"Snurr","animation_tada":"Tada","animation_vibrate":"Vibrer","background_color_active":"Bakgrunnsfarge når aktiv","background_color_inactive":"Bakgrunnsfarge når inaktiv","background_section":{"desc":"Konfigurer inaktive bakgrunnsinnstillinger","title":"Inaktiv bakgrunn"},"background_shape_active":"Bakgrunnsform når aktiv","background_shape_inactive":"Bakgrunnsform når inaktiv","custom_active_name":"Tilpasset aktivt navn","custom_active_name_desc":"Overstyr entitetsnavn når aktiv (la stå tom for å bruke entitetsnavn)","custom_active_state":"Tilpasset aktiv tilstand","custom_active_state_desc":"Tilpasset tekst når aktiv (la stå tom for å bruke faktisk tilstand)","custom_inactive_name":"Tilpasset inaktivt navn","custom_inactive_name_desc":"Overstyr entitetsnavn når inaktiv (la stå tom for å bruke entitetsnavn)","custom_inactive_state":"Tilpasset inaktiv tilstand","custom_inactive_state_desc":"Tilpasset tekst når inaktiv (la stå tom for å bruke faktisk tilstand)","icon_color_active":"Farge når aktiv","icon_color_inactive":"Farge når inaktiv","icon_section":{"title":"Ikonkonfigurasjon"},"icon_size_active":"Ikonstørrelse når aktiv","icon_size_inactive":"Ikonstørrelse når inaktiv","inactive_animation":"Inaktiv animasjon","inactive_animation_desc":"Animasjon når ikon er inaktiv","inactive_icon":"Inaktivt ikon","inactive_icon_background":"Inaktivt ikon bakgrunn","inactive_icon_background_color":"Inaktivt ikon bakgrunnsfarge","inactive_icon_color":"Inaktivt ikon farge","inactive_icon_config":"Konfigurasjon av inaktivt ikon","inactive_icon_config_desc":"Konfigurer innstillinger for inaktivt ikon","inactive_icon_desc":"Ikon å vise når inaktiv","inactive_name":"Inaktivt navn","inactive_name_color":"Inaktivt navn farge","inactive_name_config":"Konfigurasjon av inaktivt navn","inactive_name_config_desc":"Konfigurer innstillinger for inaktivt navn","inactive_name_desc":"Tilpasset navn når inaktiv","inactive_state_color":"Inaktiv tilstandsfarge","inactive_state_config":"Konfigurasjon av inaktiv tilstand","inactive_state_config_desc":"Konfigurer innstillinger for inaktiv tilstand","inactive_state_text":"Inaktiv tilstandstekst","name_color_active":"Navnefarge når aktiv","name_color_inactive":"Navnefarge når inaktiv","name_section":{"title":"Navnekonfigurasjon"},"name_size_active":"Navnetekststørrelse når aktiv","name_size_inactive":"Navnetekststørrelse når inaktiv","state_color_active":"Tilstandsfarge når aktiv","state_color_inactive":"Tilstandsfarge når inaktiv","state_section":{"title":"Tilstandskonfigurasjon"},"state_size_active":"Tilstandstekststørrelse når aktiv","state_size_inactive":"Tilstandstekststørrelse når inaktiv","template":"Mal","template_mode":"Avansert malmodus","template_section":{"desc":"Bruk Jinja2-maler for avansert ikonkontroll. Maler kan kontrollere synlighet (sant/usant for å vise/skjule ikoner) og tilpasse tilstandstekst. Returner tilpasset tekst for aktiv tilstand, returner faktisk entitetstilstand for inaktiv tilstand.","title":"Avansert malmodus"}},"text":{"content_section":{"title":"Innholdskonfigurasjon","desc":"Konfigurer tekstinnholdet og grunnleggende innstillinger for denne modulen."},"text_content":"Tekstinnhold","text_content_desc":"Skriv inn tekstinnholdet som skal vises i denne modulen.","icon_section":{"title":"Ikonkonfigurasjon","desc":"Velg et ikon som skal vises sammen med tekstinnholdet."},"icon":"Ikon","icon_desc":"Velg et ikon som skal vises sammen med teksten. La stå tom for ingen ikon.","icon_position":"Ikonposisjon","icon_position_desc":"Velg hvor ikonet skal plasseres i forhold til teksten.","before_text":"Før tekst","after_text":"Etter tekst","template_mode":"Malmodus","template_mode_desc":"Bruk Home Assistant-malsyntaks for å gjengi tekst","value_template":"Verdimal","value_template_desc":"Mal for å gjengi teksten ved hjelp av Jinja2-syntaks","examples_title":"Vanlige eksempler:","example_basic":"Grunnverdi","example_percent":"Med prosent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Stolpeinnstillinger","desc":"Konfigurer hvordan stolpeprosenten beregnes og vises."},"perc_type":{"entity":"Entitet (0-100)","attribute":"Entitetsattributt","difference":"Forskjell","template":"Mal"},"attribute_section":{"title":"Konfigurasjon av entitetsattributt","desc":"Konfigurer entitetsattributtinnstillinger"},"attribute_entity":"Attributtentitet","attribute_entity_desc":"Velg entiteten som inneholder attributtet med prosentverdien","attribute_name":"Attributtnavn","attribute_name_desc":"Skriv inn navnet på attributtet som inneholder prosentverdien (f.eks. \\"battery_level\\")","diff_section":{"title":"Konfigurasjon av forskjellsberegning","desc":"Konfigurer innstillinger for forskjellsberegning"},"current_entity":"Nåværende verdi-entitet","current_entity_desc":"Entitet som representerer nåværende/brukt mengde (f.eks. brukt drivstoff, forbrukt batteri)","total_entity":"Total verdi-entitet","total_entity_desc":"Entitet som representerer total/maksimal mengde (f.eks. drivstoffkapasitet, batterikapasitet)","template_section":{"title":"Malkonfigurasjon","desc":"Konfigurer malinnstillinger"},"percentage_template":"Prosentmal","percentage_template_desc":"Skriv inn en Jinja2-mal som returnerer et tall mellom 0-100 for prosenten. Eksempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animer stolpefyllet ved hjelp av forhåndsinnstillinger som ladestiper, puls, glød og mer. Du kan utløse animasjoner basert på en entitets tilstand eller attributt, og eventuelt overstyre animasjonen når en annen betingelse er oppfylt.","override":{"attribute_name_desc":"Attributtnavn å sammenligne","desc":"Velg en handlingsentitet og tilstand for å definere når denne animasjonen skal overstyre den vanlige animasjonen","entity_desc":"Entitet å evaluere for overstyring av utløser","match_value":"Overstyr samsvarverdi","match_value_desc":"Tekstsammenligning mot tilstand eller attributt","title":"Overstyring av handlingsanimasjon","type":"Overstyr animasjonstype","type_desc":"Animasjon å bruke når overstyringsbetingelsen samsvarer."},"title":"Stolpeanimasjon","trigger":{"attribute_name_desc":"Attributtnavn å sammenligne (f.eks. charging_status)","desc":"Velg en entitet å overvåke og definer verdien + animasjonen å bruke når den samsvarer.","entity_desc":"Entitet å evaluere for animasjonsutløser","match_value":"Samsvarverdi","match_value_desc":"Tekst å sammenligne mot tilstand eller attributt (sammenligning er tekstbasert).","title":"Animasjonsutløser","type":"Utløsertype","type_desc":"Velg om du vil sammenligne entitetstilstand eller et attributt"},"type":"Animasjonstype","type_desc":"Velg hvordan stolpen skal animeres når utløst.","types":{"blinking":"Blinkende","bouncing":"Hoppende","bubbles":"Bobler","charging":"Lading (diagonale linjer)","fill":"Fyll","flicker":"Flimmer","glow":"Glød","heartbeat":"Hjerteslag","pulse":"Puls","rainbow":"Regnbue","ripple":"Krusning","shimmer":"Skimmer","traffic":"Trafikk (barberstang)","vibrate":"Vibrer"}},"appearance":{"alignment":"Stolpejustering","alignment_desc":"Velg hvordan stolpen skal justeres når den er mindre enn 100% bredde.","border_radius":"Kantradius","border_radius_desc":"Kontroller de avrundede hjørnene til stolpen.","height":"Stolpehøyde","height_desc":"Juster tykkelsen til fremdriftsstolpen i piksler.","style":"Stolpestil","style_dashed":"Stiplet","style_desc":"Velg den visuelle stilen til fremdriftsstolpen.","style_dots":"Dots","style_embossed":"Preget","style_flat":"Flat (standard)","style_glass":"Glass","style_glossy":"Blank","style_gradient":"Gradientoverlegg","style_inset":"Innfelt","style_metallic":"Metallisk","style_neon":"Neonglød","style_neumorphic":"Neumorfisk","style_outline":"Omriss","title":"Stolpeutseende","direction":"Fylleretning","direction_desc":"Velg retningen stolpen fyller seg i når verdien øker.","left_to_right":"Venstre til høyre","right_to_left":"Høyre til venstre","width":"Stolpebredde","width_desc":"Sett stolpebredden som prosent av beholder."},"attr_config":{"attribute_entity":"Attributtentitet","attribute_entity_desc":"Velg entiteten som inneholder attributtet med prosentverdien","attribute_name":"Attributtnavn","attribute_name_desc":"Skriv inn navnet på attributtet som inneholder prosentverdien (f.eks. \\"battery_level\\")","desc":"Konfigurer entitetsattributtinnstillinger","title":"Konfigurasjon av entitetsattributt"},"colors":{"background_color":"Bakgrunnsfarge","bar_color":"Stolpefarge","border_color":"Kantfarge","left_side":"Venstre side farger","limit_indicator":"Grenseindikator","percentage_text":"Prosenttekst","right_side":"Høyre side farger","title":"Farger","title_color":"Tittelfarge","value_color":"Verdifarge","text_color":"Tekstfarge","text_color_desc":"Velg fargen for teksten vist på stolpen.","dot_color":"Punktfarge"},"minimal":{"icon_enabled":"Aktiver ikon","icon_enabled_desc":"Vis et ikon på den minimale linjeindikatoren","icon":"Ikon","icon_desc":"Velg et ikon å vise (f.eks. mdi:battery)","icon_mode":"Visningsmodus","icon_mode_desc":"Hvordan ikonet skal vises","mode_dot_only":"Kun punkt","mode_icon_only":"Kun ikon","mode_icon_in_dot":"Ikon i punkt","icon_size_auto":"Skaler ikon automatisk","icon_size_auto_desc":"Skaler ikon automatisk med linjehøyde","icon_size":"Ikonstørrelse","icon_size_desc":"Tilpasset ikonstørrelse i piksler","use_dot_color":"Bruk punktfarge","use_dot_color_desc":"Bruk punktfargen for ikonet (matcher gradient)","icon_color":"Ikonfarge","icon_color_desc":"Tilpasset farge for ikonet","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Nåværende verdi-entitet","current_entity_desc":"Entitet som representerer nåværende/brukt mengde (f.eks. brukt drivstoff, forbrukt batteri)","desc":"Konfigurer innstillinger for forskjellsberegning","title":"Konfigurasjon av forskjellsberegning","total_entity":"Total verdi-entitet","total_entity_desc":"Entitet som representerer total/maksimal mengde (f.eks. drivstoffkapasitet, batterikapasitet)"},"entity":{"desc_empty":"Velg en entitet som gir en prosentverdi (0-100). Batterisensorer er ideelle for stolper.","desc_present":"Entiteten som gir prosentverdien for stolpen.","no_entity_warning":"Ingen entitet valgt - Velg en sensor med verdier mellom 0-100","title":"Stolpe prosent-entitet"},"gradient":{"cropped":"Beskåret","desc":"Bruk en fargegradient på stolpefyllet. Når aktivert, velg hvordan gradienten vises og tilpass fargestopp nedenfor.","full":"Full","title":"Gradientmodus","value_based":"Verdibasert"},"labels":{"alignment":"Etikettjustering","alignment_desc":"Kontroller hvordan venstre og høyre etiketter er posisjonert."},"left":{"desc":"Konfigurer tittelen og entitetsverdien vist på venstre side av stolpen. Dette er nyttig for å vise etiketter som \'Rekkevidde\' eller \'Batteri\' sammen med deres verdier.","enable_toggle":"Aktiver bryteren over for å konfigurere venstre side innstillinger","template_desc":"Bruk en mal for å formatere den viste verdien. Maler bruker Home Assistants Jinja2-syntaks.","template_mode":"Malmodus","title":"Venstre side","title_size":"Tittelstørrelse","value_size":"Verdistørrelse","value_template":"Verdimal","value_template_desc":"Mal for å formatere venstre side verdien ved hjelp av Jinja2-syntaks"},"limit_entity":{"desc":"Valgfritt: Legg til en vertikal indikatorlinje på stolpen (f.eks. ladegrense for EV-batteri).","title":"Grenseverdi-entitet (valgfritt)"},"percentage":{"desc":"Kontroller synligheten og utseendet til prosentverdier vist direkte på stolpen. Disse tallene gir en klar visuell indikator for nåværende nivå.","text_alignment":"Prosenttekst justering","text_size":"Tekststørrelse","text_size_desc":"Juster størrelsen på prosenttekst vist på stolpen.","title":"Prosenttekst visning"},"right":{"desc":"Konfigurer tittelen og entitetsverdien vist på høyre side av stolpen. Dette er ideelt for utfyllende informasjon som \'Tid til full\' eller sekundære målinger.","enable_toggle":"Aktiver bryteren over for å konfigurere høyre side innstillinger","template_desc":"Bruk en mal for å formatere den viste verdien. Maler bruker Home Assistants Jinja2-syntaks.","template_mode":"Malmodus","title":"Høyre side","title_size":"Tittelstørrelse","value_size":"Verdistørrelse","value_template":"Verdimal","value_template_desc":"Mal for å formatere høyre side verdien ved hjelp av Jinja2-syntaks"},"template_config":{"desc":"Konfigurer malinnstillinger","percentage_template":"Prosentmal","percentage_template_desc":"Skriv inn en Jinja2-mal som returnerer et tall mellom 0-100 for prosenten. Eksempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Malkonfigurasjon"},"text_display":{"title":"Tekstvisning","desc":"Kontroller synligheten og utseendet til tekstverdier vist direkte på stolpen. For forskjells- og malmoduser kan du velge å vise rå enhetsverdier i stedet for prosenter.","show_value":"Vis verdi i stedet for prosent","show_value_desc":"Når aktivert, viser den faktiske enhetsverdien i stedet for prosent. Nyttig for å vise rå sensorverdier som \\"45 kWh\\" i stedet for \\"75%\\".","text_size":"Tekststørrelse","text_size_desc":"Juster størrelsen på teksten vist på stolpen.","text_alignment":"Tekstjustering"}},"image":{"settings":"Bildeinnstillinger","source_type":"Bildekildetype","source_type_desc":"Velg hvordan du vil spesifisere bildekilden.","source":{"default":"Standardbilde","url":"Bilde-URL","upload":"Last opp bilde","entity":"Entitetsbilde","attribute":"Entitetsattributt"},"url_section":{"title":"Konfigurasjon av bilde-URL"},"image_url":"Bilde-URL","image_url_desc":"Skriv inn den direkte URL-en til bildet du vil vise.","upload_section":{"title":"Konfigurasjon av bildeopplasting"},"upload":"Last opp bilde","upload_desc":"Klikk for å laste opp en bildefil fra enheten din.","entity_section":{"title":"Konfigurasjon av entitetsbilde"},"entity":"Entitet","entity_desc":"Velg en entitet som har et bilde (f.eks. person, kameraentiteter).","attribute_section":{"title":"Konfigurasjon av entitetsattributt"},"entity_attr_desc":"Velg entiteten som inneholder bilde-URL-en i et av sine attributter.","attribute_name":"Attributtnavn","attribute_name_desc":"Skriv inn attributtstien som inneholder bilde-URL-en (punktnotasjon støttet, f.eks. vehicle_data.vehicleDetails.generalDashboard).","width":"Bredde (%)","width_desc":"Sett bredden som en prosent av beholderen.","height":"Høyde (px)","height_desc":"Sett høyden i piksler.","crop_fit":"Beskjær og tilpass","crop_fit_desc":"Kontroller hvordan bildet passer innenfor sin beholder.","fit":{"cover":"Dekk (beskjær for å fylle)","contain":"Innhold (tilpass hele bildet)","fill":"Fyll (strekk for å passe)","scale_down":"Skaler ned","none":"Ingen (original størrelse)"},"border_radius":"Kantradius","border_radius_desc":"Kontroller de avrundede hjørnene til bildet.","tap_actions":"Trykk-handlinger","filters":"Filtre","filter":{"blur":"Uskarphet","blur_desc":"Bruk en uskarphet-effekt på bildet ditt.","brightness":"Lysstyrke (%)","brightness_desc":"Juster lysstyrken til bildet ditt.","contrast":"Kontrast (%)","contrast_desc":"Endre kontrasten til bildet ditt.","saturation":"Metning (%)","saturation_desc":"Juster metningen til bildet ditt."},"hover":{"title":"Hover-effekter","effect_type":"Effekttype","effect_type_desc":"Velg typen hover-effekt.","scale":"Skaler (zoom inn/ut)","rotate":"Roter","fade":"Fade (gjennomsiktighetendring)","blur":"Uskarphet","brightness":"Lysstyrke","glow":"Glød (boksskygge)","slide":"Gli (oversett)","scale_amount":"Skaler (%)","scale_amount_desc":"Juster skaleringen av bildet ved hover.","rotate_amount":"Rotasjon (°)","rotate_amount_desc":"Roter bildet ved hover.","opacity":"Gjennomsiktighet (%)","opacity_desc":"Endre gjennomsiktigheten til bildet ved hover.","blur_amount":"Uskarphet (px)","blur_amount_desc":"Bruk en uskarphet-effekt på bildet ved hover.","brightness_amount":"Lysstyrke (%)","brightness_amount_desc":"Juster lysstyrken til bildet ved hover.","glow_intensity":"Glødintensitet","glow_intensity_desc":"Velg intensiteten til glødeffekten ved hover.","glow_light":"Lett glød","glow_medium":"Medium glød","glow_heavy":"Kraftig glød","glow_custom":"Tilpasset skygge","translate_x":"Horisontal (px)","translate_x_desc":"Oversett bildet horisontalt ved hover.","translate_y":"Vertikal (px)","translate_y_desc":"Oversett bildet vertikalt ved hover."},"alt":"Bilde","no_source":"Ingen bildekilde konfigurert"},"graphs":{"chart_type":{"title":"Diagramtype","type":"Type","desc":"Velg visualiseringsstilen for dataene dine."},"types":{"line":"Linjediagram","bar":"Stolpediagram","pie":"Sektordiagram","donut":"Smultringdiagram"},"data_sources":{"title":"Datakilder","add_entity":"Add Entity","add_first_entity":"Legg til din første entitet for å lage et diagram","no_entities":"Ingen entiteter lagt til"},"entity":"Entitet","entity_desc":"Velg en entitet å plotte.","display_name_optional":"Visningsnavn (valgfritt)","use_as_card_info":"Bruk som kortinfo","attribute":"Attributt","attribute_desc":"Bruk entitetstilstand eller velg et spesifikt attributt å spore.","attribute_state_default":"Tilstand (standard)","show_points":"Vis punkter","fill_area":"Fyll område","line_style":"Linjestil","line_solid":"Hel","line_dashed":"Stiplet","line_dotted":"Prikket","pie_show_title":"Vis tittel i utsnitt","pie_show_value":"Vis verdi i utsnitt","expand_options":"Utvid alternativer","no_entities":"Ingen entiteter lagt til","add_first_entity":"Legg til din første entitet for å lage et diagram","add_entity":"Add Entity","display_options":{"title":"Visningsalternativer"},"show_title":"Vis diagramtittel","show_value":"Vis diagramverdi","chart_title":"Diagramtittel","chart_title_placeholder":"Skriv inn diagramtittel","time_period":"Tidsperiode","time_period_desc":"Hvor mye historisk data som skal vises.","period":{"1h":"Siste time","3h":"Siste 3 timer","6h":"Siste 6 timer","12h":"Siste 12 timer","24h":"Siste 24 timer","2d":"Siste 2 dager","7d":"Siste uke","30d":"Siste måned","90d":"Siste 3 måneder","365d":"Siste år"},"normalize_values":"Normaliser verdier til samme skala","normalize_desc":"Nyttig når du sammenligner entiteter med forskjellige enheter (f.eks. % vs mil)","chart_height":"Diagramhøyde","reset_345":"Tilbakestill til standard (345px)","chart_width":"Diagrambredde (%)","reset_100":"Tilbakestill til standard (100%)","agg":{"count":"Antall","delta":"Endring","first":"Første verdi","last":"Siste verdi","max":"Maksimum","mean":"Gjennomsnitt","median":"Median","min":"Minimum","sum":"Sum"},"display":{"add_slice_gap":"Legg til utsnittgap","background_color":"Bakgrunnsfarge","chart_alignment":"Diagramjustering","chart_alignment_desc":"Justering av diagrammet innenfor sin beholder.","chart_height":"Diagramhøyde","chart_options":"Diagramalternativer","chart_title":"Diagramtittel","chart_title_placeholder":"Skriv inn diagramtittel","chart_width":"Diagrambredde (%)","chart_width_desc":"Prosent av modulens tilgjengelige bredde. Justering styrer plassering.","info_position":"Infoposisjon","info_position_desc":"Posisjon til overlegget som viser navn/verdi.","legend_position":"Legendeposisjon","legend_position_desc":"Hvor legenden skal plasseres når aktivert.","normalize_desc":"Nyttig når du sammenligner entiteter med forskjellige enheter (f.eks. % vs mil)","normalize_values":"Normaliser verdier til samme skala","show_grid":"Vis rutenett","show_legend":"Vis legende","show_title":"Vis diagramtittel","show_tooltips":"Vis verktøytips","show_value":"Vis diagramverdi","smooth_lines":"Glatte linjer","time_period":"Tidsperiode","time_period_desc":"Hvor mye historisk data som skal vises.","title":"Visningsalternativer","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Fyll område","line_style":"Linjestil","line_width":"Linjebredde","show_points":"Vis punkter"},"line_styles":{"dashed":"Stiplet","dotted":"Prikket","solid":"Hel"},"pie":{"show_title":"Vis tittel i utsnitt","show_value":"Vis verdi i utsnitt"},"position":{"bottom":"Bunn","bottom_left":"Nederst til venstre","bottom_right":"Nederst til høyre","center":"Senter","hidden":"Skjult","left":"Venstre","middle":"Senter","right":"Høyre","top":"Topp","top_left":"Øverst til venstre","top_right":"Øverst til høyre"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Grunninnstillinger","desc":"Konfigurer knappens utseende og tekstinnhold."},"text":{"title":"Knapptekst","desc":"Tekst som skal vises på knappen (la stå tom for kun ikon)."},"style":{"title":"Knappstil","desc":"Visuell stil for knappen"},"alignment":{"title":"Justering","desc":"Hvordan knappen er justert innenfor sin beholder"},"styles":{"flat":"Flat (standard)","glossy":"Blank","embossed":"Preget","inset":"Innfelt","gradient_overlay":"Gradientoverlegg","neon_glow":"Neonglød","outline":"Omriss","glass":"Glass","metallic":"Metallisk"},"align":{"left":"Venstre","center":"Senter","right":"Høyre","justify":"Juster (full bredde)"},"icon":{"title":"Ikoninnstillinger","desc":"Konfigurer ikonvisning og posisjonering for knappen.","before":"Før tekst","after":"Etter tekst","enable_toggle_desc":"Aktiver bryteren over for å konfigurere ikoninnstillinger"},"colors":{"title":"Farger","background":"Bakgrunnsfarge","text":"Tekstfarge"},"hover":{"effect_type":"Effekttype","effect_type_desc":"Velg hover-effekten for denne knappen.","none":"Ingen","color":"Fargeendring","scale":"Skaler","glow":"Glød","lift":"Løft (oversett Y)","hover_color":"Hover-farge","glow_color":"Glødfarge","title":"Hover-effekter","enable_toggle_desc":"Aktiver bryteren over for å konfigurere hover-effekter"},"actions":{"type":"Handlingstype","type_desc":"Velg hva som skjer når knappen klikkes","entity":"Entitet","entity_desc":"Velg entiteten å samhandle med","navigation_path":"Navigasjonsbane","navigation_path_desc":"Bane å navigere til (f.eks. /dashboard/energy)","service":"Tjeneste","service_desc":"Tjeneste å kalle (f.eks. light.turn_on)","service_data":"Tjenestedata (JSON)","service_data_desc":"Valgfrie data å sende til tjenesten (JSON-format)"},"tap":{"title":"Trykk-handling","desc":"Handling å utføre når knappen trykkes"},"hold":{"title":"Hold-handling","desc":"Handling å utføre når knappen holdes nede"},"double":{"title":"Dobbelttrykk-handling","desc":"Handling å utføre når knappen dobbeltrykkes"},"show_icon":"Vis ikon","show_icon_desc":"Vis et ikon på knappen","icon_desc":"Ikon som skal vises (f.eks. mdi:home)","icon_position":"Ikonposisjon","icon_position_desc":"Posisjon til ikonet relativt til tekst","icon_field":"Ikon"},"info":{"entity_section":{"title":"ENTITETSKONFIGURASJON"},"entity":"Entitet","entity_desc":"Velg entiteten som skal vises","icon_section":{"title":"Ikoninnstillinger"},"show_icon":"Vis ikon","show_icon_desc":"Vis et ikon ved siden av entitetsverdien","icon":"Ikon","icon_desc":"Velg et ikon som skal vises","icon_color":"Ikonfarge","name_section":{"title":"Navneinnstillinger"},"show_name":"Vis navn","show_name_desc":"Vis entitetsnavnet over verdien","custom_name":"Tilpasset navn","custom_name_desc":"Overstyr entitetsnavnet med et tilpasset navn","name_color":"Navnefarge","state_section":{"title":"Tilstandsinnstillinger"},"show_state":"Vis tilstand","show_state_desc":"Vis entitetstilstand/verdi","show_units":"Vis enheter","show_units_desc":"Vis måleenheten (hvis tilgjengelig)","state_color":"Tilstandsfarge","template":{"title":"Malmodus","desc":"Bruk en mal for å formatere entitetsverdien. Maler lar deg bruke Home Assistants malsyntaks for kompleks formatering.","mode":"Malmodus","mode_desc":"Bruk Home Assistants malsyntaks for å formatere verdien","value":"Verdimal","value_desc":"Mal for å formatere entitetsverdien ved hjelp av Jinja2-syntaks"},"size_section":{"title":"Størrelsesinnstillinger"},"icon_size":"Ikonstørrelse","icon_size_desc":"Størrelse på ikonet i piksler","name_size":"Navnestørrelse","name_size_desc":"Størrelse på entitetsnavnteksten i piksler","value_size":"Verdistørrelse","value_size_desc":"Størrelse på entitetsverditeksten i piksler","icon_gap":"Ikonavstand","icon_gap_desc":"Avstand mellom ikon og innhold i piksler","layout_section":{"title":"Layout og posisjonering"},"icon_position":"Ikonposisjon","overall_alignment":"Overordnet justering","icon_alignment":"Ikonjustering","content_alignment":"Innholdsjustering","examples_title":"Vanlige eksempler:","example_basic":"Grunnverdi","example_units":"Med enheter","example_round":"Avrund til 1 desimal"},"camera":{"config":{"title":"Kamerakonfigurasjon","desc":"Konfigurer kameraentiteten og visningsinnstillinger."},"entity":"Kameraentitet","entity_desc":"Velg kameraentiteten som skal vises. Dette bør være en kamera- eller mjpeg-entitet fra Home Assistant.","name":"Kameranavn","name_desc":"Tilpasset navn for kameraet. La stå tom for å bruke entitetsnavn.","show_name":"Vis kameranavn","show_name_desc":"Vis kameranavnet på feeden","name_position":{"group_title":"Kameranavn posisjon","title":"Navneposisjon","desc":"Velg hvor kameranavnet vises som et overlegg på kamerabildet.","options":{"top_left":"Øverst til venstre","top_right":"Øverst til høyre","center":"Senter","bottom_left":"Nederst til venstre","bottom_right":"Nederst til høyre"}},"display":{"title":"Visningsinnstillinger"},"live_view":{"title":"Live visning","desc":"Aktiver for å vise live kamerastrøm (krever strøm-integrasjon). Når deaktivert, vises stillbildeøyeblikksbilder."},"auto_refresh":{"section_title":"Automatiske oppdateringsinnstillinger","title":"Automatisk oppdatering","desc":"Oppdater automatisk kamerabildet med jevne mellomrom"},"refresh_interval":{"title":"Oppdateringsintervall (sekunder)","desc":"Hvor ofte kamerabildet skal oppdateres automatisk."},"dimensions":{"title":"Dimensjoner"},"width":"Bredde (px)","width_desc":"Sett bredden på kameravisningen. Område: 100-1000px","height":"Høyde (px)","height_desc":"Sett høyden på kameravisningen. Område: 100-1000px","link_aspect":"Koble størrelsesforhold","unlink_aspect":"Frakoble størrelsesforhold","aspect_linked":{"title":"Størrelsesforhold koblet","desc":"Dimensjoner opprettholder {ratio}:1 forhold. Justering av en dimensjon oppdaterer automatisk den andre for å opprettholde proporsjoner."},"aspect_independent":{"title":"Uavhengige dimensjoner","desc":"Bredde og høyde kan justeres uavhengig. Klikk på koblingknappen over for å opprettholde størrelsesforhold."},"crop":{"title":"Beskjær og posisjon","desc":"Juster beskjæringen og posisjonen til kameravisningen. Nyttig for å fokusere på spesifikke områder eller fjerne uønskede kanter.","left_title":"Venstre beskjæring (%)","left_desc":"Beskjær fra venstre kant. Høyere verdier viser mindre av venstre side.","right_title":"Høyre beskjæring (%)","right_desc":"Beskjær fra høyre kant. Høyere verdier viser mindre av høyre side.","top_title":"Topp beskjæring (%)","top_desc":"Beskjær fra topp kant. Høyere verdier viser mindre av toppområdet.","bottom_title":"Bunn beskjæring (%)","bottom_desc":"Beskjær fra bunn kant. Høyere verdier viser mindre av bunnområdet.","active_applied":"Aktive beskjæringer anvendt","reset_all":"Tilbakestill alle beskjæringer"},"template":{"title":"Malmodus","desc":"Bruk en mal for å dynamisk sette kameraentiteten. Maler lar deg bruke Home Assistants malsyntaks for betinget kameravalg.","mode_label":"Malmodus","mode_desc":"Bruk Home Assistants malsyntaks for å dynamisk velge kameraentitet","camera_template_label":"Kameramal","camera_template_desc":"Mal for å dynamisk sette kameraentiteten ved hjelp av Jinja2-syntaks","examples_title":"Vanlige eksempler:","example1_desc":"Vis kamera når været er solrikt","example2_desc":"Bytt mellom kameraer basert på input boolean","example3_desc":"Bruk input select for å velge kameraentitet"},"show_name_toggle":{"enable_toggle_desc":"Aktiver bryteren over for å konfigurere kameranavn visning"}},"separator":{"config":{"title":"Separatorkonfigurasjon"},"style":{"title":"Separatorstil","desc":"Velg den visuelle stilen til separatorlinjen."},"options":{"solid":"Hel linje","double":"Dobbel linje","dotted":"Prikket linje","double_dotted":"Dobbel prikket","shadow":"Skygge","blank":"Tomt rom"},"appearance":{"title":"Utseende"},"thickness":"Tykkelse (px)","thickness_desc":"Tykkelse på separatorlinjen.","width":"Bredde (%)","width_desc":"Bredde på separatoren som prosent av beholder.","color":{"title":"Farge","desc":"Farge på separatorlinjen."},"show_title":"Vis tittel","show_title_desc":"Legg til tekst i midten av separatorlinjen (f.eks. ------ Tekst ------)","text_content":{"title":"Tekstinnhold","desc":"Tekst som skal vises i midten av separatoren."},"font_size":"Skriftstørrelse","font_size_desc":"Størrelse på teksten i piksler.","text_color":{"title":"Tekstfarge","desc":"Farge på separatorteksten."},"text_format":{"title":"Tekstformatering","desc":"Bruk formateringsstiler på separatorteksten.","bold":"Fet","italic":"Kursiv","underline":"Understreking","uppercase":"Store bokstaver","strikethrough":"Gjennomstreking"},"spacer":{"title":"Avstandshøyde"},"height":"Høyde (px)","height_desc":"Styrer det visuelle gapet for tomt rom.","show_title_toggle":{"enable_toggle_desc":"Aktiver bryteren over for å konfigurere tittelinnstillinger"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Modulnavn:","module_name_placeholder":"Gi denne modulen et tilpasset navn for å gjøre det lettere å identifisere i redigereren.","module_name_help":"Gi denne modulen et tilpasset navn for å gjøre det lettere å identifisere i redigereren."},"layout_logic":{"display_title":"Vis dette elementet","display_desc":"Kontroller når dette elementet vises. Velg \\"Alltid\\" for å holde det synlig. Velg \\"Hvis ALLE betingelser nedenfor er oppfylt\\" eller \\"Hvis NOEN betingelse nedenfor er oppfylt\\" for å vise det bare når betingelsene du legger til nedenfor evalueres som sanne.","always":"Alltid","every":"Hvis ALLE betingelser nedenfor er oppfylt","any":"Hvis NOEN betingelse nedenfor er oppfylt","conditions":"Betingelser","add_condition":"Legg til betingelse","no_conditions":"Ingen betingelser lagt til ennå. Klikk \\"Legg til betingelse\\" for å komme i gang.","condition_types":{"entity_state":"Entitetstilstand","entity_attribute":"Entitetsattributt","time":"Tidsområde","template":"Mal"},"condition_fields":{"entity":"Entitet","operator":"Operator","value":"Verdi","attribute":"Attributt","time_from":"Fra","time_to":"Til","template":"Mal"},"condition_header":"Betingelse","custom_name":"Tilpasset navn","custom_name_desc":"Valgfritt: Gi denne betingelsen et tilpasset navn for enklere identifikasjon","condition_type":"Betingelsestype"},"hover_effects":{"title":"Hover-effekter","description":"Konfigurer visuelle effekter som vises når du hover over denne modulen, raden eller kolonnen.","effect":"Hover-effekt","effect_desc":"Velg den visuelle effekten som skal brukes ved hovring","effects":{"none":"Ingen","highlight":"Uthev","outline":"Kontur","grow":"Voks","shrink":"Krympe","pulse":"Pulsere","bounce":"Sprette","float":"Flyte","glow":"Gløde","shadow":"Skygge","rotate":"Rotere","skew":"Skjevt","wobble":"Vakle","buzz":"Vibrere","fade":"Falme"}},"design":{"copy":"Kopier","paste":"Lim inn","reset_all":"Tilbakestill alt","copy_tooltip":"Kopier nåværende designinnstillinger (virker på tvers av alle Ultra Cards)","paste_tooltip_has":"Lim inn kopierte designinnstillinger (fra tverrkort-utklippstavle)","paste_tooltip_none":"Ingen designinnstillinger i tverrkort-utklippstavle","reset_all_tooltip":"Tilbakestill alle designinnstillinger til standard","text_section":"Tekst","text_color":"Tekstfarge","alignment":"Justering","inherit_alignment":"Arv (ingen justering)","font_size":"Skriftstørrelse","font_size_placeholder":"16px (standard), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Tilbakestill skriftstørrelse til standard","line_height":"Linjehøyde","line_height_placeholder":"0 (standard), 28px, 1.7","reset_line_height":"Tilbakestill linjehøyde til standard","letter_spacing":"Bokstavavstand","letter_spacing_placeholder":"auto (standard), 1px, -0.04em","reset_letter_spacing":"Tilbakestill bokstavavstand til standard","font":"Skrifttype","font_weight":"Skriftvekt","text_transform":"Teksttransformasjon","font_style":"Skriftstil","default_option":"– Standard –","weight_thin":"100 - Tynn","weight_light":"300 - Lett","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Halvfet","weight_bold":"700 - Fet","weight_black":"900 - Svart","transform_none":"Ingen","transform_uppercase":"STORE BOKSTAVER","transform_lowercase":"små bokstaver","transform_capitalize":"Stor forbokstav","style_normal":"Normal","style_italic":"Kursiv","style_oblique":"Skrå","background_section":"Bakgrunn","background_color":"Bakgrunnsfarge","background_image_type":"Bakgrunnsbilde type","bg_none":"Ingen","bg_upload":"Last opp bilde","bg_entity":"Entitetsbilde","bg_url":"Bilde-URL","sizes_section":"Størrelser","spacing_section":"Avstand","border_section":"Kant","text_shadow_section":"Tekstskygge","box_shadow_section":"Boksskygge","position_section":"Posisjon","overflow_section":"Overflyt","animations_section":"Animasjoner","width":"Bredde","height":"Høyde","max_width":"Maks bredde","max_height":"Maks høyde","min_width":"Min bredde","min_height":"Min høyde","border_radius":"Kantradius","border_style":"Kantstil","border_width":"Kantbredde","border_color":"Kantfarge","margin":"Margin","padding":"Polstring","top":"Topp","right":"Høyre","bottom":"Bunn","left":"Venstre","unlock_sides":"Lås opp for å redigere sider uavhengig","lock_sides":"Lås for å redigere alle sider sammen","horizontal_shift":"Horisontal forskyvning","vertical_shift":"Vertikal forskyvning","blur":"Uskarphet","text_shadow_color":"Tekstskygge farge","box_shadow_color":"Boksskygge farge","overflow":"Overflyt","clip_path":"Klippebane","upload_bg_image":"Last opp bakgrunnsbilde","bg_image_entity":"Bakgrunnsbilde-entitet","bg_image_url":"Bakgrunnsbilde-URL","choose_file":"Velg fil","no_file_chosen":"Ingen fil valgt","backdrop_filter":"Bakgrunnsfilter","spread":"Spredning","visible_default":"Synlig (standard)","examples":"Eksempler","state_based_animation":"Tilstandsbasert animasjon","animation_type":"Animasjonstype","animation_duration":"Animation Duration","animation_duration_desc":"Varighet for animasjonen (f.eks. 2s, 500ms, 1.5s)","intro_outro_animations":"Intro- og outro-animasjoner","intro_animation":"Intro-animasjon","outro_animation":"Outro-animasjon","duration":"Varighet","delay":"Forsinkelse","timing":"Timing","none":"Ingen","ease":"Ease","border_style_none":"Ingen","border_style_solid":"Hel","border_style_dashed":"Stiplet","border_style_dotted":"Prikket","border_style_double":"Double","position_default":"– Standard –","position_static":"Statisk","position_relative":"Relativ","position_absolute":"Absolutt","position_fixed":"Fast","position_sticky":"Klebrig","background_filter":"Background Filter"},"modules":{"text":"Tekstmodul","image":"Bildemodul","icon":"Ikonmodul","bar":"Stolpemodul","info":"Infomodul","button":"Knappmodul","separator":"Separatormodul","markdown":"Markdown-modul","camera":"Kameramodul","graphs":"Grafmodul","no_text_configured":"Ingen tekst konfigurert","no_image_configured":"Ingen bilde konfigurert","uploaded_image":"Opplastet bilde","icons_configured":"{count} ikoner konfigurert","no_icons_configured":"Ingen ikoner konfigurert","default_entity_suggestion":"Entitet: sensor.battery_level","sample_text":"Eksempeltekst","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Attributt","attribute_name":"Attributtnavn","baseline":"Grunnlinje","bottom":"Bunn","center":"Senter","entity":"Entitet","justify":"Juster","left":"Venstre","none":"Ingen","right":"Høyre","space_around":"Plass rundt","space_between":"Plass mellom","state":"Tilstand","stretch":"Strekk","top":"Topp"},"horizontal":{"alignment":{"horizontal":"Horisontal justering","horizontal_desc":"Velg hvordan elementer justeres horisontalt innenfor beholderen.","vertical":"Vertikal justering","vertical_desc":"Velg hvordan elementer justeres vertikalt innenfor beholderen."},"empty":{"add_modules":"Legg til moduler i layoutbyggeren for å se dem her","no_modules":"Ingen moduler lagt til ennå"},"gap":{"between_items":"Avstand mellom elementer","desc":"Sett avstanden mellom horisontale elementer (i rem-enheter). Bruk negative verdier for å overlappe elementer.","title":"Avstandskonfigurasjon"},"layout":{"desc":"Konfigurer hvordan elementer arrangeres horisontalt innenfor beholderen.","title":"Layoutkonfigurasjon"},"wrapping":{"desc":"Tillat elementer å bryte til neste linje når de overskrider beholderbredden.","title":"Tillat ombrytning"}},"markdown":{"code_highlighting":"Kodemarkering","code_highlighting_desc":"Syntaksmarkering for kodeblokker","content":{"desc":"Skriv inn ditt markdown-innhold med full formateringsstøtte","label":"Innhold","title":"Markdown-innhold"},"enable_html":"Aktiver HTML","enable_html_desc":"Tillat HTML-tagger i markdown-innhold","enable_tables":"Aktiver tabeller","enable_tables_desc":"Støtte for markdown-tabellsyntaks","features":{"title":"Markdown-funksjoner"}},"vertical":{"alignment":{"vertical":"Vertikal justering","vertical_desc":"Velg hvordan elementer justeres vertikalt innenfor beholderen."},"empty":{"add_modules":"Legg til moduler i layoutbyggeren for å se dem her","no_modules":"Ingen moduler lagt til ennå"},"gap":{"between_items":"Avstand mellom elementer","desc":"Sett avstanden mellom vertikale elementer (i rem-enheter). Bruk negative verdier for å overlappe elementer.","title":"Avstandskonfigurasjon"},"layout":{"desc":"Konfigurer hvordan elementer arrangeres vertikalt innenfor beholderen.","title":"Layoutkonfigurasjon"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var y=i.t(b,2);const x=JSON.parse('{"editor":{"tabs":{"layout":"Lay-outbouwer","settings":"Instellingen","about":"Over","pro":"Pro"},"settings":{"title":"Kaart instellingen","description":"Configureer globale kaart uiterlijk en gedrag."},"appearance":{"title":"Uiterlijk","description":"Beheer het visuele uiterlijk van je kaart"},"spacing":{"title":"Afstand","description":"Beheer de afstand en positionering van je kaart"},"fields":{"card_background_color":"Achtergrondkleur kaart","card_background_color_desc":"De achtergrondkleur van de hele kaart","border_radius":"Randradius","border_radius_desc":"Afgeronde hoeken van de kaart (in pixels)","card_padding":"Binnenmarge","card_padding_desc":"Interne afstand binnen de kaart","card_margin":"Buitenmarge","card_margin_desc":"Externe afstand rondom de kaart","unit_px":"px","reset_default":"Standaard herstellen","reset_default_value":"Standaard herstellen ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Volledig scherm","return_dashboard":"Terug naar dashboard","dashboard":"Dashboard"},"layout":{"live_preview":"Live voorvertoning","toggle_preview":"Voorvertoning schakelen","drag_to_move_module":"Sleep om module te verplaatsen","edit_module":"Module bewerken","duplicate_module":"Module dupliceren","delete_module":"Module verwijderen","drag_to_move_layout":"Sleep om lay-out te verplaatsen","horizontal_layout":"Horizontale lay-out","vertical_layout":"Verticale lay-out","add_module_to_layout":"Module aan lay-out toevoegen","layout_settings":"Lay-outinstellingen","duplicate_layout":"Lay-out dupliceren","delete_layout":"Lay-out verwijderen","click_to_add_module":"Klik om een module toe te voegen","drop_modules_here":"Zet modules hier neer","drag_to_reorder":"Sleep om te herordenen","edit_child_module":"Submodule bewerken","duplicate_child_module":"Submodule dupliceren","delete_child_module":"Submodule verwijderen","module_settings_title":"Module instellingen","general_tab":"Algemeen","actions_tab":"Acties","other_tab":"Overig","logic_tab":"Logica","design_tab":"Ontwerp","drag_to_resize":"Sleep om formaat te wijzigen","hidden_by_logic":"Verborgen door logica","child_module_settings_title":"Instellingen submodule","add_row":"Rij toevoegen","add_row_tooltip":"Voeg een nieuwe rij toe aan je lay-out","row_settings":"Rij-instellingen","column_settings":"Kolom-instellingen","row_background_color":"Achtergrondkleur rij","column_gap":"Kolomafstand (px)","vertical_alignment":"Verticale uitlijning","horizontal_alignment":"Horizontale uitlijning","column_preview":"Kolomvoorbeeld","modules_count":"{count} modules","alignment_top":"Boven","alignment_center":"Midden","alignment_bottom":"Onder","alignment_stretch":"Uitrekken","alignment_left":"Links","alignment_right":"Rechts","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Ontwikkeld door","desc1":"Een krachtige modulaire kaartbouwer voor Home Assistant","desc2":"Maak aangepaste lay-outs met een professionele page-builder interface","desc3":"Modulair lay-out systeem met conditionele logica en professionele ontwerptools","github_repo":"GitHub-repository","version":"Versie","join_discord":"Word lid van onze Discord","support_title":"Steun Ultra Card","support_desc":"Jouw gulle donaties stimuleren de ontwikkeling van geweldige functies voor deze kaart! Zonder steun van gebruikers zoals jij zou voortdurende innovatie niet mogelijk zijn.","leave_tip":"GEVEN (PAYPAL)"},"actions":{"title":"Actieconfiguratie","description":"Configureer hoe deze module reageert op gebruikersinteracties. Maakt gebruik van Home Assistant\'s eigen actiesysteem voor consistent gedrag in je dashboard.","tap_action":"Tik-actie","tap_action_desc":"Actie uitgevoerd bij tikken/klikken op de module","hold_action":"Vasthoud-actie","hold_action_desc":"Actie uitgevoerd bij vasthouden op de module","double_tap_action":"Dubbel-tik actie","double_tap_action_desc":"Actie uitgevoerd bij dubbel tikken op de module","tap_behavior":"Tik-gedrag","tap_behavior_desc":"Actie die wordt uitgevoerd wanneer het element wordt getikt/geklikt.","hold_behavior":"Vasthoud-gedrag","hold_behavior_desc":"Actie die wordt uitgevoerd wanneer het element wordt ingedrukt en vastgehouden.","double_tap_behavior":"Dubbel-tik gedrag","double_tap_behavior_desc":"Actie die wordt uitgevoerd wanneer het element dubbel wordt getikt/geklikt.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITEIT CONFIGURATIE","desc":"Configureer de entiteit en actieve/inactieve toestanden"},"entity":"Entiteit","entity_desc":"Selecteer de entiteit die dit icoon vertegenwoordigt","inactive_state":"Inactieve toestand","inactive_state_desc":"Toestandswaarde beschouwd als \\"inactief\\" (laat leeg om werkelijke entiteitstoestand te gebruiken)","active_state":"Actieve toestand","active_state_desc":"Toestandswaarde beschouwd als \\"actief\\" (laat leeg om werkelijke entiteitstoestand te gebruiken)","active_animation":"Actieve animatie","active_animation_desc":"Animatie wanneer icoon actief is","active_icon":"Actief icoon","active_icon_background":"Actief icoon achtergrond","active_icon_background_color":"Actief icoon achtergrondkleur","active_icon_color":"Actief icoon kleur","active_icon_desc":"Icoon om te tonen wanneer actief","active_name":"Actieve naam","active_name_color":"Actieve naam kleur","active_name_desc":"Aangepaste naam wanneer actief","active_state_color":"Actieve toestandskleur","active_state_text":"Actieve toestandstekst","animation_bounce":"Stuiter","animation_fade":"Vervagen","animation_flash":"Flits","animation_none":"Geen","animation_pulse":"Puls","animation_rotate_left":"Draai links","animation_rotate_right":"Draai rechts","animation_scale":"Schaal","animation_section":{"desc":"Configureer animaties voor actieve en inactieve toestanden","title":"Icoon animatie"},"animation_shake":"Schudden","animation_spin":"Draaien","animation_tada":"Tada","animation_vibrate":"Trillen","background_color_active":"Achtergrondkleur wanneer actief","background_color_inactive":"Achtergrondkleur wanneer inactief","background_section":{"desc":"Configureer inactieve achtergrondinstellingen","title":"Inactieve achtergrond"},"background_shape_active":"Achtergrondvorm wanneer actief","background_shape_inactive":"Achtergrondvorm wanneer inactief","custom_active_name":"Aangepaste actieve naam","custom_active_name_desc":"Overschrijf entiteitsnaam wanneer actief (laat leeg om entiteitsnaam te gebruiken)","custom_active_state":"Aangepaste actieve toestand","custom_active_state_desc":"Aangepaste tekst wanneer actief (laat leeg om werkelijke toestand te gebruiken)","custom_inactive_name":"Aangepaste inactieve naam","custom_inactive_name_desc":"Overschrijf entiteitsnaam wanneer inactief (laat leeg om entiteitsnaam te gebruiken)","custom_inactive_state":"Aangepaste inactieve toestand","custom_inactive_state_desc":"Aangepaste tekst wanneer inactief (laat leeg om werkelijke toestand te gebruiken)","icon_color_active":"Kleur wanneer actief","icon_color_inactive":"Kleur wanneer inactief","icon_section":{"title":"Icoon configuratie"},"icon_size_active":"Icoongrootte wanneer actief","icon_size_inactive":"Icoongrootte wanneer inactief","inactive_animation":"Inactieve animatie","inactive_animation_desc":"Animatie wanneer icoon inactief is","inactive_icon":"Inactief icoon","inactive_icon_background":"Inactief icoon achtergrond","inactive_icon_background_color":"Inactief icoon achtergrondkleur","inactive_icon_color":"Inactief icoon kleur","inactive_icon_config":"Inactieve icoon configuratie","inactive_icon_config_desc":"Configureer inactieve icoon instellingen","inactive_icon_desc":"Icoon om te tonen wanneer inactief","inactive_name":"Inactieve naam","inactive_name_color":"Inactieve naam kleur","inactive_name_config":"Inactieve naam configuratie","inactive_name_config_desc":"Configureer inactieve naam instellingen","inactive_name_desc":"Aangepaste naam wanneer inactief","inactive_state_color":"Inactieve toestandskleur","inactive_state_config":"Inactieve toestand configuratie","inactive_state_config_desc":"Configureer inactieve toestand instellingen","inactive_state_text":"Inactieve toestandstekst","name_color_active":"Naamkleur wanneer actief","name_color_inactive":"Naamkleur wanneer inactief","name_section":{"title":"Naam configuratie"},"name_size_active":"Naamtekstgrootte wanneer actief","name_size_inactive":"Naamtekstgrootte wanneer inactief","state_color_active":"Toestandskleur wanneer actief","state_color_inactive":"Toestandskleur wanneer inactief","state_section":{"title":"Toestand configuratie"},"state_size_active":"Toestandstekstgrootte wanneer actief","state_size_inactive":"Toestandstekstgrootte wanneer inactief","template":"Sjabloon","template_mode":"Geavanceerde sjabloonmodus","template_section":{"desc":"Gebruik Jinja2-sjablonen voor geavanceerde icoonbesturing. Sjablonen kunnen zichtbaarheid controleren (waar/onwaar om iconen te tonen/verbergen) en toestandstekst aanpassen. Retourneer aangepaste tekst voor actieve toestand, retourneer werkelijke entiteitstoestand voor inactieve toestand.","title":"Geavanceerde sjabloonmodus"}},"text":{"content_section":{"title":"Inhoud configuratie","desc":"Configureer de tekstinhoud en basisinstellingen voor deze module."},"text_content":"Tekstinhoud","text_content_desc":"Voer de tekstinhoud in om weer te geven in deze module.","icon_section":{"title":"Icoon configuratie","desc":"Kies een icoon om weer te geven naast de tekstinhoud."},"icon":"Icoon","icon_desc":"Kies een icoon om weer te geven naast de tekst. Laat leeg voor geen icoon.","icon_position":"Icoon positie","icon_position_desc":"Kies waar het icoon moet worden gepositioneerd ten opzichte van de tekst.","before_text":"Voor tekst","after_text":"Na tekst","template_mode":"Sjabloon modus","template_mode_desc":"Gebruik Home Assistant sjabloon syntaxis om tekst te renderen","value_template":"Waarde sjabloon","value_template_desc":"Sjabloon om de tekst te renderen met Jinja2-syntaxis","examples_title":"Veelvoorkomende voorbeelden:","example_basic":"Basiswaarde","example_percent":"Met procent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Balk instellingen","desc":"Configureer hoe het balkpercentage wordt berekend en weergegeven."},"perc_type":{"entity":"Entiteit (0-100)","attribute":"Entiteit attribuut","difference":"Verschil","template":"Sjabloon"},"attribute_section":{"title":"Entiteit attribuut configuratie","desc":"Configureer entiteit attribuut instellingen"},"attribute_entity":"Attribuut entiteit","attribute_entity_desc":"Selecteer de entiteit die het attribuut bevat met de percentagewaarde","attribute_name":"Attribuut naam","attribute_name_desc":"Voer de naam in van het attribuut dat de percentagewaarde bevat (bijv. \\"battery_level\\")","diff_section":{"title":"Verschil berekening configuratie","desc":"Configureer verschil berekening instellingen"},"current_entity":"Huidige waarde entiteit","current_entity_desc":"Entiteit die de huidige/gebruikte hoeveelheid vertegenwoordigt (bijv. gebruikt brandstof, verbruikte batterij)","total_entity":"Totale waarde entiteit","total_entity_desc":"Entiteit die de totale/maximale hoeveelheid vertegenwoordigt (bijv. brandstofcapaciteit, batterijcapaciteit)","template_section":{"title":"Sjabloon configuratie","desc":"Configureer sjabloon instellingen"},"percentage_template":"Percentage sjabloon","percentage_template_desc":"Voer een Jinja2-sjabloon in die een getal tussen 0-100 retourneert voor het percentage. Voorbeeld: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animeer de balkvulling met voorinstellingen zoals laadstrepen, puls, gloed en meer. Je kunt animaties activeren op basis van een entiteit\'s toestand of attribuut, en optioneel de animatie overschrijven wanneer aan een andere voorwaarde wordt voldaan.","override":{"attribute_name_desc":"Attribuut naam om te vergelijken","desc":"Selecteer een actie-entiteit en toestand om te definiëren wanneer deze animatie de reguliere animatie moet overschrijven","entity_desc":"Entiteit om te evalueren voor overschrijving trigger","match_value":"Overschrijf overeenkomstwaarde","match_value_desc":"Tekstvergelijking tegen toestand of attribuut","title":"Actie animatie overschrijving","type":"Overschrijf animatietype","type_desc":"Animatie om te gebruiken wanneer overschrijvingsvoorwaarde overeenkomt."},"title":"Balk animatie","trigger":{"attribute_name_desc":"Attribuut naam om te vergelijken (bijv. charging_status)","desc":"Selecteer een entiteit om te bekijken en definieer de waarde + animatie om toe te passen wanneer het overeenkomt.","entity_desc":"Entiteit om te evalueren voor animatie trigger","match_value":"Overeenkomstwaarde","match_value_desc":"Tekst om te vergelijken met toestand of attribuut (vergelijking is tekstgebaseerd).","title":"Animatie trigger","type":"Trigger type","type_desc":"Kies of entiteitstoestand of een attribuut moet worden vergeleken"},"type":"Animatietype","type_desc":"Selecteer hoe de balk moet animeren wanneer geactiveerd.","types":{"blinking":"Knipperend","bouncing":"Stuiterend","bubbles":"Bubbels","charging":"Opladen (diagonale lijnen)","fill":"Vullen","flicker":"Flikkeren","glow":"Gloeien","heartbeat":"Hartslag","pulse":"Puls","rainbow":"Regenboog","ripple":"Rimpeling","shimmer":"Glinsteren","traffic":"Verkeer (kapperspaal)","vibrate":"Trillen"}},"appearance":{"direction":"Vulrichting","direction_desc":"Kies de richting waarin de balk vult naarmate de waarde toeneemt.","left_to_right":"Links naar rechts","right_to_left":"Rechts naar links","alignment":"Balk uitlijning","alignment_desc":"Kies hoe de balk moet worden uitgelijnd wanneer deze minder dan 100% breed is.","border_radius":"Randradius","border_radius_desc":"Beheer de afgeronde hoeken van de balk.","height":"Balk hoogte","height_desc":"Pas de dikte van de voortgangsbalk aan in pixels.","style":"Balk stijl","style_dashed":"Dashed","style_desc":"Kies de visuele stijl van de voortgangsbalk.","style_dots":"Dots","style_embossed":"Reliëf","style_flat":"Plat (standaard)","style_glass":"Glas","style_glossy":"Glanzend","style_gradient":"Gradient overlay","style_inset":"Inzet","style_metallic":"Metalliek","style_neon":"Neon gloed","style_neumorphic":"Neumorfisch","style_outline":"Omtrek","title":"Balk uiterlijk","width":"Balk breedte","width_desc":"Stel de balkbreedte in als percentage van de container."},"attr_config":{"attribute_entity":"Attribuut entiteit","attribute_entity_desc":"Selecteer de entiteit die het attribuut bevat met de percentagewaarde","attribute_name":"Attribuut naam","attribute_name_desc":"Voer de naam in van het attribuut dat de percentagewaarde bevat (bijv. \\"battery_level\\")","desc":"Configureer entiteit attribuut instellingen","title":"Entiteit attribuut configuratie"},"colors":{"background_color":"Achtergrondkleur","bar_color":"Balkkleur","border_color":"Randkleur","left_side":"Linkerkant kleuren","limit_indicator":"Limiet indicator","percentage_text":"Percentage tekst","right_side":"Rechterkant kleuren","title":"Kleuren","title_color":"Titelkleur","value_color":"Waardekleur","text_color":"Tekstkleur","text_color_desc":"Kies de kleur voor de tekst die op de balk wordt weergegeven.","dot_color":"Puntkleur"},"minimal":{"icon_enabled":"Pictogram inschakelen","icon_enabled_desc":"Toon een pictogram op de minimale balkindicator","icon":"Pictogram","icon_desc":"Kies een pictogram om weer te geven (bijv. mdi:battery)","icon_mode":"Weergavemodus","icon_mode_desc":"Hoe het pictogram weer te geven","mode_dot_only":"Alleen punt","mode_icon_only":"Alleen pictogram","mode_icon_in_dot":"Pictogram in punt","icon_size_auto":"Pictogram automatisch schalen","icon_size_auto_desc":"Pictogram automatisch schalen met balkhoogte","icon_size":"Pictogramgrootte","icon_size_desc":"Aangepaste pictogramgrootte in pixels","use_dot_color":"Puntkleur gebruiken","use_dot_color_desc":"De puntkleur gebruiken voor het pictogram (komt overeen met verloop)","icon_color":"Pictogramkleur","icon_color_desc":"Aangepaste kleur voor het pictogram","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Huidige waarde entiteit","current_entity_desc":"Entiteit die de huidige/gebruikte hoeveelheid vertegenwoordigt (bijv. gebruikt brandstof, verbruikte batterij)","desc":"Configureer verschil berekening instellingen","title":"Verschil berekening configuratie","total_entity":"Totale waarde entiteit","total_entity_desc":"Entiteit die de totale/maximale hoeveelheid vertegenwoordigt (bijv. brandstofcapaciteit, batterijcapaciteit)"},"entity":{"desc_empty":"Selecteer een entiteit die een percentagewaarde levert (0-100). Batterijsensoren zijn ideaal voor balken.","desc_present":"De entiteit die de percentagewaarde voor de balk levert.","no_entity_warning":"Geen entiteit geselecteerd - Kies een sensor met waarden tussen 0-100","title":"Balk percentage entiteit"},"gradient":{"cropped":"Bijgesneden","desc":"Pas een kleurverloop toe op de balkvulling. Wanneer ingeschakeld, kies hoe het verloop wordt weergegeven en pas kleurstops hieronder aan.","full":"Vol","title":"Gradient modus","value_based":"Waardegebaseerd"},"labels":{"alignment":"Label uitlijning","alignment_desc":"Beheer hoe linker en rechter labels worden gepositioneerd."},"left":{"desc":"Configureer de titel en entiteitswaarde die aan de linkerkant van de balk wordt getoond. Dit is handig voor het weergeven van labels zoals \'Bereik\' of \'Batterij\' naast hun waarden.","enable_toggle":"Schakel de schakelaar hierboven in om linkerkant instellingen te configureren","template_desc":"Gebruik een sjabloon om de weergegeven waarde te formatteren. Sjablonen gebruiken Home Assistant\'s Jinja2-syntaxis.","template_mode":"Sjabloon modus","title":"Linkerkant","title_size":"Titelgrootte","value_size":"Waardegrootte","value_template":"Waarde sjabloon","value_template_desc":"Sjabloon om de linkerkantwaarde te formatteren met Jinja2-syntaxis"},"limit_entity":{"desc":"Optioneel: Voeg een verticale indicatorlijn toe op de balk (bijv. laadlimiet voor EV-batterij).","title":"Limietwaarde entiteit (optioneel)"},"percentage":{"desc":"Beheer de zichtbaarheid en het uiterlijk van percentagewaarden die direct op de balk worden getoond. Deze cijfers bieden een duidelijke visuele indicator van het huidige niveau.","text_alignment":"Percentage tekst uitlijning","text_size":"Tekstgrootte","text_size_desc":"Pas de grootte aan van de percentagetekst die op de balk wordt getoond.","title":"Percentage tekst weergave"},"right":{"desc":"Configureer de titel en entiteitswaarde die aan de rechterkant van de balk wordt getoond. Dit is ideaal voor aanvullende informatie zoals \'Tijd tot vol\' of secundaire metingen.","enable_toggle":"Schakel de schakelaar hierboven in om rechterkant instellingen te configureren","template_desc":"Gebruik een sjabloon om de weergegeven waarde te formatteren. Sjablonen gebruiken Home Assistant\'s Jinja2-syntaxis.","template_mode":"Sjabloon modus","title":"Rechterkant","title_size":"Titelgrootte","value_size":"Waardegrootte","value_template":"Waarde sjabloon","value_template_desc":"Sjabloon om de rechterkantwaarde te formatteren met Jinja2-syntaxis"},"template_config":{"desc":"Configureer sjabloon instellingen","percentage_template":"Percentage sjabloon","percentage_template_desc":"Voer een Jinja2-sjabloon in die een getal tussen 0-100 retourneert voor het percentage. Voorbeeld: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Sjabloon configuratie"},"text_display":{"title":"Tekstweergave","desc":"Beheer de zichtbaarheid en het uiterlijk van tekstwaarden die direct op de balk worden weergegeven. Voor verschil- en sjabloonmodi kun je kiezen om ruwe entiteitswaarden te tonen in plaats van percentages.","show_value":"Toon waarde in plaats van percentage","show_value_desc":"Wanneer ingeschakeld, toont het de werkelijke entiteitswaarde in plaats van percentage. Handig voor het weergeven van ruwe sensorwaarden zoals \\"45 kWh\\" in plaats van \\"75%\\".","text_size":"Tekstgrootte","text_size_desc":"Pas de grootte aan van de tekst die op de balk wordt weergegeven.","text_alignment":"Tekstuitlijning"}},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Entiteit attribuut"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Entiteit","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Entiteit attribuut configuratie"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Attribuut naam","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Randradius","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."},"alt":"Afbeelding","no_source":"No image source configured"},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources","add_entity":"Add Entity","add_first_entity":"Add your first entity to create a chart","no_entities":"No entities added"},"entity":"Entiteit","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Attribuut","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)","agg":{"count":"Count","delta":"Change","first":"First Value","last":"Last Value","max":"Maximum","mean":"Average","median":"Median","min":"Minimum","sum":"Sum"},"display":{"add_slice_gap":"Add Slice Gap","background_color":"Achtergrondkleur","chart_alignment":"Chart Alignment","chart_alignment_desc":"Alignment of the chart within its container.","chart_height":"Chart Height","chart_options":"Chart Options","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","chart_width":"Chart Width (%)","chart_width_desc":"Percentage of the module\'s available width. Alignment controls placement.","info_position":"Info Position","info_position_desc":"Position of the overlay showing name/value.","legend_position":"Legend Position","legend_position_desc":"Where to place the legend when enabled.","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","normalize_values":"Normalize values to same scale","show_grid":"Show Grid","show_legend":"Show Legend","show_title":"Show Graph Title","show_tooltips":"Show Tooltips","show_value":"Show Graph Value","smooth_lines":"Smooth Lines","time_period":"Time Period","time_period_desc":"How much historical data to show.","title":"Display Options","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Fill Area","line_style":"Line Style","line_width":"Line Width","show_points":"Show Points"},"line_styles":{"dashed":"Dashed","dotted":"Dotted","solid":"Solid"},"pie":{"show_title":"Show Title in Slice","show_value":"Show Value in Slice"},"position":{"bottom":"Onder","bottom_left":"Bottom Left","bottom_right":"Bottom Right","center":"Midden","hidden":"Hidden","left":"Links","middle":"Midden","right":"Rechts","top":"Boven","top_left":"Top Left","top_right":"Top Right"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Plat (standaard)","glossy":"Glanzend","embossed":"Reliëf","inset":"Inzet","gradient_overlay":"Gradient overlay","neon_glow":"Neon gloed","outline":"Omtrek","glass":"Glas","metallic":"Metalliek"},"align":{"left":"Links","center":"Midden","right":"Rechts","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Voor tekst","after":"Na tekst","enable_toggle_desc":"Enable the toggle above to configure icon settings"},"colors":{"title":"Kleuren","background":"Achtergrondkleur","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"Geen","color":"Color Change","scale":"Schaal","glow":"Gloeien","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Entiteit","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Tik-actie","desc":"Action to perform when button is tapped"},"hold":{"title":"Vasthoud-actie","desc":"Action to perform when button is held down"},"double":{"title":"Dubbel-tik actie","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Icoon positie","icon_position_desc":"Position of the icon relative to text","icon_field":"Icoon"},"info":{"entity_section":{"title":"ENTITEIT CONFIGURATIE"},"entity":"Entiteit","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Icoon","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Sjabloon modus","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Sjabloon modus","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Waarde sjabloon","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Waardegrootte","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Icoon positie","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Veelvoorkomende voorbeelden:","example_basic":"Basiswaarde","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Midden","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Sjabloon modus","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Sjabloon modus","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Veelvoorkomende voorbeelden:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"},"show_name_toggle":{"enable_toggle_desc":"Enable the toggle above to configure camera name display"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Uiterlijk"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Tekstinhoud","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space.","show_title_toggle":{"enable_toggle_desc":"Enable the toggle above to configure title settings"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Modulenaam:","module_name_placeholder":"Geef deze module een aangepaste naam om het makkelijker te identificeren in de editor.","module_name_help":"Geef deze module een aangepaste naam om het makkelijker te identificeren in de editor."},"layout_logic":{"display_title":"Toon dit element","display_desc":"Bepaal wanneer dit element wordt weergegeven. Kies \\"Altijd\\" om het zichtbaar te houden. Kies \\"Als ALLE onderstaande voorwaarden waar zijn\\" of \\"Als ENIGE onderstaande voorwaarde waar is\\" om het alleen te tonen als de door jou toegevoegde voorwaarden waar zijn.","always":"Altijd","every":"Als ALLE voorwaarden waar zijn","any":"Als ENIGE voorwaarde waar is","conditions":"Voorwaarden","add_condition":"Voorwaarde toevoegen","no_conditions":"Nog geen voorwaarden toegevoegd. Klik op \\"Voorwaarde toevoegen\\" om te beginnen.","condition_types":{"entity_state":"Entiteitstatus","entity_attribute":"Entiteitattribuut","time":"Tijdsinterval","template":"Sjabloon"},"condition_fields":{"entity":"Entiteit","operator":"Operator","value":"Waarde","attribute":"Attribuut","time_from":"Van","time_to":"Tot","template":"Sjabloon"},"condition_header":"Voorwaarde","custom_name":"Aangepaste naam","custom_name_desc":"Optioneel: geef deze voorwaarde een aangepaste naam voor eenvoudige herkenning","condition_type":"Voorwaardetype"},"hover_effects":{"title":"Hover-effecten","description":"Configureer visuele effecten die verschijnen bij het zweven over deze module, rij of kolom.","effect":"Hover-effect","effect_desc":"Selecteer het visuele effect dat wordt toegepast bij hoveren","effects":{"none":"Geen","highlight":"Markeren","outline":"Omtrek","grow":"Groeien","shrink":"Krimpen","pulse":"Pulseren","bounce":"Stuiteren","float":"Zweven","glow":"Gloeien","shadow":"Schaduw","rotate":"Draaien","skew":"Scheeftrekken","wobble":"Wiebelen","buzz":"Trillen","fade":"Vervagen"}},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Tekst","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"Geen","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Achtergrond","background_color":"Achtergrondkleur","background_image_type":"Background Image Type","bg_none":"Geen","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Afstand","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Breedte","height":"Hoogte","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Randradius","border_style":"Border Style","border_width":"Border Width","border_color":"Randkleur","margin":"Margin","padding":"Padding","top":"Boven","right":"Rechts","bottom":"Onder","left":"Links","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen","backdrop_filter":"Backdrop Filter","spread":"Spread","visible_default":"Visible (Default)","examples":"Examples","state_based_animation":"State-based Animation","animation_type":"Animatietype","animation_duration":"Animation Duration","animation_duration_desc":"Duration for the animation (e.g., 2s, 500ms, 1.5s)","intro_outro_animations":"Intro & Outro Animations","intro_animation":"Intro Animation","outro_animation":"Outro Animation","duration":"Duration","delay":"Delay","timing":"Timing","none":"Geen","ease":"Ease","border_style_none":"Geen","border_style_solid":"Solid","border_style_dashed":"Dashed","border_style_dotted":"Dotted","border_style_double":"Double","position_default":"– Default –","position_static":"Static","position_relative":"Relative","position_absolute":"Absolute","position_fixed":"Fixed","position_sticky":"Sticky","background_filter":"Background Filter"},"modules":{"text":"Tekst module","image":"Afbeelding module","icon":"Icoon module","bar":"Balk module","info":"Info Module","button":"Knop module","separator":"Separator Module","markdown":"Markdown Module","camera":"Camera module","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Attribuut","attribute_name":"Attribuutnaam","baseline":"Basislijn","bottom":"Onder","center":"Midden","entity":"Entiteit","justify":"Uitvullen","left":"Links","none":"Geen","right":"Rechts","space_around":"Ruimte rondom","space_between":"Ruimte tussen","state":"Status","stretch":"Uitrekken","top":"Boven"},"horizontal":{"alignment":{"horizontal":"Horizontale uitlijning","horizontal_desc":"Kies hoe elementen horizontaal worden uitgelijnd binnen de container.","vertical":"Verticale uitlijning","vertical_desc":"Kies hoe elementen verticaal worden uitgelijnd binnen de container."},"empty":{"add_modules":"Voeg modules toe in de lay-outbouwer om ze hier te zien","no_modules":"Nog geen modules toegevoegd"},"gap":{"between_items":"Ruimte tussen items","desc":"Stel de afstand in tussen horizontale elementen (in rem). Gebruik negatieve waarden om te overlappen.","title":"Afstand-configuratie"},"layout":{"desc":"Configureer hoe elementen horizontaal worden gerangschikt binnen de container.","title":"Lay-outconfiguratie"},"wrapping":{"desc":"Sta toe dat elementen worden doorgebroken naar een nieuwe regel wanneer ze de containerbreedte overschrijden.","title":"Doorlopen toestaan"}},"markdown":{"code_highlighting":"Code Highlighting","code_highlighting_desc":"Syntax highlighting for code blocks","content":{"desc":"Enter your markdown content with full formatting support","label":"Content","title":"Markdown Content"},"enable_html":"Enable HTML","enable_html_desc":"Allow HTML tags in markdown content","enable_tables":"Enable Tables","enable_tables_desc":"Support for markdown table syntax","features":{"title":"Markdown Features"}},"vertical":{"alignment":{"vertical":"Verticale uitlijning","vertical_desc":"Kies hoe elementen verticaal worden uitgelijnd binnen de container."},"empty":{"add_modules":"Voeg modules toe in de lay-outbouwer om ze hier te zien","no_modules":"Nog geen modules toegevoegd"},"gap":{"between_items":"Ruimte tussen items","desc":"Stel de afstand in tussen verticale elementen (in rem). Gebruik negatieve waarden om te overlappen.","title":"Afstand-configuratie"},"layout":{"desc":"Configureer hoe elementen verticaal worden gerangschikt binnen de container.","title":"Lay-outconfiguratie"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var k=i.t(x,2);const w=JSON.parse('{"editor":{"tabs":{"layout":"Oppsettbyggjar","settings":"Innstillingar","about":"Om","pro":"Pro"},"settings":{"title":"Kortinnstillingar","description":"Konfigurer global utsjånad og åtferd for kortet."},"appearance":{"title":"Utsjånad","description":"Kontroller den visuelle utsjånaden til kortet"},"spacing":{"title":"Avstand","description":"Kontroller avstand og plassering for kortet"},"fields":{"card_background_color":"Bakgrunnsfarge for kort","card_background_color_desc":"Bakgrunnsfargen for heile kortet","border_radius":"Kantavrunding","border_radius_desc":"Avrunda hjørne på kortet (i pikslar)","card_padding":"Innvendig marg","card_padding_desc":"Innvendig avstand i kortet","card_margin":"Utvendig marg","card_margin_desc":"Utvendig avstand rundt kortet","unit_px":"px","reset_default":"Tilbakestill til standard","reset_default_value":"Tilbakestill til standard ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Fullskjerm","return_dashboard":"Tilbake til dashbord","dashboard":"Dashbord"},"layout":{"live_preview":"Live førehandsvisning","toggle_preview":"Slå på/av førehandsvisning","drag_to_move_module":"Dra for å flytte modul","edit_module":"Rediger modul","duplicate_module":"Dupliser modul","delete_module":"Slett modul","drag_to_move_layout":"Dra for å flytte oppsettmodul","horizontal_layout":"Vassrett oppsett","vertical_layout":"Loddrett oppsett","add_module_to_layout":"Legg til modul i oppsett","layout_settings":"Oppsettinnstillingar","duplicate_layout":"Dupliser oppsett","delete_layout":"Slett oppsett","click_to_add_module":"Klikk for å leggja til ein modul","drop_modules_here":"Slepp modular her","drag_to_reorder":"Dra for å endra rekkjefølgje","edit_child_module":"Rediger barnemodul","duplicate_child_module":"Dupliser barnemodul","delete_child_module":"Slett barnemodul","module_settings_title":"Modulinnstillingar","general_tab":"Generelt","actions_tab":"Handlingar","other_tab":"Anna","logic_tab":"Logikk","design_tab":"Design","drag_to_resize":"Dra for å endre storleik","hidden_by_logic":"Gøymd av logikk","child_module_settings_title":"Innstillingar for barnemodul","add_row":"Legg til rad","add_row_tooltip":"Legg til ei ny rad i oppsettet","row_settings":"Radinnstillingar","column_settings":"Kolonneinnstillingar","row_background_color":"Bakgrunnsfarge for rad","column_gap":"Kolonnegap (px)","vertical_alignment":"Loddrett justering","horizontal_alignment":"Vassrett justering","column_preview":"Kolonneførehandsvisning","modules_count":"{count} modular","alignment_top":"Topp","alignment_center":"Senter","alignment_bottom":"Botn","alignment_stretch":"Strekk","alignment_left":"Venstre","alignment_right":"Høgre","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Utvikla av","desc1":"Ein kraftig modulær kortbyggjar for Home Assistant","desc2":"Lag eigne oppsett med eit profesjonelt side-byggjargrensesnitt","desc3":"Modulært oppsettsystem med vilkårslogikk og profesjonelle verkty for design","github_repo":"GitHub-lager","version":"Versjon","join_discord":"Bli med på Discord","support_title":"Støtt Ultra Card","support_desc":"Dine rause tips driv utviklinga av nye, flotte funksjonar for dette kortet! Utan støtte frå brukarar som deg hadde vidare innovasjon ikkje vore mogleg.","leave_tip":"GI EIN TIP (PAYPAL)"},"actions":{"title":"Konfigurasjon av handlingar","description":"Konfigurer korleis denne modulen svarar på brukarinteraksjonar. Bruker Home Assistant sitt eigne handlingssystem for jamn åtferd på dashbordet.","tap_action":"Trykkhandling","tap_action_desc":"Handling når du trykkjer/klikkar på modulen","hold_action":"Haldehandling","hold_action_desc":"Handling når du held nede på modulen","double_tap_action":"Dobbelttrykk","double_tap_action_desc":"Handling ved dobbelttrykk/klikk","tap_behavior":"Trykkåtferd","tap_behavior_desc":"Handling som skal utførast ved trykk/klikk.","hold_behavior":"Haldeåtferd","hold_behavior_desc":"Handling som skal utførast når elementet blir halde inne.","double_tap_behavior":"Dobbelttrykk-åtferd","double_tap_behavior_desc":"Handling som skal utførast ved dobbelttrykk/klikk.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"KONFIGURASJON AV ENTITET","desc":"Konfigurer entiteten og aktiv/inaktiv tilstand"},"entity":"Entitet","entity_desc":"Vel entiteten dette ikonet representerer","inactive_state":"Inaktiv tilstand","inactive_state_desc":"Tilstandsverdi som reknast som «inaktiv» (la stå tom for å bruke faktisk tilstand)","active_state":"Aktiv tilstand","active_state_desc":"Tilstandsverdi som reknast som «aktiv» (la stå tom for å bruke faktisk tilstand)","active_animation":"Aktivanimasjon","active_animation_desc":"Animasjon når ikonet er aktivt","active_icon":"Aktivt ikon","active_icon_background":"Bakgrunn for aktivt ikon","active_icon_background_color":"Bakgrunnsfarge for aktivt ikon","active_icon_color":"Farge for aktivt ikon","active_icon_desc":"Ikon som visast når aktiv","active_name":"Aktivt namn","active_name_color":"Farge på aktivt namn","active_name_desc":"Tilpassa namn når aktiv","active_state_color":"Farge på aktiv tilstand","active_state_text":"Tekst for aktiv tilstand","animation_bounce":"Sprett","animation_fade":"Falme","animation_flash":"Blink","animation_none":"Ingen","animation_pulse":"Puls","animation_rotate_left":"Roter venstre","animation_rotate_right":"Roter høgre","animation_scale":"Skaler","animation_section":{"desc":"Konfigurer animasjonar for aktive og inaktive tilstandar","title":"Ikonanimasjon"},"animation_shake":"Rist","animation_spin":"Snurr","animation_tada":"Tada","animation_vibrate":"Vibrer","background_color_active":"Bakgrunnsfarge når aktiv","background_color_inactive":"Bakgrunnsfarge når inaktiv","background_section":{"desc":"Konfigurer bakgrunn ved inaktiv tilstand","title":"Inaktiv bakgrunn"},"background_shape_active":"Bakgrunnsform når aktiv","background_shape_inactive":"Bakgrunnsform når inaktiv","custom_active_name":"Eige namn ved aktiv","custom_active_name_desc":"Overstyr entitetsnamn når aktiv (tomt for å bruke entitetsnamn)","custom_active_state":"Eiga tilstandstekst ved aktiv","custom_active_state_desc":"Tilpassa tekst når aktiv (tomt for faktisk tilstand)","custom_inactive_name":"Eige namn ved inaktiv","custom_inactive_name_desc":"Overstyr entitetsnamn når inaktiv (tomt for å bruke entitetsnamn)","custom_inactive_state":"Eiga tilstandstekst ved inaktiv","custom_inactive_state_desc":"Tilpassa tekst når inaktiv (tomt for faktisk tilstand)","icon_color_active":"Farge når aktiv","icon_color_inactive":"Farge når inaktiv","icon_section":{"title":"Ikonkonfigurasjon"},"icon_size_active":"Ikonstorleik når aktiv","icon_size_inactive":"Ikonstorleik når inaktiv","inactive_animation":"Inaktivanimasjon","inactive_animation_desc":"Animasjon når ikonet er inaktivt","inactive_icon":"Inaktivt ikon","inactive_icon_background":"Bakgrunn for inaktivt ikon","inactive_icon_background_color":"Bakgrunnsfarge for inaktivt ikon","inactive_icon_color":"Farge for inaktivt ikon","inactive_icon_config":"Konfigurasjon for inaktivt ikon","inactive_icon_config_desc":"Konfigurer innstillingar for inaktivt ikon","inactive_icon_desc":"Ikon som visast når inaktiv","inactive_name":"Inaktivt namn","inactive_name_color":"Farge på inaktivt namn","inactive_name_config":"Konfigurasjon for inaktivt namn","inactive_name_config_desc":"Konfigurer innstillingar for inaktivt namn","inactive_name_desc":"Tilpassa namn når inaktiv","inactive_state_color":"Farge på inaktiv tilstand","inactive_state_config":"Konfigurasjon for inaktiv tilstand","inactive_state_config_desc":"Konfigurer innstillingar for inaktiv tilstand","inactive_state_text":"Tekst for inaktiv tilstand","name_color_active":"Namnefarge når aktiv","name_color_inactive":"Namnefarge når inaktiv","name_section":{"title":"Namn-konfigurasjon"},"name_size_active":"Tekststorleik på namn ved aktiv","name_size_inactive":"Tekststorleik på namn ved inaktiv","state_color_active":"Tilstandsfarge når aktiv","state_color_inactive":"Tilstandsfarge når inaktiv","state_section":{"title":"Tilstandskonfigurasjon"},"state_size_active":"Tekststorleik på tilstand ved aktiv","state_size_inactive":"Tekststorleik på tilstand ved inaktiv","template":"Mal","template_mode":"Avansert malmodus","template_section":{"desc":"Bruk Jinja2-malar for avansert ikonstyring. Malar kan styre synlegheit (true/false for å vise/gøyme ikon) og tilpassa tilstandstekst. Returner tilpassa tekst for aktiv tilstand, returner faktisk entitetstilstand for inaktiv.","title":"Avansert malmodus"}},"text":{"content_section":{"title":"Innhaldskonfigurasjon","desc":"Konfigurer tekstinnhald og grunnleggjande innstillingar for denne modulen."},"text_content":"Tekstinnhald","text_content_desc":"Skriv inn teksten som skal visast i denne modulen.","icon_section":{"title":"Ikonkonfigurasjon","desc":"Vel eit ikon som skal visast saman med teksten."},"icon":"Ikon","icon_desc":"Vel eit ikon som skal visast saman med teksten. La stå tomt for ingen ikon.","icon_position":"Ikonplassering","icon_position_desc":"Vel plassering av ikon i forhold til tekst.","before_text":"Før tekst","after_text":"Etter tekst","template_mode":"Malmodus","template_mode_desc":"Bruk Home Assistant-malesyntaks til å rendre tekst","value_template":"Verdimal","value_template_desc":"Mal for å rendre tekst med Jinja2-syntaks","examples_title":"Vanlege døme:","example_basic":"Grunnleggjande verdi","example_percent":"Med prosent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Stolpeinnstillingar","desc":"Konfigurer korleis prosent vert utrekna og vist."},"perc_type":{"entity":"Entitet (0–100)","attribute":"Entitetsattributt","difference":"Differanse","template":"Mal"},"attribute_section":{"title":"Konfigurasjon av entitetsattributt","desc":"Konfigurer innstillingar for attributt"},"attribute_entity":"Attributtentitet","attribute_entity_desc":"Vel entiteten som har attributtet med prosentverdien","attribute_name":"Attributtnamn","attribute_name_desc":"Skriv namnet på attributtet som inneheld prosentverdien (t.d. «battery_level»)","diff_section":{"title":"Konfigurasjon for differanseutrekning","desc":"Konfigurer innstillingar for differanse"},"current_entity":"Entitet for noverdi","current_entity_desc":"Entitet som representerer brukt/noverande mengd (t.d. brukt drivstoff, forbrukt batteri)","total_entity":"Entitet for totalverdi","total_entity_desc":"Entitet som representerer total/maks mengd (t.d. tankvolum, batterikapasitet)","template_section":{"title":"Malkonfigurasjon","desc":"Konfigurer malinnstillingar"},"percentage_template":"Prosentmal","percentage_template_desc":"Skriv ein Jinja2-mal som returnerer eit tal mellom 0–100 for prosent. Døme: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animer stolpefyllet med forval som lading-striper, puls, glød og meir. Du kan trigge animasjonar basert på entitetstilstand eller attributt, og eventuelt overstyre animasjonen når ein annan tilstand oppstår.","override":{"attribute_name_desc":"Attributtnamn å samanlikne","desc":"Vel ei handling-entitet og tilstand når denne animasjonen skal overstyre den vanlege","entity_desc":"Entitet som skal evaluerast for overstyring","match_value":"Overstyringsverdi","match_value_desc":"Tekstsamanlikning mot tilstand eller attributt","title":"Overstyring av animasjon","type":"Type overstyring","type_desc":"Animasjon som skal brukast når vilkåret treff."},"title":"Stolpeanimasjon","trigger":{"attribute_name_desc":"Attributtnamn å samanlikne (t.d. charging_status)","desc":"Vel ei entitet å overvake og definer verdien + animasjonen som skal gjelde når det treff.","entity_desc":"Entitet som skal evaluerast for animasjonstrigger","match_value":"Samsvarsverdi","match_value_desc":"Tekst å samanlikne mot tilstand eller attributt (tekstbasert samanlikning).","title":"Trigger for animasjon","type":"Triggertype","type_desc":"Vel om du vil samanlikne entitetstilstand eller eit attributt"},"type":"Animasjonstype","type_desc":"Vel korleis stolpen skal animerast når trigga.","types":{"blinking":"Blinkande","bouncing":"Sprettande","bubbles":"Bobler","charging":"Lading (diagonale linjer)","fill":"Fyll","flicker":"Flimring","glow":"Glød","heartbeat":"Hjarteslag","pulse":"Puls","rainbow":"Regnboge","ripple":"Ringar","shimmer":"Skimring","traffic":"Barberstolpe","vibrate":"Vibrer"}},"appearance":{"direction":"Fylleretning","direction_desc":"Vel retninga stolpen fyllast i når verdien aukar.","left_to_right":"Venstre til høgre","right_to_left":"Høgre til venstre","alignment":"Stolpejustering","alignment_desc":"Vel korleis stolpen skal justerast når breidda er under 100 %.","border_radius":"Kantavrunding","border_radius_desc":"Kontroller avrunda hjørne på stolpen.","height":"Stolpehøgd","height_desc":"Juster tjukna på framdriftsstolpen i pikslar.","style":"Stolpestil","style_dashed":"Stipla","style_desc":"Vel visuell stil for framdriftsstolpen.","style_dots":"Prikkar","style_embossed":"Relieff","style_flat":"Platt (standard)","style_glass":"Glas","style_glossy":"Blank","style_gradient":"Gradient-overlegg","style_inset":"Innsøkk","style_metallic":"Metallisk","style_neon":"Neonglød","style_neumorphic":"Neomorf","style_outline":"Omriss","title":"Utsjånad for stolpe","width":"Stolpebreidd","width_desc":"Set breidda som prosent av behaldaren."},"attr_config":{"attribute_entity":"Attributtentitet","attribute_entity_desc":"Vel entiteten som har attributtet med prosentverdien","attribute_name":"Attributtnamn","attribute_name_desc":"Skriv namnet på attributtet som inneheld prosentverdien (t.d. «battery_level»)","desc":"Konfigurer innstillingar for attributt","title":"Konfigurasjon av entitetsattributt"},"colors":{"background_color":"Bakgrunnsfarge","bar_color":"Stolpefarge","border_color":"Kantfarge","left_side":"Fargar venstre side","limit_indicator":"Grenseindikator","percentage_text":"Prosenttekst","right_side":"Fargar høgre side","title":"Fargar","title_color":"Tittelfarge","value_color":"Verdifarge","text_color":"Tekstfarge","text_color_desc":"Velg fargen for teksten vist på stolpen.","dot_color":"Punktfarge"},"minimal":{"icon_enabled":"Aktiver ikon","icon_enabled_desc":"Vis eit ikon på den minimale linjeindikatoren","icon":"Ikon","icon_desc":"Vel eit ikon å vise (t.d. mdi:battery)","icon_mode":"Visingsmodus","icon_mode_desc":"Korleis ikonet skal visast","mode_dot_only":"Berre punkt","mode_icon_only":"Berre ikon","mode_icon_in_dot":"Ikon i punkt","icon_size_auto":"Skaler ikon automatisk","icon_size_auto_desc":"Skaler ikon automatisk med linjehøgde","icon_size":"Ikonstorleik","icon_size_desc":"Tilpassa ikonstorleik i pikslar","use_dot_color":"Bruk punktfarge","use_dot_color_desc":"Bruk punktfargen for ikonet (matcher gradient)","icon_color":"Ikonfarge","icon_color_desc":"Tilpassa farge for ikonet","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Entitet for noverdi","current_entity_desc":"Entitet som representerer brukt/noverande mengd (t.d. brukt drivstoff, forbrukt batteri)","desc":"Konfigurer innstillingar for differanse","title":"Konfigurasjon for differanseutrekning","total_entity":"Entitet for totalverdi","total_entity_desc":"Entitet som representerer total/maks mengd (t.d. tankvolum, batterikapasitet)"},"entity":{"desc_empty":"Vel ei entitet som gjev ein prosentverdi (0–100). Batterisensorar er ideelle.","desc_present":"Entiteten som gjev prosentverdien for stolpen.","no_entity_warning":"Ingen entitet vald – Vel ein sensor med verdiar mellom 0–100","title":"Prosententitet for stolpe"},"gradient":{"cropped":"Avklypt","desc":"Bruk fargegradient på stolpefyllet. Når aktivert, vel korleis gradienten skal visast og tilpass fargestopp nedanfor.","full":"Full","title":"Gradientmodus","value_based":"Verdi-basert"},"labels":{"alignment":"Justering av etikett","alignment_desc":"Kontroller korleis venstre og høgre etikett er plasserte."},"left":{"desc":"Konfigurer tittel og entitetsverdi på venstre side av stolpen. Nyttig for merkelappar som «Rekkevidd» eller «Batteri».","enable_toggle":"Skru på brytaren over for å konfigurere venstresida","template_desc":"Bruk ein mal for å formatere verdien. Malar brukar Jinja2-syntaksen til Home Assistant.","template_mode":"Malmodus","title":"Venstre side","title_size":"Tittelstorleik","value_size":"Verdistorleik","value_template":"Verdimal","value_template_desc":"Mal for å formatere venstresideverdi med Jinja2-syntaks"},"limit_entity":{"desc":"Valfritt: Legg til ei loddrett indikatorlinje på stolpen (t.d. ladelimit for EV-batteri).","title":"Grenseverdi-entitet (valfritt)"},"percentage":{"desc":"Kontroller synlegheit og utsjånad på prosenttal vist direkte på stolpen. Desse tala gir eit tydeleg nivåindikator.","text_alignment":"Justering av prosenttekst","text_size":"Tekststorleik","text_size_desc":"Juster storleik på prosenttekst vist på stolpen.","title":"Vising av prosenttekst"},"right":{"desc":"Konfigurer tittel og entitetsverdi på høgre side av stolpen. Ideelt for tilleggsinfo som «Tid til full» eller sekundære målingar.","enable_toggle":"Skru på brytaren over for å konfigurere høgresida","template_desc":"Bruk ein mal for å formatere verdien. Malar brukar Jinja2-syntaksen til Home Assistant.","template_mode":"Malmodus","title":"Høgre side","title_size":"Tittelstorleik","value_size":"Verdistorleik","value_template":"Verdimal","value_template_desc":"Mal for å formatere høgresideverdi med Jinja2-syntaks"},"template_config":{"desc":"Konfigurer malinnstillingar","percentage_template":"Prosentmal","percentage_template_desc":"Skriv ein Jinja2-mal som returnerer eit tal mellom 0–100 for prosent. Døme: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Malkonfigurasjon"},"text_display":{"title":"Tekstvisning","desc":"Kontroller synlegheita og utsjånaden til tekstverdiar viste direkte på stolpen. For forskjells- og malmodusar kan du velje å vise rå einingsverdi i staden for prosentar.","show_value":"Vis verdi i staden for prosent","show_value_desc":"Når aktivert, viser den faktiske einingsverdi i staden for prosent. Nyttig for å vise rå sensorverdiar som \\"45 kWh\\" i staden for \\"75%\\".","text_size":"Tekststorleik","text_size_desc":"Juster storleiken på teksten vist på stolpen.","text_alignment":"Tekstjustering"}},"image":{"settings":"Biletinnstillingar","source_type":"Kjelde for bilete","source_type_desc":"Vel korleis du vil oppgje biletkjelde.","source":{"default":"Standardbilete","url":"Bilet-URL","upload":"Last opp bilete","entity":"Entitetsbilete","attribute":"Entitetsattributt"},"url_section":{"title":"Konfigurasjon av bilet-URL"},"image_url":"Bilet-URL","image_url_desc":"Skriv direkte-URL til biletet du vil vise.","upload_section":{"title":"Konfigurasjon for opplasting"},"upload":"Last opp bilete","upload_desc":"Klikk for å laste opp ei biletfil frå eininga di.","entity_section":{"title":"Konfigurasjon av entitetsbilete"},"entity":"Entitet","entity_desc":"Vel ei entitet som har bilete (t.d. person, kamera).","attribute_section":{"title":"Konfigurasjon av entitetsattributt"},"entity_attr_desc":"Vel entiteten som inneheld bilet-URL i eitt av attributta sine.","attribute_name":"Attributtnamn","attribute_name_desc":"Skriv attributtstien som inneheld bilet-URL (prikk-notasjon støtta, t.d. vehicle_data.vehicleDetails.generalDashboard).","width":"Breidd (%)","width_desc":"Set breidda som prosent av behaldaren.","height":"Høgd (px)","height_desc":"Set høgda i pikslar.","crop_fit":"Beskjer & tilpassing","crop_fit_desc":"Kontroller korleis biletet passar i behaldaren.","fit":{"cover":"Dekk (beskjer for å fylle)","contain":"Tilpass (vis heile biletet)","fill":"Fyll (strekk for å passe)","scale_down":"Skaler ned","none":"Ingen (original storleik)"},"border_radius":"Kantavrunding","border_radius_desc":"Kontroller avrunda hjørne på biletet.","tap_actions":"Trykkhandlingar","filters":"Filter","filter":{"blur":"Sløring","blur_desc":"Legg til sløring på biletet.","brightness":"Lysstyrke (%)","brightness_desc":"Juster lysstyrka på biletet.","contrast":"Kontrast (%)","contrast_desc":"Endre kontrasten på biletet.","saturation":"Metning (%)","saturation_desc":"Juster metninga på biletet."},"hover":{"title":"Hover-effektar","effect_type":"Effekttype","effect_type_desc":"Vel type hover-effekt.","scale":"Skaler (zoom inn/ut)","rotate":"Roter","fade":"Falme (gjennomsikt)","blur":"Slør","brightness":"Lysstyrke","glow":"Glød (skugge)","slide":"Gli (translasjon)","scale_amount":"Skalering (%)","scale_amount_desc":"Juster skalering ved hover.","rotate_amount":"Rotasjon (°)","rotate_amount_desc":"Roter biletet ved hover.","opacity":"Ugjennomsikt (%)","opacity_desc":"Endre ugjennomsikt ved hover.","blur_amount":"Sløring (px)","blur_amount_desc":"Legg til sløring ved hover.","brightness_amount":"Lysstyrke (%)","brightness_amount_desc":"Juster lysstyrke ved hover.","glow_intensity":"Glødintensitet","glow_intensity_desc":"Vel intensitet for glødeeffekt.","glow_light":"Lett glød","glow_medium":"Middels glød","glow_heavy":"Kraftig glød","glow_custom":"Eigendefinert skugge","translate_x":"Vassrett (px)","translate_x_desc":"Flytt biletet vassrett ved hover.","translate_y":"Loddrett (px)","translate_y_desc":"Flytt biletet loddrett ved hover."},"alt":"Bilete","no_source":"Inga biletkjelde er konfigurert"},"graphs":{"chart_type":{"title":"Diagramtype","type":"Type","desc":"Vel visualiseringsstil for dataene dine."},"types":{"line":"Linjediagram","bar":"Stolpediagram","pie":"Sektordiagram","donut":"Smultringdiagram"},"data_sources":{"title":"Datakjelder","add_entity":"Legg til entitet","add_first_entity":"Legg til di første entitet for å lage eit diagram","no_entities":"Ingen entitetar lagt til"},"entity":"Entitet","entity_desc":"Vel ei entitet å plotte.","display_name_optional":"Visingsnamn (valfritt)","use_as_card_info":"Bruk som kortinfo","attribute":"Attributt","attribute_desc":"Bruk entitetsverdi eller vel eit spesifikt attributt å spore.","attribute_state_default":"Tilstand (standard)","show_points":"Vis punkt","fill_area":"Fyll areal","line_style":"Linjestil","line_solid":"Heiltrekt","line_dashed":"Stipla","line_dotted":"Prikka","pie_show_title":"Vis tittel i utsnitt","pie_show_value":"Vis verdi i utsnitt","expand_options":"Utvid val","no_entities":"Ingen entitetar lagt til","add_first_entity":"Legg til di første entitet for å lage eit diagram","add_entity":"Legg til entitet","display_options":{"title":"Visingsval"},"show_title":"Vis diagramtittel","show_value":"Vis diagramverdi","chart_title":"Diagramtittel","chart_title_placeholder":"Skriv diagramtittel","time_period":"Tidsperiode","time_period_desc":"Kor mykje historikk som skal visast.","period":{"1h":"Siste time","3h":"Siste 3 timar","6h":"Siste 6 timar","12h":"Siste 12 timar","24h":"Siste døgn","2d":"Siste 2 dagar","7d":"Siste veke","30d":"Siste månad","90d":"Siste 3 månader","365d":"Siste år"},"normalize_values":"Normaliser verdiar til same skala","normalize_desc":"Nyttig når du samanliknar entitetar med ulike einingar (t.d. % vs mil)","chart_height":"Diagramhøgd","reset_345":"Tilbakestill til standard (345px)","chart_width":"Diagrambreidd (%)","reset_100":"Tilbakestill til standard (100 %)","agg":{"count":"Teljing","delta":"Endring","first":"Første verdi","last":"Siste verdi","max":"Maksimum","mean":"Gjennomsnitt","median":"Median","min":"Minimum","sum":"Sum"},"display":{"add_slice_gap":"Legg til mellomrom mellom utsnitt","background_color":"Bakgrunnsfarge","chart_alignment":"Diagramjustering","chart_alignment_desc":"Justering av diagram i behaldaren.","chart_height":"Diagramhøgd","chart_options":"Diagramval","chart_title":"Diagramtittel","chart_title_placeholder":"Skriv diagramtittel","chart_width":"Diagrambreidd (%)","chart_width_desc":"Prosent av modulens tilgjengelege breidd. Justering styrer plassering.","info_position":"Posisjon for info","info_position_desc":"Plassering av overlegg med namn/verdi.","legend_position":"Posisjon for forklaring","legend_position_desc":"Kor forklaring skal plasserast når aktivert.","normalize_desc":"Nyttig når du samanliknar entitetar med ulike einingar (t.d. % vs mil)","normalize_values":"Normaliser verdiar til same skala","show_grid":"Vis rutenett","show_legend":"Vis forklaring","show_title":"Vis diagramtittel","show_tooltips":"Vis verktøytips","show_value":"Vis diagramverdi","smooth_lines":"Jamne linjer","time_period":"Tidsperiode","time_period_desc":"Kor mykje historikk som skal visast.","title":"Visingsval","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Fyll areal","line_style":"Linjestil","line_width":"Linjebreidd","show_points":"Vis punkt"},"line_styles":{"dashed":"Stipla","dotted":"Prikka","solid":"Heiltrekt"},"pie":{"show_title":"Vis tittel i utsnitt","show_value":"Vis verdi i utsnitt"},"position":{"bottom":"Botn","bottom_left":"Nedre venstre","bottom_right":"Nedre høgre","center":"Senter","hidden":"Gøymd","left":"Venstre","middle":"Senter","right":"Høgre","top":"Topp","top_left":"Øvre venstre","top_right":"Øvre høgre"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Grunninnstillingar","desc":"Konfigurer utsjånad og tekst for knappen."},"text":{"title":"Knappetekst","desc":"Tekst som skal visast på knappen (la stå tomt for berre ikon)."},"style":{"title":"Knappestil","desc":"Visuell stil for knappen"},"alignment":{"title":"Justering","desc":"Korleis knappen blir justert i behaldaren"},"styles":{"flat":"Platt (standard)","glossy":"Blank","embossed":"Relieff","inset":"Innsøkk","gradient_overlay":"Gradient-overlegg","neon_glow":"Neonglød","outline":"Omriss","glass":"Glas","metallic":"Metallisk"},"align":{"left":"Venstre","center":"Senter","right":"Høgre","justify":"Justert (full breidd)"},"icon":{"title":"Ikoninnstillingar","desc":"Konfigurer ikonvising og plassering for knappen.","before":"Før tekst","after":"Etter tekst","enable_toggle_desc":"Skru på brytaren over for å konfigurere ikoninnstillingar"},"colors":{"title":"Fargar","background":"Bakgrunnsfarge","text":"Tekstfarge"},"hover":{"effect_type":"Effekttype","effect_type_desc":"Vel hover-effekt for denne knappen.","none":"Ingen","color":"Fargeendring","scale":"Skalering","glow":"Glød","lift":"Hev (translasjon Y)","hover_color":"Farge ved hover","glow_color":"Glødfarge","title":"Hover-effektar","enable_toggle_desc":"Skru på brytaren over for å konfigurere hover-effektar"},"actions":{"type":"Handlingstype","type_desc":"Vel kva som skjer når du klikkar knappen","entity":"Entitet","entity_desc":"Vel entiteten å samhandle med","navigation_path":"Navigasjonssti","navigation_path_desc":"Sti å navigere til (t.d. /dashboard/energy)","service":"Teneste","service_desc":"Teneste å kalle (t.d. light.turn_on)","service_data":"Tenestedata (JSON)","service_data_desc":"Valfritt data som blir sendt til tenesta (JSON-format)"},"tap":{"title":"Trykkhandling","desc":"Handling ved trykk på knappen"},"hold":{"title":"Haldehandling","desc":"Handling når knappen blir halde nede"},"double":{"title":"Dobbelttrykk","desc":"Handling ved dobbelttrykk"},"show_icon":"Vis ikon","show_icon_desc":"Vis eit ikon på knappen","icon_desc":"Ikon som skal visast (t.d. mdi:home)","icon_position":"Ikonplassering","icon_position_desc":"Plassering av ikon relativt til tekst","icon_field":"Ikon"},"info":{"entity_section":{"title":"KONFIGURASJON AV ENTITET"},"entity":"Entitet","entity_desc":"Vel entiteten som skal visast","icon_section":{"title":"Ikoninnstillingar"},"show_icon":"Vis ikon","show_icon_desc":"Vis eit ikon ved sidan av entitetsverdien","icon":"Ikon","icon_desc":"Vel eit ikon som skal visast","icon_color":"Ikonfarge","name_section":{"title":"Namneinnstillingar"},"show_name":"Vis namn","show_name_desc":"Vis entitetsnamn over verdien","custom_name":"Eige namn","custom_name_desc":"Overstyr entitetsnamn med eige namn","name_color":"Namnefarge","state_section":{"title":"Tilstandsinnstillingar"},"show_state":"Vis tilstand","show_state_desc":"Vis entitetstilstand/verdi","show_units":"Vis einingar","show_units_desc":"Vis måleeining (om tilgjengeleg)","state_color":"Tilstandsfarge","template":{"title":"Malmodus","desc":"Bruk ein mal for å formatere entitetsverdien. Malar lèt deg bruke Home Assistant-malesyntaks for avansert formatering.","mode":"Malmodus","mode_desc":"Bruk Home Assistant-malesyntaks for å formatere verdien","value":"Verdimal","value_desc":"Mal for å formatere entitetsverdi med Jinja2-syntaks"},"size_section":{"title":"Storleiksinnstillingar"},"icon_size":"Ikonstorleik","icon_size_desc":"Storleik på ikon i pikslar","name_size":"Namnestorleik","name_size_desc":"Storleik på namnetekst i pikslar","value_size":"Verdistorleik","value_size_desc":"Storleik på verditekst i pikslar","icon_gap":"Ikonmellomrom","icon_gap_desc":"Avstand mellom ikon og innhald i pikslar","layout_section":{"title":"Oppsett og plassering"},"icon_position":"Ikonplassering","overall_alignment":"Overordna justering","icon_alignment":"Ikonjustering","content_alignment":"Innhaldsjustering","examples_title":"Vanlege døme:","example_basic":"Grunnleggjande verdi","example_units":"Med einingar","example_round":"Avrund til 1 desimal"},"camera":{"config":{"title":"Kamerakonfigurasjon","desc":"Konfigurer kamerentitet og visingsinnstillingar."},"entity":"Kameraentitet","entity_desc":"Vel kameraentiteten som skal visast. Dette bør vere ei camera- eller mjpeg-entitet frå Home Assistant.","name":"Kameranamn","name_desc":"Tilpassa namn for kameraet. La stå tomt for å bruke entitetsnamn.","show_name":"Vis kameranamn","show_name_desc":"Vis kameranamnet på straumen","name_position":{"group_title":"Plassering av kameranamn","title":"Namneplassering","desc":"Vel kvar kameranamnet skal visast som overlegg på biletet.","options":{"top_left":"Øvre venstre","top_right":"Øvre høgre","center":"Senter","bottom_left":"Nedre venstre","bottom_right":"Nedre høgre"}},"display":{"title":"Visingsinnstillingar"},"live_view":{"title":"Direktevising","desc":"Vis direkte kamerastream (krev stream-integrasjon). Når avslått, visast stillbilete."},"auto_refresh":{"section_title":"Innstillingar for auto-oppfrisking","title":"Auto-oppfrisking","desc":"Oppfrisk kamerabilete automatisk med jamne mellomrom"},"refresh_interval":{"title":"Oppfriskingsintervall (sekund)","desc":"Kor ofte kamerabiletet skal oppfriskast automatisk."},"dimensions":{"title":"Dimensjonar"},"width":"Breidd (px)","width_desc":"Set breidda på kameravisninga. Område: 100–1000 px","height":"Høgd (px)","height_desc":"Set høgda på kameravisninga. Område: 100–1000 px","link_aspect":"Knytt sideforhold","unlink_aspect":"Løys sideforhold","aspect_linked":{"title":"Sideforhold knytt","desc":"Dimensjonane held {ratio}:1-forhold. Å endre éin dimensjon oppdaterer den andre."},"aspect_independent":{"title":"Uavhengige dimensjonar","desc":"Breidd og høgd kan justerast uavhengig. Klikk lenkje-knappen over for å halde sideforhold."},"crop":{"title":"Beskjering og posisjon","desc":"Juster beskjeringskantar og posisjon. Nyttig for å fokusere på område eller fjerne uønska kantar.","left_title":"Venstre beskjering (%)","left_desc":"Beskjer frå venstre kant. Høgare verdi viser mindre av venstresida.","right_title":"Høgre beskjering (%)","right_desc":"Beskjer frå høgre kant. Høgare verdi viser mindre av høgresida.","top_title":"Toppbeskjering (%)","top_desc":"Beskjer frå toppen. Høgare verdi viser mindre av toppområdet.","bottom_title":"Bunnbeskjering (%)","bottom_desc":"Beskjer frå botnen. Høgare verdi viser mindre av botnområdet.","active_applied":"Aktive beskjeringar brukt","reset_all":"Tilbakestill alle beskjeringar"},"template":{"title":"Malmodus","desc":"Bruk ein mal for dynamisk å setje kameraentitet. Lèt deg bruke Home Assistant-malesyntaks for vilkårsstyrt kameraplukk.","mode_label":"Malmodus","mode_desc":"Bruk Home Assistant-malesyntaks for å velje kamera dynamisk","camera_template_label":"Kameramal","camera_template_desc":"Mal for å setje kameraentitet med Jinja2-syntaks","examples_title":"Vanlege døme:","example1_desc":"Vis kamera når vêret er sol","example2_desc":"Byt mellom kamera basert på input boolean","example3_desc":"Bruk input select for å velje kamera"},"show_name_toggle":{"enable_toggle_desc":"Skru på brytaren over for å konfigurere vising av kameranamn"}},"separator":{"config":{"title":"Konfigurasjon av skiljelinje"},"style":{"title":"Stil på skiljelinje","desc":"Vel visuell stil for skiljelinja."},"options":{"solid":"Heiltrekt linje","double":"Dobbel linje","dotted":"Prikka linje","double_dotted":"Dobbel prikka","shadow":"Skugge","blank":"Tomt mellomrom"},"appearance":{"title":"Utsjånad"},"thickness":"Tjukkleik (px)","thickness_desc":"Tjukkleik på skiljelinja.","width":"Breidd (%)","width_desc":"Breidd som prosent av behaldaren.","color":{"title":"Farge","desc":"Farge på skiljelinja."},"show_title":"Vis tittel","show_title_desc":"Legg tekst i midten av skiljelinja (t.d. ------ Tekst ------)","text_content":{"title":"Tekstinnhald","desc":"Tekst som skal visast i midten av skiljelinja."},"font_size":"Skriftstorleik","font_size_desc":"Storleik på tekst i pikslar.","text_color":{"title":"Tekstfarge","desc":"Farge på tekst i skiljelinja."},"text_format":{"title":"Tekstformatering","desc":"Bruk formateringsstil på tekst.","bold":"Feit","italic":"Kursiv","underline":"Understreking","uppercase":"Store bokstavar","strikethrough":"Gjennomstreking"},"spacer":{"title":"Avstandshøgd"},"height":"Høgd (px)","height_desc":"Styrer synleg gap for ‘Blankt mellomrom’.","show_title_toggle":{"enable_toggle_desc":"Skru på brytaren over for å konfigurere tittelen"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Modulnamn:","module_name_placeholder":"Gje denne modulen eit tilpassa namn for lettare å identifisere han i redigeraren.","module_name_help":"Gje denne modulen eit tilpassa namn for lettare å identifisere han i redigeraren."},"layout_logic":{"display_title":"Vis dette elementet","display_desc":"Kontroller når dette elementet skal visast. Vel «Alltid» for å halde det synleg. Vel «Viss ALLE vilkår under er oppfylte» eller «Viss NOKRE vilkår under er oppfylte» for å vise det berre når vilkåra du legg til nedanfor er sanne.","always":"Alltid","every":"Viss ALLE vilkår under er oppfylte","any":"Viss NOKRE vilkår under er oppfylte","conditions":"Vilkår","add_condition":"Legg til vilkår","no_conditions":"Ingen vilkår lagt til enno. Klikk «Legg til vilkår» for å starte.","condition_types":{"entity_state":"Entitetstilstand","entity_attribute":"Entitetsattributt","time":"Tidsintervall","template":"Mal"},"condition_fields":{"entity":"Entitet","operator":"Operator","value":"Verdi","attribute":"Attributt","time_from":"Frå","time_to":"Til","template":"Mal"},"condition_header":"Vilkår","custom_name":"Tilpassa namn","custom_name_desc":"Valfritt: Gje vilkåret eit tilpassa namn for enklare identifikasjon","condition_type":"Vilkårstype"},"hover_effects":{"title":"Hover-effektar","description":"Konfigurer visuelle effektar som visast når du held musepeikaren over modulen, rada eller kolonnen.","effect":"Hover-effekt","effect_desc":"Vel visuell effekt som skal brukast ved hover","effects":{"none":"Ingen","highlight":"Uthev","outline":"Kontur","grow":"Veks","shrink":"Krymp","pulse":"Pulsere","bounce":"Sprette","float":"Flyte","glow":"Gløde","shadow":"Skugge","rotate":"Roter","skew":"Skev","wobble":"Vakle","buzz":"Vibrere","fade":"Falme"}},"design":{"copy":"Kopier","paste":"Lim inn","reset_all":"Tilbakestill alt","copy_tooltip":"Kopier noverande designinnstillingar (fungerer på tvers av Ultra-kort)","paste_tooltip_has":"Lim inn kopierte designinnstillingar (frå tverrkort-utklippstavle)","paste_tooltip_none":"Ingen designinnstillingar i tverrkort-utklippstavla","reset_all_tooltip":"Tilbakestill alle designinnstillingar til standard","text_section":"Tekst","text_color":"Tekstfarge","alignment":"Justering","inherit_alignment":"Arv (inga justering)","font_size":"Skriftstorleik","font_size_placeholder":"16px (standard), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Tilbakestill skriftstorleik til standard","line_height":"Linjehøgd","line_height_placeholder":"0 (standard), 28px, 1.7","reset_line_height":"Tilbakestill linjehøgd til standard","letter_spacing":"Bokstavmellomrom","letter_spacing_placeholder":"auto (standard), 1px, -0.04em","reset_letter_spacing":"Tilbakestill bokstavmellomrom til standard","font":"Skrifttype","font_weight":"Skriftvekt","text_transform":"Teksttransformasjon","font_style":"Skriftstil","default_option":"– Standard –","weight_thin":"100 – Tynn","weight_light":"300 – Lett","weight_normal":"400 – Normal","weight_medium":"500 – Middels","weight_semi_bold":"600 – Halvfeit","weight_bold":"700 – Feit","weight_black":"900 – Svart","transform_none":"Ingen","transform_uppercase":"STORE BOKSTAVAR","transform_lowercase":"små bokstavar","transform_capitalize":"Stor forbokstav","style_normal":"Normal","style_italic":"Kursiv","style_oblique":"Skråstilt","background_section":"Bakgrunn","background_color":"Bakgrunnsfarge","background_image_type":"Type bakgrunnsbilete","bg_none":"Ingen","bg_upload":"Last opp bilete","bg_entity":"Entitetsbilete","bg_url":"Bilet-URL","sizes_section":"Storleikar","spacing_section":"Avstand","border_section":"Kantlinje","text_shadow_section":"Tekstskugge","box_shadow_section":"Boksskugge","position_section":"Posisjon","overflow_section":"Overflyt","animations_section":"Animasjonar","width":"Breidde","height":"Høgde","max_width":"Maks breidde","max_height":"Maks høgde","min_width":"Minste breidde","min_height":"Minste høgde","border_radius":"Kantavrunding","border_style":"Kantstil","border_width":"Kantbreidd","border_color":"Kantfarge","margin":"Marg","padding":"Innvendig marg","top":"Topp","right":"Høgre","bottom":"Botn","left":"Venstre","unlock_sides":"Lås opp for å redigere sider uavhengig","lock_sides":"Lås for å redigere alle sider samla","horizontal_shift":"Vassrett forskyving","vertical_shift":"Loddrett forskyving","blur":"Sløring","text_shadow_color":"Farge på tekstskugge","box_shadow_color":"Farge på boksskugge","overflow":"Overflyt","clip_path":"Klippesti","upload_bg_image":"Last opp bakgrunnsbilete","bg_image_entity":"Bakgrunnsbilete-entitet","bg_image_url":"URL til bakgrunnsbilete","choose_file":"Vel fil","no_file_chosen":"Ingen fil vald","backdrop_filter":"Bakgrunnsfilter","spread":"Spreiing","visible_default":"Synleg (standard)","examples":"Døme","state_based_animation":"Tilstandsbasert animasjon","animation_type":"Animasjonstype","animation_duration":"Animasjonsvarigheit","animation_duration_desc":"Varigheit for animasjonen (t.d. 2s, 500ms, 1.5s)","intro_outro_animations":"Intro- og outroanimasjonar","intro_animation":"Introanimasjon","outro_animation":"Outroanimasjon","duration":"Varigheit","delay":"Forsinking","timing":"Timing","none":"Ingen","ease":"Jamning","border_style_none":"Ingen","border_style_solid":"Heiltrekt","border_style_dashed":"Stipla","border_style_dotted":"Prikka","border_style_double":"Dobbel","position_default":"– Standard –","position_static":"Statisk","position_relative":"Relativ","position_absolute":"Absolutt","position_fixed":"Festa","position_sticky":"Klebrig","background_filter":"Background Filter"},"modules":{"text":"Tekstmodul","image":"Bildemodul","icon":"Ikonmodul","bar":"Stolpemodul","info":"Infomodul","button":"Knappmodul","separator":"Skiljelinje-modul","markdown":"Markdown-modul","camera":"Kameramodul","graphs":"Diagrammodul","no_text_configured":"Ingen tekst konfigurert","no_image_configured":"Inga bilete konfigurert","uploaded_image":"Opplasta bilete","icons_configured":"{count} ikon konfigurert","no_icons_configured":"Ingen ikon konfigurert","default_entity_suggestion":"Entitet: sensor.battery_level","sample_text":"Eksempeltekst","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Attributt","attribute_name":"Attributtnamn","baseline":"Grunnlinje","bottom":"Botn","center":"Senter","entity":"Entitet","justify":"Juster","left":"Venstre","none":"Ingen","right":"Høgre","space_around":"Luft rundt","space_between":"Luft mellom","state":"Tilstand","stretch":"Strekk","top":"Topp"},"horizontal":{"alignment":{"horizontal":"Vassrett justering","horizontal_desc":"Vel korleis element blir justerte vassrett i behaldaren.","vertical":"Loddrett justering","vertical_desc":"Vel korleis element blir justerte loddrett i behaldaren."},"empty":{"add_modules":"Legg til modular i oppsettbyggjaren for å sjå dei her","no_modules":"Ingen modular lagt til enno"},"gap":{"between_items":"Mellomrom mellom element","desc":"Set avstand mellom vassrette element (i rem). Bruk negative verdiar for overlapping.","title":"Konfigurasjon av mellomrom"},"layout":{"desc":"Konfigurer korleis element er ordna vassrett i behaldaren.","title":"Oppsettkonfigurasjon"},"wrapping":{"desc":"Tillat at element bryt til neste linje når breidda vert overskriden.","title":"Tillat linjebryting"}},"markdown":{"code_highlighting":"Syntaksmarkering","code_highlighting_desc":"Syntaksmarkering for kodeblokker","content":{"desc":"Skriv markdown-innhald med full formateringsstøtte","label":"Innhald","title":"Markdown-innhald"},"enable_html":"Tillat HTML","enable_html_desc":"Tillat HTML-taggar i markdown-innhald","enable_tables":"Aktiver tabellar","enable_tables_desc":"Støtte for tabellsyntaks i markdown","features":{"title":"Markdown-funksjonar"}},"vertical":{"alignment":{"vertical":"Loddrett justering","vertical_desc":"Vel korleis element blir justerte loddrett i behaldaren."},"empty":{"add_modules":"Legg til modular i oppsettbyggjaren for å sjå dei her","no_modules":"Ingen modular lagt til enno"},"gap":{"between_items":"Mellomrom mellom element","desc":"Set avstand mellom loddrette element (i rem). Bruk negative verdiar for overlapping.","title":"Konfigurasjon av mellomrom"},"layout":{"desc":"Konfigurer korleis element er ordna loddrett i behaldaren.","title":"Oppsettkonfigurasjon"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var S=i.t(w,2);const O=JSON.parse('{"editor":{"tabs":{"layout":"Layoutbygger","settings":"Innstillinger","about":"Om","pro":"Pro"},"settings":{"title":"Kortinnstillinger","description":"Konfigurer global kortutseende og oppførsel."},"appearance":{"title":"Utseende","description":"Kontroller det visuelle utseendet til kortet ditt"},"spacing":{"title":"Avstand","description":"Kontroller avstanden og posisjoneringen til kortet ditt"},"fields":{"card_background_color":"Kort bakgrunnsfarge","card_background_color_desc":"Bakgrunnsfargen til hele kortet","border_radius":"Kantradius","border_radius_desc":"Avrundede hjørner for kortet (i piksler)","card_padding":"Kort polstring","card_padding_desc":"Intern avstand innenfor kortet","card_margin":"Kort marg","card_margin_desc":"Ekstern avstand rundt kortet","unit_px":"px","reset_default":"Tilbakestill til standard","reset_default_value":"Tilbakestill til standard ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Gå til fullskjerm","return_dashboard":"Tilbake til dashbord","dashboard":"Dashbord"},"layout":{"live_preview":"Live forhåndsvisning","toggle_preview":"Veksle forhåndsvisning","drag_to_move_module":"Dra for å flytte modul","edit_module":"Rediger modul","duplicate_module":"Dupliser modul","delete_module":"Slett modul","drag_to_move_layout":"Dra for å flytte layoutmodul","horizontal_layout":"Horisontal layout","vertical_layout":"Vertikal layout","add_module_to_layout":"Legg til modul i layout","layout_settings":"Layoutinnstillinger","duplicate_layout":"Dupliser layout","delete_layout":"Slett layout","click_to_add_module":"Klikk for å legge til en modul","drop_modules_here":"Slipp moduler her","drag_to_reorder":"Dra for å endre rekkefølge","edit_child_module":"Rediger undermodul","duplicate_child_module":"Dupliser undermodul","delete_child_module":"Slett undermodul","module_settings_title":"Modulinnstillinger","general_tab":"Generelt","actions_tab":"Handlinger","other_tab":"Annet","logic_tab":"Logikk","design_tab":"Design","drag_to_resize":"Dra for å endre størrelse","hidden_by_logic":"Skjult av logikk","child_module_settings_title":"Undermodulinnstillinger","add_row":"Legg til rad","add_row_tooltip":"Legg til en ny rad til layoutet ditt","row_settings":"Radinnstillinger","column_settings":"Kolonneinnstillinger","row_background_color":"Rad bakgrunnsfarge","column_gap":"Kolonneavstand (px)","vertical_alignment":"Vertikal justering","horizontal_alignment":"Horisontal justering","column_preview":"Kolonneforhåndsvisning","modules_count":"{count} moduler","alignment_top":"Topp","alignment_center":"Senter","alignment_bottom":"Bunn","alignment_stretch":"Strekk","alignment_left":"Venstre","alignment_right":"Høyre","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Utviklet av","desc1":"En kraftig modulær kortbygger for Home Assistant","desc2":"Lag tilpassede layouter med et profesjonelt sidebygger-grensesnitt","desc3":"Modulært layoutsystem med betinget logikk og profesjonelle designverktøy","github_repo":"GitHub-repositorium","version":"Versjon","join_discord":"Bli med på vår Discord","support_title":"Støtt Ultra Card","support_desc":"Dine sjenerøse tips driver utviklingen av fantastiske funksjoner for dette kortet! Uten støtte fra brukere som deg, ville fortsatt innovasjon ikke vært mulig.","leave_tip":"GI ET TIPS (PAYPAL)"},"actions":{"title":"Handlingskonfigurasjon","description":"Konfigurer hvordan denne modulen reagerer på brukerinteraksjoner. Bruker Home Assistants innebygde handlingssystem for konsistent oppførsel på dashbordet ditt.","tap_action":"Trykk-handling","tap_action_desc":"Handling utført ved å trykke/klikke på modulen","hold_action":"Hold-handling","hold_action_desc":"Handling utført ved å holde nede på modulen","double_tap_action":"Dobbelttrykk-handling","double_tap_action_desc":"Handling utført ved dobbelttrykking på modulen","tap_behavior":"Trykk-oppførsel","tap_behavior_desc":"Handling å utføre når elementet trykkes/klikkes.","hold_behavior":"Hold-oppførsel","hold_behavior_desc":"Handling å utføre når elementet trykkes og holdes.","double_tap_behavior":"Dobbelttrykk-oppførsel","double_tap_behavior_desc":"Handling å utføre når elementet dobbeltrykkes/klikkes.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITETSKONFIGURASJON","desc":"Konfigurer entiteten og aktive/inaktive tilstander"},"entity":"Entitet","entity_desc":"Velg entiteten dette ikonet representerer","inactive_state":"Inaktiv tilstand","inactive_state_desc":"Tilstandsverdi ansett som \\"inaktiv\\" (la stå tom for å bruke faktisk entitetstilstand)","active_state":"Aktiv tilstand","active_state_desc":"Tilstandsverdi ansett som \\"aktiv\\" (la stå tom for å bruke faktisk entitetstilstand)","active_animation":"Aktiv animasjon","active_animation_desc":"Animasjon når ikon er aktiv","active_icon":"Aktivt ikon","active_icon_background":"Aktivt ikon bakgrunn","active_icon_background_color":"Aktivt ikon bakgrunnsfarge","active_icon_color":"Aktivt ikon farge","active_icon_desc":"Ikon å vise når aktiv","active_name":"Aktivt navn","active_name_color":"Aktivt navn farge","active_name_desc":"Tilpasset navn når aktiv","active_state_color":"Aktiv tilstandsfarge","active_state_text":"Aktiv tilstandstekst","animation_bounce":"Hopp","animation_fade":"Fade","animation_flash":"Blink","animation_none":"Ingen","animation_pulse":"Puls","animation_rotate_left":"Roter venstre","animation_rotate_right":"Roter høyre","animation_scale":"Skaler","animation_section":{"desc":"Konfigurer animasjoner for aktive og inaktive tilstander","title":"Ikonanimasjon"},"animation_shake":"Rist","animation_spin":"Snurr","animation_tada":"Tada","animation_vibrate":"Vibrer","background_color_active":"Bakgrunnsfarge når aktiv","background_color_inactive":"Bakgrunnsfarge når inaktiv","background_section":{"desc":"Konfigurer inaktive bakgrunnsinnstillinger","title":"Inaktiv bakgrunn"},"background_shape_active":"Bakgrunnsform når aktiv","background_shape_inactive":"Bakgrunnsform når inaktiv","custom_active_name":"Tilpasset aktivt navn","custom_active_name_desc":"Overstyr entitetsnavn når aktiv (la stå tom for å bruke entitetsnavn)","custom_active_state":"Tilpasset aktiv tilstand","custom_active_state_desc":"Tilpasset tekst når aktiv (la stå tom for å bruke faktisk tilstand)","custom_inactive_name":"Tilpasset inaktivt navn","custom_inactive_name_desc":"Overstyr entitetsnavn når inaktiv (la stå tom for å bruke entitetsnavn)","custom_inactive_state":"Tilpasset inaktiv tilstand","custom_inactive_state_desc":"Tilpasset tekst når inaktiv (la stå tom for å bruke faktisk tilstand)","icon_color_active":"Farge når aktiv","icon_color_inactive":"Farge når inaktiv","icon_section":{"title":"Ikonkonfigurasjon"},"icon_size_active":"Ikonstørrelse når aktiv","icon_size_inactive":"Ikonstørrelse når inaktiv","inactive_animation":"Inaktiv animasjon","inactive_animation_desc":"Animasjon når ikon er inaktiv","inactive_icon":"Inaktivt ikon","inactive_icon_background":"Inaktivt ikon bakgrunn","inactive_icon_background_color":"Inaktivt ikon bakgrunnsfarge","inactive_icon_color":"Inaktivt ikon farge","inactive_icon_config":"Konfigurasjon av inaktivt ikon","inactive_icon_config_desc":"Konfigurer innstillinger for inaktivt ikon","inactive_icon_desc":"Ikon å vise når inaktiv","inactive_name":"Inaktivt navn","inactive_name_color":"Inaktivt navn farge","inactive_name_config":"Konfigurasjon av inaktivt navn","inactive_name_config_desc":"Konfigurer innstillinger for inaktivt navn","inactive_name_desc":"Tilpasset navn når inaktiv","inactive_state_color":"Inaktiv tilstandsfarge","inactive_state_config":"Konfigurasjon av inaktiv tilstand","inactive_state_config_desc":"Konfigurer innstillinger for inaktiv tilstand","inactive_state_text":"Inaktiv tilstandstekst","name_color_active":"Navnefarge når aktiv","name_color_inactive":"Navnefarge når inaktiv","name_section":{"title":"Navnekonfigurasjon"},"name_size_active":"Navnetekststørrelse når aktiv","name_size_inactive":"Navnetekststørrelse når inaktiv","state_color_active":"Tilstandsfarge når aktiv","state_color_inactive":"Tilstandsfarge når inaktiv","state_section":{"title":"Tilstandskonfigurasjon"},"state_size_active":"Tilstandstekststørrelse når aktiv","state_size_inactive":"Tilstandstekststørrelse når inaktiv","template":"Mal","template_mode":"Avansert malmodus","template_section":{"desc":"Bruk Jinja2-maler for avansert ikonkontroll. Maler kan kontrollere synlighet (sant/usant for å vise/skjule ikoner) og tilpasse tilstandstekst. Returner tilpasset tekst for aktiv tilstand, returner faktisk entitetstilstand for inaktiv tilstand.","title":"Avansert malmodus"}},"text":{"content_section":{"title":"Innholdskonfigurasjon","desc":"Konfigurer tekstinnholdet og grunnleggende innstillinger for denne modulen."},"text_content":"Tekstinnhold","text_content_desc":"Skriv inn tekstinnholdet som skal vises i denne modulen.","icon_section":{"title":"Ikonkonfigurasjon","desc":"Velg et ikon som skal vises sammen med tekstinnholdet."},"icon":"Ikon","icon_desc":"Velg et ikon som skal vises sammen med teksten. La stå tom for ingen ikon.","icon_position":"Ikonposisjon","icon_position_desc":"Velg hvor ikonet skal plasseres i forhold til teksten.","before_text":"Før tekst","after_text":"Etter tekst","template_mode":"Malmodus","template_mode_desc":"Bruk Home Assistant-malsyntaks for å gjengi tekst","value_template":"Verdimal","value_template_desc":"Mal for å gjengi teksten ved hjelp av Jinja2-syntaks","examples_title":"Vanlige eksempler:","example_basic":"Grunnverdi","example_percent":"Med prosent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Stolpeinnstillinger","desc":"Konfigurer hvordan stolpeprosenten beregnes og vises."},"perc_type":{"entity":"Entitet (0-100)","attribute":"Entitetsattributt","difference":"Forskjell","template":"Mal"},"attribute_section":{"title":"Konfigurasjon av entitetsattributt","desc":"Konfigurer entitetsattributtinnstillinger"},"attribute_entity":"Attributtentitet","attribute_entity_desc":"Velg entiteten som inneholder attributtet med prosentverdien","attribute_name":"Attributtnavn","attribute_name_desc":"Skriv inn navnet på attributtet som inneholder prosentverdien (f.eks. \\"battery_level\\")","diff_section":{"title":"Konfigurasjon av forskjellsberegning","desc":"Konfigurer innstillinger for forskjellsberegning"},"current_entity":"Nåværende verdi-entitet","current_entity_desc":"Entitet som representerer nåværende/brukt mengde (f.eks. brukt drivstoff, forbrukt batteri)","total_entity":"Total verdi-entitet","total_entity_desc":"Entitet som representerer total/maksimal mengde (f.eks. drivstoffkapasitet, batterikapasitet)","template_section":{"title":"Malkonfigurasjon","desc":"Konfigurer malinnstillinger"},"percentage_template":"Prosentmal","percentage_template_desc":"Skriv inn en Jinja2-mal som returnerer et tall mellom 0-100 for prosenten. Eksempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animer stolpefyllet ved hjelp av forhåndsinnstillinger som ladestiper, puls, glød og mer. Du kan utløse animasjoner basert på en entitets tilstand eller attributt, og eventuelt overstyre animasjonen når en annen betingelse er oppfylt.","override":{"attribute_name_desc":"Attributtnavn å sammenligne","desc":"Velg en handlingsentitet og tilstand for å definere når denne animasjonen skal overstyre den vanlige animasjonen","entity_desc":"Entitet å evaluere for overstyring av utløser","match_value":"Overstyr samsvarverdi","match_value_desc":"Tekstsammenligning mot tilstand eller attributt","title":"Overstyring av handlingsanimasjon","type":"Overstyr animasjonstype","type_desc":"Animasjon å bruke når overstyringsbetingelsen samsvarer."},"title":"Stolpeanimasjon","trigger":{"attribute_name_desc":"Attributtnavn å sammenligne (f.eks. charging_status)","desc":"Velg en entitet å overvåke og definer verdien + animasjonen å bruke når den samsvarer.","entity_desc":"Entitet å evaluere for animasjonsutløser","match_value":"Samsvarverdi","match_value_desc":"Tekst å sammenligne mot tilstand eller attributt (sammenligning er tekstbasert).","title":"Animasjonsutløser","type":"Utløsertype","type_desc":"Velg om du vil sammenligne entitetstilstand eller et attributt"},"type":"Animasjonstype","type_desc":"Velg hvordan stolpen skal animeres når utløst.","types":{"blinking":"Blinkende","bouncing":"Hoppende","bubbles":"Bobler","charging":"Lading (diagonale linjer)","fill":"Fyll","flicker":"Flimmer","glow":"Glød","heartbeat":"Hjerteslag","pulse":"Puls","rainbow":"Regnbue","ripple":"Krusning","shimmer":"Skimmer","traffic":"Trafikk (barberstang)","vibrate":"Vibrer"}},"appearance":{"alignment":"Stolpejustering","alignment_desc":"Velg hvordan stolpen skal justeres når den er mindre enn 100% bredde.","border_radius":"Kantradius","border_radius_desc":"Kontroller de avrundede hjørnene til stolpen.","height":"Stolpehøyde","height_desc":"Juster tykkelsen til fremdriftsstolpen i piksler.","style":"Stolpestil","style_dashed":"Stiplet","style_desc":"Velg den visuelle stilen til fremdriftsstolpen.","style_dots":"Dots","style_embossed":"Preget","style_flat":"Flat (standard)","style_glass":"Glass","style_glossy":"Blank","style_gradient":"Gradientoverlegg","style_inset":"Innfelt","style_metallic":"Metallisk","style_neon":"Neonglød","style_neumorphic":"Neumorfisk","style_outline":"Omriss","title":"Stolpeutseende","direction":"Fylleretning","direction_desc":"Velg retningen stolpen fyller seg i når verdien øker.","left_to_right":"Venstre til høyre","right_to_left":"Høyre til venstre","width":"Stolpebredde","width_desc":"Sett stolpebredden som prosent av beholder."},"attr_config":{"attribute_entity":"Attributtentitet","attribute_entity_desc":"Velg entiteten som inneholder attributtet med prosentverdien","attribute_name":"Attributtnavn","attribute_name_desc":"Skriv inn navnet på attributtet som inneholder prosentverdien (f.eks. \\"battery_level\\")","desc":"Konfigurer entitetsattributtinnstillinger","title":"Konfigurasjon av entitetsattributt"},"colors":{"background_color":"Bakgrunnsfarge","bar_color":"Stolpefarge","border_color":"Kantfarge","left_side":"Venstre side farger","limit_indicator":"Grenseindikator","percentage_text":"Prosenttekst","right_side":"Høyre side farger","title":"Farger","title_color":"Tittelfarge","value_color":"Verdifarge","text_color":"Tekstfarge","text_color_desc":"Velg fargen for teksten vist på stolpen.","dot_color":"Punktfarge"},"minimal":{"icon_enabled":"Aktiver ikon","icon_enabled_desc":"Vis et ikon på den minimale linjeindikatoren","icon":"Ikon","icon_desc":"Velg et ikon å vise (f.eks. mdi:battery)","icon_mode":"Visningsmodus","icon_mode_desc":"Hvordan ikonet skal vises","mode_dot_only":"Kun punkt","mode_icon_only":"Kun ikon","mode_icon_in_dot":"Ikon i punkt","icon_size_auto":"Skaler ikon automatisk","icon_size_auto_desc":"Skaler ikon automatisk med linjehøyde","icon_size":"Ikonstørrelse","icon_size_desc":"Tilpasset ikonstørrelse i piksler","use_dot_color":"Bruk punktfarge","use_dot_color_desc":"Bruk punktfargen for ikonet (matcher gradient)","icon_color":"Ikonfarge","icon_color_desc":"Tilpasset farge for ikonet","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Nåværende verdi-entitet","current_entity_desc":"Entitet som representerer nåværende/brukt mengde (f.eks. brukt drivstoff, forbrukt batteri)","desc":"Konfigurer innstillinger for forskjellsberegning","title":"Konfigurasjon av forskjellsberegning","total_entity":"Total verdi-entitet","total_entity_desc":"Entitet som representerer total/maksimal mengde (f.eks. drivstoffkapasitet, batterikapasitet)"},"entity":{"desc_empty":"Velg en entitet som gir en prosentverdi (0-100). Batterisensorer er ideelle for stolper.","desc_present":"Entiteten som gir prosentverdien for stolpen.","no_entity_warning":"Ingen entitet valgt - Velg en sensor med verdier mellom 0-100","title":"Stolpe prosent-entitet"},"gradient":{"cropped":"Beskåret","desc":"Bruk en fargegradient på stolpefyllet. Når aktivert, velg hvordan gradienten vises og tilpass fargestopp nedenfor.","full":"Full","title":"Gradientmodus","value_based":"Verdibasert"},"labels":{"alignment":"Etikettjustering","alignment_desc":"Kontroller hvordan venstre og høyre etiketter er posisjonert."},"left":{"desc":"Konfigurer tittelen og entitetsverdien vist på venstre side av stolpen. Dette er nyttig for å vise etiketter som \'Rekkevidde\' eller \'Batteri\' sammen med deres verdier.","enable_toggle":"Aktiver bryteren over for å konfigurere venstre side innstillinger","template_desc":"Bruk en mal for å formatere den viste verdien. Maler bruker Home Assistants Jinja2-syntaks.","template_mode":"Malmodus","title":"Venstre side","title_size":"Tittelstørrelse","value_size":"Verdistørrelse","value_template":"Verdimal","value_template_desc":"Mal for å formatere venstre side verdien ved hjelp av Jinja2-syntaks"},"limit_entity":{"desc":"Valgfritt: Legg til en vertikal indikatorlinje på stolpen (f.eks. ladegrense for EV-batteri).","title":"Grenseverdi-entitet (valgfritt)"},"percentage":{"desc":"Kontroller synligheten og utseendet til prosentverdier vist direkte på stolpen. Disse tallene gir en klar visuell indikator for nåværende nivå.","text_alignment":"Prosenttekst justering","text_size":"Tekststørrelse","text_size_desc":"Juster størrelsen på prosenttekst vist på stolpen.","title":"Prosenttekst visning"},"right":{"desc":"Konfigurer tittelen og entitetsverdien vist på høyre side av stolpen. Dette er ideelt for utfyllende informasjon som \'Tid til full\' eller sekundære målinger.","enable_toggle":"Aktiver bryteren over for å konfigurere høyre side innstillinger","template_desc":"Bruk en mal for å formatere den viste verdien. Maler bruker Home Assistants Jinja2-syntaks.","template_mode":"Malmodus","title":"Høyre side","title_size":"Tittelstørrelse","value_size":"Verdistørrelse","value_template":"Verdimal","value_template_desc":"Mal for å formatere høyre side verdien ved hjelp av Jinja2-syntaks"},"template_config":{"desc":"Konfigurer malinnstillinger","percentage_template":"Prosentmal","percentage_template_desc":"Skriv inn en Jinja2-mal som returnerer et tall mellom 0-100 for prosenten. Eksempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Malkonfigurasjon"},"text_display":{"title":"Tekstvisning","desc":"Kontroller synligheten og utseendet til tekstverdier vist direkte på stolpen. For forskjells- og malmoduser kan du velge å vise rå enhetsverdier i stedet for prosenter.","show_value":"Vis verdi i stedet for prosent","show_value_desc":"Når aktivert, viser den faktiske enhetsverdien i stedet for prosent. Nyttig for å vise rå sensorverdier som \\"45 kWh\\" i stedet for \\"75%\\".","text_size":"Tekststørrelse","text_size_desc":"Juster størrelsen på teksten vist på stolpen.","text_alignment":"Tekstjustering"}},"image":{"settings":"Bildeinnstillinger","source_type":"Bildekildetype","source_type_desc":"Velg hvordan du vil spesifisere bildekilden.","source":{"default":"Standardbilde","url":"Bilde-URL","upload":"Last opp bilde","entity":"Entitetsbilde","attribute":"Entitetsattributt"},"url_section":{"title":"Konfigurasjon av bilde-URL"},"image_url":"Bilde-URL","image_url_desc":"Skriv inn den direkte URL-en til bildet du vil vise.","upload_section":{"title":"Konfigurasjon av bildeopplasting"},"upload":"Last opp bilde","upload_desc":"Klikk for å laste opp en bildefil fra enheten din.","entity_section":{"title":"Konfigurasjon av entitetsbilde"},"entity":"Entitet","entity_desc":"Velg en entitet som har et bilde (f.eks. person, kameraentiteter).","attribute_section":{"title":"Konfigurasjon av entitetsattributt"},"entity_attr_desc":"Velg entiteten som inneholder bilde-URL-en i et av sine attributter.","attribute_name":"Attributtnavn","attribute_name_desc":"Skriv inn attributtstien som inneholder bilde-URL-en (punktnotasjon støttet, f.eks. vehicle_data.vehicleDetails.generalDashboard).","width":"Bredde (%)","width_desc":"Sett bredden som en prosent av beholderen.","height":"Høyde (px)","height_desc":"Sett høyden i piksler.","crop_fit":"Beskjær og tilpass","crop_fit_desc":"Kontroller hvordan bildet passer innenfor sin beholder.","fit":{"cover":"Dekk (beskjær for å fylle)","contain":"Innhold (tilpass hele bildet)","fill":"Fyll (strekk for å passe)","scale_down":"Skaler ned","none":"Ingen (original størrelse)"},"border_radius":"Kantradius","border_radius_desc":"Kontroller de avrundede hjørnene til bildet.","tap_actions":"Trykk-handlinger","filters":"Filtre","filter":{"blur":"Uskarphet","blur_desc":"Bruk en uskarphet-effekt på bildet ditt.","brightness":"Lysstyrke (%)","brightness_desc":"Juster lysstyrken til bildet ditt.","contrast":"Kontrast (%)","contrast_desc":"Endre kontrasten til bildet ditt.","saturation":"Metning (%)","saturation_desc":"Juster metningen til bildet ditt."},"hover":{"title":"Hover-effekter","effect_type":"Effekttype","effect_type_desc":"Velg typen hover-effekt.","scale":"Skaler (zoom inn/ut)","rotate":"Roter","fade":"Fade (gjennomsiktighetendring)","blur":"Uskarphet","brightness":"Lysstyrke","glow":"Glød (boksskygge)","slide":"Gli (oversett)","scale_amount":"Skaler (%)","scale_amount_desc":"Juster skaleringen av bildet ved hover.","rotate_amount":"Rotasjon (°)","rotate_amount_desc":"Roter bildet ved hover.","opacity":"Gjennomsiktighet (%)","opacity_desc":"Endre gjennomsiktigheten til bildet ved hover.","blur_amount":"Uskarphet (px)","blur_amount_desc":"Bruk en uskarphet-effekt på bildet ved hover.","brightness_amount":"Lysstyrke (%)","brightness_amount_desc":"Juster lysstyrken til bildet ved hover.","glow_intensity":"Glødintensitet","glow_intensity_desc":"Velg intensiteten til glødeffekten ved hover.","glow_light":"Lett glød","glow_medium":"Medium glød","glow_heavy":"Kraftig glød","glow_custom":"Tilpasset skygge","translate_x":"Horisontal (px)","translate_x_desc":"Oversett bildet horisontalt ved hover.","translate_y":"Vertikal (px)","translate_y_desc":"Oversett bildet vertikalt ved hover."},"alt":"Bilde","no_source":"Ingen bildekilde konfigurert"},"graphs":{"chart_type":{"title":"Diagramtype","type":"Type","desc":"Velg visualiseringsstilen for dataene dine."},"types":{"line":"Linjediagram","bar":"Stolpediagram","pie":"Sektordiagram","donut":"Smultringdiagram"},"data_sources":{"title":"Datakilder","add_entity":"Add Entity","add_first_entity":"Legg til din første entitet for å lage et diagram","no_entities":"Ingen entiteter lagt til"},"entity":"Entitet","entity_desc":"Velg en entitet å plotte.","display_name_optional":"Visningsnavn (valgfritt)","use_as_card_info":"Bruk som kortinfo","attribute":"Attributt","attribute_desc":"Bruk entitetstilstand eller velg et spesifikt attributt å spore.","attribute_state_default":"Tilstand (standard)","show_points":"Vis punkter","fill_area":"Fyll område","line_style":"Linjestil","line_solid":"Hel","line_dashed":"Stiplet","line_dotted":"Prikket","pie_show_title":"Vis tittel i utsnitt","pie_show_value":"Vis verdi i utsnitt","expand_options":"Utvid alternativer","no_entities":"Ingen entiteter lagt til","add_first_entity":"Legg til din første entitet for å lage et diagram","add_entity":"Add Entity","display_options":{"title":"Visningsalternativer"},"show_title":"Vis diagramtittel","show_value":"Vis diagramverdi","chart_title":"Diagramtittel","chart_title_placeholder":"Skriv inn diagramtittel","time_period":"Tidsperiode","time_period_desc":"Hvor mye historisk data som skal vises.","period":{"1h":"Siste time","3h":"Siste 3 timer","6h":"Siste 6 timer","12h":"Siste 12 timer","24h":"Siste 24 timer","2d":"Siste 2 dager","7d":"Siste uke","30d":"Siste måned","90d":"Siste 3 måneder","365d":"Siste år"},"normalize_values":"Normaliser verdier til samme skala","normalize_desc":"Nyttig når du sammenligner entiteter med forskjellige enheter (f.eks. % vs mil)","chart_height":"Diagramhøyde","reset_345":"Tilbakestill til standard (345px)","chart_width":"Diagrambredde (%)","reset_100":"Tilbakestill til standard (100%)","agg":{"count":"Antall","delta":"Endring","first":"Første verdi","last":"Siste verdi","max":"Maksimum","mean":"Gjennomsnitt","median":"Median","min":"Minimum","sum":"Sum"},"display":{"add_slice_gap":"Legg til utsnittgap","background_color":"Bakgrunnsfarge","chart_alignment":"Diagramjustering","chart_alignment_desc":"Justering av diagrammet innenfor sin beholder.","chart_height":"Diagramhøyde","chart_options":"Diagramalternativer","chart_title":"Diagramtittel","chart_title_placeholder":"Skriv inn diagramtittel","chart_width":"Diagrambredde (%)","chart_width_desc":"Prosent av modulens tilgjengelige bredde. Justering styrer plassering.","info_position":"Infoposisjon","info_position_desc":"Posisjon til overlegget som viser navn/verdi.","legend_position":"Legendeposisjon","legend_position_desc":"Hvor legenden skal plasseres når aktivert.","normalize_desc":"Nyttig når du sammenligner entiteter med forskjellige enheter (f.eks. % vs mil)","normalize_values":"Normaliser verdier til samme skala","show_grid":"Vis rutenett","show_legend":"Vis legende","show_title":"Vis diagramtittel","show_tooltips":"Vis verktøytips","show_value":"Vis diagramverdi","smooth_lines":"Glatte linjer","time_period":"Tidsperiode","time_period_desc":"Hvor mye historisk data som skal vises.","title":"Visningsalternativer","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Fyll område","line_style":"Linjestil","line_width":"Linjebredde","show_points":"Vis punkter"},"line_styles":{"dashed":"Stiplet","dotted":"Prikket","solid":"Hel"},"pie":{"show_title":"Vis tittel i utsnitt","show_value":"Vis verdi i utsnitt"},"position":{"bottom":"Bunn","bottom_left":"Nederst til venstre","bottom_right":"Nederst til høyre","center":"Senter","hidden":"Skjult","left":"Venstre","middle":"Senter","right":"Høyre","top":"Topp","top_left":"Øverst til venstre","top_right":"Øverst til høyre"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Grunninnstillinger","desc":"Konfigurer knappens utseende og tekstinnhold."},"text":{"title":"Knapptekst","desc":"Tekst som skal vises på knappen (la stå tom for kun ikon)."},"style":{"title":"Knappstil","desc":"Visuell stil for knappen"},"alignment":{"title":"Justering","desc":"Hvordan knappen er justert innenfor sin beholder"},"styles":{"flat":"Flat (standard)","glossy":"Blank","embossed":"Preget","inset":"Innfelt","gradient_overlay":"Gradientoverlegg","neon_glow":"Neonglød","outline":"Omriss","glass":"Glass","metallic":"Metallisk"},"align":{"left":"Venstre","center":"Senter","right":"Høyre","justify":"Juster (full bredde)"},"icon":{"title":"Ikoninnstillinger","desc":"Konfigurer ikonvisning og posisjonering for knappen.","before":"Før tekst","after":"Etter tekst","enable_toggle_desc":"Aktiver bryteren over for å konfigurere ikoninnstillinger"},"colors":{"title":"Farger","background":"Bakgrunnsfarge","text":"Tekstfarge"},"hover":{"effect_type":"Effekttype","effect_type_desc":"Velg hover-effekten for denne knappen.","none":"Ingen","color":"Fargeendring","scale":"Skaler","glow":"Glød","lift":"Løft (oversett Y)","hover_color":"Hover-farge","glow_color":"Glødfarge","title":"Hover-effekter","enable_toggle_desc":"Aktiver bryteren over for å konfigurere hover-effekter"},"actions":{"type":"Handlingstype","type_desc":"Velg hva som skjer når knappen klikkes","entity":"Entitet","entity_desc":"Velg entiteten å samhandle med","navigation_path":"Navigasjonsbane","navigation_path_desc":"Bane å navigere til (f.eks. /dashboard/energy)","service":"Tjeneste","service_desc":"Tjeneste å kalle (f.eks. light.turn_on)","service_data":"Tjenestedata (JSON)","service_data_desc":"Valgfrie data å sende til tjenesten (JSON-format)"},"tap":{"title":"Trykk-handling","desc":"Handling å utføre når knappen trykkes"},"hold":{"title":"Hold-handling","desc":"Handling å utføre når knappen holdes nede"},"double":{"title":"Dobbelttrykk-handling","desc":"Handling å utføre når knappen dobbeltrykkes"},"show_icon":"Vis ikon","show_icon_desc":"Vis et ikon på knappen","icon_desc":"Ikon som skal vises (f.eks. mdi:home)","icon_position":"Ikonposisjon","icon_position_desc":"Posisjon til ikonet relativt til tekst","icon_field":"Ikon"},"info":{"entity_section":{"title":"ENTITETSKONFIGURASJON"},"entity":"Entitet","entity_desc":"Velg entiteten som skal vises","icon_section":{"title":"Ikoninnstillinger"},"show_icon":"Vis ikon","show_icon_desc":"Vis et ikon ved siden av entitetsverdien","icon":"Ikon","icon_desc":"Velg et ikon som skal vises","icon_color":"Ikonfarge","name_section":{"title":"Navneinnstillinger"},"show_name":"Vis navn","show_name_desc":"Vis entitetsnavnet over verdien","custom_name":"Tilpasset navn","custom_name_desc":"Overstyr entitetsnavnet med et tilpasset navn","name_color":"Navnefarge","state_section":{"title":"Tilstandsinnstillinger"},"show_state":"Vis tilstand","show_state_desc":"Vis entitetstilstand/verdi","show_units":"Vis enheter","show_units_desc":"Vis måleenheten (hvis tilgjengelig)","state_color":"Tilstandsfarge","template":{"title":"Malmodus","desc":"Bruk en mal for å formatere entitetsverdien. Maler lar deg bruke Home Assistants malsyntaks for kompleks formatering.","mode":"Malmodus","mode_desc":"Bruk Home Assistants malsyntaks for å formatere verdien","value":"Verdimal","value_desc":"Mal for å formatere entitetsverdien ved hjelp av Jinja2-syntaks"},"size_section":{"title":"Størrelsesinnstillinger"},"icon_size":"Ikonstørrelse","icon_size_desc":"Størrelse på ikonet i piksler","name_size":"Navnestørrelse","name_size_desc":"Størrelse på entitetsnavnteksten i piksler","value_size":"Verdistørrelse","value_size_desc":"Størrelse på entitetsverditeksten i piksler","icon_gap":"Ikonavstand","icon_gap_desc":"Avstand mellom ikon og innhold i piksler","layout_section":{"title":"Layout og posisjonering"},"icon_position":"Ikonposisjon","overall_alignment":"Overordnet justering","icon_alignment":"Ikonjustering","content_alignment":"Innholdsjustering","examples_title":"Vanlige eksempler:","example_basic":"Grunnverdi","example_units":"Med enheter","example_round":"Avrund til 1 desimal"},"camera":{"config":{"title":"Kamerakonfigurasjon","desc":"Konfigurer kameraentiteten og visningsinnstillinger."},"entity":"Kameraentitet","entity_desc":"Velg kameraentiteten som skal vises. Dette bør være en kamera- eller mjpeg-entitet fra Home Assistant.","name":"Kameranavn","name_desc":"Tilpasset navn for kameraet. La stå tom for å bruke entitetsnavn.","show_name":"Vis kameranavn","show_name_desc":"Vis kameranavnet på feeden","name_position":{"group_title":"Kameranavn posisjon","title":"Navneposisjon","desc":"Velg hvor kameranavnet vises som et overlegg på kamerabildet.","options":{"top_left":"Øverst til venstre","top_right":"Øverst til høyre","center":"Senter","bottom_left":"Nederst til venstre","bottom_right":"Nederst til høyre"}},"display":{"title":"Visningsinnstillinger"},"live_view":{"title":"Live visning","desc":"Aktiver for å vise live kamerastrøm (krever strøm-integrasjon). Når deaktivert, vises stillbildeøyeblikksbilder."},"auto_refresh":{"section_title":"Automatiske oppdateringsinnstillinger","title":"Automatisk oppdatering","desc":"Oppdater automatisk kamerabildet med jevne mellomrom"},"refresh_interval":{"title":"Oppdateringsintervall (sekunder)","desc":"Hvor ofte kamerabildet skal oppdateres automatisk."},"dimensions":{"title":"Dimensjoner"},"width":"Bredde (px)","width_desc":"Sett bredden på kameravisningen. Område: 100-1000px","height":"Høyde (px)","height_desc":"Sett høyden på kameravisningen. Område: 100-1000px","link_aspect":"Koble størrelsesforhold","unlink_aspect":"Frakoble størrelsesforhold","aspect_linked":{"title":"Størrelsesforhold koblet","desc":"Dimensjoner opprettholder {ratio}:1 forhold. Justering av en dimensjon oppdaterer automatisk den andre for å opprettholde proporsjoner."},"aspect_independent":{"title":"Uavhengige dimensjoner","desc":"Bredde og høyde kan justeres uavhengig. Klikk på koblingknappen over for å opprettholde størrelsesforhold."},"crop":{"title":"Beskjær og posisjon","desc":"Juster beskjæringen og posisjonen til kameravisningen. Nyttig for å fokusere på spesifikke områder eller fjerne uønskede kanter.","left_title":"Venstre beskjæring (%)","left_desc":"Beskjær fra venstre kant. Høyere verdier viser mindre av venstre side.","right_title":"Høyre beskjæring (%)","right_desc":"Beskjær fra høyre kant. Høyere verdier viser mindre av høyre side.","top_title":"Topp beskjæring (%)","top_desc":"Beskjær fra topp kant. Høyere verdier viser mindre av toppområdet.","bottom_title":"Bunn beskjæring (%)","bottom_desc":"Beskjær fra bunn kant. Høyere verdier viser mindre av bunnområdet.","active_applied":"Aktive beskjæringer anvendt","reset_all":"Tilbakestill alle beskjæringer"},"template":{"title":"Malmodus","desc":"Bruk en mal for å dynamisk sette kameraentiteten. Maler lar deg bruke Home Assistants malsyntaks for betinget kameravalg.","mode_label":"Malmodus","mode_desc":"Bruk Home Assistants malsyntaks for å dynamisk velge kameraentitet","camera_template_label":"Kameramal","camera_template_desc":"Mal for å dynamisk sette kameraentiteten ved hjelp av Jinja2-syntaks","examples_title":"Vanlige eksempler:","example1_desc":"Vis kamera når været er solrikt","example2_desc":"Bytt mellom kameraer basert på input boolean","example3_desc":"Bruk input select for å velge kameraentitet"},"show_name_toggle":{"enable_toggle_desc":"Aktiver bryteren over for å konfigurere kameranavn visning"}},"separator":{"config":{"title":"Separatorkonfigurasjon"},"style":{"title":"Separatorstil","desc":"Velg den visuelle stilen til separatorlinjen."},"options":{"solid":"Hel linje","double":"Dobbel linje","dotted":"Prikket linje","double_dotted":"Dobbel prikket","shadow":"Skygge","blank":"Tomt rom"},"appearance":{"title":"Utseende"},"thickness":"Tykkelse (px)","thickness_desc":"Tykkelse på separatorlinjen.","width":"Bredde (%)","width_desc":"Bredde på separatoren som prosent av beholder.","color":{"title":"Farge","desc":"Farge på separatorlinjen."},"show_title":"Vis tittel","show_title_desc":"Legg til tekst i midten av separatorlinjen (f.eks. ------ Tekst ------)","text_content":{"title":"Tekstinnhold","desc":"Tekst som skal vises i midten av separatoren."},"font_size":"Skriftstørrelse","font_size_desc":"Størrelse på teksten i piksler.","text_color":{"title":"Tekstfarge","desc":"Farge på separatorteksten."},"text_format":{"title":"Tekstformatering","desc":"Bruk formateringsstiler på separatorteksten.","bold":"Fet","italic":"Kursiv","underline":"Understreking","uppercase":"Store bokstaver","strikethrough":"Gjennomstreking"},"spacer":{"title":"Avstandshøyde"},"height":"Høyde (px)","height_desc":"Styrer det visuelle gapet for tomt rom.","show_title_toggle":{"enable_toggle_desc":"Aktiver bryteren over for å konfigurere tittelinnstillinger"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Modulnavn:","module_name_placeholder":"Gi denne modulen et tilpasset navn for å gjøre det lettere å identifisere i redigereren.","module_name_help":"Gi denne modulen et tilpasset navn for å gjøre det lettere å identifisere i redigereren."},"layout_logic":{"display_title":"Vis dette elementet","display_desc":"Kontroller når dette elementet vises. Velg \\"Alltid\\" for å holde det synlig. Velg \\"Hvis ALLE betingelser nedenfor er oppfylt\\" eller \\"Hvis NOEN betingelse nedenfor er oppfylt\\" for å vise det bare når betingelsene du legger til nedenfor evalueres som sanne.","always":"Alltid","every":"Hvis ALLE betingelser nedenfor er oppfylt","any":"Hvis NOEN betingelse nedenfor er oppfylt","conditions":"Betingelser","add_condition":"Legg til betingelse","no_conditions":"Ingen betingelser lagt til ennå. Klikk \\"Legg til betingelse\\" for å komme i gang.","condition_types":{"entity_state":"Entitetstilstand","entity_attribute":"Entitetsattributt","time":"Tidsområde","template":"Mal"},"condition_fields":{"entity":"Entitet","operator":"Operator","value":"Verdi","attribute":"Attributt","time_from":"Fra","time_to":"Til","template":"Mal"},"condition_header":"Betingelse","custom_name":"Tilpasset navn","custom_name_desc":"Valgfritt: Gi denne betingelsen et tilpasset navn for enklere identifikasjon","condition_type":"Betingelsestype"},"hover_effects":{"title":"Hover-effekter","description":"Konfigurer visuelle effekter som vises når du hover over denne modulen, raden eller kolonnen.","effect":"Hover-effekt","effect_desc":"Velg den visuelle effekten som skal brukes ved hovring","effects":{"none":"Ingen","highlight":"Uthev","outline":"Kontur","grow":"Voks","shrink":"Krympe","pulse":"Pulsere","bounce":"Sprette","float":"Flyte","glow":"Gløde","shadow":"Skygge","rotate":"Rotere","skew":"Skjevt","wobble":"Vakle","buzz":"Vibrere","fade":"Falme"}},"design":{"copy":"Kopier","paste":"Lim inn","reset_all":"Tilbakestill alt","copy_tooltip":"Kopier nåværende designinnstillinger (virker på tvers av alle Ultra Cards)","paste_tooltip_has":"Lim inn kopierte designinnstillinger (fra tverrkort-utklippstavle)","paste_tooltip_none":"Ingen designinnstillinger i tverrkort-utklippstavle","reset_all_tooltip":"Tilbakestill alle designinnstillinger til standard","text_section":"Tekst","text_color":"Tekstfarge","alignment":"Justering","inherit_alignment":"Arv (ingen justering)","font_size":"Skriftstørrelse","font_size_placeholder":"16px (standard), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Tilbakestill skriftstørrelse til standard","line_height":"Linjehøyde","line_height_placeholder":"0 (standard), 28px, 1.7","reset_line_height":"Tilbakestill linjehøyde til standard","letter_spacing":"Bokstavavstand","letter_spacing_placeholder":"auto (standard), 1px, -0.04em","reset_letter_spacing":"Tilbakestill bokstavavstand til standard","font":"Skrifttype","font_weight":"Skriftvekt","text_transform":"Teksttransformasjon","font_style":"Skriftstil","default_option":"– Standard –","weight_thin":"100 - Tynn","weight_light":"300 - Lett","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Halvfet","weight_bold":"700 - Fet","weight_black":"900 - Svart","transform_none":"Ingen","transform_uppercase":"STORE BOKSTAVER","transform_lowercase":"små bokstaver","transform_capitalize":"Stor forbokstav","style_normal":"Normal","style_italic":"Kursiv","style_oblique":"Skrå","background_section":"Bakgrunn","background_color":"Bakgrunnsfarge","background_image_type":"Bakgrunnsbilde type","bg_none":"Ingen","bg_upload":"Last opp bilde","bg_entity":"Entitetsbilde","bg_url":"Bilde-URL","sizes_section":"Størrelser","spacing_section":"Avstand","border_section":"Kant","text_shadow_section":"Tekstskygge","box_shadow_section":"Boksskygge","position_section":"Posisjon","overflow_section":"Overflyt","animations_section":"Animasjoner","width":"Bredde","height":"Høyde","max_width":"Maks bredde","max_height":"Maks høyde","min_width":"Min bredde","min_height":"Min høyde","border_radius":"Kantradius","border_style":"Kantstil","border_width":"Kantbredde","border_color":"Kantfarge","margin":"Margin","padding":"Polstring","top":"Topp","right":"Høyre","bottom":"Bunn","left":"Venstre","unlock_sides":"Lås opp for å redigere sider uavhengig","lock_sides":"Lås for å redigere alle sider sammen","horizontal_shift":"Horisontal forskyvning","vertical_shift":"Vertikal forskyvning","blur":"Uskarphet","text_shadow_color":"Tekstskygge farge","box_shadow_color":"Boksskygge farge","overflow":"Overflyt","clip_path":"Klippebane","upload_bg_image":"Last opp bakgrunnsbilde","bg_image_entity":"Bakgrunnsbilde-entitet","bg_image_url":"Bakgrunnsbilde-URL","choose_file":"Velg fil","no_file_chosen":"Ingen fil valgt","backdrop_filter":"Bakgrunnsfilter","spread":"Spredning","visible_default":"Synlig (standard)","examples":"Eksempler","state_based_animation":"Tilstandsbasert animasjon","animation_type":"Animasjonstype","animation_duration":"Animation Duration","animation_duration_desc":"Varighet for animasjonen (f.eks. 2s, 500ms, 1.5s)","intro_outro_animations":"Intro- og outro-animasjoner","intro_animation":"Intro-animasjon","outro_animation":"Outro-animasjon","duration":"Varighet","delay":"Forsinkelse","timing":"Timing","none":"Ingen","ease":"Ease","border_style_none":"Ingen","border_style_solid":"Hel","border_style_dashed":"Stiplet","border_style_dotted":"Prikket","border_style_double":"Double","position_default":"– Standard –","position_static":"Statisk","position_relative":"Relativ","position_absolute":"Absolutt","position_fixed":"Fast","position_sticky":"Klebrig","background_filter":"Background Filter"},"modules":{"text":"Tekstmodul","image":"Bildemodul","icon":"Ikonmodul","bar":"Stolpemodul","info":"Infomodul","button":"Knappmodul","separator":"Separatormodul","markdown":"Markdown-modul","camera":"Kameramodul","graphs":"Grafmodul","no_text_configured":"Ingen tekst konfigurert","no_image_configured":"Ingen bilde konfigurert","uploaded_image":"Opplastet bilde","icons_configured":"{count} ikoner konfigurert","no_icons_configured":"Ingen ikoner konfigurert","default_entity_suggestion":"Entitet: sensor.battery_level","sample_text":"Eksempeltekst","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Attributt","attribute_name":"Attributtnavn","baseline":"Grunnlinje","bottom":"Bunn","center":"Senter","entity":"Entitet","justify":"Juster","left":"Venstre","none":"Ingen","right":"Høyre","space_around":"Plass rundt","space_between":"Plass mellom","state":"Tilstand","stretch":"Strekk","top":"Topp"},"horizontal":{"alignment":{"horizontal":"Horisontal justering","horizontal_desc":"Velg hvordan elementer justeres horisontalt innenfor beholderen.","vertical":"Vertikal justering","vertical_desc":"Velg hvordan elementer justeres vertikalt innenfor beholderen."},"empty":{"add_modules":"Legg til moduler i layoutbyggeren for å se dem her","no_modules":"Ingen moduler lagt til ennå"},"gap":{"between_items":"Avstand mellom elementer","desc":"Sett avstanden mellom horisontale elementer (i rem-enheter). Bruk negative verdier for å overlappe elementer.","title":"Avstandskonfigurasjon"},"layout":{"desc":"Konfigurer hvordan elementer arrangeres horisontalt innenfor beholderen.","title":"Layoutkonfigurasjon"},"wrapping":{"desc":"Tillat elementer å bryte til neste linje når de overskrider beholderbredden.","title":"Tillat ombrytning"}},"markdown":{"code_highlighting":"Kodemarkering","code_highlighting_desc":"Syntaksmarkering for kodeblokker","content":{"desc":"Skriv inn ditt markdown-innhold med full formateringsstøtte","label":"Innhold","title":"Markdown-innhold"},"enable_html":"Aktiver HTML","enable_html_desc":"Tillat HTML-tagger i markdown-innhold","enable_tables":"Aktiver tabeller","enable_tables_desc":"Støtte for markdown-tabellsyntaks","features":{"title":"Markdown-funksjoner"}},"vertical":{"alignment":{"vertical":"Vertikal justering","vertical_desc":"Velg hvordan elementer justeres vertikalt innenfor beholderen."},"empty":{"add_modules":"Legg til moduler i layoutbyggeren for å se dem her","no_modules":"Ingen moduler lagt til ennå"},"gap":{"between_items":"Avstand mellom elementer","desc":"Sett avstanden mellom vertikale elementer (i rem-enheter). Bruk negative verdier for å overlappe elementer.","title":"Avstandskonfigurasjon"},"layout":{"desc":"Konfigurer hvordan elementer arrangeres vertikalt innenfor beholderen.","title":"Layoutkonfigurasjon"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var A=i.t(O,2);const C=JSON.parse('{"editor":{"tabs":{"layout":"Konstruktor układu","settings":"Ustawienia","about":"O programie","pro":"Pro"},"settings":{"title":"Ustawienia karty","description":"Konfiguruj globalny wygląd i zachowanie karty."},"appearance":{"title":"Wygląd","description":"Kontroluj wizualny wygląd swojej karty"},"spacing":{"title":"Odstępy","description":"Kontroluj odstępy i pozycjonowanie swojej karty"},"fields":{"card_background_color":"Kolor tła karty","card_background_color_desc":"Kolor tła całej karty","border_radius":"Promień obramowania","border_radius_desc":"Zaokrąglone rogi karty (w pikselach)","card_padding":"Wypełnienie karty","card_padding_desc":"Wewnętrzne odstępy w karcie","card_margin":"Margines karty","card_margin_desc":"Zewnętrzne odstępy wokół karty","unit_px":"px","reset_default":"Przywróć domyślne","reset_default_value":"Przywróć domyślne ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Pełny ekran","return_dashboard":"Powrót do pulpitu","dashboard":"Pulpit"},"layout":{"live_preview":"Podgląd na żywo","toggle_preview":"Przełącz podgląd","drag_to_move_module":"Przeciągnij, aby przenieść moduł","edit_module":"Edytuj moduł","duplicate_module":"Duplikuj moduł","delete_module":"Usuń moduł","drag_to_move_layout":"Przeciągnij, aby przenieść moduł układu","horizontal_layout":"Układ poziomy","vertical_layout":"Układ pionowy","add_module_to_layout":"Dodaj moduł do układu","layout_settings":"Ustawienia układu","duplicate_layout":"Duplikuj układ","delete_layout":"Usuń układ","click_to_add_module":"Kliknij, aby dodać moduł","drop_modules_here":"Upuść moduły tutaj","drag_to_reorder":"Przeciągnij, aby zmienić kolejność","edit_child_module":"Edytuj moduł potomny","duplicate_child_module":"Duplikuj moduł potomny","delete_child_module":"Usuń moduł potomny","module_settings_title":"Ustawienia modułu","general_tab":"Ogólne","actions_tab":"Akcje","other_tab":"Inne","logic_tab":"Logika","design_tab":"Projekt","drag_to_resize":"Przeciągnij, aby zmienić rozmiar","hidden_by_logic":"Ukryte przez logikę","child_module_settings_title":"Ustawienia modułu potomnego","add_row":"Dodaj wiersz","add_row_tooltip":"Dodaj nowy wiersz do swojego układu","row_settings":"Ustawienia wiersza","column_settings":"Ustawienia kolumny","row_background_color":"Kolor tła wiersza","column_gap":"Odstęp kolumn (px)","vertical_alignment":"Wyrównanie pionowe","horizontal_alignment":"Wyrównanie poziome","column_preview":"Podgląd kolumny","modules_count":"{count} modułów","alignment_top":"Góra","alignment_center":"Środek","alignment_bottom":"Dół","alignment_stretch":"Rozciągnij","alignment_left":"Lewo","alignment_right":"Prawo","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Opracowane przez","desc1":"Potężny modularny konstruktor kart dla Home Assistant","desc2":"Twórz niestandardowe układy z profesjonalnym interfejsem konstruktora stron","desc3":"Modularny system układów z logiką warunkową i profesjonalnymi narzędziami projektowymi","github_repo":"Repozytorium GitHub","version":"Wersja","join_discord":"Dołącz do naszego Discorda","support_title":"Wspieraj Ultra Card","support_desc":"Twoje hojne napiwki napędzają rozwój niesamowitych funkcji tej karty! Bez wsparcia użytkowników takich jak ty, ciągłe innowacje nie byłyby możliwe.","leave_tip":"ZOSTAW NAPIWEK (PAYPAL)"},"actions":{"title":"Konfiguracja akcji","description":"Skonfiguruj, jak ten moduł reaguje na interakcje użytkownika. Używa natywnego systemu akcji Home Assistant dla spójnego zachowania na pulpicie.","tap_action":"Akcja dotknięcia","tap_action_desc":"Akcja wykonywana przy dotknięciu/kliknięciu modułu","hold_action":"Akcja przytrzymania","hold_action_desc":"Akcja wykonywana przy przytrzymaniu modułu","double_tap_action":"Akcja podwójnego dotknięcia","double_tap_action_desc":"Akcja wykonywana przy podwójnym dotknięciu modułu","tap_behavior":"Zachowanie dotknięcia","tap_behavior_desc":"Akcja do wykonania gdy element jest dotknięty/kliknięty.","hold_behavior":"Zachowanie przytrzymania","hold_behavior_desc":"Akcja do wykonania gdy element jest naciśnięty i przytrzymany.","double_tap_behavior":"Zachowanie podwójnego dotknięcia","double_tap_behavior_desc":"Akcja do wykonania gdy element jest podwójnie dotknięty/kliknięty.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"KONFIGURACJA ENCJI","desc":"Skonfiguruj encję i stany aktywny/nieaktywny"},"entity":"Encja","entity_desc":"Wybierz encję, którą reprezentuje ta ikona","inactive_state":"Stan nieaktywny","inactive_state_desc":"Wartość stanu uważana za \\"nieaktywną\\" (zostaw puste, aby użyć rzeczywistego stanu encji)","active_state":"Stan aktywny","active_state_desc":"Wartość stanu uważana za \\"aktywną\\" (zostaw puste, aby użyć rzeczywistego stanu encji)","active_animation":"Aktywna animacja","active_animation_desc":"Animacja gdy ikona jest aktywna","active_icon":"Aktywna ikona","active_icon_background":"Tło aktywnej ikony","active_icon_background_color":"Kolor tła aktywnej ikony","active_icon_color":"Kolor aktywnej ikony","active_icon_desc":"Ikona do pokazania gdy aktywna","active_name":"Aktywna nazwa","active_name_color":"Kolor aktywnej nazwy","active_name_desc":"Niestandardowa nazwa gdy aktywna","active_state_color":"Kolor aktywnego stanu","active_state_text":"Tekst aktywnego stanu","animation_bounce":"Odbicie","animation_fade":"Zanikanie","animation_flash":"Błysk","animation_none":"Brak","animation_pulse":"Puls","animation_rotate_left":"Obrót w lewo","animation_rotate_right":"Obrót w prawo","animation_scale":"Skala","animation_section":{"desc":"Skonfiguruj animacje dla stanów aktywnych i nieaktywnych","title":"Animacja ikony"},"animation_shake":"Trzęsienie","animation_spin":"Obrót","animation_tada":"Tada","animation_vibrate":"Wibracja","background_color_active":"Kolor tła gdy aktywny","background_color_inactive":"Kolor tła gdy nieaktywny","background_section":{"desc":"Skonfiguruj ustawienia nieaktywnego tła","title":"Nieaktywne tło"},"background_shape_active":"Kształt tła gdy aktywny","background_shape_inactive":"Kształt tła gdy nieaktywny","custom_active_name":"Niestandardowa aktywna nazwa","custom_active_name_desc":"Nadpisz nazwę encji gdy aktywna (zostaw puste, aby użyć nazwy encji)","custom_active_state":"Niestandardowy aktywny stan","custom_active_state_desc":"Niestandardowy tekst gdy aktywny (zostaw puste, aby użyć rzeczywistego stanu)","custom_inactive_name":"Niestandardowa nieaktywna nazwa","custom_inactive_name_desc":"Nadpisz nazwę encji gdy nieaktywna (zostaw puste, aby użyć nazwy encji)","custom_inactive_state":"Niestandardowy nieaktywny stan","custom_inactive_state_desc":"Niestandardowy tekst gdy nieaktywny (zostaw puste, aby użyć rzeczywistego stanu)","icon_color_active":"Kolor gdy aktywny","icon_color_inactive":"Kolor gdy nieaktywny","icon_section":{"title":"Konfiguracja ikony"},"icon_size_active":"Rozmiar ikony gdy aktywna","icon_size_inactive":"Rozmiar ikony gdy nieaktywna","inactive_animation":"Nieaktywna animacja","inactive_animation_desc":"Animacja gdy ikona jest nieaktywna","inactive_icon":"Nieaktywna ikona","inactive_icon_background":"Tło nieaktywnej ikony","inactive_icon_background_color":"Kolor tła nieaktywnej ikony","inactive_icon_color":"Kolor nieaktywnej ikony","inactive_icon_config":"Konfiguracja nieaktywnej ikony","inactive_icon_config_desc":"Skonfiguruj ustawienia nieaktywnej ikony","inactive_icon_desc":"Ikona do pokazania gdy nieaktywna","inactive_name":"Nieaktywna nazwa","inactive_name_color":"Kolor nieaktywnej nazwy","inactive_name_config":"Konfiguracja nieaktywnej nazwy","inactive_name_config_desc":"Skonfiguruj ustawienia nieaktywnej nazwy","inactive_name_desc":"Niestandardowa nazwa gdy nieaktywna","inactive_state_color":"Kolor nieaktywnego stanu","inactive_state_config":"Konfiguracja nieaktywnego stanu","inactive_state_config_desc":"Skonfiguruj ustawienia nieaktywnego stanu","inactive_state_text":"Tekst nieaktywnego stanu","name_color_active":"Kolor nazwy gdy aktywna","name_color_inactive":"Kolor nazwy gdy nieaktywna","name_section":{"title":"Konfiguracja nazwy"},"name_size_active":"Rozmiar tekstu nazwy gdy aktywna","name_size_inactive":"Rozmiar tekstu nazwy gdy nieaktywna","state_color_active":"Kolor stanu gdy aktywny","state_color_inactive":"Kolor stanu gdy nieaktywny","state_section":{"title":"Konfiguracja stanu"},"state_size_active":"Rozmiar tekstu stanu gdy aktywny","state_size_inactive":"Rozmiar tekstu stanu gdy nieaktywny","template":"Szablon","template_mode":"Zaawansowany tryb szablonu","template_section":{"desc":"Użyj szablonów Jinja2 dla zaawansowanej kontroli ikon. Szablony mogą kontrolować widoczność (prawda/fałsz do pokazywania/ukrywania ikon) i dostosowywać tekst stanu. Zwróć niestandardowy tekst dla stanu aktywnego, zwróć rzeczywisty stan encji dla stanu nieaktywnego.","title":"Zaawansowany tryb szablonu"}},"text":{"content_section":{"title":"Konfiguracja zawartości","desc":"Skonfiguruj zawartość tekstową i podstawowe ustawienia tego modułu."},"text_content":"Zawartość tekstowa","text_content_desc":"Wprowadź zawartość tekstową do wyświetlenia w tym module.","icon_section":{"title":"Konfiguracja ikony","desc":"Wybierz ikonę do wyświetlenia obok zawartości tekstowej."},"icon":"Ikona","icon_desc":"Wybierz ikonę do wyświetlenia obok tekstu. Zostaw puste dla braku ikony.","icon_position":"Pozycja ikony","icon_position_desc":"Wybierz gdzie umieścić ikonę względem tekstu.","before_text":"Przed tekstem","after_text":"Po tekście","template_mode":"Tryb szablonu","template_mode_desc":"Użyj składni szablonów Home Assistant do renderowania tekstu","value_template":"Szablon wartości","value_template_desc":"Szablon do renderowania tekstu używając składni Jinja2","examples_title":"Typowe przykłady:","example_basic":"Podstawowa wartość","example_percent":"Z procentem","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Ustawienia paska","desc":"Skonfiguruj jak procent paska jest obliczany i wyświetlany."},"perc_type":{"entity":"Encja (0-100)","attribute":"Atrybut encji","difference":"Różnica","template":"Szablon"},"attribute_section":{"title":"Konfiguracja atrybutu encji","desc":"Skonfiguruj ustawienia atrybutu encji"},"attribute_entity":"Encja atrybutu","attribute_entity_desc":"Wybierz encję zawierającą atrybut z wartością procentową","attribute_name":"Nazwa atrybutu","attribute_name_desc":"Wprowadź nazwę atrybutu zawierającego wartość procentową (np. \\"battery_level\\")","diff_section":{"title":"Konfiguracja obliczania różnicy","desc":"Skonfiguruj ustawienia obliczania różnicy"},"current_entity":"Encja bieżącej wartości","current_entity_desc":"Encja reprezentująca bieżącą/zużytą ilość (np. zużyte paliwo, zużyta bateria)","total_entity":"Encja całkowitej wartości","total_entity_desc":"Encja reprezentująca całkowitą/maksymalną ilość (np. pojemność paliwa, pojemność baterii)","template_section":{"title":"Konfiguracja szablonu","desc":"Skonfiguruj ustawienia szablonu"},"percentage_template":"Szablon procentowy","percentage_template_desc":"Wprowadź szablon Jinja2 zwracający liczbę między 0-100 dla procentu. Przykład: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animuj wypełnienie paska używając ustawień jak paski ładowania, puls, blask i więcej. Możesz wyzwalać animacje na podstawie stanu lub atrybutu encji i opcjonalnie nadpisać animację gdy spełniony jest inny warunek.","override":{"attribute_name_desc":"Nazwa atrybutu do porównania","desc":"Wybierz encję akcji i stan aby zdefiniować kiedy ta animacja powinna nadpisać regularną animację","entity_desc":"Encja do oceny dla wyzwalacza nadpisania","match_value":"Nadpisz wartość dopasowania","match_value_desc":"Porównanie tekstowe ze stanem lub atrybutem","title":"Nadpisanie animacji akcji","type":"Nadpisz typ animacji","type_desc":"Animacja do użycia gdy warunek nadpisania jest spełniony."},"title":"Animacja paska","trigger":{"attribute_name_desc":"Nazwa atrybutu do porównania (np. charging_status)","desc":"Wybierz encję do obserwowania i zdefiniuj wartość + animację do zastosowania gdy pasuje.","entity_desc":"Encja do oceny dla wyzwalacza animacji","match_value":"Wartość dopasowania","match_value_desc":"Tekst do porównania ze stanem lub atrybutem (porównanie jest tekstowe).","title":"Wyzwalacz animacji","type":"Typ wyzwalacza","type_desc":"Wybierz czy porównać stan encji czy atrybut"},"type":"Typ animacji","type_desc":"Wybierz jak pasek powinien się animować gdy wyzwolony.","types":{"blinking":"Miganie","bouncing":"Odbijanie","bubbles":"Bąbelki","charging":"Ładowanie (linie ukośne)","fill":"Wypełnienie","flicker":"Migotanie","glow":"Blask","heartbeat":"Bicie serca","pulse":"Puls","rainbow":"Tęcza","ripple":"Fala","shimmer":"Połysk","traffic":"Ruch (słup fryzjerski)","vibrate":"Wibracja"}},"appearance":{"direction":"Kierunek wypełniania","direction_desc":"Wybierz kierunek, w którym pasek wypełnia się wraz ze wzrostem wartości.","left_to_right":"Z lewej do prawej","right_to_left":"Z prawej do lewej","alignment":"Wyrównanie paska","alignment_desc":"Wybierz jak wyrównać pasek gdy ma mniej niż 100% szerokości.","border_radius":"Promień obramowania","border_radius_desc":"Kontroluj zaokrąglone rogi paska.","height":"Wysokość paska","height_desc":"Dostosuj grubość paska postępu w pikselach.","style":"Styl paska","style_dashed":"Dashed","style_desc":"Wybierz wizualny styl paska postępu.","style_dots":"Dots","style_embossed":"Wytłoczony","style_flat":"Płaski (domyślny)","style_glass":"Szkło","style_glossy":"Błyszczący","style_gradient":"Nakładka gradientu","style_inset":"Wgłębiony","style_metallic":"Metaliczny","style_neon":"Neonowy blask","style_neumorphic":"Neumorficzny","style_outline":"Kontur","title":"Wygląd paska","width":"Szerokość paska","width_desc":"Ustaw szerokość paska jako procent kontenera."},"attr_config":{"attribute_entity":"Encja atrybutu","attribute_entity_desc":"Wybierz encję zawierającą atrybut z wartością procentową","attribute_name":"Nazwa atrybutu","attribute_name_desc":"Wprowadź nazwę atrybutu zawierającego wartość procentową (np. \\"battery_level\\")","desc":"Skonfiguruj ustawienia atrybutu encji","title":"Konfiguracja atrybutu encji"},"colors":{"background_color":"Kolor tła","bar_color":"Kolor paska","border_color":"Kolor obramowania","left_side":"Kolory lewej strony","limit_indicator":"Wskaźnik limitu","percentage_text":"Tekst procentowy","right_side":"Kolory prawej strony","title":"Kolory","title_color":"Kolor tytułu","value_color":"Kolor wartości","text_color":"Kolor tekstu","text_color_desc":"Wybierz kolor tekstu wyświetlanego na pasku.","dot_color":"Kolor kropki"},"minimal":{"icon_enabled":"Włącz ikonę","icon_enabled_desc":"Pokaż ikonę na wskaźniku minimalnego paska","icon":"Ikona","icon_desc":"Wybierz ikonę do wyświetlenia (np. mdi:battery)","icon_mode":"Tryb wyświetlania","icon_mode_desc":"Jak wyświetlać ikonę","mode_dot_only":"Tylko kropka","mode_icon_only":"Tylko ikona","mode_icon_in_dot":"Ikona w kropce","icon_size_auto":"Automatyczne skalowanie ikony","icon_size_auto_desc":"Automatycznie skaluj ikonę z wysokością paska","icon_size":"Rozmiar ikony","icon_size_desc":"Niestandardowy rozmiar ikony w pikselach","use_dot_color":"Użyj koloru kropki","use_dot_color_desc":"Użyj koloru kropki dla ikony (pasuje do gradientu)","icon_color":"Kolor ikony","icon_color_desc":"Niestandardowy kolor dla ikony","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Encja bieżącej wartości","current_entity_desc":"Encja reprezentująca bieżącą/zużytą ilość (np. zużyte paliwo, zużyta bateria)","desc":"Skonfiguruj ustawienia obliczania różnicy","title":"Konfiguracja obliczania różnicy","total_entity":"Encja całkowitej wartości","total_entity_desc":"Encja reprezentująca całkowitą/maksymalną ilość (np. pojemność paliwa, pojemność baterii)"},"entity":{"desc_empty":"Wybierz encję dostarczającą wartość procentową (0-100). Sensory baterii są idealne dla pasków.","desc_present":"Encja dostarczająca wartość procentową dla paska.","no_entity_warning":"Nie wybrano encji - Proszę wybrać sensor z wartościami między 0-100","title":"Encja procentu paska"},"gradient":{"cropped":"Cropped","desc":"Apply a color gradient to the bar fill. When enabled, choose how the gradient is displayed and customize color stops below.","full":"Full","title":"Gradient Mode","value_based":"Value Based"},"labels":{"alignment":"Label Alignment","alignment_desc":"Control how left and right labels are positioned."},"left":{"desc":"Configure the title and entity value shown on the left side of the bar. This is useful for displaying labels like \'Range\' or \'Battery\' alongside their values.","enable_toggle":"Enable the toggle above to configure left side settings","template_desc":"Use a template to format the displayed value. Templates use Home Assistant\'s Jinja2 syntax.","template_mode":"Tryb szablonu","title":"Left Side","title_size":"Title Size","value_size":"Value Size","value_template":"Szablon wartości","value_template_desc":"Template to format the left side value using Jinja2 syntax"},"limit_entity":{"desc":"Opcjonalne: Dodaj pionową linię wskaźnika na pasku (np. limit ładowania dla baterii EV).","title":"Encja wartości limitu (opcjonalne)"},"percentage":{"desc":"Control the visibility and appearance of percentage values shown directly on the bar. These numbers provide a clear visual indicator of the current level.","text_alignment":"Percentage Text Alignment","text_size":"Text Size","text_size_desc":"Adjust the size of percentage text shown on the bar.","title":"Percentage Text Display"},"right":{"desc":"Configure the title and entity value shown on the right side of the bar. This is ideal for complementary information like \'Time to Full\' or secondary measurements.","enable_toggle":"Enable the toggle above to configure right side settings","template_desc":"Use a template to format the displayed value. Templates use Home Assistant\'s Jinja2 syntax.","template_mode":"Tryb szablonu","title":"Right Side","title_size":"Title Size","value_size":"Value Size","value_template":"Szablon wartości","value_template_desc":"Template to format the right side value using Jinja2 syntax"},"template_config":{"desc":"Skonfiguruj ustawienia szablonu","percentage_template":"Szablon procentowy","percentage_template_desc":"Wprowadź szablon Jinja2 zwracający liczbę między 0-100 dla procentu. Przykład: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Konfiguracja szablonu"},"text_display":{"title":"Wyświetlanie tekstu","desc":"Kontroluj widoczność i wygląd wartości tekstowych wyświetlanych bezpośrednio na pasku. Dla trybów różnicy i szablonu możesz wybrać wyświetlanie surowych wartości encji zamiast procentów.","show_value":"Pokaż wartość zamiast procentu","show_value_desc":"Gdy włączone, pokazuje rzeczywistą wartość encji zamiast procentu. Przydatne do wyświetlania surowych wartości czujników jak \\"45 kWh\\" zamiast \\"75%\\".","text_size":"Rozmiar tekstu","text_size_desc":"Dostosuj rozmiar tekstu wyświetlanego na pasku.","text_alignment":"Wyrównanie tekstu"}},"image":{"settings":"Image Settings","source_type":"Image Source Type","source_type_desc":"Choose how you want to specify the image source.","source":{"default":"Default Image","url":"Image URL","upload":"Upload Image","entity":"Entity Image","attribute":"Atrybut encji"},"url_section":{"title":"Image URL Configuration"},"image_url":"Image URL","image_url_desc":"Enter the direct URL to the image you want to display.","upload_section":{"title":"Upload Image Configuration"},"upload":"Upload Image","upload_desc":"Click to upload an image file from your device.","entity_section":{"title":"Entity Image Configuration"},"entity":"Encja","entity_desc":"Select an entity that has an image (e.g., person, camera entities).","attribute_section":{"title":"Konfiguracja atrybutu encji"},"entity_attr_desc":"Select the entity that contains the image URL in one of its attributes.","attribute_name":"Nazwa atrybutu","attribute_name_desc":"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard).","width":"Width (%)","width_desc":"Set the width as a percentage of the container.","height":"Height (px)","height_desc":"Set the height in pixels.","crop_fit":"Crop & Fit","crop_fit_desc":"Control how the image fits within its container.","fit":{"cover":"Cover (crop to fill)","contain":"Contain (fit entire image)","fill":"Fill (stretch to fit)","scale_down":"Scale Down","none":"None (original size)"},"border_radius":"Promień obramowania","border_radius_desc":"Control the rounded corners of the image.","tap_actions":"Tap Actions","filters":"Filters","filter":{"blur":"Blur","blur_desc":"Apply a blur effect to your image.","brightness":"Brightness (%)","brightness_desc":"Adjust the brightness of your image.","contrast":"Contrast (%)","contrast_desc":"Modify the contrast of your image.","saturation":"Saturation (%)","saturation_desc":"Adjust the saturation of your image."},"hover":{"title":"Hover Effects","effect_type":"Effect Type","effect_type_desc":"Choose the type of hover effect.","scale":"Scale (zoom in/out)","rotate":"Rotate","fade":"Fade (opacity change)","blur":"Blur","brightness":"Brightness","glow":"Glow (box shadow)","slide":"Slide (translate)","scale_amount":"Scale (%)","scale_amount_desc":"Adjust the scale of the image on hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotate the image on hover.","opacity":"Opacity (%)","opacity_desc":"Change the opacity of the image on hover.","blur_amount":"Blur (px)","blur_amount_desc":"Apply a blur effect to the image on hover.","brightness_amount":"Brightness (%)","brightness_amount_desc":"Adjust the brightness of the image on hover.","glow_intensity":"Glow Intensity","glow_intensity_desc":"Choose the intensity of the glow effect on hover.","glow_light":"Light Glow","glow_medium":"Medium Glow","glow_heavy":"Heavy Glow","glow_custom":"Custom Shadow","translate_x":"Horizontal (px)","translate_x_desc":"Translate the image horizontally on hover.","translate_y":"Vertical (px)","translate_y_desc":"Translate the image vertically on hover."},"alt":"Obraz","no_source":"No image source configured"},"graphs":{"chart_type":{"title":"Chart Type","type":"Type","desc":"Select the visualization style for your data."},"types":{"line":"Line Chart","bar":"Bar Chart","pie":"Pie Chart","donut":"Donut Chart"},"data_sources":{"title":"Data Sources","add_entity":"Add Entity","add_first_entity":"Add your first entity to create a chart","no_entities":"No entities added"},"entity":"Encja","entity_desc":"Select an entity to plot.","display_name_optional":"Display name (optional)","use_as_card_info":"Use as card info","attribute":"Atrybut","attribute_desc":"Use entity state or select a specific attribute to track.","attribute_state_default":"State (default)","show_points":"Show Points","fill_area":"Fill Area","line_style":"Line Style","line_solid":"Solid","line_dashed":"Dashed","line_dotted":"Dotted","pie_show_title":"Show Title in Slice","pie_show_value":"Show Value in Slice","expand_options":"Expand Options","no_entities":"No entities added","add_first_entity":"Add your first entity to create a chart","add_entity":"Add Entity","display_options":{"title":"Display Options"},"show_title":"Show Graph Title","show_value":"Show Graph Value","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","time_period":"Time Period","time_period_desc":"How much historical data to show.","period":{"1h":"Last Hour","3h":"Last 3 Hours","6h":"Last 6 Hours","12h":"Last 12 Hours","24h":"Last 24 Hours","2d":"Last 2 Days","7d":"Last Week","30d":"Last Month","90d":"Last 3 Months","365d":"Last Year"},"normalize_values":"Normalize values to same scale","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","chart_height":"Chart Height","reset_345":"Reset to default (345px)","chart_width":"Chart Width (%)","reset_100":"Reset to default (100%)","agg":{"count":"Count","delta":"Change","first":"First Value","last":"Last Value","max":"Maximum","mean":"Average","median":"Median","min":"Minimum","sum":"Sum"},"display":{"add_slice_gap":"Add Slice Gap","background_color":"Kolor tła","chart_alignment":"Chart Alignment","chart_alignment_desc":"Alignment of the chart within its container.","chart_height":"Chart Height","chart_options":"Chart Options","chart_title":"Chart Title","chart_title_placeholder":"Enter chart title","chart_width":"Chart Width (%)","chart_width_desc":"Percentage of the module\'s available width. Alignment controls placement.","info_position":"Info Position","info_position_desc":"Position of the overlay showing name/value.","legend_position":"Legend Position","legend_position_desc":"Where to place the legend when enabled.","normalize_desc":"Useful when comparing entities with different units (e.g., % vs miles)","normalize_values":"Normalize values to same scale","show_grid":"Show Grid","show_legend":"Show Legend","show_title":"Show Graph Title","show_tooltips":"Show Tooltips","show_value":"Show Graph Value","smooth_lines":"Smooth Lines","time_period":"Time Period","time_period_desc":"How much historical data to show.","title":"Display Options","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Fill Area","line_style":"Line Style","line_width":"Line Width","show_points":"Show Points"},"line_styles":{"dashed":"Dashed","dotted":"Dotted","solid":"Solid"},"pie":{"show_title":"Show Title in Slice","show_value":"Show Value in Slice"},"position":{"bottom":"Dół","bottom_left":"Bottom Left","bottom_right":"Bottom Right","center":"Środek","hidden":"Hidden","left":"Lewo","middle":"Środek","right":"Prawo","top":"Góra","top_left":"Top Left","top_right":"Top Right"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Basic Settings","desc":"Configure the button appearance and text content."},"text":{"title":"Button Text","desc":"Text to display on the button (leave blank for icon-only)."},"style":{"title":"Button Style","desc":"Visual style of the button"},"alignment":{"title":"Alignment","desc":"How the button is aligned within its container"},"styles":{"flat":"Płaski (domyślny)","glossy":"Błyszczący","embossed":"Wytłoczony","inset":"Wgłębiony","gradient_overlay":"Nakładka gradientu","neon_glow":"Neonowy blask","outline":"Kontur","glass":"Szkło","metallic":"Metaliczny"},"align":{"left":"Lewo","center":"Środek","right":"Prawo","justify":"Justify (Full Width)"},"icon":{"title":"Icon Settings","desc":"Configure icon display and positioning for the button.","before":"Przed tekstem","after":"Po tekście","enable_toggle_desc":"Enable the toggle above to configure icon settings"},"colors":{"title":"Kolory","background":"Kolor tła","text":"Text Color"},"hover":{"effect_type":"Effect Type","effect_type_desc":"Choose the hover effect for this button.","none":"Brak","color":"Color Change","scale":"Skala","glow":"Blask","lift":"Lift (translate Y)","hover_color":"Hover Color","glow_color":"Glow Color","title":"Hover Effects","enable_toggle_desc":"Enable the toggle above to configure hover effects"},"actions":{"type":"Action Type","type_desc":"Choose what happens when the button is clicked","entity":"Encja","entity_desc":"Select the entity to interact with","navigation_path":"Navigation Path","navigation_path_desc":"Path to navigate to (e.g., /dashboard/energy)","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data (JSON)","service_data_desc":"Optional data to pass to the service (JSON format)"},"tap":{"title":"Akcja dotknięcia","desc":"Action to perform when button is tapped"},"hold":{"title":"Akcja przytrzymania","desc":"Action to perform when button is held down"},"double":{"title":"Akcja podwójnego dotknięcia","desc":"Action to perform when button is double-tapped"},"show_icon":"Show Icon","show_icon_desc":"Display an icon on the button","icon_desc":"Icon to display (e.g., mdi:home)","icon_position":"Pozycja ikony","icon_position_desc":"Position of the icon relative to text","icon_field":"Ikona"},"info":{"entity_section":{"title":"KONFIGURACJA ENCJI"},"entity":"Encja","entity_desc":"Select the entity to display","icon_section":{"title":"Icon Settings"},"show_icon":"Show Icon","show_icon_desc":"Display an icon next to the entity value","icon":"Ikona","icon_desc":"Choose an icon to display","icon_color":"Icon Color","name_section":{"title":"Name Settings"},"show_name":"Show Name","show_name_desc":"Display the entity name above the value","custom_name":"Custom Name","custom_name_desc":"Override the entity name with a custom name","name_color":"Name Color","state_section":{"title":"State Settings"},"show_state":"Show State","show_state_desc":"Display the entity state/value","show_units":"Show Units","show_units_desc":"Display the unit of measurement (if available)","state_color":"State Color","template":{"title":"Tryb szablonu","desc":"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.","mode":"Tryb szablonu","mode_desc":"Use Home Assistant templating syntax to format the value","value":"Szablon wartości","value_desc":"Template to format the entity value using Jinja2 syntax"},"size_section":{"title":"Size Settings"},"icon_size":"Icon Size","icon_size_desc":"Size of the icon in pixels","name_size":"Name Size","name_size_desc":"Size of the entity name text in pixels","value_size":"Value Size","value_size_desc":"Size of the entity value text in pixels","icon_gap":"Icon Gap","icon_gap_desc":"Space between the icon and content in pixels","layout_section":{"title":"Layout & Positioning"},"icon_position":"Pozycja ikony","overall_alignment":"Overall Alignment","icon_alignment":"Icon Alignment","content_alignment":"Content Alignment","examples_title":"Typowe przykłady:","example_basic":"Podstawowa wartość","example_units":"With units","example_round":"Round to 1 decimal"},"camera":{"config":{"title":"Camera Configuration","desc":"Configure the camera entity and display settings."},"entity":"Camera Entity","entity_desc":"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant.","name":"Camera Name","name_desc":"Custom name for the camera. Leave empty to use entity name.","show_name":"Show Camera Name","show_name_desc":"Display the camera name on the feed","name_position":{"group_title":"Camera Name Position","title":"Name Position","desc":"Choose where the camera name appears as an overlay on the camera image.","options":{"top_left":"Top Left","top_right":"Top Right","center":"Środek","bottom_left":"Bottom Left","bottom_right":"Bottom Right"}},"display":{"title":"Display Settings"},"live_view":{"title":"Live View","desc":"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."},"auto_refresh":{"section_title":"Auto Refresh Settings","title":"Auto Refresh","desc":"Automatically refresh the camera image at regular intervals"},"refresh_interval":{"title":"Refresh Interval (seconds)","desc":"How often to refresh the camera image automatically."},"dimensions":{"title":"Dimensions"},"width":"Width (px)","width_desc":"Set the width of the camera display. Range: 100-1000px","height":"Height (px)","height_desc":"Set the height of the camera display. Range: 100-1000px","link_aspect":"Link aspect ratio","unlink_aspect":"Unlink aspect ratio","aspect_linked":{"title":"Aspect Ratio Linked","desc":"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions."},"aspect_independent":{"title":"Independent Dimensions","desc":"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio."},"crop":{"title":"Crop & Position","desc":"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.","left_title":"Left Crop (%)","left_desc":"Crop from the left edge. Higher values show less of the left side.","right_title":"Right Crop (%)","right_desc":"Crop from the right edge. Higher values show less of the right side.","top_title":"Top Crop (%)","top_desc":"Crop from the top edge. Higher values show less of the top area.","bottom_title":"Bottom Crop (%)","bottom_desc":"Crop from the bottom edge. Higher values show less of the bottom area.","active_applied":"Active Crops Applied","reset_all":"Reset All Crops"},"template":{"title":"Tryb szablonu","desc":"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.","mode_label":"Tryb szablonu","mode_desc":"Use Home Assistant templating syntax to dynamically select camera entity","camera_template_label":"Camera Template","camera_template_desc":"Template to dynamically set the camera entity using Jinja2 syntax","examples_title":"Typowe przykłady:","example1_desc":"Show camera when weather is sunny","example2_desc":"Switch between cameras based on input boolean","example3_desc":"Use input select to choose camera entity"},"show_name_toggle":{"enable_toggle_desc":"Enable the toggle above to configure camera name display"}},"separator":{"config":{"title":"Separator Configuration"},"style":{"title":"Separator Style","desc":"Choose the visual style of the separator line."},"options":{"solid":"Solid Line","double":"Double Line","dotted":"Dotted Line","double_dotted":"Double Dotted","shadow":"Shadow","blank":"Blank Space"},"appearance":{"title":"Wygląd"},"thickness":"Thickness (px)","thickness_desc":"Thickness of the separator line.","width":"Width (%)","width_desc":"Width of the separator as percentage of container.","color":{"title":"Color","desc":"Color of the separator line."},"show_title":"Show Title","show_title_desc":"Add text in the middle of the separator line (e.g., ------ Text ------)","text_content":{"title":"Zawartość tekstowa","desc":"Text to display in the middle of the separator."},"font_size":"Font Size","font_size_desc":"Size of the text in pixels.","text_color":{"title":"Text Color","desc":"Color of the separator text."},"text_format":{"title":"Text Formatting","desc":"Apply formatting styles to the separator text.","bold":"Bold","italic":"Italic","underline":"Underline","uppercase":"Uppercase","strikethrough":"Strikethrough"},"spacer":{"title":"Spacer Height"},"height":"Height (px)","height_desc":"Controls the visual gap for Blank Space.","show_title_toggle":{"enable_toggle_desc":"Enable the toggle above to configure title settings"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Nazwa modułu:","module_name_placeholder":"Nadaj temu modułowi niestandardową nazwę, aby łatwiej go identyfikować w edytorze.","module_name_help":"Nadaj temu modułowi niestandardową nazwę, aby łatwiej go identyfikować w edytorze."},"layout_logic":{"display_title":"Wyświetl ten element","display_desc":"Control when this element is shown. Choose \\"Always\\" to keep it visible. Select \\"If EVERY condition below is met\\" or \\"If ANY condition below is met\\" to display it only when the conditions you add below evaluate to true.","always":"Zawsze","every":"If EVERY condition below is met","any":"If ANY condition below is met","conditions":"Warunki","add_condition":"Dodaj warunek","no_conditions":"No conditions added yet. Click \\"Add Condition\\" to get started.","condition_types":{"entity_state":"Entity State","entity_attribute":"Atrybut encji","time":"Time Range","template":"Szablon"},"condition_fields":{"entity":"Encja","operator":"Operator","value":"Value","attribute":"Atrybut","time_from":"From","time_to":"To","template":"Szablon"},"condition_header":"Condition","custom_name":"Custom Name","custom_name_desc":"Optional: Give this condition a custom name for easier identification","condition_type":"Condition Type"},"hover_effects":{"title":"Efekty hover","description":"Skonfiguruj efekty wizualne, które pojawiają się po najechaniu kursorem na ten moduł, wiersz lub kolumnę.","effect":"Efekt hover","effect_desc":"Wybierz efekt wizualny do zastosowania podczas najechania kursorem","effects":{"none":"Brak","highlight":"Podświetlenie","outline":"Kontur","grow":"Powiększenie","shrink":"Zmniejszenie","pulse":"Pulsowanie","bounce":"Odbicie","float":"Unoszenie","glow":"Świecenie","shadow":"Cień","rotate":"Obrót","skew":"Pochylenie","wobble":"Chwianie","buzz":"Wibracja","fade":"Zanikanie"}},"design":{"copy":"Copy","paste":"Paste","reset_all":"Reset All","copy_tooltip":"Copy current design settings (works across all Ultra Cards)","paste_tooltip_has":"Paste copied design settings (from cross-card clipboard)","paste_tooltip_none":"No design settings in cross-card clipboard","reset_all_tooltip":"Reset all design settings to default","text_section":"Tekst","text_color":"Text Color","alignment":"Alignment","inherit_alignment":"Inherit (no alignment)","font_size":"Font Size","font_size_placeholder":"16px (default), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Reset font size to default","line_height":"Line Height","line_height_placeholder":"0 (default), 28px, 1.7","reset_line_height":"Reset line height to default","letter_spacing":"Letter Spacing","letter_spacing_placeholder":"auto (default), 1px, -0.04em","reset_letter_spacing":"Reset letter spacing to default","font":"Font","font_weight":"Font Weight","text_transform":"Text Transform","font_style":"Font Style","default_option":"– Default –","weight_thin":"100 - Thin","weight_light":"300 - Light","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Semi Bold","weight_bold":"700 - Bold","weight_black":"900 - Black","transform_none":"Brak","transform_uppercase":"UPPERCASE","transform_lowercase":"lowercase","transform_capitalize":"Capitalize","style_normal":"Normal","style_italic":"Italic","style_oblique":"Oblique","background_section":"Tło","background_color":"Kolor tła","background_image_type":"Background Image Type","bg_none":"Brak","bg_upload":"Upload Image","bg_entity":"Entity Image","bg_url":"Image URL","sizes_section":"Sizes","spacing_section":"Odstępy","border_section":"Border","text_shadow_section":"Text Shadow","box_shadow_section":"Box Shadow","position_section":"Position","overflow_section":"Overflow","animations_section":"Animations","width":"Szerokość","height":"Wysokość","max_width":"Max Width","max_height":"Max Height","min_width":"Min Width","min_height":"Min Height","border_radius":"Promień obramowania","border_style":"Border Style","border_width":"Border Width","border_color":"Kolor obramowania","margin":"Margin","padding":"Padding","top":"Góra","right":"Prawo","bottom":"Dół","left":"Lewo","unlock_sides":"Unlock to edit sides independently","lock_sides":"Lock to edit all sides together","horizontal_shift":"Horizontal Shift","vertical_shift":"Vertical Shift","blur":"Blur","text_shadow_color":"Text Shadow Color","box_shadow_color":"Box Shadow Color","overflow":"Overflow","clip_path":"Clip-path","upload_bg_image":"Upload Background Image","bg_image_entity":"Background Image Entity","bg_image_url":"Background Image URL","choose_file":"Choose File","no_file_chosen":"No file chosen","backdrop_filter":"Backdrop Filter","spread":"Spread","visible_default":"Visible (Default)","examples":"Examples","state_based_animation":"State-based Animation","animation_type":"Typ animacji","animation_duration":"Animation Duration","animation_duration_desc":"Duration for the animation (e.g., 2s, 500ms, 1.5s)","intro_outro_animations":"Intro & Outro Animations","intro_animation":"Intro Animation","outro_animation":"Outro Animation","duration":"Duration","delay":"Delay","timing":"Timing","none":"Brak","ease":"Ease","border_style_none":"Brak","border_style_solid":"Solid","border_style_dashed":"Dashed","border_style_dotted":"Dotted","border_style_double":"Double","position_default":"– Default –","position_static":"Static","position_relative":"Relative","position_absolute":"Absolute","position_fixed":"Fixed","position_sticky":"Sticky","background_filter":"Background Filter"},"modules":{"text":"Moduł tekstu","image":"Moduł obrazu","icon":"Moduł ikony","bar":"Moduł paska","info":"Info Module","button":"Moduł przycisku","separator":"Separator Module","markdown":"Markdown Module","camera":"Moduł kamery","graphs":"Graphs Module","no_text_configured":"No text configured","no_image_configured":"No image configured","uploaded_image":"Uploaded image","icons_configured":"{count} icons configured","no_icons_configured":"No icons configured","default_entity_suggestion":"Entity: sensor.battery_level","sample_text":"Sample Text","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Atrybut","attribute_name":"Nazwa atrybutu","baseline":"Linia bazowa","bottom":"Dół","center":"Środek","entity":"Encja","justify":"Wyjustuj","left":"Lewo","none":"Brak","right":"Prawo","space_around":"Przestrzeń wokół","space_between":"Przestrzeń między","state":"Stan","stretch":"Rozciągnij","top":"Góra"},"horizontal":{"alignment":{"horizontal":"Wyrównanie poziome","horizontal_desc":"Choose how elements are aligned horizontally within the container.","vertical":"Wyrównanie pionowe","vertical_desc":"Choose how elements are aligned vertically within the container."},"empty":{"add_modules":"Add modules in the layout builder to see them here","no_modules":"No modules added yet"},"gap":{"between_items":"Gap Between Items","desc":"Set the spacing between horizontal elements (in rem units). Use negative values to overlap elements.","title":"Gap Configuration"},"layout":{"desc":"Configure how elements are arranged horizontally within the container.","title":"Layout Configuration"},"wrapping":{"desc":"Allow elements to wrap to the next line when they exceed the container width.","title":"Allow Wrapping"}},"markdown":{"code_highlighting":"Code Highlighting","code_highlighting_desc":"Syntax highlighting for code blocks","content":{"desc":"Enter your markdown content with full formatting support","label":"Content","title":"Markdown Content"},"enable_html":"Enable HTML","enable_html_desc":"Allow HTML tags in markdown content","enable_tables":"Enable Tables","enable_tables_desc":"Support for markdown table syntax","features":{"title":"Markdown Features"}},"vertical":{"alignment":{"vertical":"Wyrównanie pionowe","vertical_desc":"Choose how elements are aligned vertically within the container."},"empty":{"add_modules":"Add modules in the layout builder to see them here","no_modules":"No modules added yet"},"gap":{"between_items":"Gap Between Items","desc":"Set the spacing between vertical elements (in rem units). Use negative values to overlap elements.","title":"Gap Configuration"},"layout":{"desc":"Configure how elements are arranged vertically within the container.","title":"Layout Configuration"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}');var $=i.t(C,2);const T=JSON.parse('{"editor":{"tabs":{"layout":"Layoutbyggare","settings":"Inställningar","about":"Om","pro":"Pro"},"settings":{"title":"Kortinställningar","description":"Konfigurera global kortutseende och beteende."},"appearance":{"title":"Utseende","description":"Kontrollera det visuella utseendet på ditt kort"},"spacing":{"title":"Avstånd","description":"Kontrollera avståndet och positioneringen av ditt kort"},"fields":{"card_background_color":"Kortbakgrundsfärg","card_background_color_desc":"Bakgrundsfärgen för hela kortet","border_radius":"Kantradius","border_radius_desc":"Rundade hörn för kortet (i pixlar)","card_padding":"Kortutfyllnad","card_padding_desc":"Internt avstånd inom kortet","card_margin":"Kortmarginal","card_margin_desc":"Externt avstånd runt kortet","unit_px":"px","reset_default":"Återställ till standard","reset_default_value":"Återställ till standard ({value})","card_border_color":"Border Color","card_border_color_desc":"The border color of the card","card_border_width":"Border Width","card_border_width_desc":"The thickness of the card border (in pixels)","card_shadow_enabled":"Enable Shadow","card_shadow_enabled_desc":"Enable custom shadow for the card","card_shadow_color":"Shadow Color","card_shadow_color_desc":"The color of the card shadow","card_shadow_horizontal":"Horizontal Offset","card_shadow_horizontal_desc":"Horizontal position of the shadow (negative = left, positive = right)","card_shadow_vertical":"Vertical Offset","card_shadow_vertical_desc":"Vertical position of the shadow (negative = up, positive = down)","card_shadow_blur":"Blur Radius","card_shadow_blur_desc":"How blurred the shadow appears","card_shadow_spread":"Spread Radius","card_shadow_spread_desc":"How much the shadow expands or contracts"},"tooltips":{"enter_fullscreen":"Gå till helskärm","return_dashboard":"Återgå till instrumentpanel","dashboard":"Instrumentpanel"},"layout":{"live_preview":"Live förhandsvisning","toggle_preview":"Växla förhandsvisning","drag_to_move_module":"Dra för att flytta modul","edit_module":"Redigera modul","duplicate_module":"Duplicera modul","delete_module":"Ta bort modul","drag_to_move_layout":"Dra för att flytta layoutmodul","horizontal_layout":"Horisontell layout","vertical_layout":"Vertikal layout","add_module_to_layout":"Lägg till modul i layout","layout_settings":"Layoutinställningar","duplicate_layout":"Duplicera layout","delete_layout":"Ta bort layout","click_to_add_module":"Klicka för att lägga till en modul","drop_modules_here":"Släpp moduler här","drag_to_reorder":"Dra för att ändra ordning","edit_child_module":"Redigera undermodul","duplicate_child_module":"Duplicera undermodul","delete_child_module":"Ta bort undermodul","module_settings_title":"Modulinställningar","general_tab":"Allmänt","actions_tab":"Åtgärder","other_tab":"Annat","logic_tab":"Logik","design_tab":"Design","drag_to_resize":"Dra för att ändra storlek","hidden_by_logic":"Dold av logik","child_module_settings_title":"Undermodulinställningar","add_row":"Lägg till rad","add_row_tooltip":"Lägg till en ny rad till din layout","row_settings":"Radinställningar","column_settings":"Kolumninställningar","row_background_color":"Radbakgrundsfärg","column_gap":"Kolumnavstånd (px)","vertical_alignment":"Vertikal justering","horizontal_alignment":"Horisontell justering","column_preview":"Kolumnförhandsvisning","modules_count":"{count} moduler","alignment_top":"Topp","alignment_center":"Centrum","alignment_bottom":"Botten","alignment_stretch":"Sträck","alignment_left":"Vänster","alignment_right":"Höger","undo":"Undo","undo_tooltip":"Undo last change (Ctrl+Z)","redo":"Redo","redo_tooltip":"Redo last undone change (Ctrl+Y)","pin_preview":"Pin preview (keep in view)","unpin_preview":"Unpin preview (scroll with content)"},"about":{"developed_by":"Utvecklad av","desc1":"En kraftfull modulär kortbyggare för Home Assistant","desc2":"Skapa anpassade layouter med ett professionellt sidbyggargränssnitt","desc3":"Modulärt layoutsystem med villkorlig logik och professionella designverktyg","github_repo":"GitHub-förråd","version":"Version","join_discord":"Gå med i vår Discord","support_title":"Stöd Ultra Card","support_desc":"Dina generösa tips driver utvecklingen av fantastiska funktioner för detta kort! Utan stöd från användare som du skulle fortsatt innovation inte vara möjlig.","leave_tip":"LÄMNA ETT TIPS (PAYPAL)"},"actions":{"title":"Åtgärdskonfiguration","description":"Konfigurera hur denna modul svarar på användarinteraktioner. Använder Home Assistants inbyggda åtgärdssystem för konsekvent beteende över din instrumentpanel.","tap_action":"Tryckåtgärd","tap_action_desc":"Åtgärd som utförs vid tryck/klick på modulen","hold_action":"Håll-åtgärd","hold_action_desc":"Åtgärd som utförs vid nedtryckning av modulen","double_tap_action":"Dubbeltryck-åtgärd","double_tap_action_desc":"Åtgärd som utförs vid dubbeltryck på modulen","tap_behavior":"Tryckbeteende","tap_behavior_desc":"Åtgärd att utföra när elementet trycks/klickas.","hold_behavior":"Håll-beteende","hold_behavior_desc":"Åtgärd att utföra när elementet trycks och hålls.","double_tap_behavior":"Dubbeltryck-beteende","double_tap_behavior_desc":"Åtgärd att utföra när elementet dubbeltrycks/klickas.","haptic_feedback":"Haptic Feedback","haptic_feedback_desc":"Provide tactile feedback when buttons are pressed on supported devices","more_info_entity":"More Info Entity:","toggle_entity":"Toggle Entity:","more_info_config":"More Info Configuration","toggle_config":"Toggle Configuration","entity":"Entity","entity_more_info_desc":"Select which entity to show more information for","entity_toggle_desc":"Select which entity to toggle on/off"},"icon":{"entity_config":{"title":"ENTITETSKONFIGURATION","desc":"Konfigurera entiteten och aktiva/inaktiva tillstånd"},"entity":"Entitet","entity_desc":"Välj entiteten som denna ikon representerar","inactive_state":"Inaktivt tillstånd","inactive_state_desc":"Tillståndsvärde som anses \\"inaktivt\\" (lämna tomt för att använda faktiskt entitetstillstånd)","active_state":"Aktivt tillstånd","active_state_desc":"Tillståndsvärde som anses \\"aktivt\\" (lämna tomt för att använda faktiskt entitetstillstånd)","active_animation":"Aktiv animation","active_animation_desc":"Animation när ikon är aktiv","active_icon":"Aktiv ikon","active_icon_background":"Aktiv ikon bakgrund","active_icon_background_color":"Aktiv ikon bakgrundsfärg","active_icon_color":"Aktiv ikon färg","active_icon_desc":"Ikon att visa när aktiv","active_name":"Aktivt namn","active_name_color":"Aktivt namn färg","active_name_desc":"Anpassat namn när aktiv","active_state_color":"Aktiv tillståndsfärg","active_state_text":"Aktiv tillståndstext","animation_bounce":"Studsa","animation_fade":"Tona","animation_flash":"Blinka","animation_none":"Ingen","animation_pulse":"Pulsera","animation_rotate_left":"Rotera vänster","animation_rotate_right":"Rotera höger","animation_scale":"Skala","animation_section":{"desc":"Konfigurera animationer för aktiva och inaktiva tillstånd","title":"Ikonanimation"},"animation_shake":"Skaka","animation_spin":"Snurra","animation_tada":"Tada","animation_vibrate":"Vibrera","background_color_active":"Bakgrundsfärg när aktiv","background_color_inactive":"Bakgrundsfärg när inaktiv","background_section":{"desc":"Konfigurera inaktiva bakgrundsinställningar","title":"Inaktiv bakgrund"},"background_shape_active":"Bakgrundsform när aktiv","background_shape_inactive":"Bakgrundsform när inaktiv","custom_active_name":"Anpassat aktivt namn","custom_active_name_desc":"Åsidosätt entitetsnamn när aktiv (lämna tomt för att använda entitetsnamn)","custom_active_state":"Anpassat aktivt tillstånd","custom_active_state_desc":"Anpassad text när aktiv (lämna tomt för att använda faktiskt tillstånd)","custom_inactive_name":"Anpassat inaktivt namn","custom_inactive_name_desc":"Åsidosätt entitetsnamn när inaktiv (lämna tomt för att använda entitetsnamn)","custom_inactive_state":"Anpassat inaktivt tillstånd","custom_inactive_state_desc":"Anpassad text när inaktiv (lämna tomt för att använda faktiskt tillstånd)","icon_color_active":"Färg när aktiv","icon_color_inactive":"Färg när inaktiv","icon_section":{"title":"Ikonkonfiguration"},"icon_size_active":"Ikonstorlek när aktiv","icon_size_inactive":"Ikonstorlek när inaktiv","inactive_animation":"Inaktiv animation","inactive_animation_desc":"Animation när ikon är inaktiv","inactive_icon":"Inaktiv ikon","inactive_icon_background":"Inaktiv ikon bakgrund","inactive_icon_background_color":"Inaktiv ikon bakgrundsfärg","inactive_icon_color":"Inaktiv ikon färg","inactive_icon_config":"Inaktiv ikonkonfiguration","inactive_icon_config_desc":"Konfigurera inaktiva ikoninställningar","inactive_icon_desc":"Ikon att visa när inaktiv","inactive_name":"Inaktivt namn","inactive_name_color":"Inaktivt namn färg","inactive_name_config":"Inaktiv namnkonfiguration","inactive_name_config_desc":"Konfigurera inaktiva namninställningar","inactive_name_desc":"Anpassat namn när inaktiv","inactive_state_color":"Inaktiv tillståndsfärg","inactive_state_config":"Inaktiv tillståndskonfiguration","inactive_state_config_desc":"Konfigurera inaktiva tillståndsinställningar","inactive_state_text":"Inaktiv tillståndstext","name_color_active":"Namnfärg när aktiv","name_color_inactive":"Namnfärg när inaktiv","name_section":{"title":"Namnkonfiguration"},"name_size_active":"Namntextstorlek när aktiv","name_size_inactive":"Namntextstorlek när inaktiv","state_color_active":"Tillståndsfärg när aktiv","state_color_inactive":"Tillståndsfärg när inaktiv","state_section":{"title":"Tillståndskonfiguration"},"state_size_active":"Tillståndstextstorlek när aktiv","state_size_inactive":"Tillståndstextstorlek när inaktiv","template":"Mall","template_mode":"Avancerat mallläge","template_section":{"desc":"Använd Jinja2-mallar för avancerad ikonkontroll. Mallar kan kontrollera synlighet (sant/falskt för att visa/dölja ikoner) och anpassa tillståndstext. Returnera anpassad text för aktivt tillstånd, returnera faktiskt entitetstillstånd för inaktivt tillstånd.","title":"Avancerat mallläge"}},"text":{"content_section":{"title":"Innehållskonfiguration","desc":"Konfigurera textinnehållet och grundläggande inställningar för denna modul."},"text_content":"Textinnehåll","text_content_desc":"Ange textinnehållet som ska visas i denna modul.","icon_section":{"title":"Ikonkonfiguration","desc":"Välj en ikon att visa tillsammans med textinnehållet."},"icon":"Ikon","icon_desc":"Välj en ikon att visa tillsammans med texten. Lämna tom för ingen ikon.","icon_position":"Ikonposition","icon_position_desc":"Välj var ikonen ska placeras i förhållande till texten.","before_text":"Före text","after_text":"Efter text","template_mode":"Mallläge","template_mode_desc":"Använd Home Assistant mallsyntax för att rendera text","value_template":"Värdemall","value_template_desc":"Mall för att rendera texten med Jinja2-syntax","examples_title":"Vanliga exempel:","example_basic":"Grundvärde","example_percent":"Med procent","color_section":{"title":"Color Configuration","desc":"Configure the text and icon colors for this module."},"text_color":"Text Color","text_color_desc":"Choose the color for the text content.","icon_color_section":"Icon Color Settings","icon_color":"Icon Color","icon_color_desc":"Choose the color for the icon.","hidden_no_link":"Hidden (no link)"},"bar":{"bar_settings":{"title":"Stapellinställningar","desc":"Konfigurera hur stapelns procent beräknas och visas."},"perc_type":{"entity":"Entitet (0-100)","attribute":"Entitetsattribut","difference":"Skillnad","template":"Mall"},"attribute_section":{"title":"Entitetsattributkonfiguration","desc":"Konfigurera entitetsattributinställningar"},"attribute_entity":"Attributentitet","attribute_entity_desc":"Välj entiteten som innehåller attributet med procentvärdet","attribute_name":"Attributnamn","attribute_name_desc":"Ange namnet på attributet som innehåller procentvärdet (t.ex. \\"battery_level\\")","diff_section":{"title":"Skillnadsberäkningskonfiguration","desc":"Konfigurera skillnadsberäkningsinställningar"},"current_entity":"Nuvarande värdeentitet","current_entity_desc":"Entitet som representerar nuvarande/använd mängd (t.ex. använt bränsle, förbrukat batteri)","total_entity":"Total värdeentitet","total_entity_desc":"Entitet som representerar total/maximal mängd (t.ex. bränslekapacitet, batterikapacitet)","template_section":{"title":"Mallkonfiguration","desc":"Konfigurera mallinställningar"},"percentage_template":"Procentmall","percentage_template_desc":"Ange en Jinja2-mall som returnerar ett nummer mellan 0-100 för procenten. Exempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","animation":{"desc":"Animera stapelfyllningen med förinställningar som laddningsränder, puls, glöd och mer. Du kan utlösa animationer baserat på en entitets tillstånd eller attribut, och valfritt åsidosätta animationen när ett annat villkor uppfylls.","override":{"attribute_name_desc":"Attributnamn att jämföra","desc":"Välj en åtgärdsentitet och tillstånd för att definiera när denna animation ska åsidosätta den vanliga animationen","entity_desc":"Entitet att utvärdera för åsidosättningsutlösare","match_value":"Åsidosätt matchvärde","match_value_desc":"Textjämförelse mot tillstånd eller attribut","title":"Åtgärdsanimation åsidosättning","type":"Åsidosätt animationstyp","type_desc":"Animation att använda när åsidosättningsvillkor matchar."},"title":"Stapelanimation","trigger":{"attribute_name_desc":"Attributnamn att jämföra (t.ex. charging_status)","desc":"Välj en entitet att övervaka och definiera värdet + animation att tillämpa när det matchar.","entity_desc":"Entitet att utvärdera för animationsutlösare","match_value":"Matchvärde","match_value_desc":"Text att jämföra mot tillstånd eller attribut (jämförelse är textbaserad).","title":"Animationsutlösare","type":"Utlösartyp","type_desc":"Välj om entitetstillstånd eller ett attribut ska jämföras"},"type":"Animationstyp","type_desc":"Välj hur stapeln ska animeras när den utlöses.","types":{"blinking":"Blinkande","bouncing":"Studsande","bubbles":"Bubblor","charging":"Laddning (diagonala linjer)","fill":"Fyll","flicker":"Flimmer","glow":"Glöd","heartbeat":"Hjärtslag","pulse":"Pulsera","rainbow":"Regnbåge","ripple":"Krusning","shimmer":"Skimmer","traffic":"Trafik (barberarpelare)","vibrate":"Vibrera"}},"appearance":{"direction":"Fyllriktning","direction_desc":"Välj riktningen stapeln fyller i när värdet ökar.","left_to_right":"Vänster till höger","right_to_left":"Höger till vänster","alignment":"Stapeljustering","alignment_desc":"Välj hur stapeln ska justeras när den är mindre än 100% bredd.","border_radius":"Kantradius","border_radius_desc":"Kontrollera stapelns rundade hörn.","height":"Stapelhöjd","height_desc":"Justera tjockleken på förloppsstapeln i pixlar.","style":"Stapelstil","style_dashed":"Streckad","style_desc":"Välj den visuella stilen för förloppsstapeln.","style_dots":"Prickar","style_embossed":"Präglad","style_flat":"Platt (standard)","style_glass":"Glas","style_glossy":"Blank","style_gradient":"Gradientöverlägg","style_inset":"Infälld","style_metallic":"Metallisk","style_neon":"Neonglöd","style_neumorphic":"Neumorfisk","style_outline":"Kontur","title":"Stapelutseende","width":"Stapelbredd","width_desc":"Ställ in stapelbredden som procent av behållaren."},"attr_config":{"attribute_entity":"Attributentitet","attribute_entity_desc":"Välj entiteten som innehåller attributet med procentvärdet","attribute_name":"Attributnamn","attribute_name_desc":"Ange namnet på attributet som innehåller procentvärdet (t.ex. \\"battery_level\\")","desc":"Konfigurera entitetsattributinställningar","title":"Entitetsattributkonfiguration"},"colors":{"background_color":"Bakgrundsfärg","bar_color":"Stapelfärg","border_color":"Kantfärg","left_side":"Vänster sida färger","limit_indicator":"Gränsindikator","percentage_text":"Procenttext","right_side":"Höger sida färger","title":"Färger","title_color":"Titelfärg","value_color":"Värdefärg","text_color":"Textfärg","text_color_desc":"Välj färgen för texten som visas på stapeln.","dot_color":"Punktfärg"},"minimal":{"icon_enabled":"Aktivera ikon","icon_enabled_desc":"Visa en ikon på den minimala stapelindikatorn","icon":"Ikon","icon_desc":"Välj en ikon att visa (t.ex. mdi:battery)","icon_mode":"Visningsläge","icon_mode_desc":"Hur ikonen ska visas","mode_dot_only":"Endast punkt","mode_icon_only":"Endast ikon","mode_icon_in_dot":"Ikon i punkt","icon_size_auto":"Skala ikon automatiskt","icon_size_auto_desc":"Skala ikon automatiskt med stappelhöjd","icon_size":"Ikonstorlek","icon_size_desc":"Anpassad ikonstorlek i pixlar","use_dot_color":"Använd punktfärg","use_dot_color_desc":"Använd punktfärgen för ikonen (matchar gradient)","icon_color":"Ikonfärg","icon_color_desc":"Anpassad färg för ikonen","icon_config":"Minimal Style Icon","enable_toggle":"Enable the toggle above to configure icon settings"},"diff_config":{"current_entity":"Nuvarande värdeentitet","current_entity_desc":"Entitet som representerar nuvarande/använd mängd (t.ex. använt bränsle, förbrukat batteri)","desc":"Konfigurera skillnadsberäkningsinställningar","title":"Skillnadsberäkningskonfiguration","total_entity":"Total värdeentitet","total_entity_desc":"Entitet som representerar total/maximal mängd (t.ex. bränslekapacitet, batterikapacitet)"},"entity":{"desc_empty":"Välj en entitet som ger ett procentvärde (0-100). Batterisensorer är idealiska för staplar.","desc_present":"Entiteten som ger procentvärdet för stapeln.","no_entity_warning":"Ingen entitet vald - Välj en sensor med värden mellan 0-100","title":"Stapel procententitet"},"gradient":{"cropped":"Beskuren","desc":"Tillämpa en färggradient på stapelfyllningen. När aktiverad, välj hur gradienten visas och anpassa färgstopp nedan.","full":"Full","title":"Gradientläge","value_based":"Värdebaserad"},"labels":{"alignment":"Etikettjustering","alignment_desc":"Kontrollera hur vänster och höger etiketter positioneras."},"left":{"desc":"Konfigurera titeln och entitetsvärdet som visas på vänster sida av stapeln. Detta är användbart för att visa etiketter som \'Räckvidd\' eller \'Batteri\' tillsammans med deras värden.","enable_toggle":"Aktivera växeln ovan för att konfigurera vänster sida inställningar","template_desc":"Använd en mall för att formatera det visade värdet. Mallar använder Home Assistants Jinja2-syntax.","template_mode":"Mallläge","title":"Vänster sida","title_size":"Titelstorlek","value_size":"Värdestorlek","value_template":"Värdemall","value_template_desc":"Mall för att formatera vänster sida värdet med Jinja2-syntax"},"limit_entity":{"desc":"Valfritt: Lägg till en vertikal indikatorlinje på stapeln (t.ex. laddningsgräns för EV-batteri).","title":"Gränsvärdesentitet (valfritt)"},"percentage":{"desc":"Kontrollera synligheten och utseendet av procentvärden som visas direkt på stapeln. Dessa siffror ger en tydlig visuell indikator för nuvarande nivå.","text_alignment":"Procenttext justering","text_size":"Textstorlek","text_size_desc":"Justera storleken på procenttext som visas på stapeln.","title":"Procenttext visning"},"right":{"desc":"Konfigurera titeln och entitetsvärdet som visas på höger sida av stapeln. Detta är idealiskt för kompletterande information som \'Tid till full\' eller sekundära mätningar.","enable_toggle":"Aktivera växeln ovan för att konfigurera höger sida inställningar","template_desc":"Använd en mall för att formatera det visade värdet. Mallar använder Home Assistants Jinja2-syntax.","template_mode":"Mallläge","title":"Höger sida","title_size":"Titelstorlek","value_size":"Värdestorlek","value_template":"Värdemall","value_template_desc":"Mall för att formatera höger sida värdet med Jinja2-syntax"},"template_config":{"desc":"Konfigurera mallinställningar","percentage_template":"Procentmall","percentage_template_desc":"Ange en Jinja2-mall som returnerar ett nummer mellan 0-100 för procenten. Exempel: {{ (states(\'sensor.battery_level\') | float) * 100 }}","title":"Mallkonfiguration"},"text_display":{"title":"Textvisning","desc":"Kontrollera synligheten och utseendet på textvärden som visas direkt på stapeln. För skillnads- och malllägen kan du välja att visa råa entitetsvärden istället för procent.","show_value":"Visa värde istället för procent","show_value_desc":"När aktiverat visar det det faktiska entitetsvärdet istället för procent. Användbart för att visa råa sensorvärden som \\"45 kWh\\" istället för \\"75%\\".","text_size":"Textstorlek","text_size_desc":"Justera storleken på texten som visas på stapeln.","text_alignment":"Textjustering"}},"image":{"settings":"Bildinställningar","source_type":"Bildkälltyp","source_type_desc":"Välj hur du vill ange bildkällan.","source":{"default":"Standardbild","url":"Bild-URL","upload":"Ladda upp bild","entity":"Entitetsbild","attribute":"Entitetsattribut"},"url_section":{"title":"Bild-URL konfiguration"},"image_url":"Bild-URL","image_url_desc":"Ange den direkta URL:en till bilden du vill visa.","upload_section":{"title":"Uppladdning av bildkonfiguration"},"upload":"Ladda upp bild","upload_desc":"Klicka för att ladda upp en bildfil från din enhet.","entity_section":{"title":"Entitetsbildkonfiguration"},"entity":"Entitet","entity_desc":"Välj en entitet som har en bild (t.ex. person, kameraentiteter).","attribute_section":{"title":"Entitetsattributkonfiguration"},"entity_attr_desc":"Välj entiteten som innehåller bild-URL:en i ett av sina attribut.","attribute_name":"Attributnamn","attribute_name_desc":"Ange attributsökvägen som innehåller bild-URL:en (punktnotation stöds, t.ex. vehicle_data.vehicleDetails.generalDashboard).","width":"Bredd (%)","width_desc":"Ställ in bredden som en procent av behållaren.","height":"Höjd (px)","height_desc":"Ställ in höjden i pixlar.","crop_fit":"Beskär och anpassa","crop_fit_desc":"Kontrollera hur bilden passar inom sin behållare.","fit":{"cover":"Täck (beskär för att fylla)","contain":"Innehåll (anpassa hela bilden)","fill":"Fyll (sträck för att passa)","scale_down":"Skala ner","none":"Ingen (originalstorlek)"},"border_radius":"Kantradius","border_radius_desc":"Kontrollera bildens rundade hörn.","tap_actions":"Tryckåtgärder","filters":"Filter","filter":{"blur":"Oskärpa","blur_desc":"Tillämpa en oskärpeeffekt på din bild.","brightness":"Ljusstyrka (%)","brightness_desc":"Justera ljusstyrkan på din bild.","contrast":"Kontrast (%)","contrast_desc":"Ändra kontrasten på din bild.","saturation":"Mättnad (%)","saturation_desc":"Justera mättnaden på din bild."},"hover":{"title":"Hover-effekter","effect_type":"Effekttyp","effect_type_desc":"Välj typ av hover-effekt.","scale":"Skala (zooma in/ut)","rotate":"Rotera","fade":"Tona (opacitetsändring)","blur":"Oskärpa","brightness":"Ljusstyrka","glow":"Glöd (boxskugga)","slide":"Glid (översätt)","scale_amount":"Skala (%)","scale_amount_desc":"Justera skalan på bilden vid hover.","rotate_amount":"Rotation (°)","rotate_amount_desc":"Rotera bilden vid hover.","opacity":"Opacitet (%)","opacity_desc":"Ändra opaciteten på bilden vid hover.","blur_amount":"Oskärpa (px)","blur_amount_desc":"Tillämpa en oskärpeeffekt på bilden vid hover.","brightness_amount":"Ljusstyrka (%)","brightness_amount_desc":"Justera ljusstyrkan på bilden vid hover.","glow_intensity":"Glödintensitet","glow_intensity_desc":"Välj intensiteten på glödeffekten vid hover.","glow_light":"Ljus glöd","glow_medium":"Medium glöd","glow_heavy":"Kraftig glöd","glow_custom":"Anpassad skugga","translate_x":"Horisontell (px)","translate_x_desc":"Översätt bilden horisontellt vid hover.","translate_y":"Vertikal (px)","translate_y_desc":"Översätt bilden vertikalt vid hover."},"alt":"Bild","no_source":"Ingen bildkälla konfigurerad"},"graphs":{"chart_type":{"title":"Diagramtyp","type":"Typ","desc":"Välj visualiseringsstil för dina data."},"types":{"line":"Linjediagram","bar":"Stapeldiagram","pie":"Cirkeldiagram","donut":"Munkdiagram"},"data_sources":{"title":"Datakällor","add_entity":"Lägg till entitet","add_first_entity":"Lägg till din första entitet för att skapa ett diagram","no_entities":"Inga entiteter tillagda"},"entity":"Entitet","entity_desc":"Välj en entitet att plotta.","display_name_optional":"Visningsnamn (valfritt)","use_as_card_info":"Använd som kortinfo","attribute":"Attribut","attribute_desc":"Använd entitetstillstånd eller välj ett specifikt attribut att spåra.","attribute_state_default":"Tillstånd (standard)","show_points":"Visa punkter","fill_area":"Fyll område","line_style":"Linjestil","line_solid":"Heldragen","line_dashed":"Streckad","line_dotted":"Prickad","pie_show_title":"Visa titel i sektor","pie_show_value":"Visa värde i sektor","expand_options":"Expandera alternativ","no_entities":"Inga entiteter tillagda","add_first_entity":"Lägg till din första entitet för att skapa ett diagram","add_entity":"Lägg till entitet","display_options":{"title":"Visningsalternativ"},"show_title":"Visa diagramtitel","show_value":"Visa diagramvärde","chart_title":"Diagramtitel","chart_title_placeholder":"Ange diagramtitel","time_period":"Tidsperiod","time_period_desc":"Hur mycket historisk data som ska visas.","period":{"1h":"Senaste timmen","3h":"Senaste 3 timmarna","6h":"Senaste 6 timmarna","12h":"Senaste 12 timmarna","24h":"Senaste 24 timmarna","2d":"Senaste 2 dagarna","7d":"Senaste veckan","30d":"Senaste månaden","90d":"Senaste 3 månaderna","365d":"Senaste året"},"normalize_values":"Normalisera värden till samma skala","normalize_desc":"Användbart vid jämförelse av entiteter med olika enheter (t.ex. % vs mil)","chart_height":"Diagramhöjd","reset_345":"Återställ till standard (345px)","chart_width":"Diagrambredd (%)","reset_100":"Återställ till standard (100%)","agg":{"count":"Antal","delta":"Ändring","first":"Första värdet","last":"Sista värdet","max":"Maximum","mean":"Medelvärde","median":"Median","min":"Minimum","sum":"Summa"},"display":{"add_slice_gap":"Lägg till sektormellanrum","background_color":"Bakgrundsfärg","chart_alignment":"Diagramjustering","chart_alignment_desc":"Justering av diagrammet inom sin behållare.","chart_height":"Diagramhöjd","chart_options":"Diagramalternativ","chart_title":"Diagramtitel","chart_title_placeholder":"Ange diagramtitel","chart_width":"Diagrambredd (%)","chart_width_desc":"Procent av modulens tillgängliga bredd. Justering styr placering.","info_position":"Infoposition","info_position_desc":"Position för överlägg som visar namn/värde.","legend_position":"Legendposition","legend_position_desc":"Var legenden ska placeras när aktiverad.","normalize_desc":"Användbart vid jämförelse av entiteter med olika enheter (t.ex. % vs mil)","normalize_values":"Normalisera värden till samma skala","show_grid":"Visa rutnät","show_legend":"Visa legend","show_title":"Visa diagramtitel","show_tooltips":"Visa verktygstips","show_value":"Visa diagramvärde","smooth_lines":"Mjuka linjer","time_period":"Tidsperiod","time_period_desc":"Hur mycket historisk data som ska visas.","title":"Visningsalternativ","show_grid_values":"Show Grid Values"},"line":{"fill_area":"Fyll område","line_style":"Linjestil","line_width":"Linjebredd","show_points":"Visa punkter"},"line_styles":{"dashed":"Streckad","dotted":"Prickad","solid":"Heldragen"},"pie":{"show_title":"Visa titel i sektor","show_value":"Visa värde i sektor"},"position":{"bottom":"Botten","bottom_left":"Nedre vänster","bottom_right":"Nedre höger","center":"Centrum","hidden":"Dold","left":"Vänster","middle":"Centrum","right":"Höger","top":"Topp","top_left":"Övre vänster","top_right":"Övre höger"},"data_source":{"title":"Data Source","mode":"Mode","desc":"Choose between historical data or weather forecasts"},"mode":{"history":"History","forecast":"Forecast"},"forecast_entity":"Weather Entity","forecast_entity_desc":"Select a weather entity for forecasts","forecast_type":"Forecast Type","forecast_type_desc":"Choose hourly or daily forecasts","type":{"hourly":"Hourly","daily":"Daily"},"forecast":{"temp":"Temperature","precip":"Precipitation","wind":"Wind Speed","humidity":"Humidity","pressure":"Pressure","clouds":"Cloud Coverage"},"forecast_attributes":{"title":"Forecast Attributes","desc":"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph."},"forecast_info":{"title":"Forecast Display","desc":"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown."}},"button":{"basic":{"title":"Grundinställningar","desc":"Konfigurera knappens utseende och textinnehåll."},"text":{"title":"Knapptext","desc":"Text att visa på knappen (lämna tom för endast ikon)."},"style":{"title":"Knappstil","desc":"Visuell stil för knappen"},"alignment":{"title":"Justering","desc":"Hur knappen är justerad inom sin behållare"},"styles":{"flat":"Platt (standard)","glossy":"Blank","embossed":"Präglad","inset":"Infälld","gradient_overlay":"Gradientöverlägg","neon_glow":"Neonglöd","outline":"Kontur","glass":"Glas","metallic":"Metallisk"},"align":{"left":"Vänster","center":"Centrum","right":"Höger","justify":"Justera (full bredd)"},"icon":{"title":"Ikoninställningar","desc":"Konfigurera ikonvisning och positionering för knappen.","before":"Före text","after":"Efter text","enable_toggle_desc":"Aktivera växeln ovan för att konfigurera ikoninställningar"},"colors":{"title":"Färger","background":"Bakgrundsfärg","text":"Textfärg"},"hover":{"effect_type":"Effekttyp","effect_type_desc":"Välj hover-effekt för denna knapp.","none":"Ingen","color":"Färgändring","scale":"Skala","glow":"Glöd","lift":"Lyft (översätt Y)","hover_color":"Hover-färg","glow_color":"Glödfärg","title":"Hover-effekter","enable_toggle_desc":"Aktivera växeln ovan för att konfigurera hover-effekter"},"actions":{"type":"Åtgärdstyp","type_desc":"Välj vad som händer när knappen klickas","entity":"Entitet","entity_desc":"Välj entiteten att interagera med","navigation_path":"Navigeringssökväg","navigation_path_desc":"Sökväg att navigera till (t.ex. /dashboard/energy)","service":"Tjänst","service_desc":"Tjänst att anropa (t.ex. light.turn_on)","service_data":"Tjänstdata (JSON)","service_data_desc":"Valfri data att skicka till tjänsten (JSON-format)"},"tap":{"title":"Tryckåtgärd","desc":"Åtgärd att utföra när knappen trycks"},"hold":{"title":"Håll-åtgärd","desc":"Åtgärd att utföra när knappen hålls nere"},"double":{"title":"Dubbeltryck-åtgärd","desc":"Åtgärd att utföra när knappen dubbeltrycks"},"show_icon":"Visa ikon","show_icon_desc":"Visa en ikon på knappen","icon_desc":"Ikon att visa (t.ex. mdi:home)","icon_position":"Ikonposition","icon_position_desc":"Position för ikonen i förhållande till text","icon_field":"Ikon"},"info":{"entity_section":{"title":"ENTITETSKONFIGURATION"},"entity":"Entitet","entity_desc":"Välj entiteten att visa","icon_section":{"title":"Ikoninställningar"},"show_icon":"Visa ikon","show_icon_desc":"Visa en ikon bredvid entitetsvärdet","icon":"Ikon","icon_desc":"Välj en ikon att visa","icon_color":"Ikonfärg","name_section":{"title":"Namninställningar"},"show_name":"Visa namn","show_name_desc":"Visa entitetsnamnet ovanför värdet","custom_name":"Anpassat namn","custom_name_desc":"Åsidosätt entitetsnamnet med ett anpassat namn","name_color":"Namnfärg","state_section":{"title":"Tillståndsinställningar"},"show_state":"Visa tillstånd","show_state_desc":"Visa entitetstillstånd/värde","show_units":"Visa enheter","show_units_desc":"Visa måttenheten (om tillgänglig)","state_color":"Tillståndsfärg","template":{"title":"Mallläge","desc":"Använd en mall för att formatera entitetsvärdet. Mallar låter dig använda Home Assistants mallsyntax för komplex formatering.","mode":"Mallläge","mode_desc":"Använd Home Assistants mallsyntax för att formatera värdet","value":"Värdemall","value_desc":"Mall för att formatera entitetsvärdet med Jinja2-syntax"},"size_section":{"title":"Storleksinställningar"},"icon_size":"Ikonstorlek","icon_size_desc":"Storlek på ikonen i pixlar","name_size":"Namnstorlek","name_size_desc":"Storlek på entitetsnamnstexten i pixlar","value_size":"Värdestorlek","value_size_desc":"Storlek på entitetsvärdestexten i pixlar","icon_gap":"Ikonavstånd","icon_gap_desc":"Utrymme mellan ikon och innehåll i pixlar","layout_section":{"title":"Layout och positionering"},"icon_position":"Ikonposition","overall_alignment":"Övergripande justering","icon_alignment":"Ikonjustering","content_alignment":"Innehållsjustering","examples_title":"Vanliga exempel:","example_basic":"Grundvärde","example_units":"Med enheter","example_round":"Avrunda till 1 decimal"},"camera":{"config":{"title":"Kamerakonfiguration","desc":"Konfigurera kameraentiteten och visningsinställningar."},"entity":"Kameraentitet","entity_desc":"Välj kameraentiteten att visa. Detta bör vara en kamera- eller mjpeg-entitet från Home Assistant.","name":"Kameranamn","name_desc":"Anpassat namn för kameran. Lämna tomt för att använda entitetsnamn.","show_name":"Visa kameranamn","show_name_desc":"Visa kameranamnet på flödet","name_position":{"group_title":"Kameranamnposition","title":"Namnposition","desc":"Välj var kameranamnet visas som ett överlägg på kamerabilden.","options":{"top_left":"Övre vänster","top_right":"Övre höger","center":"Centrum","bottom_left":"Nedre vänster","bottom_right":"Nedre höger"}},"display":{"title":"Visningsinställningar"},"live_view":{"title":"Livevisning","desc":"Aktivera för att visa live kameraström (kräver strömintegration). När inaktiverad visas stillbildsögonblicksbilder."},"auto_refresh":{"section_title":"Automatiska uppdateringsinställningar","title":"Automatisk uppdatering","desc":"Uppdatera automatiskt kamerabilden med jämna mellanrum"},"refresh_interval":{"title":"Uppdateringsintervall (sekunder)","desc":"Hur ofta kamerabilden ska uppdateras automatiskt."},"dimensions":{"title":"Dimensioner"},"width":"Bredd (px)","width_desc":"Ställ in bredden på kameravisningen. Intervall: 100-1000px","height":"Höjd (px)","height_desc":"Ställ in höjden på kameravisningen. Intervall: 100-1000px","link_aspect":"Länka bildförhållande","unlink_aspect":"Avlänka bildförhållande","aspect_linked":{"title":"Bildförhållande länkat","desc":"Dimensioner behåller {ratio}:1 förhållande. Justering av en dimension uppdaterar automatiskt den andra för att behålla proportioner."},"aspect_independent":{"title":"Oberoende dimensioner","desc":"Bredd och höjd kan justeras oberoende. Klicka på länkknappen ovan för att behålla bildförhållande."},"crop":{"title":"Beskär och position","desc":"Justera beskärningen och positionen för kameravyn. Användbart för att fokusera på specifika områden eller ta bort oönskade kanter.","left_title":"Vänster beskärning (%)","left_desc":"Beskär från vänster kant. Högre värden visar mindre av vänster sida.","right_title":"Höger beskärning (%)","right_desc":"Beskär från höger kant. Högre värden visar mindre av höger sida.","top_title":"Övre beskärning (%)","top_desc":"Beskär från övre kant. Högre värden visar mindre av det övre området.","bottom_title":"Nedre beskärning (%)","bottom_desc":"Beskär från nedre kant. Högre värden visar mindre av det nedre området.","active_applied":"Aktiva beskärningar tillämpade","reset_all":"Återställ alla beskärningar"},"template":{"title":"Mallläge","desc":"Använd en mall för att dynamiskt ställa in kameraentiteten. Mallar låter dig använda Home Assistants mallsyntax för villkorlig kameraval.","mode_label":"Mallläge","mode_desc":"Använd Home Assistants mallsyntax för att dynamiskt välja kameraentitet","camera_template_label":"Kameramall","camera_template_desc":"Mall för att dynamiskt ställa in kameraentiteten med Jinja2-syntax","examples_title":"Vanliga exempel:","example1_desc":"Visa kamera när vädret är soligt","example2_desc":"Växla mellan kameror baserat på input boolean","example3_desc":"Använd input select för att välja kameraentitet"},"show_name_toggle":{"enable_toggle_desc":"Aktivera växeln ovan för att konfigurera kamerananvisning"}},"separator":{"config":{"title":"Separatorkonfiguration"},"style":{"title":"Separatorstil","desc":"Välj den visuella stilen för separatorlinjen."},"options":{"solid":"Heldragen linje","double":"Dubbel linje","dotted":"Prickad linje","double_dotted":"Dubbel prickad","shadow":"Skugga","blank":"Tomt utrymme"},"appearance":{"title":"Utseende"},"thickness":"Tjocklek (px)","thickness_desc":"Tjocklek på separatorlinjen.","width":"Bredd (%)","width_desc":"Bredd på separatorn som procent av behållaren.","color":{"title":"Färg","desc":"Färg på separatorlinjen."},"show_title":"Visa titel","show_title_desc":"Lägg till text i mitten av separatorlinjen (t.ex. ------ Text ------)","text_content":{"title":"Textinnehåll","desc":"Text att visa i mitten av separatorn."},"font_size":"Teckenstorlek","font_size_desc":"Storlek på texten i pixlar.","text_color":{"title":"Textfärg","desc":"Färg på separatortexten."},"text_format":{"title":"Textformatering","desc":"Tillämpa formateringsstilar på separatortexten.","bold":"Fet","italic":"Kursiv","underline":"Understruken","uppercase":"Versaler","strikethrough":"Genomstruken"},"spacer":{"title":"Avståndshöjd"},"height":"Höjd (px)","height_desc":"Kontrollerar det visuella gapet för tomt utrymme.","show_title_toggle":{"enable_toggle_desc":"Aktivera växeln ovan för att konfigurera titelinställningar"},"orientation":{"title":"Orientation","desc":"Choose whether the separator runs horizontally or vertically.","horizontal":"Horizontal","vertical":"Vertical"}},"layout_extra":{"module_name":"Modulnamn:","module_name_placeholder":"Ge denna modul ett anpassat namn för att göra det lättare att identifiera i redigeraren.","module_name_help":"Ge denna modul ett anpassat namn för att göra det lättare att identifiera i redigeraren."},"layout_logic":{"display_title":"Visa detta element","display_desc":"Kontrollera när detta element visas. Välj \\"Alltid\\" för att hålla det synligt. Välj \\"Om ALLA villkor nedan uppfylls\\" eller \\"Om NÅGOT villkor nedan uppfylls\\" för att visa det endast när villkoren du lägger till nedan utvärderas som sanna.","always":"Alltid","every":"Om ALLA villkor nedan uppfylls","any":"Om NÅGOT villkor nedan uppfylls","conditions":"Villkor","add_condition":"Lägg till villkor","no_conditions":"Inga villkor tillagda än. Klicka \\"Lägg till villkor\\" för att komma igång.","condition_types":{"entity_state":"Entitetstillstånd","entity_attribute":"Entitetsattribut","time":"Tidsintervall","template":"Mall"},"condition_fields":{"entity":"Entitet","operator":"Operator","value":"Värde","attribute":"Attribut","time_from":"Från","time_to":"Till","template":"Mall"},"condition_header":"Villkor","custom_name":"Anpassat namn","custom_name_desc":"Valfritt: Ge detta villkor ett anpassat namn för enklare identifiering","condition_type":"Villkorstyp"},"hover_effects":{"title":"Hover-effekter","description":"Konfigurera visuella effekter som visas när du hovrar över denna modul, rad eller kolumn.","effect":"Hover-effekt","effect_desc":"Välj den visuella effekten som ska tillämpas vid hovring","effects":{"none":"Ingen","highlight":"Markera","outline":"Kontur","grow":"Växa","shrink":"Krympa","pulse":"Pulsera","bounce":"Studsa","float":"Sväva","glow":"Glöda","shadow":"Skugga","rotate":"Rotera","skew":"Snedställa","wobble":"Vackla","buzz":"Vibrera","fade":"Tona"}},"design":{"copy":"Kopiera","paste":"Klistra in","reset_all":"Återställ alla","copy_tooltip":"Kopiera nuvarande designinställningar (fungerar över alla Ultra Cards)","paste_tooltip_has":"Klistra in kopierade designinställningar (från korskort-urklipp)","paste_tooltip_none":"Inga designinställningar i korskort-urklipp","reset_all_tooltip":"Återställ alla designinställningar till standard","text_section":"Text","text_color":"Textfärg","alignment":"Justering","inherit_alignment":"Ärv (ingen justering)","font_size":"Teckenstorlek","font_size_placeholder":"16px (standard), 1.2rem, max(1rem, 1.5vw)","reset_font_size":"Återställ teckenstorlek till standard","line_height":"Radhöjd","line_height_placeholder":"0 (standard), 28px, 1.7","reset_line_height":"Återställ radhöjd till standard","letter_spacing":"Teckenavstånd","letter_spacing_placeholder":"auto (standard), 1px, -0.04em","reset_letter_spacing":"Återställ teckenavstånd till standard","font":"Teckensnitt","font_weight":"Teckensnittsvikt","text_transform":"Texttransform","font_style":"Teckensnittsstil","default_option":"– Standard –","weight_thin":"100 - Tunn","weight_light":"300 - Ljus","weight_normal":"400 - Normal","weight_medium":"500 - Medium","weight_semi_bold":"600 - Halvfet","weight_bold":"700 - Fet","weight_black":"900 - Svart","transform_none":"Ingen","transform_uppercase":"VERSALER","transform_lowercase":"gemener","transform_capitalize":"Versalisera","style_normal":"Normal","style_italic":"Kursiv","style_oblique":"Sned","background_section":"Bakgrund","background_color":"Bakgrundsfärg","background_image_type":"Bakgrundsbildtyp","bg_none":"Ingen","bg_upload":"Ladda upp bild","bg_entity":"Entitetsbild","bg_url":"Bild-URL","sizes_section":"Storlekar","spacing_section":"Avstånd","border_section":"Kant","text_shadow_section":"Textskugga","box_shadow_section":"Boxskugga","position_section":"Position","overflow_section":"Överflöde","animations_section":"Animationer","width":"Bredd","height":"Höjd","max_width":"Max bredd","max_height":"Max höjd","min_width":"Min bredd","min_height":"Min höjd","border_radius":"Kantradius","border_style":"Kantstil","border_width":"Kantbredd","border_color":"Kantfärg","margin":"Marginal","padding":"Utfyllnad","top":"Topp","right":"Höger","bottom":"Botten","left":"Vänster","unlock_sides":"Lås upp för att redigera sidor oberoende","lock_sides":"Lås för att redigera alla sidor tillsammans","horizontal_shift":"Horisontell förskjutning","vertical_shift":"Vertikal förskjutning","blur":"Oskärpa","text_shadow_color":"Textskuggfärg","box_shadow_color":"Boxskuggfärg","overflow":"Överflöde","clip_path":"Klippbana","upload_bg_image":"Ladda upp bakgrundsbild","bg_image_entity":"Bakgrundsbildentitet","bg_image_url":"Bakgrundsbild-URL","choose_file":"Välj fil","no_file_chosen":"Ingen fil vald","backdrop_filter":"Bakgrundsfilter","spread":"Spridning","visible_default":"Synlig (standard)","examples":"Exempel","state_based_animation":"Tillståndsbaserad animation","animation_type":"Animationstyp","animation_duration":"Animation Duration","animation_duration_desc":"Varaktighet för animationen (t.ex. 2s, 500ms, 1.5s)","intro_outro_animations":"Intro- och outro-animationer","intro_animation":"Intro-animation","outro_animation":"Outro-animation","duration":"Varaktighet","delay":"Fördröjning","timing":"Timing","none":"Ingen","ease":"Ease","border_style_none":"Ingen","border_style_solid":"Heldragen","border_style_dashed":"Streckad","border_style_dotted":"Prickad","border_style_double":"Double","position_default":"– Standard –","position_static":"Statisk","position_relative":"Relativ","position_absolute":"Absolut","position_fixed":"Fast","position_sticky":"Klibbig","background_filter":"Background Filter"},"modules":{"text":"Textmodul","image":"Bildmodul","icon":"Ikonmodul","bar":"Stapelmodul","info":"Infomodul","button":"Knappmodul","separator":"Separatormodul","markdown":"Markdown-modul","camera":"Kameramodul","graphs":"Grafmodul","no_text_configured":"Ingen text konfigurerad","no_image_configured":"Ingen bild konfigurerad","uploaded_image":"Uppladdad bild","icons_configured":"{count} ikoner konfigurerade","no_icons_configured":"Inga ikoner konfigurerade","default_entity_suggestion":"Entitet: sensor.battery_level","sample_text":"Exempeltext","dropdown":"Dropdown Module","spinbox":"Spinbox Module"},"common":{"attribute":"Attribut","attribute_name":"Attributnamn","baseline":"Baslinje","bottom":"Botten","center":"Centrum","entity":"Entitet","justify":"Justera","left":"Vänster","none":"Ingen","right":"Höger","space_around":"Utrymme runt","space_between":"Utrymme mellan","state":"Tillstånd","stretch":"Sträck","top":"Topp"},"horizontal":{"alignment":{"horizontal":"Horisontell justering","horizontal_desc":"Välj hur element justeras horisontellt inom behållaren.","vertical":"Vertikal justering","vertical_desc":"Välj hur element justeras vertikalt inom behållaren."},"empty":{"add_modules":"Lägg till moduler i layoutbyggaren för att se dem här","no_modules":"Inga moduler tillagda än"},"gap":{"between_items":"Mellanrum mellan objekt","desc":"Ställ in avståndet mellan horisontella element (i rem-enheter). Använd negativa värden för att överlappa element.","title":"Mellanrumskonfiguration"},"layout":{"desc":"Konfigurera hur element arrangeras horisontellt inom behållaren.","title":"Layoutkonfiguration"},"wrapping":{"desc":"Tillåt element att brytas till nästa rad när de överskrider behållarbredden.","title":"Tillåt radbrytning"}},"markdown":{"code_highlighting":"Kodmarkering","code_highlighting_desc":"Syntaxmarkering för kodblock","content":{"desc":"Ange ditt markdown-innehåll med fullständigt formateringsstöd","label":"Innehåll","title":"Markdown-innehåll"},"enable_html":"Aktivera HTML","enable_html_desc":"Tillåt HTML-taggar i markdown-innehåll","enable_tables":"Aktivera tabeller","enable_tables_desc":"Stöd för markdown-tabellsyntax","features":{"title":"Markdown-funktioner"}},"vertical":{"alignment":{"vertical":"Vertikal justering","vertical_desc":"Välj hur element justeras vertikalt inom behållaren."},"empty":{"add_modules":"Lägg till moduler i layoutbyggaren för att se dem här","no_modules":"Inga moduler tillagda än"},"gap":{"between_items":"Mellanrum mellan objekt","desc":"Ställ in avståndet mellan vertikala element (i rem-enheter). Använd negativa värden för att överlappa element.","title":"Mellanrumskonfiguration"},"layout":{"desc":"Konfigurera hur element arrangeras vertikalt inom behållaren.","title":"Layoutkonfiguration"}},"dropdown":{"basic":{"title":"Basic Settings","desc":"Configure the dropdown appearance and behavior."},"label":{"title":"Label","desc":"Text label for the dropdown (optional)."},"placeholder":{"title":"Placeholder","desc":"Text shown when no option is selected."},"allow_empty":{"title":"Allow Empty Selection","desc":"Allow users to deselect all options."},"default_value":{"title":"Default Value","desc":"Option value to select by default (leave empty for none)."},"label_settings":{"title":"Label Settings","disabled":"Enable the toggle above to configure label settings"},"label_position":{"title":"Label Position","desc":"Where to position the label relative to the dropdown"},"label_positions":{"top":"Above Dropdown","left":"Left of Dropdown","inside":"Inside Dropdown","bottom":"Below Dropdown","right":"Right of Dropdown"},"icon_settings":{"title":"Icon Settings","disabled":"Enable the toggle above to configure icon settings"},"icon":{"title":"Icon","desc":"Icon to display (e.g., mdi:menu-down)"},"options":{"title":"Dropdown Options"},"option_number":"Option {number}","duplicate_option":"Duplicate option","remove_option":"Remove option","add_option":"Add Option","option":{"label":"Label","label_desc":"Display text for this option","value":"Value","value_desc":"Internal value for this option","icon":"Icon","icon_desc":"Optional icon for this option (e.g., mdi:lightbulb)","action_type":"Action Type","action_type_desc":"What happens when this option is selected","service":"Service","service_desc":"Service to call (e.g., light.turn_on)","service_data":"Service Data","service_data_desc":"Optional data to pass to the service (JSON format)","entity":"Entity","entity_desc":"Entity to interact with","entity_action":"Entity Action","entity_action_desc":"Action to perform on the entity","scene_entity":"Scene","scene_entity_desc":"Scene to activate","script_entity":"Script","script_entity_desc":"Script to run","automation_entity":"Automation","automation_entity_desc":"Automation to trigger","custom_service":"Custom Service","custom_service_desc":"Custom service to call","custom_service_data":"Custom Service Data","custom_service_data_desc":"Data to pass to the custom service (JSON format)","disabled":"Disabled","disabled_desc":"Disable this option (greyed out, not selectable)","action":"Action","action_desc":"What happens when this option is selected","is_default":"Default Option","is_default_desc":"Make this the default selected option (shows at top, disables placeholder)","icon_color":"Icon Color","use_state_color":"Use State Color","use_state_color_desc":"Use the entity state color for the icon (overrides custom color)","state_color_enabled":"Icon will use entity state color automatically","more_info_config":"More Info Configuration","more_info_entity":"Entity","more_info_entity_desc":"Entity to show more information for","toggle_config":"Toggle Configuration","toggle_entity":"Entity","toggle_entity_desc":"Entity to toggle on/off"},"action_types":{"service":"Service Call","scene":"Activate Scene","entity":"Entity Action","script":"Run Script","automation":"Trigger Automation","custom":"Custom Service"},"entity_actions":{"toggle":"Toggle","turn_on":"Turn On","turn_off":"Turn Off","more_info":"More Info"},"styling":{"title":"Styling","desc":"Customize the visual appearance of the dropdown."},"width":{"title":"Width","desc":"Width of the dropdown (e.g., 100%, 200px, auto)"},"font_size":{"title":"Font Size","desc":"Text size in pixels"},"colors":{"title":"Colors","text":"Text Color","background":"Background Color","border":"Border Color"},"template_mode":{"title":"Template Mode","enable":"Template Mode","enable_desc":"Use Home Assistant templating syntax to dynamically set dropdown options","template":"Options Template","template_desc":"Template to generate dropdown options using Jinja2 syntax","examples":"Common Examples:","example_scenes":"Generate options from all scenes","example_lights":"Generate options from all lights","disabled":"Enable template mode to use dynamic content"},"drag_option":"Drag to reorder","default_badge":"DEFAULT","label_icon":{"title":"Label Icon","disabled":"Enable the toggle above to configure label icon"},"state_tracking":{"title":"Current State Display","disabled":"Enable to show current entity state as selected option"},"state_entity":{"title":"State Entity","desc":"Entity to monitor for current state (e.g., input_select.scene_selector)"},"track_state":{"title":"Track Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"},"keep_selection_state":{"title":"Keep Selection State","desc":"Remember and display the last selected option (recommended for scene selectors)"}},"favorite_colors":{"title":"Favorite Colors","description":"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards."},"behavior":{"title":"Behavior","description":"Configure how your card responds to user interactions"},"cloud_sync":{"title":"Cloud Sync","description":"Sync your favorites, colors, and reviews across all your devices using your ultracard.io account.","auto_sync":"Automatic Sync","auto_sync_desc":"Automatically sync changes in the background"},"spinbox":{"entity":{"title":"Entity Configuration","desc":"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."},"entity_field":"Entity","entity_field_desc":"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities.","value":"Default Value","min_value":"Minimum Value","min_value_desc":"The minimum allowed value","max_value":"Maximum Value","max_value_desc":"The maximum allowed value","step":"Step Size","step_desc":"How much the value changes with each button press","value_desc":"The initial value (only used when no entity is linked)","display":{"title":"Display Configuration"},"layout":{"horizontal":"Horizontal","vertical":"Vertical"},"layout_desc":"Arrangement of buttons and value","show_value":"Show Value","show_value_desc":"Display the current numeric value","value_position":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)"},"value_position_desc":"Where to display the value relative to buttons","show_unit":"Show Unit","show_unit_desc":"Display a unit label (e.g., °C, %)","unit":"Unit","unit_desc":"Unit to display (e.g., °C, %, km)","buttons":{"title":"Button Configuration"},"button_style":"Button Style","button_style_desc":"Visual style for buttons","increment_icon":"Increment Icon","increment_icon_desc":"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)","decrement_icon":"Decrement Icon","decrement_icon_desc":"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)","button_background_color":"Button Background","button_text_color":"Button Icon Color","value_style":{"title":"Value Display Styling"},"value_color":"Value Color","value_font_size":"Value Font Size","value_font_size_desc":"Font size for the value display (in pixels)","template":"Value Template","template_mode":"Enable Template Mode","template_mode_desc":"Use Jinja2 templates to dynamically compute the displayed value","template_desc":"Jinja2 template for value (e.g., {{ states(\\"input_number.temperature\\") }})","template_examples":"Common Examples:","template_disabled":"Enable template mode to use dynamic values","styles":{"flat":"Flat (Default)","glossy":"Glossy","embossed":"Embossed","inset":"Inset","gradient_overlay":"Gradient Overlay","neon_glow":"Neon Glow","outline":"Outline","glass":"Glass","metallic":"Metallic"},"layout_title":"Layout","layout_options":{"horizontal":"Horizontal","vertical":"Vertical"},"value_position_title":"Value Position","value_position_options":{"center":"Center (Between Buttons)","between":"Separate (Above/Below)","top":"Top (Above Both Buttons)","bottom":"Bottom (Below Both Buttons)","left":"Left (Before Buttons)","right":"Right (After Buttons)"},"button_shape":"Button Shape","button_shape_desc":"Shape of the buttons","button_size":"Button Size","button_size_desc":"Size of the buttons in pixels (width and height)","button_spacing":"Button Spacing","button_spacing_desc":"Space between buttons and value display in pixels","shapes":{"rounded":"Rounded Square (Default)","square":"Square","circle":"Circle"},"button_gap":"Button Gap","button_gap_desc":"Space between increment and decrement buttons in pixels"},"cloud_backup":{"title":"Cloud Backup","description":"Automatically backup your card configuration to the cloud. Never lose your work again!","auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","create_snapshot":"Create Snapshot","manage_backups":"View Backup History","upgrade_pro":"Upgrade to Pro","snapshot_limit":"{current} / {max} snapshots","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"ultra_card_pro":{"title":"Ultra Card Pro","free_banner_title":"Ultra Card Pro","free_banner_subtitle":"Professional card management and cloud backups","pro_banner_title":"Ultra Card Pro","pro_banner_subtitle":"Thank you for being a Pro member!","card_name":"Card Name","card_name_desc":"Give this card a name to identify it in your backups","card_name_placeholder":"My Ultra Card","export_card":"Export Card","import_card":"Import Card","backup_card":"Create Backup","view_backups":"View All Backups","manual_backup_title":"Name Your Backup","manual_backup_placeholder":"Enter backup name...","manual_backup_desc":"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)","backup_created":"Backup created successfully!","export_success":"Card configuration exported!","import_success":"Card configuration imported!","upgrade_title":"Unlock Pro Features","upgrade_subtitle":"Get export, import, and manual backups for all your cards","upgrade_button":"Upgrade to Pro - $4.99/month","features_title":"What You Get","features":{"export":"Export full card configs","import":"Import card configs","backups":"30 manual backups across all cards","naming":"Name your cards and backups","support":"Priority support"},"auto_save":"Auto-save enabled","last_backup":"Last backup: {time}","saving":"Saving backup...","saved":"Saved to cloud","pending":"Changes pending","sync_notification":{"title":"Newer Backup Available","description":"A newer backup was found from another device","load":"Load Newer Version","dismiss":"Keep Current"}},"external_card":{"title":"3rd Party Card","description":"Embed any custom Home Assistant card into Ultra Card. The card will have full Logic and Design support.","select_card":"Select Card Type","select_card_desc":"Choose which custom card to embed. Only cards installed in your Home Assistant are shown.","no_selection":"-- Select a Card --","no_cards":"No Custom Cards Detected","no_cards_desc":"Install custom cards via HACS or manually to use this feature.","card_not_found":"Card not found","configure":"Card Configuration","configure_desc":"Configure the card using its native editor.","yaml_mode":"YAML Configuration","yaml_help":"Enter card configuration in JSON format. Refer to the card\'s documentation for available options.","preview":"Card Preview","invalid_config":"Invalid card configuration","note":"Note: Actions are not supported for 3rd party cards. Use the card\'s native tap/hold/double-tap actions in its configuration.","no_card_selected":"No card selected","select_card_prompt":"Select a 3rd party card to display","available_cards":"Available 3rd Party Cards","category_desc":"Embed any custom Home Assistant card into Ultra Card with full Logic and Design support","upgrade_required":"Upgrade to Pro to embed 3rd party cards","login_required":"Login with Pro account to embed 3rd party cards"}}}'),z={en:n,cs:r,da:l,de:c,"en-GB":u,es:g,fr:f,it:v,nb:y,nl:k,nn:S,no:A,pl:$,sv:i.t(T,2)},P="en";function E(e,t){try{const i=z[t];if(!i)return;return e.split(".").reduce(((e,t)=>null==e?void 0:e[t]),i)}catch(e){return}}function I(e,t,i){let o=E(e,t);if(o)return o;const n=t.includes("-")||t.includes("_")?t.split(/[-_]/)[0]:t;if(n&&n!==t&&(o=E(e,n),o))return o;if(n!==P){const t=E(e,P);if(t)return t}return i||e}},794:(e,t,i)=>{i.d(t,{m:()=>l});var o=i(5183),n=i(866),a=i(8914),r=(i(6768),i(3856),i(9662)),s=i(2371);class l extends n.m{constructor(){super(...arguments),this.metadata={type:"gauge",title:"Gauge",description:"Display sensor values as customizable gauges with various styles and pointer options",author:"WJD Designs",version:"1.0.0",icon:"mdi:gauge",category:"content",tags:["gauge","sensor","value","indicator","speedometer","meter"]}}createDefault(e,t){const i=this.findSuitableSensor(t);return{id:e||this.generateId("gauge"),type:"gauge",entity:i,name:"",value_type:"entity",min_value:0,max_value:100,gauge_style:"3d",gauge_size:200,gauge_thickness:15,pointer_enabled:!0,pointer_style:"needle",pointer_color:"var(--primary-color)",pointer_length:80,pointer_width:4,gauge_color_mode:"gradient",gauge_color:"var(--primary-color)",gauge_background_color:"#424242",use_gradient:!0,gradient_stops:[{id:this.generateId("stop"),position:0,color:"#4CAF50"},{id:this.generateId("stop"),position:50,color:"#FFC107"},{id:this.generateId("stop"),position:100,color:"#F44336"}],show_value:!0,value_position:"center",value_font_size:24,value_color:"var(--primary-text-color)",value_bold:!1,value_italic:!1,value_underline:!1,value_uppercase:!1,value_strikethrough:!1,show_name:!0,name_position:"top",name_font_size:16,name_color:"var(--secondary-text-color)",name_bold:!1,name_italic:!1,name_underline:!1,name_uppercase:!1,name_strikethrough:!1,show_min_max:!0,min_max_font_size:12,min_max_color:"var(--secondary-text-color)",show_ticks:!0,tick_count:10,tick_color:"var(--divider-color)",show_tick_labels:!1,tick_label_font_size:10,animation_enabled:!0,animation_duration:"1000ms",animation_easing:"ease-out",segments:[{id:this.generateId("segment"),from:0,to:30,color:"#4CAF50",label:"Low"},{id:this.generateId("segment"),from:30,to:70,color:"#FFC107",label:"Medium"},{id:this.generateId("segment"),from:70,to:100,color:"#F44336",label:"High"}],tap_action:void 0,hold_action:void 0,double_tap_action:void 0,display_mode:"always",display_conditions:[],smart_scaling:!0}}findSuitableSensor(e){if(!(null==e?void 0:e.states))return"";const t=["sensor.battery_level","sensor.cpu_temperature","sensor.humidity","sensor.temperature"];for(const i of t)if(e.states[i])return i;return Object.keys(e.states).filter((t=>{if(!t.startsWith("sensor."))return!1;const i=e.states[t],o=parseFloat(i.state);return!isNaN(o)}))[0]||""}renderLogicTab(e,t,i,o){return s.X.render(e,t,(e=>o(e)))}renderGeneralTab(e,t,i,n){const a=e;return o.qy`
      ${this.injectUcFormStyles()}
      <style>
        .settings-section {
          background: var(--secondary-background-color);
          border-radius: 8px;
          padding: 16px;
          margin-bottom: 32px;
        }
        .section-title {
          font-size: 18px;
          font-weight: 700;
          text-transform: uppercase;
          color: var(--primary-color);
          margin-bottom: 16px;
          padding-bottom: 0;
          border-bottom: none;
          letter-spacing: 0.5px;
        }
        .field-title {
          font-size: 16px;
          font-weight: 600;
          color: var(--primary-text-color);
          margin-bottom: 4px;
        }
        .field-description {
          font-size: 13px;
          color: var(--secondary-text-color);
          margin-bottom: 12px;
          opacity: 0.8;
          line-height: 1.4;
        }
        .conditional-fields-group {
          margin-top: 16px;
          border-left: 4px solid var(--primary-color);
          background: rgba(var(--rgb-primary-color), 0.08);
          border-radius: 0 8px 8px 0;
          padding: 16px;
          overflow: hidden;
          transition: all 0.2s ease;
          animation: slideInFromLeft 0.3s ease-out;
        }
        @keyframes slideInFromLeft {
          from {
            opacity: 0;
            transform: translateX(-10px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        .gradient-stops-container {
          display: flex;
          flex-direction: column;
          gap: 12px;
          margin-top: 12px;
        }
        .gradient-stop {
          display: grid;
          grid-template-columns: 1fr auto auto;
          gap: 8px;
          align-items: center;
          padding: 12px;
          background: var(--card-background-color);
          border-radius: 8px;
          border: 1px solid var(--divider-color);
        }
        .add-stop-btn,
        .remove-stop-btn {
          padding: 8px 16px;
          border-radius: 4px;
          border: 1px solid var(--divider-color);
          background: var(--secondary-background-color);
          color: var(--primary-text-color);
          cursor: pointer;
          transition: all 0.2s;
          font-size: 14px;
          font-weight: 500;
        }
        .add-stop-btn:hover {
          background: var(--primary-color);
          color: white;
          border-color: var(--primary-color);
        }
        .remove-stop-btn {
          padding: 6px 12px;
          background: rgba(var(--rgb-accent-color), 0.1);
          border-color: var(--accent-color);
        }
        .remove-stop-btn:hover {
          background: var(--accent-color);
          color: white;
        }
        .segments-container {
          display: flex;
          flex-direction: column;
          gap: 12px;
          margin-top: 12px;
        }
        .segment-item {
          padding: 12px;
          background: var(--card-background-color);
          border-radius: 8px;
          border: 1px solid var(--divider-color);
        }
        .segment-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 8px;
          margin-bottom: 8px;
        }
      </style>

      ${this.renderBasicConfiguration(a,t,n)}
      ${this.renderValueConfiguration(a,t,n)}
      ${this.renderStyleConfiguration(a,t,n)}
      ${this.renderPointerConfiguration(a,t,n)}
      ${this.renderColorConfiguration(a,t,n)}
      ${this.renderDisplayConfiguration(a,t,n)}
      ${this.renderTicksConfiguration(a,t,n)}
      ${this.renderAnimationConfiguration(a,t,n)}
    `}renderBasicConfiguration(e,t,i){var n,r;return o.qy`
      <div class="settings-section">
        <div class="section-title">BASIC CONFIGURATION</div>

        <div style="margin-bottom: 24px;">
          ${a.Q.renderField("Entity","Select the sensor entity to display on the gauge.",t,{entity:e.entity||""},[a.Q.createSchemaItem("entity",{entity:{domain:["sensor","input_number"]}})],(e=>i({entity:e.detail.value.entity})))}
        </div>

        <div style="margin-bottom: 24px;">
          ${a.Q.renderField("Name","Optional display name for the gauge. Leave empty to use entity friendly name.",t,{name:e.name||""},[a.Q.createSchemaItem("name",{text:{}})],(e=>i({name:e.detail.value.name})))}
        </div>

        <div class="field-container" style="margin-bottom: 24px;">
          <div class="field-title">Minimum Value</div>
          <div class="field-description">The minimum value for the gauge scale.</div>
          ${a.Q.renderCleanForm(t,{min_value:null!==(n=e.min_value)&&void 0!==n?n:0},[a.Q.createSchemaItem("min_value",{number:{mode:"box",step:1}})],(e=>{const t=e.detail.value.min_value;i({min_value:""===t?void 0:Number(t)})}))}
        </div>

        <div class="field-container" style="margin-bottom: 24px;">
          <div class="field-title">Maximum Value</div>
          <div class="field-description">The maximum value for the gauge scale.</div>
          ${a.Q.renderCleanForm(t,{max_value:null!==(r=e.max_value)&&void 0!==r?r:100},[a.Q.createSchemaItem("max_value",{number:{mode:"box",step:1}})],(e=>{const t=e.detail.value.max_value;i({max_value:""===t?void 0:Number(t)})}))}
        </div>
      </div>
    `}renderValueConfiguration(e,t,i){const n=e.value_type||"entity";return o.qy`
      <div class="settings-section">
        <div class="section-title">VALUE CONFIGURATION</div>

        <div class="field-group" style="margin-bottom: 24px;">
          <div class="field-title">Value Source</div>
          <div class="field-description">How to calculate the gauge value.</div>
          ${this.renderUcForm(t,{value_type:n},[this.selectField("value_type",[{value:"entity",label:"Entity State"},{value:"attribute",label:"Entity Attribute"},{value:"template",label:"Template"}])],(e=>{const t=e.detail.value.value_type;t!==n&&(i({value_type:t}),setTimeout((()=>this.triggerPreviewUpdate()),50))}),!1)}
        </div>
        ${"attribute"===n?o.qy`
              <div class="conditional-fields-group">
                ${a.Q.renderField("Attribute Entity","Entity containing the attribute.",t,{value_attribute_entity:e.value_attribute_entity||""},[a.Q.createSchemaItem("value_attribute_entity",{entity:{}})],(e=>i({value_attribute_entity:e.detail.value.value_attribute_entity})))}
                ${a.Q.renderField("Attribute Name","Name of the attribute to use.",t,{value_attribute_name:e.value_attribute_name||""},[a.Q.createSchemaItem("value_attribute_name",{text:{}})],(e=>i({value_attribute_name:e.detail.value.value_attribute_name})))}
              </div>
            `:""}
        ${"template"===n?o.qy`
              <div class="conditional-fields-group">
                ${a.Q.renderField("Value Template","Jinja2 template to calculate the gauge value. Should return a numeric value.",t,{value_template:e.value_template||""},[a.Q.createSchemaItem("value_template",{text:{multiline:!0}})],(e=>i({value_template:e.detail.value.value_template})))}

                <div
                  class="template-examples"
                  style="margin-top: 12px; padding: 12px; background: var(--code-editor-background-color, #1e1e1e); border-radius: 4px;"
                >
                  <div style="font-size: 12px; color: #9cdcfe; margin-bottom: 8px;">Examples:</div>
                  <div
                    style="font-family: monospace; font-size: 11px; color: #d4d4d4; margin-bottom: 4px;"
                  >
                    {{ states('sensor.battery') | float }}
                  </div>
                  <div style="font-family: monospace; font-size: 11px; color: #d4d4d4;">
                    {{ state_attr('climate.home', 'current_temperature') | float }}
                  </div>
                </div>
              </div>
            `:""}
      </div>
    `}renderStyleConfiguration(e,t,i){return o.qy`
      <div class="settings-section">
        <div class="section-title">GAUGE STYLE</div>

        <div class="field-group" style="margin-bottom: 24px;">
          <div class="field-title">Gauge Style</div>
          <div class="field-description">Choose the visual style of the gauge.</div>
          ${this.renderUcForm(t,{gauge_style:e.gauge_style||"modern"},[this.selectField("gauge_style",[{value:"basic",label:"Basic"},{value:"modern",label:"Modern"},{value:"speedometer",label:"Speedometer"},{value:"arc",label:"Arc"},{value:"radial",label:"Radial"},{value:"lines",label:"Lines"},{value:"block",label:"Block"},{value:"minimal",label:"Minimal"},{value:"inset",label:"Inset"},{value:"3d",label:"3D"},{value:"neon",label:"Neon Glow"},{value:"digital",label:"Digital"}])],(t=>{const o=t.detail.value.gauge_style;o!==(e.gauge_style||"modern")&&(i({gauge_style:o}),setTimeout((()=>this.triggerPreviewUpdate()),50))}),!1)}
        </div>

        ${this.renderGaugeSizeFields(e,t,i)}
      </div>
    `}renderGaugeSizeFields(e,t,i){var n,r;const s=e.gauge_style||"modern";return["lines","digital"].includes(s)?o.qy``:o.qy`
      <div class="field-container" style="margin-bottom: 24px;">
        <div class="field-title">Gauge Size</div>
        <div class="field-description">Diameter/size of the gauge in pixels (100-400).</div>
        ${a.Q.renderCleanForm(t,{gauge_size:null!==(n=e.gauge_size)&&void 0!==n?n:200},[a.Q.createSchemaItem("gauge_size",{number:{mode:"box",min:100,max:400,step:10}})],(e=>{const t=e.detail.value.gauge_size;i({gauge_size:""===t?void 0:Number(t)})}))}
      </div>

      <div class="field-container" style="margin-bottom: 24px;">
        <div class="field-title">Gauge Thickness</div>
        <div class="field-description">Thickness of the gauge track (1-50).</div>
        ${a.Q.renderCleanForm(t,{gauge_thickness:null!==(r=e.gauge_thickness)&&void 0!==r?r:15},[a.Q.createSchemaItem("gauge_thickness",{number:{mode:"box",min:1,max:50,step:1}})],(e=>{const t=e.detail.value.gauge_thickness;i({gauge_thickness:""===t?void 0:Number(t)})}))}
      </div>
    `}renderPointerSizeFields(e,t,i){var n,r;const s=e.pointer_style||"needle";return["highlight","cap"].includes(s)?o.qy``:o.qy`
      <div class="field-container" style="margin-bottom: 24px;">
        <div class="field-title">Pointer Length</div>
        <div class="field-description">Length as percentage of gauge radius (1-100).</div>
        ${a.Q.renderCleanForm(t,{pointer_length:null!==(n=e.pointer_length)&&void 0!==n?n:80},[a.Q.createSchemaItem("pointer_length",{number:{mode:"box",min:1,max:100,step:1}})],(e=>{const t=e.detail.value.pointer_length;i({pointer_length:""===t?void 0:Number(t)})}))}
      </div>

      <div class="field-container" style="margin-bottom: 24px;">
        <div class="field-title">Pointer Width</div>
        <div class="field-description">Width of the pointer in pixels (1-20).</div>
        ${a.Q.renderCleanForm(t,{pointer_width:null!==(r=e.pointer_width)&&void 0!==r?r:4},[a.Q.createSchemaItem("pointer_width",{number:{mode:"box",min:1,max:20,step:1}})],(e=>{const t=e.detail.value.pointer_width;i({pointer_width:""===t?void 0:Number(t)})}))}
      </div>
    `}renderPointerConfiguration(e,t,i){const n=!1!==e.pointer_enabled;return o.qy`
      <div class="settings-section">
        <div
          style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
        >
          <div class="section-title" style="margin: 0;">POINTER CONFIGURATION</div>
          <ha-switch
            .checked=${n}
            @change=${e=>i({pointer_enabled:e.target.checked})}
          ></ha-switch>
        </div>
        <div class="field-description" style="margin-bottom: 16px;">
          Enable and customize the gauge pointer/needle that indicates the current value.
        </div>
        ${n?o.qy`
              <div class="conditional-fields-group">
                <div class="field-group" style="margin-bottom: 24px;">
                  <div class="field-title">Pointer Style</div>
                  <div class="field-description">Visual style of the pointer/needle.</div>
                  ${this.renderUcForm(t,{pointer_style:e.pointer_style||"needle"},[this.selectField("pointer_style",[{value:"needle",label:"Needle"},{value:"triangle",label:"Triangle"},{value:"arrow",label:"Arrow"},{value:"line",label:"Line"},{value:"circle",label:"Circle"},{value:"highlight",label:"Track Highlight"},{value:"cap",label:"Track Cap"}])],(t=>{const o=t.detail.value.pointer_style;o!==(e.pointer_style||"needle")&&(i({pointer_style:o}),setTimeout((()=>this.triggerPreviewUpdate()),50))}),!1)}
                </div>

                <div class="field-container" style="margin-bottom: 24px;">
                  <div class="field-title">Pointer Color</div>
                  <div class="field-description">Color of the pointer.</div>
                  <ultra-color-picker
                    style="width: 100%;"
                    .value=${e.pointer_color||""}
                    .defaultValue=${"var(--primary-color)"}
                    .hass=${t}
                    @value-changed=${e=>i({pointer_color:e.detail.value})}
                  ></ultra-color-picker>
                </div>

                ${this.renderPointerSizeFields(e,t,i)}
              </div>
            `:""}
      </div>
    `}renderColorConfiguration(e,t,i){const n=e.gauge_color_mode||"gradient";return o.qy`
      <div class="settings-section">
        <div class="section-title">COLOR CONFIGURATION</div>

        <div class="field-group" style="margin-bottom: 24px;">
          <div class="field-title">Color Mode</div>
          <div class="field-description">How colors are applied to the gauge.</div>
          ${this.renderUcForm(t,{gauge_color_mode:n},[this.selectField("gauge_color_mode",[{value:"solid",label:"Solid Color"},{value:"gradient",label:"Gradient"},{value:"segments",label:"Color Segments"}])],(t=>{const o=t.detail.value.gauge_color_mode;if(o===n)return;const a={gauge_color_mode:o};"segments"!==o||e.segments&&0!==e.segments.length||(a.segments=[{id:this.generateId("segment"),from:0,to:30,color:"#4CAF50",label:"Low"},{id:this.generateId("segment"),from:30,to:70,color:"#FFC107",label:"Medium"},{id:this.generateId("segment"),from:70,to:100,color:"#F44336",label:"High"}]),i(a),setTimeout((()=>this.triggerPreviewUpdate()),50)}),!1)}
        </div>
        ${"solid"===n?o.qy`
              <div class="conditional-fields-group">
                <div class="field-container" style="margin-bottom: 24px;">
                  <div class="field-title">Gauge Color</div>
                  <div class="field-description">Main color of the gauge.</div>
                  <ultra-color-picker
                    style="width: 100%;"
                    .value=${e.gauge_color||""}
                    .defaultValue=${"var(--primary-color)"}
                    .hass=${t}
                    @value-changed=${e=>i({gauge_color:e.detail.value})}
                  ></ultra-color-picker>
                </div>
              </div>
            `:""}
        ${"gradient"===n?o.qy`
              <div class="conditional-fields-group">
                <div class="field-group" style="margin-bottom: 16px;">
                  <div class="field-title">Gradient Display Mode</div>
                  <div class="field-description">How the gradient is displayed on the gauge.</div>
                  ${this.renderUcForm(t,{gradient_display_mode:e.gradient_display_mode||"full"},[this.selectField("gradient_display_mode",[{value:"full",label:"Full Gradient"},{value:"cropped",label:"Cropped to Value"},{value:"value-based",label:"Value-Based Color"}])],(t=>{const o=t.detail.value.gradient_display_mode;o!==(e.gradient_display_mode||"full")&&(i({gradient_display_mode:o}),setTimeout((()=>this.triggerPreviewUpdate()),50))}),!1)}
                </div>

                <uc-gradient-editor
                  .stops=${e.gradient_stops||[{id:this.generateId("stop"),position:0,color:"#4CAF50"},{id:this.generateId("stop"),position:50,color:"#FFC107"},{id:this.generateId("stop"),position:100,color:"#F44336"}]}
                  .barSize=${"regular"}
                  .barRadius=${"round"}
                  .barStyle=${"flat"}
                  @gradient-changed=${e=>{i({gradient_stops:e.detail.stops})}}
                ></uc-gradient-editor>
              </div>
            `:""}
        ${"segments"===n?o.qy`
              <div class="conditional-fields-group">
                <div class="field-title">Color Segments</div>
                <div class="field-description">Define discrete color segments with ranges.</div>

                <div class="segments-container">
                  ${(e.segments||[]).map(((n,a)=>o.qy`
                      <div class="segment-item">
                        <div class="segment-row">
                          <div>
                            <div
                              style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px;"
                            >
                              From Value
                            </div>
                            <input
                              type="number"
                              .value="${n.from}"
                              @input=${t=>{const o=t.target,n=[...e.segments||[]];n[a]=Object.assign(Object.assign({},n[a]),{from:parseFloat(o.value)}),i({segments:n})}}
                              style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color);"
                            />
                          </div>
                          <div>
                            <div
                              style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px;"
                            >
                              To Value
                            </div>
                            <input
                              type="number"
                              .value="${n.to}"
                              @input=${t=>{const o=t.target,n=[...e.segments||[]];n[a]=Object.assign(Object.assign({},n[a]),{to:parseFloat(o.value)}),i({segments:n})}}
                              style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color);"
                            />
                          </div>
                        </div>
                        <div style="margin-bottom: 8px;">
                          <div
                            style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px;"
                          >
                            Label (optional)
                          </div>
                          <input
                            type="text"
                            .value="${n.label||""}"
                            @input=${t=>{const o=t.target,n=[...e.segments||[]];n[a]=Object.assign(Object.assign({},n[a]),{label:o.value}),i({segments:n})}}
                            style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color);"
                          />
                        </div>
                        <div style="display: flex; gap: 8px; align-items: center;">
                          <div style="flex: 1;">
                            <div
                              style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px;"
                            >
                              Color
                            </div>
                            <ultra-color-picker
                              style="width: 100%;"
                              .value=${n.color}
                              .hass=${t}
                              @value-changed=${t=>{const o=[...e.segments||[]];o[a]=Object.assign(Object.assign({},o[a]),{color:t.detail.value}),i({segments:o})}}
                            ></ultra-color-picker>
                          </div>
                          <button
                            class="remove-stop-btn"
                            @click=${()=>{const t=[...e.segments||[]];t.splice(a,1),i({segments:t})}}
                            style="margin-top: 20px;"
                          >
                            Remove
                          </button>
                        </div>
                      </div>
                    `))}
                </div>

                <button
                  class="add-stop-btn"
                  @click=${()=>{const t=[...e.segments||[]],o=t.length>0?t[t.length-1].to:e.min_value||0;t.push({id:this.generateId("segment"),from:o,to:o+20,color:"#4CAF50",label:""}),i({segments:t})}}
                  style="margin-top: 12px;"
                >
                  + Add Segment
                </button>
              </div>
            `:""}

        <div class="field-container" style="margin-top: 16px;">
          <div class="field-title">Background Color</div>
          <div class="field-description">Background color for the gauge track.</div>
          <ultra-color-picker
            style="width: 100%;"
            .value=${e.gauge_background_color||""}
            .defaultValue=${"var(--disabled-text-color)"}
            .hass=${t}
            @value-changed=${e=>i({gauge_background_color:e.detail.value})}
          ></ultra-color-picker>
        </div>
      </div>
    `}renderDisplayConfiguration(e,t,i){var n,r,s,l,d,c,p;const u=!1!==e.show_value,h=!1!==e.show_name,g=!1!==e.show_min_max;return o.qy`
      <div class="settings-section">
        <div class="section-title">DISPLAY CONFIGURATION</div>

        <!-- Value Display -->
        <div
          style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
        >
          <div class="field-title" style="margin: 0;">Show Value</div>
          <ha-switch
            .checked=${u}
            @change=${e=>i({show_value:e.target.checked})}
          ></ha-switch>
        </div>

        ${u?o.qy`
              <div class="conditional-fields-group" style="margin-bottom: 16px;">
                <div class="field-container" style="margin-bottom: 24px;">
                  <div class="field-title">Value Position</div>
                  <div class="field-description">Where to display the value text.</div>
                  ${this.renderUcForm(t,{value_position:e.value_position||"center"},[this.selectField("value_position",[{value:"center",label:"Center"},{value:"top",label:"Top"},{value:"bottom",label:"Bottom"},{value:"none",label:"None"}])],(t=>{const o=t.detail.value.value_position;o!==(e.value_position||"center")&&(i({value_position:o}),setTimeout((()=>this.triggerPreviewUpdate()),50))}),!1)}
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Value Font Size</div>
                  ${a.Q.renderCleanForm(t,{value_font_size:null!==(n=e.value_font_size)&&void 0!==n?n:24},[a.Q.createSchemaItem("value_font_size",{number:{mode:"box",min:8,max:48,step:1}})],(e=>{const t=e.detail.value.value_font_size;i({value_font_size:""===t?void 0:Number(t)})}))}
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Value Color</div>
                  <ultra-color-picker
                    style="width: 100%;"
                    .value=${e.value_color||""}
                    .defaultValue=${"var(--primary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>i({value_color:e.detail.value})}
                  ></ultra-color-picker>
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Value Text Formatting</div>
                  <div class="field-description">Apply formatting styles to the value text.</div>
                  <div class="format-buttons" style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <button
                      class="format-btn ${e.value_bold?"active":""}"
                      @click=${()=>i({value_bold:!e.value_bold})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.value_bold?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.value_bold?"white":"var(--primary-text-color)"};"
                      title="Bold"
                    >
                      <ha-icon icon="mdi:format-bold"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.value_italic?"active":""}"
                      @click=${()=>i({value_italic:!e.value_italic})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.value_italic?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.value_italic?"white":"var(--primary-text-color)"};"
                      title="Italic"
                    >
                      <ha-icon icon="mdi:format-italic"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.value_underline?"active":""}"
                      @click=${()=>i({value_underline:!e.value_underline})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.value_underline?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.value_underline?"white":"var(--primary-text-color)"};"
                      title="Underline"
                    >
                      <ha-icon icon="mdi:format-underline"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.value_uppercase?"active":""}"
                      @click=${()=>i({value_uppercase:!e.value_uppercase})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.value_uppercase?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.value_uppercase?"white":"var(--primary-text-color)"};"
                      title="Uppercase"
                    >
                      <ha-icon icon="mdi:format-letter-case-upper"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.value_strikethrough?"active":""}"
                      @click=${()=>i({value_strikethrough:!e.value_strikethrough})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.value_strikethrough?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.value_strikethrough?"white":"var(--primary-text-color)"};"
                      title="Strikethrough"
                    >
                      <ha-icon icon="mdi:format-strikethrough"></ha-icon>
                    </button>
                  </div>
                </div>

                ${a.Q.renderField("Value Format",'Optional format string (e.g., "%.1f°C", "%.0f%%").',t,{value_format:e.value_format||""},[a.Q.createSchemaItem("value_format",{text:{}})],(e=>i({value_format:e.detail.value.value_format})))}

                <div class="field-container" style="margin-bottom: 24px; margin-top: 16px;">
                  <div class="field-title">Value X Offset</div>
                  <div class="field-description">
                    Horizontal offset for value positioning (-50 to 50).
                  </div>
                  ${a.Q.renderCleanForm(t,{value_x_offset:null!==(r=e.value_x_offset)&&void 0!==r?r:0},[a.Q.createSchemaItem("value_x_offset",{number:{mode:"box",min:-50,max:50,step:1}})],(e=>{const t=e.detail.value.value_x_offset;i({value_x_offset:""===t?void 0:Number(t)})}))}
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Value Y Offset</div>
                  <div class="field-description">
                    Vertical offset for value positioning (-50 to 50).
                  </div>
                  ${a.Q.renderCleanForm(t,{value_y_offset:null!==(s=e.value_y_offset)&&void 0!==s?s:0},[a.Q.createSchemaItem("value_y_offset",{number:{mode:"box",min:-50,max:50,step:1}})],(e=>{const t=e.detail.value.value_y_offset;i({value_y_offset:""===t?void 0:Number(t)})}))}
                </div>
              </div>
            `:""}

        <!-- Name Display -->
        <div
          style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
        >
          <div class="field-title" style="margin: 0;">Show Name</div>
          <ha-switch
            .checked=${h}
            @change=${e=>i({show_name:e.target.checked})}
          ></ha-switch>
        </div>

        ${h?o.qy`
              <div class="conditional-fields-group" style="margin-bottom: 16px;">
                <div class="field-group" style="margin-bottom: 24px;">
                  <div class="field-title">Name Position</div>
                  <div class="field-description">Where to display the name/label.</div>
                  ${this.renderUcForm(t,{name_position:e.name_position||"top"},[this.selectField("name_position",[{value:"top",label:"Top"},{value:"bottom",label:"Bottom"},{value:"none",label:"None"}])],(t=>{const o=t.detail.value.name_position;o!==(e.name_position||"top")&&(i({name_position:o}),setTimeout((()=>this.triggerPreviewUpdate()),50))}),!1)}
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Name Font Size</div>
                  ${a.Q.renderCleanForm(t,{name_font_size:null!==(l=e.name_font_size)&&void 0!==l?l:16},[a.Q.createSchemaItem("name_font_size",{number:{mode:"box",min:8,max:32,step:1}})],(e=>{const t=e.detail.value.name_font_size;i({name_font_size:""===t?void 0:Number(t)})}))}
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Name Color</div>
                  <ultra-color-picker
                    style="width: 100%;"
                    .value=${e.name_color||""}
                    .defaultValue=${"var(--secondary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>i({name_color:e.detail.value})}
                  ></ultra-color-picker>
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Name Text Formatting</div>
                  <div class="field-description">Apply formatting styles to the name text.</div>
                  <div class="format-buttons" style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <button
                      class="format-btn ${e.name_bold?"active":""}"
                      @click=${()=>i({name_bold:!e.name_bold})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.name_bold?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.name_bold?"white":"var(--primary-text-color)"};"
                      title="Bold"
                    >
                      <ha-icon icon="mdi:format-bold"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.name_italic?"active":""}"
                      @click=${()=>i({name_italic:!e.name_italic})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.name_italic?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.name_italic?"white":"var(--primary-text-color)"};"
                      title="Italic"
                    >
                      <ha-icon icon="mdi:format-italic"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.name_underline?"active":""}"
                      @click=${()=>i({name_underline:!e.name_underline})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.name_underline?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.name_underline?"white":"var(--primary-text-color)"};"
                      title="Underline"
                    >
                      <ha-icon icon="mdi:format-underline"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.name_uppercase?"active":""}"
                      @click=${()=>i({name_uppercase:!e.name_uppercase})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.name_uppercase?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.name_uppercase?"white":"var(--primary-text-color)"};"
                      title="Uppercase"
                    >
                      <ha-icon icon="mdi:format-letter-case-upper"></ha-icon>
                    </button>
                    <button
                      class="format-btn ${e.name_strikethrough?"active":""}"
                      @click=${()=>i({name_strikethrough:!e.name_strikethrough})}
                      style="padding: 8px; border: 1px solid var(--divider-color, #cccccc); border-radius: 4px; background: ${e.name_strikethrough?"var(--primary-color)":"var(--secondary-background-color)"}; cursor: pointer; transition: all 0.2s ease; color: ${e.name_strikethrough?"white":"var(--primary-text-color)"};"
                      title="Strikethrough"
                    >
                      <ha-icon icon="mdi:format-strikethrough"></ha-icon>
                    </button>
                  </div>
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Name X Offset</div>
                  <div class="field-description">
                    Horizontal offset for name positioning (-50 to 50).
                  </div>
                  ${a.Q.renderCleanForm(t,{name_x_offset:null!==(d=e.name_x_offset)&&void 0!==d?d:0},[a.Q.createSchemaItem("name_x_offset",{number:{mode:"box",min:-50,max:50,step:1}})],(e=>{const t=e.detail.value.name_x_offset;i({name_x_offset:""===t?void 0:Number(t)})}))}
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Name Y Offset</div>
                  <div class="field-description">
                    Vertical offset for name positioning (-50 to 50).
                  </div>
                  ${a.Q.renderCleanForm(t,{name_y_offset:null!==(c=e.name_y_offset)&&void 0!==c?c:0},[a.Q.createSchemaItem("name_y_offset",{number:{mode:"box",min:-50,max:50,step:1}})],(e=>{const t=e.detail.value.name_y_offset;i({name_y_offset:""===t?void 0:Number(t)})}))}
                </div>
              </div>
            `:""}

        <!-- Min/Max Display -->
        ${e.show_tick_labels?o.qy`
              <div class="field-container" style="margin-bottom: 16px; opacity: 0.5;">
                <div class="field-title">Show Min/Max Values</div>
                <div class="field-description" style="color: var(--warning-color);">
                  Min/Max values are automatically hidden when tick labels are enabled to avoid
                  visual clutter.
                </div>
              </div>
            `:o.qy`
              <div class="field-container" style="margin-bottom: 16px;">
                <div class="field-title">Show Min/Max Values</div>
                <div class="field-description">
                  Display minimum and maximum values on the gauge.
                </div>
                ${a.Q.renderCleanForm(t,{show_min_max:g},[a.Q.createSchemaItem("show_min_max",{boolean:{}})],(e=>i({show_min_max:e.detail.value.show_min_max})))}
              </div>
            `}
        ${g?o.qy`
              <div class="conditional-fields-group">
                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Min/Max Font Size</div>
                  ${a.Q.renderCleanForm(t,{min_max_font_size:null!==(p=e.min_max_font_size)&&void 0!==p?p:12},[a.Q.createSchemaItem("min_max_font_size",{number:{mode:"box",min:8,max:20,step:1}})],(e=>i({min_max_font_size:e.detail.value.min_max_font_size})))}
                </div>

                <div class="field-container">
                  <div class="field-title">Min/Max Color</div>
                  <ultra-color-picker
                    style="width: 100%;"
                    .value=${e.min_max_color||""}
                    .defaultValue=${"var(--secondary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>i({min_max_color:e.detail.value})}
                  ></ultra-color-picker>
                </div>
              </div>
            `:""}
      </div>
    `}renderTicksConfiguration(e,t,i){var n,r;const s=!1!==e.show_ticks,l=e.show_tick_labels||!1;return o.qy`
      <div class="settings-section">
        <div class="section-title">TICK MARKS</div>

        <div
          style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
        >
          <div class="field-title" style="margin: 0;">Show Tick Marks</div>
          <ha-switch
            .checked=${s}
            @change=${e=>i({show_ticks:e.target.checked})}
          ></ha-switch>
        </div>

        ${s?o.qy`
              <div class="conditional-fields-group">
                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Tick Count</div>
                  <div class="field-description">Number of major tick marks.</div>
                  ${a.Q.renderCleanForm(t,{tick_count:null!==(n=e.tick_count)&&void 0!==n?n:10},[a.Q.createSchemaItem("tick_count",{number:{mode:"box",min:2,max:50,step:1}})],(e=>{const t=e.detail.value.tick_count;i({tick_count:""===t?void 0:Number(t)})}))}
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Tick Color</div>
                  <ultra-color-picker
                    style="width: 100%;"
                    .value=${e.tick_color||""}
                    .defaultValue=${"var(--divider-color)"}
                    .hass=${t}
                    @value-changed=${e=>i({tick_color:e.detail.value})}
                  ></ultra-color-picker>
                </div>

                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Show Tick Labels</div>
                  ${a.Q.renderCleanForm(t,{show_tick_labels:l},[a.Q.createSchemaItem("show_tick_labels",{boolean:{}})],(e=>i({show_tick_labels:e.detail.value.show_tick_labels})))}
                </div>

                ${l?o.qy`
                      <div class="field-container">
                        <div class="field-title">Tick Label Font Size</div>
                        ${a.Q.renderCleanForm(t,{tick_label_font_size:null!==(r=e.tick_label_font_size)&&void 0!==r?r:10},[a.Q.createSchemaItem("tick_label_font_size",{number:{mode:"box",min:6,max:16,step:1}})],(e=>{const t=e.detail.value.tick_label_font_size;i({tick_label_font_size:""===t?void 0:Number(t)})}))}
                      </div>
                    `:""}
              </div>
            `:""}
      </div>
    `}renderAnimationConfiguration(e,t,i){const n=!1!==e.animation_enabled;return o.qy`
      <div class="settings-section">
        <div class="section-title">ANIMATION</div>

        <div
          style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
        >
          <div class="field-title" style="margin: 0;">Enable Animation</div>
          <ha-switch
            .checked=${n}
            @change=${e=>i({animation_enabled:e.target.checked})}
          ></ha-switch>
        </div>
        <div class="field-description" style="margin-bottom: 16px;">
          Animate gauge changes smoothly.
        </div>

        ${n?o.qy`
              <div class="conditional-fields-group">
                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">Animation Duration</div>
                  <div class="field-description">
                    Duration in milliseconds (e.g., "1000ms", "1s").
                  </div>
                  ${a.Q.renderField("","",t,{animation_duration:e.animation_duration||"1000ms"},[a.Q.createSchemaItem("animation_duration",{text:{}})],(e=>{const t=e.detail.value.animation_duration;i({animation_duration:""===t?void 0:t})}))}
                </div>

                <div class="field-group">
                  <div class="field-title">Animation Easing</div>
                  <div class="field-description">Easing function for the animation.</div>
                  ${this.renderUcForm(t,{animation_easing:e.animation_easing||"ease-out"},[this.selectField("animation_easing",[{value:"linear",label:"Linear"},{value:"ease-in",label:"Ease In"},{value:"ease-out",label:"Ease Out"},{value:"ease-in-out",label:"Ease In-Out"},{value:"bounce",label:"Bounce"}])],(t=>{const o=t.detail.value.animation_easing;o!==(e.animation_easing||"ease-out")&&(i({animation_easing:o}),setTimeout((()=>this.triggerPreviewUpdate()),50))}),!1)}
                </div>
              </div>
            `:""}
      </div>
    `}renderActionsTab(e,t,i,o){return r.A.render(e,t,(e=>o(e)))}renderSplitPreview(e,t){return this.renderPreview(e,t)}renderPreview(e,t,i,n){const a=e,r=this.calculateGaugeValue(a,t),s=this.getDisplayName(a,t);return o.qy`
      <div class="uc-gauge-container" style="${this.getContainerStyles(a)}">
        ${a.show_name&&"top"===a.name_position?o.qy`
              <div class="uc-gauge-name" style="${this.getNameStyles(a)}">
                ${s}
              </div>
            `:""}

        <div
          class="uc-gauge-wrapper"
          style="position: relative; display: inline-block; overflow: hidden;"
        >
          ${a.show_value&&"top"===a.value_position?o.qy`
                <div class="uc-gauge-value-top" style="${this.getValueStyles(a)}">
                  ${this.formatValue(r,a)}
                </div>
              `:""}
          <svg
            class="uc-gauge-svg"
            viewBox="0 0 ${a.gauge_size} ${a.gauge_size}"
            width="${a.gauge_size}"
            height="${a.gauge_size}"
            style="overflow: hidden;"
          >
            ${this.renderGaugeByStyle(a,r,t)}
          </svg>

          ${a.show_value&&"center"===a.value_position?o.qy`
                <div class="uc-gauge-value-center" style="${this.getValueStyles(a)}">
                  ${this.formatValue(r,a)}
                </div>
              `:""}
          ${a.show_value&&"bottom"===a.value_position?o.qy`
                <div class="uc-gauge-value-bottom" style="${this.getValueStyles(a)}">
                  ${this.formatValue(r,a)}
                </div>
              `:""}
        </div>
        ${a.show_name&&"bottom"===a.name_position?o.qy`
              <div class="uc-gauge-name" style="${this.getNameStyles(a)}">
                ${s}
              </div>
            `:""}
      </div>
    `}calculateGaugeValue(e,t){const i=e.value_type||"entity";if("entity"===i){const i=t.states[e.entity];return i?parseFloat(i.state)||0:e.min_value||0}if("attribute"===i&&e.value_attribute_entity&&e.value_attribute_name){const i=t.states[e.value_attribute_entity];if(!i)return e.min_value||0;const o=i.attributes[e.value_attribute_name];return parseFloat(o)||0}return"template"===i&&e.value_template,e.min_value||0}getDisplayName(e,t){if(e.name)return e.name;const i=t.states[e.entity];return(null==i?void 0:i.attributes.friendly_name)||e.entity}formatValue(e,t){return t.value_format?t.value_format.replace(/%.(\d*)f/,((t,i)=>{const o=i?parseInt(i):0;return e.toFixed(o)})).replace(/%%/,"%"):e.toString()}renderGaugeByStyle(e,t,i){switch(e.gauge_style||"modern"){case"speedometer":return this.renderSpeedometerGauge(e,t);case"arc":return this.renderArcGauge(e,t);case"radial":return this.renderRadialGauge(e,t);case"lines":return this.renderLinesGauge(e,t);case"block":return this.renderBlockGauge(e,t);case"minimal":return this.renderMinimalGauge(e,t);case"inset":return this.renderInsetGauge(e,t);case"3d":return this.render3DGauge(e,t);case"neon":return this.renderNeonGauge(e,t);case"digital":return this.renderDigitalGauge(e,t);case"basic":return this.renderBasicGauge(e,t);default:return this.renderModernGauge(e,t)}}renderModernGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-120,u=120,h=p+240*c/100,g=this.describeArc(a,r,s,p,u),m=this.describeArc(a,r,s,p,h),f=this.getColorAtValue(e,c);return o.JW`
      ${this.renderGradientDefs(e)}
      
      <!-- Background arc -->
      <path
        d="${g}"
        fill="none"
        stroke="${e.gauge_background_color||"var(--disabled-text-color)"}"
        stroke-width="${n}"
        stroke-linecap="butt"
      />

      <!-- Value arc -->
      ${"segments"===e.gauge_color_mode?this.renderSegmentedArcs(e,a,r,s,p,u,n,t,!0):"gradient"===e.gauge_color_mode?o.JW`
              <path
                d="${m}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n}"
                stroke-linecap="round"
                style="transition: stroke-dashoffset ${!1!==e.animation_enabled?e.animation_duration||"1000ms":"0ms"} ${e.animation_easing||"ease-out"};"
              />
            `:o.JW`
              <path
                d="${m}"
                fill="none"
                stroke="${f}"
                stroke-width="${n}"
                stroke-linecap="round"
                style="transition: stroke-dashoffset ${!1!==e.animation_enabled?e.animation_duration||"1000ms":"0ms"} ${e.animation_easing||"ease-out"};"
              />
            `}

      <!-- Tick marks -->
      ${!1!==e.show_ticks?this.renderTickMarks(e,a,r,s,p,u,n):""}

      <!-- Pointer -->
      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,h):""}

      <!-- Min/Max labels -->
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,a,r,s,p,u)}
    `}renderBasicGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-120,u=120,h=p+240*c/100,g=this.describeArc(a,r,s,p,u),m=this.describeArc(a,r,s,p,h),f=this.getColorAtValue(e,c);return o.JW`
      ${this.renderGradientDefs(e)}
      
      <!-- Background arc -->
      <path
        d="${g}"
        fill="none"
        stroke="${e.gauge_background_color||"var(--disabled-text-color)"}"
        stroke-width="${n}"
        stroke-linecap="butt"
      />

      <!-- Value arc -->
      ${"segments"===e.gauge_color_mode?this.renderSegmentedArcs(e,a,r,s,p,u,n,t):"gradient"===e.gauge_color_mode?o.JW`
              <path
                d="${m}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `:o.JW`
              <path
                d="${m}"
                fill="none"
                stroke="${f}"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `}

      <!-- Tick marks -->
      ${!1!==e.show_ticks?this.renderTickMarks(e,a,r,s,p,u,n):""}

      <!-- Pointer -->
      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,h):""}

      <!-- Min/Max labels -->
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,a,r,s,p,u)}
    `}renderSpeedometerGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-225,u=p+270*c/100,h=this.describeArc(a,r,s,p,45),g=this.describeArc(a,r,s,p,u),m=this.getColorAtValue(e,c);return o.JW`
      ${this.renderGradientDefs(e)}
      
      <!-- Background arc -->
      <path
        d="${h}"
        fill="none"
        stroke="${e.gauge_background_color||"var(--disabled-text-color)"}"
        stroke-width="${n}"
        stroke-linecap="butt"
      />

      <!-- Value arc -->
      ${"segments"===e.gauge_color_mode?this.renderSegmentedArcs(e,a,r,s,p,45,n,t):"gradient"===e.gauge_color_mode?o.JW`
              <path
                d="${g}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `:o.JW`
              <path
                d="${g}"
                fill="none"
                stroke="${m}"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `}

      ${!1!==e.show_ticks?this.renderTickMarks(e,a,r,s,p,45,n):""}
      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,u):""}
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,a,r,s,p,45)}
    `}renderArcGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-180,u=p+180*c/100,h=this.describeArc(a,r,s,p,0),g=this.describeArc(a,r,s,p,u),m=this.getColorAtValue(e,c);return o.JW`
      ${this.renderGradientDefs(e)}
      
      <!-- Background arc -->
      <path
        d="${h}"
        fill="none"
        stroke="${e.gauge_background_color||"var(--disabled-text-color)"}"
        stroke-width="${n}"
        stroke-linecap="butt"
      />

      <!-- Value arc -->
      ${"segments"===e.gauge_color_mode?this.renderSegmentedArcs(e,a,r,s,p,0,n,t):"gradient"===e.gauge_color_mode?o.JW`
              <path
                d="${g}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `:o.JW`
              <path
                d="${g}"
                fill="none"
                stroke="${m}"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `}

      ${!1!==e.show_ticks?this.renderTickMarks(e,a,r,s,p,0,n):""}
      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,u):""}
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,a,r,s,p,0)}
    `}renderRadialGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-90,u=p+360*c/100,h=(this.describeArc(a,r,s,p,270),this.describeArc(a,r,s,p,u)),g=this.getColorAtValue(e,c);return o.JW`
      ${this.renderGradientDefs(e)}
      
      <!-- Background circle -->
      <circle
        cx="${a}"
        cy="${r}"
        r="${s}"
        fill="none"
        stroke="${e.gauge_background_color||"var(--disabled-text-color)"}"
        stroke-width="${n}"
      />

      <!-- Value arc -->
      ${"segments"===e.gauge_color_mode?this.renderSegmentedArcs(e,a,r,s,p,270,n,t):"gradient"===e.gauge_color_mode?o.JW`
              <path
                d="${h}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `:o.JW`
              <path
                d="${h}"
                fill="none"
                stroke="${g}"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `}

      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,u):""}
    `}renderLinesGauge(e,t){const i=e.gauge_size||200,n=i/2,a=i/2,r=i/2-20,s=e.min_value||0,l=(t-s)/((e.max_value||100)-s)*100,d=Math.min(Math.max(l,0),100),c=e.tick_count||20,p=[];for(let t=0;t<=c;t++){const i=240*t/c-120,s=t/c*100;let l;l="segments"===e.gauge_color_mode||s<=d?this.getColorAtValue(e,s):e.gauge_background_color||"var(--disabled-text-color)";const u=r-15,h=r,g=this.polarToCartesian(n,a,u,i),m=this.polarToCartesian(n,a,h,i);p.push(o.JW`
        <line
          x1="${g.x}"
          y1="${g.y}"
          x2="${m.x}"
          y2="${m.y}"
          stroke="${l}"
          stroke-width="3"
          stroke-linecap="round"
        />
      `)}return o.JW`
      ${p}
      ${!1!==e.pointer_enabled?this.renderPointer(e,n,a,r-15,240*d/100-120):""}
    `}renderBlockGauge(e,t){const i=e.gauge_size||200,n=i/2,a=i/2,r=i/2-20,s=e.gauge_thickness||20,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=e.tick_count||12,u=240/p,h=[];for(let t=0;t<p;t++){const i=t*u-120,l=i+u-2,d=t/p*100,g=(t+1)/p*100;let m;m="segments"===e.gauge_color_mode||c>=d?this.getColorAtValue(e,g):e.gauge_background_color||"var(--disabled-text-color)";const f=this.describeArc(n,a,r,i,l);h.push(o.JW`
        <path
          d="${f}"
          fill="none"
          stroke="${m}"
          stroke-width="${s}"
          stroke-linecap="butt"
        />
      `)}return o.JW`
      ${h}
      ${!1!==e.pointer_enabled?this.renderPointer(e,n,a,r,240*c/100-120):""}
    `}renderMinimalGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||8,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=2*Math.PI*s,u=c/100*p,h=this.getColorAtValue(e,c);return o.JW`
      ${this.renderGradientDefs(e)}
      
      <circle
        cx="${a}"
        cy="${r}"
        r="${s}"
        fill="none"
        stroke="${e.gauge_background_color||"var(--disabled-text-color)"}"
        stroke-width="${n}"
      />

      ${"segments"===e.gauge_color_mode?this.renderSegmentedCircle(e,a,r,s,n,t,!0):"gradient"===e.gauge_color_mode?o.JW`
            <circle
              cx="${a}"
              cy="${r}"
              r="${s}"
              fill="none"
              stroke="url(#gradient-${e.id})"
              stroke-width="${n}"
              stroke-linecap="round"
              stroke-dasharray="${p}"
              stroke-dashoffset="${p-u}"
              transform="rotate(-90 ${a} ${r})"
            />
          `:o.JW`
            <circle
              cx="${a}"
              cy="${r}"
              r="${s}"
              fill="none"
              stroke="${h}"
              stroke-width="${n}"
              stroke-linecap="round"
              stroke-dasharray="${p}"
              stroke-dashoffset="${p-u}"
              transform="rotate(-90 ${a} ${r})"
            />
          `}
    `}renderInsetGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-120,u=120,h=p+240*c/100,g=s+n/4,m=s-n/4,f=this.describeArc(a,r,g,p,u),_=this.describeArc(a,r,m,p,u),v=this.describeArc(a,r,g,p,h),b=this.describeArc(a,r,m,p,h),y=this.getColorAtValue(e,c),x=e.gauge_background_color||"var(--disabled-text-color)";return o.JW`
      ${this.renderGradientDefs(e)}
      
      <defs>
        <filter id="inset-shadow-${e.id}" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur in="SourceAlpha" stdDeviation="2" />
          <feOffset dx="0" dy="2" result="offsetblur" />
          <feFlood flood-color="rgba(0,0,0,0.3)" />
          <feComposite in2="offsetblur" operator="in" />
          <feMerge>
            <feMergeNode />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>
        <filter id="3d-separator-shadow-${e.id}" x="-75%" y="-75%" width="250%" height="250%">
          <!-- CSS-like shadow: 0 0 6px 3px #000 for separator edge -->
          <feMorphology in="SourceAlpha" operator="dilate" radius="3" result="spread" />
          <feGaussianBlur in="spread" stdDeviation="3" result="blur" />
          <feColorMatrix in="blur" type="matrix"
            values="0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 0.35 0" result="shadow" />
          <feMerge>
            <feMergeNode in="shadow" />
          </feMerge>
        </filter>
      </defs>
      
      <!-- Outer background arc -->
      <path
        d="${f}"
        fill="none"
        stroke="${x}"
        stroke-width="${n/2}"
        stroke-linecap="butt"
        filter="url(#inset-shadow-${e.id})"
      />
      
      <!-- Inner background arc -->
      <path
        d="${_}"
        fill="none"
        stroke="${x}"
        stroke-width="${n/2}"
        stroke-linecap="butt"
        opacity="0.7"
      />

      <!-- Value arcs -->
      ${"segments"===e.gauge_color_mode?o.JW`
              ${this.renderSegmentedArcsWithInsetStyle(e,a,r,g,p,u,n/2,t)}
              ${this.renderSegmentedArcsWithInsetStyle(e,a,r,m,p,u,n/2,t)}
            `:"gradient"===e.gauge_color_mode?o.JW`
              <!-- Outer value arc -->
              <path
                d="${v}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n/2}"
                stroke-linecap="butt"
              />
              
              <!-- Inner value arc -->
              <path
                d="${b}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n/2}"
                stroke-linecap="butt"
                opacity="0.8"
              />
            `:o.JW`
              <!-- Outer value arc -->
              <path
                d="${v}"
                fill="none"
                stroke="${y}"
                stroke-width="${n/2}"
                stroke-linecap="butt"
              />
              
              <!-- Inner value arc -->
              <path
                d="${b}"
                fill="none"
                stroke="${y}"
                stroke-width="${n/2}"
                stroke-linecap="butt"
                opacity="0.8"
              />
            `}

      <!-- Tick marks -->
      ${!1!==e.show_ticks?this.renderTickMarks(e,a,r,s,p,u,n):""}

      <!-- Pointer -->
      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,h):""}

      <!-- Min/Max labels -->
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,a,r,s,p,u)}
    `}render3DGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-120,u=120,h=p+240*c/100,g=this.describeArc(a,r,s,p,u),m=this.describeArc(a,r,s,p,h),f=this.getColorAtValue(e,c),_=e.gauge_background_color||"var(--disabled-text-color)";return o.JW`
      ${this.renderGradientDefs(e)}
      
      <defs>
        <linearGradient id="3d-gradient-${e.id}" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" style="stop-color:rgb(255,255,255);stop-opacity:0.4" />
          <stop offset="50%" style="stop-color:rgb(255,255,255);stop-opacity:0.1" />
          <stop offset="100%" style="stop-color:rgb(0,0,0);stop-opacity:0.3" />
        </linearGradient>
        <filter id="3d-shadow-${e.id}" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
          <feOffset dx="0" dy="4" result="offsetblur" />
          <feFlood flood-color="rgba(0,0,0,0.4)" />
          <feComposite in2="offsetblur" operator="in" />
          <feMerge>
            <feMergeNode />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>
        <filter id="3d-box-shadow-${e.id}" x="-100%" y="-100%" width="300%" height="300%">
          <feGaussianBlur in="SourceAlpha" stdDeviation="4" />
          <feOffset dx="0" dy="6" result="offsetblur" />
          <feFlood flood-color="rgba(0,0,0,0.5)" />
          <feComposite in2="offsetblur" operator="in" />
          <feMerge>
            <feMergeNode />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>
        <filter id="3d-segment-shadow-${e.id}" x="-75%" y="-75%" width="250%" height="250%">
          <!-- CSS-like shadow: 0 0 8px 4px #000 (no directional offset) -->
          <feMorphology in="SourceAlpha" operator="dilate" radius="4" result="spread" />
          <feGaussianBlur in="spread" stdDeviation="4" result="blur" />
          <feColorMatrix in="blur" type="matrix"
            values="0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 0.45 0" result="shadow" />
          <feMerge>
            <feMergeNode in="shadow" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>
      </defs>
      
      <!-- Background arc with 3D effect -->
      <path
        d="${g}"
        fill="none"
        stroke="${_}"
        stroke-width="${n+2}"
        stroke-linecap="butt"
        filter="url(#3d-shadow-${e.id})"
      />
      
      <path
        d="${g}"
        fill="none"
        stroke="url(#3d-gradient-${e.id})"
        stroke-width="${n}"
        stroke-linecap="butt"
      />

      <!-- Value arc with 3D effect -->
      ${"segments"===e.gauge_color_mode?this.renderSegmentedArcsWith3DStyle(e,a,r,s,p,u,n,t):"gradient"===e.gauge_color_mode?o.JW`
              <path
                d="${m}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n+2}"
                stroke-linecap="butt"
                filter="url(#3d-shadow-${e.id})"
              />
              <path
                d="${m}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `:o.JW`
              <path
                d="${m}"
                fill="none"
                stroke="${f}"
                stroke-width="${n+2}"
                stroke-linecap="butt"
                filter="url(#3d-shadow-${e.id})"
              />
              <path
                d="${m}"
                fill="none"
                stroke="${f}"
                stroke-width="${n}"
                stroke-linecap="butt"
              />
            `}

      <!-- Tick marks -->
      ${!1!==e.show_ticks?this.renderTickMarks(e,a,r,s,p,u,n):""}

      <!-- Pointer -->
      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,h):""}

      <!-- Min/Max labels -->
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,a,r,s,p,u)}
    `}renderNeonGauge(e,t){const i=e.gauge_size||200,n=e.gauge_thickness||15,a=i/2,r=i/2,s=i/2-n-10,l=e.min_value||0,d=(t-l)/((e.max_value||100)-l)*100,c=Math.min(Math.max(d,0),100),p=-120,u=120,h=p+240*c/100,g=this.describeArc(a,r,s,p,u),m=this.describeArc(a,r,s,p,h),f=this.getColorAtValue(e,c),_=e.gauge_background_color||"var(--disabled-text-color)",v=(()=>{const t=e.gauge_color_mode||"gradient";if("gradient"===t&&e.gradient_stops&&e.gradient_stops.length>0){const t=e.gradient_display_mode||"full";if("value-based"===t||"cropped"===t)return this.getColorAtValue(e,c);{const t=[...e.gradient_stops].sort(((e,t)=>t.position-e.position));if(t.length>0)return t[0].color}}else if("segments"===t&&e.segments)return this.getColorAtValue(e,c);return e.gauge_color||"var(--primary-color)"})();return o.JW`
      ${this.renderGradientDefs(e)}
      
      <defs>
        <filter id="neon-glow-${e.id}" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
          <feMerge> 
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <filter id="neon-background-${e.id}" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="1" result="softBlur"/>
          <feMerge> 
            <feMergeNode in="softBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <filter id="neon-glow-filter-${e.id}" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="2" result="featheredGlow"/>
          <feMerge> 
            <feMergeNode in="featheredGlow"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <filter id="light-shine-filter-${e.id}" x="-100%" y="-100%" width="300%" height="300%">
          <feGaussianBlur stdDeviation="4" result="softGlow"/>
          <feGaussianBlur stdDeviation="8" result="wideGlow"/>
          <feMerge> 
            <feMergeNode in="wideGlow"/>
            <feMergeNode in="softGlow"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>
      
      <!-- Background arc with subtle glow -->
      <path
        d="${g}"
        fill="none"
        stroke="${_}"
        stroke-width="${n}"
        stroke-linecap="butt"
        filter="url(#neon-background-${e.id})"
        opacity="0.4"
      />

      <!-- Value arc with neon glow effect -->
      ${"segments"===e.gauge_color_mode?o.JW`
              <!-- Subtle glow behind entire filled section -->
              <path
                d="${m}"
                fill="none"
                stroke="${v}"
                stroke-width="${1.5*n}"
                stroke-linecap="butt"
                opacity="0.3"
                filter="url(#neon-glow-${e.id})"
              />
              
              ${this.renderSegmentedArcs(e,a,r,s,p,u,n,t)}
              ${this.renderNeonGlowAtEnd(e,a,r,s,p,u,n,t,v)}
            `:"gradient"===e.gauge_color_mode?o.JW`
              <!-- Subtle glow behind entire arc -->
              <path
                d="${m}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${1.5*n}"
                stroke-linecap="butt"
                opacity="0.3"
                filter="url(#neon-glow-${e.id})"
              />
              
              <!-- Main gradient arc -->
              <path
                d="${m}"
                fill="none"
                stroke="url(#gradient-${e.id})"
                stroke-width="${n}"
                stroke-linecap="butt"
                style="transition: stroke-dashoffset ${!1!==e.animation_enabled?e.animation_duration||"1000ms":"0ms"} ${e.animation_easing||"ease-out"};"
              />
              ${this.renderNeonGlowAtEnd(e,a,r,s,p,u,n,t,v)}
            `:o.JW`
              <!-- Subtle glow behind entire arc -->
              <path
                d="${m}"
                fill="none"
                stroke="${f}"
                stroke-width="${1.5*n}"
                stroke-linecap="butt"
                opacity="0.3"
                filter="url(#neon-glow-${e.id})"
              />
              
              <!-- Main solid color arc -->
              <path
                d="${m}"
                fill="none"
                stroke="${f}"
                stroke-width="${n}"
                stroke-linecap="butt"
                style="transition: stroke-dashoffset ${!1!==e.animation_enabled?e.animation_duration||"1000ms":"0ms"} ${e.animation_easing||"ease-out"};"
              />
              ${this.renderNeonGlowAtEnd(e,a,r,s,p,u,n,t,v)}
            `}

      <!-- Tick marks -->
      ${!1!==e.show_ticks?this.renderTickMarks(e,a,r,s,p,u,n):""}

      <!-- Pointer -->
      ${!1!==e.pointer_enabled?this.renderPointer(e,a,r,s,h):""}

      <!-- Min/Max labels -->
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,a,r,s,p,u)}
    `}renderDigitalGauge(e,t){const i=e.gauge_size||200,n=i/2,a=i/2,r=i/2-30,s=e.min_value||0,l=(t-s)/((e.max_value||100)-s)*100,d=Math.min(Math.max(l,0),100),c=-90,p=c+180*d/100,u=12,h=[];for(let t=0;t<u;t++){const i=c+180*t/u,s=c+180*(t+1)/u,l=t/u*100,p=(t+1)/u*100,g=6,m=g+(t+1)/u*(18-g),f=r-m/2,_=(i+s)/2,v=this.polarToCartesian(n,a,f,_),b=this.polarToCartesian(n,a,f,i),y=this.polarToCartesian(n,a,f,s),x=.3*Math.sqrt(Math.pow(y.x-b.x,2)+Math.pow(y.y-b.y,2)),k=v.x,w=v.y,S=_;let O;O="segments"===e.gauge_color_mode||d>=l?this.getColorAtValue(e,p):e.gauge_background_color||"var(--disabled-text-color)",h.push(o.JW`
        <rect
          x="${k-x/2}"
          y="${w-m/2}"
          width="${x}"
          height="${m}"
          fill="${O}"
          transform="rotate(${S} ${k} ${w})"
          rx="2"
        />
      `)}return o.JW`
      ${this.renderGradientDefs(e)}
      
      <!-- Digital blocks -->
      ${h}

      <!-- Tick marks -->
      ${!1!==e.show_ticks?this.renderTickMarks(e,n,a,r,c,90):""}

      <!-- Pointer -->
      ${!1!==e.pointer_enabled?this.renderPointer(e,n,a,r,p):""}

      <!-- Min/Max labels -->
      ${!1===e.show_min_max||e.show_tick_labels?"":this.renderMinMaxLabels(e,n,a,r,c,90)}
    `}renderTickMarks(e,t,i,n,a,r,s){const l=e.tick_count||10,d=r-a,c=[];for(let r=0;r<=l;r++){const p=a+d*r/l,u=s||e.gauge_thickness||15,h=n-u/2+2,g=n+u/2-2,m=this.polarToCartesian(t,i,h,p),f=this.polarToCartesian(t,i,g,p);if(c.push(o.JW`
        <line
          x1="${m.x}"
          y1="${m.y}"
          x2="${f.x}"
          y2="${f.y}"
          stroke="${e.tick_color||"var(--divider-color)"}"
          stroke-width="2"
          stroke-linecap="round"
        />
      `),e.show_tick_labels){const n=g+14,a=this.polarToCartesian(t,i,n,p),s=e.min_value||0,d=e.max_value||100,u=Math.round(s+(d-s)*r/l),h=e.tick_label_font_size||10;c.push(o.JW`<text x="${a.x}" y="${a.y}" fill="${e.min_max_color||"var(--secondary-text-color)"}" font-size="${h}" text-anchor="middle" dominant-baseline="middle">${u}</text>`)}}return o.JW`${c}`}renderPointer(e,t,i,n,a){const r=e.pointer_style||"needle",s=(e.pointer_length||80)/100*n,l=e.pointer_width||4,d=e.pointer_color||"var(--primary-color)",c=this.polarToCartesian(t,i,s,a);if("needle"===r){const e=2*l,n=a-90,r=a+90,s=this.polarToCartesian(t,i,e/2,n),p=this.polarToCartesian(t,i,e/2,r);return o.JW`
        <polygon
          points="${s.x},${s.y} ${p.x},${p.y} ${c.x},${c.y}"
          fill="${d}"
        />
        <circle cx="${t}" cy="${i}" r="${e}" fill="${d}" />
      `}if("triangle"===r){const e=3*l,n=a-90,r=a+90,s=this.polarToCartesian(t,i,e,n),p=this.polarToCartesian(t,i,e,r);return o.JW`
        <polygon
          points="${s.x},${s.y} ${p.x},${p.y} ${c.x},${c.y}"
          fill="${d}"
        />
      `}if("arrow"===r){const e=.2*s,n=this.polarToCartesian(c.x,c.y,e,a-150),r=this.polarToCartesian(c.x,c.y,e,a+150);return o.JW`
        <line
          x1="${t}"
          y1="${i}"
          x2="${c.x}"
          y2="${c.y}"
          stroke="${d}"
          stroke-width="${l}"
          stroke-linecap="round"
        />
        <line
          x1="${c.x}"
          y1="${c.y}"
          x2="${n.x}"
          y2="${n.y}"
          stroke="${d}"
          stroke-width="${l}"
          stroke-linecap="round"
        />
        <line
          x1="${c.x}"
          y1="${c.y}"
          x2="${r.x}"
          y2="${r.y}"
          stroke="${d}"
          stroke-width="${l}"
          stroke-linecap="round"
        />
      `}if("circle"===r)return o.JW`
        <line
          x1="${t}"
          y1="${i}"
          x2="${c.x}"
          y2="${c.y}"
          stroke="${d}"
          stroke-width="${l/2}"
          stroke-linecap="round"
        />
        <circle
          cx="${c.x}"
          cy="${c.y}"
          r="${2*l}"
          fill="${d}"
        />
      `;if("highlight"===r){const r=e.gauge_thickness||15,s=6,l=a-s/2,c=a+s/2,p=this.describeArc(t,i,n,l,c);return this.polarToCartesian(t,i,n,a),o.JW`
        <path d="${p}" fill="none" stroke="${d}" stroke-width="${r}" stroke-linecap="round" />
      `}if("cap"===r){const r=e.gauge_thickness||15,s=this.polarToCartesian(t,i,n,a);return o.JW`
        <circle cx="${s.x}" cy="${s.y}" r="${r/2}" fill="${d}" />
      `}return o.JW`
      <line
        x1="${t}"
        y1="${i}"
        x2="${c.x}"
        y2="${c.y}"
        stroke="${d}"
        stroke-width="${l}"
        stroke-linecap="round"
      />
    `}renderMinMaxLabels(e,t,i,n,a,r){const s=n+20,l=this.polarToCartesian(t,i,s,a),d=this.polarToCartesian(t,i,s,r),c=e.min_max_font_size||12,p=e.min_max_color||"var(--secondary-text-color)";return o.JW`
      <text
        x="${l.x}"
        y="${l.y}"
        fill="${p}"
        font-size="${c}"
        text-anchor="middle"
        dominant-baseline="middle"
      >
        ${e.min_value||0}
      </text>
      <text
        x="${d.x}"
        y="${d.y}"
        fill="${p}"
        font-size="${c}"
        text-anchor="middle"
        dominant-baseline="middle"
      >
        ${e.max_value||100}
      </text>
    `}getColorAtValue(e,t){const i=e.gauge_color_mode||"gradient";if("solid"===i)return e.gauge_color||"var(--primary-color)";if("segments"===i&&e.segments&&e.segments.length>0){const i=e.min_value||0,o=i+((e.max_value||100)-i)*t/100;for(const t of e.segments)if(o>=t.from&&o<=t.to)return t.color}if("gradient"===i&&e.gradient_stops&&e.gradient_stops.length>0){const i=[...e.gradient_stops].sort(((e,t)=>e.position-t.position));if(t<=i[0].position)return i[0].color;if(t>=i[i.length-1].position)return i[i.length-1].color;for(let e=0;e<i.length-1;e++){const o=i[e],n=i[e+1];if(t>=o.position&&t<=n.position){const e=n.position-o.position,i=(t-o.position)/e;return this.interpolateColor(o.color,n.color,i)}}}return e.gauge_color||"var(--primary-color)"}interpolateColor(e,t,i){const o=this.hexToRgb(e),n=this.hexToRgb(t);if(!o||!n)return e;const a=Math.round(o.r+(n.r-o.r)*i),r=Math.round(o.g+(n.g-o.g)*i),s=Math.round(o.b+(n.b-o.b)*i);return this.rgbToHex(a,r,s)}hexToRgb(e){if(e.startsWith("var(")||e.startsWith("rgb"))return null;const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}rgbToHex(e,t,i){return"#"+[e,t,i].map((e=>e.toString(16).padStart(2,"0"))).join("")}renderSegmentedArcs(e,t,i,n,a,r,s,l,d=!1){if(!e.segments||0===e.segments.length)return o.JW``;const c=e.min_value||0,p=e.max_value||100,u=r-a,h=[],g=[...e.segments].sort(((e,t)=>e.from-t.from));for(const e of g){const r=a+u*((e.from-c)/(p-c)*100)/100,l=a+u*((e.to-c)/(p-c)*100)/100;if(l>r){const a=this.describeArc(t,i,n,r,l);h.push(o.JW`
          <path
            d="${a}"
            fill="none"
            stroke="${e.color}"
            stroke-width="${s}"
            stroke-linecap="${d?"round":"butt"}"
          />
        `)}}return o.JW`${h}`}renderSegmentedArcsWithInsetStyle(e,t,i,n,a,r,s,l){if(!e.segments||0===e.segments.length)return o.JW``;const d=e.min_value||0,c=e.max_value||100,p=r-a,u=[],h=[...e.segments].sort(((e,t)=>e.from-t.from));for(const r of h){const l=a+p*((r.from-d)/(c-d)*100)/100,h=a+p*((r.to-d)/(c-d)*100)/100;if(h>l){const a=this.describeArc(t,i,n,l,h);u.push(o.JW`
          <!-- Shadow layer -->
          <path
            d="${a}"
            fill="none"
            stroke="${r.color}"
            stroke-width="${s+2}"
            stroke-linecap="butt"
            filter="url(#inset-shadow-${e.id})"
          />
          <!-- Main segment -->
          <path
            d="${a}"
            fill="none"
            stroke="${r.color}"
            stroke-width="${s}"
            stroke-linecap="butt"
          />
        `)}}return o.JW`${u}`}renderSegmentedArcsWith3DStyle(e,t,i,n,a,r,s,l){if(!e.segments||0===e.segments.length)return o.JW``;const d=e.min_value||0,c=e.max_value||100,p=r-a,u=[],h=[...e.segments].sort(((e,t)=>e.from-t.from));for(let r=0;r<h.length;r++){const l=h[r],g=a+p*((l.from-d)/(c-d)*100)/100,m=a+p*((l.to-d)/(c-d)*100)/100;if(m>g){const r=this.describeArc(t,i,n,g,m),d=Math.max(g-.5,a),c=this.describeArc(t,i,n,d,g);u.push(o.JW`
          <path
            d="${c}"
            fill="none"
            stroke="rgba(0,0,0,0.15)"
            stroke-width="${s}"
            stroke-linecap="butt"
            filter="url(#3d-separator-shadow-${e.id})"
          />
          <!-- Main segment with its own shadow for depth -->
          <path
            d="${r}"
            fill="none"
            stroke="${l.color}"
            stroke-width="${s}"
            stroke-linecap="butt"
            filter="url(#3d-segment-shadow-${e.id})"
          />
        `)}}return o.JW`${u}`}renderNeonGlowAtEnd(e,t,i,n,a,r,s,l,d){const c=e.min_value||0,p=(l-c)/((e.max_value||100)-c)*100,u=Math.min(Math.max(p,0),100);if(u<=0)return o.JW``;const h=a+(r-a)*u/100,g=this.polarToCartesian(t,i,n,h),m=`neon-glow-radial-${e.id}-${Date.now()}`;return o.JW`
      <defs>
        <radialGradient id="${m}">
          <stop offset="0%" stop-color="${d}" stop-opacity="1" />
          <stop offset="30%" stop-color="${d}" stop-opacity="0.8" />
          <stop offset="50%" stop-color="${d}" stop-opacity="0.4" />
          <stop offset="70%" stop-color="${d}" stop-opacity="0.15" />
          <stop offset="100%" stop-color="${d}" stop-opacity="0" />
        </radialGradient>
      </defs>
      
      <!-- Outer soft glow halo -->
      <circle
        cx="${g.x}"
        cy="${g.y}"
        r="${2*s}"
        fill="url(#${m})"
        opacity="0.6"
      />
      
      <!-- Middle glow layer -->
      <circle
        cx="${g.x}"
        cy="${g.y}"
        r="${1.2*s}"
        fill="url(#${m})"
        opacity="0.8"
      />
      
      <!-- Bright inner core -->
      <circle
        cx="${g.x}"
        cy="${g.y}"
        r="${.5*s}"
        fill="${d}"
        opacity="1"
        style="filter: brightness(1.5);"
      />
    `}renderGradientDefs(e){if("gradient"!==e.gauge_color_mode||!e.gradient_stops||0===e.gradient_stops.length)return o.JW``;e.gradient_display_mode;const t=[...e.gradient_stops].sort(((e,t)=>e.position-t.position)),i=`gradient-${e.id}`;return o.JW`
      <defs>
        <linearGradient id="${i}" x1="0%" y1="0%" x2="100%" y2="0%">
          ${t.map((e=>o.JW`
            <stop offset="${e.position}%" stop-color="${e.color}" />
          `))}
        </linearGradient>
      </defs>
    `}renderSegmentedCircle(e,t,i,n,a,r,s=!1){if(!e.segments||0===e.segments.length)return o.JW``;const l=e.min_value||0,d=e.max_value||100,c=2*Math.PI*n,p=[],u=[...e.segments].sort(((e,t)=>e.from-t.from));for(const e of u){const u=(e.from-l)/(d-l)*100,h=(e.to-l)/(d-l)*100;if(s){if(h>u){const r=(h-u)/100*c,s=c-u/100*c-r;p.push(o.JW`
            <circle
              cx="${t}"
              cy="${i}"
              r="${n}"
              fill="none"
              stroke="${e.color}"
              stroke-width="${a}"
              stroke-linecap="round"
              stroke-dasharray="${r} ${c-r}"
              stroke-dashoffset="${s}"
              transform="rotate(-90 ${t} ${i})"
            />
          `)}}else{const s=(r-l)/(d-l)*100;if(u<=s){const r=Math.min(h,s);if(r>u){const s=(r-u)/100*c,l=c-u/100*c-s;p.push(o.JW`
              <circle
                cx="${t}"
                cy="${i}"
                r="${n}"
                fill="none"
                stroke="${e.color}"
                stroke-width="${a}"
                stroke-linecap="butt"
                stroke-dasharray="${s} ${c-s}"
                stroke-dashoffset="${l}"
                transform="rotate(-90 ${t} ${i})"
              />
            `)}}}}return o.JW`${p}`}describeArc(e,t,i,o,n){const a=this.polarToCartesian(e,t,i,n),r=this.polarToCartesian(e,t,i,o),s=n-o<=180?"0":"1";return["M",a.x,a.y,"A",i,i,0,s,0,r.x,r.y].join(" ")}polarToCartesian(e,t,i,o){const n=(o-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}}getContainerStyles(e){return["display: flex","flex-direction: column","align-items: center","justify-content: center","width: 100%","overflow: hidden"].join("; ")}getNameStyles(e){const t=[`font-size: ${e.name_font_size||16}px`,`color: ${e.name_color||"var(--secondary-text-color)"}`,"font-weight: "+(e.name_bold?"bold":"normal"),"font-style: "+(e.name_italic?"italic":"normal"),"text-transform: "+(e.name_uppercase?"uppercase":"none"),"text-align: center"],i=[];e.name_underline&&i.push("underline"),e.name_strikethrough&&i.push("line-through"),i.length>0&&t.push(`text-decoration: ${i.join(" ")}`);const o=e.name_x_offset||0,n=e.name_y_offset||0;return"top"===e.name_position?(t.push("margin-top: 0"),t.push("margin-bottom: 8px"),t.push(`transform: translateX(${o}px) translateY(${n}px)`)):"bottom"===e.name_position?(t.push("margin-top: 8px"),t.push("margin-bottom: 0"),t.push(`transform: translateX(${o}px) translateY(${n}px)`)):(t.push("margin: 8px 0"),t.push(`transform: translateX(${o}px) translateY(${n}px)`)),t.join("; ")}getValueStyles(e){const t=[`font-size: ${e.value_font_size||24}px`,`color: ${e.value_color||"var(--primary-text-color)"}`,"font-weight: "+(e.value_bold?"bold":"normal"),"font-style: "+(e.value_italic?"italic":"normal"),"text-transform: "+(e.value_uppercase?"uppercase":"none"),"text-align: center"],i=[];e.value_underline&&i.push("underline"),e.value_strikethrough&&i.push("line-through"),i.length>0&&t.push(`text-decoration: ${i.join(" ")}`);const o=e.gauge_size||200,n=e.value_x_offset||0,a=e.value_y_offset||0;if("center"===e.value_position)t.push("position: absolute"),t.push("top: 50%"),t.push("left: 50%"),t.push(`transform: translate(${-50+n}%, ${-50+a}%)`);else if("top"===e.value_position){let i=16;"minimal"===e.gauge_style&&(i=o/2-20),t.push("position: absolute"),t.push(`top: ${i+a}px`),t.push(`left: ${50+n}%`),t.push("transform: translateX(-50%)"),t.push("z-index: 10")}else if("bottom"===e.value_position){let i=16;"speedometer"===e.gauge_style||"arc"===e.gauge_style?i=32:"radial"===e.gauge_style?i=o/2+16:"minimal"===e.gauge_style?i=o/2-20:"digital"===e.gauge_style&&(i=40),t.push("position: absolute"),t.push(`bottom: ${i-a}px`),t.push(`left: ${50+n}%`),t.push("transform: translateX(-50%)"),t.push("z-index: 10")}return t.join("; ")}validate(e){const t=e,i=[...super.validate(e).errors];return t.entity&&""!==t.entity.trim()||i.push("Entity is required"),void 0!==t.min_value&&void 0!==t.max_value&&t.min_value>=t.max_value&&i.push("Minimum value must be less than maximum value"),"attribute"===t.value_type&&(t.value_attribute_entity&&t.value_attribute_name||i.push("Attribute entity and attribute name are required when using attribute value type")),"template"===t.value_type&&(t.value_template&&""!==t.value_template.trim()||i.push("Template is required when using template value type")),{valid:0===i.length,errors:i}}getStyles(){return"\n      .uc-gauge-container {\n        position: relative;\n        width: 100%;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n      }\n      \n      .uc-gauge-wrapper {\n        position: relative;\n        display: inline-block;\n      }\n      \n      .uc-gauge-svg {\n        display: block;\n      }\n      \n      .uc-gauge-value-center {\n        pointer-events: none;\n      }\n      \n      .uc-gauge-value-bottom,\n      .uc-gauge-name {\n        width: 100%;\n        text-align: center;\n      }\n      \n      .uc-gauge-clickable {\n        cursor: pointer;\n      }\n    "}}},796:(e,t,i)=>{i.d(t,{K:()=>r});var o=i(5183),n=i(9811),a=i(456);class r{static render(e,t,i,n){var s,l,d,c;const p=(null===(s=e.locale)||void 0===s?void 0:s.language)||"en",u=n||(0,a.kg)("editor.actions.title",p,"Link Configuration");return o.qy`
      <div class="ultra-link-config">
        <style>
          .ultra-link-config {
            padding: 16px;
          }

          .field-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
          }

          .field-description {
            font-size: 13px;
            font-weight: 400;
            margin-bottom: 16px;
            color: var(--secondary-text-color);
            line-height: 1.4;
          }

          .behavior-group {
            margin-bottom: 24px;
          }

          /* Hide unwanted form elements */
          .ultra-link-config ha-form {
            display: block;
            margin: 0;
            padding: 0;
          }

          /* Hide redundant labels */
          .ultra-link-config ha-form .mdc-form-field > label,
          .ultra-link-config ha-form .mdc-text-field > label,
          .ultra-link-config ha-form .mdc-floating-label,
          .ultra-link-config ha-form .mdc-notched-outline__leading,
          .ultra-link-config ha-form .mdc-notched-outline__notch,
          .ultra-link-config ha-form .mdc-notched-outline__trailing,
          .ultra-link-config ha-form .mdc-floating-label--float-above,
          .ultra-link-config ha-form label[for],
          .ultra-link-config ha-form .ha-form-label,
          .ultra-link-config ha-form .form-label {
            display: none !important;
          }

          /* Hide labels containing underscores */
          .ultra-link-config ha-form label[data-label*='_'],
          .ultra-link-config ha-form .label-text:contains('_'),
          .ultra-link-config label:contains('_') {
            display: none !important;
          }

          /* Additional safeguards for underscore labels */
          .ultra-link-config ha-form .mdc-text-field-character-counter,
          .ultra-link-config ha-form .mdc-text-field-helper-text,
          .ultra-link-config ha-form mwc-formfield,
          .ultra-link-config ha-form .formfield {
            display: none !important;
          }
        </style>

        <div class="field-title" style="font-size: 18px; font-weight: 700; margin-bottom: 8px;">
          ${u}
        </div>
        <div
          class="field-description"
          style="font-size: 13px; font-weight: 400; margin-bottom: 16px; color: var(--secondary-text-color);"
        >
          ${(0,a.kg)("editor.actions.description",p,"Configure what happens when users interact with this element. Choose different actions for tap, hold, and double-tap gestures.")}
        </div>

        <!-- Tap Behavior -->
        <div class="tap-behavior-group" style="margin-bottom: 24px;">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,a.kg)("editor.actions.tap_behavior",p,"Tap Behavior")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
          >
            ${(0,a.kg)("editor.actions.tap_behavior_desc",p,"Action to perform when the element is tapped/clicked.")}
          </div>
          ${r.renderCleanForm(e,{action:(null===(l=t.tap_action)||void 0===l?void 0:l.action)||"default"},[{name:"action",selector:{select:{options:[{value:"nothing",label:"Nothing"},{value:"more-info",label:"More info"},{value:"toggle",label:"Toggle"},{value:"navigate",label:"Navigate"},{value:"url",label:"URL"},{value:"perform-action",label:"Perform action"},{value:"assist",label:"Assist"}],mode:"dropdown"}}}],(e=>{const o=Object.assign(Object.assign({},t.tap_action),{action:e.detail.value.action});i({tap_action:o})}))}
          ${r.renderActionFields(e,t.tap_action||{action:"nothing"},(e=>{const o=Object.assign(Object.assign({},t.tap_action),e);i({tap_action:o})}))}
        </div>

        <!-- Hold Behavior -->
        <div class="hold-behavior-group" style="margin-bottom: 24px;">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,a.kg)("editor.actions.hold_behavior",p,"Hold Behavior")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
          >
            ${(0,a.kg)("editor.actions.hold_behavior_desc",p,"Action to perform when the element is pressed and held.")}
          </div>
          ${r.renderCleanForm(e,{action:(null===(d=t.hold_action)||void 0===d?void 0:d.action)||"default"},[{name:"action",selector:{select:{options:[{value:"nothing",label:"Nothing"},{value:"more-info",label:"More info"},{value:"toggle",label:"Toggle"},{value:"navigate",label:"Navigate"},{value:"url",label:"URL"},{value:"perform-action",label:"Perform action"},{value:"assist",label:"Assist"}],mode:"dropdown"}}}],(e=>{const o=Object.assign(Object.assign({},t.hold_action),{action:e.detail.value.action});i({hold_action:o})}))}
          ${r.renderActionFields(e,t.hold_action||{action:"nothing"},(e=>{const o=Object.assign(Object.assign({},t.hold_action),e);i({hold_action:o})}))}
        </div>

        <!-- Double Tap Behavior -->
        <div class="double-tap-behavior-group">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,a.kg)("editor.actions.double_tap_behavior",p,"Double Tap Behavior")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
          >
            ${(0,a.kg)("editor.actions.double_tap_behavior_desc",p,"Action to perform when the element is double-tapped/clicked.")}
          </div>
          ${r.renderCleanForm(e,{action:(null===(c=t.double_tap_action)||void 0===c?void 0:c.action)||"default"},[{name:"action",selector:{select:{options:[{value:"nothing",label:"Nothing"},{value:"more-info",label:"More info"},{value:"toggle",label:"Toggle"},{value:"navigate",label:"Navigate"},{value:"url",label:"URL"},{value:"perform-action",label:"Perform action"},{value:"assist",label:"Assist"}],mode:"dropdown"}}}],(e=>{const o=Object.assign(Object.assign({},t.double_tap_action),{action:e.detail.value.action});i({double_tap_action:o})}))}
          ${r.renderActionFields(e,t.double_tap_action||{action:"nothing"},(e=>{const o=Object.assign(Object.assign({},t.double_tap_action),e);i({double_tap_action:o})}))}
        </div>
      </div>
    `}static renderCleanForm(e,t,i,n){return o.qy`
      <div class="ultra-clean-form">
        <ha-form .hass=${e} .data=${t} .schema=${i} @value-changed=${n}></ha-form>
      </div>
    `}static renderActionFields(e,t,i){switch(t.action){case"default":break;case"more-info":case"toggle":return o.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              Entity
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Select the entity to
              ${"more-info"===t.action?"show more info for":"toggle"}.
            </div>
            ${r.renderCleanForm(e,{entity:t.entity||""},[{name:"entity",selector:{entity:{}},label:"Entity"}],(e=>i({entity:e.detail.value.entity})))}
          </div>
        `;case"navigate":return o.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              Navigation Path
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Choose where to navigate or enter a custom path (e.g., /lovelace/dashboard).
            </div>
            ${r.renderNavigationPicker(e,t.navigation_path||"",(e=>i({navigation_path:e})))}
          </div>
        `;case"url":return o.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              URL Path
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Enter the URL to navigate to (e.g., https://www.example.com).
            </div>
            ${r.renderCleanForm(e,{url_path:t.url_path||""},[{name:"url_path",selector:{text:{}}}],(e=>i({url_path:e.detail.value.url_path})))}
          </div>
        `;case"perform-action":return o.qy`
          <div style="margin-top: 16px;">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              Service
            </div>
            <div
              class="field-description"
              style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              Choose the service to call or enter a custom service.
            </div>
            ${r.renderCleanForm(e,{service:t.service||""},[{name:"service",selector:{select:{options:[{value:"homeassistant.restart",label:"Restart Home Assistant"},{value:"homeassistant.stop",label:"Stop Home Assistant"},{value:"homeassistant.reload_core_config",label:"Reload Core Config"},{value:"homeassistant.reload_config_entry",label:"Reload Config Entry"},{value:"homeassistant.update_entity",label:"Update Entity"},{value:"system_log.clear",label:"Clear System Log"},{value:"recorder.purge",label:"Purge Recorder"},{value:"hassio.host_reboot",label:"Reboot Host System"},{value:"hassio.host_shutdown",label:"Shutdown Host System"},{value:"light.turn_on",label:"Turn On Light"},{value:"light.turn_off",label:"Turn Off Light"},{value:"light.toggle",label:"Toggle Light"},{value:"switch.turn_on",label:"Turn On Switch"},{value:"switch.turn_off",label:"Turn Off Switch"},{value:"switch.toggle",label:"Toggle Switch"},{value:"climate.set_temperature",label:"Set Temperature"},{value:"climate.turn_on",label:"Turn On Climate"},{value:"climate.turn_off",label:"Turn Off Climate"},{value:"media_player.play_media",label:"Play Media"},{value:"media_player.media_play",label:"Media Play"},{value:"media_player.media_pause",label:"Media Pause"},{value:"media_player.media_stop",label:"Media Stop"},{value:"media_player.volume_set",label:"Set Volume"},{value:"automation.trigger",label:"Trigger Automation"},{value:"automation.turn_on",label:"Enable Automation"},{value:"automation.turn_off",label:"Disable Automation"},{value:"script.turn_on",label:"Run Script"},{value:"scene.turn_on",label:"Activate Scene"},{value:"cover.open_cover",label:"Open Cover"},{value:"cover.close_cover",label:"Close Cover"},{value:"cover.toggle",label:"Toggle Cover"},{value:"lock.lock",label:"Lock"},{value:"lock.unlock",label:"Unlock"},{value:"notify.persistent_notification",label:"Send Notification"},{value:"input_boolean.toggle",label:"Toggle Input Boolean"},{value:"input_select.select_option",label:"Select Input Option"},{value:"custom",label:"Custom Service..."}],mode:"dropdown",custom_value:!0}}}],(e=>{var t;const o=(null===(t=e.detail.value)||void 0===t?void 0:t.service)||e.detail.value;i({service:o})}))}

            <div style="margin-top: 12px;">
              <div
                class="field-title"
                style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
              >
                Target Entity (optional)
              </div>
              <div
                class="field-description"
                style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
              >
                Choose an entity to target with this service call.
              </div>
              ${r.renderCleanForm(e,{entity:t.entity||""},[{name:"entity",selector:{entity:{}},label:"Entity"}],(e=>{var t;const o=(null===(t=e.detail.value)||void 0===t?void 0:t.entity)||e.detail.value;i({entity:o})}))}
            </div>

            <div style="margin-top: 12px;">
              <div
                class="field-title"
                style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
              >
                Service Data (optional)
              </div>
              <div
                class="field-description"
                style="font-size: 12px; font-weight: 400; margin-bottom: 8px; color: var(--secondary-text-color);"
              >
                Enter service data as YAML (e.g., entity_id: light.living_room).
              </div>
              ${r.renderCleanForm(e,{service_data:t.service_data?JSON.stringify(t.service_data,null,2):""},[{name:"service_data",selector:{text:{multiline:!0,type:"text"}}}],(e=>{try{const t=e.detail.value.service_data?JSON.parse(e.detail.value.service_data):void 0;i({service_data:t})}catch(e){}}))}
            </div>
          </div>
        `;default:return o.qy``}}static renderNavigationPicker(e,t,i){const o=[{value:"/lovelace",label:"Overview (/lovelace)"},{value:"/config",label:"Settings (/config)"},{value:"/config/dashboard",label:"Dashboards (/config/dashboard)"},{value:"/config/entities",label:"Entities (/config/entities)"},{value:"/config/devices",label:"Devices (/config/devices)"},{value:"/config/automations",label:"Automations (/config/automations)"},{value:"/config/scripts",label:"Scripts (/config/scripts)"},{value:"/config/scenes",label:"Scenes (/config/scenes)"},{value:"/developer-tools",label:"Developer Tools (/developer-tools)"},...Object.keys(e.panels).filter((t=>e.panels[t].url_path||"lovelace"===t)).map((t=>({value:e.panels[t].url_path||`/lovelace/${t}`,label:`${e.panels[t].title||t} (${e.panels[t].url_path||`/lovelace/${t}`})`})))];return r.renderCleanForm(e,{navigation_path:t},[{name:"navigation_path",selector:{select:{options:[{value:"",label:"Custom path..."},...o],mode:"dropdown",custom_value:!0}}}],(e=>i(e.detail.value.navigation_path)))}static getDefaultConfig(){return{tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"}}}static resolveDefaultAction(e,t){if(!e.entity||"default"!==e.action)return e;const i=e.entity;switch(i.split(".")[0]){case"button":return Object.assign(Object.assign({},e),{action:"perform-action",service:"button.press",entity:i});case"script":return Object.assign(Object.assign({},e),{action:"perform-action",service:"script.turn_on",entity:i});case"scene":return Object.assign(Object.assign({},e),{action:"perform-action",service:"scene.turn_on",entity:i});case"automation":case"switch":case"light":case"fan":case"input_boolean":case"lock":case"cover":return Object.assign(Object.assign({},e),{action:"toggle",entity:i});default:return Object.assign(Object.assign({},e),{action:"more-info",entity:i})}}static handleAction(e,t,i,o,a){let r;if(e&&e.action&&"default"!==e.action)r=e;else{const i=e||{action:"default"};!i.entity&&a&&(i.entity=a),r=this.resolveDefaultAction(i,t)}if(!1!==(null==o?void 0:o.haptic_feedback)&&"nothing"!==r.action&&"default"!==r.action)switch(r.action){case"toggle":(0,n.forwardHaptic)("light");break;case"more-info":case"navigate":case"url":default:(0,n.forwardHaptic)("selection");break;case"perform-action":case"assist":(0,n.forwardHaptic)("medium")}const s=r.service||r.perform_action;switch(r.action){case"more-info":if(r.entity){const e=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:r.entity}});null==i||i.dispatchEvent(e)}break;case"toggle":if(r.entity)t.callService("homeassistant","toggle",{entity_id:r.entity});else if(r.target){const e={};r.target.entity_id&&(e.entity_id=r.target.entity_id),r.target.device_id&&(e.device_id=r.target.device_id),r.target.area_id&&(e.area_id=r.target.area_id),r.target.floor_id&&(e.floor_id=r.target.floor_id),r.target.label_id&&(e.label_id=r.target.label_id),t.callService("homeassistant","toggle",e)}break;case"navigate":if(r.navigation_path){window.history.pushState(null,"",r.navigation_path);const e=new CustomEvent("location-changed",{bubbles:!0,composed:!0,detail:{replace:!1}});window.dispatchEvent(e)}break;case"url":r.url_path&&window.open(r.url_path,"_blank");break;case"perform-action":if(s){const[e,i]=s.split(".");if(e&&i){const o=Object.assign({},r.data||r.service_data);r.entity&&!o.entity_id&&(o.entity_id=r.entity),r.target&&(r.target.entity_id&&!o.entity_id&&(o.entity_id=r.target.entity_id),r.target.device_id&&!o.device_id&&(o.device_id=r.target.device_id),r.target.area_id&&!o.area_id&&(o.area_id=r.target.area_id),r.target.floor_id&&!o.floor_id&&(o.floor_id=r.target.floor_id),r.target.label_id&&!o.label_id&&(o.label_id=r.target.label_id));try{t.callService(e,i,o)}catch(e){console.error(`❌ Ultra Card: Failed to execute service ${s}:`,e)}}else console.warn(`⚠️ Ultra Card: Invalid service format "${s}". Expected format: domain.service`)}else console.warn("⚠️ Ultra Card: No service specified for perform-action",{action:r,serviceProperty:r.service,performActionProperty:r.perform_action});break;case"assist":const e=new CustomEvent("hass-assist",{bubbles:!0,composed:!0});null==i||i.dispatchEvent(e)}}}},866:(e,t,i)=>{i.d(t,{m:()=>l});var o=i(5183),n=i(9662),a=i(3063),r=i(2371),s=i(5575);class l{constructor(){this.renderUcForm=(e,t,i,o,n=!0)=>s.U.renderForm(e,t,i,o,n),this.renderFieldSection=(e,t,i,o,n,a)=>s.U.renderFieldSection(e,t,i,o,n,a),this.renderSettingsSection=(e,t,i)=>s.U.renderSettingsSection(e,t,i),this.injectUcFormStyles=()=>s.U.injectCleanFormStyles(),this.entityField=s.U.entity,this.textField=s.U.text,this.selectField=s.U.select,this.iconField=s.U.icon,this.booleanField=s.U.boolean,this.numberField=s.U.number,this.colorField=s.U.color,this.gridField=s.U.grid,this.expandableField=s.U.expandable}renderActionsTab(e,t,i,o,a){return n.A.render(e,t,(e=>o(e)))}renderOtherTab(e,t,i,o){return r.X.render(e,t,(e=>o(e)))}renderDesignTab(e,t,i,o){return a.T.render(e,t,(e=>o(e)))}validate(e){const t=[];return e.id||t.push("Module ID is required"),e.type||t.push("Module type is required"),{valid:0===t.length,errors:t}}generateId(e){return`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}renderFormField(e,t,i){return o.qy`
      <div class="form-field">
        <label class="form-label">${e}</label>
        ${t} ${i?o.qy`<div class="form-description">${i}</div>`:""}
      </div>
    `}renderColorPicker(e,t,i,n){return this.renderFormField(e,o.qy`
        <input
          type="color"
          .value=${t||"#000000"}
          @change=${e=>i(e.target.value)}
        />
      `,n)}renderNumberInput(e,t,i,n={},a){var r;const s=null!==(r=n.defaultValue)&&void 0!==r?r:0;return this.renderFormField(e,o.qy`
        <input
          type="number"
          .value=${null!=t?t:""}
          placeholder=${s.toString()}
          min=${n.min||0}
          max=${n.max||1e3}
          step=${n.step||1}
          @input=${e=>{const t=e.target.value.trim();i(""===t?s:Number(t))}}
        />
      `,a)}renderTextInput(e,t,i,n,a){return this.renderFormField(e,o.qy`
        <input
          type="text"
          .value=${t||""}
          placeholder=${n||""}
          @input=${e=>i(e.target.value)}
        />
      `,a)}renderEntityPicker(e,t,i,n,a,r,s){return this.renderFormField("",o.qy`
        <ha-form
          .hass=${n}
          .data=${{entity:t||""}}
          .schema=${[{name:"entity",selector:{entity:{}},label:e,description:r||""}]}
          .computeLabel=${e=>e.label||e.name}
          .computeDescription=${e=>e.description||""}
          @value-changed=${e=>i(e.detail.value.entity)}
        ></ha-form>
      `,"")}renderTextArea(e,t,i,n,a){return this.renderFormField(e,o.qy`
        <textarea
          .value=${t||""}
          placeholder=${n||""}
          rows="3"
          @input=${e=>i(e.target.value)}
        ></textarea>
      `,a)}renderSelect(e,t,i,n,a){return this.renderFormField(e,o.qy`
        <select
          .value=${t||""}
          @change=${e=>n(e.target.value)}
        >
          ${i.map((e=>o.qy`<option value="${e.value}">${e.label}</option>`))}
        </select>
      `,a)}renderCheckbox(e,t,i,n){return this.renderFormField("",o.qy`
        <label class="checkbox-wrapper">
          <input
            type="checkbox"
            .checked=${t||!1}
            @change=${e=>i(e.target.checked)}
          />
          ${e}
        </label>
      `,n)}renderConditionalFieldsGroup(e,t){return o.qy`
      <div class="conditional-fields-group">
        <div class="conditional-fields-header">${e}</div>
        <div class="conditional-fields-content">${t}</div>
      </div>
    `}triggerPreviewUpdate(){window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{const e=new CustomEvent("ultra-card-template-update",{bubbles:!0,composed:!0});window.dispatchEvent(e),window._ultraCardUpdateTimer=null}),50))}}},884:(e,t,i)=>{i.d(t,{Y:()=>h});var o=i(5183),n=i(866),a=(i(6768),i(796)),r=i(7987),s=i(8914),l=i(3063),d=i(2371),c=i(456),p=i(1281),u=i(2381);class h extends n.m{constructor(){super(...arguments),this.metadata={type:"image",title:"Images",description:"Display images and photos",author:"WJD Designs",version:"1.0.0",icon:"mdi:image",category:"media",tags:["image","picture","media","photo"]}}createDefault(e){return{id:e||this.generateId("image"),type:"image",image_type:"default",image_url:"",entity:"",image_entity:"",image_attribute:"",width:"100%",height:"200px",aspect_ratio:"auto",object_fit:"contain",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},filter_blur:0,filter_brightness:100,filter_contrast:100,filter_saturate:100,filter_hue_rotate:0,filter_opacity:100,rotation:0,border_radius:0,box_shadow:"none",hover_enabled:!1,hover_effect:"scale",hover_scale:105,hover_rotate:5,hover_opacity:90,hover_blur:0,hover_brightness:110,hover_shadow:"none",hover_translate_x:0,hover_translate_y:0,hover_transition:300,display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,n){var a;const r=e,l=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      ${s.Q.injectCleanFormStyles()}
      <div class="module-general-settings">
        <!-- Image Settings -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,c.kg)("editor.image.settings",l,"Image Settings")}
          </div>

          <!-- Image Source Type -->
          ${this.renderFieldSection((0,c.kg)("editor.image.source_type",l,"Image Source Type"),(0,c.kg)("editor.image.source_type_desc",l,"Choose how you want to specify the image source."),t,{image_type:r.image_type||"default"},[this.selectField("image_type",[{value:"default",label:(0,c.kg)("editor.image.source.default",l,"Default Image")},{value:"url",label:(0,c.kg)("editor.image.source.url",l,"Image URL")},{value:"upload",label:(0,c.kg)("editor.image.source.upload",l,"Upload Image")},{value:"entity",label:(0,c.kg)("editor.image.source.entity",l,"Entity Image")},{value:"attribute",label:(0,c.kg)("editor.image.source.attribute",l,"Entity Attribute")}])],(e=>{const t=e.detail.value.image_type;t!==(r.image_type||"default")&&(n({image_type:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}

          <!-- URL Image Source -->
          ${"url"===r.image_type?this.renderConditionalFieldsGroup((0,c.kg)("editor.image.url_section.title",l,"Image URL Configuration"),o.qy`
                  ${s.Q.renderField((0,c.kg)("editor.image.image_url",l,"Image URL"),(0,c.kg)("editor.image.image_url_desc",l,"Enter the direct URL to the image you want to display."),t,{image_url:r.image_url||""},[s.Q.createSchemaItem("image_url",{text:{}})],(e=>n({image_url:e.detail.value.image_url})))}
                `):""}

          <!-- Upload Image Source -->
          ${"upload"===r.image_type?this.renderConditionalFieldsGroup((0,c.kg)("editor.image.upload_section.title",l,"Upload Image Configuration"),o.qy`
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    ${(0,c.kg)("editor.image.upload",l,"Upload Image")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                  >
                    ${(0,c.kg)("editor.image.upload_desc",l,"Click to upload an image file from your device.")}
                  </div>
                  <input
                    type="file"
                    accept="image/*"
                    style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                    @change=${e=>this.handleFileUpload(e,n,t)}
                  />
                `):""}

          <!-- Entity Image Source -->
          ${"entity"===r.image_type?this.renderConditionalFieldsGroup((0,c.kg)("editor.image.entity_section.title",l,"Entity Image Configuration"),o.qy`
                  ${s.Q.renderField((0,c.kg)("editor.image.entity",l,"Entity"),(0,c.kg)("editor.image.entity_desc",l,"Select an entity that has an image (e.g., person, camera entities)."),t,{image_entity:r.image_entity||""},[s.Q.createSchemaItem("image_entity",{entity:{}})],(e=>{const t=e.detail.value.image_entity;t!==(r.image_entity||"")&&n({image_entity:t})}))}
                `):""}

          <!-- Attribute Image Source -->
          ${"attribute"===r.image_type?this.renderConditionalFieldsGroup((0,c.kg)("editor.image.attribute_section.title",l,"Entity Attribute Configuration"),o.qy`
                  ${s.Q.renderField((0,c.kg)("editor.image.entity",l,"Entity"),(0,c.kg)("editor.image.entity_attr_desc",l,"Select the entity that contains the image URL in one of its attributes."),t,{image_entity:r.image_entity||""},[s.Q.createSchemaItem("image_entity",{entity:{}})],(e=>{const t=e.detail.value.image_entity;t!==(r.image_entity||"")&&n({image_entity:t})}))}

                  <div style="margin-top: 16px;">
                    ${s.Q.renderField((0,c.kg)("editor.image.attribute_name",l,"Attribute Name"),(0,c.kg)("editor.image.attribute_name_desc",l,"Enter the attribute path that contains the image URL (dot notation supported, e.g., vehicle_data.vehicleDetails.generalDashboard)."),t,{image_attribute:r.image_attribute||""},[s.Q.createSchemaItem("image_attribute",{text:{}})],(e=>n({image_attribute:e.detail.value.image_attribute})))}
                  </div>
                `):""}

          <div class="field-group" style="margin-bottom: 16px; margin-top: 32px;">
            ${s.Q.renderField((0,c.kg)("editor.image.width",l,"Width"),(0,c.kg)("editor.image.width_desc",l,"Set the width (supports px, %, em, rem, vw, vh, etc.)."),t,{width:r.width||"100%"},[s.Q.createSchemaItem("width",{text:{}})],(e=>n({width:e.detail.value.width})))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${s.Q.renderField((0,c.kg)("editor.image.height",l,"Height"),(0,c.kg)("editor.image.height_desc",l,"Set the height (supports px, %, em, rem, vw, vh, etc.)."),t,{height:r.height||"200px"},[s.Q.createSchemaItem("height",{text:{}})],(e=>n({height:e.detail.value.height})))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,c.kg)("editor.image.aspect_ratio",l,"Aspect Ratio"),(0,c.kg)("editor.image.aspect_ratio_desc",l,"Set the aspect ratio of the image container."),t,{aspect_ratio:r.aspect_ratio||"auto"},[this.selectField("aspect_ratio",[{value:"auto",label:(0,c.kg)("editor.image.aspect.auto",l,"Auto (use height setting)")},{value:"1/1",label:(0,c.kg)("editor.image.aspect.square",l,"Square (1:1)")},{value:"4/3",label:(0,c.kg)("editor.image.aspect.standard",l,"Standard (4:3)")},{value:"3/2",label:(0,c.kg)("editor.image.aspect.photo",l,"Photo (3:2)")},{value:"16/9",label:(0,c.kg)("editor.image.aspect.widescreen",l,"Widescreen (16:9)")},{value:"21/9",label:(0,c.kg)("editor.image.aspect.ultrawide",l,"Ultrawide (21:9)")},{value:"2/3",label:(0,c.kg)("editor.image.aspect.portrait",l,"Portrait (2:3)")},{value:"9/16",label:(0,c.kg)("editor.image.aspect.mobile",l,"Mobile (9:16)")}])],(e=>{const t=e.detail.value.aspect_ratio;t!==(r.aspect_ratio||"auto")&&(n({aspect_ratio:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,c.kg)("editor.image.crop_fit",l,"Crop & Fit"),(0,c.kg)("editor.image.crop_fit_desc",l,"Control how the image fits within its container."),t,{object_fit:r.object_fit||"cover"},[this.selectField("object_fit",[{value:"cover",label:(0,c.kg)("editor.image.fit.cover",l,"Cover (crop to fill)")},{value:"contain",label:(0,c.kg)("editor.image.fit.contain",l,"Contain (fit entire image)")},{value:"fill",label:(0,c.kg)("editor.image.fit.fill",l,"Fill (stretch to fit)")},{value:"scale-down",label:(0,c.kg)("editor.image.fit.scale_down",l,"Scale Down")},{value:"none",label:(0,c.kg)("editor.image.fit.none",l,"None (original size)")}])],(e=>{const t=e.detail.value.object_fit;t!==(r.object_fit||"cover")&&(n({object_fit:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${s.Q.renderField((0,c.kg)("editor.image.border_radius",l,"Border Radius"),(0,c.kg)("editor.image.border_radius_desc",l,"Control the rounded corners of the image."),t,{border_radius:r.border_radius||8},[s.Q.createSchemaItem("border_radius",{number:{min:0,max:64,step:1}})],(e=>n({border_radius:e.detail.value.border_radius})))}
          </div>
        </div>

        <div
          class="settings-section"
          style="padding: 16px; border-radius: 8px; background: var(--secondary-background-color);"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px;"
          >
            ${(0,c.kg)("editor.image.filters",l,"Filters")}
          </div>
          <div class="field-group" style="margin-bottom: 16px;">
            ${s.Q.renderField((0,c.kg)("editor.image.filter.blur",l,"Blur"),(0,c.kg)("editor.image.filter.blur_desc",l,"Apply a blur effect to your image."),t,{filter_blur:r.filter_blur||0},[s.Q.createSchemaItem("filter_blur",{number:{min:0,max:20,step:1}})],(e=>n({filter_blur:e.detail.value.filter_blur})))}
          </div>
          <div class="field-group" style="margin-bottom: 16px;">
            ${s.Q.renderField((0,c.kg)("editor.image.filter.brightness",l,"Brightness (%)"),(0,c.kg)("editor.image.filter.brightness_desc",l,"Adjust the brightness of your image."),t,{filter_brightness:r.filter_brightness||100},[s.Q.createSchemaItem("filter_brightness",{number:{min:0,max:200,step:1}})],(e=>n({filter_brightness:e.detail.value.filter_brightness})))}
          </div>
          <div class="field-group" style="margin-bottom: 16px;">
            ${s.Q.renderField((0,c.kg)("editor.image.filter.contrast",l,"Contrast (%)"),(0,c.kg)("editor.image.filter.contrast_desc",l,"Modify the contrast of your image."),t,{filter_contrast:r.filter_contrast||100},[s.Q.createSchemaItem("filter_contrast",{number:{min:0,max:200,step:1}})],(e=>n({filter_contrast:e.detail.value.filter_contrast})))}
          </div>
          <div class="field-group" style="margin-bottom: 16px;">
            ${s.Q.renderField((0,c.kg)("editor.image.filter.saturation",l,"Saturation (%)"),(0,c.kg)("editor.image.filter.saturation_desc",l,"Adjust the saturation of your image."),t,{filter_saturate:r.filter_saturate||100},[s.Q.createSchemaItem("filter_saturate",{number:{min:0,max:200,step:1}})],(e=>n({filter_saturate:e.detail.value.filter_saturate})))}
          </div>

          <div class="field-group">
            ${s.Q.renderField((0,c.kg)("editor.image.rotation",l,"Rotation (°)"),(0,c.kg)("editor.image.rotation_desc",l,"Rotate the image clockwise (0-360 degrees)."),t,{rotation:r.rotation||0},[s.Q.createSchemaItem("rotation",{number:{min:0,max:360,step:1}})],(e=>n({rotation:e.detail.value.rotation})))}
          </div>
        </div>

        ${r.hover_enabled?o.qy`
              <div
                class="settings-section"
                style="padding: 16px; border-radius: 8px; background: var(--secondary-background-color);"
              >
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px;"
                >
                  ${(0,c.kg)("editor.image.hover.title",l,"Hover Effects")}
                </div>
                <div class="field-group" style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,c.kg)("editor.image.hover.effect_type",l,"Effect Type"),(0,c.kg)("editor.image.hover.effect_type_desc",l,"Choose the type of hover effect."),t,{effect:r.hover_effect||"scale"},[this.selectField("effect",[{value:"scale",label:(0,c.kg)("editor.image.hover.scale",l,"Scale (zoom in/out)")},{value:"rotate",label:(0,c.kg)("editor.image.hover.rotate",l,"Rotate")},{value:"fade",label:(0,c.kg)("editor.image.hover.fade",l,"Fade (opacity change)")},{value:"blur",label:(0,c.kg)("editor.image.hover.blur",l,"Blur")},{value:"brightness",label:(0,c.kg)("editor.image.hover.brightness",l,"Brightness")},{value:"glow",label:(0,c.kg)("editor.image.hover.glow",l,"Glow (box shadow)")},{value:"slide",label:(0,c.kg)("editor.image.hover.slide",l,"Slide (translate)")}])],(e=>{const t=e.detail.value.effect;t!==(r.hover_effect||"scale")&&(n({hover_effect:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
                </div>

                ${"scale"===r.hover_effect?o.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${s.Q.renderField((0,c.kg)("editor.image.hover.scale_amount",l,"Scale (%)"),(0,c.kg)("editor.image.hover.scale_amount_desc",l,"Adjust the scale of the image on hover."),t,{scale:r.hover_scale||105},[s.Q.createSchemaItem("scale",{number:{min:50,max:200,step:1}})],(e=>n({hover_scale:e.detail.value.scale})))}
                    </div>`:""}
                ${"rotate"===r.hover_effect?o.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${s.Q.renderField((0,c.kg)("editor.image.hover.rotate_amount",l,"Rotation (°)"),(0,c.kg)("editor.image.hover.rotate_amount_desc",l,"Rotate the image on hover."),t,{rotate:r.hover_rotate||5},[s.Q.createSchemaItem("rotate",{number:{min:-45,max:45,step:1}})],(e=>n({hover_rotate:e.detail.value.rotate})))}
                    </div>`:""}
                ${"fade"===r.hover_effect?o.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${s.Q.renderField((0,c.kg)("editor.image.hover.opacity",l,"Opacity (%)"),(0,c.kg)("editor.image.hover.opacity_desc",l,"Change the opacity of the image on hover."),t,{opacity:r.hover_opacity||90},[s.Q.createSchemaItem("opacity",{number:{min:0,max:100,step:1}})],(e=>n({hover_opacity:e.detail.value.opacity})))}
                    </div>`:""}
                ${"blur"===r.hover_effect?o.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${s.Q.renderField((0,c.kg)("editor.image.hover.blur_amount",l,"Blur (px)"),(0,c.kg)("editor.image.hover.blur_amount_desc",l,"Apply a blur effect to the image on hover."),t,{blur:r.hover_blur||2},[s.Q.createSchemaItem("blur",{number:{min:0,max:20,step:1}})],(e=>n({hover_blur:e.detail.value.blur})))}
                    </div>`:""}
                ${"brightness"===r.hover_effect?o.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${s.Q.renderField((0,c.kg)("editor.image.hover.brightness_amount",l,"Brightness (%)"),(0,c.kg)("editor.image.hover.brightness_amount_desc",l,"Adjust the brightness of the image on hover."),t,{brightness:r.hover_brightness||110},[s.Q.createSchemaItem("brightness",{number:{min:0,max:200,step:1}})],(e=>n({hover_brightness:e.detail.value.brightness})))}
                    </div>`:""}
                ${"glow"===r.hover_effect?o.qy`<div class="field-group" style="margin-bottom: 16px;">
                      ${this.renderFieldSection((0,c.kg)("editor.image.hover.glow_intensity",l,"Glow Intensity"),(0,c.kg)("editor.image.hover.glow_intensity_desc",l,"Choose the intensity of the glow effect on hover."),t,{shadow:r.hover_shadow||"medium"},[this.selectField("shadow",[{value:"light",label:(0,c.kg)("editor.image.hover.glow_light",l,"Light Glow")},{value:"medium",label:(0,c.kg)("editor.image.hover.glow_medium",l,"Medium Glow")},{value:"heavy",label:(0,c.kg)("editor.image.hover.glow_heavy",l,"Heavy Glow")},{value:"custom",label:(0,c.kg)("editor.image.hover.glow_custom",l,"Custom Shadow")}])],(e=>{const t=e.detail.value.shadow;t!==(r.hover_shadow||"medium")&&(n({hover_shadow:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
                    </div>`:""}
                ${"slide"===r.hover_effect?o.qy`
                      <div class="field-group" style="margin-bottom: 16px;">
                        ${s.Q.renderField((0,c.kg)("editor.image.hover.translate_x",l,"Horizontal (px)"),(0,c.kg)("editor.image.hover.translate_x_desc",l,"Translate the image horizontally on hover."),t,{translate_x:r.hover_translate_x||0},[s.Q.createSchemaItem("translate_x",{number:{min:-100,max:100,step:1}})],(e=>n({hover_translate_x:e.detail.value.translate_x})))}
                      </div>
                      <div class="field-group" style="margin-bottom: 16px;">
                        ${s.Q.renderField((0,c.kg)("editor.image.hover.translate_y",l,"Vertical (px)"),(0,c.kg)("editor.image.hover.translate_y_desc",l,"Translate the image vertically on hover."),t,{translate_y:r.hover_translate_y||0},[s.Q.createSchemaItem("translate_y",{number:{min:-100,max:100,step:1}})],(e=>n({hover_translate_y:e.detail.value.translate_y})))}
                      </div>
                    `:""}
              </div>
            `:""}
      </div>
    `}renderPreview(e,t,i,n){var s,l,d,h,g,m,f,_,v,b,y,x,k,w;const S=e;let O="";switch(S.image_type){case"default":default:O=p.P2;break;case"url":case"upload":S.image_url&&(O=(0,u.V)(t,S.image_url));break;case"entity":if(S.image_entity&&(null==t?void 0:t.states[S.image_entity])){const e=t.states[S.image_entity];(null===(s=e.attributes)||void 0===s?void 0:s.entity_picture)?O=e.attributes.entity_picture:e.state&&e.state.startsWith("http")&&(O=e.state)}break;case"attribute":if(S.image_entity&&S.image_attribute&&(null==t?void 0:t.states[S.image_entity])){const e=t.states[S.image_entity],i=this.getAttributeByPath(e.attributes,S.image_attribute);i&&"string"==typeof i&&(O=i)}}const A=S.rotation||0,C=[];S.filter_blur&&S.filter_blur>0&&C.push(`blur(${S.filter_blur}px)`),S.filter_brightness&&100!==S.filter_brightness&&C.push(`brightness(${S.filter_brightness}%)`),S.filter_contrast&&100!==S.filter_contrast&&C.push(`contrast(${S.filter_contrast}%)`),S.filter_saturate&&100!==S.filter_saturate&&C.push(`saturate(${S.filter_saturate}%)`);const $=C.length>0?C.join(" "):"none";let T="";const z=S.hover_enabled?`${S.hover_transition||300}ms`:"none";if(S.hover_enabled)switch(S.hover_effect||"scale"){case"scale":T=`transform: scale(${(S.hover_scale||105)/100})${0!==A?` rotate(${A}deg)`:""};`;break;case"rotate":T=`transform: rotate(${A+(S.hover_rotate||5)}deg);`;break;case"fade":T=`opacity: ${(S.hover_opacity||90)/100};`;break;case"blur":T=`filter: blur(${S.hover_blur||2}px);`;break;case"brightness":T=`filter: brightness(${S.hover_brightness||110}%);`;break;case"glow":let e="";switch(S.hover_shadow||"medium"){case"light":e="0 0 10px rgba(var(--rgb-primary-color), 0.5)";break;case"medium":e="0 0 20px rgba(var(--rgb-primary-color), 0.7)";break;case"heavy":e="0 0 30px rgba(var(--rgb-primary-color), 1)";break;case"custom":e=S.hover_shadow||"0 0 20px rgba(var(--rgb-primary-color), 0.7)"}T=`box-shadow: ${e};`;break;case"slide":T=`transform: translate(${S.hover_translate_x||0}px, ${S.hover_translate_y||0}px)${0!==A?` rotate(${A}deg)`:""};`}let P=S.height||"200px",E="auto";S.aspect_ratio&&"auto"!==S.aspect_ratio&&(E=S.aspect_ratio,P="auto");const I=S.design||{},j=this.getBorderWithDesign(I,S),M=this.addPixelUnit(null===(l=I.border_radius)||void 0===l?void 0:l.toString())||this.addPixelUnit(null===(d=S.border_radius)||void 0===d?void 0:d.toString())||"0",D=I.margin_left||(null===(g=null===(h=S.margin)||void 0===h?void 0:h.left)||void 0===g?void 0:g.toString())||S.margin_left||"auto",B=I.margin_right||(null===(f=null===(m=S.margin)||void 0===m?void 0:m.right)||void 0===f?void 0:f.toString())||S.margin_right||"auto",R=0!==A?`rotate(${A}deg)`:"",U=`\n      width: ${I.width||S.width||"100%"};\n      height: ${P};\n      aspect-ratio: ${E};\n      object-fit: ${S.object_fit||"cover"};\n      filter: ${$};\n      border: ${j};\n      border-radius: ${M};\n      transform: ${R};\n      transition: ${S.hover_enabled?`transform ${z} ease, filter ${z} ease, opacity ${z} ease, box-shadow ${z} ease`:"none"};\n      cursor: pointer;\n      display: block;\n      max-width: 100%;\n      max-height: 100%;\n      margin-left: ${D};\n      margin-right: ${B};\n    `,H=S.hover_enabled?T:"",J="auto"===D&&"auto"===B||"auto"===D||"auto"===B;let Q="center";if(!J)switch(S.alignment){case"left":Q="flex-start";break;case"center":Q="center";break;case"right":Q="flex-end"}const N={padding:I.padding_top||I.padding_bottom||I.padding_left||I.padding_right?`${this.addPixelUnit(I.padding_top)||"0px"} ${this.addPixelUnit(I.padding_right)||"0px"} ${this.addPixelUnit(I.padding_bottom)||"0px"} ${this.addPixelUnit(I.padding_left)||"0px"}`:"0",margin:I.margin_top||I.margin_bottom||D||B?`${I.margin_top||(null===(v=null===(_=S.margin)||void 0===_?void 0:_.top)||void 0===v?void 0:v.toString())||S.margin_top||"8px"} ${B} ${I.margin_bottom||(null===(y=null===(b=S.margin)||void 0===b?void 0:b.bottom)||void 0===y?void 0:y.toString())||S.margin_bottom||"8px"} ${D}`:"8px 0",background:I.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(I,t),backgroundSize:I.background_size||"cover",backgroundPosition:I.background_position||"center",backgroundRepeat:I.background_repeat||"no-repeat",position:I.position||"relative",top:I.top||"auto",bottom:I.bottom||"auto",left:I.left||"auto",right:I.right||"auto",zIndex:I.z_index||"auto",width:I.width||S.width||"100%",height:I.height||S.height||"auto",maxWidth:I.max_width||"100%",maxHeight:I.max_height||"none",minWidth:I.min_width||"none",minHeight:I.min_height||"auto",overflow:I.overflow||"visible",clipPath:I.clip_path||"none",backdropFilter:I.backdrop_filter||"none",boxShadow:I.box_shadow_h&&I.box_shadow_v?`${I.box_shadow_h||"0"} ${I.box_shadow_v||"0"} ${I.box_shadow_blur||"0"} ${I.box_shadow_spread||"0"} ${I.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};let L=null,F=null,q=!1,V=0,K=0;const G=null===(x=S.design)||void 0===x?void 0:x.hover_effect,Z=r.k.getHoverEffectClass(G);return o.qy`
      <div class="image-module-container" style=${this.styleObjectToCss(N)}>
        <div class="image-module-preview">
          <!-- Image Container with Alignment -->
          <div
            style="display: ${J?"block":"flex"}; justify-content: ${Q}; width: 100%;"
          >
            ${O?o.qy`
                  <img
                    src="${O}"
                    @error=${e=>{const t=e.currentTarget;t&&t.src!==p.aR&&(t.src=p.aR)}}
                    alt="${(0,c.kg)("editor.image.alt",(null===(k=null==t?void 0:t.locale)||void 0===k?void 0:k.language)||"en","Image")}"
                    style="${U}"
                    class="${Z}"
                    data-hover-style="${H}"
                    @pointerdown=${e=>{q=!1,F=setTimeout((()=>{q=!0;const o=S.hold_action||{action:"nothing"};o&&"nothing"!==o.action&&a.K.handleAction(o,t,e.target,i)}),500)}}
                    @pointerup=${e=>{if(F&&(clearTimeout(F),F=null),q)return void(q=!1);const o=Date.now();if(o-K<300&&1===V){L&&(clearTimeout(L),L=null),V=0;const o=S.double_tap_action||{action:"nothing"};o&&"nothing"!==o.action&&a.K.handleAction(o,t,e.target,i)}else V=1,K=o,L=setTimeout((()=>{V=0;const o=S.tap_action||{action:"nothing"};o&&"nothing"!==o.action&&a.K.handleAction(o,t,e.target,i)}),300)}}
                  />
                `:o.qy`
                  <div
                    class="${Z}"
                    style="
                      width: ${I.width||S.width||"100%"};
                      height: ${P};
                      aspect-ratio: ${E};
                      background: var(--secondary-background-color);
                      border: 2px dashed var(--divider-color);
                      border-radius: 0;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: var(--secondary-text-color);
                      font-size: 14px;
                      margin-left: ${D};
                      margin-right: ${B};
                    "
                  >
                    <div style="text-align: center;">
                      <ha-icon
                        icon="mdi:image-off"
                        style="font-size: 48px; margin-bottom: 8px; opacity: 0.5;"
                      ></ha-icon>
                      <div>
                        ${(0,c.kg)("editor.image.no_source",(null===(w=null==t?void 0:t.locale)||void 0===w?void 0:w.language)||"en","No image source configured")}
                      </div>
                    </div>
                  </div>
                `}
          </div>
        </div>
      </div>
    `}async handleFileUpload(e,t,i){var o;const n=null===(o=e.target.files)||void 0===o?void 0:o[0];if(n)try{t({image_url:await(0,u.m)(i,n),image_type:"upload"})}catch(e){console.error("Error uploading file:",e),alert(`Upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}}renderLogicTab(e,t,i,o){return d.X.render(e,t,(e=>o(e)))}renderDesignTab(e,t,i,o){return l.T.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors];switch(t.image_type){case"url":t.image_url&&""!==t.image_url.trim()||i.push("Image URL is required when using URL type");break;case"upload":t.image_url&&""!==t.image_url.trim()||i.push("Uploaded image is required when using upload type");break;case"entity":t.image_entity&&""!==t.image_entity.trim()||i.push("Image entity is required when using entity type");break;case"attribute":t.image_entity&&""!==t.image_entity.trim()||i.push("Entity is required when using attribute type"),t.image_attribute&&""!==t.image_attribute.trim()||i.push("Attribute name is required when using attribute type")}return t.link_enabled&&!t.link_url&&i.push("Link URL is required when link is enabled"),t.width&&"number"==typeof t.width&&(t.width<1||t.width>100)&&i.push("Width must be between 1 and 100 percent"),t.height&&"number"==typeof t.height&&t.height<1&&i.push("Height must be at least 1 pixel"),{valid:0===i.length,errors:i}}getBackgroundImageCSS(e,t){var i,o;if(!e.background_image_type||"none"===e.background_image_type)return"none";switch(e.background_image_type){case"upload":case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const n=t.states[e.background_image_entity];let a="";if((null===(i=n.attributes)||void 0===i?void 0:i.entity_picture)?a=n.attributes.entity_picture:(null===(o=n.attributes)||void 0===o?void 0:o.image)?a=n.attributes.image:n.state&&"string"==typeof n.state&&(n.state.startsWith("/")||n.state.startsWith("http"))&&(a=n.state),a)return a.startsWith("/local/")||a.startsWith("/media/")||a.startsWith("/"),`url("${a}")`}}return"none"}getAttributeByPath(e,t){if(!e||!t)return;const i=t.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").filter(Boolean);let o=e;for(const e of i){if(null==o)return;o=o[e]}return o}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}getStyles(){return"\n      .image-module-preview {\n        max-width: 100%;\n        overflow: hidden;\n        box-sizing: border-box;\n      }\n\n\n\n      .image-module-preview img {\n        max-width: 100%;\n        height: auto;\n        display: block;\n      }\n\n      .image-module-preview img:hover {\n        transition: all 0.3s ease;\n      }\n\n      /* Let HA handle dropdown positioning naturally */\n      .module-general-settings {\n        overflow: visible;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Field styling - ensure vertical stacking, no columns */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n        \n        margin-bottom: 4px !important;\n        display: block !important;\n        width: 100% !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n        width: 100% !important;\n      }\n\n      .field-group {\n        display: flex !important;\n        flex-direction: column !important;\n        width: 100% !important;\n        margin-bottom: 16px !important;\n      }\n\n      .field-group ha-form {\n        width: 100% !important;\n        display: block !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n    "}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}getBorderCSS(e){return e.border_style&&"none"!==e.border_style&&e.border_width?`${this.addPixelUnit(e.border_width)||"1px"} ${e.border_style} ${e.border_color||"var(--divider-color)"}`:"none"}getBorderWithDesign(e,t){return e.border_style&&"none"!==e.border_style&&e.border_width?`${this.addPixelUnit(e.border_width)||"1px"} ${e.border_style} ${e.border_color||"var(--divider-color)"}`:this.getBorderCSS(t)}}},927:(e,t,i)=>{i.d(t,{B:()=>n});class o{constructor(){this._favorites=[],this._listeners=new Set,this._loadFromStorage(),this._setupStorageListener()}getFavorites(){return[...this._favorites].sort(((e,t)=>new Date(t.created).getTime()-new Date(e.created).getTime()))}addFavorite(e,t,i,o=[]){const n=this._cloneRowWithNewIds(e),a={id:this._generateId(),name:t.trim(),description:null==i?void 0:i.trim(),row:n,created:(new Date).toISOString(),tags:o.map((e=>e.trim().toLowerCase())).filter(Boolean)};return this._favorites.push(a),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),a}removeFavorite(e){const t=this._favorites.findIndex((t=>t.id===e));return-1!==t&&(this._favorites[t],this._favorites.splice(t,1),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),!0)}updateFavorite(e,t){const i=this._favorites.findIndex((t=>t.id===e));return-1!==i&&(this._favorites[i]=Object.assign(Object.assign({},this._favorites[i]),t),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),!0)}getFavorite(e){return this._favorites.find((t=>t.id===e))}searchFavorites(e){const t=e.toLowerCase().trim();return t?this._favorites.filter((e=>{var i;return e.name.toLowerCase().includes(t)||(null===(i=e.description)||void 0===i?void 0:i.toLowerCase().includes(t))||e.tags.some((e=>e.includes(t)))})):this.getFavorites()}subscribe(e){return this._listeners.add(e),()=>this._listeners.delete(e)}debugFavorites(){console.log("=== Ultra Card Favorites Debug Info ==="),console.log("Storage Key:",o.STORAGE_KEY),console.log("Current Favorites Count:",this._favorites.length),console.log("Listeners Count:",this._listeners.size),console.log("LocalStorage Available:",this._isLocalStorageAvailable());try{const e=localStorage.getItem(o.STORAGE_KEY);if(console.log("Raw Storage Data:",e?`${e.length} characters`:"null"),console.log("Storage Data Valid:",e?"Valid JSON":"No data"),e){const t=JSON.parse(e);console.log("Parsed Data Type:",Array.isArray(t)?"Array":typeof t),console.log("Parsed Data Length:",Array.isArray(t)?t.length:"N/A")}}catch(e){console.error("Storage Data Error:",e)}console.log("Favorites List:",this._favorites.map((e=>({id:e.id,name:e.name,created:e.created,tags:e.tags.length})))),console.log("=====================================")}_cloneRowWithNewIds(e){const t=JSON.parse(JSON.stringify(e));return t.id=`row-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,t.columns=t.columns.map(((e,t)=>Object.assign(Object.assign({},e),{id:`col-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`,modules:e.modules.map(((e,t)=>Object.assign(Object.assign({},e),{id:`${e.type}-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`})))}))),t}_generateId(){return`favorite-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}_loadFromStorage(){try{if(!this._isLocalStorageAvailable())return void(this._favorites=[]);const e=localStorage.getItem(o.STORAGE_KEY);if(e){const t=JSON.parse(e);Array.isArray(t)?this._favorites=t.filter(this._isValidFavorite.bind(this)):this._favorites=[]}else this._favorites=[]}catch(e){console.error("Failed to load favorites from storage:",e),this._favorites=[]}}_saveToStorage(){try{if(!this._isLocalStorageAvailable())return;const e=JSON.stringify(this._favorites);localStorage.setItem(o.STORAGE_KEY,e)}catch(e){console.error("Failed to save favorites to storage:",e),e instanceof DOMException&&e.code===DOMException.QUOTA_EXCEEDED_ERR?(console.error("localStorage quota exceeded! Consider clearing old data or using fewer favorites."),this._handleStorageQuotaExceeded()):console.error("Unknown storage error:",e)}}_setupStorageListener(){window.addEventListener("storage",(e=>{e.key===o.STORAGE_KEY&&(this._loadFromStorage(),this._notifyListeners())})),window.addEventListener(o.SYNC_EVENT,(()=>{this._loadFromStorage(),this._notifyListeners()}))}_notifyListeners(){this._listeners.forEach((e=>e(this.getFavorites())))}_broadcastChange(){window.dispatchEvent(new CustomEvent(o.SYNC_EVENT))}_isValidFavorite(e){return e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.created&&e.row&&"string"==typeof e.row.id&&Array.isArray(e.row.columns)}_isLocalStorageAvailable(){try{const e="__ultra_card_storage_test__";return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return!1}}_handleStorageQuotaExceeded(){if(console.log("Attempting to free up storage space by removing oldest favorites..."),this._favorites.length<=1)return void console.error("Cannot free up space - only one or no favorites exist");const e=Math.max(1,Math.floor(.25*this._favorites.length)),t=[...this._favorites].sort(((e,t)=>new Date(e.created).getTime()-new Date(t.created).getTime())).slice(e);this._favorites=t,console.log(`Removed ${e} oldest favorites to free up storage space`);try{const e=JSON.stringify(this._favorites);localStorage.setItem(o.STORAGE_KEY,e),console.log("Successfully saved favorites after cleanup"),this._notifyListeners(),this._broadcastChange()}catch(e){console.error("Still cannot save after cleanup:",e)}}}o.STORAGE_KEY="ultra-card-favorites",o.SYNC_EVENT="ultra-card-favorites-changed";const n=new o;"undefined"!=typeof window&&(window.debugUltraCardFavorites=()=>n.debugFavorites())},933:(e,t,i)=>{i.d(t,{ucDashboardScannerService:()=>o});const o=new class{constructor(){this.hass=null}initialize(e){this.hass=e}async scanDashboard(){if(!this.hass)throw new Error("Dashboard scanner not initialized with Home Assistant instance");try{const e=await this.getLovelaceConfig();if(!e)return this.createEmptySnapshot();const t=this.extractViews(e),i=[];for(const o of t){const t=this.scanViewForUltraCards(o,e);i.push(...t)}return{cards:i,views:t,scanned_at:(new Date).toISOString(),card_count:i.length,dashboard_path:this.getCurrentDashboardPath()}}catch(e){throw console.error("❌ Dashboard scan failed:",e),new Error(`Failed to scan dashboard: ${e.message}`)}}async scanAllDashboards(){if(!this.hass)throw new Error("Dashboard scanner not initialized with Home Assistant instance");try{const e=await this.hass.callWS({type:"lovelace/dashboards/list"}),t=[],i=[];try{const e=await this.hass.callWS({type:"lovelace/config",url_path:null});if(e){const o=this.extractViews(e);i.push(...o);for(const i of o){const o=this.scanViewForUltraCards(i,e);t.push(...o)}}}catch(e){}if(Array.isArray(e))for(const o of e){const e=o.url_path||o.id;try{const o=await this.hass.callWS({type:"lovelace/config",url_path:e});if(o){const e=this.extractViews(o);i.push(...e);for(const i of e){const e=this.scanViewForUltraCards(i,o);t.push(...e)}}}catch(e){}}return{cards:t,views:i,scanned_at:(new Date).toISOString(),card_count:t.length,dashboard_path:"all"}}catch(e){throw console.error("❌ Global dashboard scan failed:",e),new Error(`Failed to scan all dashboards: ${e.message}`)}}async getDashboardViews(){if(!this.hass)throw new Error("Dashboard scanner not initialized");try{const e=await this.getLovelaceConfig();return e?this.extractViews(e):[]}catch(e){return console.error("Failed to get dashboard views:",e),[]}}async scanView(e){if(!this.hass)throw new Error("Dashboard scanner not initialized");try{const t=await this.getLovelaceConfig();if(!t)return[];const i=this.extractViews(t).find((t=>t.id===e||t.path===e));return i?this.scanViewForUltraCards(i,t):(console.warn(`View ${e} not found`),[])}catch(t){return console.error(`Failed to scan view ${e}:`,t),[]}}getCurrentDashboardPath(){const e=window.location.pathname.match(/\/lovelace\/([^\/]+)/);return e?e[1]:"default"}async getLovelaceConfig(){var e;if(!this.hass)return null;try{const t=this.getCurrentDashboardPath();try{const e=await this.hass.callWS({type:"lovelace/config",url_path:"default"===t?null:t});if(e)return e}catch(e){}try{const e=await this.hass.callWS({type:"lovelace/dashboards/list"});if(Array.isArray(e)){const i=e.find((e=>e.url_path===t||e.id===t));if(i){const e=await this.hass.callWS({type:"lovelace/config",url_path:i.url_path||i.id});if(e)return e}else try{const e=await this.hass.callWS({type:"lovelace/config",url_path:null});if(e)return e}catch(e){}}}catch(e){}const i=null===(e=document.querySelector("home-assistant"))||void 0===e?void 0:e.lovelace;if(i&&i.config)return i.config;const o=document.querySelector("hui-root");if(o){const e=o.lovelace;if(e&&e.config)return e.config}const n=document.querySelector("home-assistant");if(n&&n.lovelace&&n.lovelace.config)return n.lovelace.config;const a=document.querySelector("ha-panel-lovelace");if(a){const e=a.lovelace||a._lovelace;if(e&&e.config)return e.config}if(window.__lovelace){const e=window.__lovelace;if(e.config)return e.config}return null}catch(e){return console.error("❌ Error getting Lovelace config:",e),null}}extractViews(e){if(!e||!e.views)return[];const t=[];return e.views.forEach(((e,i)=>{t.push({id:e.path||`view_${i}`,title:e.title||e.path||`View ${i+1}`,path:e.path||`${i}`,icon:e.icon,panel:e.panel||!1,theme:e.theme})})),t}scanViewForUltraCards(e,t){if(!t||!t.views)return[];const i=[],o=t.views.findIndex((t=>t.path&&t.path===e.path||t.title&&t.title===e.title));if(-1===o)return i;const n=t.views[o];return"sections"===n.type&&Array.isArray(n.sections)?(n.sections.forEach(((t,o)=>{Array.isArray(t.cards)&&t.cards.forEach(((t,n)=>{if(this.isUltraCard(t))i.push({config:t,card_index:i.length,view_id:e.id,view_title:e.title,view_path:e.path,card_name:t.card_name||`Ultra Card ${i.length+1}`,section_index:o,card_index_in_section:n});else{const a=this.findNestedUltraCards(t);a.length>0&&a.forEach((t=>{i.push({config:t,card_index:i.length,view_id:e.id,view_title:e.title,view_path:e.path,card_name:t.card_name||`Ultra Card ${i.length+1}`,section_index:o,card_index_in_section:n})}))}}))})),i):n.cards&&Array.isArray(n.cards)?(n.cards.forEach(((t,o)=>{if(this.isUltraCard(t))i.push({config:t,card_index:o,view_id:e.id,view_title:e.title,view_path:e.path,card_name:t.card_name||`Ultra Card ${o+1}`});else{const n=this.findNestedUltraCards(t);n.length>0&&n.forEach((t=>{i.push({config:t,card_index:o,view_id:e.id,view_title:e.title,view_path:e.path,card_name:t.card_name||`Ultra Card ${o+1}`})}))}})),i):i}isUltraCard(e){return!(!e||"object"!=typeof e)&&("custom:ultra-card"===e.type||"custom:ultra-vehicle-card"===e.type||e.layout&&e.layout.rows)}findNestedUltraCards(e){const t=[];return e&&"object"==typeof e?(Array.isArray(e.cards)&&e.cards.forEach((e=>{this.isUltraCard(e)?t.push(e):t.push(...this.findNestedUltraCards(e))})),e.card&&(this.isUltraCard(e.card)?t.push(e.card):t.push(...this.findNestedUltraCards(e.card))),t):t}createEmptySnapshot(){return{cards:[],views:[],scanned_at:(new Date).toISOString(),card_count:0}}async canScan(){if(!this.hass)return!1;try{return null!==await this.getLovelaceConfig()}catch(e){return!1}}async getDashboardStats(){try{const e=await this.getLovelaceConfig();if(!e||!e.views)return{total_views:0,total_cards:0,ultra_cards:0};const t=e.views;let i=0,o=0;return t.forEach((e=>{e.cards&&Array.isArray(e.cards)&&(i+=e.cards.length,o+=e.cards.filter((e=>this.isUltraCard(e))).length)})),{total_views:t.length,total_cards:i,ultra_cards:o}}catch(e){return console.error("Failed to get dashboard stats:",e),{total_views:0,total_cards:0,ultra_cards:0}}}}},1281:(e,t,i)=>{i.d(t,{P2:()=>o,aR:()=>n});const o="data:image/jpeg;base64,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SAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIAAjhCSU0EAgAAAAAABgAAAAAAADhCSU0EMAAAAAAAAwEBAQA4QklNBC0AAAAAAAIAADhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBEQAAAAAABAAAAACAAACQAAAAkAAAAAAOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADSQAAAAYAAAAAAAAAAAAAA4QAAAWgAAAACgBVAG4AdABpAHQAbABlAGQALQAyAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAWgAAADhAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAADhAAAAABSZ2h0bG9uZwAABaAAAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAAAAAABXNsaWNlAAAAEgAAAAdzbGljZUlEbG9uZwAAAAAAAAAHZ3JvdXBJRGxvbmcAAAAAAAAABm9yaWdpbmVudW0AAAAMRVNsaWNlT3JpZ2luAAAADWF1dG9HZW5lcmF0ZWQAAAAAVHlwZWVudW0AAAAKRVNsaWNlVHlwZQAAAABJbWcgAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAA4QAAAAAUmdodGxvbmcAAAWgAAAAA3VybFRFWFQAAAABAAAAAAAAbnVsbFRFWFQAAAABAAAAAAAATXNnZVRFWFQAAAABAAAAAAAGYWx0VGFnVEVY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ADAAMgA1AAAAAQA4QklNBAYAAAAAAAcAAQAAAAEBAP/hDkRodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAzIDc5Ljk2OTBhODdmYywgMjAyNS8wMy8wNi0yMDo1MDoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI2LjggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDI1LTA3LTE0VDEzOjUyOjQ1LTA0OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyNS0wNy0xNFQxNDowNToxNi0wNDowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyNS0wNy0xNFQxNDowNToxNi0wNDowMCIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAxZDhhNDRlLTY0YTYtNGJlZi05NjFmLWNlZjZhMjJlOGExZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjNmMzgzZWM4LTk5OGEtMzM0Ny1iNzBjLWUzMDc3MDBiZjZlYiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjZlNjkyMzYwLWQzODMtNDBkMS1hMzE3LTcxZmQyMTA5MGNjNiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NmU2OTIzNjAtZDM4My00MGQxLWEzMTctNzFmZDIxMDkwY2M2IiBzdEV2dDp3aGVuPSIyMDI1LTA3LTE0VDEzOjUyOjQ1LTA0OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjYuOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDFkOGE0NGUtNjRhNi00YmVmLTk2MWYtY2VmNmEyMmU4YTFkIiBzdEV2dDp3aGVuPSIyMDI1LTA3LTE0VDE0OjA1OjE2LTA0OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjYuOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg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",n="/hacsfiles/Ultra-Card/assets/Ultra.jpg"},1338:(e,t,i)=>{i.d(t,{_:()=>r});var o=i(9247),n=i(5201);class a extends n.WL{constructor(e){if(super(e),this.it=o.s6,e.type!==n.OA.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===o.s6||null==e)return this._t=void 0,this.it=e;if(e===o.c0)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const t=[e];return t.raw=t,this._t={_$litType$:this.constructor.resultType,strings:t,values:[]}}}a.directiveName="unsafeHTML",a.resultType=1;const r=(0,n.u$)(a)},1371:(e,t,i)=>{i.d(t,{U:()=>a});var o=i(5183),n=i(866);i(6768);class a extends n.m{constructor(){super(...arguments),this.metadata={type:"animated_weather",title:"Animated Weather (PRO)",description:"Current weather display with animated icons",author:"WJD Designs",version:"1.0.0",icon:"mdi:weather-partly-cloudy",category:"content",tags:["weather","current","pro","premium","animated"]}}createDefault(e,t){const i=this._findWeatherEntity(t);return{id:e||this.generateId("animated_weather"),type:"animated_weather",weather_entity:i,temperature_entity:"",condition_entity:"",custom_entity:"",custom_entity_name:"",show_left_column:!0,show_center_column:!0,show_right_column:!0,column_gap:12,left_column_gap:8,right_column_gap:8,location_override_mode:"text",location_name:"",location_entity:"",show_location:!0,show_condition:!0,show_custom_entity:!0,show_date:!0,show_temperature:!0,show_temp_range:!0,location_size:16,condition_size:24,custom_entity_size:18,location_color:"var(--primary-text-color)",condition_color:"var(--primary-text-color)",custom_entity_color:"var(--primary-text-color)",main_icon_size:120,icon_style:"fill",date_size:16,temperature_size:64,temp_range_size:18,date_color:"var(--primary-text-color)",temperature_color:"var(--primary-text-color)",temp_range_color:"var(--primary-text-color)",module_background:"transparent",module_border:"transparent",tap_action:void 0,hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}_findWeatherEntity(e){if(!e)return"";const t=Object.keys(e.states).filter((e=>e.startsWith("weather.")));return t.length>0?t[0]:""}renderGeneralTab(e,t,i,n){return function(e,t,i,n,a){var r,s,l,d;const c=t;return null===(r=i.locale)||void 0===r||r.language,o.qy`
    ${e.injectUcFormStyles()}
    <style>
      .toggle-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 12px;
        padding: 4px 0;
        width: 100%;
        max-width: 100%;
      }
      .toggle-row .field-title {
        margin: 0 !important;
        padding: 0 !important;
        flex: 1 1 auto;
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
        line-height: 1.4;
        white-space: nowrap;
      }
      .toggle-row ha-switch {
        flex: 0 0 auto;
      }
      .full-width-field {
        width: 100%;
      }
      .full-width-field ha-form {
        width: 100%;
      }
      .full-width-color-picker {
        display: block;
        width: 100%;
      }
      .full-width-color-picker ultra-color-picker {
        display: block;
        width: 100%;
      }
    </style>
    <div class="module-general-settings">
      <!-- ============================================ -->
      <!-- COLUMN LAYOUT SETTINGS -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          Column Layout
        </div>

        <!-- Column Visibility Toggles -->
        <div class="toggle-row">
          <div class="field-title">Show Left Column</div>
          <ha-switch
            .checked=${!1!==c.show_left_column}
            @change=${e=>{const t=e.target;a({show_left_column:t.checked})}}
          ></ha-switch>
        </div>

        <div class="toggle-row">
          <div class="field-title">Show Center Column</div>
          <ha-switch
            .checked=${!1!==c.show_center_column}
            @change=${e=>{const t=e.target;a({show_center_column:t.checked})}}
          ></ha-switch>
        </div>

        <div class="toggle-row">
          <div class="field-title">Show Right Column</div>
          <ha-switch
            .checked=${!1!==c.show_right_column}
            @change=${e=>{const t=e.target;a({show_right_column:t.checked})}}
          ></ha-switch>
        </div>

        <!-- Column Gap -->
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 16px;"
        >
          Horizontal Column Gap
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          Space between visible columns in pixels (0-48)
        </div>
        <div class="full-width-field">
          ${e.renderUcForm(i,{column_gap:null!==(s=c.column_gap)&&void 0!==s?s:12},[e.numberField("column_gap",0,48,1)],(e=>a(e.detail.value)),!1)}
        </div>
      </div>

      <!-- ============================================ -->
      <!-- ENTITY CONFIGURATION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          Weather Entities
        </div>

        <!-- Weather Entity -->
        <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
          Weather Entity
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          Primary weather.* entity with current conditions
        </div>
        ${e.renderUcForm(i,{weather_entity:c.weather_entity||""},[e.entityField("weather_entity",["weather"])],(e=>a(e.detail.value)),!1)}

        <!-- Temperature Entity (Fallback) -->
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
        >
          Temperature Entity (Optional)
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          Fallback if not using weather entity
        </div>
        ${e.renderUcForm(i,{temperature_entity:c.temperature_entity||""},[e.entityField("temperature_entity",["sensor"])],(e=>a(e.detail.value)),!1)}

        <!-- Condition Entity (Fallback) -->
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
        >
          Condition Entity (Optional)
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          Fallback if not using weather entity
        </div>
        ${e.renderUcForm(i,{condition_entity:c.condition_entity||""},[e.entityField("condition_entity",["sensor"])],(e=>a(e.detail.value)),!1)}

        <!-- Custom Entity -->
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
        >
          Custom Entity (Optional)
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          Additional info to display in left column (e.g., humidity, wind)
        </div>
        ${e.renderUcForm(i,{custom_entity:c.custom_entity||""},[e.entityField("custom_entity")],(e=>a(e.detail.value)),!1)}

        <!-- Custom Entity Name -->
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
        >
          Custom Entity Name (Optional)
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          Override the displayed name for the custom entity
        </div>
        ${e.renderUcForm(i,{custom_entity_name:c.custom_entity_name||""},[e.textField("custom_entity_name")],(e=>a(e.detail.value)),!1)}
      </div>

      <!-- ============================================ -->
      <!-- LEFT COLUMN SETTINGS -->
      <!-- ============================================ -->
      ${!1!==c.show_left_column?o.qy`
            <div
              class="settings-section"
              style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px; border-left: 4px solid var(--primary-color);"
            >
              <div
                class="section-title"
                style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
              >
                Left Column Settings
              </div>

              <!-- Vertical Gap -->
              <div
                class="field-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
              >
                Vertical Gap
              </div>
              <div
                class="field-description"
                style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
              >
                Space between items within left column (0-32px)
              </div>
              <div class="full-width-field">
                ${e.renderUcForm(i,{left_column_gap:null!==(l=c.left_column_gap)&&void 0!==l?l:8},[e.numberField("left_column_gap",0,32,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <!-- Display Toggles -->
              <div
                class="subsection-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 12px; margin-top: 24px; color: var(--primary-text-color);"
              >
                Display Elements
              </div>

              <div class="toggle-row">
                <div class="field-title">Show Location</div>
                <ha-switch
                  .checked=${!1!==c.show_location}
                  @change=${e=>{const t=e.target;a({show_location:t.checked})}}
                ></ha-switch>
              </div>

              <div class="toggle-row">
                <div class="field-title">Show Condition</div>
                <ha-switch
                  .checked=${!1!==c.show_condition}
                  @change=${e=>{const t=e.target;a({show_condition:t.checked})}}
                ></ha-switch>
              </div>

              <div class="toggle-row">
                <div class="field-title">Show Custom Entity</div>
                <ha-switch
                  .checked=${!1!==c.show_custom_entity}
                  @change=${e=>{const t=e.target;a({show_custom_entity:t.checked})}}
                ></ha-switch>
              </div>

              <!-- Location Configuration -->
              <div
                class="subsection-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 12px; margin-top: 24px; color: var(--primary-text-color);"
              >
                Location Configuration
              </div>

              <!-- Location Override Mode -->
              <div
                class="field-title"
                style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
              >
                Location Override Mode
              </div>
              <div
                class="field-description"
                style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
              >
                Use text input or entity state for location name
              </div>
              ${e.renderUcForm(i,{location_override_mode:c.location_override_mode||"text"},[e.selectField("location_override_mode",[{value:"text",label:"Text Input"},{value:"entity",label:"Entity State"}])],(t=>{t.detail.value.location_override_mode!==c.location_override_mode&&(a(t.detail.value),setTimeout((()=>e.triggerPreviewUpdate()),50))}),!1)}
              ${"entity"===c.location_override_mode?o.qy`
                    <!-- Location Entity -->
                    <div
                      class="field-title"
                      style="font-size: 14px; font-weight: 600; margin-bottom: 4px; margin-top: 16px;"
                    >
                      Location Entity
                    </div>
                    <div
                      class="field-description"
                      style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
                    >
                      Entity to use for location (e.g., device_tracker for current location)
                    </div>
                    ${e.renderUcForm(i,{location_entity:c.location_entity||""},[e.entityField("location_entity")],(e=>a(e.detail.value)),!1)}
                  `:o.qy`
                    <!-- Location Name Text -->
                    <div
                      class="field-title"
                      style="font-size: 14px; font-weight: 600; margin-bottom: 4px; margin-top: 16px;"
                    >
                      Location Name
                    </div>
                    <div
                      class="field-description"
                      style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
                    >
                      Override location name (leave empty to use entity name)
                    </div>
                    ${e.renderUcForm(i,{location_name:c.location_name||""},[e.textField("location_name")],(e=>a(e.detail.value)),!1)}
                  `}

              <!-- Text Sizes -->
              <div
                class="subsection-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 12px; margin-top: 32px; color: var(--primary-text-color);"
              >
                Text Sizes
              </div>

              <div class="full-width-field" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
                >
                  Location Size (0-64px)
                </div>
                ${e.renderUcForm(i,{location_size:c.location_size||16},[e.numberField("location_size",0,64,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <div class="full-width-field" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
                >
                  Condition Size (0-96px)
                </div>
                ${e.renderUcForm(i,{condition_size:c.condition_size||24},[e.numberField("condition_size",0,96,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <div class="full-width-field">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
                >
                  Custom Entity Size (0-64px)
                </div>
                ${e.renderUcForm(i,{custom_entity_size:c.custom_entity_size||18},[e.numberField("custom_entity_size",0,64,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <!-- Colors -->
              <div
                class="subsection-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 12px; margin-top: 32px; color: var(--primary-text-color);"
              >
                Colors
              </div>

              <div class="full-width-color-picker" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                >
                  Location Color
                </div>
                <ultra-color-picker
                  .value="${c.location_color||"var(--primary-text-color)"}"
                  .hass="${i}"
                  @value-changed=${t=>{a({location_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
                ></ultra-color-picker>
              </div>

              <div class="full-width-color-picker" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                >
                  Condition Color
                </div>
                <ultra-color-picker
                  .value="${c.condition_color||"var(--primary-text-color)"}"
                  .hass="${i}"
                  @value-changed=${t=>{a({condition_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
                ></ultra-color-picker>
              </div>

              <div class="full-width-color-picker">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                >
                  Custom Entity Color
                </div>
                <ultra-color-picker
                  .value="${c.custom_entity_color||"var(--primary-text-color)"}"
                  .hass="${i}"
                  @value-changed=${t=>{a({custom_entity_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
                ></ultra-color-picker>
              </div>
            </div>
          `:""}

      <!-- ============================================ -->
      <!-- CENTER COLUMN SETTINGS -->
      <!-- ============================================ -->
      ${!1!==c.show_center_column?o.qy`
            <div
              class="settings-section"
              style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px; border-left: 4px solid var(--primary-color);"
            >
              <div
                class="section-title"
                style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
              >
                Center Column Settings
              </div>

              <!-- Icon Size -->
              <div
                class="field-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
              >
                Weather Icon Size
              </div>
              <div
                class="field-description"
                style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
              >
                Size of the main weather icon (0-300px)
              </div>
              <div class="full-width-field">
                ${e.renderUcForm(i,{main_icon_size:c.main_icon_size||120},[e.numberField("main_icon_size",0,300,10)],(e=>a(e.detail.value)),!1)}
              </div>

              <!-- Icon Style -->
              <div
                class="field-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
              >
                Icon Style
              </div>
              <div
                class="field-description"
                style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
              >
                Choose between filled or outlined animated icons
              </div>
              ${e.renderUcForm(i,{icon_style:c.icon_style||"fill"},[e.selectField("icon_style",[{value:"fill",label:"Filled"},{value:"line",label:"Outlined"}])],(t=>{t.detail.value.icon_style!==c.icon_style&&(a(t.detail.value),setTimeout((()=>e.triggerPreviewUpdate()),50))}),!1)}
            </div>
          `:""}

      <!-- ============================================ -->
      <!-- RIGHT COLUMN SETTINGS -->
      <!-- ============================================ -->
      ${!1!==c.show_right_column?o.qy`
            <div
              class="settings-section"
              style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px; border-left: 4px solid var(--primary-color);"
            >
              <div
                class="section-title"
                style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
              >
                Right Column Settings
              </div>

              <!-- Vertical Gap -->
              <div
                class="field-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
              >
                Vertical Gap
              </div>
              <div
                class="field-description"
                style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
              >
                Space between items within right column (0-32px)
              </div>
              <div class="full-width-field">
                ${e.renderUcForm(i,{right_column_gap:null!==(d=c.right_column_gap)&&void 0!==d?d:8},[e.numberField("right_column_gap",0,32,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <!-- Display Toggles -->
              <div
                class="subsection-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 12px; margin-top: 24px; color: var(--primary-text-color);"
              >
                Display Elements
              </div>

              <div class="toggle-row">
                <div class="field-title">Show Date</div>
                <ha-switch
                  .checked=${!1!==c.show_date}
                  @change=${e=>{const t=e.target;a({show_date:t.checked})}}
                ></ha-switch>
              </div>

              <div class="toggle-row">
                <div class="field-title">Show Temperature</div>
                <ha-switch
                  .checked=${!1!==c.show_temperature}
                  @change=${e=>{const t=e.target;a({show_temperature:t.checked})}}
                ></ha-switch>
              </div>

              <div class="toggle-row">
                <div class="field-title">Show High/Low Range</div>
                <ha-switch
                  .checked=${!1!==c.show_temp_range}
                  @change=${e=>{const t=e.target;a({show_temp_range:t.checked})}}
                ></ha-switch>
              </div>

              <!-- Text Sizes -->
              <div
                class="subsection-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 12px; margin-top: 24px; color: var(--primary-text-color);"
              >
                Text Sizes
              </div>

              <div class="full-width-field" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
                >
                  Date Size (0-64px)
                </div>
                ${e.renderUcForm(i,{date_size:c.date_size||16},[e.numberField("date_size",0,64,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <div class="full-width-field" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
                >
                  Temperature Size (0-128px)
                </div>
                ${e.renderUcForm(i,{temperature_size:c.temperature_size||64},[e.numberField("temperature_size",0,128,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <div class="full-width-field">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 4px;"
                >
                  High/Low Size (0-64px)
                </div>
                ${e.renderUcForm(i,{temp_range_size:c.temp_range_size||18},[e.numberField("temp_range_size",0,64,1)],(e=>a(e.detail.value)),!1)}
              </div>

              <!-- Colors -->
              <div
                class="subsection-title"
                style="font-size: 16px; font-weight: 600; margin-bottom: 12px; margin-top: 32px; color: var(--primary-text-color);"
              >
                Colors
              </div>

              <div class="full-width-color-picker" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                >
                  Date Color
                </div>
                <ultra-color-picker
                  .value="${c.date_color||"var(--primary-text-color)"}"
                  .hass="${i}"
                  @value-changed=${t=>{a({date_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
                ></ultra-color-picker>
              </div>

              <div class="full-width-color-picker" style="margin-bottom: 16px;">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                >
                  Temperature Color
                </div>
                <ultra-color-picker
                  .value="${c.temperature_color||"var(--primary-text-color)"}"
                  .hass="${i}"
                  @value-changed=${t=>{a({temperature_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
                ></ultra-color-picker>
              </div>

              <div class="full-width-color-picker">
                <div
                  class="field-title"
                  style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                >
                  High/Low Color
                </div>
                <ultra-color-picker
                  .value="${c.temp_range_color||"var(--primary-text-color)"}"
                  .hass="${i}"
                  @value-changed=${t=>{a({temp_range_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
                ></ultra-color-picker>
              </div>
            </div>
          `:""}

      <!-- ============================================ -->
      <!-- BACKGROUNDS -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          Backgrounds & Borders
        </div>

        <!-- Module Background -->
        <div class="full-width-color-picker" style="margin-bottom: 16px;">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            Module Background
          </div>
          <div
            class="field-description"
            style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
          >
            Overall background of the weather module
          </div>
          <ultra-color-picker
            .value="${c.module_background||"transparent"}"
            .hass="${i}"
            @value-changed=${t=>{a({module_background:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
          ></ultra-color-picker>
        </div>

        <!-- Module Border -->
        <div class="full-width-color-picker">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            Module Border Color
          </div>
          <div
            class="field-description"
            style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;"
          >
            Border color around the module
          </div>
          <ultra-color-picker
            .value="${c.module_border||"transparent"}"
            .hass="${i}"
            @value-changed=${t=>{a({module_border:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
          ></ultra-color-picker>
        </div>
      </div>
    </div>
  `}(this,e,t,0,n)}renderPreview(e,t,i,n){var a,r,s,l,d;const c=e,p=this._getWeatherData(t,c),u=(new Date).toLocaleDateString((null===(a=t.locale)||void 0===a?void 0:a.language)||"en",{weekday:"long",month:"long",day:"numeric"}),h=(p.temperatureUnit,Math.round(p.temperature)),g=c.icon_style||"fill",m=p.forecast[0],f=m?Math.round(m.temperature):h,_=m?Math.round(null!==(r=m.templow)&&void 0!==r?r:m.temperature-10):h-10,v=!1!==c.show_left_column,b=!1!==c.show_center_column,y=!1!==c.show_right_column;let x="";const k=[];return v&&k.push("minmax(0, 1fr)"),b&&k.push("auto"),y&&k.push("minmax(0, 1fr)"),x=k.join(" ")||"1fr",o.qy`
      <style>
        ${this.getStyles()}
      </style>
      <div
        class="animated-weather-module-container"
        style="
          --column-gap: ${null!==(s=c.column_gap)&&void 0!==s?s:12}px;
          --left-column-gap: ${null!==(l=c.left_column_gap)&&void 0!==l?l:8}px;
          --right-column-gap: ${null!==(d=c.right_column_gap)&&void 0!==d?d:8}px;
          --location-size: ${c.location_size||16}px;
          --condition-size: ${c.condition_size||24}px;
          --custom-entity-size: ${c.custom_entity_size||18}px;
          --date-size: ${c.date_size||16}px;
          --temperature-size: ${c.temperature_size||64}px;
          --temp-range-size: ${c.temp_range_size||18}px;
          --main-icon-size: ${c.main_icon_size||120}px;
          --location-color: ${c.location_color||"var(--primary-text-color)"};
          --condition-color: ${c.condition_color||"var(--primary-text-color)"};
          --custom-entity-color: ${c.custom_entity_color||"var(--primary-text-color)"};
          --date-color: ${c.date_color||"var(--primary-text-color)"};
          --temperature-color: ${c.temperature_color||"var(--primary-text-color)"};
          --temp-range-color: ${c.temp_range_color||"var(--primary-text-color)"};
          --module-background: ${c.module_background||"transparent"};
          --module-border: ${c.module_border||"transparent"};
        "
      >
        <div class="weather-main-grid" style="grid-template-columns: ${x};">
          <!-- Left Column: Location & Condition -->
          ${v?o.qy`
                <div class="weather-info-left">
                  ${!1!==c.show_location?o.qy`
                        <div class="weather-location">
                          <ha-icon icon="mdi:map-marker"></ha-icon>
                          ${p.location}
                        </div>
                      `:""}
                  ${!1!==c.show_condition?o.qy`
                        <div class="weather-condition">
                          ${this._formatCondition(p.condition)}
                        </div>
                      `:""}
                  ${!1!==c.show_custom_entity&&c.custom_entity&&t.states[c.custom_entity]?o.qy`
                        <div class="weather-custom-entity">
                          ${c.custom_entity_name||t.states[c.custom_entity].attributes.friendly_name||c.custom_entity}:
                          ${t.states[c.custom_entity].state}${t.states[c.custom_entity].attributes.unit_of_measurement||""}
                        </div>
                      `:""}
                </div>
              `:""}

          <!-- Center Column: Weather Icon -->
          ${b?o.qy`
                <div class="weather-icon-center">
                  <img
                    src="${this._getWeatherIcon(p.condition,g)}"
                    alt="${this._formatCondition(p.condition)}"
                    class="meteocon-icon large"
                  />
                </div>
              `:""}

          <!-- Right Column: Date & Temperature -->
          ${y?o.qy`
                <div class="weather-info-right">
                  ${!1!==c.show_date?o.qy` <div class="weather-date">${u}</div> `:""}
                  ${!1!==c.show_temperature?o.qy` <div class="weather-temp">${h}°</div> `:""}
                  ${!1!==c.show_temp_range?o.qy` <div class="weather-temp-range">${f}° / ${_}°</div> `:""}
                </div>
              `:""}
        </div>
      </div>
    `}_getWeatherData(e,t){var i,o,n,a,r,s,l,d,c,p;const u=e.states[t.weather_entity||""],h=e.states[t.temperature_entity||""],g=e.states[t.condition_entity||""];let m=(null===(i=null==u?void 0:u.attributes)||void 0===i?void 0:i.forecast)||[];0===m.length&&u&&(m=(null===(o=u.attributes)||void 0===o?void 0:o.forecast_daily)||(null===(n=u.attributes)||void 0===n?void 0:n.daily)||(null===(a=u.attributes)||void 0===a?void 0:a.forecasts)||[]);let f="Unknown Location";if("entity"===t.location_override_mode&&t.location_entity){const i=e.states[t.location_entity];i&&(f=i.state||(null===(r=i.attributes)||void 0===r?void 0:r.friendly_name)||f)}else f=t.location_name?t.location_name:(null===(s=null==u?void 0:u.attributes)||void 0===s?void 0:s.friendly_name)||f;const _=(null===(l=null==u?void 0:u.attributes)||void 0===l?void 0:l.temperature_unit)||"°F";return{temperature:(null===(d=null==u?void 0:u.attributes)||void 0===d?void 0:d.temperature)||parseFloat(null==h?void 0:h.state)||72,temperatureUnit:_,condition:(null==u?void 0:u.state)||(null==g?void 0:g.state)||"sunny",location:f,forecast:m,humidity:null===(c=null==u?void 0:u.attributes)||void 0===c?void 0:c.humidity,windSpeed:null===(p=null==u?void 0:u.attributes)||void 0===p?void 0:p.wind_speed}}_getWeatherIcon(e,t="fill"){return`https://cdn.jsdelivr.net/gh/basmilius/weather-icons@dev/production/${t}/svg/${{"clear-night":"clear-night","clear-day":"clear-day",cloudy:"cloudy",exceptional:"not-available",fog:"fog",hail:"hail",lightning:"thunderstorms","lightning-rainy":"thunderstorms-rain",partlycloudy:"partly-cloudy-day","partly-cloudy-night":"partly-cloudy-night",pouring:"extreme-rain",rainy:"rain",snowy:"snow","snowy-rainy":"sleet",sunny:"clear-day",windy:"wind","windy-variant":"extreme-wind"}[e]||"partly-cloudy-day"}.svg`}_formatCondition(e){return e.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}getStyles(){return"\n      .animated-weather-module-container {\n        border-radius: clamp(8px, 2%, 16px);\n        padding: clamp(12px, 2.5%, 20px) clamp(12px, 2%, 16px);\n        position: relative;\n        overflow: hidden;\n        background: var(--module-background);\n        border: 2px solid var(--module-border);\n        width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* ========== MAIN WEATHER GRID ========== */\n      .weather-main-grid {\n        display: grid;\n        gap: var(--column-gap, 12px);\n        align-items: center;\n        width: 100%;\n      }\n\n      @media (max-width: 600px) {\n        .weather-main-grid {\n          grid-template-columns: 1fr !important;\n          text-align: center;\n        }\n      }\n\n      /* Left Column */\n      .weather-info-left {\n        display: flex;\n        flex-direction: column;\n        gap: var(--left-column-gap, 8px) !important;\n        align-items: flex-start;\n        min-width: 0;\n        justify-content: center;\n      }\n\n      @media (max-width: 600px) {\n        .weather-info-left {\n          align-items: center;\n        }\n      }\n\n      .weather-location {\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        font-size: var(--location-size);\n        font-weight: 600;\n        color: var(--location-color);\n        overflow-wrap: break-word;\n        word-wrap: break-word;\n        margin: 0;\n        padding: 0;\n        line-height: 1.2;\n      }\n\n      .weather-location ha-icon {\n        --mdc-icon-size: calc(var(--location-size) + 2px);\n        flex-shrink: 0;\n      }\n\n      .weather-condition {\n        font-size: var(--condition-size);\n        font-weight: 500;\n        color: var(--condition-color);\n        text-transform: capitalize;\n        overflow-wrap: break-word;\n        word-wrap: break-word;\n        margin: 0;\n        padding: 0;\n        line-height: 1.2;\n      }\n\n      .weather-custom-entity {\n        font-size: var(--custom-entity-size);\n        font-weight: 500;\n        color: var(--custom-entity-color);\n        overflow-wrap: break-word;\n        word-wrap: break-word;\n        margin: 0;\n        padding: 0;\n        line-height: 1.2;\n      }\n\n      /* Center Column - Weather Icon */\n      .weather-icon-center {\n        width: var(--main-icon-size);\n        height: var(--main-icon-size);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .meteocon-icon {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n      }\n\n      .meteocon-icon.large {\n        width: var(--main-icon-size);\n        height: var(--main-icon-size);\n      }\n\n      /* Right Column */\n      .weather-info-right {\n        display: flex;\n        flex-direction: column;\n        gap: var(--right-column-gap, 8px) !important;\n        align-items: flex-end;\n        text-align: right;\n        min-width: 0;\n        justify-content: center;\n      }\n\n      @media (max-width: 600px) {\n        .weather-info-right {\n          align-items: center;\n          text-align: center;\n        }\n      }\n\n      .weather-date {\n        font-size: var(--date-size);\n        font-weight: 500;\n        color: var(--date-color);\n        text-transform: capitalize;\n        overflow-wrap: break-word;\n        word-wrap: break-word;\n        margin: 0;\n        padding: 0;\n        line-height: 1.2;\n      }\n\n      .weather-temp {\n        font-size: var(--temperature-size);\n        font-weight: 300;\n        color: var(--temperature-color);\n        line-height: 1;\n        overflow-wrap: break-word;\n        word-wrap: break-word;\n        margin: 0;\n        padding: 0;\n      }\n\n      .weather-temp-range {\n        font-size: var(--temp-range-size);\n        font-weight: 500;\n        color: var(--temp-range-color);\n        overflow-wrap: break-word;\n        word-wrap: break-word;\n        margin: 0;\n        padding: 0;\n        line-height: 1.2;\n      }\n\n      /* ========== RESPONSIVE ========== */\n      @media (max-width: 768px) {\n        .weather-main-grid {\n          grid-template-columns: 1fr !important;\n          text-align: center;\n        }\n\n        .weather-info-left,\n        .weather-info-right {\n          align-items: center;\n          text-align: center;\n        }\n\n        .weather-icon-center {\n          width: min(120px, 25vw);\n          height: min(120px, 25vw);\n          margin: 0 auto;\n        }\n\n        .meteocon-icon.large {\n          width: 100%;\n          height: 100%;\n        }\n\n        .weather-temp {\n          font-size: clamp(48px, 10vw, 56px);\n        }\n      }\n\n      @media (max-width: 480px) {\n        .animated-weather-module-container {\n          padding: clamp(12px, 3%, 16px);\n        }\n\n        .weather-temp {\n          font-size: clamp(36px, 9vw, 48px);\n        }\n\n        .weather-condition {\n          font-size: clamp(16px, 4vw, 18px);\n        }\n\n        .weather-icon-center {\n          width: min(100px, 22vw);\n          height: min(100px, 22vw);\n        }\n      }\n    "}validate(e){const t=[],i=e;return i.weather_entity||i.temperature_entity||t.push("At least one weather or temperature entity is required"),{valid:0===t.length,errors:t}}}},1394:(e,t,i)=>{i.d(t,{w:()=>b});var o=i(5183),n=i(866),a=i(4345),r=i(7987),s=i(796),l=i(9662),d=i(2371),c=i(8914),p=i(4276),u=i(9811),h=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let g=class extends o.WF{static get styles(){return o.AH`
      ha-entity-picker {
        width: 100%;
        display: block;
      }
    `}render(){return o.qy`
      <ha-entity-picker
        .hass=${this.hass}
        .label=${this.label}
        .value=${this.value||""}
        .entityFilter=${this.entityFilter}
        @value-changed=${this._valueChanged}
        allow-custom-entity
      ></ha-entity-picker>
    `}_valueChanged(e){e.stopPropagation();const t=e.detail.value;t!==this.value&&(this.value=t,(0,u.fireEvent)(this,"value-changed",{value:t}))}};h([(0,p.MZ)({attribute:!1})],g.prototype,"hass",void 0),h([(0,p.MZ)()],g.prototype,"label",void 0),h([(0,p.MZ)()],g.prototype,"value",void 0),h([(0,p.MZ)()],g.prototype,"entityFilter",void 0),g=h([(0,p.EM)("ultra-card-entity-picker")],g),i(6768);var m=i(2381),f=i(3057),_=i(456),v=i(2314);class b extends n.m{constructor(){super(...arguments),this.metadata={type:"graphs",title:"Graphs",description:"Display interactive charts and graphs with Home Assistant data",author:"WJD Designs",version:"1.0.0",icon:"mdi:chart-line",category:"data",tags:["charts","graphs","data","visualization","statistics","analytics"]},this._updateInterval=null,this._historyData={},this._historyError={},this._historyLoading={},this._deferredHistoryScheduled={},this.clickTimeout=null,this.holdTimeout=null,this.isHolding=!1,this.expandedEntities=new Set,this.DEFAULT_COLORS=["#2196F3","#4CAF50","#FF9800","#F44336","#9C27B0","#00BCD4","#FFEB3B","#795548","#607D8B","#E91E63"],this.FORECAST_ATTRIBUTE_LABELS={temperature:"Temperature",precipitation:"Precipitation",wind_speed:"Wind Speed",humidity:"Humidity",pressure:"Pressure",cloud_coverage:"Cloud Coverage"},this.FORECAST_ATTRIBUTE_UNITS={temperature:"°",precipitation:"mm",wind_speed:"km/h",humidity:"%",pressure:"hPa",cloud_coverage:"%"}}_getCacheStore(){const e=window;if(!e.__ultraGraphsCache)try{const t=localStorage.getItem("__ultraGraphsCache");e.__ultraGraphsCache=t?JSON.parse(t):{}}catch(t){e.__ultraGraphsCache={}}return e.__ultraGraphsCache}_persistCacheStore(e){try{localStorage.setItem("__ultraGraphsCache",JSON.stringify(e))}catch(e){}}_makeCacheKey(e){return"forecast"===(e.data_source||"history")?`forecast::${e.forecast_entity}::${e.forecast_type}::${e.time_period}`:`history::${(e.entities||[]).filter((e=>e.entity)).map((e=>`${e.entity}|${e.attribute||"state"}`)).join(";")}::${e.time_period}`}_tryReadCache(e){const t=this._getCacheStore(),i=this._makeCacheKey(e),o=t[i];if(!o)return null;const n=Date.now();return o.expiresAt&&o.expiresAt>n&&o.data?o.data:(delete t[i],this._persistCacheStore(t),null)}_writeCache(e,t){const i=this._getCacheStore();i[this._makeCacheKey(e)]={expiresAt:Date.now()+3e5,data:t},this._persistCacheStore(i)}createDefault(e,t){return{id:e||this.generateId("graphs"),type:"graphs",name:"New Graph",data_source:"history",forecast_type:"hourly",forecast_entity:"",chart_type:"line",entities:[],time_period:"24h",title:"Chart",chart_width:"100%",chart_width_percent:100,chart_height:345,background_color:"transparent",show_title:!0,chart_alignment:"center",show_display_name:!0,show_entity_value:!0,info_position:"top_left",show_legend:!0,legend_position:"bottom_left",show_grid:!0,smooth_curves:!0,show_tooltips:!0,show_slice_labels:!0,tap_action:void 0,hold_action:void 0,double_tap_action:void 0,template_mode:!1,template:"",display_mode:"always",display_conditions:[],smart_scaling:!0}}getChartTypeOptions(e){return[{value:"line",label:(0,_.kg)("editor.graphs.types.line",e,"Line Chart")},{value:"bar",label:(0,_.kg)("editor.graphs.types.bar",e,"Bar Chart")},{value:"pie",label:(0,_.kg)("editor.graphs.types.pie",e,"Pie Chart")},{value:"donut",label:(0,_.kg)("editor.graphs.types.donut",e,"Donut Chart")}]}getTimePeriodOptions(e,t){const i="forecast"===t?"Next":"Last";return[{value:"1h",label:(0,_.kg)("editor.graphs.period.1h",e,`${i} Hour`)},{value:"3h",label:(0,_.kg)("editor.graphs.period.3h",e,`${i} 3 Hours`)},{value:"6h",label:(0,_.kg)("editor.graphs.period.6h",e,`${i} 6 Hours`)},{value:"12h",label:(0,_.kg)("editor.graphs.period.12h",e,`${i} 12 Hours`)},{value:"24h",label:(0,_.kg)("editor.graphs.period.24h",e,`${i} 24 Hours`)},{value:"2d",label:(0,_.kg)("editor.graphs.period.2d",e,`${i} 2 Days`)},{value:"7d",label:(0,_.kg)("editor.graphs.period.7d",e,`${i} Week`)},{value:"30d",label:(0,_.kg)("editor.graphs.period.30d",e,`${i} Month`)},{value:"90d",label:(0,_.kg)("editor.graphs.period.90d",e,`${i} 3 Months`)},{value:"365d",label:(0,_.kg)("editor.graphs.period.365d",e,`${i} Year`)}]}getAggregationOptions(e){return[{value:"mean",label:(0,_.kg)("editor.graphs.agg.mean",e,"Average")},{value:"sum",label:(0,_.kg)("editor.graphs.agg.sum",e,"Sum")},{value:"min",label:(0,_.kg)("editor.graphs.agg.min",e,"Minimum")},{value:"max",label:(0,_.kg)("editor.graphs.agg.max",e,"Maximum")},{value:"median",label:(0,_.kg)("editor.graphs.agg.median",e,"Median")},{value:"first",label:(0,_.kg)("editor.graphs.agg.first",e,"First Value")},{value:"last",label:(0,_.kg)("editor.graphs.agg.last",e,"Last Value")},{value:"count",label:(0,_.kg)("editor.graphs.agg.count",e,"Count")},{value:"delta",label:(0,_.kg)("editor.graphs.agg.delta",e,"Change")}]}getLegendPositionOptions(e){return[{value:"top",label:(0,_.kg)("editor.graphs.position.top",e,"Top")},{value:"bottom",label:(0,_.kg)("editor.graphs.position.bottom",e,"Bottom")},{value:"left",label:(0,_.kg)("editor.graphs.position.left",e,"Left")},{value:"right",label:(0,_.kg)("editor.graphs.position.right",e,"Right")},{value:"none",label:(0,_.kg)("editor.graphs.position.hidden",e,"Hidden")}]}renderGeneralTab(e,t,i,n){var a,r,s,l,d,p,u,h;const g=e,m=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      <div class="uc-graphs-general-tab">
        ${c.Q.injectCleanFormStyles()}

        <!-- Data Source Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;"
          >
            <ha-icon icon="mdi:database" style="color: var(--primary-color);"></ha-icon>
            ${(0,_.kg)("editor.graphs.data_source.title",m,"Data Source")}
          </div>

          ${this.renderFieldSection((0,_.kg)("editor.graphs.data_source.mode",m,"Mode"),(0,_.kg)("editor.graphs.data_source.desc",m,"Choose between historical data or weather forecasts."),t,{data_source:g.data_source||"history"},[this.selectField("data_source",[{value:"history",label:(0,_.kg)("editor.graphs.mode.history",m,"History")},{value:"forecast",label:(0,_.kg)("editor.graphs.mode.forecast",m,"Forecast")}])],(e=>{const t=e.detail.value.data_source;t!==(g.data_source||"history")&&(n({data_source:t}),delete this._historyData[g.id],setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
          ${"forecast"===g.data_source?o.qy`
                <div class="conditional-fields-group" style="padding: 16px; margin-top: 12px;">
                  ${c.Q.renderField((0,_.kg)("editor.graphs.forecast_entity",m,"Weather Entity"),(0,_.kg)("editor.graphs.forecast_entity_desc",m,"Select a weather entity for forecasts."),t,{forecast_entity:g.forecast_entity||""},[c.Q.createSchemaItem("forecast_entity",{entity:{domain:"weather"}})],(e=>{var t;n({forecast_entity:(null===(t=e.detail.value)||void 0===t?void 0:t.forecast_entity)||e.detail.value})}))}
                  <div style="margin-top: 16px;">
                    ${this.renderFieldSection((0,_.kg)("editor.graphs.forecast_type",m,"Forecast Type"),(0,_.kg)("editor.graphs.forecast_type_desc",m,"Hourly or daily forecasts."),t,{forecast_type:g.forecast_type||"hourly"},[this.selectField("forecast_type",[{value:"hourly",label:(0,_.kg)("editor.graphs.type.hourly",m,"Hourly")},{value:"daily",label:(0,_.kg)("editor.graphs.type.daily",m,"Daily")}])],(e=>{const t=e.detail.value.forecast_type;t!==g.forecast_type&&(n({forecast_type:t}),delete this._historyData[g.id],delete this._historyError[g.id],delete this._historyLoading[g.id],delete this._deferredHistoryScheduled[g.id],setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
                  </div>
                </div>
              `:""}
        </div>

        <!-- Chart Type Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;"
          >
            <ha-icon icon="mdi:chart-line" style="color: var(--primary-color);"></ha-icon>
            ${(0,_.kg)("editor.graphs.chart_type.title",m,"Chart Type")}
          </div>

          ${this.renderFieldSection((0,_.kg)("editor.graphs.chart_type.type",m,"Type"),(0,_.kg)("editor.graphs.chart_type.desc",m,"Select the visualization style for your data."),t,{chart_type:g.chart_type},[this.selectField("chart_type",this.getChartTypeOptions(m))],(e=>{const t=e.detail.value.chart_type;t!==g.chart_type&&(n({chart_type:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
        </div>

        <!-- Data Sources Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;"
          >
            <ha-icon icon="mdi:database" style="color: var(--primary-color);"></ha-icon>
            ${"forecast"===g.data_source?(0,_.kg)("editor.graphs.forecast_attributes.title",m,"Forecast Attributes"):(0,_.kg)("editor.graphs.data_sources.title",m,"Data Sources")}
          </div>
          ${"forecast"===g.data_source?o.qy`<div
                style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.08); border-radius: 8px; border-left: 3px solid var(--primary-color);"
              >
                ${(0,_.kg)("editor.graphs.forecast_attributes.desc",m,"Select which forecast values to display from the weather entity configured above. Each attribute will be shown as a separate line on the graph.")}
              </div>`:""}

          <div class="entities-grid" style="display: grid; gap: 12px;">
            ${(null===(r=g.entities)||void 0===r?void 0:r.map(((e,i)=>{var a,r,s;return o.qy`
                <div
                  class="entity-card"
                  style="
                    background: var(--primary-background-color); 
                    border-radius: 8px; 
                    padding: 16px; 
                    border-left: 4px solid ${e.color||this._getDefaultColor(i)};
                    position: relative;
                    transition: all 0.2s ease;
                  "
                >
                  ${((null===(a=g.entities)||void 0===a?void 0:a.length)||0)>1?o.qy`
                        <ha-icon-button
                          @click=${()=>this._removeEntity(g,i,n)}
                          style="
                        position: absolute;
                        top: 8px;
                        right: 8px;
                        --mdc-icon-button-size: 32px;
                        --mdc-icon-size: 16px;
                        color: var(--error-color);
                      "
                        >
                          <ha-icon icon="mdi:close"></ha-icon>
                        </ha-icon-button>
                      `:""}

                  <div
                    style="display: grid; gap: 12px; margin-top: ${((null===(r=g.entities)||void 0===r?void 0:r.length)||0)>1?"20px":"0"};"
                  >
                    <!-- Entity Header -->
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                      <div style="flex: 1; display: flex; align-items: center; gap: 8px;">
                        <div
                          style="
                             width: 12px;
                             height: 12px;
                             background: ${e.color||this._getDefaultColor(i)};
                             border-radius: 2px;
                             flex-shrink: 0;
                           "
                        ></div>
                        <span
                          style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                        >
                          ${e.name||(e.entity?(null===(s=t.states[e.entity])||void 0===s?void 0:s.attributes.friendly_name)||e.entity.split(".")[1]:`Entity ${i+1}`)}
                        </span>
                      </div>
                    </div>

                    <!-- Basic Settings (Always Visible) -->
                    <div style="display: grid; gap: 12px;">
                      <!-- Entity Picker (History Mode Only) -->
                      ${"forecast"!==g.data_source?c.Q.renderField((0,_.kg)("editor.graphs.entity.label",m,"Entity"),(0,_.kg)("editor.graphs.entity.desc",m,"Select an entity to plot."),t,{entity:e.entity||""},[c.Q.createSchemaItem("entity",{entity:{}})],(e=>{var t,o;this._updateEntity(g,i,{entity:(null===(t=e.detail.value)||void 0===t?void 0:t.entity)||(null===(o=e.detail.value)||void 0===o?void 0:o.entity)||e.detail.value},n)})):""}

                      <!-- Forecast Attribute Selection (Forecast Mode - Always Visible) -->
                      ${"forecast"===g.data_source?this.renderFieldSection((0,_.kg)("editor.graphs.entity.forecast_attr",m,"Forecast Attribute"),(0,_.kg)("editor.graphs.entity.forecast_attr_desc",m,"Which forecast value to plot on the graph."),t,{forecast_attribute:e.forecast_attribute||"temperature"},[this.selectField("forecast_attribute",[{value:"temperature",label:(0,_.kg)("editor.graphs.forecast.temp",m,"Temperature")},{value:"precipitation",label:(0,_.kg)("editor.graphs.forecast.precip",m,"Precipitation")},{value:"wind_speed",label:(0,_.kg)("editor.graphs.forecast.wind",m,"Wind Speed")},{value:"humidity",label:(0,_.kg)("editor.graphs.forecast.humidity",m,"Humidity")},{value:"pressure",label:(0,_.kg)("editor.graphs.forecast.pressure",m,"Pressure")},{value:"cloud_coverage",label:(0,_.kg)("editor.graphs.forecast.clouds",m,"Cloud Coverage")}])],(t=>{const o=t.detail.value.forecast_attribute;o!==e.forecast_attribute&&(this._updateEntity(g,i,{forecast_attribute:o},n),setTimeout((()=>this.triggerPreviewUpdate()),50))})):""}

                      <!-- Display Name -->
                      <input
                        type="text"
                        .value=${e.name||""}
                        placeholder="${(0,_.kg)("editor.graphs.entity.display_name_placeholder",m,"Display name (optional)")}"
                        @input=${e=>{const t=e.target;this._updateEntity(g,i,{name:t.value},n)}}
                        style="
                          padding: 10px 12px;
                          border: 1px solid var(--divider-color);
                          border-radius: 6px;
                          background: var(--secondary-background-color);
                          color: var(--primary-text-color);
                          font-size: 14px;
                          transition: border-color 0.2s ease;
                        "
                      />

                      <!-- Series Color (below name) -->
                      <div style="margin-top: 4px;">
                        <ultra-color-picker
                          .value=${e.color||this._getDefaultColor(i)}
                          @value-changed=${e=>{this._updateEntity(g,i,{color:e.detail.value},n)}}
                          style="width: 100%; height: 40px;"
                        ></ultra-color-picker>
                      </div>

                      <!-- Primary entity toggle -->
                      <label
                        style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px; background: var(--primary-background-color);"
                      >
                        <ha-switch
                          .checked=${!0===e.is_primary||0===i&&!(g.entities||[]).some((e=>e.is_primary))}
                          @change=${e=>{const t=e.target,o=g.entities||[];let a;a=t.checked?o.map(((e,t)=>Object.assign(Object.assign({},e),{is_primary:t===i}))):o.some(((e,t)=>t!==i&&e.is_primary))?o.map(((e,t)=>t===i?Object.assign(Object.assign({},e),{is_primary:!1}):e)):o.map(((e,t)=>Object.assign(Object.assign({},e),{is_primary:t===i}))),n({entities:a})}}
                        ></ha-switch>
                        <span style="font-size:13px; color: var(--primary-text-color);"
                          >${(0,_.kg)("editor.graphs.entity.use_as_card_info",m,"Use as card info")}</span
                        >
                      </label>
                    </div>

                    <!-- Advanced Options (Collapsible) -->
                    <div
                      class="entity-advanced-options"
                      style="
                        max-height: 0;
                        overflow: hidden;
                        transition: max-height 0.3s ease, opacity 0.2s ease;
                        opacity: 0;
                        border-top: none;
                        margin-top: 0;
                      "
                    >
                      <div style="padding-top: 16px; display: grid; gap: 16px;">
                        <!-- Attribute Selection (History Mode) -->
                        ${"forecast"!==g.data_source?c.Q.renderField((0,_.kg)("editor.graphs.entity.attribute",m,"Attribute"),(0,_.kg)("editor.graphs.entity.attribute_desc",m,"Use entity state or select a specific attribute to track."),t,{attribute:e.attribute||""},[c.Q.createSchemaItem("attribute",{select:{options:[{value:"",label:(0,_.kg)("editor.graphs.entity.state_default",m,"State (default)")},...this._getEntityAttributes(e.entity,t)],mode:"dropdown"}})],(e=>{this._updateEntity(g,i,{attribute:e.detail.value.attribute},n)})):""}

                        <!-- Line Chart Specific Options -->
                        ${["line","area"].includes(g.chart_type)?o.qy`
                              <div
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;"
                              >
                                <label
                                  style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                                >
                                  <ha-switch
                                    .checked=${!1!==e.show_points}
                                    @change=${e=>{const t=e.target;this._updateEntity(g,i,{show_points:t.checked},n)}}
                                  ></ha-switch>
                                  <span style="font-size: 13px; color: var(--primary-text-color);"
                                    >${(0,_.kg)("editor.graphs.line.show_points",m,"Show Points")}</span
                                  >
                                </label>

                                <label
                                  style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                                >
                                  <ha-switch
                                    .checked=${!0===e.fill_area}
                                    @change=${e=>{const t=e.target;this._updateEntity(g,i,{fill_area:t.checked},n)}}
                                  ></ha-switch>
                                  <span style="font-size: 13px; color: var(--primary-text-color);"
                                    >${(0,_.kg)("editor.graphs.line.fill_area",m,"Fill Area")}</span
                                  >
                                </label>
                              </div>

                              <!-- Line Width and Style -->
                              <div
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;"
                              >
                                <div>
                                  <label
                                    style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                                  >
                                    ${(0,_.kg)("editor.graphs.line.line_width",m,"Line Width")}:
                                    ${e.line_width||2}px
                                  </label>
                                  <input
                                    type="range"
                                    min="1"
                                    max="8"
                                    step="1"
                                    .value=${e.line_width||2}
                                    @input=${e=>{const t=e.target;this._updateEntity(g,i,{line_width:parseInt(t.value)},n)}}
                                    style="
                                      width: 100%;
                                      height: 4px;
                                      background: var(--divider-color);
                                      border-radius: 2px;
                                      outline: none;
                                      -webkit-appearance: none;
                                    "
                                  />
                                </div>

                                ${this.renderFieldSection((0,_.kg)("editor.graphs.line.line_style",m,"Line Style"),"",t,{line_style:e.line_style||"solid"},[this.selectField("line_style",[{value:"solid",label:(0,_.kg)("editor.graphs.line_styles.solid",m,"Solid")},{value:"dashed",label:(0,_.kg)("editor.graphs.line_styles.dashed",m,"Dashed")},{value:"dotted",label:(0,_.kg)("editor.graphs.line_styles.dotted",m,"Dotted")}])],(t=>{const o=t.detail.value.line_style;o!==(e.line_style||"solid")&&(this._updateEntity(g,i,{line_style:o},n),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
                              </div>
                            `:""}
                        ${["pie","donut"].includes(g.chart_type)?o.qy`
                              <label
                                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                              >
                                <ha-switch
                                  .checked=${!1!==e.label_show_name}
                                  @change=${e=>{const t=e.target;this._updateEntity(g,i,{label_show_name:t.checked},n)}}
                                ></ha-switch>
                                <span style="font-size: 13px; color: var(--primary-text-color);"
                                  >${(0,_.kg)("editor.graphs.pie.show_title",m,"Show Title in Slice")}</span
                                >
                              </label>
                              <label
                                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--secondary-background-color);"
                              >
                                <ha-switch
                                  .checked=${!1!==e.label_show_value}
                                  @change=${e=>{const t=e.target;this._updateEntity(g,i,{label_show_value:t.checked},n)}}
                                ></ha-switch>
                                <span style="font-size: 13px; color: var(--primary-text-color);"
                                  >${(0,_.kg)("editor.graphs.pie.show_value",m,"Show Value in Slice")}</span
                                >
                              </label>
                            `:""}
                      </div>
                    </div>

                    <!-- Expand/Collapse Button -->
                    <div style="display:flex; justify-content:center; margin-top: 12px;">
                      <ha-button
                        @click=${e=>this._toggleEntityOptions(e,i)}
                        style="--mdc-theme-primary: var(--secondary-text-color); background: transparent;"
                      >
                        <span style="display:inline-flex; align-items:center; gap:6px;">
                          <ha-icon
                            icon="mdi:chevron-down"
                            class="entity-toggle-btn"
                            style="--mdc-icon-size:20px;"
                          ></ha-icon>
                          <span
                            >${(0,_.kg)("editor.graphs.entity.expand_options",m,"Expand Options")}</span
                          >
                        </span>
                      </ha-button>
                    </div>
                  </div>
                </div>
              `})))||""}
            ${0===((null===(s=g.entities)||void 0===s?void 0:s.length)||0)?o.qy`
                  <div
                    style="
                  text-align: center; 
                  padding: 40px 20px; 
                  color: var(--secondary-text-color); 
                  background: var(--primary-background-color); 
                  border-radius: 8px; 
                  border: 2px dashed var(--divider-color);
                "
                  >
                    <ha-icon
                      icon="mdi:chart-line"
                      style="font-size: 48px; margin-bottom: 12px; opacity: 0.5;"
                    ></ha-icon>
                    <div style="font-size: 16px; margin-bottom: 4px; font-weight: 500;">
                      ${(0,_.kg)("editor.graphs.data_sources.no_entities",m,"No entities added")}
                    </div>
                    <div style="font-size: 14px; opacity: 0.7;">
                      ${(0,_.kg)("editor.graphs.data_sources.add_first_entity",m,"Add your first entity to create a chart")}
                    </div>
                  </div>
                `:""}

            <ha-button
              @click=${()=>this._addEntity(g,n)}
              style="
                margin-top: 8px; 
                width: 100%;
                --mdc-theme-primary: var(--primary-color);
                --mdc-button-outline-color: var(--primary-color);
              "
            >
              <ha-icon icon="mdi:plus" slot="icon"></ha-icon>
              ${(0,_.kg)("editor.graphs.data_sources.add_entity",m,"Add Entity")}
            </ha-button>
          </div>
        </div>

        <!-- Display Options Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 20px; display: flex; align-items: center; gap: 8px;"
          >
            <ha-icon icon="mdi:cog" style="color: var(--primary-color);"></ha-icon>
            ${(0,_.kg)("editor.graphs.display.title",m,"Display Options")}
          </div>

          <div style="display: grid; gap: 16px;">
            <!-- Show Graph Title Toggle -->
            <label
              style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
            >
              <ha-switch
                .checked=${!1!==g.show_title}
                @change=${e=>{const t=e.target;n({show_title:t.checked})}}
              ></ha-switch>
              <span>${(0,_.kg)("editor.graphs.display.show_title",m,"Show Graph Title")}</span>
            </label>

            <!-- Show Graph Value Toggle -->
            <label
              style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
            >
              <ha-switch
                .checked=${!1!==g.show_entity_value}
                @change=${e=>{const t=e.target;n({show_entity_value:t.checked})}}
              ></ha-switch>
              <span>${(0,_.kg)("editor.graphs.display.show_value",m,"Show Graph Value")}</span>
            </label>

            <!-- Chart Title -->
            ${!1!==g.show_title?o.qy`<div>
                  <label
                    style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                  >
                    ${(0,_.kg)("editor.graphs.display.chart_title",m,"Chart Title")}
                  </label>
                  <input
                    type="text"
                    .value=${g.title||""}
                    placeholder="${(0,_.kg)("editor.graphs.display.chart_title_placeholder",m,"Enter chart title")}"
                    @input=${e=>{const t=e.target;n({title:t.value})}}
                    style="
                      width: 100%;
                      padding: 10px 12px;
                      border: 1px solid var(--divider-color);
                      border-radius: 6px;
                      background: var(--secondary-background-color);
                      color: var(--primary-text-color);
                      font-size: 14px;
                      transition: border-color 0.2s ease;
                      box-sizing: border-box;
                    "
                  />
                </div>`:""}

            <!-- Time Period (History Mode Only) -->
            ${"forecast"!==g.data_source?this.renderFieldSection((0,_.kg)("editor.graphs.display.time_period",m,"Time Period"),(0,_.kg)("editor.graphs.display.time_period_desc",m,"How much historical data to show."),t,{time_period:g.time_period},[this.selectField("time_period",this.getTimePeriodOptions(m,g.data_source))],(e=>{const i=e.detail.value.time_period;if(i===g.time_period)return;n({time_period:i}),delete this._historyData[g.id],delete this._historyError[g.id],delete this._historyLoading[g.id],delete this._deferredHistoryScheduled[g.id];const o=Object.assign(Object.assign({},g),{time_period:i});this._loadHistoryData(o,t),this._triggerHistoryLoad(o,t),this.requestUpdate(),setTimeout((()=>{this.triggerPreviewUpdate()}),50)})):""}

            <!-- Forecast Info (Forecast Mode Only) -->
            ${"forecast"===g.data_source?o.qy`<div
                  style="padding: 12px; background: rgba(var(--rgb-primary-color), 0.08); border-radius: 8px; border-left: 3px solid var(--primary-color); margin-bottom: 16px;"
                >
                  <div style="font-size: 13px; color: var(--primary-text-color); font-weight: 500;">
                    ${(0,_.kg)("editor.graphs.forecast_info.title",m,"Forecast Display")}
                  </div>
                  <div
                    style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                  >
                    ${(0,_.kg)("editor.graphs.forecast_info.desc",m,"Forecasts display all available data from your weather service. The forecast type (hourly/daily) determines the time range shown.")}
                  </div>
                </div>`:""}

            <!-- Normalize Values Toggle (only show when multiple entities) -->
            ${((null===(l=g.entities)||void 0===l?void 0:l.filter((e=>"forecast"===g.data_source?e.forecast_attribute:e.entity)).length)||0)>1?o.qy`
                  <div style="margin-bottom: 16px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <ha-switch
                        .checked=${g.normalize_values||!1}
                        @change=${e=>n({normalize_values:e.target.checked})}
                      ></ha-switch>
                      <span style="font-size: 14px;"
                        >${(0,_.kg)("editor.graphs.display.normalize_values",m,"Normalize values to same scale")}</span
                      >
                    </label>
                    <div
                      style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px; margin-left: 40px;"
                    >
                      ${(0,_.kg)("editor.graphs.display.normalize_desc",m,"Useful when comparing entities with different units (e.g., % vs miles)")}
                    </div>
                  </div>
                `:""}

            <!-- Chart Height -->
            <div>
              <label
                style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
              >
                ${(0,_.kg)("editor.graphs.display.chart_height",m,"Chart Height")}
              </label>
              <div
                style="display: grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items: center;"
              >
                <input
                  type="range"
                  min="80"
                  max="400"
                  step="5"
                  .value=${null!==(d=g.chart_height)&&void 0!==d?d:345}
                  @input=${e=>{const t=e.target,i=parseInt(t.value);n({chart_height:i})}}
                  style="
                    width: 100%;
                    height: 4px;
                    background: var(--divider-color);
                    border-radius: 2px;
                    outline: none;
                    -webkit-appearance: none;
                  "
                />
                <span
                  style="font-size: 13px; color: var(--secondary-text-color); min-width: 56px; text-align: right;"
                  >${null!==(p=g.chart_height)&&void 0!==p?p:345}px</span
                >
                <button
                  @click=${()=>n({chart_height:345})}
                  title="${(0,_.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","345px")}"
                  style="
                    width: 32px;
                    height: 32px;
                    padding: 0;
                    border: 1px solid var(--divider-color);
                    border-radius: 4px;
                    background: var(--secondary-background-color);
                    color: var(--primary-text-color);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.2s ease;
                    flex-shrink: 0;
                  "
                  @mouseenter=${e=>{const t=e.target;t.style.background="var(--primary-color)",t.style.color="var(--text-primary-color)",t.style.borderColor="var(--primary-color)"}}
                  @mouseleave=${e=>{const t=e.target;t.style.background="var(--secondary-background-color)",t.style.color="var(--primary-text-color)",t.style.borderColor="var(--divider-color)"}}
                >
                  <ha-icon icon="mdi:refresh" style="font-size: 18px;"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Chart Width (%) -->
            <div>
              <label
                style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
              >
                ${(0,_.kg)("editor.graphs.display.chart_width",m,"Chart Width (%)")}
              </label>
              <div
                style="display: grid; grid-template-columns: 1fr auto auto; gap: 8px; align-items: center;"
              >
                <input
                  type="range"
                  min="10"
                  max="100"
                  step="1"
                  .value=${null!==(u=g.chart_width_percent)&&void 0!==u?u:100}
                  @input=${e=>{const t=e.target,i=Math.max(10,Math.min(100,parseInt(t.value)));n({chart_width_percent:i})}}
                  style="
                    width: 100%;
                    height: 4px;
                    background: var(--divider-color);
                    border-radius: 2px;
                    outline: none;
                    -webkit-appearance: none;
                  "
                />
                <span
                  style="font-size: 13px; color: var(--secondary-text-color); min-width: 56px; text-align: right;"
                  >${null!==(h=g.chart_width_percent)&&void 0!==h?h:100}%</span
                >
                <button
                  @click=${()=>n({chart_width_percent:100})}
                  title="Reset to default (100%)"
                  style="
                    width: 32px;
                    height: 32px;
                    padding: 0;
                    border: 1px solid var(--divider-color);
                    border-radius: 4px;
                    background: var(--secondary-background-color);
                    color: var(--primary-text-color);
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.2s ease;
                    flex-shrink: 0;
                  "
                  @mouseenter=${e=>{const t=e.target;t.style.background="var(--primary-color)",t.style.color="var(--text-primary-color)",t.style.borderColor="var(--primary-color)"}}
                  @mouseleave=${e=>{const t=e.target;t.style.background="var(--secondary-background-color)",t.style.color="var(--primary-text-color)",t.style.borderColor="var(--divider-color)"}}
                >
                  <ha-icon icon="mdi:refresh" style="font-size: 18px;"></ha-icon>
                </button>
              </div>
              <div style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;">
                ${(0,_.kg)("editor.graphs.display.chart_width_desc",m,"Percentage of the available module width. Alignment controls placement.")}
              </div>
            </div>
            ${this.renderFieldSection((0,_.kg)("editor.graphs.display.info_position",m,"Info Position"),(0,_.kg)("editor.graphs.display.info_position_desc",m,"Position of the overlay showing the name/value."),t,{info_position:g.info_position||"top_left"},[this.selectField("info_position",[{value:"top_left",label:(0,_.kg)("editor.graphs.position.top_left",m,"Top Left")},{value:"top_right",label:(0,_.kg)("editor.graphs.position.top_right",m,"Top Right")},{value:"bottom_left",label:(0,_.kg)("editor.graphs.position.bottom_left",m,"Bottom Left")},{value:"bottom_right",label:(0,_.kg)("editor.graphs.position.bottom_right",m,"Bottom Right")},{value:"middle",label:(0,_.kg)("editor.graphs.position.middle",m,"Middle")}])],(e=>{const t=e.detail.value.info_position;t!==(g.info_position||"top_left")&&(n({info_position:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}

            <!-- Legend Position -->
            ${!1!==g.show_legend?this.renderFieldSection((0,_.kg)("editor.graphs.display.legend_position",m,"Legend Position"),(0,_.kg)("editor.graphs.display.legend_position_desc",m,"Where to place the legend when enabled."),t,{legend_position:g.legend_position||"bottom_left"},[this.selectField("legend_position",[{value:"bottom_left",label:(0,_.kg)("editor.graphs.position.bottom_left",m,"Bottom Left")},{value:"bottom_right",label:(0,_.kg)("editor.graphs.position.bottom_right",m,"Bottom Right")},{value:"top_left",label:(0,_.kg)("editor.graphs.position.top_left",m,"Top Left")},{value:"top_right",label:(0,_.kg)("editor.graphs.position.top_right",m,"Top Right")}])],(e=>{const t=e.detail.value.legend_position;t!==(g.legend_position||"bottom_left")&&(n({legend_position:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))})):""}

            <!-- Chart Alignment -->
            ${this.renderFieldSection((0,_.kg)("editor.graphs.display.chart_alignment",m,"Chart Alignment"),(0,_.kg)("editor.graphs.display.chart_alignment_desc",m,"Alignment of the chart within its container."),t,{chart_alignment:g.chart_alignment||"center"},[this.selectField("chart_alignment",[{value:"left",label:(0,_.kg)("editor.graphs.position.left",m,"Left")},{value:"center",label:(0,_.kg)("editor.graphs.position.center",m,"Center")},{value:"right",label:(0,_.kg)("editor.graphs.position.right",m,"Right")}])],(e=>{const t=e.detail.value.chart_alignment;t!==(g.chart_alignment||"center")&&(n({chart_alignment:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}

            <!-- Background Color -->
            <div>
              <label
                style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
              >
                ${(0,_.kg)("editor.graphs.display.background_color",m,"Background Color")}
              </label>
              <ultra-color-picker
                .value=${g.background_color||"transparent"}
                @value-changed=${e=>{n({background_color:e.detail.value})}}
                style="width: 100%; height: 40px;"
              ></ultra-color-picker>
            </div>

            <!-- Chart Options -->
            <label
              style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 8px;"
              >${(0,_.kg)("editor.graphs.display.chart_options",m,"Chart Options")}</label
            >
            <div
              style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 8px;"
            >
              <label
                style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
              >
                <ha-switch
                  .checked=${!1!==g.show_legend}
                  @change=${e=>{const t=e.target;n({show_legend:t.checked})}}
                ></ha-switch>
                <span>${(0,_.kg)("editor.graphs.display.show_legend",m,"Show Legend")}</span>
              </label>
              ${"line"===g.chart_type?o.qy`<label
                    style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                  >
                    <ha-switch
                      .checked=${!1!==g.show_grid}
                      @change=${e=>{const t=e.target;n({show_grid:t.checked})}}
                    ></ha-switch>
                    <span>${(0,_.kg)("editor.graphs.display.show_grid",m,"Show Grid")}</span>
                  </label>`:""}
              ${"line"===g.chart_type&&!1!==g.show_grid?o.qy`<label
                    style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                  >
                    <ha-switch
                      .checked=${!1!==g.show_grid_values}
                      @change=${e=>{const t=e.target;n({show_grid_values:t.checked})}}
                    ></ha-switch>
                    <span
                      >${(0,_.kg)("editor.graphs.display.show_grid_values",m,"Show Grid Values")}</span
                    >
                  </label>`:""}
              ${["pie","donut"].includes(g.chart_type)?o.qy`
                    <label
                      style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                    >
                      <ha-switch
                        .checked=${Number(g.slice_gap||0)>0}
                        @change=${e=>{const t=e.target,i=(g.entities||[]).filter((e=>null==e?void 0:e.entity)).length,o=Math.max(2,Math.min(4,Math.round(360/Math.max(30*i,1))));n({slice_gap:t.checked?o:0})}}
                      ></ha-switch>
                      <span
                        >${(0,_.kg)("editor.graphs.display.add_slice_gap",m,"Add Slice Gap")}</span
                      >
                    </label>
                  `:""}
              ${"line"===g.chart_type?o.qy`
                    <label
                      style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                    >
                      <ha-switch
                        .checked=${!1!==g.smooth_curves}
                        @change=${e=>{const t=e.target;n({smooth_curves:t.checked})}}
                      ></ha-switch>
                      <span
                        >${(0,_.kg)("editor.graphs.display.smooth_lines",m,"Smooth Lines")}</span
                      >
                    </label>
                  `:""}
              ${"line"===g.chart_type?o.qy`<label
                    style="display:flex; align-items:center; gap:8px; cursor:pointer; padding:8px; border-radius:6px;"
                  >
                    <ha-switch
                      .checked=${!1!==g.show_tooltips}
                      @change=${e=>{const t=e.target;n({show_tooltips:t.checked})}}
                    ></ha-switch>
                    <span
                      >${(0,_.kg)("editor.graphs.display.show_tooltips",m,"Show Tooltips")}</span
                    >
                  </label>`:""}
            </div>
          </div>
        </div>
      </div>
    `}renderActionsTab(e,t,i,o){const n=e;return l.A.render(n,t,(e=>o(e)))}renderPreview(e,t,i,n){var s,l,d,c,p;const u=e,h=u,g=u.design||{};u.template_mode&&u.template&&(this._templateService||(this._templateService=new a.I(t))),this._loadHistoryData(u,t);const m=g.color||h.color||"var(--primary-text-color)",_=(()=>{const e=g.font_size||h.font_size;if(e&&"string"==typeof e&&""!==e.trim())return/[a-zA-Z%]/.test(e)?e:`${e}px`})(),v=g.font_family||h.font_family||void 0,b=g.font_weight||h.font_weight||void 0,y=g.text_transform||h.text_transform||void 0,x=g.font_style||h.font_style||void 0,k=g.letter_spacing||h.letter_spacing||void 0,w=g.line_height||h.line_height||void 0,S=(()=>{const e=g.text_shadow_h||h.text_shadow_h,t=g.text_shadow_v||h.text_shadow_v,i=g.text_shadow_blur||h.text_shadow_blur,o=g.text_shadow_color||h.text_shadow_color;if(e||t||i||o)return`${e||"0px"} ${t||"0px"} ${i||"0px"} ${o||"rgba(0,0,0,0.2)"}`})(),O=g.background_color||h.background_color,A=(e={})=>{const t=[],i=e.color||m;i&&t.push(`color: ${i}`);const o=e.fontSize||_;return o&&t.push(`font-size: ${o}`),v&&t.push(`font-family: ${v}`),b&&t.push(`font-weight: ${b}`),y&&t.push(`text-transform: ${y}`),x&&t.push(`font-style: ${x}`),k&&t.push(`letter-spacing: ${k}`),w&&t.push(`line-height: ${w}`),S&&t.push(`text-shadow: ${S}`),t.join("; ")},C={padding:g.padding_top||g.padding_bottom||g.padding_left||g.padding_right||h.padding_top||h.padding_bottom||h.padding_left||h.padding_right?`${this.addPixelUnit(g.padding_top||h.padding_top)||"0px"} ${this.addPixelUnit(g.padding_right||h.padding_right)||"0px"} ${this.addPixelUnit(g.padding_bottom||h.padding_bottom)||"0px"} ${this.addPixelUnit(g.padding_left||h.padding_left)||"0px"}`:"0",margin:g.margin_top||g.margin_bottom||g.margin_left||g.margin_right||h.margin_top||h.margin_bottom||h.margin_left||h.margin_right?`${g.margin_top||h.margin_top||"8px"} ${g.margin_right||h.margin_right||"0px"} ${g.margin_bottom||h.margin_bottom||"8px"} ${g.margin_left||h.margin_left||"0px"}`:"8px 0",background:g.background_color&&"transparent"!==g.background_color?g.background_color:h.background_color&&"transparent"!==h.background_color?h.background_color:"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},h),g),t),backgroundSize:g.background_size||h.background_size||"cover",backgroundPosition:g.background_position||h.background_position||"center",backgroundRepeat:g.background_repeat||h.background_repeat||"no-repeat",backdropFilter:g.backdrop_filter||h.backdrop_filter||"",border:g.border_style?`${g.border_width||"1px"} ${g.border_style} ${g.border_color||"var(--divider-color)"}`:this.getBorderCSS(h),borderRadius:this.addPixelUnit(g.border_radius||h.border_radius)||"0",width:g.width||h.width||"100%",height:g.height||h.height||"",maxWidth:g.max_width||h.max_width||"",maxHeight:g.max_height||h.max_height||"",minWidth:g.min_width||h.min_width||"",minHeight:g.min_height||h.min_height||"",overflow:g.overflow||h.overflow||"",clipPath:g.clip_path||h.clip_path||"",position:g.position||h.position||"",top:g.top||h.top||"",right:g.right||h.right||"",bottom:g.bottom||h.bottom||"",left:g.left||h.left||"",zIndex:g.z_index||h.z_index||"",boxShadow:g.box_shadow_h||g.box_shadow_v||g.box_shadow_blur||g.box_shadow_spread||g.box_shadow_color?`${g.box_shadow_h||"0px"} ${g.box_shadow_v||"0px"} ${g.box_shadow_blur||"0px"} ${g.box_shadow_spread||"0px"} ${g.box_shadow_color||"rgba(0,0,0,0.2)"}`:"",boxSizing:"border-box",display:"block"};if("line"===u.chart_type&&(C.padding="0"),!(u.entities&&u.entities.length>0&&("forecast"===u.data_source?u.entities.some((e=>e.forecast_attribute)):u.entities.some((e=>e.entity))))){const e=O;return o.qy`
        <div class="uc-graphs-module" style="${this.styleObjectToCss(C)}">
          <div
            class="chart-placeholder"
            style="
              height: ${Math.min(200,"number"==typeof u.chart_height?u.chart_height:parseInt(String(u.chart_height))||160)}px;
              background: ${this._formatColor(e)||"rgba(0, 0, 0, 0.2)"};
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            ${A({color:m})};
            font-size: 14px;
          "
          >
            <div style="text-align: center;">
              <ha-icon icon="mdi:chart-line" style="font-size: 48px; opacity: 0.5;"></ha-icon>
              <div style="margin-top: 8px;">No entities configured</div>
              <div style="font-size: 12px; opacity: 0.7;">Add entities to display chart</div>
            </div>
          </div>
        </div>
      `}const $=u.entities.find((e=>e.is_primary&&e.entity))||u.entities.find((e=>e.entity)),T=$?t.states[$.entity]:void 0,z=u.title||(null==$?void 0:$.name)||(null===(s=null==T?void 0:T.attributes)||void 0===s?void 0:s.friendly_name)||"Chart Title",P=((null==$?void 0:$.attribute)?null===(l=null==T?void 0:T.attributes)||void 0===l?void 0:l.unit_of_measurement:null===(d=null==T?void 0:T.attributes)||void 0===d?void 0:d.unit_of_measurement)||"",E=$?$.attribute?null===(c=null==T?void 0:T.attributes)||void 0===c?void 0:c[$.attribute]:null==T?void 0:T.state:void 0,I="number"==typeof E?E:parseFloat(E);let j=this._prepareSimpleChartData(u,t);"forecast"===u.data_source&&this._historyData[u.id]&&(j=this._historyData[u.id].datasets.map((e=>({name:e.name,value:e.values[e.values.length-1]||0,color:e.color,unit:e.unit,entityId:e.entityId}))));const M=u.info_position||"top_left",D="line"===u.chart_type&&!1!==u.show_grid&&!1!==u.show_grid_values?"32px":"16px",B={top_left:`top:12px; left:${D}; text-align:left;`,top_right:"top:12px; right:16px; text-align:right;",bottom_left:`bottom:12px; left:${D}; text-align:left;`,bottom_right:"bottom:12px; right:16px; text-align:right;",middle:"top:50%; left:50%; transform: translate(-50%, -50%); text-align:center;"},R=(()=>{if(!$||!T)return"";try{const e=void 0!==E?String(E):T.state;return(0,f.formatEntityState)(t,$.entity,{state:e,includeUnit:!0})}catch(e){return`${isNaN(I)?"":I}${P?` ${P}`:""}`}})(),U=["pie","donut"].includes(u.chart_type)?o.qy``:o.qy`
          <div
            class="graph-header-info"
            style="
              position:absolute; 
              ${B[M]}; 
              pointer-events:none; 
              z-index:2;
              max-width: calc(100% - 32px);
              box-sizing: border-box;
              overflow: hidden;
            "
          >
            ${!1!==u.show_display_name&&!1!==u.show_title?o.qy`<div
                  class="graph-title"
                  style="
                    ${A({fontSize:_||"18px"})}; 
                    font-weight: 600; 
                    ${g.text_align?`text-align:${g.text_align};`:""};
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                  "
                >
                  ${z}
                </div>`:""}
            ${!1!==u.show_entity_value?o.qy`<div
                  class="graph-value"
                  style="
                    ${A({fontSize:_||"28px"})}; 
                    line-height: 1.1; 
                    font-weight: 600; 
                    margin-top: 6px; 
                    ${g.text_align?`text-align:${g.text_align};`:""};
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                  "
                >
                  ${R}
                </div>`:""}
          </div>
        `,H=this._historyData[u.id],J=!0===this._historyLoading[u.id]&&!H,Q=(this.getBackgroundImageCSS(Object.assign(Object.assign({},h),g),t),u.chart_alignment||"center"),N="left"===Q?"flex-start":"right"===Q?"flex-end":"center",L=this._resolveChartWidth(u),F=o.qy`
      <div
        class="uc-graphs-module"
        style="
          ${this.styleObjectToCss(C)};
          position: relative;
          overflow: hidden;
          contain: layout style;
        "
      >
        <uc-preview-container
          .alignment=${u.chart_alignment||"center"}
          .height=${"number"==typeof u.chart_height?u.chart_height:parseInt(String(u.chart_height))||200}
        >
          <div
            style="
            display:flex; 
            width:100%; 
            height:100%;
            justify-content:${N};
            overflow:hidden;
            box-sizing:border-box;
          "
          >
            <div
              style="
              width:${L}; 
              max-width:100%;
              height:100%;
              position:relative;
              overflow:hidden;
              box-sizing:border-box;
            "
            >
              ${this._renderSimpleChart(u,j,t,(()=>{const e=u,t=u.design||{},i=t.color||e.color||"var(--primary-text-color)",o=[];return i&&o.push(`color: ${i}`),(t.font_size||e.font_size)&&o.push(`font-size: ${t.font_size||e.font_size}`),(t.font_family||e.font_family)&&o.push(`font-family: ${t.font_family||e.font_family}`),(t.font_weight||e.font_weight)&&o.push(`font-weight: ${t.font_weight||e.font_weight}`),(t.text_transform||e.text_transform)&&o.push(`text-transform: ${t.text_transform||e.text_transform}`),(t.font_style||e.font_style)&&o.push(`font-style: ${t.font_style||e.font_style}`),(t.letter_spacing||e.letter_spacing)&&o.push(`letter-spacing: ${t.letter_spacing||e.letter_spacing}`),(t.line_height||e.line_height)&&o.push(`line-height: ${t.line_height||e.line_height}`),o.join("; ")})(),Q)}
            </div>
          </div>
        </uc-preview-container>
        ${U}
        ${!1!==u.show_legend?this._renderLegend(j,u.legend_position||"bottom_left",A({})):""}
        ${J?o.qy`<div
              style="
                position: absolute;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                pointer-events: none;
                background: linear-gradient(
                  to bottom,
                  rgba(0,0,0,0.18),
                  rgba(0,0,0,0.12)
                );
              "
            >
              <div
                style="
                  background: rgba(0,0,0,0.35);
                  backdrop-filter: blur(2px);
                  border: 1px solid var(--divider-color);
                  border-radius: 10px;
                  padding: 10px 14px;
                  display: inline-flex;
                  align-items: center;
                  gap: 10px;
                  color: var(--secondary-text-color);
                  box-shadow: 0 2px 8px rgba(0,0,0,0.25);
                "
              >
                <ha-circular-progress active size="small"></ha-circular-progress>
                <span style="font-size: 13px;">Loading history…</span>
              </div>
            </div>`:""}
      </div>
    `,q=null===(p=u.design)||void 0===p?void 0:p.hover_effect,V=r.k.getHoverEffectClass(q);return this.hasActiveLink(u)?o.qy`<div
          class="graphs-module-clickable ${V}"
          style="cursor: pointer; transition: all 0.2s ease; border-radius: 4px;"
          @click=${e=>this.handleClick(e,u,t)}
          @dblclick=${e=>this.handleDoubleClick(e,u,t)}
          @mousedown=${e=>this.handleMouseDown(e,u,t)}
          @mouseup=${e=>this.handleMouseUp(e,u,t)}
          @mouseleave=${e=>this.handleMouseLeave(e,u,t)}
          @touchstart=${e=>this.handleTouchStart(e,u,t)}
          @touchend=${e=>this.handleTouchEnd(e,u,t)}
        >
          ${F}
        </div>`:V?o.qy`<div class="graphs-module-container ${V}">${F}</div>`:F}_prepareSimpleChartData(e,t){var i;const o=[];for(let n=0;n<e.entities.length;n++){const a=e.entities[n];if(!a.entity)continue;const r=t.states[a.entity];if(!r)continue;const s=a.attribute?r.attributes[a.attribute]:r.state,l=parseFloat(s);o.push({name:a.name||r.attributes.friendly_name||a.entity,value:isNaN(l)?0:l,color:this._formatColor(a.color)||this._getDefaultColor(n),unit:r.attributes.unit_of_measurement||"",lineWidth:null!==(i=a.line_width)&&void 0!==i?i:2,showPoints:!1!==a.show_points,fillArea:!0===a.fill_area,lineStyle:a.line_style||"solid",entityId:a.entity})}return o}_formatColor(e){if(!e)return this._getDefaultColor(0);if(Array.isArray(e)&&e.length>=3){const[t,i,o]=e;return isNaN(t)||isNaN(i)||isNaN(o)?this._getDefaultColor(0):`rgb(${Math.round(t)}, ${Math.round(i)}, ${Math.round(o)})`}return"string"==typeof e&&e.startsWith("#")||"string"==typeof e&&e.startsWith("rgb")?e:"string"!=typeof e||!e.startsWith("var(")&&"transparent"!==e?("string"==typeof e&&e.includes("NaN"),this._getDefaultColor(0)):e}_renderSimpleChart(e,t,i,n,a){const r="forecast"===e.data_source&&this._historyData[e.id];if(0===t.length&&!r)return o.qy` <div style="color: var(--secondary-text-color);">No data available</div> `;const s=("number"==typeof e.chart_height?e.chart_height:parseInt(String(e.chart_height))||345)-80;return["pie","donut"].includes(e.chart_type)?this._renderPieChart(e,t,s,n,i,a):["line","area"].includes(e.chart_type)?this._renderLineChart(e,t,s,i):this._renderBarChart(e,t,s,n,i)}_renderPieChart(e,t,i,n,a,r){const s=t.reduce(((e,t)=>e+t.value),0),l=Math.max(120,Math.min(i,260)),d=l/2,c="donut"===e.chart_type,p=Number(e.slice_gap)||0,u=c?Math.floor(.72*d):p>0?Math.max(2,Math.floor(.04*d)):0,h=d-u;let g=0;const m=t.map((e=>{const t=s>0?g/s*360:0,i=t+(s>0?e.value/s*360:0);return g+=e.value,{startDeg:t,endDeg:i,color:e.color,name:e.name,value:e.value,unit:e.unit,entityId:e.entityId}})),_="left"===r?"0 auto 0 0":"right"===r?"0 0 0 auto":"0 auto";return o.qy`
      <div
        style="
        display:block;
        width:${l}px;
        height:${l}px;
        margin:${_};
        overflow:hidden;
        box-sizing:border-box;
      "
      >
        <svg
          width="${l}"
          height="${l}"
          viewBox="${-d} ${-d} ${l} ${l}"
          style="display:block; overflow:visible;"
        >
          ${m.map((e=>{const t=((e,t,i,o)=>{const n=e=>e*Math.PI/180,a=Math.cos(n(i))*e,r=Math.sin(n(i))*e,s=Math.cos(n(o))*e,l=Math.sin(n(o))*e,d=o-i>180?1:0;return t<=0?`M0,0 L${a},${r} A${e},${e} 0 ${d} 1 ${s},${l} Z`:`M${a},${r} A${e},${e} 0 ${d} 1 ${s},${l} L${Math.cos(n(o))*t},${Math.sin(n(o))*t} A${t},${t} 0 ${d} 0 ${Math.cos(n(i))*t},${Math.sin(n(i))*t} Z`})(d,u,e.startDeg,e.endDeg);return o.JW`<path d="${t}" fill="${e.color}" stroke="none" />`}))}
          ${p>0?(()=>{const e=e=>e*Math.PI/180,t=Math.max(2,Math.min(6,Math.round(.012*l)));return o.JW`${m.map((i=>{const n=Math.cos(e(i.startDeg)),a=Math.sin(e(i.startDeg)),r=n*(u>0?u:t),s=a*(u>0?u:t),l=n*d,c=a*d;return o.JW`<line x1="${r}" y1="${s}" x2="${l}" y2="${c}" stroke="${"var(--card-background-color)"}" stroke-width="${t}" stroke-linecap="butt" />`}))}`})():""}
          ${""}
          ${m.map((t=>{const i=(t.startDeg+t.endDeg)/2,r=e=>e*Math.PI/180,s=c||u>0?u+.55*h:.55*d;let l=Math.cos(r(i))*s,p=Math.sin(r(i))*s;const g=.85*d;Math.abs(l)>g&&(l=Math.sign(l)*g),Math.abs(p)>g&&(p=Math.sign(p)*g);const m=t.endDeg-t.startDeg;let _=`${t.value}${t.unit||""}`;if(a&&t.entityId)try{_=(0,f.formatEntityState)(a,t.entityId,{state:t.value,includeUnit:!0})}catch(e){}const v=(e.entities||[]).find((e=>e&&e.entity===t.entityId)),b=(!v||!1!==v.label_show_name)&&m>=15,y=!v||!1!==v.label_show_value;return m>=10?o.JW`<g transform="translate(${l}, ${p})" style="pointer-events:none;">
              ${b?o.JW`<text 
                text-anchor="middle" 
                style="${n||""}; font-size:11px; font-weight:600; fill: currentColor;"
                textLength="${Math.min(7*t.name.length,1.2*d)}" 
                lengthAdjust="spacingAndGlyphs"
              >${t.name.length>12?t.name.substring(0,12)+"...":t.name}</text>`:""}
              ${y?o.JW`<text 
                y="${b?13:0}" 
                text-anchor="middle" 
                style="${n||""}; font-size:11px; fill: currentColor;"
                textLength="${Math.min(6*_.length,1*d)}" 
                lengthAdjust="spacingAndGlyphs"
              >${_.length>10?_.substring(0,10)+"...":_}</text>`:""}
            </g>`:o.JW``}))}
        </svg>
      </div>
    `}_renderLineChart(e,t,i,n){const a=this._historyData[e.id];let r,s;this._historyError[e.id],this._historyLoading[e.id],a?(r=a.timePoints,s=a.datasets):(r=this._generateTimePoints(e.time_period),s=t.map(((t,i)=>{e.entities[i];const o=t.value||0,n=new Array(r.length).fill(o);return{name:t.name,color:t.color,values:n,lineWidth:t.lineWidth,showPoints:t.showPoints,fillArea:t.fillArea,lineStyle:t.lineStyle,unit:t.unit||"",entityId:t.entityId}}))),s=s.map(((t,i)=>{var o,n,a;const r=null===(o=e.entities)||void 0===o?void 0:o[i];return Object.assign(Object.assign({},t),{color:this._formatColor(null==r?void 0:r.color)||t.color||this._getDefaultColor(i),lineWidth:null!==(a=null!==(n=null==r?void 0:r.line_width)&&void 0!==n?n:t.lineWidth)&&void 0!==a?a:2,showPoints:!1!==(null==r?void 0:r.show_points),fillArea:!0===(null==r?void 0:r.fill_area),lineStyle:(null==r?void 0:r.line_style)||t.lineStyle||"solid"})}));let l=s;e.normalize_values&&(l=s.map((e=>{const t=Math.max(...e.values),i=Math.min(...e.values),o=t-i||1;return Object.assign(Object.assign({},e),{originalValues:e.values,values:e.values.map((e=>(e-i)/o*100)),normalizedMin:i,normalizedMax:t})})));const d=Math.max(...l.flatMap((e=>e.values))),c=Math.min(...l.flatMap((e=>e.values))),p=d-c,u=!1!==e.show_grid,h=e;let g=(e.design||{}).background_color||h.background_color;return g="transparent"===g?"var(--card-background-color)":g?this._formatColor(g):"var(--card-background-color, transparent)",Boolean(a&&"history"===a.source),o.qy`
      <div
        class="line-chart-container"
        style="
          width: 100%; 
          height: ${i}px; 
          position: relative; 
          box-sizing: border-box; 
          margin: 0; 
          padding: 0;
          overflow: visible;
          contain: layout style;
        "
      >
        <svg
          width="100%"
          height="100%"
          viewBox="0 0 300 100"
          preserveAspectRatio="none"
          style="
            display: block; 
            width: 100%; 
            height: 100%; 
            margin: 0; 
            padding: 0;
            overflow: hidden;
          "
        >
          ${u?o.JW`${Array.from({length:4},((t,i)=>{const n=100*(i+1)/5,a=d-(i+1)/5*p,r=!1!==e.show_grid_values;return o.JW`
                  <line x1="0" y1="${n}" x2="300" y2="${n}" stroke="rgba(255,255,255,.08)" stroke-width="0.5" />
                  ${r?o.JW`<text 
                          x="2" 
                          y="${n-2}" 
                          font-size="8" 
                          fill="var(--secondary-text-color)" 
                          opacity="0.6"
                        >${Math.round(a)}</text>`:""}
                `}))}`:""}
          ${(()=>l.map((t=>{var i;const a=t.values.map(((e,t)=>`${t/(r.length-1)*300},${p>0?8+(d-e)/p*92:100}`)),l=(t=>{if(!e.smooth_curves)return t.map(((e,t)=>{const[i,o]=e.split(",");return`${0===t?"M":"L"} ${i} ${o}`})).join(" ");if(t.length<2){const[e,i]=t[0].split(",");return`M ${e} ${i}`}let i="";const o=t.map((e=>{const[t,i]=e.split(",");return{x:parseFloat(t),y:parseFloat(i)}}));i=`M ${o[0].x} ${o[0].y}`;for(let e=0;e<o.length-1;e++){const t=o[Math.max(0,e-1)],n=o[e],a=o[e+1],r=o[Math.min(o.length-1,e+2)],s=.5;i+=` C ${n.x+(a.x-t.x)/6*s} ${n.y+(a.y-t.y)/6*s}, ${a.x-(r.x-n.x)/6*s} ${a.y-(r.y-n.y)/6*s}, ${a.x} ${a.y}`}return i})(a),c=a[a.length-1].split(",")[0],u=this._colorWithAlpha(t.color,.25),h="dashed"===t.lineStyle?"4 3":"dotted"===t.lineStyle?"1 3":"none";return o.JW`<g>
                ${!0===t.fillArea?o.JW`<path d="${l} L ${c} 100 L 0 100 Z" fill="${u}" stroke="none" />`:""}
                <path d="${l}" stroke="${t.color}" stroke-width="${null!==(i=t.lineWidth)&&void 0!==i?i:2}" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-dasharray="${h}" />
                ${!1!==t.showPoints?o.JW`${t.values.map(((i,a)=>{const l=a/(r.length-1)*300,c=p>0?8+(d-i)/p*92:100,u="transparent"===g?"var(--card-background-color)":g,h=`point-${e.id}-${a}-${s.indexOf(t)}`;return o.JW`
                          <circle 
                            id="${h}"
                            cx="${l}" 
                            cy="${c}" 
                            r="3" 
                            fill="${u}" 
                            stroke="${t.color}" 
                            stroke-width="1.5"
                            style="cursor: ${!1!==e.show_tooltips?"pointer":"default"};"
                            @mouseenter=${!1!==e.show_tooltips?o=>{const s=t.originalValues?t.originalValues[a]:i;let l=`${s}${t.unit||""}`;t.entityId&&(l=(0,f.formatEntityState)(n,t.entityId,{state:s,includeUnit:!0})),this._showTooltip(o,e.id,t.name,l,r[a])}:null}
                            @mouseleave=${!1!==e.show_tooltips?t=>this._hideTooltip(e.id,t):null}
                          >
                            ${!1!==e.show_tooltips?o.JW`
                              <animate 
                                attributeName="r" 
                                begin="mouseenter" 
                                dur="0.2s" 
                                from="3" 
                                to="5" 
                                fill="freeze" 
                              />
                              <animate 
                                attributeName="r" 
                                begin="mouseleave" 
                                dur="0.2s" 
                                from="5" 
                                to="3" 
                                fill="freeze" 
                              />
                            `:""}
                          </circle>
                        `}))}`:""}
              </g>`})))()}
        </svg>
      </div>
    `}_renderLegend(e,t,i){return o.qy`<div
      class="graph-legend"
      style="
        position:absolute; 
        ${{top_left:"top:8px; left:8px; justify-content:flex-start;",top_right:"top:8px; right:8px; justify-content:flex-end;",bottom_left:"bottom:8px; left:8px; justify-content:flex-start;",bottom_right:"bottom:8px; right:8px; justify-content:flex-end;"}[t]}; 
        display:flex; 
        gap:8px; 
        flex-wrap:wrap; 
        font-size:12px; 
        ${i||""}; 
        z-index:2;
        max-width: calc(100% - 16px);
        box-sizing: border-box;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      "
    >
      ${e.map((e=>o.qy`<div
            style="
            display:flex; 
            align-items:center; 
            gap:4px;
            min-width: 0;
            flex-shrink: 1;
          "
          >
            <span
              style="
              width:10px; 
              height:10px; 
              background:${e.color}; 
              border-radius:2px;
              flex-shrink: 0;
            "
            ></span>
            <span
              style="
              overflow: hidden;
              text-overflow: ellipsis;
              white-space: nowrap;
              min-width: 0;
            "
              >${e.name}</span
            >
          </div>`))}
    </div>`}_colorWithAlpha(e,t){if(!e)return`rgba(33, 150, 243, ${t})`;if(e.startsWith("#")){const i=e.replace("#",""),o=parseInt(3===i.length?i.split("").map((e=>e+e)).join(""):i,16);return`rgba(${o>>16&255}, ${o>>8&255}, ${255&o}, ${t})`}return e.startsWith("rgb(")?e.replace("rgb(","rgba(").replace(")",`, ${t})`):e}_renderBarChart(e,t,i,n,a){const r=Math.max(...t.map((e=>e.value)));return o.qy`
      <div
        class="bar-chart-container"
        style="
          width:100%; 
          height:${i}px; 
          display:flex; 
          align-items:center; 
          justify-content:${(()=>{const t=e.chart_alignment||"center";return"left"===t?"flex-start":"right"===t?"flex-end":"center"})()};
          overflow: hidden;
          box-sizing: border-box;
        "
      >
        <div
          style="
            width: 100%;
            height: 100%;
            display: flex;
            align-items: flex-end;
            justify-content: ${(()=>{const t=e.chart_alignment||"center";return"left"===t?"flex-start":"right"===t?"flex-end":"center"})()};
            gap: 8px;
            padding: 8px;
            box-sizing: border-box;
            overflow: hidden;
          "
        >
          ${t.map((e=>{const s=r>0?e.value/r*(i-40):0;return o.qy`
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  flex: 0 0 auto;
                  width: 60px;
                  max-width: calc(100% / ${t.length});
                  box-sizing: border-box;
                "
              >
                <div
                  style="
                    font-size: 11px;
                    ${n||""};
                    margin-bottom: 4px;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    width: 100%;
                    text-align: center;
                  "
                >
                  ${(()=>{let t=`${e.value}${e.unit||""}`;if(a&&e.entityId)try{t=(0,f.formatEntityState)(a,e.entityId,{state:e.value,includeUnit:!0})}catch(e){}return t.length>8?t.substring(0,8)+"...":t})()}
                </div>
                <div
                  style="
                    width: 100%;
                    height: ${s}px;
                    background: ${e.color};
                    border-radius: 3px 3px 0 0;
                    transition: height 0.3s ease;
                    min-height: 2px;
                  "
                ></div>
                <div
                  style="
                    font-size: 10px;
                    ${n||""};
                    opacity: 0.8;
                    margin-top: 4px;
                    text-align: center;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                    width: 100%;
                  "
                  title="${e.name}"
                >
                  ${e.name.length>8?e.name.substring(0,8)+"...":e.name}
                </div>
              </div>
            `}))}
        </div>
      </div>
    `}_showTooltip(e,t,i,o,n){const a=e.target;let r=document.getElementById(`graph-tooltip-${t}`);r||(r=document.createElement("div"),r.id=`graph-tooltip-${t}`,r.style.cssText=`\n        position: fixed;\n        display: none;\n        background: var(--card-background-color);\n        border: 1px solid var(--divider-color);\n        border-radius: 6px;\n        padding: 10px 14px;\n        font-size: 14px;\n        color: var(--primary-text-color);\n        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);\n        pointer-events: none;\n        z-index: ${v.Mu.GRAPH_TOOLTIP};\n        white-space: nowrap;\n      `,document.body.appendChild(r)),r.innerHTML=`\n      <div style="font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;">${i}</div>\n      <div style="color: var(--secondary-text-color); font-size: 12px;">${n}</div>\n      <div style="font-size: 16px; margin-top: 4px; color: var(--primary-color);">${o}</div>\n    `;const s=a.getBoundingClientRect(),l=s.left+s.width/2,d=s.top;r.style.display="block",r.style.left=`${l}px`,r.style.top=d-10+"px",r.style.transform="translate(-50%, -100%)"}_hideTooltip(e,t){const i=document.getElementById(`graph-tooltip-${e}`);i&&(i.style.display="none")}_generateTimePoints(e){const t=[],i=new Date;let o=12,n="hour";switch(e){case"1h":o=12,n="5min";break;case"24h":o=24,n="hour";break;case"7d":o=7,n="day";break;case"30d":o=30,n="day";break;case"90d":o=12,n="week";break;case"365d":o=12,n="month"}for(let e=o-1;e>=0;e--){const o=new Date(i);"5min"===n?(o.setMinutes(o.getMinutes()-5*e),t.push(o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))):"hour"===n?(o.setHours(o.getHours()-e),t.push(o.toLocaleTimeString([],{hour:"2-digit"}))):"day"===n?(o.setDate(o.getDate()-e),t.push(o.toLocaleDateString([],{month:"short",day:"numeric"}))):"week"===n?(o.setDate(o.getDate()-7*e),t.push(o.toLocaleDateString([],{month:"short",day:"numeric"}))):"month"===n&&(o.setMonth(o.getMonth()-e),t.push(o.toLocaleDateString([],{month:"short"})))}return t}_generateTimeSeriesData(e,t,i){const o=[];let n=isNaN(e)?50:e;const a=i.toLowerCase().includes("odometer")||i.toLowerCase().includes("counter")||i.toLowerCase().includes("total")||i.toLowerCase().includes("mileage"),r=i.toLowerCase().includes("energy")||i.toLowerCase().includes("kwh");let s=this._hashString(i);a&&n>1e3&&(n*=.95);for(let i=0;i<t;i++){const i=(s=1664525*s+1013904223>>>0,(4294967295&s)/4294967296);if(a){const o=.05*e/t;n=n+o+i*o*.5}else if(r)n+=.1*e/t*i;else{const e=(i-.5)*n*.1;n=Math.max(0,n+e)}o.push(Math.round(10*n)/10)}return o}_hashString(e){let t=2166136261;for(let i=0;i<e.length;i++)t^=e.charCodeAt(i),t=Math.imul(t,16777619);return t>>>0}_triggerHistoryLoad(e,t){this._historyLoading[e.id]||(this._historyLoading[e.id]=!0,this._deferredHistoryScheduled[e.id]=!0,this._fetchHistoryDataAsync(e,t))}_loadHistoryData(e,t){if(e.entities&&0!==e.entities.length)if("forecast"!==e.data_source){if(!this._historyData[e.id]){const t=this._tryReadCache(e);t&&(this._historyData[e.id]=Object.assign(Object.assign({},t),{source:"cache"}))}if(!this._historyData[e.id]){const i=this._tryFastHistoryPath(e,t);i&&(this._historyData[e.id]=i)}this._historyLoading[e.id]||this._deferredHistoryScheduled[e.id]||(this._deferredHistoryScheduled[e.id]=!0,this._historyLoading[e.id]=!0,this._fetchHistoryDataAsync(e,t))}else this._loadForecastData(e,t)}_tryFastHistoryPath(e,t){try{if(0===e.entities.filter((e=>e.entity)).map((e=>e.entity)).length)return null;const i=this._generateTimePoints(e.time_period),o=e.entities.filter((e=>e.entity)).map(((e,o)=>{var n;const a=t.states[e.entity];if(!a)return null;let r=0;r=e.attribute&&a.attributes[e.attribute]?parseFloat(a.attributes[e.attribute])||0:parseFloat(a.state)||0;const s=new Array(i.length).fill(r);return{name:e.name||a.attributes.friendly_name||e.entity,color:this._formatColor(e.color)||this._getDefaultColor(o),values:s,lineWidth:null!==(n=e.line_width)&&void 0!==n?n:2,showPoints:!1!==e.show_points,fillArea:!0===e.fill_area,lineStyle:e.line_style||"solid",unit:(null==a?void 0:a.attributes.unit_of_measurement)||"",entityId:e.entity}})).filter((e=>null!==e));if(0===o.length)return null;const n=o.flatMap((e=>e.values));return{timePoints:i,datasets:o,min:Math.min(...n),max:Math.max(...n),lastUpdated:Date.now(),source:"fast-path"}}catch(e){return null}}async _fetchHistoryDataAsync(e,t){try{const i=new Date;let o=24;switch(e.time_period){case"1h":o=1;break;case"3h":o=3;break;case"6h":o=6;break;case"12h":o=12;break;case"24h":default:o=24;break;case"2d":o=48;break;case"7d":o=168;break;case"30d":o=720;break;case"90d":o=2160;break;case"365d":o=8760}const n=new Date(i.getTime()-60*o*60*1e3),a=e.entities.filter((e=>e.entity)).map((e=>e.entity));if(0===a.length)return;window.ultraCardGraphDebug={entityIds:a,startTime:n.toISOString(),endTime:i.toISOString(),status:"fetching"},Math.min(100,4*o),a.forEach((e=>{t.states[e]}));const r={};try{let e,o;try{o=await t.callWS({type:"history/history_during_period",start_time:n.toISOString(),end_time:i.toISOString(),entity_ids:a,include_start_time_state:!0,significant_changes_only:!1,minimal_response:!1}),e=o&&"object"==typeof o?a.map((e=>o[e]||[])).filter((e=>e.length>0)):[]}catch(o){const r=n.toISOString();e=await t.callApi("GET",`history/period/${r}`,{filter_entity_id:a.join(","),end_time:i.toISOString()})}if(window.ultraCardGraphDebug.response=e,window.ultraCardGraphDebug.status="success",o&&"object"==typeof o&&!Array.isArray(o)?Object.entries(o).forEach((([e,t])=>{Array.isArray(t)&&t.length>0&&(r[e]=t)})):Array.isArray(e)&&e.forEach((e=>{if(Array.isArray(e)&&e.length>0){const t=e[0].entity_id;r[t]=e}})),0===Object.keys(r).length)throw new Error("No history data returned from API")}catch(e){window.ultraCardGraphDebug.error=e,window.ultraCardGraphDebug.errorDetails={message:e.message,status:e.status,statusText:e.statusText,body:e.body,stack:e.stack},window.ultraCardGraphDebug.status="error";for(const e of a){const i=t.states[e];i&&(r[e]=[{entity_id:e,state:i.state,last_changed:(new Date).toISOString(),last_updated:(new Date).toISOString(),attributes:i.attributes}])}}const s=this._generateTimePoints(e.time_period),l=e.entities.map(((e,o)=>{var a;if(!e.entity)return null;let l;if(Array.isArray(r))l=r;else{if(!r[e.entity])return null;l=r[e.entity]}const d=t.states[e.entity],c=this._processHistoryData(l,s,e.attribute,n,i);return{name:e.name||(null==d?void 0:d.attributes.friendly_name)||e.entity,color:this._formatColor(e.color)||this._getDefaultColor(o),values:c,lineWidth:null!==(a=e.line_width)&&void 0!==a?a:2,showPoints:!1!==e.show_points,fillArea:!0===e.fill_area,lineStyle:e.line_style||"solid",unit:(null==d?void 0:d.attributes.unit_of_measurement)||"",entityId:e.entity}})).filter((e=>null!==e)),d=l.flatMap((e=>e.values)),c=Math.min(...d),p=Math.max(...d);this._historyData[e.id]={timePoints:s,datasets:l,min:c,max:p,lastUpdated:Date.now(),source:"history"},this._historyLoading[e.id]=!1,this._writeCache(e,this._historyData[e.id]),this.requestUpdate()}catch(t){this._historyError[e.id]="Failed to load history data",this._historyLoading[e.id]=!1,this.requestUpdate()}}_processHistoryData(e,t,i,o,n){if(!e||0===e.length)return new Array(t.length).fill(0);const a=[],r=e=>{if(null==e)return null;if("number"==typeof e&&isFinite(e))return e;const t=String(e).trim().toLowerCase();if("unknown"===t||"unavailable"===t||"none"===t||"null"===t)return null;const i=parseFloat(t);return isNaN(i)?null:i},s=(null==o?void 0:o.getTime())||Date.now()-864e5,l=((null==n?void 0:n.getTime())||Date.now())-s,d=e.map((e=>{let t;if(void 0!==e.s&&void 0!==e.lu)t={state:e.s,attributes:e.a||{},timestamp:1e3*e.lu};else{if(void 0===e.state||void 0===e.last_changed)return null;t={state:e.state,attributes:e.attributes||{},timestamp:new Date(e.last_changed).getTime()}}return"unavailable"===t.state||"unknown"===t.state?null:t})).filter((e=>null!==e)).sort(((e,t)=>e.timestamp-t.timestamp));return t.forEach(((e,o)=>{const n=o/(t.length-1),c=s+l*n;let p=null;for(let e=d.length-1;e>=0;e--){const t=d[e];if(t.timestamp<=c){const e=i?t.attributes[i]:t.state,o=r(e);if(null!==o){p=o;break}}}if(null===p)for(let e=d.length-1;e>=0;e--){const t=d[e],o=i?t.attributes[i]:t.state,n=r(o);if(null!==n){p=n;break}}a.push(null!=p?p:0)})),a}_coerceNumber(e){if(null==e)return null;if("number"==typeof e&&isFinite(e))return e;const t=String(e).trim().toLowerCase();if("unknown"===t||"unavailable"===t||"none"===t||"null"===t)return null;const i=parseFloat(t);return isNaN(i)?null:i}async _fetchForecastData(e,t){var i,o;if(!e.forecast_entity||!t)throw new Error("Forecast entity not configured");try{const n=await t.callWS({type:"call_service",domain:"weather",service:"get_forecasts",service_data:{type:e.forecast_type||"hourly"},target:{entity_id:e.forecast_entity},return_response:!0}),a=null===(o=null===(i=null==n?void 0:n.response)||void 0===i?void 0:i[e.forecast_entity])||void 0===o?void 0:o.forecast;if(!a||!Array.isArray(a))throw console.error("Ultra Card: Invalid forecast data received from weather service"),new Error("Invalid forecast data received from weather service");return a}catch(e){throw console.error("Ultra Card: Failed to fetch forecast data:",e),e}}_processForecastData(e,t,i){const o=(t.entities||[]).filter((e=>e.forecast_attribute)).map(((o,n)=>{var a;const r=o.forecast_attribute,s=e.map((e=>{const t=e[r];return"number"==typeof t?t:parseFloat(t)||0})).slice(0,i.length);return{name:o.name||this._getForecastAttributeLabel(r),color:this._formatColor(o.color)||this._getDefaultColor(n),values:s,lineWidth:null!==(a=o.line_width)&&void 0!==a?a:2,showPoints:!1!==o.show_points,fillArea:!0===o.fill_area,lineStyle:o.line_style||"solid",unit:this._getForecastAttributeUnit(r),entityId:t.forecast_entity}}));return{timePoints:this._generateForecastTimePoints(e,t.forecast_type),datasets:o,min:Math.min(...o.flatMap((e=>e.values))),max:Math.max(...o.flatMap((e=>e.values))),lastUpdated:Date.now(),source:"forecast"}}_generateForecastTimePoints(e,t){return e.map((e=>{const i=new Date(e.datetime);return"daily"===t?i.toLocaleDateString([],{month:"short",day:"numeric"}):i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}))}_getForecastAttributeLabel(e){return this.FORECAST_ATTRIBUTE_LABELS[e]||e}_getForecastAttributeUnit(e){return this.FORECAST_ATTRIBUTE_UNITS[e]||""}_loadForecastData(e,t){if(e.forecast_entity){if(!this._historyData[e.id]){const t=this._tryReadCache(e);t&&"forecast"===t.source&&(this._historyData[e.id]=t)}this._historyLoading[e.id]||this._deferredHistoryScheduled[e.id]||(this._deferredHistoryScheduled[e.id]=!0,this._historyLoading[e.id]=!0,this._fetchForecastDataAsync(e,t))}}async _fetchForecastDataAsync(e,t){try{const i=await this._fetchForecastData(e,t),o=this._generateForecastTimePoints(i,e.forecast_type),n=this._processForecastData(i,e,o);this._historyData[e.id]=n,this._historyLoading[e.id]=!1,this._writeCache(e,n),this.requestUpdate(),setTimeout((()=>{this.triggerPreviewUpdate();const e=document.querySelector("ultra-card");e&&e.requestUpdate&&e.requestUpdate()}),100)}catch(t){console.error("Ultra Card: Failed to load forecast data:",t),this._historyError[e.id]="Failed to load forecast data",this._historyLoading[e.id]=!1,this.requestUpdate()}}_getDefaultColor(e){return this.DEFAULT_COLORS[e%this.DEFAULT_COLORS.length]}_addEntity(e,t){var i;const o={id:this.generateId("entity"),entity:"",name:"",attribute:"",color:this._getDefaultColor((null===(i=e.entities)||void 0===i?void 0:i.length)||0),show_points:!0,fill_area:!0,line_width:2,line_style:"solid"};"forecast"===e.data_source&&(o.forecast_attribute="temperature"),t({entities:[...e.entities||[],o]})}_removeEntity(e,t,i){const o=[...e.entities||[]];o.splice(t,1),i({entities:o})}_updateEntity(e,t,i,o){const n=[...e.entities||[]];n[t]=Object.assign(Object.assign({},n[t]),i),delete this._historyData[e.id],delete this._historyError[e.id],delete this._historyLoading[e.id],delete this._deferredHistoryScheduled[e.id],o({entities:n})}_toggleEntityOptions(e,t){var i;e.stopPropagation();const o=null===(i=e.target)||void 0===i?void 0:i.closest(".entity-card"),n=null==o?void 0:o.querySelector(".entity-advanced-options"),a=null==o?void 0:o.querySelector(".entity-toggle-btn");n&&a&&(this.expandedEntities.has(t)?(this.expandedEntities.delete(t),n.style.maxHeight="0",n.style.opacity="0",n.style.marginTop="0",n.style.borderTop="none",a.style.transform="rotate(0deg)"):(this.expandedEntities.add(t),n.style.maxHeight=n.scrollHeight+"px",n.style.opacity="1",n.style.marginTop="16px",n.style.borderTop="1px solid var(--divider-color)",a.style.transform="rotate(180deg)"))}_getEntityAttributes(e,t){if(!e||!t.states[e])return[];const i=t.states[e].attributes;return Object.keys(i).filter((e=>!["friendly_name","icon","entity_picture"].includes(e))).map((e=>({value:e,label:e})))}_renderSizeControl(e,t,i,n,a,r,s,l,d,c){return o.qy`
      <div class="field-container" style="margin-bottom: 16px;">
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
        >
          ${d}
        </div>
        <div
          class="field-description"
          style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px;"
        >
          ${c}
        </div>
        <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
          <input
            type="range"
            class="gap-slider"
            min="${r}"
            max="${s}"
            step="1"
            .value="${a}"
            @input=${o=>{const a=o.target,r=parseInt(a.value);t>=0?this._updateEntity(e,t,{[n]:r},i):i({[n]:r})}}
          />
          <input
            type="number"
            class="gap-input"
            min="${r}"
            max="${s}"
            step="1"
            .value="${a}"
            @input=${o=>{const a=o.target,r=parseInt(a.value);isNaN(r)||(t>=0?this._updateEntity(e,t,{[n]:r},i):i({[n]:r}))}}
            @keydown=${o=>{if("ArrowUp"===o.key||"ArrowDown"===o.key){o.preventDefault();const a=o.target,d=parseInt(a.value)||l,c="ArrowUp"===o.key?1:-1,p=Math.max(r,Math.min(s,d+c));t>=0?this._updateEntity(e,t,{[n]:p},i):i({[n]:p})}}}
          />
          <button
            class="reset-btn"
            @click=${()=>{t>=0?this._updateEntity(e,t,{[n]:l},i):i({[n]:l})}}
            title="Reset to default (${l})"
          >
            <ha-icon icon="mdi:refresh"></ha-icon>
          </button>
        </div>
      </div>
    `}hasActiveLink(e){const t=e.tap_action&&"default"!==e.tap_action.action&&"nothing"!==e.tap_action.action,i=e.hold_action&&"default"!==e.hold_action.action&&"nothing"!==e.hold_action.action,o=e.double_tap_action&&"default"!==e.double_tap_action.action&&"nothing"!==e.double_tap_action.action;return t||i||o}handleClick(e,t,i,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,i,o)}),300)}handleDoubleClick(e,t,i){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,i)}handleMouseDown(e,t,i){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,i)}),500)}handleMouseUp(e,t,i){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null)}handleMouseLeave(e,t,i){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTouchStart(e,t,i){this.handleMouseDown(e,t,i)}handleTouchEnd(e,t,i){this.handleMouseUp(e,t,i)}handleTapAction(e,t,i,o){this.isHolding||t.tap_action&&"nothing"===t.tap_action.action||s.K.handleAction(t.tap_action||{action:"default"},i,e.target,o,t.entity)}handleHoldAction(e,t,i,o){t.hold_action&&"nothing"===t.hold_action.action||s.K.handleAction(t.hold_action||{action:"default"},i,e.target,o,t.entity)}handleDoubleAction(e,t,i,o){t.double_tap_action&&"nothing"===t.double_tap_action.action||s.K.handleAction(t.double_tap_action||{action:"default"},i,e.target,o,t.entity)}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}_resolveChartWidth(e){const t=e.chart_width_percent;if("number"==typeof t&&isFinite(t))return`${Math.max(10,Math.min(100,Math.round(t)))}%`;const i=e.chart_width;return"string"==typeof i&&""!==i.trim()?i.trim():"100%"}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"0px"} ${this.addPixelUnit(e.padding_right)||"0px"} ${this.addPixelUnit(e.padding_bottom)||"0px"} ${this.addPixelUnit(e.padding_left)||"0px"}`:"0"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"8px"} ${this.addPixelUnit(e.margin_right)||"0px"} ${this.addPixelUnit(e.margin_bottom)||"8px"} ${this.addPixelUnit(e.margin_left)||"0px"}`:"8px 0"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){var i,o;const n=e.background_image_type,a=e.background_image,r=e.background_image_entity;if(!n||"none"===n)return"none";switch(n){case"upload":if(a)return`url("${(0,m.V)(t,a)}")`;break;case"url":if(a)return`url("${a}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const n=(null===(i=e.attributes)||void 0===i?void 0:i.entity_picture)||(null===(o=e.attributes)||void 0===o?void 0:o.image)||("string"==typeof e.state?e.state:"");if(n&&"unknown"!==n&&"unavailable"!==n)return`url("${(0,m.V)(t,n)}")`}}}return"none"}getBorderCSS(e){const t=e.border;return t&&"none"!==t.style?`${t.width||1}px ${t.style||"solid"} ${t.color||"#ccc"}`:"none"}renderLogicTab(e,t,i,o){return d.X.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors];return t.chart_type||i.push("Chart type is required"),"forecast"===t.data_source?(t.forecast_entity||i.push("Weather entity is required for forecast mode"),t.entities&&0!==t.entities.length?t.entities.forEach(((e,t)=>{e.forecast_attribute||i.push(`Entity ${t+1}: Forecast attribute selection is required`)})):i.push("At least one forecast attribute is required")):t.entities&&0!==t.entities.length?t.entities.forEach(((e,t)=>{e.entity||i.push(`Entity ${t+1}: Entity selection is required`)})):i.push("At least one entity is required"),"custom"===t.time_period&&(t.custom_time_start||i.push("Custom start time is required"),t.custom_time_end||i.push("Custom end time is required")),!t.template_mode||t.template&&""!==t.template.trim()||i.push("Template code is required when template mode is enabled"),{valid:0===i.length,errors:i}}getStyles(){return`\n      .uc-graphs-module {\n        width: 100%;\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        position: relative;\n        overflow: hidden;\n        contain: layout style;\n      }\n\n      /* Graph content area containment */\n      .uc-graphs-module .chart-container {\n        position: relative;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        box-sizing: border-box;\n      }\n\n      /* Legend containment */\n      .uc-graphs-module .graph-legend {\n        max-width: calc(100% - 16px) !important;\n        box-sizing: border-box;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .uc-graphs-module .graph-legend > div {\n        min-width: 0;\n        flex-shrink: 1;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n\n      /* Header info containment */\n      .uc-graphs-module .graph-header-info {\n        max-width: calc(100% - 32px) !important;\n        box-sizing: border-box;\n        overflow: hidden;\n      }\n\n      .uc-graphs-module .graph-title,\n      .uc-graphs-module .graph-value {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        max-width: 100%;\n      }\n\n      .entity-card {\n        transition: all 0.2s ease;\n      }\n\n      .entity-card:hover {\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      .entity-advanced-options {\n        transition: max-height 0.3s ease, opacity 0.2s ease;\n        opacity: 0;\n      }\n\n      .entity-advanced-options[data-expanded="true"] {\n        opacity: 1;\n      }\n\n      .entity-toggle-button ha-icon {\n        transition: transform 0.2s ease;\n      }\n\n      .entity-header {\n        cursor: pointer;\n      }\n\n      .entity-header:hover .entity-toggle-button {\n        color: var(--primary-color);\n      }\n\n      .uc-graphs-general-tab,\n      .uc-graphs-actions-tab,\n      .uc-graphs-other-tab {\n        padding: 16px;\n      }\n\n      .entities-repeater {\n        margin: 16px 0;\n      }\n\n      .entity-item {\n        background: var(--card-background-color);\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 12px;\n      }\n\n      .entity-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 12px;\n      }\n\n      .entity-number {\n        font-weight: 500;\n        color: var(--primary-text-color);\n      }\n\n      .chart-container {\n        position: relative;\n        width: 100%;\n        margin: 0 !important;\n        padding: 0 !important;\n        box-sizing: border-box;\n      }\n\n      .chart-title {\n        font-weight: 500;\n        margin-bottom: 8px;\n      }\n\n      .chart-legend {\n        margin-top: 12px;\n      }\n\n      .chart-legend.legend-top {\n        margin-top: 0;\n        margin-bottom: 12px;\n      }\n\n      .chart-legend.legend-left,\n      .chart-legend.legend-right {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n      }\n\n      .chart-legend.legend-left {\n        left: 0;\n      }\n\n      .chart-legend.legend-right {\n        right: 0;\n      }\n\n      .graphs-module-clickable {\n        cursor: pointer;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      .graphs-module-clickable.hover-enabled:hover {\n        transform: scale(1.02);\n        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n    \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Conditional fields grouping */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      @keyframes slideInFromLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n\n      /* Number range control styles */\n      .number-range-control {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n      }\n\n      .range-slider {\n        flex: 0 0 65%;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        min-width: 0;\n      }\n\n      .range-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 18px;\n        height: 18px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .range-slider::-moz-range-thumb {\n        width: 18px;\n        height: 18px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .range-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .range-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .range-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .range-input {\n        flex: 0 0 20%;\n        padding: 6px 8px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        box-sizing: border-box;\n      }\n\n      .range-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .range-reset-btn {\n        width: 32px;\n        height: 32px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .range-reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .range-reset-btn ha-icon {\n        font-size: 14px;\n      }\n\n      /* Responsive styles */\n      @media (max-width: 768px) {\n        .chart-container {\n          min-height: 200px;\n        }\n        \n        .uc-graphs-module .graph-legend {\n          max-width: calc(100% - 8px) !important;\n          gap: 4px !important;\n          font-size: 11px !important;\n        }\n        \n        .uc-graphs-module .graph-header-info {\n          max-width: calc(100% - 16px) !important;\n        }\n        \n        .uc-graphs-module .graph-title {\n          font-size: 14px !important;\n        }\n        \n        .uc-graphs-module .graph-value {\n          font-size: 20px !important;\n        }\n      }\n\n      /* Animation styles */\n      .uc-graphs-module[data-animation="true"] {\n        animation: fadeIn 0.5s ease-in-out;\n      }\n\n      @keyframes fadeIn {\n        from {\n          opacity: 0;\n          transform: translateY(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n\n      /* Hover effects */\n      .uc-graphs-module:hover {\n        transition: box-shadow 0.3s ease;\n      }\n\n      /* Loading state */\n      .chart-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        color: var(--secondary-text-color);\n        overflow: hidden;\n      }\n\n      .chart-error {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: 100%;\n        color: var(--error-color);\n        text-align: center;\n        padding: 20px;\n        overflow: hidden;\n        word-wrap: break-word;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n      \n      /* SVG text containment for pie charts */\n      .uc-graphs-module svg text {\n        pointer-events: none;\n        user-select: none;\n      }\n      \n      /* Ensure tooltips stay within bounds and appear above everything */\n      [id^="graph-tooltip-"] {\n        position: fixed !important;\n        z-index: ${v.Mu.GRAPH_TOOLTIP} !important;\n        max-width: calc(100vw - 32px);\n        word-wrap: break-word;\n        box-sizing: border-box;\n        pointer-events: none !important;\n      }\n\n      /* Gap control styles - Standardized Slider Pattern */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    `}cleanup(){this.clickTimeout&&clearTimeout(this.clickTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this._updateInterval&&clearInterval(this._updateInterval),Object.keys(this._historyData).forEach((e=>{const t=document.getElementById(`graph-tooltip-${e}`);t&&t.parentNode===document.body&&document.body.removeChild(t)}))}requestUpdate(){"undefined"!=typeof window&&(window.dispatchEvent(new CustomEvent("ultra-card-update")),window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update",{bubbles:!0,composed:!0})),window._ultraCardUpdateTimer=null}),50)))}}},1397:(e,t,i)=>{i.d(t,{S:()=>a});var o=i(4345);class n{constructor(){this.hass=null,this.templateService=null}static getInstance(){return n.instance||(n.instance=new n),n.instance}setHass(e){this.hass=e,this.templateService&&this.templateService.unsubscribeAllTemplates(),e&&(this.templateService=new o.I(e))}cleanup(){this.templateService&&(this.templateService.unsubscribeAllTemplates(),this.templateService=null),this.hass=null}evaluateDisplayConditions(e,t="always"){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;if("always"===t||!e||0===e.length)return!0;const i=e.map((e=>this.evaluateSingleCondition(e)));switch(t){case"every":return i.every((e=>e));case"any":return i.some((e=>e));default:return!0}}evaluateModuleVisibility(e){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;const t=e.display_mode||"always";if("always"===t)return!0;const i=[...e.display_conditions||[]];return this.evaluateDisplayConditions(i,t)}evaluateRowVisibility(e){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;if(e.template_mode&&e.template){const t={id:`template_${e.id}`,type:"template",template:e.template};return this.evaluateTemplateCondition(t)}return this.evaluateDisplayConditions(e.display_conditions||[],e.display_mode||"always")}evaluateColumnVisibility(e){if(!this.hass)return console.warn("[LogicService] HomeAssistant instance not available"),!0;if(e.template_mode&&e.template){const t={id:`template_${e.id}`,type:"template",template:e.template};return this.evaluateTemplateCondition(t)}return this.evaluateDisplayConditions(e.display_conditions||[],e.display_mode||"always")}evaluateSingleCondition(e){if(!1===e.enabled)return!0;switch(e.type){case"entity_state":case"entity":return this.evaluateEntityStateCondition(e);case"entity_attribute":return this.evaluateEntityAttributeCondition(e);case"time":return this.evaluateTimeCondition(e);case"template":return this.evaluateTemplateCondition(e);default:return console.warn("[LogicService] Unknown condition type:",e.type),!0}}evaluateEntityStateCondition(e){if(!e.entity||!this.hass)return!0;const t=this.hass.states[e.entity];if(!t)return console.warn(`[LogicService] Entity not found: ${e.entity}`),!0;const i=e.operator||"=",o=e.value,n=t.state;switch(i){case"=":return n===String(o);case"!=":return n!==String(o);case">":const e=this.tryParseNumber(n),t=this.tryParseNumber(o);return null!==e&&null!==t&&e>t;case">=":const a=this.tryParseNumber(n),r=this.tryParseNumber(o);return null!==a&&null!==r&&a>=r;case"<":const s=this.tryParseNumber(n),l=this.tryParseNumber(o);return null!==s&&null!==l&&s<l;case"<=":const d=this.tryParseNumber(n),c=this.tryParseNumber(o);return null!==d&&null!==c&&d<=c;case"contains":return String(n).toLowerCase().includes(String(o).toLowerCase());case"not_contains":return!String(n).toLowerCase().includes(String(o).toLowerCase());case"has_value":return null!=n&&""!==n;case"no_value":return null==n||""===n;default:return console.warn(`[LogicService] Unknown operator: ${i}`),!0}}evaluateEntityAttributeCondition(e){if(!e.entity||!e.attribute||!this.hass)return!0;const t=this.hass.states[e.entity];if(!t)return console.warn(`[LogicService] Entity not found: ${e.entity}`),!0;const i=t.attributes[e.attribute];if(void 0===i)return console.warn(`[LogicService] Attribute '${e.attribute}' not found on entity '${e.entity}'`),!0;const o=e.operator||"=",n=e.value,a=i;switch(o){case"=":return String(a)===String(n);case"!=":return String(a)!==String(n);case">":const e=this.tryParseNumber(a),t=this.tryParseNumber(n);return null!==e&&null!==t&&e>t;case">=":const i=this.tryParseNumber(a),r=this.tryParseNumber(n);return null!==i&&null!==r&&i>=r;case"<":const s=this.tryParseNumber(a),l=this.tryParseNumber(n);return null!==s&&null!==l&&s<l;case"<=":const d=this.tryParseNumber(a),c=this.tryParseNumber(n);return null!==d&&null!==c&&d<=c;case"contains":return String(a).toLowerCase().includes(String(n).toLowerCase());case"not_contains":return!String(a).toLowerCase().includes(String(n).toLowerCase());case"has_value":return null!=a&&""!==a;case"no_value":return null==a||""===a;default:return console.warn(`[LogicService] Unknown operator: ${o}`),!0}}evaluateTimeCondition(e){if(!e.time_from||!e.time_to)return!0;const t=new Date,i=60*t.getHours()+t.getMinutes(),[o,n]=e.time_from.split(":").map(Number),[a,r]=e.time_to.split(":").map(Number),s=60*o+n,l=60*a+r;return s<=l?i>=s&&i<=l:i>=s||i<=l}evaluateTemplateCondition(e){if(!e.template||!this.hass)return!0;try{const t=`logic_condition_${this._hashString(e.template)}`;if(this.templateService)if(this.templateService.hasTemplateSubscription(t)){const e=this.templateService.getTemplateResult(t);if(void 0!==e)return e}else this.templateService.subscribeToTemplate(e.template,t,(()=>{}));const i=e.template;if(i.includes("{% if ")&&i.includes(" %}")){const e=i.match(/\{\%\s*if\s+(.+?)\s*\%\}/);if(e){const t=e[1].match(/states\(['"]([^'"]+)['"]\)\s*(==|!=)\s*['"]([^'"]+)['"]/);if(t){const e=t[1],i=t[2],o=t[3],n=this.hass.states[e];if(n){const e=n.state;if("=="===i)return e===o;if("!="===i)return e!==o}}}}const o=/\{\{\s*states\(['"]([^'"]+)['"]\)\s*(==|!=)\s*['"]([^'"]+)['"]\s*\}\}/g;let n;for(;null!==(n=o.exec(i));){const e=n[1],t=n[2],o=n[3],a=this.hass.states[e];if(a){const e=a.state;let r=!1;if("=="===t?r=e===o:"!="===t&&(r=e!==o),i.trim()===n[0].trim())return r}}const a=/\{\{\s*states\(['"]([^'"]+)['"]\)\s*\}\}/g;let r=i;for(;null!==(n=a.exec(i));){const e=n[1],t=this.hass.states[e],i=t?t.state:"unknown";r=r.replace(n[0],i)}if(r!==i){const e=r.toLowerCase().trim();if(["true","on","yes","1"].includes(e))return!0;if(["false","off","no","0","unavailable","unknown","none",""].includes(e))return!1}return!0}catch(e){return!0}}tryParseNumber(e){if("number"==typeof e)return e;if("string"==typeof e){const t=parseFloat(e);return isNaN(t)?null:t}return null}evaluateLogicProperties(e){if(!e.logic_entity||!this.hass)return!0;const t={id:"logic-property",type:e.logic_attribute?"entity_attribute":"entity_state",entity:e.logic_entity,attribute:e.logic_attribute,operator:e.logic_operator||"=",value:e.logic_value};return this.evaluateSingleCondition(t)}_hashString(e){let t=0;for(let i=0;i<e.length;i+=1)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Math.abs(t)}}const a=n.getInstance()},1522:(e,t,i)=>{i.d(t,{E:()=>d});var o=i(5183),n=i(456),a=i(866),r=i(2371),s=i(796),l=i(7987);i(6768);class d extends a.m{constructor(){super(...arguments),this.metadata={type:"dropdown",title:"Dropdown",description:"Interactive dropdown selector with Home Assistant actions",author:"WJD Designs",version:"1.0.0",icon:"mdi:menu-down",category:"interactive",tags:["dropdown","select","menu","scene","service","interactive"]},this.expandedOptions=new Set,this.dropdownOpen=!1,this.currentSelection=new Map,this.draggedIndex=null}createDefault(e,t){return{id:e||this.generateId("dropdown"),type:"dropdown",source_mode:"manual",source_entity:void 0,placeholder:"Choose an option...",options:[{id:this.generateId("option"),label:"Turn On Lights",action:{action:"perform-action",service:"light.turn_on",target:{entity_id:["light.living_room"]}}},{id:this.generateId("option"),label:"Turn Off Lights",action:{action:"perform-action",service:"light.turn_off",target:{entity_id:["light.living_room"]}}}],entity_option_customization:{},current_selection:"Turn On Lights",track_state:!0,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0,enable_hover_effect:!1,hover_background_color:"var(--primary-color)"}}getOptionsFromEntity(e,t){var i;if(!e.source_entity||!t)return[];const o=t.states[e.source_entity];if(!o)return[];const n=null===(i=o.attributes)||void 0===i?void 0:i.options;return Array.isArray(n)?n:[]}getCurrentStateFromEntity(e,t){if(!e.source_entity||!t)return;const i=t.states[e.source_entity];return i?i.state:void 0}renderEntitySourcePreview(e,t,i){const a=this.getOptionsFromEntity(e,t),r=this.getCurrentStateFromEntity(e,t);return 0===a.length?o.qy`
        <div style="font-size: 12px; color: var(--secondary-text-color); font-style: italic;">
          ${(0,n.kg)("editor.dropdown.no_options_found",i,"No options found for this entity")}
        </div>
      `:o.qy`
      <div style="font-size: 12px; margin-top: 8px;">
        <div style="font-weight: 600; margin-bottom: 4px; color: var(--primary-text-color);">
          ${(0,n.kg)("editor.dropdown.available_options",i,"Available Options")}
          (${a.length}):
        </div>
        <div style="color: var(--secondary-text-color); line-height: 1.6;">
          ${a.map(((e,t)=>o.qy`<div style="display: flex; align-items: center; gap: 6px;">
                <span style="color: var(--primary-color);">•</span>
                <span
                  style="${e===r?"font-weight: 600; color: var(--primary-color);":""}"
                  >${e}</span
                >
                ${e===r?o.qy`<span style="font-size: 10px; opacity: 0.7;">(current)</span>`:""}
              </div>`))}
        </div>
      </div>
    `}renderGeneralTab(e,t,i,a){var r,s;const l=e,d=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en",c=(e,t)=>{const i=l.options.map((i=>i.id===e?Object.assign(Object.assign({},i),t):i));a({options:i})},p=(e,t)=>{const i=[...l.options],[o]=i.splice(e,1);i.splice(t,0,o),a({options:i})},u=e=>{const t=l.options.find((t=>t.id===e));if(t){const i=Object.assign(Object.assign({},t),{id:this.generateId("option"),label:`${t.label} (Copy)`}),o=l.options.findIndex((t=>t.id===e)),n=[...l.options.slice(0,o+1),i,...l.options.slice(o+1)];a({options:n})}};return o.qy`
      ${this.injectUcFormStyles()}
      <div class="general-tab">
        <!-- Source Configuration -->
        <div class="settings-section">
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,n.kg)("editor.dropdown.source.title",d,"Dropdown Source")}
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
          >
            ${(0,n.kg)("editor.dropdown.source.desc",d,"Choose whether to manually define options or use a select/input_select entity.")}
          </div>

          <!-- Source Mode Selection -->
          <div style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.dropdown.source_mode.title",d,"Source Mode"),(0,n.kg)("editor.dropdown.source_mode.desc",d,"Manual: Define custom options with actions. Entity: Use options from a select or input_select entity."),t,{source_mode:l.source_mode||"manual"},[this.selectField("source_mode",[{value:"manual",label:(0,n.kg)("editor.dropdown.source_mode.manual",d,"Manual Options")},{value:"entity",label:(0,n.kg)("editor.dropdown.source_mode.entity",d,"Entity Source")}])],(e=>{const t=e.detail.value.source_mode;t!==(l.source_mode||"manual")&&(a({source_mode:t}),setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
          </div>

          <!-- Entity Picker (only shown when source_mode is 'entity') -->
          ${"entity"===l.source_mode?o.qy`
                <div style="margin-bottom: 16px;">
                  ${this.renderConditionalFieldsGroup((0,n.kg)("editor.dropdown.entity_source_config",d,"Entity Source Configuration"),o.qy`
                      ${this.renderFieldSection((0,n.kg)("editor.dropdown.source_entity.title",d,"Source Entity"),(0,n.kg)("editor.dropdown.source_entity.desc",d,"Select or input_select entity to use as the source for dropdown options."),t,{source_entity:l.source_entity||""},[{name:"source_entity",label:"",selector:{entity:{domain:["input_select","select"]}}}],(e=>{const t=e.detail.value.source_entity;t!==(l.source_entity||"")&&(a({source_entity:t}),setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
                      ${l.source_entity?o.qy`
                            <div
                              style="margin-top: 12px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.05); border-radius: 4px; border-left: 3px solid var(--primary-color);"
                            >
                              <div
                                style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 8px;"
                              >
                                ${(0,n.kg)("editor.dropdown.entity_source_info",d,"Options will be automatically populated from the entity. The dropdown will display the current state and update the entity when an option is selected.")}
                              </div>
                              ${this.renderEntitySourcePreview(l,t,d)}
                            </div>
                          `:""}
                    `)}
                </div>
              `:""}
        </div>

        <!-- Basic Settings (only show for manual mode or when no entity is selected) -->
        ${"manual"===l.source_mode?o.qy`
              <div class="settings-section">
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
                >
                  ${(0,n.kg)("editor.dropdown.basic.title",d,"Basic Settings")}
                </div>
                <div
                  style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
                >
                  ${(0,n.kg)("editor.dropdown.basic.desc",d,"Configure the dropdown appearance and behavior.")}
                </div>

                <!-- Keep Selection State -->
                <div
                  style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;"
                >
                  <div>
                    <div
                      style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
                    >
                      ${(0,n.kg)("editor.dropdown.keep_selection_state.title",d,"Keep Selection State")}
                    </div>
                    <div
                      style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8; line-height: 1.4;"
                    >
                      ${(0,n.kg)("editor.dropdown.keep_selection_state.desc",d,"Remember and display the last selected option (recommended for scene selectors)")}
                    </div>
                  </div>
                  <ha-switch
                    .checked=${null===(s=l.track_state)||void 0===s||s}
                    @change=${e=>{const t=e.target;a({track_state:t.checked})}}
                  ></ha-switch>
                </div>

                <!-- Placeholder (only show when track_state is disabled) -->
                ${l.track_state?"":o.qy`
                      <div style="margin-bottom: 16px;">
                        <div
                          class="field-title"
                          style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
                        >
                          ${(0,n.kg)("editor.dropdown.placeholder.title",d,"Placeholder")}
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
                        >
                          ${(0,n.kg)("editor.dropdown.placeholder.desc",d,"Text shown when no option is selected.")}
                        </div>
                        ${this.renderUcForm(t,{placeholder:l.placeholder||""},[this.textField("placeholder")],(e=>{e.detail.value.placeholder!==(l.placeholder||"")&&a(e.detail.value)}),!1)}
                      </div>
                    `}
              </div>

              <!-- Dropdown Options -->
              <div class="settings-section">
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
                >
                  ${(0,n.kg)("editor.dropdown.options.title",d,"Dropdown Options")}
                </div>

                <div class="options-list">
                  ${l.options.map(((e,i)=>o.qy`
                      <div
                        class="option-item"
                        style="margin-bottom: 24px; background: var(--secondary-background-color); border-radius: 8px; border: 1px solid var(--divider-color); overflow: hidden;"
                        data-option-id="${e.id}"
                        data-option-index="${i}"
                        @dragover=${e=>this.handleDragOver(e)}
                        @dragenter=${e=>this.handleDragEnter(e)}
                        @dragleave=${e=>this.handleDragLeave(e)}
                        @drop=${e=>this.handleDrop(e,i,p)}
                      >
                        <div
                          class="option-header"
                          style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: rgba(var(--rgb-primary-color), 0.05); border-bottom: 1px solid var(--divider-color); cursor: pointer;"
                          @click=${e=>this.toggleHeader(e)}
                        >
                          <div style="display: flex; align-items: center; gap: 12px;">
                            <div
                              class="drag-handle"
                              style="padding: 8px; margin: -8px; cursor: grab; border-radius: 4px; transition: background-color 0.2s ease;"
                              draggable="true"
                              @dragstart=${e=>this.handleDragStart(e,i)}
                              @dragend=${e=>this.handleDragEnd(e)}
                              @click=${e=>e.stopPropagation()}
                              @mousedown=${e=>e.stopPropagation()}
                              .title=${(0,n.kg)("editor.dropdown.drag_option",d,"Drag to reorder")}
                              @mouseenter=${e=>{e.target.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)"}}
                              @mouseleave=${e=>{e.target.style.backgroundColor="transparent"}}
                            >
                              <ha-icon
                                icon="mdi:drag"
                                style="color: var(--secondary-text-color); pointer-events: none;"
                              ></ha-icon>
                            </div>
                            <div style="font-weight: 600; color: var(--primary-text-color);">
                              ${e.label||(0,n.kg)("editor.dropdown.option_number",d,"Option {number}").replace("{number}",(i+1).toString())}
                            </div>
                          </div>
                          <div style="display: flex; align-items: center; gap: 8px;">
                            <ha-icon-button
                              @click=${t=>{t.stopPropagation(),u(e.id)}}
                              .title=${(0,n.kg)("editor.dropdown.duplicate_option",d,"Duplicate option")}
                            >
                              <ha-icon icon="mdi:content-duplicate"></ha-icon>
                            </ha-icon-button>
                            <ha-icon-button
                              @click=${t=>{t.stopPropagation(),(e=>{const t=l.options.filter((t=>t.id!==e));a({options:t})})(e.id)}}
                              .title=${(0,n.kg)("editor.dropdown.remove_option",d,"Remove option")}
                              .disabled=${l.options.length<=1}
                            >
                              <ha-icon icon="mdi:delete"></ha-icon>
                            </ha-icon-button>
                            <ha-icon
                              class="expand-caret"
                              icon="mdi:chevron-down"
                              style="color: var(--secondary-text-color); transition: transform 0.2s ease; transform: ${this.expandedOptions.has(e.id)?"rotate(180deg)":"rotate(0deg)"}; cursor: pointer; padding: 8px; margin: -8px;"
                              @click=${t=>{t.stopPropagation(),t.preventDefault(),console.log("Direct caret clicked for option:",e.id);const i=t.target,o=i.closest(".option-item"),n=null==o?void 0:o.querySelector(".option-content");if(o&&n&&i){const e=o.getAttribute("data-option-id")||"";console.log("Direct caret - found ID:",e),this.expandedOptions.has(e)?(this.expandedOptions.delete(e),n.style.display="none",i.style.transform="rotate(0deg)",console.log("Direct caret - collapsed")):(this.expandedOptions.add(e),n.style.display="block",i.style.transform="rotate(180deg)",console.log("Direct caret - expanded"))}}}
                            ></ha-icon>
                          </div>
                        </div>

                        <div
                          class="option-content"
                          style="padding: 16px; display: ${this.expandedOptions.has(e.id)?"block":"none"};"
                        >
                          ${this.renderOptionConfiguration(e,t,d,c)}
                        </div>
                      </div>
                    `))}
                </div>

                <div style="margin-top: 16px; text-align: center;">
                  <ha-button @click=${()=>{const e=this.generateId("option"),t={id:e,label:`Option ${l.options.length+1}`,action:{action:"more-info",entity:""}};this.expandedOptions.add(e),a({options:[...l.options,t]})}}>
                    <ha-icon icon="mdi:plus" slot="icon"></ha-icon>
                    ${(0,n.kg)("editor.dropdown.add_option",d,"Add Option")}
                  </ha-button>
                </div>
              </div>
            `:o.qy`
              <div class="settings-section">
                <div
                  class="section-title"
                  style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
                >
                  ${(0,n.kg)("editor.dropdown.basic.title",d,"Basic Settings")}
                </div>
                <div
                  style="text-align: center; padding: 32px; color: var(--secondary-text-color); background: rgba(var(--rgb-primary-color), 0.05); border-radius: 8px;"
                >
                  <ha-icon
                    icon="mdi:link-variant"
                    style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"
                  ></ha-icon>
                  <div style="font-size: 16px; font-weight: 600; margin-bottom: 8px;">
                    ${(0,n.kg)("editor.dropdown.entity_mode_active",d,"Entity Source Mode Active")}
                  </div>
                  <div style="font-size: 14px; line-height: 1.4;">
                    ${(0,n.kg)("editor.dropdown.entity_mode_desc",d,"Options are automatically managed by the selected entity. The dropdown will display the current state and update the entity when an option is selected.")}
                  </div>
                </div>
              </div>
            `}
      </div>
    `}handleDragStart(e,t){var i;if(console.log("Drag start for index:",t),this.draggedIndex=t,e.dataTransfer){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.toString());const o=e.target.closest(".option-item");if(null==o?void 0:o.querySelector(".option-header")){const n=document.createElement("div"),a=(null===(i=null==o?void 0:o.querySelector(".option-header div:nth-child(1) div:nth-child(2)"))||void 0===i?void 0:i.textContent)||`Option ${t+1}`;n.innerHTML=`\n          <div style="\n            display: flex; \n            align-items: center; \n            gap: 8px; \n            padding: 8px 12px;\n            background: var(--primary-color);\n            color: white;\n            border-radius: 6px;\n            font-size: 14px;\n            font-weight: 600;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n            white-space: nowrap;\n            max-width: 200px;\n            transform: rotate(2deg);\n          ">\n            <ha-icon icon="mdi:drag" style="color: white; font-size: 16px;"></ha-icon>\n            <span>${a}</span>\n          </div>\n        `,n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.style.zIndex="10000",n.style.pointerEvents="none",document.body.appendChild(n),e.dataTransfer.setDragImage(n,100,20),setTimeout((()=>{document.body.contains(n)&&document.body.removeChild(n)}),0)}}const o=e.target.closest(".option-item");o&&(o.classList.add("dragging"),console.log("Added dragging class to option item"))}handleDragOver(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}handleDragEnter(e){e.preventDefault();const t=e.currentTarget;t&&!t.classList.contains("dragging")&&(t.style.borderTop="3px solid var(--primary-color)",t.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)",console.log("Drag entered option item"))}handleDragLeave(e){const t=e.currentTarget;t&&(t.style.borderTop="",t.style.backgroundColor="",console.log("Drag left option item"))}handleDrop(e,t,i){e.preventDefault(),console.log("Drop event - from:",this.draggedIndex,"to:",t);const o=e.currentTarget;o.style.borderTop="",o.style.backgroundColor="",null!==this.draggedIndex&&this.draggedIndex!==t&&(console.log("Executing moveOption from",this.draggedIndex,"to",t),i(this.draggedIndex,t)),document.querySelectorAll(".option-item").forEach((e=>{e.style.borderTop="",e.style.backgroundColor="",e.classList.remove("dragging")})),this.draggedIndex=null}handleDragEnd(e){var t;console.log("Drag end");const i=null===(t=e.target)||void 0===t?void 0:t.closest(".option-item");i&&(i.classList.remove("dragging"),console.log("Removed dragging class")),document.querySelectorAll(".option-item").forEach((e=>{e.style.borderTop=""})),this.draggedIndex=null}toggleHeader(e){console.log("Header clicked");const t=e.currentTarget.closest(".option-item");if(!t)return void console.log("No card found");const i=t.getAttribute("data-option-id")||"";if(!i)return void console.log("No ID found");console.log("Toggling option with ID:",i);const o=t.querySelector(".option-content"),n=t.querySelector(".expand-caret");if(console.log("Found content from card:",o),console.log("Found caret from card:",n),this.expandedOptions.has(i)?this.expandedOptions.delete(i):this.expandedOptions.add(i),o&&n){const e=this.expandedOptions.has(i);console.log("Is expanded:",e),e?(o.style.display="block",n.style.transform="rotate(180deg)",console.log("Showing content, rotating caret to 180deg")):(o.style.display="none",n.style.transform="rotate(0deg)",console.log("Hiding content, rotating caret to 0deg"))}}toggleOptionExpanded(e){console.log("toggleOptionExpanded called for:",e),console.log("Current expanded options:",Array.from(this.expandedOptions)),this.expandedOptions.has(e)?(this.expandedOptions.delete(e),console.log("Removing from expanded options")):(this.expandedOptions.add(e),console.log("Adding to expanded options"));const t=document.querySelector(`[data-option-id="${e}"]`);if(console.log("Found option element:",t),t){const i=t.querySelector(".option-content"),o=t.querySelector(".expand-caret");if(console.log("Found content:",i),console.log("Found caret:",o),i&&o){const t=this.expandedOptions.has(e);console.log("Is expanded:",t),t?(i.style.display="block",o.style.transform="rotate(180deg)",console.log("Showing content, rotating caret to 180deg")):(i.style.display="none",o.style.transform="rotate(0deg)",console.log("Hiding content, rotating caret to 0deg"))}}}renderOptionConfiguration(e,t,i,a){return o.qy`
      <!-- Basic Option Settings -->
      <div class="field-group" style="margin-bottom: 12px;">
        ${this.renderFieldSection((0,n.kg)("editor.dropdown.option.label",i,"Label"),(0,n.kg)("editor.dropdown.option.label_desc",i,"Display text for this option"),t,{label:e.label},[this.textField("label")],(t=>a(e.id,t.detail.value)))}
      </div>

      <div class="field-group" style="margin-bottom: 12px;">
        ${this.renderFieldSection((0,n.kg)("editor.dropdown.option.icon",i,"Icon"),(0,n.kg)("editor.dropdown.option.icon_desc",i,"Optional icon for this option (e.g., mdi:lightbulb)"),t,{icon:e.icon||""},[this.iconField("icon")],(t=>a(e.id,t.detail.value)))}
      </div>

      ${e.icon?o.qy`
            <div class="field-group" style="margin-bottom: 12px;">
              <div
                style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;"
              >
                <div>
                  <div
                    style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
                  >
                    ${(0,n.kg)("editor.dropdown.option.use_state_color",i,"Use State Color")}
                  </div>
                  <div
                    style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8; line-height: 1.4;"
                  >
                    ${(0,n.kg)("editor.dropdown.option.use_state_color_desc",i,"Use the entity state color for the icon (overrides custom color)")}
                  </div>
                </div>
                <ha-switch
                  .checked=${e.use_state_color||!1}
                  @change=${t=>{const i=t.target;a(e.id,{use_state_color:i.checked})}}
                ></ha-switch>
              </div>

              ${e.use_state_color?o.qy`
                    <div
                      style="text-align: center; padding: 16px; color: var(--secondary-text-color); font-style: italic; background: rgba(var(--rgb-primary-color), 0.05); border-radius: 4px;"
                    >
                      ${(0,n.kg)("editor.dropdown.option.state_color_enabled",i,"Icon will use entity state color automatically")}
                    </div>
                  `:o.qy`
                    <div class="field-group">
                      <ultra-color-picker
                        .label=${(0,n.kg)("editor.dropdown.option.icon_color",i,"Icon Color")}
                        .value=${e.icon_color||"var(--primary-color)"}
                        .defaultValue=${"var(--primary-color)"}
                        .hass=${t}
                        @value-changed=${t=>a(e.id,{icon_color:t.detail.value})}
                      ></ultra-color-picker>
                    </div>
                  `}
            </div>
          `:""}

      <!-- Action Configuration -->
      <div class="field-group" style="margin-bottom: 12px;">
        <div
          style="font-size: 16px; font-weight: 600; margin-bottom: 8px; color: var(--primary-text-color);"
        >
          ${(0,n.kg)("editor.dropdown.option.action",i,"Action")}
        </div>
        <div style="color: var(--secondary-text-color); font-size: 13px; margin-bottom: 12px;">
          ${(0,n.kg)("editor.dropdown.option.action_desc",i,"What happens when this option is selected")}
        </div>
        ${this.renderUcForm(t,{action_config:e.action},[{name:"action_config",label:"",selector:{ui_action:{actions:["more-info","toggle","navigate","url","perform-action","assist"]}}}],(t=>{var i;const o=null===(i=t.detail.value)||void 0===i?void 0:i.action_config;o&&JSON.stringify(e.action||{})!==JSON.stringify(o||{})&&(a(e.id,{action:o}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
      </div>

      ${"more-info"===e.action.action?o.qy`
            <div class="field-group" style="margin-bottom: 12px;">
              ${this.renderConditionalFieldsGroup((0,n.kg)("editor.dropdown.option.more_info_config",i,"More Info Configuration"),o.qy`
                  <div class="field-group">
                    ${this.renderFieldSection((0,n.kg)("editor.dropdown.option.more_info_entity",i,"Entity"),(0,n.kg)("editor.dropdown.option.more_info_entity_desc",i,"Entity to show more information for"),t,{entity:e.action.entity||""},[this.entityField("entity")],(t=>{t.detail.value.entity!==(e.action.entity||"")&&a(e.id,{action:Object.assign(Object.assign({},e.action),{entity:t.detail.value.entity})})}))}
                  </div>
                `)}
            </div>
          `:""}
      ${"toggle"===e.action.action?o.qy`
            <div class="field-group" style="margin-bottom: 12px;">
              ${this.renderConditionalFieldsGroup((0,n.kg)("editor.dropdown.option.toggle_config",i,"Toggle Configuration"),o.qy`
                  <div class="field-group">
                    ${this.renderFieldSection((0,n.kg)("editor.dropdown.option.toggle_entity",i,"Entity"),(0,n.kg)("editor.dropdown.option.toggle_entity_desc",i,"Entity to toggle on/off"),t,{entity:e.action.entity||""},[this.entityField("entity")],(t=>{t.detail.value.entity!==(e.action.entity||"")&&a(e.id,{action:Object.assign(Object.assign({},e.action),{entity:t.detail.value.entity})})}))}
                  </div>
                `)}
            </div>
          `:""}
    `}renderActionsTab(){return o.qy`
      <div style="text-align: center; padding: 40px; color: var(--secondary-text-color);">
        <ha-icon
          icon="mdi:information-outline"
          style="font-size: 48px; margin-bottom: 16px; opacity: 0.5;"
        ></ha-icon>
        <div style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">
          Actions Configured Per Option
        </div>
        <div style="font-size: 14px; line-height: 1.4;">
          Actions for this dropdown are configured individually for each option in the General tab.
          Each dropdown option can have its own action (More Info, Toggle, Navigate, etc.).
        </div>
      </div>
    `}renderLogicTab(e,t,i,o){return r.X.render(e,t,(e=>o(e)))}renderPreview(e,t,i,n){var a;const r=e,s=r,d=s.color||"var(--primary-text-color)",c=s.font_size||14,p=s.background_color||"var(--secondary-background-color)",u=s.border_color||"var(--divider-color)",h=s.border_radius||4,g={width:"100%",height:"auto",padding:s.padding_top||s.padding_bottom||s.padding_left||s.padding_right?`${s.padding_top||"0px"} ${s.padding_right||"0px"} ${s.padding_bottom||"0px"} ${s.padding_left||"0px"}`:"0",margin:s.margin_top||s.margin_bottom||s.margin_left||s.margin_right?`${s.margin_top||"8px"} ${s.margin_right||"0"} ${s.margin_bottom||"8px"} ${s.margin_left||"0"}`:"8px 0",background:s.background_color||"transparent","border-radius":s.border_radius||"4px",border:s.border_style&&"none"!==s.border_style?`${s.border_width||"1px"} ${s.border_style} ${s.border_color||"var(--divider-color)"}`:"none","box-shadow":s.box_shadow_h||s.box_shadow_v||s.box_shadow_blur||s.box_shadow_spread?`${s.box_shadow_h||"0px"} ${s.box_shadow_v||"0px"} ${s.box_shadow_blur||"0px"} ${s.box_shadow_spread||"0px"} ${s.box_shadow_color||"rgba(0,0,0,.2)"}`:"none","box-sizing":"border-box"},m=s.width||"100%",f=s.height||"auto",_=s.max_width||"none",v=s.max_height||"none",b=s.min_width||"auto",y=s.min_height||"auto",x=s.font_family||"inherit",k=s.font_weight||"normal",w=s.text_align||"left",S=`\n      width: ${this.addPixelUnit(m)};\n      max-width: ${this.addPixelUnit(_)};\n      min-width: ${this.addPixelUnit(b)};\n      height: ${this.addPixelUnit(f)};\n      max-height: ${this.addPixelUnit(v)};\n      min-height: ${this.addPixelUnit(y)};\n      font-size: ${this.addPixelUnit(c.toString())};\n      font-family: ${x};\n      font-weight: ${k};\n      text-align: ${w};\n      color: ${d};\n      background: ${p};\n      border: 1px solid ${u};\n      border-radius: ${this.addPixelUnit(h.toString())};\n      padding: 8px 12px;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      box-sizing: border-box;\n    `,O="entity"===r.source_mode&&r.source_entity;let A,C=[];if(O){const e=this.getOptionsFromEntity(r,t),i=this.getCurrentStateFromEntity(r,t);C=e.map((e=>{var t,i,o,n,a,s;return{label:e,icon:null===(i=null===(t=r.entity_option_customization)||void 0===t?void 0:t[e])||void 0===i?void 0:i.icon,icon_color:null===(n=null===(o=r.entity_option_customization)||void 0===o?void 0:o[e])||void 0===n?void 0:n.icon_color,use_state_color:null===(s=null===(a=r.entity_option_customization)||void 0===a?void 0:a[e])||void 0===s?void 0:s.use_state_color}})),A=i}else if(C=r.options.map((e=>({label:e.label,icon:e.icon,icon_color:e.icon_color,use_state_color:e.use_state_color}))),r.track_state){const e=r.id,t=this.currentSelection.get(e)||r.current_selection;A=t}let $=C.find((e=>e.label===A));if(!$&&C.length>0&&(O||r.track_state)&&($=C[0],!O)){const e=r.id;this.currentSelection.set(e,$.label)}const T=!O&&!r.track_state,z=r.placeholder||"Choose an option...",P=null===(a=r.design)||void 0===a?void 0:a.hover_effect,E=l.k.getHoverEffectClass(P);return o.qy`
      <div
        class="dropdown-module-container ${E}"
        style=${this.styleObjectToCss(g)}
      >
        <div
          class="dropdown-module-preview"
          style="display: flex; flex-direction: column; align-items: flex-start;"
        >
          <div style="position: relative; width: 100%;">
            <div class="custom-dropdown" style="position: relative;">
              <div
                class="dropdown-selected"
                style="${S} display: flex; align-items: center; justify-content: space-between;"
                @click=${e=>{console.log("Dropdown clicked"),this.toggleDropdown(e)}}
              >
                <div style="display: flex; align-items: center; gap: 8px;">
                  ${$?o.qy`
                        ${$.icon?o.qy`<ha-icon
                              icon="${$.icon}"
                              style="color: ${this.getOptionIconColor($,t,r)};"
                            ></ha-icon>`:""}
                        <span>${$.label}</span>
                      `:o.qy`<span style="color: var(--secondary-text-color);"
                        >${z}</span
                      >`}
                </div>
                <ha-icon
                  icon="mdi:chevron-down"
                  style="color: var(--secondary-text-color);"
                ></ha-icon>
              </div>

              <div
                class="dropdown-options"
                style="position: absolute; top: 100%; left: 0; right: 0; background: var(--card-background-color); border: 1px solid var(--divider-color); border-radius: 4px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 10; display: none; max-height: 200px; overflow-y: auto; color: ${d}; font-size: ${this.addPixelUnit(c.toString())}; font-family: ${x}; font-weight: ${k};"
              >
                ${T?o.qy`
                      <div
                        class="dropdown-option"
                        style="padding: 12px; cursor: pointer; border-bottom: 1px solid var(--divider-color); color: inherit; font-size: inherit; font-family: inherit; font-weight: inherit;"
                        @click=${e=>{console.log("Placeholder option clicked"),this.selectOption("",r),this.closeDropdown(e)}}
                      >
                        <span
                          style="color: var(--secondary-text-color); font-size: inherit; font-family: inherit; font-weight: inherit;"
                          >${z}</span
                        >
                      </div>
                    `:""}
                ${C.map((e=>o.qy`
                    <div
                      class="dropdown-option"
                      style="padding: 12px; cursor: pointer; border-bottom: 1px solid var(--divider-color); display: flex; align-items: center; gap: 8px; transition: background-color 0.2s ease; color: inherit; font-size: inherit; font-family: inherit; font-weight: inherit;"
                      @click=${o=>{if(console.log("Option clicked:",e.label),O)this.updateEntitySelection(r,e.label,t);else{if(r.track_state){const i=r.id;this.currentSelection.set(i,e.label),console.log("Updated selection for module",i,"to:",e.label);const n=o.target.closest(".dropdown-module-container");if(n){const i=n.querySelector(".dropdown-selected span:last-child");i&&(i.textContent=e.label,console.log("Updated display to show:",e.label));const o=n.querySelector(".dropdown-selected > div");if(o){const i=o.querySelector("ha-icon");if(e.icon)if(i)i.setAttribute("icon",e.icon),i.style.color=this.getOptionIconColor(e,t,r);else{const i=document.createElement("ha-icon");i.setAttribute("icon",e.icon),i.style.color=this.getOptionIconColor(e,t,r),i.style.marginRight="8px",o.insertBefore(i,o.firstChild)}else i&&i.remove()}}}const n=r.options.find((t=>t.label===e.label));n&&(this.selectOption(e.label,r),this.executeOptionAction(n,t,o.currentTarget||void 0,i))}this.closeDropdown(o)}}
                      @mouseenter=${e=>{e.target.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)"}}
                      @mouseleave=${e=>{e.target.style.backgroundColor="transparent"}}
                    >
                      ${e.icon?o.qy`<ha-icon
                            icon="${e.icon}"
                            style="color: ${this.getOptionIconColor(e,t,r)};"
                          ></ha-icon>`:""}
                      <span>${e.label}</span>
                    </div>
                  `))}
              </div>
            </div>
          </div>
        </div>
      </div>
    `}getOptionIconColor(e,t,i){var o;if(e.use_state_color&&i.source_entity&&t){const e=t.states[i.source_entity];if(e){const t=null===(o=e.attributes)||void 0===o?void 0:o.rgb_color;if(t&&Array.isArray(t)&&3===t.length)return`rgb(${t[0]}, ${t[1]}, ${t[2]})`;const n=i.source_entity.split(".")[0],a=e.state;switch(n){case"light":return"on"===a?"#FFA500":"#666666";case"switch":return"on"===a?"#4CAF50":"#666666";case"binary_sensor":return"on"===a?"#F44336":"#4CAF50";case"sensor":return"#2196F3";default:return"on"===a||"open"===a||"active"===a?"var(--primary-color)":"#666666"}}}return e.icon_color||"var(--primary-color)"}async updateEntitySelection(e,t,i){if(!e.source_entity||!i)return;const o=e.source_entity.split(".")[0],n="input_select"===o?"input_select.select_option":"select.select_option";console.log(`Calling ${n} for ${e.source_entity} with option: ${t}`);try{await i.callService(o,"select_option",{entity_id:e.source_entity,option:t}),console.log("Service call successful")}catch(e){console.error("Failed to update entity selection:",e)}}getIconColor(e,t){var i;if(e.use_state_color&&e.action.entity&&t){const o=t.states[e.action.entity];if(o){const t=null===(i=o.attributes)||void 0===i?void 0:i.rgb_color;if(t&&Array.isArray(t)&&3===t.length)return`rgb(${t[0]}, ${t[1]}, ${t[2]})`;const n=e.action.entity.split(".")[0],a=o.state;switch(n){case"light":return"on"===a?"#FFA500":"#666666";case"switch":return"on"===a?"#4CAF50":"#666666";case"binary_sensor":return"on"===a?"#F44336":"#4CAF50";case"sensor":return"#2196F3";default:return"on"===a||"open"===a||"active"===a?"var(--primary-color)":"#666666"}}}return e.icon_color||"var(--primary-color)"}toggleDropdown(e){this.dropdownOpen=!this.dropdownOpen;let t=null;if(e){const i=e.target.closest(".custom-dropdown");t=null==i?void 0:i.querySelector(".dropdown-options")}else t=document.querySelector(".dropdown-options");t&&(t.style.display=this.dropdownOpen?"block":"none",console.log("Dropdown toggled:",this.dropdownOpen?"open":"closed"))}closeDropdown(e){this.dropdownOpen=!1;let t=null;if(e){const i=e.target.closest(".custom-dropdown");t=null==i?void 0:i.querySelector(".dropdown-options")}else t=document.querySelector(".dropdown-options");t&&(t.style.display="none",console.log("Dropdown closed"))}selectOption(e,t){t.track_state&&e&&console.log("Selected option:",e)}executeOptionAction(e,t,o,n){if(console.log("Executing action:",e.action),!1!==(null==n?void 0:n.haptic_feedback)&&Promise.resolve().then(i.bind(i,9811)).then((({forwardHaptic:e})=>{e("selection")})),"more-info"===e.action.action&&e.action.entity){console.log("Triggering more-info for entity:",e.action.entity);const t=new CustomEvent("hass-more-info",{detail:{entityId:e.action.entity},bubbles:!0,composed:!0});o?o.dispatchEvent(t):(document.dispatchEvent(t),window.dispatchEvent(t))}else s.K.handleAction(e.action,t,o||document.body,n)}addPixelUnit(e){return e?"auto"===e||"none"===e||"inherit"===e?e:/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t}`)).join("; ")}validate(e){const t=e,i=[...super.validate(e).errors];return"entity"===t.source_mode?t.source_entity||i.push("Source entity is required when using entity source mode"):t.options&&0!==t.options.length?t.options.forEach(((e,t)=>{if(e.label&&""!==e.label.trim()||i.push(`Option ${t+1}: Label is required`),e.action&&e.action.action)switch(e.action.action){case"more-info":case"toggle":e.action.entity||i.push(`Option ${t+1}: Entity is required for ${e.action.action} action`);break;case"navigate":e.action.navigation_path||i.push(`Option ${t+1}: Navigation path is required for navigate action`);break;case"url":e.action.url_path||i.push(`Option ${t+1}: URL is required for url action`);break;case"perform-action":e.action.perform_action||e.action.service||i.push(`Option ${t+1}: Service is required for perform-action`)}else i.push(`Option ${t+1}: Action is required`)})):i.push("At least one dropdown option is required in manual mode"),{valid:0===i.length,errors:i}}getStyles(){return'\n      .dropdown-module-container {\n        width: 100%;\n        box-sizing: border-box;\n        position: relative;\n        pointer-events: auto;\n        isolation: isolate;\n      }\n\n      .dropdown-module-preview {\n        width: 100%;\n        position: relative;\n      }\n\n      /* label styles removed */\n\n      /* Fix dropdown width in preview */\n      .dropdown-module-container select,\n      .dropdown-module-container ha-select {\n        width: 100% !important;\n        max-width: 100% !important;\n        box-sizing: border-box !important;\n        pointer-events: auto !important;\n      }\n\n      /* Custom dropdown styling - allow Global Design tab to override */\n      .custom-dropdown {\n        position: relative;\n        width: inherit;\n        height: inherit;\n      }\n\n      .dropdown-selected {\n        cursor: pointer;\n        user-select: none;\n        /* Allow all design properties to be inherited */\n        font-family: inherit;\n        font-size: inherit;\n        font-weight: inherit;\n        color: inherit;\n        background: inherit;\n        border: inherit;\n        border-radius: inherit;\n        text-align: inherit;\n        width: inherit;\n        height: inherit;\n        max-width: inherit;\n        max-height: inherit;\n        min-width: inherit;\n        min-height: inherit;\n      }\n\n      .dropdown-selected:hover {\n        background: rgba(var(--rgb-primary-color), 0.05) !important;\n      }\n\n      .dropdown-options {\n        position: absolute !important;\n        z-index: 10 !important;\n        background: var(--card-background-color) !important;\n        border: 1px solid var(--divider-color) !important;\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;\n        border-radius: inherit;\n        font-family: inherit;\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      .dropdown-option {\n        font-family: inherit;\n        font-size: inherit;\n        font-weight: inherit;\n        color: inherit;\n        text-align: inherit;\n      }\n\n      .dropdown-option:hover {\n        background: rgba(var(--rgb-primary-color), 0.1) !important;\n      }\n\n      .dropdown-option:last-child {\n        border-bottom: none !important;\n      }\n\n      /* Prevent event bubbling from dropdown container */\n      .dropdown-module-container * {\n        pointer-events: auto;\n      }\n\n      /* Capture all events within dropdown container */\n      .dropdown-module-container {\n        position: relative;\n        z-index: 1;\n      }\n\n      .dropdown-module-container::before {\n        content: \'\';\n        position: absolute;\n        top: -10px;\n        left: -10px;\n        right: -10px;\n        bottom: -10px;\n        pointer-events: auto;\n        z-index: -1;\n      }\n\n      /* Let HA handle dropdown positioning naturally */\n\n      /* Style dropdown items with icons */\n      .dropdown-module-container mwc-list-item ha-icon {\n        margin-right: 8px !important;\n        color: var(--primary-color) !important;\n      }\n\n      .dropdown-module-container mwc-list-item span {\n        display: flex !important;\n        align-items: center !important;\n      }\n\n      .options-list {\n        max-height: 400px;\n        overflow-y: auto;\n      }\n\n      .option-item {\n        transition: all 0.2s ease;\n        position: relative;\n        cursor: default;\n      }\n\n      .option-item:hover {\n        background: rgba(var(--rgb-primary-color), 0.05);\n      }\n\n      .option-item[draggable="true"] {\n        cursor: grab;\n      }\n\n      .option-item:active {\n        cursor: grabbing;\n      }\n\n      .option-item.dragging {\n        opacity: 0.7;\n        transform: rotate(2deg) scale(0.95);\n        box-shadow: 0 8px 16px rgba(0,0,0,0.2);\n        z-index: 100;\n        position: relative;\n      }\n\n      .drag-handle {\n        transition: all 0.2s ease;\n      }\n\n      .drag-handle:strong {\n        background: rgba(var(--rgb-primary-color), 0.15) !important;\n        transform: scale(1.1);\n      }\n\n      .drag-handle:active {\n        cursor: grabbing !important;\n        transform: scale(0.95);\n      }\n\n      .option-header {\n        user-select: none;\n        transition: background-color 0.2s ease;\n      }\n\n      .option-header:hover {\n        background: rgba(var(--rgb-primary-color), 0.1) !important;\n      }\n\n      .option-header ha-icon[icon="mdi:drag"] {\n        transition: color 0.2s ease;\n      }\n\n      .option-header:hover ha-icon[icon="mdi:drag"] {\n        color: var(--primary-color) !important;\n      }\n\n      .expand-caret {\n        transition: transform 0.2s ease !important;\n      }\n\n      .option-content {\n        transition: all 0.3s ease;\n        overflow: hidden;\n      }\n\n      .option-content.collapsed {\n        display: none !important;\n      }\n\n      /* Simplified form styling - let HA handle dropdowns */\n      .option-item ha-form,\n      .field-group ha-form {\n        position: relative;\n      }\n\n      /* Conditional fields grouping */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n\n      /* Settings section styling */\n      .settings-section {\n        background: var(--secondary-background-color);\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 32px;\n        position: relative;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        text-transform: uppercase !important;\n        color: var(--primary-color) !important;\n        margin-bottom: 16px !important;\n        padding-bottom: 0 !important;\n        border-bottom: none !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n        color: var(--primary-text-color) !important;\n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .field-group {\n        margin-bottom: 16px;\n        position: relative;\n      }\n    '}}},1787:(e,t,i)=>{function o(e){return"external_card"===e}i.d(t,{Y:()=>o}),new Set(["text","separator","image","info","bar","gauge","icon","button","spinbox","markdown","horizontal","vertical","slider","pagebreak","camera","graphs","dropdown","light","animated_clock","animated_weather","animated_forecast"])},1866:(e,t,i)=>{i.d(t,{k:()=>g});var o=i(5183),n=i(866),a=i(3057),r=i(9662),s=i(4345),l=i(5400),d=i(7987),c=i(796),p=i(2381),u=i(456),h=i(2371);i(6768),i(7487);class g extends n.m{constructor(){super(...arguments),this.metadata={type:"icon",title:"Icons",description:"Interactive icon buttons",author:"WJD Designs",version:"1.0.0",icon:"mdi:circle",category:"interactive",tags:["icon","button","interactive","control"]},this._previewCollapsed=!1,this._attributeCache=new Map,this._processingAttributes=new Set,this._localStylesInjected=!1}_injectGlobalStyles(){if(!g._globalStylesInjected&&"undefined"!=typeof document){const e="uvc-icon-module-styles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent=g._ANIMATION_KEYFRAMES,document.head.appendChild(t)}g._globalStylesInjected=!0}}_hashString(e){let t=0;if(0===e.length)return t.toString();for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Math.abs(t).toString(36)}_highlightJinja2(e){if(!e)return"";let t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t=t.replace(/(\{\{[\s\S]*?\}\})/g,'<span style="color: #569cd6;">$1</span>'),t=t.replace(/(\{%[\s\S]*?%\})/g,'<span style="color: #c586c0;">$1</span>'),t=t.replace(/((['"`])[^'"`]*?\2)/g,'<span style="color: #ce9178;">$1</span>'),["if","else","elif","endif","for","endfor","in","not","and","or","is","true","false","none","True","False","None"].forEach((e=>{const i=new RegExp(`\\b(${e})\\b`,"g");t=t.replace(i,'<span style="color: #569cd6;">$1</span>')})),t=t.replace(/\b([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/g,'<span style="color: #dcdcaa;">$1</span>('),t=t.replace(/\|\s*([a-zA-Z_][a-zA-Z0-9_]*)/g,'| <span style="color: #dcdcaa;">$1</span>'),t=t.replace(/\b(\d+(?:\.\d+)?)\b/g,'<span style="color: #b5cea8;">$1</span>'),t=t.replace(/(==|!=|<=|>=|<|>|\+|-|\*|\/|%)/g,'<span style="color: #d4d4d4;">$1</span>'),t}createDefault(e,t){return{id:e||this.generateId("icon"),type:"icon",icons:[{id:this.generateId("icon-item"),entity:"weather.forecast_home",name:"",icon_inactive:"mdi:weather-partly-cloudy",icon_active:"mdi:weather-partly-cloudy",inactive_state:"",active_state:"",inactive_attribute:"",active_attribute:"",custom_inactive_state_text:"",custom_active_state_text:"",custom_inactive_name_text:"",custom_active_name_text:"",inactive_template_mode:!1,inactive_template:"",active_template_mode:!1,active_template:"",use_entity_color_for_icon:!1,use_state_color_for_inactive_icon:!1,use_state_color_for_active_icon:!1,color_inactive:"var(--secondary-text-color)",color_active:"var(--primary-color)",inactive_icon_color:"var(--secondary-text-color)",active_icon_color:"var(--primary-color)",inactive_name_color:"var(--primary-text-color)",active_name_color:"var(--primary-text-color)",inactive_state_color:"var(--secondary-text-color)",active_state_color:"var(--secondary-text-color)",show_name_when_inactive:!0,show_state_when_inactive:!0,show_icon_when_inactive:!0,show_name_when_active:!0,show_state_when_active:!0,show_icon_when_active:!0,show_state:!0,show_name:!0,show_units:!0,enable_hover_effect:!1,icon_size:26,text_size:14,name_icon_gap:8,name_state_gap:2,icon_state_gap:4,active_icon_size:26,inactive_icon_size:26,active_text_size:14,inactive_text_size:14,state_size:14,active_state_size:14,inactive_state_size:14,icon_size_locked:!0,text_size_locked:!0,state_size_locked:!0,active_icon_locked:!0,active_icon_color_locked:!1,active_icon_background_locked:!0,active_icon_background_color_locked:!0,active_name_locked:!0,active_name_color_locked:!0,active_state_locked:!1,active_state_color_locked:!0,icon_background:"none",use_entity_color_for_icon_background:!1,icon_background_color:"transparent",inactive_icon_animation:"none",active_icon_animation:"none",vertical_alignment:"center",container_width:void 0,container_background_shape:"none",container_background_color:"#808080",tap_action:void 0,hold_action:void 0,double_tap_action:void 0,click_action:"toggle",double_click_action:"none",hold_action_legacy:"none",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:""}],columns:3,gap:16,tap_action:void 0,hold_action:void 0,double_tap_action:void 0,display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,n){var a;const r=e,s=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        ${r.icons.map(((e,i)=>o.qy`
            <div class="icon-settings-container">
              <!-- Entity Configuration -->
              ${this.renderSettingsSection((0,u.kg)("editor.icon.entity_config.title",s,"ENTITY CONFIGURATION"),(0,u.kg)("editor.icon.entity_config.desc",s,"Configure the entity and active/inactive states"),[{title:(0,u.kg)("editor.icon.entity",s,"Entity"),description:(0,u.kg)("editor.icon.entity_desc",s,"Select the entity this icon represents"),hass:t,data:{entity:e.entity||""},schema:[this.entityField("entity")],onChange:e=>{const o=e.detail.value.entity,a={entity:o};if(o&&(null==t?void 0:t.states[o])){const e=l.s.getEntityIcon(o,t);e&&(a.icon_inactive=e,!1!==r.icons[i].active_icon_locked&&(a.icon_active=e)),!r.tap_action||"nothing"===r.tap_action.action||"default"===r.tap_action.action||r.tap_action.action}if(o&&this._isBinaryEntity(o)){const e=r.icons[i];e.active_state||e.inactive_state||(a.active_state="on",a.inactive_state="off")}const s=r.icons.map(((e,t)=>t===i?Object.assign(Object.assign({},e),a):e));n({icons:s}),setTimeout((()=>{try{this._triggerPreviewUpdate()}catch(e){}window.dispatchEvent(new CustomEvent("ultra-card-actions-refresh",{detail:{moduleId:r.id},bubbles:!0,composed:!0}))}),50);const d=`${r.icons[i].entity}_attributes`,c=`${o}_attributes`;this._attributeCache.delete(d),this._attributeCache.delete(c)}},{title:(0,u.kg)("editor.icon.inactive_state",s,"Inactive State"),description:(0,u.kg)("editor.icon.inactive_state_desc",s,'State value considered "inactive" (leave blank to use actual entity state)'),hass:t,data:{inactive_state:e.inactive_state||""},schema:[this.textField("inactive_state")],onChange:e=>this._updateIcon(r,i,{inactive_state:e.detail.value.inactive_state},n)},{title:(0,u.kg)("editor.icon.active_state",s,"Active State"),description:(0,u.kg)("editor.icon.active_state_desc",s,'State value considered "active" (leave blank to use actual entity state)'),hass:t,data:{active_state:e.active_state||""},schema:[this.textField("active_state")],onChange:e=>this._updateIcon(r,i,{active_state:e.detail.value.active_state},n)}])}

              <!-- Attributes Section -->
              <div class="settings-section" style="margin-bottom: 24px;">
                <div class="section-title">
                  ${(0,u.kg)("editor.icon.attributes_section.title",s,"ATTRIBUTES")}
                </div>
                <div
                  class="section-description"
                  style="margin-bottom: 16px; font-size: 13px; color: var(--secondary-text-color); opacity: 0.8;"
                >
                  ${(0,u.kg)("editor.icon.attributes_section.desc",s,"Select entity attributes to use instead of the main entity state for determining active/inactive conditions")}
                </div>

                <!-- Inactive Attribute -->
                <div class="field-container" style="margin-bottom: 16px;">
                  <div class="field-title">
                    ${(0,u.kg)("editor.icon.inactive_attribute",s,"Inactive Attribute")}
                  </div>
                  <div class="field-description">
                    ${(0,u.kg)("editor.icon.inactive_attribute_desc",s,'Entity attribute to check for inactive state (e.g., "condition" for weather)')}
                  </div>
                  ${this.renderUcForm(t,{inactive_attribute:e.inactive_attribute||""},[this.selectField("inactive_attribute",this._getEntityAttributes(e.entity,t))],(e=>{const t=e.detail.value.inactive_attribute;t!==(r.icons[i].inactive_attribute||"")&&(this._updateIcon(r,i,{inactive_attribute:t},n),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}),!1)}
                </div>

                <!-- Active Attribute -->
                <div class="field-container">
                  <div class="field-title">
                    ${(0,u.kg)("editor.icon.active_attribute",s,"Active Attribute")}
                  </div>
                  <div class="field-description">
                    ${(0,u.kg)("editor.icon.active_attribute_desc",s,'Entity attribute to check for active state (e.g., "condition" for weather)')}
                  </div>
                  ${this.renderUcForm(t,{active_attribute:e.active_attribute||""},[this.selectField("active_attribute",this._getEntityAttributes(e.entity,t))],(e=>{const t=e.detail.value.active_attribute;t!==(r.icons[i].active_attribute||"")&&(this._updateIcon(r,i,{active_attribute:t},n),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}),!1)}
                </div>
              </div>

              <!-- Icon Section -->
              <div class="settings-section" style="margin-bottom: 24px;">
                <div class="section-title">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span>${(0,u.kg)("editor.icon.icon_section.title",s,"Icon")}</span>
                    <ha-switch
                      .checked=${!1!==e.show_icon_when_active&&!1!==e.show_icon_when_inactive}
                      @change=${e=>{const t=e.target.checked;this._updateIcon(r,i,{show_icon_when_active:t,show_icon_when_inactive:t},n)}}
                    ></ha-switch>
                  </div>
                </div>

                ${!1!==e.show_icon_when_active||!1!==e.show_icon_when_inactive?o.qy`
                      <!-- Inactive Icon Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,i=t.querySelector("ha-icon");i&&(i.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            ${(0,u.kg)("editor.icon.inactive_icon",s,"Inactive Icon")}
                          </summary>
                          <div style="padding: 16px;">
                            ${this.renderSettingsSection((0,u.kg)("editor.icon.inactive_icon_config",s,"Inactive Icon Configuration"),(0,u.kg)("editor.icon.inactive_icon_config_desc",s,"Configure the inactive icon settings"),[{title:(0,u.kg)("editor.icon.inactive_icon",s,"Inactive Icon"),description:(0,u.kg)("editor.icon.inactive_icon_desc",s,"Icon to show when inactive"),hass:t,data:{icon_inactive:e.icon_inactive||""},schema:[this.iconField("icon_inactive")],onChange:e=>this._updateIconWithLockSync(r,i,"icon_inactive",e.detail.value.icon_inactive,n)}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.inactive_icon_color",s,"Inactive Icon Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.icon_color_inactive",s,"Color when inactive")}
                              </div>
                              <ultra-color-picker
                                .value=${e.inactive_icon_color||"var(--secondary-text-color)"}
                                @value-changed=${e=>this._debouncedUpdateIconWithLockSync(r,i,"inactive_icon_color",e.detail.value,n,50)}
                              ></ultra-color-picker>
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.use_state_color_inactive",s,"Use State Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.use_state_color_inactive_desc",s,"Use the entity state color (RGB attributes) for inactive icon color")}
                              </div>
                              <ha-switch
                                .checked=${e.use_state_color_for_inactive_icon||!1}
                                @change=${e=>{const t=e.target;this._updateIcon(r,i,{use_state_color_for_inactive_icon:t.checked},n)}}
                              ></ha-switch>
                            </div>

                            ${this.renderSettingsSection((0,u.kg)("editor.icon.background_section.title",s,"Inactive Background"),(0,u.kg)("editor.icon.background_section.desc",s,"Configure the inactive background settings"),[{title:(0,u.kg)("editor.icon.inactive_icon_background",s,"Inactive Background Shape"),description:(0,u.kg)("editor.icon.background_shape_inactive",s,"Background shape when inactive"),hass:t,data:{inactive_icon_background:e.inactive_icon_background||"none"},schema:[this.selectField("inactive_icon_background",[{value:"none",label:"None"},{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"rounded-square",label:"Rounded Square"}])],onChange:e=>{const t=e.detail.value.inactive_icon_background;if(t===(r.icons[i].inactive_icon_background||"none"))return;const o={inactive_icon_background:t};t&&"none"!==t&&(o.inactive_icon_background_color="var(--divider-color)"),this._updateIcon(r,i,o,n)}}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.inactive_icon_background_color",s,"Inactive Background Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.background_color_inactive",s,"Background color when inactive")}
                              </div>
                              <ultra-color-picker
                                .value=${e.inactive_icon_background_color||"transparent"}
                                @value-changed=${e=>this._debouncedUpdateIconWithLockSync(r,i,"inactive_icon_background_color",e.detail.value,n,50)}
                              ></ultra-color-picker>
                            </div>

                            <div class="field-container">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.inactive_icon_size",s,"Inactive Icon Size")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.icon_size_inactive",s,"Icon size when inactive")}
                              </div>
                              ${this._renderSizeControl(r,i,n,"inactive_icon_size",e.inactive_icon_size||26,0,50,26)}
                            </div>
                          </div>
                        </details>
                      </div>

                      <!-- Active Icon Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,i=t.querySelector("ha-icon");i&&(i.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            ${(0,u.kg)("editor.icon.active_icon",s,"Active Icon")}
                          </summary>
                          <div style="padding: 16px;">
                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_icon",s,"Active Icon")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.active_icon_desc",s,"Icon to show when active")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_icon_locked","icon_active","icon_inactive",e.icon_active||e.icon_inactive||"","icon",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_icon_color",s,"Active Icon Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.icon_color_active",s,"Color when active")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_icon_color_locked","active_icon_color","inactive_icon_color",e.active_icon_color||"var(--primary-color)","color",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.use_state_color_active",s,"Use State Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.use_state_color_active_desc",s,"Use the entity state color (RGB attributes) for active icon color")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_state_color_locked","use_state_color_for_active_icon","use_state_color_for_inactive_icon",e.use_state_color_for_active_icon||!1,"toggle",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_icon_background",s,"Active Background Shape")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.background_shape_active",s,"Background shape when active")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_icon_background_locked","active_icon_background","inactive_icon_background",e.active_icon_background||"none","select",t,[{value:"none",label:"None"},{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"rounded-square",label:"Rounded Square"}])}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_icon_background_color",s,"Active Background Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.background_color_active",s,"Background color when active")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_icon_background_color_locked","active_icon_background_color","inactive_icon_background_color",e.active_icon_background_color||"transparent","color",t)}
                            </div>

                            <div class="field-container">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_icon_size",s,"Active Icon Size")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.icon_size_active",s,"Icon size when active")}
                              </div>
                              ${this._renderSizeControlWithLock(r,i,n,"icon_size","active_icon_size","inactive_icon_size",e.active_icon_size||26,0,50,26)}
                            </div>
                          </div>
                        </details>
                      </div>
                    `:""}
              </div>

              <!-- Name Section -->
              <div class="settings-section" style="margin-bottom: 24px;">
                <div class="section-title">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span>${(0,u.kg)("editor.icon.name_section.title",s,"Name")}</span>
                    <ha-switch
                      .checked=${!1!==e.show_name_when_active&&!1!==e.show_name_when_inactive}
                      @change=${e=>{const t=e.target.checked;this._updateIcon(r,i,{show_name_when_active:t,show_name_when_inactive:t},n)}}
                    ></ha-switch>
                  </div>
                </div>

                ${!1!==e.show_name_when_active||!1!==e.show_name_when_inactive?o.qy`
                      <!-- Inactive Name Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,i=t.querySelector("ha-icon");i&&(i.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            ${(0,u.kg)("editor.icon.inactive_name",s,"Inactive Name")}
                          </summary>
                          <div style="padding: 16px;">
                            ${this.renderSettingsSection((0,u.kg)("editor.icon.inactive_name_config",s,"Inactive Name Configuration"),(0,u.kg)("editor.icon.inactive_name_config_desc",s,"Configure the inactive name settings"),[{title:(0,u.kg)("editor.icon.custom_inactive_name",s,"Custom Inactive Name"),description:(0,u.kg)("editor.icon.custom_inactive_name_desc",s,"Override entity name when inactive (leave empty to use entity name)"),hass:t,data:{custom_inactive_name_text:e.custom_inactive_name_text||""},schema:[this.textField("custom_inactive_name_text")],onChange:e=>this._updateIcon(r,i,{custom_inactive_name_text:e.detail.value.custom_inactive_name_text},n)}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.inactive_name_color",s,"Inactive Name Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.name_color_inactive",s,"Name color when inactive")}
                              </div>
                              <ultra-color-picker
                                .value=${e.inactive_name_color||"var(--primary-text-color)"}
                                @value-changed=${e=>this._debouncedUpdateIconWithLockSync(r,i,"inactive_name_color",e.detail.value,n,50)}
                              ></ultra-color-picker>
                            </div>

                            <div class="field-container">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.inactive_name_size",s,"Inactive Name Size")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.name_size_inactive",s,"Name text size when inactive")}
                              </div>
                              ${this._renderSizeControl(r,i,n,"inactive_text_size",e.inactive_text_size||14,0,50,14)}
                            </div>
                          </div>
                        </details>
                      </div>

                      <!-- Active Name Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,i=t.querySelector("ha-icon");i&&(i.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            ${(0,u.kg)("editor.icon.active_name",s,"Active Name")}
                          </summary>
                          <div style="padding: 16px;">
                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.custom_active_name",s,"Custom Active Name")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.custom_active_name_desc",s,"Override entity name when active (leave empty to use entity name)")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_name_locked","custom_active_name_text","custom_inactive_name_text",e.custom_active_name_text||"","text",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_name_color",s,"Active Name Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.name_color_active",s,"Name color when active")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_name_color_locked","active_name_color","inactive_name_color",e.active_name_color||"var(--primary-text-color)","color",t)}
                            </div>

                            <div class="field-container">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_name_size",s,"Active Name Size")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.name_size_active",s,"Name text size when active")}
                              </div>
                              ${this._renderSizeControlWithLock(r,i,n,"text_size","active_text_size","inactive_text_size",e.active_text_size||e.inactive_text_size||14,0,50,12)}
                            </div>
                          </div>
                        </details>
                      </div>
                    `:""}
              </div>

              <!-- State Section -->
              <div class="settings-section" style="margin-bottom: 24px;">
                <div class="section-title">
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span>${(0,u.kg)("editor.icon.state_section.title",s,"State")}</span>
                    <ha-switch
                      .checked=${!1!==e.show_state_when_active&&!1!==e.show_state_when_inactive}
                      @change=${e=>{const t=e.target.checked;this._updateIcon(r,i,{show_state_when_active:t,show_state_when_inactive:t},n)}}
                    ></ha-switch>
                  </div>
                </div>

                ${!1!==e.show_state_when_active||!1!==e.show_state_when_inactive?o.qy`
                      <!-- Inactive State Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,i=t.querySelector("ha-icon");i&&(i.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            ${(0,u.kg)("editor.icon.inactive_state",s,"Inactive State")}
                          </summary>
                          <div style="padding: 16px;">
                            ${this.renderSettingsSection((0,u.kg)("editor.icon.inactive_state_config",s,"Inactive State Configuration"),(0,u.kg)("editor.icon.inactive_state_config_desc",s,"Configure the inactive state settings"),[{title:(0,u.kg)("editor.icon.custom_inactive_state",s,"Custom Inactive State"),description:(0,u.kg)("editor.icon.custom_inactive_state_desc",s,"Custom text when inactive (leave empty to use actual state)"),hass:t,data:{custom_inactive_state_text:e.custom_inactive_state_text||""},schema:[this.textField("custom_inactive_state_text")],onChange:e=>this._updateIcon(r,i,{custom_inactive_state_text:e.detail.value.custom_inactive_state_text},n)}])}

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.inactive_state_color",s,"Inactive State Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.state_color_inactive",s,"State color when inactive")}
                              </div>
                              <ultra-color-picker
                                .value=${e.inactive_state_color||"var(--secondary-text-color)"}
                                @value-changed=${e=>this._debouncedUpdateIconWithLockSync(r,i,"inactive_state_color",e.detail.value,n,50)}
                              ></ultra-color-picker>
                            </div>

                            <div class="field-container">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.inactive_state_size",s,"Inactive State Size")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.state_size_inactive",s,"State text size when inactive")}
                              </div>
                              ${this._renderSizeControl(r,i,n,"inactive_state_size",e.inactive_state_size||10,0,50,10)}
                            </div>
                          </div>
                        </details>
                      </div>

                      <!-- Active State Section -->
                      <div style="margin-top: 16px;">
                        <details
                          style="border: 1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color);"
                          @toggle=${e=>{const t=e.target,i=t.querySelector("ha-icon");i&&(i.style.transform=t.open?"rotate(90deg)":"rotate(0deg)")}}
                        >
                          <summary
                            style="padding: 16px; font-size: 16px; font-weight: 600; color: var(--primary-color); cursor: pointer; background: var(--secondary-background-color); border-radius: 8px 8px 0 0; display: flex; align-items: center; gap: 8px;"
                          >
                            <ha-icon
                              icon="mdi:chevron-right"
                              style="transition: transform 0.2s;"
                            ></ha-icon>
                            ${(0,u.kg)("editor.icon.active_state",s,"Active State")}
                          </summary>
                          <div style="padding: 16px;">
                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.custom_active_state",s,"Custom Active State")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.custom_active_state_desc",s,"Custom text when active (leave empty to use actual state)")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_state_locked","custom_active_state_text","custom_inactive_state_text",e.custom_active_state_text||"","text",t)}
                            </div>

                            <div class="field-container" style="margin-bottom: 16px;">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_state_color",s,"Active State Color")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.state_color_active",s,"State color when active")}
                              </div>
                              ${this._renderFieldWithLock(r,i,n,"active_state_color_locked","active_state_color","inactive_state_color",e.active_state_color||"var(--secondary-text-color)","color",t)}
                            </div>

                            <div class="field-container">
                              <div class="field-title">
                                ${(0,u.kg)("editor.icon.active_state_size",s,"Active State Size")}
                              </div>
                              <div class="field-description">
                                ${(0,u.kg)("editor.icon.state_size_active",s,"State text size when active")}
                              </div>
                              ${this._renderSizeControlWithLock(r,i,n,"state_size","active_state_size","inactive_state_size",e.active_state_size||10,0,50,10)}
                            </div>
                          </div>
                        </details>
                      </div>
                    `:""}
              </div>

              <!-- Advanced Template Mode Section -->
              <div class="template-section" style="margin-bottom: 24px;">
                <div class="template-header">
                  <div class="switch-container">
                    <label class="switch-label"
                      >${(0,u.kg)("editor.icon.template_section.title",s,"Advanced Template Mode")}</label
                    >
                    <label class="switch">
                      <input
                        type="checkbox"
                        .checked=${e.template_mode||!1}
                        @change=${e=>{const t=e.target.checked;this._updateIcon(r,i,{template_mode:t},n)}}
                      />
                      <span class="slider round"></span>
                    </label>
                  </div>
                  <div class="template-description">
                    ${(0,u.kg)("editor.icon.template_section.desc",s,"Use Jinja2 templates for advanced icon control. Templates can control visibility (true/false to show/hide icons) and customize state text. Return custom text for Active State, return actual entity state for Inactive State.")}
                  </div>
                </div>

                ${e.template_mode?o.qy`
                      <div class="template-content">
                        <ultra-template-editor
                          .hass=${t}
                          .value=${e.template||""}
                          .placeholder=${"{% if states('binary_sensor.example') == 'on' %}true{% else %}false{% endif %}"}
                          .minHeight=${150}
                          .maxHeight=${400}
                          @value-changed=${e=>{this._updateIcon(r,i,{template:e.detail.value},n)}}
                        ></ultra-template-editor>
                        <div class="template-help">
                          <p><strong>For visibility control, return a boolean:</strong></p>
                          <ul>
                            <li>
                              <code>true</code>, <code>on</code>, <code>yes</code>, <code>1</code> →
                              Show icon (Active State)
                            </li>
                            <li>
                              <code>false</code>, <code>off</code>, <code>no</code>,
                              <code>0</code> → Hide icon (Inactive State)
                            </li>
                          </ul>
                          <p><strong>For custom state text, return a string:</strong></p>
                          <ul>
                            <li>
                              <code
                                >{% if states('weather.forecast_home') == 'cloudy' %}About to Rain{%
                                else %}{{ states('weather.forecast_home') }}{% endif %}</code
                              >
                              → When cloudy: shows "About to Rain" (Active), when not cloudy: shows
                              actual state (Inactive)
                            </li>
                            <li>
                              <code>{{ states('sensor.temperature') | round(1) }}°F</code> → Shows
                              formatted temperature and Active State is current
                            </li>
                          </ul>
                          <p>
                            <strong>Note:</strong> Use the same entity name throughout your template
                            to avoid "unknown" states
                          </p>
                        </div>
                      </div>
                    `:""}
              </div>

              <!-- Dynamic Icon Color Template Section -->
              <div class="template-section" style="margin-bottom: 24px;">
                <div class="template-header">
                  <div class="switch-container">
                    <label class="switch-label"
                      >${(0,u.kg)("editor.icon.dynamic_color_template_section.title",s,"Dynamic Icon Color Template")}</label
                    >
                    <label class="switch">
                      <input
                        type="checkbox"
                        .checked=${e.dynamic_color_template_mode||!1}
                        @change=${e=>{const t=e.target.checked;this._updateIcon(r,i,{dynamic_color_template_mode:t},n)}}
                      />
                      <span class="slider round"></span>
                    </label>
                  </div>
                  <div class="template-description">
                    ${(0,u.kg)("editor.icon.dynamic_color_template_section.desc",s,"Use Jinja2 templates to dynamically change icon color based on conditions. Return a valid CSS color value (e.g., #FF0000, rgb(255,0,0), red) or empty for default color.")}
                  </div>
                </div>

                ${e.dynamic_color_template_mode?o.qy`
                      <div class="template-content">
                        <ultra-template-editor
                          .hass=${t}
                          .value=${e.dynamic_color_template||""}
                          .placeholder=${"{% if states('binary_sensor.example') == 'on' %}#FF0000{% else %}#00FF00{% endif %}"}
                          .minHeight=${100}
                          .maxHeight=${300}
                          @value-changed=${e=>{this._updateIcon(r,i,{dynamic_color_template:e.detail.value},n)}}
                        ></ultra-template-editor>
                        <div class="template-help">
                          <p><strong>Return a CSS color value:</strong></p>
                          <ul>
                            <li><code>#FF0000</code> → Red color in hex</li>
                            <li><code>rgb(255, 0, 0)</code> → Red color in RGB</li>
                            <li><code>red</code> → Red color by name</li>
                            <li>
                              <code
                                >{{ states.light.living_room.attributes.rgb_color | join(',') |
                                format('rgb(%s)') }}</code
                              >
                              → Use entity RGB color
                            </li>
                          </ul>
                          <p>
                            <strong>Example:</strong>
                            <code
                              >{% if states('sensor.temperature') | int > 25 %}#FF4444{% else
                              %}#4444FF{% endif %}</code
                            >
                          </p>
                        </div>
                      </div>
                    `:""}
              </div>

              <!-- Icon Animation Section -->
              ${this.renderSettingsSection((0,u.kg)("editor.icon.animation_section.title",s,"Icon Animation"),(0,u.kg)("editor.icon.animation_section.desc",s,"Configure animations for active and inactive states"),[{title:(0,u.kg)("editor.icon.active_animation",s,"Active Animation"),description:(0,u.kg)("editor.icon.active_animation_desc",s,"Animation when icon is active"),hass:t,data:{active_icon_animation:e.active_icon_animation||"none"},schema:[this.selectField("active_icon_animation",[{value:"none",label:(0,u.kg)("editor.icon.animation_none",s,"None")},{value:"pulse",label:(0,u.kg)("editor.icon.animation_pulse",s,"Pulse")},{value:"spin",label:(0,u.kg)("editor.icon.animation_spin",s,"Spin")},{value:"bounce",label:(0,u.kg)("editor.icon.animation_bounce",s,"Bounce")},{value:"flash",label:(0,u.kg)("editor.icon.animation_flash",s,"Flash")},{value:"shake",label:(0,u.kg)("editor.icon.animation_shake",s,"Shake")},{value:"vibrate",label:(0,u.kg)("editor.icon.animation_vibrate",s,"Vibrate")},{value:"rotate-left",label:(0,u.kg)("editor.icon.animation_rotate_left",s,"Rotate Left")},{value:"rotate-right",label:(0,u.kg)("editor.icon.animation_rotate_right",s,"Rotate Right")},{value:"fade",label:(0,u.kg)("editor.icon.animation_fade",s,"Fade")},{value:"scale",label:(0,u.kg)("editor.icon.animation_scale",s,"Scale")},{value:"tada",label:(0,u.kg)("editor.icon.animation_tada",s,"Tada")}])],onChange:e=>{const t=e.detail.value.active_icon_animation;t!==(r.icons[i].active_icon_animation||"none")&&(this._updateIcon(r,i,{active_icon_animation:t},n),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}},{title:(0,u.kg)("editor.icon.inactive_animation",s,"Inactive Animation"),description:(0,u.kg)("editor.icon.inactive_animation_desc",s,"Animation when icon is inactive"),hass:t,data:{inactive_icon_animation:e.inactive_icon_animation||"none"},schema:[this.selectField("inactive_icon_animation",[{value:"none",label:(0,u.kg)("editor.icon.animation_none",s,"None")},{value:"pulse",label:(0,u.kg)("editor.icon.animation_pulse",s,"Pulse")},{value:"spin",label:(0,u.kg)("editor.icon.animation_spin",s,"Spin")},{value:"bounce",label:(0,u.kg)("editor.icon.animation_bounce",s,"Bounce")},{value:"flash",label:(0,u.kg)("editor.icon.animation_flash",s,"Flash")},{value:"shake",label:(0,u.kg)("editor.icon.animation_shake",s,"Shake")},{value:"vibrate",label:(0,u.kg)("editor.icon.animation_vibrate",s,"Vibrate")},{value:"rotate-left",label:(0,u.kg)("editor.icon.animation_rotate_left",s,"Rotate Left")},{value:"rotate-right",label:(0,u.kg)("editor.icon.animation_rotate_right",s,"Rotate Right")},{value:"fade",label:(0,u.kg)("editor.icon.animation_fade",s,"Fade")},{value:"scale",label:(0,u.kg)("editor.icon.animation_scale",s,"Scale")},{value:"tada",label:(0,u.kg)("editor.icon.animation_tada",s,"Tada")}])],onChange:e=>{const t=e.detail.value.inactive_icon_animation;t!==(r.icons[i].inactive_icon_animation||"none")&&(this._updateIcon(r,i,{inactive_icon_animation:t},n),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}}])}
            </div>
          `))}
      </div>
    `}renderActionsTab(e,t,i,o){return r.A.render(e,t,(e=>o(e)))}renderLogicTab(e,t,i,o){return h.X.render(e,t,(e=>o(e)))}renderOtherTab(e,t,i,o){return this.renderLogicTab(e,t,i,o)}renderPreview(e,t,i,n){const a=e;!this._templateService&&t&&(this._templateService=new s.I(t)),this._templateService&&t&&this._templateService.updateHass(t);const r=a,l=a.design||{},p={color:a.color||l.color,font_size:a.font_size||l.font_size,font_weight:a.font_weight||l.font_weight,font_style:a.font_style||l.font_style,text_transform:a.text_transform||l.text_transform,font_family:a.font_family||l.font_family,line_height:a.line_height||l.line_height,letter_spacing:a.letter_spacing||l.letter_spacing,text_align:a.text_align||l.text_align,text_shadow_h:a.text_shadow_h||l.text_shadow_h,text_shadow_v:a.text_shadow_v||l.text_shadow_v,text_shadow_blur:a.text_shadow_blur||l.text_shadow_blur,text_shadow_color:a.text_shadow_color||l.text_shadow_color,background_color:a.background_color||l.background_color,background_image:a.background_image||l.background_image,background_image_type:a.background_image_type||l.background_image_type,background_image_entity:a.background_image_entity||l.background_image_entity,background_size:a.background_size||l.background_size,background_position:a.background_position||l.background_position,background_repeat:a.background_repeat||l.background_repeat,border_radius:a.border_radius||l.border_radius,border_style:a.border_style||l.border_style,border_width:a.border_width||l.border_width,border_color:a.border_color||l.border_color,padding_top:a.padding_top||l.padding_top,padding_bottom:a.padding_bottom||l.padding_bottom,padding_left:a.padding_left||l.padding_left,padding_right:a.padding_right||l.padding_right,margin_top:a.margin_top||l.margin_top,margin_bottom:a.margin_bottom||l.margin_bottom,margin_left:a.margin_left||l.margin_left,margin_right:a.margin_right||l.margin_right,position:a.position||l.position,top:a.top||l.top,bottom:a.bottom||l.bottom,left:a.left||l.left,right:a.right||l.right,z_index:a.z_index||l.z_index,width:a.width||l.width,height:a.height||l.height,max_width:a.max_width||l.max_width,max_height:a.max_height||l.max_height,min_width:a.min_width||l.min_width,min_height:a.min_height||l.min_height,overflow:a.overflow||l.overflow,clip_path:a.clip_path||l.clip_path,backdrop_filter:a.backdrop_filter||l.backdrop_filter,box_shadow_h:a.box_shadow_h||l.box_shadow_h,box_shadow_v:a.box_shadow_v||l.box_shadow_v,box_shadow_blur:a.box_shadow_blur||l.box_shadow_blur,box_shadow_spread:a.box_shadow_spread||l.box_shadow_spread,box_shadow_color:a.box_shadow_color||l.box_shadow_color,hover_effect:a.hover_effect||l.hover_effect},u={padding:p.padding_top||p.padding_bottom||p.padding_left||p.padding_right||r.padding_top||r.padding_bottom||r.padding_left||r.padding_right?`${this.addPixelUnit(p.padding_top||r.padding_top)||"0px"} ${this.addPixelUnit(p.padding_right||r.padding_right)||"0px"} ${this.addPixelUnit(p.padding_bottom||r.padding_bottom)||"0px"} ${this.addPixelUnit(p.padding_left||r.padding_left)||"0px"}`:"0",margin:p.margin_top||p.margin_bottom||p.margin_left||p.margin_right||r.margin_top||r.margin_bottom||r.margin_left||r.margin_right?`${p.margin_top||r.margin_top||"8px"} ${p.margin_right||r.margin_right||"0px"} ${p.margin_bottom||r.margin_bottom||"8px"} ${p.margin_left||r.margin_left||"0px"}`:"8px 0",background:p.background_color||r.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},r),p),t),backgroundSize:p.background_size||r.background_size||"cover",backgroundPosition:p.background_position||r.background_position||"center",backgroundRepeat:p.background_repeat||r.background_repeat||"no-repeat",border:(p.border_style||r.border_style)&&"none"!==(p.border_style||r.border_style)?`${this.addPixelUnit(p.border_width||r.border_width)||"1px"} ${p.border_style||r.border_style} ${p.border_color||r.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(p.border_radius||r.border_radius)||"0",position:p.position||r.position||"relative",top:p.top||r.top||"auto",bottom:p.bottom||r.bottom||"auto",left:p.left||r.left||"auto",right:p.right||r.right||"auto",zIndex:p.z_index||r.z_index||"auto",width:p.width||r.width||"100%",height:p.height||r.height||"auto",maxWidth:p.max_width||r.max_width||"100%",maxHeight:p.max_height||r.max_height||"none",minWidth:p.min_width||r.min_width||"none",minHeight:p.min_height||r.min_height||"auto",overflow:p.overflow||r.overflow||"hidden",clipPath:p.clip_path||r.clip_path||"none",backdropFilter:p.backdrop_filter||r.backdrop_filter||"none",boxShadow:p.box_shadow_h&&p.box_shadow_v?`${p.box_shadow_h||"0"} ${p.box_shadow_v||"0"} ${p.box_shadow_blur||"0"} ${p.box_shadow_spread||"0"} ${p.box_shadow_color||"rgba(0,0,0,0.1)"}`:r.box_shadow_h&&r.box_shadow_v?`${r.box_shadow_h||"0"} ${r.box_shadow_v||"0"} ${r.box_shadow_blur||"0"} ${r.box_shadow_spread||"0"} ${r.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};this._injectGlobalStyles();const h=this._localStylesInjected?o.qy``:o.qy`<style>
          ${this.getStyles()}
        </style>`;return this._localStylesInjected=!0,o.qy`
      ${h}
      <div class="icon-module-container" style=${this.styleObjectToCss(u)}>
        <div class="icon-module-preview">
          <div
            class="icon-grid"
            style="
            display: grid;
            grid-template-columns: repeat(${Math.min(a.columns||3,a.icons.length)}, 1fr);
            gap: ${a.gap||16}px;
            justify-content: ${a.alignment||"center"};
          "
          >
            ${a.icons.slice(0,6).map((e=>{var n,r,l,u,h,g,m,f,_,v,b,y,x;const k=null==t?void 0:t.states[e.entity],w=(null==k?void 0:k.state)||"unknown",S=this._evaluateIconState(e,t),O=S?!1!==e.show_icon_when_active:!1!==e.show_icon_when_inactive,A=S?!1!==e.show_name_when_active:!1!==e.show_name_when_inactive,C=S?!1!==e.show_state_when_active:!1!==e.show_state_when_inactive;let $=S&&e.icon_active||e.icon_inactive;if(e.dynamic_icon_template_mode&&e.dynamic_icon_template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.dynamic_icon_template),o=`dynamic_icon_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(e.dynamic_icon_template,o,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const a=null===(n=null==t?void 0:t.__uvc_template_strings)||void 0===n?void 0:n[o];a&&""!==String(a).trim()&&($=String(a))}else(null===(r=null==k?void 0:k.attributes)||void 0===r?void 0:r.icon)&&!$&&($=k.attributes.icon);let T=S?e.use_state_color_for_active_icon?this._getEntityStateColor(k)||e.active_icon_color:e.use_entity_color_for_icon&&(null===(l=null==k?void 0:k.attributes)||void 0===l?void 0:l.rgb_color)?`rgb(${k.attributes.rgb_color.join(",")})`:e.active_icon_color:e.use_state_color_for_inactive_icon?this._getEntityStateColor(k)||e.inactive_icon_color:e.use_entity_color_for_icon&&(null===(u=null==k?void 0:k.attributes)||void 0===u?void 0:u.rgb_color)?`rgb(${k.attributes.rgb_color.join(",")})`:e.inactive_icon_color;if(e.dynamic_color_template_mode&&e.dynamic_color_template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.dynamic_color_template),o=`dynamic_color_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(e.dynamic_color_template,o,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const n=null===(h=null==t?void 0:t.__uvc_template_strings)||void 0===h?void 0:h[o];n&&""!==String(n).trim()&&(T=String(n))}const z=p.color||(S?e.active_name_color:e.inactive_name_color),P=p.color||(S?e.active_state_color:e.inactive_state_color),E=p.font_size?/[a-zA-Z%]/.test(p.font_size)?p.font_size:this.addPixelUnit(p.font_size)||p.font_size:void 0,I=p.font_family||void 0,j=p.font_weight||void 0,M=p.font_style||void 0,D=p.text_transform||void 0,B=p.line_height||void 0,R=p.letter_spacing||void 0,U=p.text_align||void 0,H=p.text_shadow_h&&p.text_shadow_v?`${p.text_shadow_h||"0"} ${p.text_shadow_v||"0"} ${p.text_shadow_blur||"0"} ${p.text_shadow_color||"rgba(0,0,0,0.5)"}`:void 0,J=S?e.custom_active_name_text||e.name||(null===(g=null==k?void 0:k.attributes)||void 0===g?void 0:g.friendly_name)||e.entity:e.custom_inactive_name_text||e.name||(null===(m=null==k?void 0:k.attributes)||void 0===m?void 0:m.friendly_name)||e.entity;let Q;if(e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.template),o=`display_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(e.template,o,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(f=null==t?void 0:t.__uvc_template_strings)||void 0===f?void 0:f[o];if(void 0!==n){const i=String(n).toLowerCase();Q=["true","false","on","off","yes","no","0","1"].includes(i)||""===String(n).trim()?S?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(w,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(w,e.entity,e,t):String(n)!==w?String(n):S?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(w,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(w,e.entity,e,t)}else Q=S?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(w,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(w,e.entity,e,t)}else Q=this._getDisplayStateValue(e,t,S);const N=S?e.active_icon_background||e.icon_background:e.inactive_icon_background||e.icon_background,L=S?e.active_icon_background_color||e.icon_background_color:e.inactive_icon_background_color||e.icon_background_color,F="none"!==N?{backgroundColor:e.use_entity_color_for_icon_background&&(null===(_=null==k?void 0:k.attributes)||void 0===_?void 0:_.rgb_color)?`rgb(${k.attributes.rgb_color.join(",")})`:L,borderRadius:"circle"===N?"50%":"rounded-square"===N?"8px":"0",padding:"8px"}:{},q=Object.assign(Object.assign({},{display:"flex",alignItems:"center",justifyContent:"center"}),F),V=e.active_icon_animation||"none",K=e.inactive_icon_animation||"none",G=S?V:K,Z="none"!==G?`icon-animation-${G}`:"";Z&&setTimeout((()=>{this._updateIconAnimationClasses(e.entity,Z,S)}),100);const Y={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:e.vertical_alignment||"center",padding:"0",borderRadius:"circle"===e.container_background_shape?"50%":"rounded"===e.container_background_shape?"8px":(e.container_background_shape,"0"),background:e.container_background_shape&&"none"!==e.container_background_shape?e.container_background_color||"#808080":"transparent",cursor:"pointer",transition:"all 0.2s ease",width:e.container_width?`${e.container_width}%`:"auto"};let W=null,X=null,ee=!1,te=0,ie=0;const oe=null===(v=a.design)||void 0===v?void 0:v.hover_effect,ne=d.k.getHoverEffectClass(oe);return o.qy`
                <div
                  class="icon-item-preview ${ne}"
                  style=${this.styleObjectToCss(Object.assign(Object.assign({},Y),{gap:"0px",touchAction:"manipulation",backgroundImage:this.getBackgroundImageCSS(e,t),backgroundSize:e.background_size||"cover",backgroundPosition:p.background_position||"center",backgroundRepeat:p.background_repeat||"no-repeat",margin:"0 auto"}))}
                  @pointerdown=${o=>{var n;o.preventDefault(),ee=!1,void 0!==a.hold_action&&"nothing"===(null===(n=a.hold_action)||void 0===n?void 0:n.action)||(X=setTimeout((()=>{ee=!0,c.K.handleAction(a.hold_action||{action:"default",entity:e.entity},t,o.target,i,e.entity)}),500))}}
                  @pointerup=${o=>{var n;if(o.preventDefault(),X&&(clearTimeout(X),X=null),ee)return void(ee=!1);const r=Date.now();r-ie<300&&1===te?(W&&(clearTimeout(W),W=null),te=0,void 0!==a.double_tap_action&&"nothing"===(null===(n=a.double_tap_action)||void 0===n?void 0:n.action)||c.K.handleAction(a.double_tap_action||{action:"default",entity:e.entity},t,o.target,i,e.entity)):(te=1,ie=r,W&&clearTimeout(W),a.double_tap_action&&"nothing"!==a.double_tap_action.action||void 0!==a.tap_action&&"nothing"===a.tap_action.action?!a.double_tap_action||void 0!==a.tap_action&&"nothing"===a.tap_action.action||(W=setTimeout((()=>{1===te&&c.K.handleAction(a.tap_action||{action:"default",entity:e.entity},t,o.target,i,e.entity),te=0}),300)):c.K.handleAction(a.tap_action||{action:"default",entity:e.entity},t,o.target,i,e.entity))}}
                  @pointerleave=${()=>{X&&(clearTimeout(X),X=null),ee=!1}}
                >
                  ${O?o.qy`
                        <div
                          style="${this.styleObjectToCss(Object.assign(Object.assign({},q),{marginBottom:A?`${null!==(b=e.name_icon_gap)&&void 0!==b?b:8}px`:C?`${null!==(y=e.icon_state_gap)&&void 0!==y?y:4}px`:"0px"}))}"
                        >
                          ${this._shouldUseEntityPicture(k)?o.qy`
                                <img
                                  src="${this._getEntityPicture(k,t)}"
                                  class="${Z} ultra-force-animation entity-picture"
                                  style="
                                    width: ${Number(S?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                                    height: ${Number(S?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                                    border-radius: 50%;
                                    object-fit: cover;
                                  "
                                  alt="Entity picture"
                                />
                              `:o.qy`
                                <ha-icon
                                  icon="${$||"mdi:help-circle"}"
                                  class="${Z} ultra-force-animation"
                                  style="
                                    color: ${T||"var(--secondary-text-color)"};
                                    --mdc-icon-size: ${Number(S?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                                  "
                                ></ha-icon>
                              `}
                        </div>
                      `:""}
                  ${A?o.qy`
                        <div
                          class="icon-name"
                          style="
                      font-size: ${E||`${S?e.active_text_size||e.text_size||12:e.inactive_text_size||e.text_size||14}px`};
                        color: ${z||"var(--primary-text-color)"};
                      text-align: ${U||"center"};
                      line-height: ${B||"1.2"};
                        max-width: 120px;
                      word-wrap: break-word;
                      margin-bottom: ${C?`${null!==(x=e.name_state_gap)&&void 0!==x?x:2}px`:"0px"};
                      font-family: ${I||"inherit"};
                      font-weight: ${j||"inherit"};
                      font-style: ${M||"inherit"};
                      text-transform: ${D||"inherit"};
                      letter-spacing: ${R||"inherit"};
                      text-shadow: ${H||"none"};
                    "
                        >
                          ${J}
                        </div>
                      `:""}
                  ${C?o.qy`
                        <div
                          class="icon-state"
                          style="
                      font-size: ${E||`${S?e.active_state_size||e.state_size||12:e.inactive_state_size||e.state_size||12}px`};
                        color: ${P||"var(--secondary-text-color)"};
                      text-align: ${U||"center"};
                      line-height: ${B||"1.2"};
                      font-family: ${I||"inherit"};
                      font-weight: ${j||"inherit"};
                      font-style: ${M||"inherit"};
                      text-transform: ${D||"inherit"};
                      letter-spacing: ${R||"inherit"};
                      text-shadow: ${H||"none"};
                    "
                        >
                          ${Q}
                        </div>
                      `:""}
                </div>
              `}))}
            ${a.icons.length>6?o.qy`
                  <div
                    class="more-icons"
                    style="
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 8px;
                color: var(--secondary-text-color);
                font-size: 12px;
                font-style: italic;
              "
                  >
                    +${a.icons.length-6} more
                  </div>
                `:""}
          </div>

          <!-- More Icons Indicator -->
          ${a.icons.length>6?o.qy`
                <div
                  class="more-icons"
                  style="
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 8px;
                    color: var(--secondary-text-color);
                    font-size: 12px;
                    font-style: italic;
                    margin-top: 8px;
                  "
                >
                  +${a.icons.length-6} more icons
                </div>
              `:""}
        </div>
      </div>
    `}renderSplitPreview(e,t){var i;const n=e;let a=!1;if(n.icons.length>0){const e=n.icons[0];if(a=this._evaluateIconState(e,t),e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const o=this._hashString(e.template),n=`display_${e.entity}_${e.id}_${o}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(n)&&this._templateService.subscribeToTemplate(e.template,n,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const r=null===(i=null==t?void 0:t.__uvc_template_strings)||void 0===i?void 0:i[n];if(void 0!==r){const i=String(r).toLowerCase();if(["true","false","on","off","yes","no","0","1"].includes(i))a=["true","on","yes","1"].includes(i)||parseFloat(i)>0&&!isNaN(parseFloat(i));else if(""!==String(r).trim()){const i=null==t?void 0:t.states[e.entity],o=(null==i?void 0:i.state)||"unknown";a=String(r)!==o||this._evaluateIconState(e,t)}else a=!1}}else a=this._evaluateIconState(e,t)}return this._injectGlobalStyles(),this._injectKeyframesForAllSplitPreviewIcons(),o.qy`
      <style>
        ${g._ANIMATION_KEYFRAMES} .icon-split-preview {
          --animation-duration: 2s;
          --animation-timing: linear;
        }
        .icon-split-preview .icon-animation-spin {
          animation: iconSpin var(--animation-duration) var(--animation-timing) infinite;
        }
        .icon-split-preview .icon-animation-bounce {
          animation: iconBounce 1s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-pulse {
          animation: iconPulse 1.5s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-flash {
          animation: iconFlash 1s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-shake {
          animation: iconShake 0.5s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-vibrate {
          animation: iconVibrate 0.3s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-rotate-left {
          animation: iconRotateLeft var(--animation-duration) var(--animation-timing) infinite;
        }
        .icon-split-preview .icon-animation-rotate-right {
          animation: iconRotateRight var(--animation-duration) var(--animation-timing) infinite;
        }
        .icon-split-preview .icon-animation-fade {
          animation: iconFade 2s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-scale {
          animation: iconScale 1.5s ease-in-out infinite;
        }
        .icon-split-preview .icon-animation-tada {
          animation: iconTada 2s ease-in-out infinite;
        }
      </style>
      <div class="icon-split-preview">
        <!-- State Labels -->
        <div
          style="
               display: grid; 
               grid-template-columns: 1fr 1fr; 
               margin-bottom: 12px;
               text-align: center;
             "
        >
          <div>
            ${a?o.qy`<div style="height: 14px; margin-bottom: 4px;"></div>`:o.qy`<div
                  style="font-size: 10px; font-weight: 700; color: var(--primary-color); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;"
                >
                  Current
                </div>`}
            <div style="font-size: 12px; font-weight: 600; color: var(--secondary-text-color);">
              Inactive State
            </div>
          </div>
          <div>
            ${a?o.qy`<div
                  style="font-size: 10px; font-weight: 700; color: var(--primary-color); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;"
                >
                  Current
                </div>`:o.qy`<div style="height: 14px; margin-bottom: 4px;"></div>`}
            <div style="font-size: 12px; font-weight: 600; color: var(--secondary-text-color);">
              Active State
            </div>
          </div>
        </div>

        <!-- Split Preview Container -->
        <div
          style="
               display: grid; 
               grid-template-columns: 1fr 1fr; 
               border: 1px solid var(--divider-color); 
               border-radius: 8px; 
               overflow: hidden;
               min-height: 120px;
             "
        >
          <!-- Inactive Preview -->
          <div
            style="
                 background: var(--card-background-color);
                 border-right: 1px solid var(--divider-color);
                 padding: 16px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
               "
          >
            ${this._renderSimpleIconGrid(n,t,!1)}
          </div>

          <!-- Active Preview -->
          <div
            style="
                 background: var(--card-background-color);
                 padding: 16px;
                 display: flex;
                 align-items: center;
                 justify-content: center;
               "
          >
            ${this._renderSimpleIconGrid(n,t,!0)}
          </div>
        </div>

        <!-- Icon Count Indicator -->
        ${n.icons.length>6?o.qy`
              <div
                style="
                 text-align: center;
                 padding: 8px;
                 color: var(--secondary-text-color);
                 font-size: 12px;
                 font-style: italic;
               "
              >
                Showing first 6 of ${n.icons.length} icons
              </div>
            `:""}
      </div>
    `}_renderSimpleIconGrid(e,t,i){const n=e.icons.slice(0,6),a=(Math.min(3,n.length),e.design||{}),r={color:e.color||a.color,font_size:e.font_size||a.font_size,font_weight:e.font_weight||a.font_weight,font_style:e.font_style||a.font_style,text_transform:e.text_transform||a.text_transform,font_family:e.font_family||a.font_family,line_height:e.line_height||a.line_height,letter_spacing:e.letter_spacing||a.letter_spacing,text_align:e.text_align||a.text_align,text_shadow_h:e.text_shadow_h||a.text_shadow_h,text_shadow_v:e.text_shadow_v||a.text_shadow_v,text_shadow_blur:e.text_shadow_blur||a.text_shadow_blur,text_shadow_color:e.text_shadow_color||a.text_shadow_color,background_position:e.background_position||a.background_position,background_repeat:e.background_repeat||a.background_repeat,hover_effect:e.hover_effect||a.hover_effect};return o.qy`
      <div
        style="
          display: flex;
        "
      >
        ${n.map((o=>this._renderSingleIconPreview(o,t,i,e,r)))}
      </div>
    `}_renderSingleIconPreview(e,t,i,n,a){var r,l,p,u,h,g,m,f,_,v,b,y,x;const k=null==t?void 0:t.states[e.entity],w=(null==k?void 0:k.state)||"unknown",S=i?!1!==e.show_icon_when_active:!1!==e.show_icon_when_inactive,O=i?!1!==e.show_name_when_active:!1!==e.show_name_when_inactive,A=i?!1!==e.show_state_when_active:!1!==e.show_state_when_inactive;let C=i&&e.icon_active||e.icon_inactive;if(e.dynamic_icon_template_mode&&e.dynamic_icon_template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.dynamic_icon_template),o=`dynamic_icon_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(e.dynamic_icon_template,o,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(r=null==t?void 0:t.__uvc_template_strings)||void 0===r?void 0:r[o];n&&""!==String(n).trim()&&(C=String(n))}else(null===(l=null==k?void 0:k.attributes)||void 0===l?void 0:l.icon)&&!C&&(C=k.attributes.icon);let $=i?e.use_state_color_for_active_icon?this._getEntityStateColor(k)||e.active_icon_color:e.use_entity_color_for_icon&&(null===(p=null==k?void 0:k.attributes)||void 0===p?void 0:p.rgb_color)?`rgb(${k.attributes.rgb_color.join(",")})`:e.active_icon_color:e.use_state_color_for_inactive_icon?this._getEntityStateColor(k)||e.inactive_icon_color:e.use_entity_color_for_icon&&(null===(u=null==k?void 0:k.attributes)||void 0===u?void 0:u.rgb_color)?`rgb(${k.attributes.rgb_color.join(",")})`:e.inactive_icon_color;if(e.dynamic_color_template_mode&&e.dynamic_color_template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.dynamic_color_template),o=`dynamic_color_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(e.dynamic_color_template,o,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(h=null==t?void 0:t.__uvc_template_strings)||void 0===h?void 0:h[o];n&&""!==String(n).trim()&&($=String(n))}const T=(null==a?void 0:a.color)||(i?e.active_name_color:e.inactive_name_color),z=(null==a?void 0:a.color)||(i?e.active_state_color:e.inactive_state_color),P=a?{fontSize:a.font_size?/[a-zA-Z%]/.test(a.font_size)?a.font_size:this.addPixelUnit(a.font_size)||a.font_size:void 0,fontFamily:a.font_family||void 0,fontWeight:a.font_weight||void 0,fontStyle:a.font_style||void 0,textTransform:a.text_transform||void 0,lineHeight:a.line_height||void 0,letterSpacing:a.letter_spacing||void 0,textAlign:a.text_align||void 0,textShadow:a.text_shadow_h&&a.text_shadow_v?`${a.text_shadow_h||"0"} ${a.text_shadow_v||"0"} ${a.text_shadow_blur||"0"} ${a.text_shadow_color||"rgba(0,0,0,0.5)"}`:void 0}:{fontSize:void 0,fontFamily:void 0,fontWeight:void 0,fontStyle:void 0,textTransform:void 0,lineHeight:void 0,letterSpacing:void 0,textAlign:void 0,textShadow:void 0},E=i?e.custom_active_name_text||e.name||(null===(g=null==k?void 0:k.attributes)||void 0===g?void 0:g.friendly_name)||e.entity:e.custom_inactive_name_text||e.name||(null===(m=null==k?void 0:k.attributes)||void 0===m?void 0:m.friendly_name)||e.entity;let I;if(e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const o=this._hashString(e.template),n=`state_${e.entity}_${e.id}_${o}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(n)&&this._templateService.subscribeToTemplate(e.template,n,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const a=null===(f=null==t?void 0:t.__uvc_template_strings)||void 0===f?void 0:f[n];if(void 0!==a&&""!==String(a).trim()){const o=String(a).toLowerCase();I=["true","false","on","off","yes","no","0","1"].includes(o)?i?e.custom_active_state_text&&""!==e.custom_active_state_text.trim()?e.custom_active_state_text:this._formatValueWithUnits(w,e.entity,e,t):e.custom_inactive_state_text&&""!==e.custom_inactive_state_text.trim()?e.custom_inactive_state_text:this._formatValueWithUnits(w,e.entity,e,t):"unknown"===String(a)?"Template Error: Check entity names":String(a)}else I=this._formatValueWithUnits(w,e.entity,e,t)}else I=this._getDisplayStateValue(e,t,i);const j=i?e.active_icon_background||e.icon_background:e.inactive_icon_background||e.icon_background,M=i?e.active_icon_background_color||e.icon_background_color:e.inactive_icon_background_color||e.icon_background_color,D="none"!==j?{backgroundColor:e.use_entity_color_for_icon_background&&(null===(_=null==k?void 0:k.attributes)||void 0===_?void 0:_.rgb_color)?`rgb(${k.attributes.rgb_color.join(",")})`:M,borderRadius:"circle"===j?"50%":"rounded-square"===j?"8px":"0",padding:"8px"}:{},B=Object.assign(Object.assign({},{display:"flex",alignItems:"center",justifyContent:"center"}),D),R=e.active_icon_animation||"none",U=e.inactive_icon_animation||"none",H=i?R:U,J="none"!==H?`icon-animation-${H}`:"",Q={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:e.vertical_alignment||"center",padding:"0",borderRadius:"circle"===e.container_background_shape?"50%":"rounded"===e.container_background_shape?"8px":"square"===e.container_background_shape?"0":"8px",background:e.container_background_shape&&"none"!==e.container_background_shape?e.container_background_color||"#808080":"transparent",backgroundImage:this.getBackgroundImageCSS(e,t),backgroundSize:e.background_size||"cover",backgroundPosition:e.background_position||"center",backgroundRepeat:e.background_repeat||"no-repeat",cursor:"pointer",transition:"all 0.2s ease",width:e.container_width?`${e.container_width}%`:"auto",margin:"0 auto"},N=null!==(v=e.name_icon_gap)&&void 0!==v?v:8,L=null!==(b=e.name_state_gap)&&void 0!==b?b:2,F=null!==(y=e.icon_state_gap)&&void 0!==y?y:4,q=n?null===(x=n.design)||void 0===x?void 0:x.hover_effect:void 0,V=d.k.getHoverEffectClass(q);return o.qy`
      <div
        class="icon-item-preview ${V}"
        style=${this.styleObjectToCss(Object.assign(Object.assign({},Q),{gap:"0px"}))}
        @click=${i=>{if(i.preventDefault(),!n.tap_action||"nothing"!==n.tap_action.action){const o=n.tap_action||{action:"default",entity:e.entity};c.K.handleAction(o,t,i.target,void 0,e.entity)}}}
      >
        ${S?o.qy`
              <div
                style="${this.styleObjectToCss(Object.assign(Object.assign({},B),{marginBottom:O?`${N}px`:A?`${F}px`:"0px"}))}"
              >
                ${this._shouldUseEntityPicture(k)?o.qy`
                      <img
                        src="${this._getEntityPicture(k,t)}"
                        class="${J} ultra-force-animation entity-picture"
                        style="
                          width: ${Number(i?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                          height: ${Number(i?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                          border-radius: 50%;
                          object-fit: cover;
                          ${J&&"none"!==J?`animation: ${this._getInlineAnimation(J)} !important;`:""}
                        "
                        data-animation-debug="${J||"none"}"
                        data-is-active="${i}"
                        alt="Entity picture"
                      />
                    `:o.qy`
                      <ha-icon
                        icon="${C||"mdi:help-circle"}"
                        class="${J} ultra-force-animation"
                        style="
                          color: ${$||"var(--secondary-text-color)"};
                          --mdc-icon-size: ${Number(i?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                          ${J&&"none"!==J?`animation: ${this._getInlineAnimation(J)} !important;`:""}
                        "
                        data-animation-debug="${J||"none"}"
                        data-is-active="${i}"
                      ></ha-icon>
                    `}
              </div>
            `:""}
        ${O?o.qy`
              <div
                class="icon-name"
                style="
                  font-size: ${P.fontSize?P.fontSize:`${i?e.active_text_size||e.text_size||12:e.inactive_text_size||e.text_size||14}px`};
                  color: ${T||"var(--primary-text-color)"};
                  text-align: ${P.textAlign||"center"};
                  line-height: ${P.lineHeight||"1.2"};
                  max-width: 120px;
                  word-wrap: break-word;
                  margin-bottom: ${A?`${L}px`:"0px"};
                  font-family: ${P.fontFamily||"inherit"};
                  font-weight: ${P.fontWeight||"inherit"};
                  font-style: ${P.fontStyle||"inherit"};
                  text-transform: ${P.textTransform||"inherit"};
                  letter-spacing: ${P.letterSpacing||"inherit"};
                  text-shadow: ${P.textShadow||"none"};
                "
              >
                ${E}
              </div>
            `:""}
        ${A?o.qy`
              <div
                class="icon-state"
                style="
                  font-size: ${P.fontSize?P.fontSize:`${i?e.active_state_size||e.state_size||10:e.inactive_state_size||e.state_size||10}px`};
                  color: ${z||"var(--secondary-text-color)"};
                  text-align: ${P.textAlign||"center"};
                  line-height: ${P.lineHeight||"1.2"};
                  font-family: ${P.fontFamily||"inherit"};
                  font-weight: ${P.fontWeight||"inherit"};
                  font-style: ${P.fontStyle||"inherit"};
                  text-transform: ${P.textTransform||"inherit"};
                  letter-spacing: ${P.letterSpacing||"inherit"};
                  text-shadow: ${P.textShadow||"none"};
                "
              >
                ${I}
              </div>
            `:""}
      </div>
    `}renderIconGrid(e,t,i,n=!0){var a;const r=null===(a=e.design)||void 0===a?void 0:a.hover_effect,s=d.k.getHoverEffectClass(r),l=e.design||{},c={color:e.color||l.color,font_size:e.font_size||l.font_size,font_weight:e.font_weight||l.font_weight,font_style:e.font_style||l.font_style,text_transform:e.text_transform||l.text_transform,font_family:e.font_family||l.font_family,line_height:e.line_height||l.line_height,letter_spacing:e.letter_spacing||l.letter_spacing,text_align:e.text_align||l.text_align,text_shadow_h:e.text_shadow_h||l.text_shadow_h,text_shadow_v:e.text_shadow_v||l.text_shadow_v,text_shadow_blur:e.text_shadow_blur||l.text_shadow_blur,text_shadow_color:e.text_shadow_color||l.text_shadow_color,background_position:e.background_position||l.background_position,background_repeat:e.background_repeat||l.background_repeat,hover_effect:e.hover_effect||l.hover_effect};return o.qy`
      <div
        class="icon-grid"
        style="
          display: grid;
          grid-template-columns: repeat(${Math.min(Math.max(1,Math.floor((e.columns||3)/2)),e.icons.length)}, 1fr);
          gap: ${e.gap||16}px;
          justify-content: ${e.alignment||"center"};
        "
      >
        ${e.icons.slice(0,6).map((e=>{var a,r,l,d,p,u,h,g,m;const f=null==t?void 0:t.states[e.entity],_=(null==f||f.state,i),v=_?!1!==e.show_icon_when_active:!1!==e.show_icon_when_inactive,b=_?!1!==e.show_name_when_active:!1!==e.show_name_when_inactive,y=_?!1!==e.show_state_when_active:!1!==e.show_state_when_inactive;let x=_&&e.icon_active||e.icon_inactive;(null===(a=null==f?void 0:f.attributes)||void 0===a?void 0:a.icon)&&!x&&(x=f.attributes.icon);const k=_?e.use_state_color_for_active_icon?this._getEntityStateColor(f)||e.active_icon_color:e.use_entity_color_for_icon&&(null===(r=null==f?void 0:f.attributes)||void 0===r?void 0:r.rgb_color)?`rgb(${f.attributes.rgb_color.join(",")})`:e.active_icon_color:e.use_state_color_for_inactive_icon?this._getEntityStateColor(f)||e.inactive_icon_color:e.use_entity_color_for_icon&&(null===(l=null==f?void 0:f.attributes)||void 0===l?void 0:l.rgb_color)?`rgb(${f.attributes.rgb_color.join(",")})`:e.inactive_icon_color,w=c.color||(_?e.active_name_color:e.inactive_name_color),S=c.color||(_?e.active_state_color:e.inactive_state_color),O=c.font_size?/[a-zA-Z%]/.test(c.font_size)?c.font_size:this.addPixelUnit(c.font_size)||c.font_size:void 0,A=c.font_family||void 0,C=c.font_weight||void 0,$=c.font_style||void 0,T=c.text_transform||void 0,z=c.line_height||void 0,P=c.letter_spacing||void 0,E=c.text_align||void 0,I=c.text_shadow_h&&c.text_shadow_v?`${c.text_shadow_h||"0"} ${c.text_shadow_v||"0"} ${c.text_shadow_blur||"0"} ${c.text_shadow_color||"rgba(0,0,0,0.5)"}`:void 0,j=_?e.custom_active_name_text||e.name||(null===(d=null==f?void 0:f.attributes)||void 0===d?void 0:d.friendly_name)||e.entity:e.custom_inactive_name_text||e.name||(null===(p=null==f?void 0:f.attributes)||void 0===p?void 0:p.friendly_name)||e.entity;let M;M=this._getDisplayStateValue(e,t,_);const D=_?e.active_icon_background||e.icon_background:e.inactive_icon_background||e.icon_background,B=_?e.active_icon_background_color||e.icon_background_color:e.inactive_icon_background_color||e.icon_background_color,R="none"!==D?{backgroundColor:e.use_entity_color_for_icon_background&&(null===(u=null==f?void 0:f.attributes)||void 0===u?void 0:u.rgb_color)?`rgb(${f.attributes.rgb_color.join(",")})`:B,borderRadius:"circle"===D?"50%":"rounded-square"===D?"8px":"0",padding:"8px"}:{},U=Object.assign(Object.assign({},{display:"flex",alignItems:"center",justifyContent:"center"}),R),H=e.active_icon_animation||"none",J=e.inactive_icon_animation||"none",Q=_?H:J,N="none"!==Q?`icon-animation-${Q}`:"";N&&n&&setTimeout((()=>{this._updateIconAnimationClasses(e.entity,N,_)}),150);const L={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:e.vertical_alignment||"center",padding:"8px",borderRadius:"circle"===e.container_background_shape?"50%":"rounded"===e.container_background_shape?"8px":"square"===e.container_background_shape?"0":"8px",background:e.container_background_shape&&"none"!==e.container_background_shape?e.container_background_color||"#808080":"transparent",backgroundImage:this.getBackgroundImageCSS(e,t),backgroundSize:e.background_size||"cover",backgroundPosition:e.background_position||"center",backgroundRepeat:e.background_repeat||"no-repeat",cursor:"pointer",transition:"all 0.2s ease",width:e.container_width?`${e.container_width}%`:"auto",margin:"0 auto"},F=null!==(h=e.name_icon_gap)&&void 0!==h?h:8,q=null!==(g=e.name_state_gap)&&void 0!==g?g:2,V=null!==(m=e.icon_state_gap)&&void 0!==m?m:4;return o.qy`
            <div
              class="icon-item-preview ${s}"
              style=${this.styleObjectToCss(Object.assign(Object.assign({},L),{gap:"0px"}))}
            >
              ${v?o.qy`
                    <div
                      style="${this.styleObjectToCss(Object.assign(Object.assign({},U),{marginBottom:b?`${F}px`:y?`${V}px`:"0px"}))}"
                    >
                      ${this._shouldUseEntityPicture(f)?o.qy`
                            <img
                              src="${this._getEntityPicture(f,t)}"
                              class="${N} ultra-force-animation entity-picture"
                              style="
                                width: ${Number(_?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                                height: ${Number(_?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                                border-radius: 50%;
                                object-fit: cover;
                                ${N&&"none"!==N?`animation: ${this._getInlineAnimation(N)} !important;`:""}
                              "
                              data-animation-debug="${N||"none"}"
                              data-is-active="${_}"
                              alt="Entity picture"
                            />
                          `:o.qy`
                            <ha-icon
                              icon="${x||"mdi:help-circle"}"
                              class="${N} ultra-force-animation"
                              style="
                                color: ${k||"var(--secondary-text-color)"};
                                --mdc-icon-size: ${Number(_?e.active_icon_size||e.icon_size:e.inactive_icon_size||e.icon_size)||26}px;
                                ${N&&"none"!==N?`animation: ${this._getInlineAnimation(N)} !important;`:""}
                              "
                              data-animation-debug="${N||"none"}"
                              data-is-active="${_}"
                            ></ha-icon>
                          `}
                    </div>
                  `:""}
              ${b?o.qy`
                    <div
                      class="icon-name"
                      style="
                        font-size: ${O||`${_?e.active_text_size||e.text_size||12:e.inactive_text_size||e.text_size||14}px`};
                        color: ${w||"var(--primary-text-color)"};
                        text-align: ${E||"center"};
                        line-height: ${z||"1.2"};
                        max-width: 120px;
                        word-wrap: break-word;
                        margin-bottom: ${y?`${q}px`:"0px"};
                        font-family: ${A||"inherit"};
                        font-weight: ${C||"inherit"};
                        font-style: ${$||"inherit"};
                        text-transform: ${T||"inherit"};
                        letter-spacing: ${P||"inherit"};
                        text-shadow: ${I||"none"};
                      "
                    >
                      ${j}
                    </div>
                  `:""}
              ${y?o.qy`
                    <div
                      class="icon-state"
                      style="
                        font-size: ${O||`${_?e.active_state_size||e.state_size||10:e.inactive_state_size||e.state_size||10}px`};
                        color: ${S||"var(--secondary-text-color)"};
                        text-align: ${E||"center"};
                        line-height: ${z||"1.2"};
                        font-family: ${A||"inherit"};
                        font-weight: ${C||"inherit"};
                        font-style: ${$||"inherit"};
                        text-transform: ${T||"inherit"};
                        letter-spacing: ${P||"inherit"};
                        text-shadow: ${I||"none"};
                      "
                    >
                      ${M}
                    </div>
                  `:""}
            </div>
          `}))}
      </div>
    `}validate(e){const t=e,i=[...super.validate(e).errors];return t.icons&&0!==t.icons.length||i.push("At least one icon is required"),t.icons.forEach(((e,t)=>{e.entity&&""!==e.entity.trim()||i.push(`Icon ${t+1}: Entity ID is required`),e.icon_inactive&&""!==e.icon_inactive.trim()||i.push(`Icon ${t+1}: Inactive icon is required`)})),{valid:0===i.length,errors:i}}updateHass(e){this._templateService&&this._templateService.updateHass(e)}cleanup(){this._templateService&&(this._templateService.unsubscribeAllTemplates(),this._templateService=void 0),this._attributeCache.clear(),this._processingAttributes.clear(),this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0)}_getDisplayStateValue(e,t,i){var o;const n=null==t?void 0:t.states[e.entity];if(!n)return"unknown";const a=n.state,r=i?e.active_attribute:e.inactive_attribute;if(r&&void 0!==(null===(o=n.attributes)||void 0===o?void 0:o[r])){const i=n.attributes[r];return this._formatValueWithUnits(String(i),e.entity,e,t)}const s=i?e.custom_active_state_text:e.custom_inactive_state_text;return s&&""!==s.trim()?s:this._formatValueWithUnits(a,e.entity,e,t)}_getEntityAttributes(e,t){var i;const o=[{value:"",label:"None (Use State)"}];try{if(!e||!(null===(i=null==t?void 0:t.states)||void 0===i?void 0:i[e]))return o;const n=t.states[e].attributes||{};return Object.keys(n).forEach((e=>{if(!e.startsWith("_")&&"friendly_name"!==e&&"entity_picture"!==e&&"supported_features"!==e&&"device_class"!==e&&"state_class"!==e){const t=n[e];let i="";i=null==t?"null":"object"==typeof t?Array.isArray(t)?`[${t.length} items]`:"{object}":String(t).substring(0,20),o.push({value:e,label:`${e} (${i})`})}})),o}catch(e){return console.error("Error getting attributes:",e),o}}_isBinaryEntity(e){const t=e.split(".")[0];return["binary_sensor","switch","input_boolean","automation","script","light","fan","lock","cover","device_tracker"].includes(t)}_matchesState(e,t,i){var o,n;if(e===t)return!0;if(e.toLowerCase()===t.toLowerCase())return!0;const a=null===(o=null==i?void 0:i.entity_id)||void 0===o?void 0:o.split(".")[0],r=null===(n=null==i?void 0:i.attributes)||void 0===n?void 0:n.device_class,s=this._getStateMappings(a,r);return s[t.toLowerCase()]===e.toLowerCase()||s[e.toLowerCase()]===t.toLowerCase()}_getStateMappings(e,t){const i={on:"on",off:"off",true:"on",false:"off",yes:"on",no:"off",1:"on",0:"off"};switch(e){case"binary_sensor":if(i.open="on",i.closed="off",i.detected="on",i.clear="off",i.motion="on",i.no_motion="off",i.occupied="on",i.not_occupied="off",i.wet="on",i.dry="off",i.connected="on",i.disconnected="off",i.home="on",i.away="off",i.problem="on",i.ok="off",i.unsafe="on",i.safe="off",t)switch(t){case"door":case"window":case"garage_door":i.open="on",i.closed="off";break;case"lock":i.unlocked="on",i.locked="off";break;case"motion":i.motion="on",i.no_motion="off";break;case"occupancy":i.occupied="on",i.not_occupied="off";break;case"presence":i.home="on",i.away="off";break;case"connectivity":i.connected="on",i.disconnected="off"}break;case"cover":i.open="on",i.closed="off",i.opening="on",i.closing="off";break;case"lock":i.unlocked="on",i.locked="off",i.unlocking="on",i.locking="off";break;case"device_tracker":case"person":i.home="on",i.away="off",i.not_home="off";break;case"alarm_control_panel":i.disarmed="off",i.armed_home="on",i.armed_away="on",i.armed_night="on",i.armed_vacation="on",i.armed_custom_bypass="on"}return i}_evaluateIconState(e,t){var i,o,n,a,r;const l=null==t?void 0:t.states[e.entity];if(!l)return!1;const d=l.state,c=e.inactive_attribute?(null===(o=null===(i=l.attributes)||void 0===i?void 0:i[e.inactive_attribute])||void 0===o?void 0:o.toString())||"":d,p=e.active_attribute?(null===(a=null===(n=l.attributes)||void 0===n?void 0:n[e.active_attribute])||void 0===a?void 0:a.toString())||"":d;if(e.template_mode&&e.template){!this._templateService&&t&&(this._templateService=new s.I(t));const i=this._hashString(e.template),o=`display_${e.entity}_${e.id}_${i}`;t.__uvc_template_strings||(t.__uvc_template_strings={}),this._templateService&&!this._templateService.hasTemplateSubscription(o)&&this._templateService.subscribeToTemplate(e.template,o,(()=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}));const n=null===(r=null==t?void 0:t.__uvc_template_strings)||void 0===r?void 0:r[o];if(void 0!==n){const e=String(n).toLowerCase();if(["true","false","on","off","yes","no","0","1"].includes(e))return["true","on","yes","1"].includes(e)||parseFloat(e)>0&&!isNaN(parseFloat(e));if(""===String(n).trim())return!1;if(String(n)!==d)return!0}}if(e.active_state&&e.inactive_state)return!!this._matchesState(p,e.active_state,l)||(this._matchesState(c,e.inactive_state,l),!1);if(e.active_state)return this._matchesState(p,e.active_state,l);if(e.inactive_state)return!this._matchesState(c,e.inactive_state,l);if((e.active_attribute||e.inactive_attribute)&&!e.active_state&&!e.inactive_state){const e=parseFloat(p||c);if(!isNaN(e))return e>70;const t=(p||c).toLowerCase(),i=["sunny","clear","fair","cold","cool"];return!!["cloudy","rainy","stormy","snowy","windy","hot","warm"].some((e=>t.includes(e)))||!i.some((e=>t.includes(e)))}const u=e.active_attribute||e.inactive_attribute?e.active_attribute?p:c:d;if(["on","true","active","open","playing","home"].includes(u.toLowerCase()))return!0;if(["off","false","inactive","closed","paused","stopped","away","unavailable","unknown"].includes(u.toLowerCase()))return!1;const h=parseFloat(u);return!isNaN(h)&&h>0}getStyles(){return`\n      /* Hide unwanted form labels with underscores and slots */\n      [slot='label'] {\n        display: none !important;\n      }\n\n      ha-form .mdc-form-field > label,\n      ha-form .mdc-text-field > label,\n      ha-form .mdc-floating-label,\n      ha-form .mdc-notched-outline__leading,\n      ha-form .mdc-notched-outline__notch,\n      ha-form .mdc-notched-outline__trailing,\n      ha-form .mdc-floating-label--float-above,\n      ha-form label[for],\n      ha-form .ha-form-label,\n      ha-form .form-label {\n        display: none !important;\n      }\n\n      /* Hide any labels containing underscores */\n      ha-form label[data-label*='_'],\n      ha-form .label-text:contains('_'),\n      label:contains('_') {\n        display: none !important;\n      }\n        .label {\n          display: none !important;\n        }\n\n      /* Additional safeguards for underscore labels */\n      ha-form .mdc-text-field-character-counter,\n      ha-form .mdc-text-field-helper-text,\n      ha-form mwc-formfield,\n      ha-form .formfield {\n        display: none !important;\n      }\n\n      /* Hide form field labels that match underscore patterns */\n      ha-form[data-field*='_'] label,\n      ha-form[data-field*='_'] .mdc-floating-label,\n      ha-form[data-field*='_'] .mdc-notched-outline__notch > .mdc-floating-label {\n        display: none !important;\n      }\n\n      /* Target specific underscore field names */\n      ha-form[data-field='use_entity_color_for_icon'] label,\n      ha-form[data-field='use_entity_color_for_icon_background'] label,\n      ha-form[data-field='show_name_when_active'] label,\n      ha-form[data-field='show_state_when_active'] label,\n      ha-form[data-field='show_icon_when_active'] label,\n      ha-form[data-field='show_name_when_inactive'] label,\n      ha-form[data-field='show_state_when_inactive'] label,\n      ha-form[data-field='show_icon_when_inactive'] label,\n      ha-form[data-field='active_template_mode'] label,\n      ha-form[data-field='inactive_template_mode'] label,\n      ha-form[data-field='dynamic_icon_template_mode'] label,\n      ha-form[data-field='dynamic_color_template_mode'] label {\n        display: none !important;\n      }\n\n      /* Make dynamic template toggles more compact */\n      ha-form[data-field='dynamic_icon_template_mode'] ha-switch,\n      ha-form[data-field='dynamic_color_template_mode'] ha-switch {\n        --mdc-switch-track-width: 36px !important;\n        --mdc-switch-track-height: 20px !important;\n        --switch-checked-track-color: var(--primary-color) !important;\n        --switch-unchecked-track-color: var(--disabled-color) !important;\n        transform: scale(0.8) !important;\n      }\n\n      ha-form[data-field='dynamic_icon_template_mode'] .mdc-switch,\n      ha-form[data-field='dynamic_color_template_mode'] .mdc-switch {\n        transform: scale(0.8) !important;\n      }\n\n      /* Hide any element with underscore in text content */\n      *:not(script):not(style) {\n        text-decoration: none !important;\n      }\n      \n      /* Target elements that might show underscore text */\n      .mdc-form-field__label:contains('_'),\n      .mdc-text-field__input + label:contains('_'),\n      .mdc-select__selected-text:contains('_') {\n        display: none !important;\n      }\n\n\n      \n      .icon-grid {\n        width: 100%;\n      }\n\n      /* Collapsible Header Styles */\n      .collapsible-header:hover {\n        background: rgba(var(--rgb-primary-color), 0.08) !important;\n        border-color: var(--primary-color) !important;\n      }\n\n      .collapsible-header:active {\n        transform: scale(0.98);\n      }\n\n      /* Split Preview Styles */\n      .split-preview-container {\n        position: relative;\n      }\n\n      .split-preview-container::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 1px;\n        height: 100%;\n        background: var(--divider-color);\n        z-index: 1;\n      }\n\n      .icon-module-split-preview .inactive-preview .icon-item-preview {\n        border: 1px solid rgba(var(--rgb-primary-color), 0.1);\n        background: rgba(var(--rgb-primary-color), 0.02);\n      }\n\n      .icon-module-split-preview .active-preview .icon-item-preview {\n        border: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        background: rgba(var(--rgb-primary-color), 0.04);\n      }\n\n      .icon-module-split-preview .inactive-preview .icon-item-preview.hover-enabled:hover {\n        background: rgba(var(--rgb-primary-color), 0.08) !important;\n        border-color: var(--primary-color) !important;\n        transform: scale(1.02);\n      }\n\n      .icon-module-split-preview .active-preview .icon-item-preview.hover-enabled:hover {\n        background: rgba(var(--rgb-primary-color), 0.12) !important;\n        border-color: var(--primary-color) !important;\n        transform: scale(1.02);\n      }\n\n      /* Preview state indicators */\n      .icon-module-split-preview .preview-header div {\n        padding: 8px 12px;\n        border-radius: 20px;\n        font-size: 12px;\n        font-weight: 700;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        margin: 0 8px;\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border: 1px solid rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      /* Responsive adjustments for split view */\n      @media (max-width: 768px) {\n        .icon-module-split-preview .split-preview-container {\n          grid-template-columns: 1fr !important;\n          grid-template-rows: auto auto;\n        }\n\n        .icon-module-split-preview .preview-header {\n          flex-direction: column !important;\n          gap: 8px !important;\n        }\n\n        .icon-module-split-preview .inactive-preview {\n          border-right: none !important;\n          border-bottom: 1px solid var(--divider-color) !important;\n        }\n\n        .icon-module-split-preview .split-preview-container::before {\n          display: none;\n        }\n\n        .icon-module-split-preview .preview-header div {\n          margin: 0 !important;\n        }\n\n        .collapsible-header {\n          padding: 10px 12px !important;\n        }\n\n        .collapsible-header span {\n          font-size: 14px !important;\n        }\n\n        .collapsible-header ha-icon {\n          font-size: 16px !important;\n        }\n      }\n\n      @media (max-width: 480px) {\n        /* Removed mobile-specific icon-grid overrides to maintain consistent user-configured spacing */\n\n        .icon-module-split-preview .inactive-preview,\n        .icon-module-split-preview .active-preview {\n          padding: 8px !important;\n        }\n\n        .icon-module-split-preview .preview-header div {\n          font-size: 10px !important;\n          padding: 6px 8px !important;\n        }\n\n        .collapsible-header {\n          padding: 8px 10px !important;\n        }\n\n        .collapsible-header span {\n          font-size: 12px !important;\n        }\n\n        .collapsible-header ha-icon {\n          font-size: 14px !important;\n        }\n      }\n      \n      .icon-item-preview.hover-enabled:hover {\n        background: var(--primary-color) !important;\n        color: white;\n        transform: scale(1.05);\n      }\n      \n      .icon-item-preview.hover-enabled:hover ha-icon {\n        color: white !important;\n      }\n      \n      .icon-item-preview.hover-enabled:hover .icon-name,\n      .icon-item-preview.hover-enabled:hover .icon-state {\n        color: white !important;\n      }\n      \n      /* Field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n     \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Expandable details styling */\n      details > summary {\n        list-style: none;\n      }\n\n      details > summary::-webkit-details-marker {\n        display: none;\n      }\n\n      details[open] > summary ha-icon {\n        transform: rotate(90deg);\n      }\n\n      details > summary:hover {\n        background: rgba(var(--rgb-primary-color), 0.1) !important;\n      }\n\n      /* Icon animations - Simple and direct selectors */\n      .icon-animation-pulse {\n        animation: iconPulse 2s ease-in-out infinite !important;\n      }\n\n      .icon-animation-spin {\n        animation: iconSpin 2s linear infinite !important;\n      }\n\n      .icon-animation-bounce {\n        animation: iconBounce 1s ease-in-out infinite !important;\n      }\n\n      .icon-animation-flash {\n        animation: iconFlash 1s ease-in-out infinite !important;\n      }\n\n      .icon-animation-shake {\n        animation: iconShake 0.5s ease-in-out infinite !important;\n      }\n\n      .icon-animation-vibrate {\n        animation: iconVibrate 0.3s ease-in-out infinite !important;\n      }\n\n      .icon-animation-rotate-left {\n        animation: iconRotateLeft 2s linear infinite !important;\n      }\n\n      .icon-animation-rotate-right {\n        animation: iconRotateRight 2s linear infinite !important;\n      }\n\n      .icon-animation-fade {\n        animation: iconFade 2s ease-in-out infinite !important;\n      }\n\n      .icon-animation-scale {\n        animation: iconScale 1s ease-in-out infinite !important;\n      }\n\n      .icon-animation-tada {\n        animation: iconTada 1s ease-in-out infinite !important;\n      }\n\n\n\n      @keyframes iconPulse {\n        0%, 100% { opacity: 1; transform: scale(1); }\n        50% { opacity: 0.7; transform: scale(1.1); }\n      }\n\n      @keyframes iconSpin {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n\n      @keyframes iconBounce {\n        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }\n        40% { transform: translateY(-10px); }\n        60% { transform: translateY(-5px); }\n      }\n\n      @keyframes iconFlash {\n        0%, 50%, 100% { opacity: 1; }\n        25%, 75% { opacity: 0.3; }\n      }\n\n      @keyframes iconShake {\n        0%, 100% { transform: translateX(0); }\n        10%, 30%, 50%, 70%, 90% { transform: translateX(-2px); }\n        20%, 40%, 60%, 80% { transform: translateX(2px); }\n      }\n\n      @keyframes iconVibrate {\n        0%, 100% { transform: translate(0); }\n        10% { transform: translate(-1px, -1px); }\n        20% { transform: translate(1px, -1px); }\n        30% { transform: translate(-1px, 1px); }\n        40% { transform: translate(1px, 1px); }\n        50% { transform: translate(-1px, -1px); }\n        60% { transform: translate(1px, -1px); }\n        70% { transform: translate(-1px, 1px); }\n        80% { transform: translate(1px, 1px); }\n        90% { transform: translate(-1px, -1px); }\n      }\n\n      @keyframes iconRotateLeft {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(-360deg); }\n      }\n\n      @keyframes iconRotateRight {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n\n      @keyframes iconFade {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.3; }\n      }\n\n      @keyframes iconScale {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.2); }\n      }\n\n      @keyframes iconTada {\n        0% { transform: scale(1); }\n        10%, 20% { transform: scale(0.9) rotate(-3deg); }\n        30%, 50%, 70%, 90% { transform: scale(1.1) rotate(3deg); }\n        40%, 60%, 80% { transform: scale(1.1) rotate(-3deg); }\n        100% { transform: scale(1) rotate(0); }\n      }\n\n      @keyframes lockUnlockedPulse {\n        0%, 100% { \n          box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);\n          border-color: var(--info-color, #2196F3);\n        }\n        50% { \n          box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.4);\n          border-color: var(--info-color, #1976D2);\n        }\n      }\n\n      /* Respect user's motion preferences */\n      @media (prefers-reduced-motion: reduce) {\n        .lock-btn.unlocked {\n          animation: none !important;\n        }\n      }\n\n      /* Add icon button styling */\n      .add-icon-btn:hover {\n        background: var(--primary-color);\n        color: white;\n      }\n      \n      /* Remove icon button styling */\n      .remove-icon-btn:disabled {\n        opacity: 0.3;\n        cursor: not-allowed;\n      }\n\n      /* Icon picker specific styling */\n      ha-icon-picker {\n        --ha-icon-picker-width: 100%;\n        --ha-icon-picker-height: 56px;\n      }\n\n      /* Dropdown styling */\n      ha-select {\n        width: 100%;\n        --ha-select-height: 40px;\n      }\n\n      /* Hide any radio buttons that might still be rendered */\n      ha-radio,\n      mwc-radio,\n      .mdc-radio {\n        display: none !important;\n      }\n\n      /* Text field and select consistency */\n      ha-textfield,\n      ha-select {\n        --mdc-shape-small: 8px;\n        --mdc-theme-primary: var(--primary-color);\n      }\n\n      /* Note: Dropdown positioning fixes are now handled globally in ultra-card-editor.ts */\n\n      /* Module tab content input width - restrict to icon module only */\n      .icon-module .module-tab-content input[type="number"], \n      .icon-module .module-tab-content input[type="text"],\n      .icon-module .module-tab-content .gap-input {\n        width: 25% !important;\n        max-width: 25% !important;\n        min-width: 25% !important;\n      }\n\n      /* Grid styling for layout options */\n      .settings-section[style*="grid"] > div {\n        min-width: 0;\n      }\n\n      /* Responsive adjustments */\n      @media (max-width: 768px) {\n        .settings-section[style*="grid-template-columns: 1fr 1fr 1fr"] {\n          grid-template-columns: 1fr !important;\n          gap: 12px !important;\n        }\n\n        .settings-section[style*="grid-template-columns: 1fr 1fr"] {\n          grid-template-columns: 1fr !important;\n          gap: 12px !important;\n        }\n\n        .conditional-fields-group {\n          border-left-width: 3px;\n        }\n        \n        .conditional-fields-header {\n          padding: 10px 12px;\n          font-size: 13px;\n        }\n        \n        .conditional-fields-content {\n          padding: 12px;\n        }\n\n        /* Mobile-friendly field titles and descriptions */\n        .field-title {\n          font-size: 14px !important;\n        }\n\n        .field-description {\n          font-size: 12px !important;\n          line-height: 1.3 !important;\n        }\n\n        .section-title {\n          font-size: 16px !important;\n        }\n\n        /* Mobile-friendly size controls */\n        .gap-control-container {\n          gap: 8px !important;\n        }\n\n        .gap-input {\n          width: 44px !important;\n          max-width: 44px !important;\n          min-width: 44px !important;\n          font-size: 12px !important;\n        }\n\n        .reset-btn {\n          width: 32px !important;\n          height: 32px !important;\n        }\n\n        .reset-btn ha-icon {\n          font-size: 14px !important;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          line-height: 1 !important;\n        }\n\n        /* Mobile-friendly lock buttons */\n        .lock-btn {\n          padding: 6px 12px !important;\n          font-size: 12px !important;\n        }\n\n        .lock-btn ha-icon {\n          font-size: 16px !important;\n        }\n\n        .lock-btn.unlocked {\n          border-color: var(--info-color, #2196F3) !important;\n          background: rgba(33, 150, 243, 0.15) !important;\n          color: var(--info-color, #2196F3) !important;\n          box-shadow: 0 0 0 1px rgba(33, 150, 243, 0.3) !important;\n        }\n\n        .lock-btn.unlocked ha-icon {\n          color: var(--info-color, #2196F3) !important;\n        }\n\n        /* Mobile-friendly accordions */\n        details > summary {\n          padding: 12px !important;\n          font-size: 14px !important;\n        }\n\n        details > summary ha-icon {\n          font-size: 16px !important;\n        }\n\n        /* Mobile-friendly form fields */\n        .icon-settings-container {\n          padding: 12px !important;\n        }\n\n        /* Removed mobile-specific icon-grid overrides to maintain consistent user-configured spacing across all screen sizes */\n\n        .icon-item-preview {\n          padding: 6px !important;\n        }\n      }\n\n      /* Extra small devices (phones, 480px and down) */\n      @media (max-width: 480px) {\n        .field-title {\n          font-size: 13px !important;\n        }\n\n        .field-description {\n          font-size: 11px !important;\n        }\n\n        .section-title {\n          font-size: 14px !important;\n        }\n\n        .gap-input {\n          width: 40px !important;\n          max-width: 40px !important;\n          min-width: 40px !important;\n          font-size: 11px !important;\n        }\n\n        .reset-btn {\n          width: 28px !important;\n          height: 28px !important;\n        }\n\n        .reset-btn ha-icon {\n          font-size: 12px !important;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          line-height: 1 !important;\n        }\n\n        .lock-btn {\n          padding: 4px 8px !important;\n          font-size: 11px !important;\n        }\n\n        .lock-btn.unlocked {\n          border-color: var(--info-color, #2196F3) !important;\n          background: rgba(33, 150, 243, 0.15) !important;\n          color: var(--info-color, #2196F3) !important;\n          box-shadow: 0 0 0 1px rgba(33, 150, 243, 0.3) !important;\n        }\n\n        .lock-btn.unlocked ha-icon {\n          color: var(--info-color, #2196F3) !important;\n        }\n\n        .icon-settings-container {\n          padding: 8px !important;\n        }\n\n        /* Stack lock controls vertically on very small screens */\n        .gap-control-container {\n          flex-wrap: wrap !important;\n          gap: 6px !important;\n        }\n\n        .gap-slider {\n          width: 100% !important;\n          order: 1;\n        }\n\n        .gap-input {\n          order: 2;\n        }\n\n        .reset-btn {\n          order: 3;\n        }\n\n        .lock-btn {\n          order: 4;\n          width: 100% !important;\n          justify-content: center !important;\n        }\n      }\n\n      /* Ensure form elements don't overflow */\n      .settings-section ha-form {\n        max-width: 100%;\n        overflow: visible;\n      }\n\n      /* Color picker adjustments */\n      .settings-section ha-form[data-field*="color"] {\n        min-height: 56px;\n      }\n\n      /* Boolean toggle adjustments */\n      .settings-section ha-form[data-field*="mode"] {\n        display: flex;\n        align-items: center;\n        min-height: auto;\n      }\n\n      /* Number slider adjustments */\n      .settings-section ha-form[data-field*="size"] .mdc-slider,\n      .settings-section ha-form[data-field*="gap"] .mdc-slider,\n      .settings-section ha-form[data-field*="columns"] .mdc-slider {\n        width: 100%;\n        max-width: 100%;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n        transform: none;\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin: 0;\n        padding: 0;\n        line-height: 1;\n      }\n\n      /* Lock button styles */\n      .lock-btn {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px 16px;\n        border: 2px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        font-size: 14px;\n        font-weight: 500;\n        transition: all 0.3s ease;\n        outline: none;\n        position: relative;\n      }\n\n      .lock-btn:hover {\n        border-color: var(--primary-color);\n        background: var(--primary-color);\n        color: white;\n      }\n\n      .lock-btn.locked {\n        border-color: var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.1);\n        color: var(--primary-color);\n      }\n\n      .lock-btn.locked:hover {\n        background: var(--primary-color);\n        color: white;\n      }\n\n      button.lock-btn.unlocked {\n        background-color: var(--primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .lock-btn.unlocked {\n        border-color: var(--info-color, #2196F3) !important;\n        background: rgba(33, 150, 243, 0.15) !important;\n        color: var(--info-color, #2196F3) !important;\n        box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2) !important;\n        animation: lockUnlockedPulse 2s ease-in-out infinite;\n      }\n\n      .lock-btn.unlocked:hover {\n        background: var(--info-color, #2196F3) !important;\n        color: white !important;\n        box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.4) !important;\n        animation: none !important;\n      }\n\n      .lock-btn.unlocked ha-icon {\n        color: var(--info-color, #2196F3) !important;\n      }\n\n      .lock-btn.unlocked:hover ha-icon {\n        color: white !important;\n      }\n\n      .lock-btn ha-icon {\n        font-size: 18px;\n      }\n\n      /* Field lock button styling */\n      .field-container .lock-btn {\n        padding: 6px 12px;\n        font-size: 12px;\n        min-width: auto;\n      }\n\n      .field-container .lock-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Icon settings container */\n      .icon-settings-container {\n        background: var(--secondary-background-color);\n        border-radius: 8px;\n        padding: 16px;\n        margin-bottom: 24px;\n        border: 1px solid var(--divider-color);\n      }\n\n      .icon-header {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        margin-bottom: 16px;\n        padding-bottom: 12px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .icon-preview {\n        width: 32px;\n        height: 32px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        background: var(--primary-color);\n        color: white;\n        border-radius: 50%;\n        flex-shrink: 0;\n      }\n\n      .icon-title {\n        flex: 1;\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--primary-text-color);\n      }\n\n      .remove-icon-btn {\n        background: var(--error-color);\n        color: white;\n        border: none;\n        border-radius: 4px;\n        padding: 6px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n      }\n\n      .remove-icon-btn:hover {\n        background: var(--error-color);\n        opacity: 0.8;\n      }\n\n      .remove-icon-btn:disabled {\n        opacity: 0.3;\n        cursor: not-allowed;\n      }\n\n      .remove-icon-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Size lock container */\n      .size-lock-container {\n        padding: 12px;\n        background: rgba(var(--rgb-primary-color), 0.05);\n        border-radius: 8px;\n        border: 1px solid rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      /* Removed overrides that modified ui_action options to avoid conflicts with HA selector */\n\n      /* Template Section Styles */\n      .template-section {\n        background: var(--card-background-color);\n        border-radius: 8px;\n        padding: 16px;\n        border: 1px solid var(--divider-color);\n        margin-bottom: 32px;\n      }\n\n      .template-header {\n        margin-bottom: 16px;\n      }\n\n      .switch-container {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        gap: 8px;\n        margin-bottom: 8px;\n      }\n\n      .switch-label {\n        font-weight: 600;\n        color: var(--primary-text-color);\n        font-size: 16px;\n      }\n\n      .switch {\n        position: relative;\n        display: inline-block;\n        width: 50px;\n        height: 24px;\n      }\n\n      .switch input {\n        opacity: 0;\n        width: 0;\n        height: 0;\n      }\n\n      .slider {\n        position: absolute;\n        cursor: pointer;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background-color: var(--switch-unchecked-color, #ccc);\n        transition: .4s;\n      }\n\n      .slider:before {\n        position: absolute;\n        content: "";\n        height: 18px;\n        width: 18px;\n        left: 3px;\n        bottom: 3px;\n        background-color: white;\n        transition: .4s;\n      }\n\n      input:checked + .slider {\n        background-color: var(--primary-color);\n      }\n\n      input:checked + .slider:before {\n        transform: translateX(26px);\n      }\n\n      .slider.round {\n        border-radius: 24px;\n    max-width: 50px;\n}\n      }\n\n      .slider.round:before {\n        border-radius: 50%;\n      }\n\n      .template-description {\n        font-size: 13px;\n        color: var(--secondary-text-color);\n        line-height: 1.4;\n        margin-bottom: 8px;\n      }\n\n      .template-content {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n\n      .template-editor {\n        min-height: 120px;\n        font-family: 'Courier New', monospace;\n        font-size: 13px;\n        line-height: 1.4;\n        resize: vertical;\n        width: 100%;\n        padding: 12px;\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        background: var(--card-background-color);\n        color: var(--primary-text-color);\n        outline: none;\n        transition: border-color 0.2s ease;\n      }\n\n      .template-editor:focus {\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 1px var(--primary-color);\n      }\n\n      .template-help {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n        margin-top: 4px;\n      }\n\n      .template-help p {\n        margin: 8px 0;\n        font-weight: 500;\n      }\n\n      .template-help ul {\n        margin: 4px 0;\n        padding-left: 16px;\n      }\n\n      .template-help li {\n        margin: 2px 0;\n      }\n\n      .template-help code {\n        background: rgba(var(--rgb-primary-color), 0.1);\n        padding: 2px 4px;\n        border-radius: 3px;\n        font-family: 'Courier New', monospace;\n        font-size: 11px;\n      }\n\n      ${r.A.getHoverStyles()}\n    `}_addIcon(e,t){const i={id:this.generateId("icon-item"),entity:"weather.forecast_home",name:"",icon_inactive:"mdi:weather-partly-cloudy",icon_active:"mdi:weather-partly-cloudy",inactive_state:"",active_state:"",inactive_attribute:"",active_attribute:"",custom_inactive_state_text:"",custom_active_state_text:"",custom_inactive_name_text:"",custom_active_name_text:"",inactive_template_mode:!1,inactive_template:"",active_template_mode:!1,active_template:"",use_entity_color_for_icon:!1,use_state_color_for_inactive_icon:!1,use_state_color_for_active_icon:!1,color_inactive:"var(--secondary-text-color)",color_active:"var(--primary-color)",inactive_icon_color:"var(--secondary-text-color)",active_icon_color:"var(--primary-color)",inactive_name_color:"var(--primary-text-color)",active_name_color:"var(--primary-text-color)",inactive_state_color:"var(--secondary-text-color)",active_state_color:"var(--secondary-text-color)",show_name_when_inactive:!0,show_state_when_inactive:!0,show_icon_when_inactive:!0,show_name_when_active:!0,show_state_when_active:!0,show_icon_when_active:!0,show_state:!0,show_name:!0,icon_size:26,text_size:14,name_icon_gap:8,name_state_gap:2,icon_state_gap:4,active_icon_size:26,inactive_icon_size:26,active_text_size:14,inactive_text_size:14,state_size:14,active_state_size:14,inactive_state_size:14,icon_background:"none",use_entity_color_for_icon_background:!1,icon_background_color:"transparent",active_icon_background:"none",inactive_icon_background:"none",active_icon_background_color:"transparent",inactive_icon_background_color:"transparent",icon_size_locked:!0,text_size_locked:!0,state_size_locked:!0,active_icon_locked:!0,active_icon_color_locked:!1,active_icon_background_locked:!0,active_icon_background_color_locked:!0,active_name_locked:!0,active_name_color_locked:!0,active_state_locked:!1,active_state_color_locked:!0,inactive_icon_animation:"none",active_icon_animation:"none",show_units:!0,vertical_alignment:"center",container_width:void 0,container_background_shape:"none",container_background_color:"#808080",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},click_action:"toggle",double_click_action:"none",hold_action_legacy:"none",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:""};t({icons:[...e.icons,i]})}_removeIcon(e,t,i){e.icons.length<=1||i({icons:e.icons.filter(((e,i)=>i!==t))})}_updateIcon(e,t,i,o){o({icons:e.icons.map(((e,o)=>o===t?Object.assign(Object.assign({},e),i):e))})}_debouncedUpdateIcon(e,t,i,o,n=100){this._updateTimeout&&clearTimeout(this._updateTimeout),this._updateTimeout=setTimeout((()=>{this._updateIcon(e,t,i,o)}),n)}_triggerPreviewUpdate(){this._attributeCache.clear(),"undefined"!=typeof window&&(window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window.dispatchEvent(new CustomEvent("ultra-card-preview-update")),window.dispatchEvent(new CustomEvent("ultra-card-state-changed")));try{this.requestUpdate&&this.requestUpdate()}catch(e){}}_updateIconWithLockSync(e,t,i,o,n){const a=e.icons[t],r={[i]:o},s={icon_inactive:{active:"icon_active",lock:"active_icon_locked"},inactive_icon_size:{active:"active_icon_size",lock:"icon_size_locked"},inactive_text_size:{active:"active_text_size",lock:"text_size_locked"},inactive_state_size:{active:"active_state_size",lock:"state_size_locked"},inactive_icon_color:{active:"active_icon_color",lock:"active_icon_color_locked"},inactive_name_color:{active:"active_name_color",lock:"active_name_color_locked"},inactive_state_color:{active:"active_state_color",lock:"active_state_color_locked"},inactive_icon_background:{active:"active_icon_background",lock:"active_icon_background_locked"},inactive_icon_background_color:{active:"active_icon_background_color",lock:"active_icon_background_color_locked"},use_state_color_for_inactive_icon:{active:"use_state_color_for_active_icon",lock:"active_state_color_locked"}}[i];s&&!1!==a[s.lock]&&(r[s.active]=o),this._updateIcon(e,t,r,n)}_debouncedUpdateIconWithLockSync(e,t,i,o,n,a=50){this._updateTimeout&&clearTimeout(this._updateTimeout),this._updateTimeout=setTimeout((()=>{this._updateIconWithLockSync(e,t,i,o,n)}),a)}getBackgroundImageCSS(e,t){var i,o;const n=e.background_image_type,a=e.background_image,r=e.background_image_entity;if(!n||"none"===n)return"none";switch(n){case"upload":if(a)return`url("${(0,p.V)(t,a)}")`;break;case"url":if(a)return`url("${a}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const n=(null===(i=e.attributes)||void 0===i?void 0:i.entity_picture)||(null===(o=e.attributes)||void 0===o?void 0:o.image)||("string"==typeof e.state?e.state:"");if(n&&"unknown"!==n&&"unavailable"!==n)return`url("${(0,p.V)(t,n)}")`}}}return"none"}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_renderSizeControl(e,t,i,n,a,r,s,l){return o.qy`
      <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
        <input
          type="range"
          class="gap-slider"
          min="${r}"
          max="${s}"
          step="1"
          .value="${a}"
          @input=${o=>{const a=o.target,r=Number(a.value);this._updateIconWithLockSync(e,t,n,r,i)}}
        />
        <input
          type="number"
          class="gap-input"
          min="${r}"
          max="${s}"
          step="1"
          .value="${a}"
          @input=${o=>{const a=o.target,l=Number(a.value);!isNaN(l)&&l>=r&&l<=s&&this._updateIconWithLockSync(e,t,n,l,i)}}
          @keydown=${o=>{if("ArrowUp"===o.key||"ArrowDown"===o.key){o.preventDefault();const a=o.target,d=Number(a.value)||l,c="ArrowUp"===o.key?1:-1,p=Math.max(r,Math.min(s,d+c));this._updateIconWithLockSync(e,t,n,p,i)}}}
        />
        <button
          class="reset-btn"
          @click=${()=>{this._updateIconWithLockSync(e,t,n,l,i)}}
          title="Reset to default (${l})"
        >
          <ha-icon icon="mdi:refresh"></ha-icon>
        </button>
      </div>
    `}_renderFieldWithLock(e,t,i,n,a,r,s,l,d,c){const p=e.icons[t],u=!1!==p[n],h=u&&p[r]||s;return o.qy`
      <div style="display: flex; align-items: center; gap: 12px;">
        <div style="flex: 1;">
          ${"icon"===l?o.qy`
                <div
                  style="opacity: ${u?"0.5":"1"}; pointer-events: ${u?"none":"auto"};"
                >
                  ${this.renderUcForm(d,{[a]:h},[this.iconField(a)],(o=>{u||this._updateIcon(e,t,{[a]:o.detail.value[a]},i)}),!1)}
                </div>
              `:"color"===l?o.qy`
                  <ultra-color-picker
                    .value=${h}
                    .disabled=${u}
                    @value-changed=${o=>{u||this._updateIcon(e,t,{[a]:o.detail.value},i)}}
                  ></ultra-color-picker>
                `:"select"===l?o.qy`
                    <div
                      style="opacity: ${u?"0.5":"1"}; pointer-events: ${u?"none":"auto"};"
                    >
                      ${this.renderUcForm(d,{[a]:h},[this.selectField(a,c||[])],(o=>{const n=o.detail.value[a];n!==p[a]&&this._updateIcon(e,t,{[a]:n},i)}),!1)}
                    </div>
                  `:"toggle"===l?o.qy`
                      <ha-switch
                        .checked=${h}
                        .disabled=${u}
                        @change=${o=>{if(!u){const n=o.target;this._updateIcon(e,t,{[a]:n.checked},i)}}}
                      ></ha-switch>
                    `:o.qy`
                      <div
                        style="opacity: ${u?"0.5":"1"}; pointer-events: ${u?"none":"auto"};"
                      >
                        ${this.renderUcForm(d,{[a]:h},[this.textField(a)],(o=>{const n=o.detail.value[a];n!==p[a]&&this._updateIcon(e,t,{[a]:n},i)}),!1)}
                      </div>
                    `}
        </div>
        <button
          class="lock-btn ${u?"locked":"unlocked"}"
          @click=${()=>{const o=!u,s={[n]:o};o&&(s[a]=p[r]),this._updateIcon(e,t,s,i)}}
          title="${u?"Unlock to customize this field independently":"Lock to inherit from inactive state"}"
        >
          <ha-icon icon="${u?"mdi:lock":"mdi:lock-open"}"></ha-icon>
        </button>
      </div>
    `}_renderSizeControlWithLock(e,t,i,n,a,r,s,l,d,c){const p=e.icons[t],u=`${n}_locked`,h=!1!==p[u],g=h?p[r]||c:s;return o.qy`
      <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
        <input
          type="range"
          class="gap-slider"
          min="${l}"
          max="${d}"
          step="1"
          .value="${g}"
          .disabled=${h}
          @input=${o=>{if(!h){const n=o.target,r=Number(n.value);this._updateIcon(e,t,{[a]:r},i)}}}
        />
        <input
          type="number"
          class="gap-input"
          min="${l}"
          max="${d}"
          step="1"
          .value="${g}"
          .disabled=${h}
          @input=${o=>{if(!h){const n=o.target,r=Number(n.value);!isNaN(r)&&r>=l&&r<=d&&this._updateIcon(e,t,{[a]:r},i)}}}
          @keydown=${o=>{if(!h&&("ArrowUp"===o.key||"ArrowDown"===o.key)){o.preventDefault();const n=o.target,r=Number(n.value)||c,s="ArrowUp"===o.key?1:-1,p=Math.max(l,Math.min(d,r+s));this._updateIcon(e,t,{[a]:p},i)}}}
        />
        <button
          class="reset-btn"
          @click=${()=>{h||this._updateIcon(e,t,{[a]:c},i)}}
          title="Reset to default (${c})"
          .disabled=${h}
        >
          <ha-icon icon="mdi:refresh"></ha-icon>
        </button>
        <button
          class="lock-btn ${h?"locked":"unlocked"}"
          @click=${()=>{const o=!h,n={[u]:o};o&&(n[a]=p[r]||c),this._updateIcon(e,t,n,i)}}
          title="${h?"Unlock to set different sizes for active/inactive":"Lock to use same size for both states"}"
        >
          <ha-icon icon="${h?"mdi:lock":"mdi:lock-open"}"></ha-icon>
        </button>
      </div>
    `}_updateIconAnimationClasses(e,t,i){[document,document.body,this.shadowRoot,this.renderRoot,...Array.from(document.querySelectorAll("*")).filter((e=>e.shadowRoot)).map((e=>e.shadowRoot))].filter(Boolean).forEach(((e,i)=>{try{e.querySelectorAll("ha-icon").forEach((e=>{if((e.getAttribute("data-animation-debug")||"")!==t)return;const i=e.className.split(" ").filter((e=>!e.startsWith("icon-animation-")));t&&!t.includes("none")&&i.push(t),e.className=i.join(" ");const o=t.replace("icon-animation-","");if(o&&"none"!==o){const t="icon"+o.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),i=o.includes("spin")||o.includes("rotate")?"2s linear infinite":"1s ease-in-out infinite";e.style.animation=`${t} ${i}`}else e.style.animation="";this._injectKeyframesIntoHaIcon(e),e.offsetHeight}))}catch(e){}}))}_getInlineAnimation(e){const t=e.replace("icon-animation-","");return t&&"none"!==t?`${"icon"+t.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("")} ${t.includes("spin")||t.includes("rotate")?"2s linear infinite":"bounce"===t?"1s ease-in-out infinite":"shake"===t?"0.5s ease-in-out infinite":"vibrate"===t?"0.3s ease-in-out infinite":"2s ease-in-out infinite"}`:""}_applyAnimationDirectly(e,t){const i=t.replace("icon-animation-","");if(!i||"none"===i)return;const o="icon"+i.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),n=i.includes("spin")||i.includes("rotate")?"2s linear infinite":"2s ease-in-out infinite";e.style.animation=`${o} ${n}`,this._injectKeyframesIntoHaIcon(e)}_injectKeyframesForAllSplitPreviewIcons(){const e=(t=1)=>{const i=document.querySelectorAll('ha-icon[data-animation-debug]:not([data-animation-debug="none"])'),o=[...Array.from(document.querySelectorAll("*")).filter((e=>e.shadowRoot)).map((e=>e.shadowRoot))],n=Array.from(i);o.forEach((e=>{e.querySelectorAll('ha-icon[data-animation-debug]:not([data-animation-debug="none"])').forEach((e=>n.push(e)))}));let a=0;n.forEach((e=>{this._injectKeyframesIntoHaIcon(e),a++})),0===a&&t<10&&setTimeout((()=>e(t+1)),150)};e()}_formatValueWithUnits(e,t,i,o){var n;return t&&(null===(n=null==o?void 0:o.states)||void 0===n?void 0:n[t])?(0,a.formatEntityState)(o,t,{state:e,includeUnit:!1!==i.show_units}):e}_getEntityStateColor(e){if(!e||!e.attributes)return null;if(e.attributes.rgb_color&&Array.isArray(e.attributes.rgb_color))return`rgb(${e.attributes.rgb_color.join(",")})`;if(e.attributes.hs_color&&Array.isArray(e.attributes.hs_color)){const[t,i]=e.attributes.hs_color;return`rgb(${this._hsToRgb(t/360,i/100,1).join(",")})`}if(e.attributes.color_name)return e.attributes.color_name;if(e.attributes.color&&"string"==typeof e.attributes.color)return e.attributes.color;if(e.entity_id){const t=e.entity_id.split(".")[0];if("binary_sensor"===t||"switch"===t)return"on"===e.state?"#4CAF50":"#F44336"}return null}_hsToRgb(e,t,i){let o,n,a;const r=Math.floor(6*e),s=6*e-r,l=i*(1-t),d=i*(1-s*t),c=i*(1-(1-s)*t);switch(r%6){case 0:o=i,n=c,a=l;break;case 1:o=d,n=i,a=l;break;case 2:o=l,n=i,a=c;break;case 3:o=l,n=d,a=i;break;case 4:o=c,n=l,a=i;break;case 5:o=i,n=l,a=d;break;default:o=n=a=0}return[Math.round(255*o),Math.round(255*n),Math.round(255*a)]}_getEntityPicture(e,t){var i,o;if(!e||!t)return null;if(!e.entity_id)return null;const n=null===(i=e.attributes)||void 0===i?void 0:i.entity_picture;if(n)return n.startsWith("/")?`${(t.hassUrl?t.hassUrl():"").replace(/\/$/,"")}${n}`:n;const a=["image","picture","thumbnail","avatar","photo","icon_url","image_url"];for(const i of a){const n=null===(o=e.attributes)||void 0===o?void 0:o[i];if(n&&"string"==typeof n)return n.startsWith("/")?`${(t.hassUrl?t.hassUrl():"").replace(/\/$/,"")}${n}`:n}return null}_shouldUseEntityPicture(e){var t;return!!e&&(!!e.entity_id&&(!!(null===(t=e.attributes)||void 0===t?void 0:t.entity_picture)||["image","picture","thumbnail","avatar","photo","icon_url","image_url"].some((t=>{var i;return(null===(i=e.attributes)||void 0===i?void 0:i[t])&&"string"==typeof e.attributes[t]&&""!==e.attributes[t].trim()}))))}_injectKeyframesIntoHaIcon(e){const t=e.shadowRoot;if(!t)return;const i=t.querySelector("style[data-uvc-keyframes]");i&&i.remove();try{const e=document.createElement("style");if(e.setAttribute("data-uvc-keyframes",""),e.textContent=g._ANIMATION_KEYFRAMES,t.appendChild(e),!document.head.querySelector("style[data-uvc-global-keyframes]")){const e=document.createElement("style");e.setAttribute("data-uvc-global-keyframes",""),e.textContent=g._ANIMATION_KEYFRAMES,document.head.appendChild(e)}}catch(e){console.error("❌ Error injecting keyframes:",e)}}}g._globalStylesInjected=!1,g._ANIMATION_KEYFRAMES="\n    @keyframes iconPulse {0%,100%{opacity:1;transform:scale(1);}50%{opacity:0.7;transform:scale(1.1);}}\n    @keyframes iconSpin {from{transform:rotate(0deg);}to{transform:rotate(360deg);}}\n    @keyframes iconBounce {0%,20%,50%,80%,100%{transform:translateY(0);}40%{transform:translateY(-10px);}60%{transform:translateY(-5px);}}\n    @keyframes iconFlash {0%,50%,100%{opacity:1;}25%,75%{opacity:0.3;}}\n    @keyframes iconShake {0%,100%{transform:translateX(0);}10%,30%,50%,70%,90%{transform:translateX(-2px);}20%,40%,60%,80%{transform:translateX(2px);}}\n    @keyframes iconVibrate {0%,100%{transform:translate(0);}10%{transform:translate(-1px,-1px);}20%{transform:translate(1px,-1px);}30%{transform:translate(-1px,1px);}40%{transform:translate(1px,1px);}50%{transform:translate(-1px,-1px);}60%{transform:translate(1px,-1px);}70%{transform:translate(-1px,1px);}80%{transform:translate(1px,1px);}90%{transform:translate(-1px,-1px);}}\n    @keyframes iconRotateLeft {from{transform:rotate(0deg);}to{transform:rotate(-360deg);}}\n    @keyframes iconRotateRight {from{transform:rotate(0deg);}to{transform:rotate(360deg);}}\n    @keyframes iconFade {0%,100%{opacity:1;}50%{opacity:0.3;}}\n    @keyframes iconScale {0%,100%{transform:scale(1);}50%{transform:scale(1.2);}}\n    @keyframes iconTada {0%{transform:scale(1);}10%,20%{transform:scale(0.9) rotate(-3deg);}30%,50%,70%,90%{transform:scale(1.1) rotate(3deg);}40%,60%,80%{transform:scale(1.1) rotate(-3deg);}100%{transform:scale(1) rotate(0);}}\n  "},1867:(e,t,i)=>{i.d(t,{p:()=>s});var o=i(5183),n=i(866),a=(i(6768),i(456)),r=i(3220);class s extends n.m{constructor(){super(...arguments),this.metadata={type:"animated_forecast",title:"Animated Forecast (PRO)",description:"Multi-day weather forecast with animated icons",author:"WJD Designs",version:"1.0.0",icon:"mdi:weather-cloudy",category:"content",tags:["weather","forecast","pro","premium","animated"]}}createDefault(e,t){const i=this._findWeatherEntity(t);return{id:e||this.generateId("animated_forecast"),type:"animated_forecast",weather_entity:i,forecast_entity:"",forecast_days:5,forecast_day_size:14,forecast_temp_size:14,forecast_icon_size:48,icon_style:"fill",text_color:"var(--primary-text-color)",accent_color:"var(--primary-color)",forecast_day_color:"var(--primary-text-color)",forecast_temp_color:"var(--primary-text-color)",forecast_background:"rgba(var(--rgb-primary-text-color), 0.05)",tap_action:void 0,hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}_findWeatherEntity(e){if(!e)return"";const t=Object.keys(e.states).filter((e=>e.startsWith("weather.")));return t.length>0?t[0]:""}renderGeneralTab(e,t,i,n){return function(e,t,i,n,r){var s;const l=t,d=(null===(s=i.locale)||void 0===s?void 0:s.language)||"en";return o.qy`
    ${e.injectUcFormStyles()}
    <div class="module-general-settings">
      <!-- ============================================ -->
      <!-- ENTITY CONFIGURATION SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          ${(0,a.kg)("editor.animated_forecast.entities.title",d,"⚙️ Forecast Entities")}
        </div>

        <!-- Weather Entity -->
        <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
          ${(0,a.kg)("editor.animated_forecast.weather_entity",d,"Weather Entity")}
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          ${(0,a.kg)("editor.animated_forecast.weather_entity_desc",d,"Primary weather.* entity with forecast data")}
        </div>
        ${e.renderUcForm(i,{weather_entity:l.weather_entity||""},[e.entityField("weather_entity",["weather"])],(e=>r(e.detail.value)),!1)}

        <!-- Forecast Entity (Optional) -->
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
        >
          ${(0,a.kg)("editor.animated_forecast.forecast_entity",d,"Forecast Entity (Optional)")}
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          ${(0,a.kg)("editor.animated_forecast.forecast_entity_desc",d,"Separate forecast entity if available")}
        </div>
        ${e.renderUcForm(i,{forecast_entity:l.forecast_entity||""},[e.entityField("forecast_entity")],(e=>r(e.detail.value)),!1)}
      </div>

      <!-- ============================================ -->
      <!-- CONFIGURATION SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          ${(0,a.kg)("editor.animated_forecast.config.title",d,"⚙️ Forecast Configuration")}
        </div>

        <!-- Forecast Days -->
        <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
          ${(0,a.kg)("editor.animated_forecast.forecast_days",d,"Forecast Days")}
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          ${(0,a.kg)("editor.animated_forecast.forecast_days_desc",d,"Number of forecast days (3-7)")}
        </div>
        ${e.renderUcForm(i,{forecast_days:l.forecast_days||5},[e.numberField("forecast_days",3,7,1)],(e=>r(e.detail.value)),!1)}
      </div>

      <!-- ============================================ -->
      <!-- TEXT SIZES SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          ${(0,a.kg)("editor.animated_forecast.text_sizes.title",d,"📏 Text Sizes")}
        </div>

        <div
          style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 24px;"
        >
          <!-- Forecast Day Size -->
          <div>
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              ${(0,a.kg)("editor.animated_forecast.forecast_day_size",d,"Forecast Day Name Size")}
            </div>
            <div
              class="field-description"
              style="font-size: 12px; opacity: 0.7; margin-bottom: 8px;"
            >
              10-24px
            </div>
            ${e.renderUcForm(i,{forecast_day_size:l.forecast_day_size||14},[e.numberField("forecast_day_size",10,24,1)],(e=>r(e.detail.value)),!1)}
          </div>

          <!-- Forecast Temp Size -->
          <div>
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 4px;">
              ${(0,a.kg)("editor.animated_forecast.forecast_temp_size",d,"Forecast Temp Size")}
            </div>
            <div
              class="field-description"
              style="font-size: 12px; opacity: 0.7; margin-bottom: 8px;"
            >
              10-24px
            </div>
            ${e.renderUcForm(i,{forecast_temp_size:l.forecast_temp_size||14},[e.numberField("forecast_temp_size",10,24,1)],(e=>r(e.detail.value)),!1)}
          </div>
        </div>
      </div>

      <!-- ============================================ -->
      <!-- ICON SETTINGS SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          ${(0,a.kg)("editor.animated_forecast.icon_settings.title",d,"🎨 Icon Settings")}
        </div>

        <!-- Forecast Icon Size -->
        <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
          ${(0,a.kg)("editor.animated_forecast.forecast_icon_size",d,"Forecast Icon Size")}
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          ${(0,a.kg)("editor.animated_forecast.forecast_icon_size_desc",d,"Size of forecast weather icons (32-80px)")}
        </div>
        ${e.renderUcForm(i,{forecast_icon_size:l.forecast_icon_size||48},[e.numberField("forecast_icon_size",32,80,4)],(e=>r(e.detail.value)),!1)}

        <!-- Icon Style -->
        <div
          class="field-title"
          style="font-size: 16px; font-weight: 600; margin-bottom: 4px; margin-top: 24px;"
        >
          ${(0,a.kg)("editor.animated_forecast.icon_style",d,"Icon Style")}
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          ${(0,a.kg)("editor.animated_forecast.icon_style_desc",d,"Choose between filled or outlined animated icons")}
        </div>
        ${e.renderUcForm(i,{icon_style:l.icon_style||"fill"},[e.selectField("icon_style",[{value:"fill",label:"Filled"},{value:"line",label:"Outlined"}])],(t=>{t.detail.value.icon_style!==l.icon_style&&(r(t.detail.value),setTimeout((()=>e.triggerPreviewUpdate()),50))}),!1)}
      </div>

      <!-- ============================================ -->
      <!-- COLORS SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          ${(0,a.kg)("editor.animated_forecast.colors.title",d,"🎨 Colors")}
        </div>

        <div
          style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 24px;"
        >
          <!-- Forecast Day Color -->
          <div>
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">
              ${(0,a.kg)("editor.animated_forecast.forecast_day_color",d,"Forecast Day Names")}
            </div>
            <ultra-color-picker
              .value="${l.forecast_day_color||"var(--primary-text-color)"}"
              .hass="${i}"
              @value-changed=${t=>{r({forecast_day_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
            ></ultra-color-picker>
          </div>

          <!-- Forecast Temp Color -->
          <div>
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">
              ${(0,a.kg)("editor.animated_forecast.forecast_temp_color",d,"Forecast Temps")}
            </div>
            <ultra-color-picker
              .value="${l.forecast_temp_color||"var(--primary-text-color)"}"
              .hass="${i}"
              @value-changed=${t=>{r({forecast_temp_color:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
            ></ultra-color-picker>
          </div>
        </div>
      </div>

      <!-- ============================================ -->
      <!-- BACKGROUND SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
        >
          ${(0,a.kg)("editor.animated_forecast.background.title",d,"🎨 Background")}
        </div>

        <!-- Forecast Background -->
        <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
          ${(0,a.kg)("editor.animated_forecast.forecast_background",d,"Forecast Background")}
        </div>
        <div class="field-description" style="font-size: 13px; opacity: 0.7; margin-bottom: 12px;">
          ${(0,a.kg)("editor.animated_forecast.forecast_background_desc",d,"Background for the forecast section (theme-aware by default)")}
        </div>
        <ultra-color-picker
          .value="${l.forecast_background||"rgba(var(--rgb-primary-text-color), 0.05)"}"
          .hass="${i}"
          @value-changed=${t=>{r({forecast_background:t.detail.value}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}
        ></ultra-color-picker>
      </div>
    </div>
  `}(this,e,t,0,n)}renderPreview(e,t,i,n){const a=e,s=this._getWeatherData(t,a),l=a.icon_style||"fill",d=!1!==a.smart_scaling,c=(0,r.jY)(d);return s.temperatureUnit,o.qy`
      <style>
        ${this.getStyles()}
      </style>
      <div
        class="animated-forecast-module-container"
        style="
          --forecast-days: ${a.forecast_days||5};
          --forecast-day-size: ${a.forecast_day_size||14}px;
          --forecast-temp-size: ${a.forecast_temp_size||14}px;
          --forecast-icon-size: ${a.forecast_icon_size||48}px;
          --forecast-day-color: ${a.forecast_day_color||"var(--primary-text-color)"};
          --forecast-temp-color: ${a.forecast_temp_color||"var(--primary-text-color)"};
          --forecast-background: ${a.forecast_background||"rgba(var(--rgb-primary-text-color), 0.05)"};
          overflow: ${c.overflow};
          max-width: ${c.maxWidth};
          box-sizing: ${c.boxSizing};
        "
      >
        <div class="weather-forecast">
          ${s.forecast&&s.forecast.length>0?s.forecast.slice(0,a.forecast_days||5).map((e=>{var i,n;const a=new Date(e.datetime).toLocaleDateString((null===(i=t.locale)||void 0===i?void 0:i.language)||"en",{weekday:"short"}),r=Math.round(e.temperature),s=Math.round(null!==(n=e.templow)&&void 0!==n?n:e.temperature-10);return o.qy`
                  <div class="forecast-day">
                    <div class="forecast-day-name">${a}</div>
                    <img
                      src="${this._getWeatherIcon(e.condition,l)}"
                      alt="${e.condition}"
                      class="forecast-icon meteocon-icon"
                    />
                    <div class="forecast-temps">
                      <span class="forecast-high">${r}°</span>
                      <span class="forecast-low">${s}°</span>
                    </div>
                  </div>
                `})):o.qy`<div style="text-align: center; opacity: 0.6; padding: 16px;">
                No forecast data available
              </div>`}
        </div>
      </div>
    `}_getWeatherData(e,t){var i,o,n,a,r,s;const l=e.states[t.weather_entity||""];let d=(null===(i=null==l?void 0:l.attributes)||void 0===i?void 0:i.forecast)||[];if(0===d.length&&t.forecast_entity){const i=e.states[t.forecast_entity];d=(null===(o=null==i?void 0:i.attributes)||void 0===o?void 0:o.forecast)||[]}return 0===d.length&&l&&(d=(null===(n=l.attributes)||void 0===n?void 0:n.forecast_daily)||(null===(a=l.attributes)||void 0===a?void 0:a.daily)||(null===(r=l.attributes)||void 0===r?void 0:r.forecasts)||[]),0===d.length&&t.weather_entity&&(null==e?void 0:e.callWS)&&this._fetchForecastData(e,t),{forecast:d,temperatureUnit:(null===(s=null==l?void 0:l.attributes)||void 0===s?void 0:s.temperature_unit)||"°F"}}async _fetchForecastData(e,t){var i,o;if(t.weather_entity&&(null==e?void 0:e.callWS))try{const n=await e.callWS({type:"call_service",domain:"weather",service:"get_forecasts",service_data:{type:"daily"},target:{entity_id:t.weather_entity},return_response:!0}),a=null===(o=null===(i=null==n?void 0:n.response)||void 0===i?void 0:i[t.weather_entity])||void 0===o?void 0:o.forecast;if(a&&Array.isArray(a)&&a.length>0){const i=e.states[t.weather_entity];i&&i.attributes&&(i.attributes.forecast=a),setTimeout((()=>this.triggerPreviewUpdate()),100)}}catch(e){console.debug("Ultra Card Forecast: Could not fetch forecast via service:",e)}}_getWeatherIcon(e,t="fill"){return`https://cdn.jsdelivr.net/gh/basmilius/weather-icons@dev/production/${t}/svg/${{"clear-night":"clear-night","clear-day":"clear-day",cloudy:"cloudy",exceptional:"not-available",fog:"fog",hail:"hail",lightning:"thunderstorms","lightning-rainy":"thunderstorms-rain",partlycloudy:"partly-cloudy-day","partly-cloudy-night":"partly-cloudy-night",pouring:"extreme-rain",rainy:"rain",snowy:"snow","snowy-rainy":"sleet",sunny:"clear-day",windy:"wind","windy-variant":"extreme-wind"}[e]||"partly-cloudy-day"}.svg`}getStyles(){return"\n      .animated-forecast-module-container {\n        padding: clamp(12px, 2.5%, 20px) clamp(12px, 2%, 16px);\n        width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* ========== FORECAST ========== */\n      .weather-forecast {\n        display: grid;\n        grid-template-columns: repeat(var(--forecast-days, 5), 1fr);\n        gap: 16px;\n        padding: 20px 16px 16px 16px;\n        background: var(--forecast-background);\n        border-radius: 12px;\n      }\n\n      .forecast-day {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .forecast-day-name {\n        font-size: var(--forecast-day-size);\n        font-weight: 600;\n        color: var(--forecast-day-color);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .forecast-icon {\n        width: var(--forecast-icon-size);\n        height: var(--forecast-icon-size);\n      }\n\n      .meteocon-icon {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n      }\n\n      .forecast-temps {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 2px;\n        font-size: var(--forecast-temp-size);\n        color: var(--forecast-temp-color);\n      }\n\n      .forecast-high {\n        font-weight: 600;\n      }\n\n      .forecast-low {\n        opacity: 0.7;\n      }\n\n      /* ========== RESPONSIVE ========== */\n      @media (max-width: 768px) {\n        .weather-forecast {\n          gap: clamp(10px, 2%, 12px);\n        }\n\n        .forecast-icon {\n          width: min(var(--forecast-icon-size), calc(100vw / var(--forecast-days, 5) - 40px));\n          height: min(var(--forecast-icon-size), calc(100vw / var(--forecast-days, 5) - 40px));\n        }\n      }\n\n      @media (max-width: 480px) {\n        .animated-forecast-module-container {\n          padding: clamp(12px, 3%, 16px);\n        }\n\n        .weather-forecast {\n          gap: clamp(6px, 1.5%, 8px);\n        }\n\n        .forecast-day-name {\n          font-size: min(var(--forecast-day-size), 12px);\n        }\n\n        .forecast-temps {\n          font-size: min(var(--forecast-temp-size), 12px);\n        }\n\n        .forecast-icon {\n          width: min(var(--forecast-icon-size), calc(100vw / var(--forecast-days, 5) - 30px));\n          height: min(var(--forecast-icon-size), calc(100vw / var(--forecast-days, 5) - 30px));\n        }\n      }\n    "}validate(e){const t=[],i=e;return i.weather_entity||t.push("Weather entity is required for forecast data"),i.forecast_days&&(i.forecast_days<3||i.forecast_days>7)&&t.push("Forecast days must be between 3 and 7"),{valid:0===t.length,errors:t}}}},1986:(e,t,i)=>{i.r(t),i.d(t,{UltraExternalCardModule:()=>gt,cleanupExternalCardCache:()=>ht,invalidateExternalCardCache:()=>ut});var o=i(5183),n=i(866),a=i(8525),r=i(5728),s=i(8460),l=i(8791);function d(e){return null==e}var c={isNothing:d,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:d(e)?[]:[e]},repeat:function(e,t){var i,o="";for(i=0;i<t;i+=1)o+=e;return o},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var i,o,n,a;if(t)for(i=0,o=(a=Object.keys(t)).length;i<o;i+=1)e[n=a[i]]=t[n];return e}};function p(e,t){var i="",o=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(i+="\n\n"+e.mark.snippet),o+" "+i):o}function u(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=p(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.toString=function(e){return this.name+": "+p(this,e)};var h=u;function g(e,t,i,o,n){var a="",r="",s=Math.floor(n/2)-1;return o-t>s&&(t=o-s+(a=" ... ").length),i-o>s&&(i=o+s-(r=" ...").length),{str:a+e.slice(t,i).replace(/\t/g,"→")+r,pos:o-t+a.length}}function m(e,t){return c.repeat(" ",t-e.length)+e}var f=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],_=["scalar","sequence","mapping"],v=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===f.indexOf(t))throw new h('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(i){e[i].forEach((function(e){t[String(e)]=i}))})),t}(t.styleAliases||null),-1===_.indexOf(this.kind))throw new h('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function b(e,t){var i=[];return e[t].forEach((function(e){var t=i.length;i.forEach((function(i,o){i.tag===e.tag&&i.kind===e.kind&&i.multi===e.multi&&(t=o)})),i[t]=e})),i}function y(e){return this.extend(e)}y.prototype.extend=function(e){var t=[],i=[];if(e instanceof v)i.push(e);else if(Array.isArray(e))i=i.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new h("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof v))throw new h("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new h("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new h("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),i.forEach((function(e){if(!(e instanceof v))throw new h("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var o=Object.create(y.prototype);return o.implicit=(this.implicit||[]).concat(t),o.explicit=(this.explicit||[]).concat(i),o.compiledImplicit=b(o,"implicit"),o.compiledExplicit=b(o,"explicit"),o.compiledTypeMap=function(){var e,t,i={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function o(e){e.multi?(i.multi[e.kind].push(e),i.multi.fallback.push(e)):i[e.kind][e.tag]=i.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(o);return i}(o.compiledImplicit,o.compiledExplicit),o};var x=y,k=new v("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),w=new v("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),S=new v("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),O=new x({explicit:[k,w,S]}),A=new v("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),C=new v("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function $(e){return 48<=e&&e<=55}function T(e){return 48<=e&&e<=57}var z=new v("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,i,o=e.length,n=0,a=!1;if(!o)return!1;if("-"!==(t=e[n])&&"+"!==t||(t=e[++n]),"0"===t){if(n+1===o)return!0;if("b"===(t=e[++n])){for(n++;n<o;n++)if("_"!==(t=e[n])){if("0"!==t&&"1"!==t)return!1;a=!0}return a&&"_"!==t}if("x"===t){for(n++;n<o;n++)if("_"!==(t=e[n])){if(!(48<=(i=e.charCodeAt(n))&&i<=57||65<=i&&i<=70||97<=i&&i<=102))return!1;a=!0}return a&&"_"!==t}if("o"===t){for(n++;n<o;n++)if("_"!==(t=e[n])){if(!$(e.charCodeAt(n)))return!1;a=!0}return a&&"_"!==t}}if("_"===t)return!1;for(;n<o;n++)if("_"!==(t=e[n])){if(!T(e.charCodeAt(n)))return!1;a=!0}return!(!a||"_"===t)},construct:function(e){var t,i=e,o=1;if(-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),"-"!==(t=i[0])&&"+"!==t||("-"===t&&(o=-1),t=(i=i.slice(1))[0]),"0"===i)return 0;if("0"===t){if("b"===i[1])return o*parseInt(i.slice(2),2);if("x"===i[1])return o*parseInt(i.slice(2),16);if("o"===i[1])return o*parseInt(i.slice(2),8)}return o*parseInt(i,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!c.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),P=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),E=/^[-+]?[0-9]+e/,I=new v("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!P.test(e)||"_"===e[e.length-1])},construct:function(e){var t,i;return i="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===i?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:i*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||c.isNegativeZero(e))},represent:function(e,t){var i;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(c.isNegativeZero(e))return"-0.0";return i=e.toString(10),E.test(i)?i.replace("e",".e"):i},defaultStyle:"lowercase"}),j=O.extend({implicit:[A,C,z,I]}),M=j,D=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),B=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),R=new v("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==D.exec(e)||null!==B.exec(e))},construct:function(e){var t,i,o,n,a,r,s,l,d=0,c=null;if(null===(t=D.exec(e))&&(t=B.exec(e)),null===t)throw new Error("Date resolve error");if(i=+t[1],o=+t[2]-1,n=+t[3],!t[4])return new Date(Date.UTC(i,o,n));if(a=+t[4],r=+t[5],s=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(c=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(c=-c)),l=new Date(Date.UTC(i,o,n,a,r,s,d)),c&&l.setTime(l.getTime()-c),l},instanceOf:Date,represent:function(e){return e.toISOString()}}),U=new v("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),H="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",J=new v("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,i,o=0,n=e.length,a=H;for(i=0;i<n;i++)if(!((t=a.indexOf(e.charAt(i)))>64)){if(t<0)return!1;o+=6}return o%8==0},construct:function(e){var t,i,o=e.replace(/[\r\n=]/g,""),n=o.length,a=H,r=0,s=[];for(t=0;t<n;t++)t%4==0&&t&&(s.push(r>>16&255),s.push(r>>8&255),s.push(255&r)),r=r<<6|a.indexOf(o.charAt(t));return 0==(i=n%4*6)?(s.push(r>>16&255),s.push(r>>8&255),s.push(255&r)):18===i?(s.push(r>>10&255),s.push(r>>2&255)):12===i&&s.push(r>>4&255),new Uint8Array(s)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,i,o="",n=0,a=e.length,r=H;for(t=0;t<a;t++)t%3==0&&t&&(o+=r[n>>18&63],o+=r[n>>12&63],o+=r[n>>6&63],o+=r[63&n]),n=(n<<8)+e[t];return 0==(i=a%3)?(o+=r[n>>18&63],o+=r[n>>12&63],o+=r[n>>6&63],o+=r[63&n]):2===i?(o+=r[n>>10&63],o+=r[n>>4&63],o+=r[n<<2&63],o+=r[64]):1===i&&(o+=r[n>>2&63],o+=r[n<<4&63],o+=r[64],o+=r[64]),o}}),Q=Object.prototype.hasOwnProperty,N=Object.prototype.toString,L=new v("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,i,o,n,a,r=[],s=e;for(t=0,i=s.length;t<i;t+=1){if(o=s[t],a=!1,"[object Object]"!==N.call(o))return!1;for(n in o)if(Q.call(o,n)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==r.indexOf(n))return!1;r.push(n)}return!0},construct:function(e){return null!==e?e:[]}}),F=Object.prototype.toString,q=new v("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,i,o,n,a,r=e;for(a=new Array(r.length),t=0,i=r.length;t<i;t+=1){if(o=r[t],"[object Object]"!==F.call(o))return!1;if(1!==(n=Object.keys(o)).length)return!1;a[t]=[n[0],o[n[0]]]}return!0},construct:function(e){if(null===e)return[];var t,i,o,n,a,r=e;for(a=new Array(r.length),t=0,i=r.length;t<i;t+=1)o=r[t],n=Object.keys(o),a[t]=[n[0],o[n[0]]];return a}}),V=Object.prototype.hasOwnProperty,K=new v("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,i=e;for(t in i)if(V.call(i,t)&&null!==i[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),G=M.extend({implicit:[R,U],explicit:[J,L,q,K]}),Z=Object.prototype.hasOwnProperty,Y=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,W=/[\x85\u2028\u2029]/,X=/[,\[\]\{\}]/,ee=/^(?:!|!!|![a-z\-]+!)$/i,te=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ie(e){return Object.prototype.toString.call(e)}function oe(e){return 10===e||13===e}function ne(e){return 9===e||32===e}function ae(e){return 9===e||32===e||10===e||13===e}function re(e){return 44===e||91===e||93===e||123===e||125===e}function se(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function le(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function de(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var ce=new Array(256),pe=new Array(256),ue=0;ue<256;ue++)ce[ue]=le(ue)?1:0,pe[ue]=le(ue);function he(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||G,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ge(e,t){var i={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return i.snippet=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var i,o=/\r?\n|\r|\0/g,n=[0],a=[],r=-1;i=o.exec(e.buffer);)a.push(i.index),n.push(i.index+i[0].length),e.position<=i.index&&r<0&&(r=n.length-2);r<0&&(r=n.length-1);var s,l,d="",p=Math.min(e.line+t.linesAfter,a.length).toString().length,u=t.maxLength-(t.indent+p+3);for(s=1;s<=t.linesBefore&&!(r-s<0);s++)l=g(e.buffer,n[r-s],a[r-s],e.position-(n[r]-n[r-s]),u),d=c.repeat(" ",t.indent)+m((e.line-s+1).toString(),p)+" | "+l.str+"\n"+d;for(l=g(e.buffer,n[r],a[r],e.position,u),d+=c.repeat(" ",t.indent)+m((e.line+1).toString(),p)+" | "+l.str+"\n",d+=c.repeat("-",t.indent+p+3+l.pos)+"^\n",s=1;s<=t.linesAfter&&!(r+s>=a.length);s++)l=g(e.buffer,n[r+s],a[r+s],e.position-(n[r]-n[r+s]),u),d+=c.repeat(" ",t.indent)+m((e.line+s+1).toString(),p)+" | "+l.str+"\n";return d.replace(/\n$/,"")}(i),new h(t,i)}function me(e,t){throw ge(e,t)}function fe(e,t){e.onWarning&&e.onWarning.call(null,ge(e,t))}var _e={YAML:function(e,t,i){var o,n,a;null!==e.version&&me(e,"duplication of %YAML directive"),1!==i.length&&me(e,"YAML directive accepts exactly one argument"),null===(o=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&me(e,"ill-formed argument of the YAML directive"),n=parseInt(o[1],10),a=parseInt(o[2],10),1!==n&&me(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=a<2,1!==a&&2!==a&&fe(e,"unsupported YAML version of the document")},TAG:function(e,t,i){var o,n;2!==i.length&&me(e,"TAG directive accepts exactly two arguments"),o=i[0],n=i[1],ee.test(o)||me(e,"ill-formed tag handle (first argument) of the TAG directive"),Z.call(e.tagMap,o)&&me(e,'there is a previously declared suffix for "'+o+'" tag handle'),te.test(n)||me(e,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch(t){me(e,"tag prefix is malformed: "+n)}e.tagMap[o]=n}};function ve(e,t,i,o){var n,a,r,s;if(t<i){if(s=e.input.slice(t,i),o)for(n=0,a=s.length;n<a;n+=1)9===(r=s.charCodeAt(n))||32<=r&&r<=1114111||me(e,"expected valid JSON character");else Y.test(s)&&me(e,"the stream contains non-printable characters");e.result+=s}}function be(e,t,i,o){var n,a,r,s;for(c.isObject(i)||me(e,"cannot merge mappings; the provided source object is unacceptable"),r=0,s=(n=Object.keys(i)).length;r<s;r+=1)a=n[r],Z.call(t,a)||(t[a]=i[a],o[a]=!0)}function ye(e,t,i,o,n,a,r,s,l){var d,c;if(Array.isArray(n))for(d=0,c=(n=Array.prototype.slice.call(n)).length;d<c;d+=1)Array.isArray(n[d])&&me(e,"nested arrays are not supported inside keys"),"object"==typeof n&&"[object Object]"===ie(n[d])&&(n[d]="[object Object]");if("object"==typeof n&&"[object Object]"===ie(n)&&(n="[object Object]"),n=String(n),null===t&&(t={}),"tag:yaml.org,2002:merge"===o)if(Array.isArray(a))for(d=0,c=a.length;d<c;d+=1)be(e,t,a[d],i);else be(e,t,a,i);else e.json||Z.call(i,n)||!Z.call(t,n)||(e.line=r||e.line,e.lineStart=s||e.lineStart,e.position=l||e.position,me(e,"duplicated mapping key")),"__proto__"===n?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:a}):t[n]=a,delete i[n];return t}function xe(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):me(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ke(e,t,i){for(var o=0,n=e.input.charCodeAt(e.position);0!==n;){for(;ne(n);)9===n&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),n=e.input.charCodeAt(++e.position);if(t&&35===n)do{n=e.input.charCodeAt(++e.position)}while(10!==n&&13!==n&&0!==n);if(!oe(n))break;for(xe(e),n=e.input.charCodeAt(e.position),o++,e.lineIndent=0;32===n;)e.lineIndent++,n=e.input.charCodeAt(++e.position)}return-1!==i&&0!==o&&e.lineIndent<i&&fe(e,"deficient indentation"),o}function we(e){var t,i=e.position;return!(45!==(t=e.input.charCodeAt(i))&&46!==t||t!==e.input.charCodeAt(i+1)||t!==e.input.charCodeAt(i+2)||(i+=3,0!==(t=e.input.charCodeAt(i))&&!ae(t)))}function Se(e,t){1===t?e.result+=" ":t>1&&(e.result+=c.repeat("\n",t-1))}function Oe(e,t){var i,o,n=e.tag,a=e.anchor,r=[],s=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),o=e.input.charCodeAt(e.position);0!==o&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,me(e,"tab characters must not be used in indentation")),45===o)&&ae(e.input.charCodeAt(e.position+1));)if(s=!0,e.position++,ke(e,!0,-1)&&e.lineIndent<=t)r.push(null),o=e.input.charCodeAt(e.position);else if(i=e.line,$e(e,t,3,!1,!0),r.push(e.result),ke(e,!0,-1),o=e.input.charCodeAt(e.position),(e.line===i||e.lineIndent>t)&&0!==o)me(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!s&&(e.tag=n,e.anchor=a,e.kind="sequence",e.result=r,!0)}function Ae(e){var t,i,o,n,a=!1,r=!1;if(33!==(n=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&me(e,"duplication of a tag property"),60===(n=e.input.charCodeAt(++e.position))?(a=!0,n=e.input.charCodeAt(++e.position)):33===n?(r=!0,i="!!",n=e.input.charCodeAt(++e.position)):i="!",t=e.position,a){do{n=e.input.charCodeAt(++e.position)}while(0!==n&&62!==n);e.position<e.length?(o=e.input.slice(t,e.position),n=e.input.charCodeAt(++e.position)):me(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==n&&!ae(n);)33===n&&(r?me(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),ee.test(i)||me(e,"named tag handle cannot contain such characters"),r=!0,t=e.position+1)),n=e.input.charCodeAt(++e.position);o=e.input.slice(t,e.position),X.test(o)&&me(e,"tag suffix cannot contain flow indicator characters")}o&&!te.test(o)&&me(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch(t){me(e,"tag name is malformed: "+o)}return a?e.tag=o:Z.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:"!"===i?e.tag="!"+o:"!!"===i?e.tag="tag:yaml.org,2002:"+o:me(e,'undeclared tag handle "'+i+'"'),!0}function Ce(e){var t,i;if(38!==(i=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&me(e,"duplication of an anchor property"),i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!ae(i)&&!re(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&me(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function $e(e,t,i,o,n){var a,r,s,l,d,p,u,h,g,m=1,f=!1,_=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,a=r=s=4===i||3===i,o&&ke(e,!0,-1)&&(f=!0,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)),1===m)for(;Ae(e)||Ce(e);)ke(e,!0,-1)?(f=!0,s=a,e.lineIndent>t?m=1:e.lineIndent===t?m=0:e.lineIndent<t&&(m=-1)):s=!1;if(s&&(s=f||n),1!==m&&4!==i||(h=1===i||2===i?t:t+1,g=e.position-e.lineStart,1===m?s&&(Oe(e,g)||function(e,t,i){var o,n,a,r,s,l,d,c=e.tag,p=e.anchor,u={},h=Object.create(null),g=null,m=null,f=null,_=!1,v=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=u),d=e.input.charCodeAt(e.position);0!==d;){if(_||-1===e.firstTabInLine||(e.position=e.firstTabInLine,me(e,"tab characters must not be used in indentation")),o=e.input.charCodeAt(e.position+1),a=e.line,63!==d&&58!==d||!ae(o)){if(r=e.line,s=e.lineStart,l=e.position,!$e(e,i,2,!1,!0))break;if(e.line===a){for(d=e.input.charCodeAt(e.position);ne(d);)d=e.input.charCodeAt(++e.position);if(58===d)ae(d=e.input.charCodeAt(++e.position))||me(e,"a whitespace character is expected after the key-value separator within a block mapping"),_&&(ye(e,u,h,g,m,null,r,s,l),g=m=f=null),v=!0,_=!1,n=!1,g=e.tag,m=e.result;else{if(!v)return e.tag=c,e.anchor=p,!0;me(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!v)return e.tag=c,e.anchor=p,!0;me(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===d?(_&&(ye(e,u,h,g,m,null,r,s,l),g=m=f=null),v=!0,_=!0,n=!0):_?(_=!1,n=!0):me(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,d=o;if((e.line===a||e.lineIndent>t)&&(_&&(r=e.line,s=e.lineStart,l=e.position),$e(e,t,4,!0,n)&&(_?m=e.result:f=e.result),_||(ye(e,u,h,g,m,f,r,s,l),g=m=f=null),ke(e,!0,-1),d=e.input.charCodeAt(e.position)),(e.line===a||e.lineIndent>t)&&0!==d)me(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return _&&ye(e,u,h,g,m,null,r,s,l),v&&(e.tag=c,e.anchor=p,e.kind="mapping",e.result=u),v}(e,g,h))||function(e,t){var i,o,n,a,r,s,l,d,c,p,u,h,g=!0,m=e.tag,f=e.anchor,_=Object.create(null);if(91===(h=e.input.charCodeAt(e.position)))r=93,d=!1,a=[];else{if(123!==h)return!1;r=125,d=!0,a={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=a),h=e.input.charCodeAt(++e.position);0!==h;){if(ke(e,!0,t),(h=e.input.charCodeAt(e.position))===r)return e.position++,e.tag=m,e.anchor=f,e.kind=d?"mapping":"sequence",e.result=a,!0;g?44===h&&me(e,"expected the node content, but found ','"):me(e,"missed comma between flow collection entries"),u=null,s=l=!1,63===h&&ae(e.input.charCodeAt(e.position+1))&&(s=l=!0,e.position++,ke(e,!0,t)),i=e.line,o=e.lineStart,n=e.position,$e(e,t,1,!1,!0),p=e.tag,c=e.result,ke(e,!0,t),h=e.input.charCodeAt(e.position),!l&&e.line!==i||58!==h||(s=!0,h=e.input.charCodeAt(++e.position),ke(e,!0,t),$e(e,t,1,!1,!0),u=e.result),d?ye(e,a,_,p,c,u,i,o,n):s?a.push(ye(e,null,_,p,c,u,i,o,n)):a.push(c),ke(e,!0,t),44===(h=e.input.charCodeAt(e.position))?(g=!0,h=e.input.charCodeAt(++e.position)):g=!1}me(e,"unexpected end of the stream within a flow collection")}(e,h)?_=!0:(r&&function(e,t){var i,o,n,a,r,s=1,l=!1,d=!1,p=t,u=0,h=!1;if(124===(a=e.input.charCodeAt(e.position)))o=!1;else{if(62!==a)return!1;o=!0}for(e.kind="scalar",e.result="";0!==a;)if(43===(a=e.input.charCodeAt(++e.position))||45===a)1===s?s=43===a?3:2:me(e,"repeat of a chomping mode identifier");else{if(!((n=48<=(r=a)&&r<=57?r-48:-1)>=0))break;0===n?me(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):d?me(e,"repeat of an indentation width identifier"):(p=t+n-1,d=!0)}if(ne(a)){do{a=e.input.charCodeAt(++e.position)}while(ne(a));if(35===a)do{a=e.input.charCodeAt(++e.position)}while(!oe(a)&&0!==a)}for(;0!==a;){for(xe(e),e.lineIndent=0,a=e.input.charCodeAt(e.position);(!d||e.lineIndent<p)&&32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);if(!d&&e.lineIndent>p&&(p=e.lineIndent),oe(a))u++;else{if(e.lineIndent<p){3===s?e.result+=c.repeat("\n",l?1+u:u):1===s&&l&&(e.result+="\n");break}for(o?ne(a)?(h=!0,e.result+=c.repeat("\n",l?1+u:u)):h?(h=!1,e.result+=c.repeat("\n",u+1)):0===u?l&&(e.result+=" "):e.result+=c.repeat("\n",u):e.result+=c.repeat("\n",l?1+u:u),l=!0,d=!0,u=0,i=e.position;!oe(a)&&0!==a;)a=e.input.charCodeAt(++e.position);ve(e,i,e.position,!1)}}return!0}(e,h)||function(e,t){var i,o,n;if(39!==(i=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,o=n=e.position;0!==(i=e.input.charCodeAt(e.position));)if(39===i){if(ve(e,o,e.position,!0),39!==(i=e.input.charCodeAt(++e.position)))return!0;o=e.position,e.position++,n=e.position}else oe(i)?(ve(e,o,n,!0),Se(e,ke(e,!1,t)),o=n=e.position):e.position===e.lineStart&&we(e)?me(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);me(e,"unexpected end of the stream within a single quoted scalar")}(e,h)||function(e,t){var i,o,n,a,r,s,l;if(34!==(s=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;0!==(s=e.input.charCodeAt(e.position));){if(34===s)return ve(e,i,e.position,!0),e.position++,!0;if(92===s){if(ve(e,i,e.position,!0),oe(s=e.input.charCodeAt(++e.position)))ke(e,!1,t);else if(s<256&&ce[s])e.result+=pe[s],e.position++;else if((r=120===(l=s)?2:117===l?4:85===l?8:0)>0){for(n=r,a=0;n>0;n--)(r=se(s=e.input.charCodeAt(++e.position)))>=0?a=(a<<4)+r:me(e,"expected hexadecimal character");e.result+=de(a),e.position++}else me(e,"unknown escape sequence");i=o=e.position}else oe(s)?(ve(e,i,o,!0),Se(e,ke(e,!1,t)),i=o=e.position):e.position===e.lineStart&&we(e)?me(e,"unexpected end of the document within a double quoted scalar"):(e.position++,o=e.position)}me(e,"unexpected end of the stream within a double quoted scalar")}(e,h)?_=!0:function(e){var t,i,o;if(42!==(o=e.input.charCodeAt(e.position)))return!1;for(o=e.input.charCodeAt(++e.position),t=e.position;0!==o&&!ae(o)&&!re(o);)o=e.input.charCodeAt(++e.position);return e.position===t&&me(e,"name of an alias node must contain at least one character"),i=e.input.slice(t,e.position),Z.call(e.anchorMap,i)||me(e,'unidentified alias "'+i+'"'),e.result=e.anchorMap[i],ke(e,!0,-1),!0}(e)?(_=!0,null===e.tag&&null===e.anchor||me(e,"alias node should not have any properties")):function(e,t,i){var o,n,a,r,s,l,d,c,p=e.kind,u=e.result;if(ae(c=e.input.charCodeAt(e.position))||re(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(ae(o=e.input.charCodeAt(e.position+1))||i&&re(o)))return!1;for(e.kind="scalar",e.result="",n=a=e.position,r=!1;0!==c;){if(58===c){if(ae(o=e.input.charCodeAt(e.position+1))||i&&re(o))break}else if(35===c){if(ae(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&we(e)||i&&re(c))break;if(oe(c)){if(s=e.line,l=e.lineStart,d=e.lineIndent,ke(e,!1,-1),e.lineIndent>=t){r=!0,c=e.input.charCodeAt(e.position);continue}e.position=a,e.line=s,e.lineStart=l,e.lineIndent=d;break}}r&&(ve(e,n,a,!1),Se(e,e.line-s),n=a=e.position,r=!1),ne(c)||(a=e.position+1),c=e.input.charCodeAt(++e.position)}return ve(e,n,a,!1),!!e.result||(e.kind=p,e.result=u,!1)}(e,h,1===i)&&(_=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===m&&(_=s&&Oe(e,g))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&me(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,d=e.implicitTypes.length;l<d;l+=1)if((u=e.implicitTypes[l]).resolve(e.result)){e.result=u.construct(e.result),e.tag=u.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(Z.call(e.typeMap[e.kind||"fallback"],e.tag))u=e.typeMap[e.kind||"fallback"][e.tag];else for(u=null,l=0,d=(p=e.typeMap.multi[e.kind||"fallback"]).length;l<d;l+=1)if(e.tag.slice(0,p[l].tag.length)===p[l].tag){u=p[l];break}u||me(e,"unknown tag !<"+e.tag+">"),null!==e.result&&u.kind!==e.kind&&me(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+u.kind+'", not "'+e.kind+'"'),u.resolve(e.result,e.tag)?(e.result=u.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):me(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||_}function Te(e){var t,i,o,n,a=e.position,r=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(n=e.input.charCodeAt(e.position))&&(ke(e,!0,-1),n=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==n));){for(r=!0,n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!ae(n);)n=e.input.charCodeAt(++e.position);for(o=[],(i=e.input.slice(t,e.position)).length<1&&me(e,"directive name must not be less than one character in length");0!==n;){for(;ne(n);)n=e.input.charCodeAt(++e.position);if(35===n){do{n=e.input.charCodeAt(++e.position)}while(0!==n&&!oe(n));break}if(oe(n))break;for(t=e.position;0!==n&&!ae(n);)n=e.input.charCodeAt(++e.position);o.push(e.input.slice(t,e.position))}0!==n&&xe(e),Z.call(_e,i)?_e[i](e,i,o):fe(e,'unknown document directive "'+i+'"')}ke(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,ke(e,!0,-1)):r&&me(e,"directives end mark is expected"),$e(e,e.lineIndent-1,4,!1,!0),ke(e,!0,-1),e.checkLineBreaks&&W.test(e.input.slice(a,e.position))&&fe(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&we(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,ke(e,!0,-1)):e.position<e.length-1&&me(e,"end of the stream or a document separator is expected")}function ze(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var i=new he(e,t),o=e.indexOf("\0");for(-1!==o&&(i.position=o,me(i,"null byte is not allowed in input")),i.input+="\0";32===i.input.charCodeAt(i.position);)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)Te(i);return i.documents}var Pe={loadAll:function(e,t,i){null!==t&&"object"==typeof t&&void 0===i&&(i=t,t=null);var o=ze(e,i);if("function"!=typeof t)return o;for(var n=0,a=o.length;n<a;n+=1)t(o[n])},load:function(e,t){var i=ze(e,t);if(0!==i.length){if(1===i.length)return i[0];throw new h("expected a single document in the stream, but found more")}}},Ee=Object.prototype.toString,Ie=Object.prototype.hasOwnProperty,je=65279,Me={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},De=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Be=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Re(e){var t,i,o;if(t=e.toString(16).toUpperCase(),e<=255)i="x",o=2;else if(e<=65535)i="u",o=4;else{if(!(e<=4294967295))throw new h("code point within a string may not be greater than 0xFFFFFFFF");i="U",o=8}return"\\"+i+c.repeat("0",o-t.length)+t}function Ue(e){this.schema=e.schema||G,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=c.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var i,o,n,a,r,s,l;if(null===t)return{};for(i={},n=0,a=(o=Object.keys(t)).length;n<a;n+=1)r=o[n],s=String(t[r]),"!!"===r.slice(0,2)&&(r="tag:yaml.org,2002:"+r.slice(2)),(l=e.compiledTypeMap.fallback[r])&&Ie.call(l.styleAliases,s)&&(s=l.styleAliases[s]),i[r]=s;return i}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function He(e,t){for(var i,o=c.repeat(" ",t),n=0,a=-1,r="",s=e.length;n<s;)-1===(a=e.indexOf("\n",n))?(i=e.slice(n),n=s):(i=e.slice(n,a+1),n=a+1),i.length&&"\n"!==i&&(r+=o),r+=i;return r}function Je(e,t){return"\n"+c.repeat(" ",e.indent*t)}function Qe(e){return 32===e||9===e}function Ne(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==je||65536<=e&&e<=1114111}function Le(e){return Ne(e)&&e!==je&&13!==e&&10!==e}function Fe(e,t,i){var o=Le(e),n=o&&!Qe(e);return(i?o:o&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!n)||Le(t)&&!Qe(t)&&35===e||58===t&&n}function qe(e,t){var i,o=e.charCodeAt(t);return o>=55296&&o<=56319&&t+1<e.length&&(i=e.charCodeAt(t+1))>=56320&&i<=57343?1024*(o-55296)+i-56320+65536:o}function Ve(e){return/^\n* /.test(e)}function Ke(e,t,i,o,n){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==De.indexOf(t)||Be.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var a=e.indent*Math.max(1,i),r=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-a),s=o||e.flowLevel>-1&&i>=e.flowLevel;switch(function(e,t,i,o,n,a,r,s){var l,d,c=0,p=null,u=!1,h=!1,g=-1!==o,m=-1,f=Ne(d=qe(e,0))&&d!==je&&!Qe(d)&&45!==d&&63!==d&&58!==d&&44!==d&&91!==d&&93!==d&&123!==d&&125!==d&&35!==d&&38!==d&&42!==d&&33!==d&&124!==d&&61!==d&&62!==d&&39!==d&&34!==d&&37!==d&&64!==d&&96!==d&&function(e){return!Qe(e)&&58!==e}(qe(e,e.length-1));if(t||r)for(l=0;l<e.length;c>=65536?l+=2:l++){if(!Ne(c=qe(e,l)))return 5;f=f&&Fe(c,p,s),p=c}else{for(l=0;l<e.length;c>=65536?l+=2:l++){if(10===(c=qe(e,l)))u=!0,g&&(h=h||l-m-1>o&&" "!==e[m+1],m=l);else if(!Ne(c))return 5;f=f&&Fe(c,p,s),p=c}h=h||g&&l-m-1>o&&" "!==e[m+1]}return u||h?i>9&&Ve(e)?5:r?2===a?5:2:h?4:3:!f||r||n(e)?2===a?5:2:1}(t,s,e.indent,r,(function(t){return function(e,t){var i,o;for(i=0,o=e.implicitTypes.length;i<o;i+=1)if(e.implicitTypes[i].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!o,n)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+Ge(t,e.indent)+Ze(He(t,a));case 4:return">"+Ge(t,e.indent)+Ze(He(function(e,t){for(var i,o,n,a=/(\n+)([^\n]*)/g,r=(n=-1!==(n=e.indexOf("\n"))?n:e.length,a.lastIndex=n,Ye(e.slice(0,n),t)),s="\n"===e[0]||" "===e[0];o=a.exec(e);){var l=o[1],d=o[2];i=" "===d[0],r+=l+(s||i||""===d?"":"\n")+Ye(d,t),s=i}return r}(t,r),a));case 5:return'"'+function(e){for(var t,i="",o=0,n=0;n<e.length;o>=65536?n+=2:n++)o=qe(e,n),!(t=Me[o])&&Ne(o)?(i+=e[n],o>=65536&&(i+=e[n+1])):i+=t||Re(o);return i}(t)+'"';default:throw new h("impossible error: invalid scalar style")}}()}function Ge(e,t){var i=Ve(e)?String(t):"",o="\n"===e[e.length-1];return i+(!o||"\n"!==e[e.length-2]&&"\n"!==e?o?"":"-":"+")+"\n"}function Ze(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Ye(e,t){if(""===e||" "===e[0])return e;for(var i,o,n=/ [^ ]/g,a=0,r=0,s=0,l="";i=n.exec(e);)(s=i.index)-a>t&&(o=r>a?r:s,l+="\n"+e.slice(a,o),a=o+1),r=s;return l+="\n",e.length-a>t&&r>a?l+=e.slice(a,r)+"\n"+e.slice(r+1):l+=e.slice(a),l.slice(1)}function We(e,t,i,o){var n,a,r,s="",l=e.tag;for(n=0,a=i.length;n<a;n+=1)r=i[n],e.replacer&&(r=e.replacer.call(i,String(n),r)),(et(e,t+1,r,!0,!0,!1,!0)||void 0===r&&et(e,t+1,null,!0,!0,!1,!0))&&(o&&""===s||(s+=Je(e,t)),e.dump&&10===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=l,e.dump=s||"[]"}function Xe(e,t,i){var o,n,a,r,s,l;for(a=0,r=(n=i?e.explicitTypes:e.implicitTypes).length;a<r;a+=1)if(((s=n[a]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(i?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===Ee.call(s.represent))o=s.represent(t,l);else{if(!Ie.call(s.represent,l))throw new h("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');o=s.represent[l](t,l)}e.dump=o}return!0}return!1}function et(e,t,i,o,n,a,r){e.tag=null,e.dump=i,Xe(e,i,!1)||Xe(e,i,!0);var s,l=Ee.call(e.dump),d=o;o&&(o=e.flowLevel<0||e.flowLevel>t);var c,p,u="[object Object]"===l||"[object Array]"===l;if(u&&(p=-1!==(c=e.duplicates.indexOf(i))),(null!==e.tag&&"?"!==e.tag||p||2!==e.indent&&t>0)&&(n=!1),p&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(u&&p&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),"[object Object]"===l)o&&0!==Object.keys(e.dump).length?(function(e,t,i,o){var n,a,r,s,l,d,c="",p=e.tag,u=Object.keys(i);if(!0===e.sortKeys)u.sort();else if("function"==typeof e.sortKeys)u.sort(e.sortKeys);else if(e.sortKeys)throw new h("sortKeys must be a boolean or a function");for(n=0,a=u.length;n<a;n+=1)d="",o&&""===c||(d+=Je(e,t)),s=i[r=u[n]],e.replacer&&(s=e.replacer.call(i,r,s)),et(e,t+1,r,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,l&&(d+=Je(e,t)),et(e,t+1,s,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?d+=":":d+=": ",c+=d+=e.dump));e.tag=p,e.dump=c||"{}"}(e,t,e.dump,n),p&&(e.dump="&ref_"+c+e.dump)):(function(e,t,i){var o,n,a,r,s,l="",d=e.tag,c=Object.keys(i);for(o=0,n=c.length;o<n;o+=1)s="",""!==l&&(s+=", "),e.condenseFlow&&(s+='"'),r=i[a=c[o]],e.replacer&&(r=e.replacer.call(i,a,r)),et(e,t,a,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),et(e,t,r,!1,!1)&&(l+=s+=e.dump));e.tag=d,e.dump="{"+l+"}"}(e,t,e.dump),p&&(e.dump="&ref_"+c+" "+e.dump));else if("[object Array]"===l)o&&0!==e.dump.length?(e.noArrayIndent&&!r&&t>0?We(e,t-1,e.dump,n):We(e,t,e.dump,n),p&&(e.dump="&ref_"+c+e.dump)):(function(e,t,i){var o,n,a,r="",s=e.tag;for(o=0,n=i.length;o<n;o+=1)a=i[o],e.replacer&&(a=e.replacer.call(i,String(o),a)),(et(e,t,a,!1,!1)||void 0===a&&et(e,t,null,!1,!1))&&(""!==r&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=s,e.dump="["+r+"]"}(e,t,e.dump),p&&(e.dump="&ref_"+c+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new h("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&Ke(e,e.dump,t,a,d)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function tt(e,t){var i,o,n=[],a=[];for(it(e,n,a),i=0,o=a.length;i<o;i+=1)t.duplicates.push(n[a[i]]);t.usedDuplicates=new Array(o)}function it(e,t,i){var o,n,a;if(null!==e&&"object"==typeof e)if(-1!==(n=t.indexOf(e)))-1===i.indexOf(n)&&i.push(n);else if(t.push(e),Array.isArray(e))for(n=0,a=e.length;n<a;n+=1)it(e[n],t,i);else for(n=0,a=(o=Object.keys(e)).length;n<a;n+=1)it(e[o[n]],t,i)}function ot(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}const nt={Type:v,Schema:x,FAILSAFE_SCHEMA:O,JSON_SCHEMA:j,CORE_SCHEMA:M,DEFAULT_SCHEMA:G,load:Pe.load,loadAll:Pe.loadAll,dump:function(e,t){var i=new Ue(t=t||{});i.noRefs||tt(e,i);var o=e;return i.replacer&&(o=i.replacer.call({"":o},"",o)),et(i,0,o,!0,!0)?i.dump+"\n":""},YAMLException:h,types:{binary:J,float:I,map:S,null:A,pairs:q,set:K,timestamp:R,bool:C,int:z,merge:U,omap:L,seq:w,str:k},safeLoad:ot("safeLoad","load"),safeLoadAll:ot("safeLoadAll","loadAll"),safeDump:ot("safeDump","dump")};i(7487);const at=new Map,rt=new Map,st=new Map,lt=new WeakMap,dt=new WeakMap;let ct=null,pt=0;function ut(){ct=null,pt=0}function ht(e){const t=at.get(e);t&&(clearTimeout(t),at.delete(e));const i=[];rt.forEach(((t,o)=>{o.startsWith(`${e}-`)&&i.push(o)})),i.forEach((e=>rt.delete(e))),st.delete(e),st.delete(`${e}-editor`),ut()}class gt extends n.m{constructor(){super(...arguments),this.metadata={type:"external_card",icon:"mdi:card-bulleted",title:"3rd Party Card",description:"Embed any 3rd party Home Assistant card",category:"interactive",author:"Ultra Card",version:"1.0.0",tags:["external","integration","3rd-party"]}}static updateAllCardHass(e){st.forEach((t=>{const i=lt.get(t);i?(i(e),dt.set(t,e)):t&&void 0!==t.hass&&(t.hass=e,dt.set(t,e))}))}createDefault(){return{id:`external-card-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"external_card",card_type:"",card_config:{},name:"",display_conditions:[],smart_scaling:!0}}hasNativeEditor(e){if(!e)return!1;const t=`${e}-editor`,i=customElements.get(t);return void 0!==i&&!(i.prototype instanceof HTMLUnknownElement)}_handleRefreshLock(e,t,i,o){var n,a,s,l,d,c,p,u,h;e.stopPropagation();try{const e=Array.from(document.querySelectorAll("ultra-card")),g=(0,r.Vo)();for(const t of e){const e=null==t?void 0:t.config;if(!e)continue;const i=(null===(n=null==t?void 0:t.dataset)||void 0===n?void 0:n.ucInstanceId)||(0,r.yp)(e);try{r.O.register(i,g,e),null===(a=t.requestUpdate)||void 0===a||a.call(t)}catch(e){}}const m=r.O.evaluate(i);if(!m.isPro&&m.totalThirdParty<=5)return void(null===(s=this.requestUpdate)||void 0===s||s.call(this));const f=(null==this?void 0:this.host)||void 0;let _=(null===(l=null==f?void 0:f.dataset)||void 0===l?void 0:l.ucInstanceId)||(null==o?void 0:o.__ucInstanceId)||(0,r.yp)(o);const v=null===(c=(d=r.O).getCardIdForConfig)||void 0===c?void 0:c.call(d,o);v&&(_=v);const b=`${g}:${_}:${t.id}`;(null===(u=null===(p=m.allowedKeys)||void 0===p?void 0:p.has)||void 0===u?void 0:u.call(p,b))&&(null===(h=this.requestUpdate)||void 0===h||h.call(this))}catch(e){}}_extractTimestamp(e){const t=e.match(/external-card-(\d+)-/);return t?parseInt(t[1],10):0}_getAllExternalModules(e){var t;if(!(null===(t=null==e?void 0:e.layout)||void 0===t?void 0:t.rows))return[];const i=[];return e.layout.rows.forEach((e=>{e.columns.forEach((e=>{var t;null===(t=e.modules)||void 0===t||t.forEach((e=>{"external_card"===e.type&&i.push(e)}))}))})),i}async _refreshAllowedIdsCache(e){try{const{ucDashboardScannerService:t}=await Promise.resolve().then(i.bind(i,933));t.initialize(e);const o=await t.scanAllDashboards(),n=[];o.cards.forEach((e=>{const t=e.config;t.layout&&t.layout.rows&&t.layout.rows.forEach((e=>{var t;null===(t=e.columns)||void 0===t||t.forEach((e=>{var t;null===(t=e.modules)||void 0===t||t.forEach((e=>{if("external_card"===e.type&&e.id){const t=this._extractTimestamp(e.id);n.push({id:e.id,timestamp:t})}}))}))}))})),n.sort(((e,t)=>e.timestamp-t.timestamp));const a=new Set(n.slice(0,5).map((e=>e.id)));ct=a,pt=Date.now()}catch(e){console.error("[UC External Card] Failed to refresh allowed IDs cache:",e)}}_shouldLockModule(e,t,i){var o,n,a,l,d;if(null==t?void 0:t.editMode)return!1;try{try{const e=[...Array.from(document.querySelectorAll("hui-dialog-edit-card")),...Array.from(document.querySelectorAll("hui-card-preview"))],t=e=>{var t;const i=null===(t=e.getClientRects)||void 0===t?void 0:t.call(e);return!!i&&i.length>0&&i[0].width>0&&i[0].height>0};for(const i of e){if(t(i))return!1;const e=i.closest("ha-dialog, mwc-dialog");if(e&&t(e))return!1}}catch(e){}const s=(0,r.Vo)(),l=(null==this?void 0:this.host)||void 0,d=null===(o=null==l?void 0:l.dataset)||void 0===o?void 0:o.ucInstanceId;if((null==i?void 0:i.__ucIsEditorPreview)||window.__UC_PREVIEW_SUPPRESS_LOCKS)return!1;let c=d||(null==i?void 0:i.__ucInstanceId)||(0,r.yp)(i);const p=null===(a=(n=r.O).getCardIdForConfig)||void 0===a?void 0:a.call(n,i);p&&(c=p);const{allowedKeys:u,isPro:h,totalThirdParty:g}=r.O.evaluate(t);if(h)return!1;if(g<=5)return!1;const m=`${s}:${c}:${e.id}`;return!u.has(m)}catch(o){const n=s.x.checkIntegrationAuth(t);if("pro"===(null===(l=null==n?void 0:n.subscription)||void 0===l?void 0:l.tier)&&"active"===(null===(d=null==n?void 0:n.subscription)||void 0===d?void 0:d.status))return!1;const a=Date.now();return ct&&!(a-pt>5e3)||(this._refreshAllowedIdsCache(t),ct)?!ct.has(e.id):[...this._getAllExternalModules(i)].sort(((e,t)=>this._extractTimestamp(e.id)-this._extractTimestamp(t.id))).findIndex((t=>t.id===e.id))>=5}}renderGeneralTab(e,t,i,n){if(!this.hasNativeEditor(e.card_type))return null;const r=e.card_type?a.M.getCardInfo(e.card_type):null,s=(null==r?void 0:r.name)||e.card_type||"External Card";return o.qy`
      ${this.injectUcFormStyles()}
      <div class="external-card-general-tab">
        <div class="settings-section">
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--primary-color); text-transform: uppercase;"
          >
            USING ${s.toUpperCase()}'S NATIVE EDITOR
          </div>
          <div
            class="section-description"
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px;"
          >
            Configure this 3rd party card using its native configuration interface.
          </div>
          <div class="native-editor-container" ${(0,l.K)((i=>{if(!i||!e.card_type)return;const o=`${e.card_type}-editor`,a=`${e.id}-${e.card_type}`;let r=rt.get(a);const s=!r||r.tagName.toLowerCase()!==o,l=r&&!i.contains(r);if(s){const t=[];rt.forEach(((i,o)=>{o.startsWith(`${e.id}-`)&&o!==a&&t.push(o)})),t.forEach((e=>rt.delete(e)));try{if(r=document.createElement(o),r instanceof HTMLUnknownElement)return rt.delete(a),void(i.innerHTML='\n              <div style="padding: 40px; text-align: center; color: var(--secondary-text-color);">\n                <ha-icon icon="mdi:information-outline" style="font-size: 48px; opacity: 0.5; margin-bottom: 16px;"></ha-icon>\n                <p style="font-size: 14px; margin-bottom: 8px;">This card does not have a visual editor.</p>\n                <p style="font-size: 13px; opacity: 0.8;">Use the YAML tab to configure this card.</p>\n              </div>\n            ');r.addEventListener("config-changed",(t=>{if(t.stopPropagation(),t.detail&&t.detail.config){if(JSON.stringify(t.detail.config)===JSON.stringify(e.card_config||{}))return;const i=at.get(e.id);i&&clearTimeout(i);const o=window.setTimeout((()=>{n({card_config:Object.assign({},t.detail.config)}),at.delete(e.id)}),150);at.set(e.id,o)}})),rt.set(a,r),i.innerHTML="",i.appendChild(r)}catch(e){return console.error("Failed to create native editor:",e),rt.delete(a),void(i.innerHTML='\n            <div style="padding: 40px; text-align: center; color: var(--error-color);">\n              <ha-icon icon="mdi:alert-circle" style="font-size: 48px; opacity: 0.5; margin-bottom: 16px;"></ha-icon>\n              <p style="font-size: 14px; margin-bottom: 8px;">Failed to load editor</p>\n              <p style="font-size: 13px; opacity: 0.8;">Use the YAML tab to configure this card.</p>\n            </div>\n          ')}}else l&&(i.innerHTML="",i.appendChild(r));try{const o=i.contains(r),n=JSON.stringify(r.config||{})!==JSON.stringify(e.card_config||{});o&&!n||("function"==typeof r.setConfig?r.setConfig(e.card_config||{}):r.config=e.card_config||{}),r.hass=t}catch(e){console.error("Failed to update cached editor:",e)}}))}></div>
        </div>
      </div>
    `}renderYamlTab(e,t,i,n){let a;console.log("[UC] ExternalCardModule renderYamlTab called"),console.log("[UC] Module:",e),console.log("[UC] Module card_type:",e.card_type),console.log("[UC] Module card_config:",e.card_config);try{const t=e.card_config||{};console.log("[UC] Converting config to YAML:",t),a=nt.dump(t,{indent:2,lineWidth:-1,noRefs:!0,sortKeys:!1,flowLevel:-1,styles:{"!!null":"empty"}}),a=a.replace(/^\|\s*\n/,""),console.log("[UC] Generated YAML string:",a)}catch(e){console.error("[UC] Failed to convert config to YAML:",e),a="# Error converting config to YAML\n"}return console.log("[UC] Using ultra-template-editor for YAML"),console.log("[UC] YAML string length:",a.length),console.log("[UC] YAML string preview:",a.substring(0,100)),o.qy`
      ${this.injectUcFormStyles()}
      <div class="external-card-yaml-tab" style="width: 100%; height: 100%; display: block;">
        <div class="settings-section" style="width: 100%; height: 100%; display: block;">
          <div
            class="section-title"
            style="font-size: 16px; font-weight: 600; margin-bottom: 16px; color: var(--primary-color); text-transform: uppercase;"
          >
            CARD CONFIGURATION (YAML)
          </div>
          <div
            class="section-description"
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px;"
          >
            Edit the card's configuration directly in YAML format. Changes are applied
            automatically.
          </div>
          <div class="yaml-editor-container" style="width: 100%; display: block;">
            <ultra-template-editor
              .hass=${t}
              .value=${a}
              .placeholder=${"type: custom:button-card\nentity: sensor.example\nname: Example Card"}
              .minHeight=${300}
              .maxHeight=${600}
              @value-changed=${e=>{try{const t=nt.load(e.detail.value);n({card_config:t})}catch(e){console.error("Invalid YAML in editor:",e)}}}
            ></ultra-template-editor>
          </div>
        </div>
      </div>
    `}renderPreview(e,t,i,n){var s,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I,j,M,D,B,R,U,H,J,Q,N,L,F,q,V;const K=e,G={padding_top:null===(s=K.design)||void 0===s?void 0:s.padding_top,padding_bottom:null===(d=K.design)||void 0===d?void 0:d.padding_bottom,padding_left:null===(c=K.design)||void 0===c?void 0:c.padding_left,padding_right:null===(p=K.design)||void 0===p?void 0:p.padding_right,margin_top:null===(u=K.design)||void 0===u?void 0:u.margin_top,margin_bottom:null===(h=K.design)||void 0===h?void 0:h.margin_bottom,margin_left:null===(g=K.design)||void 0===g?void 0:g.margin_left,margin_right:null===(m=K.design)||void 0===m?void 0:m.margin_right,background_color:null===(f=K.design)||void 0===f?void 0:f.background_color,background_image:null===(_=K.design)||void 0===_?void 0:_.background_image,background_image_type:null===(v=K.design)||void 0===v?void 0:v.background_image_type,background_image_entity:null===(b=K.design)||void 0===b?void 0:b.background_image_entity,background_size:null===(y=K.design)||void 0===y?void 0:y.background_size,background_position:null===(x=K.design)||void 0===x?void 0:x.background_position,background_repeat:null===(k=K.design)||void 0===k?void 0:k.background_repeat,border_style:null===(w=K.design)||void 0===w?void 0:w.border_style,border_width:null===(S=K.design)||void 0===S?void 0:S.border_width,border_color:null===(O=K.design)||void 0===O?void 0:O.border_color,border_radius:null===(A=K.design)||void 0===A?void 0:A.border_radius,box_shadow_h:null===(C=K.design)||void 0===C?void 0:C.box_shadow_h,box_shadow_v:null===($=K.design)||void 0===$?void 0:$.box_shadow_v,box_shadow_blur:null===(T=K.design)||void 0===T?void 0:T.box_shadow_blur,box_shadow_spread:null===(z=K.design)||void 0===z?void 0:z.box_shadow_spread,box_shadow_color:null===(P=K.design)||void 0===P?void 0:P.box_shadow_color,position:null===(E=K.design)||void 0===E?void 0:E.position,top:null===(I=K.design)||void 0===I?void 0:I.top,bottom:null===(j=K.design)||void 0===j?void 0:j.bottom,left:null===(M=K.design)||void 0===M?void 0:M.left,right:null===(D=K.design)||void 0===D?void 0:D.right,z_index:null===(B=K.design)||void 0===B?void 0:B.z_index,width:null===(R=K.design)||void 0===R?void 0:R.width,height:null===(U=K.design)||void 0===U?void 0:U.height,max_width:null===(H=K.design)||void 0===H?void 0:H.max_width,max_height:null===(J=K.design)||void 0===J?void 0:J.max_height,min_width:null===(Q=K.design)||void 0===Q?void 0:Q.min_width,min_height:null===(N=K.design)||void 0===N?void 0:N.min_height,overflow:null===(L=K.design)||void 0===L?void 0:L.overflow,clip_path:null===(F=K.design)||void 0===F?void 0:F.clip_path,backdrop_filter:null===(q=K.design)||void 0===q?void 0:q.backdrop_filter},Z={padding:G.padding_top||G.padding_bottom||G.padding_left||G.padding_right||K.padding_top||K.padding_bottom||K.padding_left||K.padding_right?`${this.addPixelUnit(G.padding_top||K.padding_top)||"0px"} ${this.addPixelUnit(G.padding_right||K.padding_right)||"0px"} ${this.addPixelUnit(G.padding_bottom||K.padding_bottom)||"0px"} ${this.addPixelUnit(G.padding_left||K.padding_left)||"0px"}`:"0px",margin:G.margin_top||G.margin_bottom||G.margin_left||G.margin_right||K.margin_top||K.margin_bottom||K.margin_left||K.margin_right?`${G.margin_top||K.margin_top||"8px"} ${G.margin_right||K.margin_right||"0px"} ${G.margin_bottom||K.margin_bottom||"8px"} ${G.margin_left||K.margin_left||"0px"}`:"8px 0",background:G.background_color||K.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},K),G),t),backgroundSize:G.background_size||K.background_size||"cover",backgroundPosition:G.background_position||K.background_position||"center",backgroundRepeat:G.background_repeat||K.background_repeat||"no-repeat",border:(G.border_style||K.border_style)&&"none"!==(G.border_style||K.border_style)?`${G.border_width||K.border_width||"1px"} ${G.border_style||K.border_style} ${G.border_color||K.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(G.border_radius||K.border_radius)||"0",position:G.position||K.position||"relative",top:G.top||K.top||"auto",bottom:G.bottom||K.bottom||"auto",left:G.left||K.left||"auto",right:G.right||K.right||"auto",zIndex:G.z_index||K.z_index||"auto",width:G.width||K.width||"100%",height:G.height||K.height||"auto",maxWidth:G.max_width||K.max_width||"none",maxHeight:G.max_height||K.max_height||"none",minWidth:G.min_width||K.min_width||"none",minHeight:G.min_height||K.min_height||"auto",overflow:G.overflow||K.overflow||"visible",clipPath:G.clip_path||K.clip_path||"none",backdropFilter:G.backdrop_filter||K.backdrop_filter||"none",boxShadow:(G.box_shadow_h||K.box_shadow_h)&&(G.box_shadow_v||K.box_shadow_v)?`${G.box_shadow_h||K.box_shadow_h||"0"} ${G.box_shadow_v||K.box_shadow_v||"0"} ${G.box_shadow_blur||K.box_shadow_blur||"0"} ${G.box_shadow_spread||K.box_shadow_spread||"0"} ${G.box_shadow_color||K.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box",display:"flex",flexDirection:"column"};if(!e.card_type)return o.qy`
        <div class="external-card-module-container" style=${this.styleObjectToCss(Z)}>
          <div class="external-card-placeholder">
            <div class="ultra-card-logo">
              <ha-icon
                icon="mdi:card-multiple"
                style="--mdc-icon-size: 48px; color: var(--primary-color);"
              ></ha-icon>
            </div>
            <p class="card-title">Ultra Card</p>
            <p class="subtitle">No 3rd party card selected</p>
            <p class="instruction">Click edit to choose and configure a custom card</p>
          </div>
        </div>
      `;if(!e.card_config||Object.keys(e.card_config).length<=1){const t=a.M.hasCardEditor(e.card_type),i=e.name||e.card_type.replace("custom:","").replace("-"," ").replace(/\b\w/g,(e=>e.toUpperCase()));return o.qy`
        <div class="external-card-module-container" style=${this.styleObjectToCss(Z)}>
          <div class="external-card-placeholder">
            <div class="ultra-card-logo">
              <ha-icon
                icon="mdi:card-multiple"
                style="--mdc-icon-size: 48px; color: var(--primary-color);"
              ></ha-icon>
            </div>
            <p class="card-title">${i}</p>
            <p class="subtitle">3rd Party Card Ready</p>
            ${t?o.qy`<p class="instruction">Use the settings below to set up this card</p>`:o.qy`<p class="instruction">
                  Please use the YAML editor below to configure this card
                </p>`}
          </div>
        </div>
      `}if(!a.M.isCardAvailable(e.card_type))return o.qy`
        <div class="external-card-module-container" style=${this.styleObjectToCss(Z)}>
          <div class="external-card-error">
            <div class="ultra-card-logo">
              <ha-icon
                icon="mdi:alert-circle"
                style="--mdc-icon-size: 48px; color: var(--error-color);"
              ></ha-icon>
            </div>
            <p class="card-title">Card Not Found</p>
            <p class="subtitle">${e.card_type}</p>
            <p class="instruction">This card is not installed on your system</p>
          </div>
        </div>
      `;const Y=i=>{if(!i)return;const o=n?`${e.id}-editor`:e.id;let r=st.get(o);if(r&&r.tagName.toLowerCase()===e.card_type.replace("custom:",""))try{JSON.stringify(r.config||{})!==JSON.stringify(e.card_config||{})&&("function"==typeof r.setConfig?r.setConfig(e.card_config||{}):r.config=e.card_config||{});if(dt.get(r)!==t){const e=window.innerWidth<768;let i=0;e&&(i=window.scrollY),r.hass=t,dt.set(r,t),e&&i>0&&(requestAnimationFrame((()=>{window.scrollY!==i&&window.scrollTo(0,i)})),setTimeout((()=>{window.scrollY!==i&&window.scrollTo(0,i)}),16),setTimeout((()=>{window.scrollY!==i&&window.scrollTo(0,i)}),100))}i.contains(r)||(i.innerHTML="",i.appendChild(r))}catch(t){console.error(`[External Card] Failed to update ${e.card_type}:`,t),st.delete(o)}else try{if(r=a.M.createCardElement(e.card_type,e.card_config,t),!r)throw new Error("Failed to create card element");r.style.width="100%",r.style.minWidth="0",r.style.flex="1 1 auto",r.style.display="block",i.innerHTML="",i.appendChild(r),st.set(o,r);const n=e=>{r&&void 0!==r.hass&&(r.hass=e)};lt.set(r,n),dt.set(r,t)}catch(t){return console.error(`[External Card] Failed to create/mount ${e.card_type}:`,t),void(i.innerHTML=`\n            <div class="external-card-placeholder">\n              <div class="ultra-card-logo">\n                <ha-icon icon="mdi:cog" style="--mdc-icon-size: 48px; color: var(--primary-color);"></ha-icon>\n              </div>\n              <p class="card-title">${e.name||e.card_type}</p>\n              <p class="subtitle">3rd Party Card</p>\n              <p class="instruction">Configuring card...</p>\n            </div>\n          `)}};if(!n&&this._shouldLockModule(e,t,i)){const e=null!==(V=r.O.evaluate(t).totalThirdParty)&&void 0!==V?V:0;return o.qy`
        <div class="external-card-module-container" style=${this.styleObjectToCss(Z)}>
          <div
            class="pro-module-locked"
            style="position: relative; min-height: 200px; display: flex; align-items: center; justify-content: center;"
          >
            <div
              ${(0,l.K)(Y)}
              class="external-card-container uc-external-card"
              style="
                width: 100%;
                display: flex;
                flex-direction: column;
                flex: 1 1 auto;
                min-width: 0;
                min-height: 0;
                filter: blur(8px);
                opacity: 0.5;
                pointer-events: none;
              "
            >
              <!-- Card will be mounted here -->
            </div>
            <div
              class="pro-module-overlay"
              style="
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(8px);
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 12px;
                z-index: 10001;
                pointer-events: all;
                cursor: default;
                touch-action: manipulation;
              "
            >
              <div
                class="pro-module-message"
                style="
                  text-align: center;
                  color: white;
                  padding: 6px;
                  max-width: 95%;
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  gap: 4px;
                  pointer-events: all;
                "
              >
                <ha-icon icon="mdi:lock" style="font-size: 20px; flex-shrink: 0;"></ha-icon>
                <div style="font-size: 10px; opacity: 0.9; line-height: 1.2; white-space: nowrap;">
                  ${e}/5 3rd Party Cards
                </div>
                <div
                  style="
                    margin-top: 6px;
                    font-size: 10px;
                    opacity: 0.7;
                    white-space: nowrap;
                  "
                >
                  Refresh For Check
                </div>
              </div>
            </div>
          </div>
        </div>
      `}return o.qy`
      <div class="external-card-module-container" style=${this.styleObjectToCss(Z)}>
        <div
          ${(0,l.K)(Y)}
          class="external-card-container uc-external-card"
          style="
            width: 100%;
            display: flex;
            flex-direction: column;
            flex: 1 1 auto;
            min-width: 0;
            min-height: 0;
          "
          @click=${e=>e.stopPropagation()}
        >
          <!-- Card will be mounted here -->
        </div>
      </div>
    `}getBackgroundImageCSS(e,t){var i,o;if(!e.background_image_type||"none"===e.background_image_type)return"none";switch(e.background_image_type){case"upload":case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const n=t.states[e.background_image_entity];let a="";if((null===(i=n.attributes)||void 0===i?void 0:i.entity_picture)?a=n.attributes.entity_picture:(null===(o=n.attributes)||void 0===o?void 0:o.image)?a=n.attributes.image:n.state&&"string"==typeof n.state&&(n.state.startsWith("/")||n.state.startsWith("http"))&&(a=n.state),a)return a.startsWith("/local/")||a.startsWith("/media/")||a.startsWith("/"),`url("${a}")`}}return"none"}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}static get styles(){return o.AH`
      /* Outer design container that applies design properties */
      .external-card-module-container {
        width: 100%;
        box-sizing: border-box;
        overflow-anchor: none; /* Prevent scroll anchoring on mobile when cards update */
      }

      /* Container works in both flex and grid layouts */
      .external-card-container {
        width: 100%;
        display: flex;
        flex-direction: column;
        flex: 1 1 auto; /* For flex parent contexts (horizontal layouts) */
        min-width: 0; /* Allow flex shrinking below content size */
        min-height: 0; /* Allow flex shrinking below content size */
        overflow-anchor: none; /* Prevent scroll anchoring on mobile when cards update */
        isolation: isolate; /* Create new stacking context to prevent flicker */
        contain: layout; /* Contain layout changes within this element */
      }

      /* Child cards fill the container */
      .external-card-container > * {
        width: 100%;
        min-width: 0; /* Allow shrinking */
        flex: 1 1 auto; /* Let cards participate in flex */
        will-change: transform; /* Optimize repaints during updates */
        backface-visibility: hidden; /* Prevent flicker during redraws */
      }

      /* Unique class for targeting 3rd party cards separately */
      .uc-external-card {
        /* Can be styled via Design tab */
      }

      /* Placeholder styles for when card isn't configured */
      .external-card-placeholder,
      .external-card-error {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 32px 24px;
        text-align: center;
        color: var(--secondary-text-color);
        background: var(--card-background-color, var(--ha-card-background));
        border-radius: var(--ha-card-border-radius, 12px);
        border: 1px dashed var(--divider-color);
        min-height: 180px;
        gap: 12px;
      }

      .external-card-error {
        border-color: var(--error-color);
        color: var(--error-color);
      }

      .ultra-card-logo {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 64px;
        height: 64px;
        background: rgba(var(--rgb-primary-color), 0.1);
        border-radius: 16px;
        margin-bottom: 8px;
      }

      .card-title {
        font-size: 18px;
        font-weight: 600;
        color: var(--primary-text-color);
        margin: 0 0 4px 0;
      }

      .external-card-placeholder p,
      .external-card-error p {
        margin: 0;
        font-size: 14px;
      }

      .external-card-placeholder .subtitle,
      .external-card-error .subtitle {
        font-size: 13px;
        opacity: 0.8;
        margin: 0 0 8px 0;
      }

      .external-card-placeholder .instruction,
      .external-card-error .instruction {
        font-size: 12px;
        opacity: 0.7;
        margin: 0;
        font-style: italic;
      }

      .external-card-error .card-type {
        font-family: monospace;
        font-size: 13px;
        opacity: 0.9;
      }

      /* Native editor container */
      .native-editor-container {
        min-height: 200px;
      }

      /* YAML tab styling */
      .external-card-yaml-tab {
        width: 100%;
        height: 100%;
        display: block;
        overflow: visible;
      }

      .external-card-yaml-tab .settings-section {
        width: 100%;
        height: 100%;
        display: block;
      }

      .yaml-editor-container {
        width: 100%;
        display: block;
        position: relative;
        z-index: 1;
      }

      .yaml-textarea {
        position: relative;
        z-index: 10;
        pointer-events: auto;
        cursor: text !important;
        user-select: text !important;
        -webkit-user-select: text !important;
        -moz-user-select: text !important;
        -ms-user-select: text !important;
      }

      .yaml-textarea:focus {
        outline: 2px solid var(--primary-color);
        outline-offset: 2px;
      }

      .yaml-editor-fallback {
        width: 100%;
        display: block;
        position: relative;
        z-index: 1;
      }
    `}}},2314:(e,t,i)=>{i.d(t,{Mu:()=>o});const o={BASE_CONTENT:0,MODULE_CONTENT:1,MODULE_OVERLAY:2,MODULE_BACKGROUND:3,MODULE_DECORATIVE:5,MODULE_INTERACTIVE:8,CARD_BACKGROUND:10,CARD_CONTROLS:20,CARD_TOOLTIP:30,EDITOR_CONTENT:100,STICKY_HEADERS:400,EDITOR_TABS:500,EDITOR_NOTIFICATIONS:600,MODULE_POPUP_OVERLAY:1e3,MODULE_POPUP_CONTENT:1001,LAYOUT_CHILD_POPUP:1002,SELECTOR_POPUP:1003,RESIZE_HANDLE:1004,POPUP_STICKY_ELEMENTS:1005,POPUP_TABS:2e3,DROPDOWN_SELECT:5e3,DROPDOWN_MENU:5001,COLOR_PICKER_CONTAINER:5002,COLOR_PICKER_PALETTE:5003,AUTOCOMPLETE:5004,CONTEXT_MENU:5005,DIALOG_OVERLAY:8e3,DIALOG_CONTENT:8001,TOAST_NOTIFICATION:8500,GRAPH_TOOLTIP:9e3,CAMERA_FULLSCREEN_OVERLAY:1e4,CAMERA_FULLSCREEN_CONTENT:10001,FULLSCREEN_EDITOR:10002}},2371:(e,t,i)=>{i.d(t,{X:()=>r});var o=i(5183),n=i(8914),a=i(456);i(7487);class r{static render(e,t,i){var r;const s=e.display_conditions||[],l=e.display_mode||"always",d=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en";return o.qy`
      <div class="uc-global-logic-tab">
        ${n.Q.injectCleanFormStyles()}
        <!-- Display Mode -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          ${n.Q.renderField((0,a.kg)("editor.layout_logic.display_title",d,"Display this Module"),(0,a.kg)("editor.layout_logic.display_desc",d,'Control when this module is shown. Choose "Always" to keep it visible. Select "If EVERY" or "If ANY" to display it only when the conditions you add below evaluate to true.'),t,{display_mode:l},[n.Q.createSchemaItem("display_mode",{select:{options:[{value:"always",label:(0,a.kg)("editor.layout_logic.always",d,"Always")},{value:"every",label:(0,a.kg)("editor.layout_logic.every",d,"If EVERY condition below is met")},{value:"any",label:(0,a.kg)("editor.layout_logic.any",d,"If ANY condition below is met")}],mode:"dropdown"}})],(e=>{i({display_mode:e.detail.value.display_mode})}))}
        </div>

        <!-- Conditions List -->
        ${"always"!==l?o.qy`
              <div
                class="settings-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
              >
                <div
                  style="display:flex; align-items:center; justify-content: space-between; margin-bottom: 12px;"
                >
                  <div style="font-size: 16px; font-weight: 700;">
                    ${(0,a.kg)("editor.layout_logic.conditions",d,"Conditions")}
                  </div>
                  <button
                    class="add-condition"
                    @click=${()=>{const e={id:`cond_${Date.now()}_${Math.random().toString(36).slice(2,7)}`,type:"entity_state",ui_expanded:!0,entity:"",operator:"=",value:""},t=[...s,e];i({display_conditions:t})}}
                    style="display:flex; align-items:center; gap:8px; padding:6px 10px; border:1px dashed var(--primary-color); background:none; color:var(--primary-color); border-radius:6px; cursor:pointer;"
                    title="${(0,a.kg)("editor.layout_logic.add_condition",d,"Add Condition")}"
                  >
                    <ha-icon icon="mdi:plus"></ha-icon>
                    ${(0,a.kg)("editor.layout_logic.add_condition",d,"Add Condition")}
                  </button>
                </div>

                <div style="display:flex; flex-direction: column; gap: 12px;">
                  ${0===s.length?o.qy`
                        <div
                          style="text-align: center; padding: 24px; color: var(--secondary-text-color); font-style: italic;"
                        >
                          ${(0,a.kg)("editor.layout_logic.no_conditions",d,'No conditions added yet. Click "Add Condition" to get started.')}
                        </div>
                      `:""}
                  ${s.map(((e,r)=>{const l=t=>{const o=[...s];o[r]=Object.assign(Object.assign({},e),t),i({display_conditions:o})},c=!1!==e.ui_expanded,p=e.custom_name||`${(0,a.kg)("editor.layout_logic.condition_header",d,"Condition")} ${r+1}`;return o.qy` <div
                      class="uc-condition-item"
                      draggable="true"
                      @dragstart=${e=>{e.dataTransfer&&(e.dataTransfer.setData("text/plain",String(r)),e.dataTransfer.effectAllowed="move")}}
                      @dragover=${e=>{e.preventDefault()}}
                      @drop=${e=>{if(e.preventDefault(),!e.dataTransfer)return;const t=Number(e.dataTransfer.getData("text/plain")),o=r;if(isNaN(t)||t===o)return;const n=[...s],[a]=n.splice(t,1);n.splice(o,0,a),i({display_conditions:n})}}
                      style="border:1px solid var(--divider-color); border-radius: 8px; background: var(--card-background-color); overflow: hidden;"
                    >
                      <div
                        class="uc-condition-header"
                        style="display:flex; align-items:center; justify-content: space-between; gap:10px; padding: 12px 14px; border-bottom: 1px solid var(--divider-color);"
                      >
                        <div style="display:flex; align-items:center; gap:10px; min-width:0;">
                          <button
                            @click=${()=>l({ui_expanded:!c})}
                            title=${c?"Collapse":"Expand"}
                            style="background:none; border:none; color:var(--secondary-text-color); cursor:pointer;"
                          >
                            <ha-icon
                              icon=${c?"mdi:chevron-down":"mdi:chevron-right"}
                            ></ha-icon>
                          </button>
                          <span
                            style="font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;"
                            >${p}</span
                          >
                        </div>
                        <div style="display:flex; align-items:center; gap:4px; flex-shrink:0;">
                          <button
                            @click=${()=>{const t=Object.assign(Object.assign({},e),{id:`cond_${Date.now()}_${Math.random().toString(36).slice(2,7)}`}),o=[...s];o.splice(r+1,0,t),i({display_conditions:o})}}
                            style="background:none; border:none; padding:4px; cursor:pointer; color: var(--secondary-text-color);"
                            title="Duplicate Condition"
                          >
                            <ha-icon
                              icon="mdi:content-copy"
                              style="--mdi-icon-size: 18px;"
                            ></ha-icon>
                          </button>
                          <button
                            @click=${()=>{const e=s.filter(((e,t)=>t!==r));i({display_conditions:e})}}
                            style="background:none; border:none; padding:4px; cursor:pointer; color: var(--error-color);"
                            title="Remove Condition"
                          >
                            <ha-icon
                              icon="mdi:trash-can-outline"
                              style="--mdi-icon-size: 18px;"
                            ></ha-icon>
                          </button>
                          <button
                            class="condition-drag-handle"
                            title="Drag to reorder"
                            style="background:none; border:none; padding:4px; cursor:grab; display:inline-flex; align-items:center; justify-content:center; color: var(--secondary-text-color);"
                          >
                            <ha-icon icon="mdi:dots-grid" style="--mdi-icon-size: 18px;"></ha-icon>
                          </button>
                        </div>
                      </div>

                      ${c?o.qy`
                            <div
                              style="padding: 12px 14px; display:flex; flex-direction:column; gap:12px;"
                            >
                              ${n.Q.renderField((0,a.kg)("editor.layout_logic.custom_name",d,"Custom Name"),(0,a.kg)("editor.layout_logic.custom_name_desc",d,"Optional: Give this condition a custom name for easier identification"),t,{custom_name:e.custom_name||""},[n.Q.createSchemaItem("custom_name",{text:{}})],(e=>l(e.detail.value)))}
                              ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_type",d,"Condition Type"),"",t,{type:e.type||"entity_state"},[n.Q.createSchemaItem("type",{select:{options:[{value:"entity_state",label:(0,a.kg)("editor.layout_logic.condition_types.entity_state",d,"Entity State")},{value:"entity_attribute",label:(0,a.kg)("editor.layout_logic.condition_types.entity_attribute",d,"Entity Attribute")},{value:"time",label:(0,a.kg)("editor.layout_logic.condition_types.time",d,"Time Range")},{value:"template",label:(0,a.kg)("editor.layout_logic.condition_types.template",d,"Template")}],mode:"dropdown"}})],(e=>{const t=e.detail.value.type,i={type:t};"entity_state"===t?Object.assign(i,{entity:"",operator:"=",value:""}):"entity_attribute"===t?Object.assign(i,{entity:"",attribute:"",operator:"=",value:""}):"time"===t?Object.assign(i,{time_from:"00:00",time_to:"23:59"}):"template"===t&&Object.assign(i,{template:""}),l(i)}))}
                              ${"entity_state"===(e.type||"entity_state")?o.qy`
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.entity",d,"Entity"),"",t,{entity:e.entity||""},[n.Q.createSchemaItem("entity",{entity:{}})],(e=>l(e.detail.value)))}
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.operator",d,"Operator"),"",t,{operator:e.operator||"="},[n.Q.createSchemaItem("operator",{select:{options:[{value:"=",label:"="},{value:"!=",label:"!="},{value:">",label:">"},{value:">=",label:">="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"contains",label:"contains"},{value:"not_contains",label:"not_contains"},{value:"has_value",label:"has_value"},{value:"no_value",label:"no_value"}],mode:"dropdown"}})],(e=>l(e.detail.value)))}
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.value",d,"Value"),"",t,{value:e.value||""},[n.Q.createSchemaItem("value",{text:{}})],(e=>l(e.detail.value)))}
                                  `:"entity_attribute"===e.type?o.qy`
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.entity",d,"Entity"),"",t,{entity:e.entity||""},[n.Q.createSchemaItem("entity",{entity:{}})],(e=>l(e.detail.value)))}
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.attribute",d,"Attribute"),"",t,{attribute:e.attribute||""},[n.Q.createSchemaItem("attribute",{text:{}})],(e=>l(e.detail.value)))}
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.operator",d,"Operator"),"",t,{operator:e.operator||"="},[n.Q.createSchemaItem("operator",{select:{options:[{value:"=",label:"="},{value:"!=",label:"!="},{value:">",label:">"},{value:">=",label:">="},{value:"<",label:"<"},{value:"<=",label:"<="},{value:"contains",label:"contains"},{value:"not_contains",label:"not_contains"}],mode:"dropdown"}})],(e=>l(e.detail.value)))}
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.value",d,"Value"),"",t,{value:e.value||""},[n.Q.createSchemaItem("value",{text:{}})],(e=>l(e.detail.value)))}
                                  `:"time"===e.type?o.qy`
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.time_from",d,"From"),"",t,{time_from:e.time_from||"00:00"},[n.Q.createSchemaItem("time_from",{text:{}})],(e=>l(e.detail.value)))}
                                    ${n.Q.renderField((0,a.kg)("editor.layout_logic.condition_fields.time_to",d,"To"),"",t,{time_to:e.time_to||"23:59"},[n.Q.createSchemaItem("time_to",{text:{}})],(e=>l(e.detail.value)))}
                                  `:o.qy`
                                  <div class="field-container" style="margin-bottom: 16px;">
                                    <div
                                      class="field-title"
                                      style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                                    >
                                      ${(0,a.kg)("editor.layout_logic.condition_fields.template",d,"Template")}
                                    </div>
                                    <div
                                      class="field-description"
                                      style="font-size: 12px; margin-bottom: 8px; color: var(--secondary-text-color);"
                                    >
                                      Jinja2 template that should evaluate to true/false.
                                    </div>
                                    <ultra-template-editor
                                      .hass=${t}
                                      .value=${e.template||""}
                                      .placeholder=${"{% if states('sensor.example') | int > 50 %}true{% else %}false{% endif %}"}
                                      .minHeight=${100}
                                      .maxHeight=${300}
                                      @value-changed=${e=>l({template:e.detail.value})}
                                    ></ultra-template-editor>
                                  </div>
                                `}
                            </div>
                          `:""}
                    </div>`}))}
                </div>
              </div>
            `:""}
      </div>
    `}}},2381:(e,t,i)=>{async function o(e,t){var i;if(!t)throw console.error("[UPLOAD] Missing file."),new Error("No file provided for upload.");if(!(e&&e.auth&&e.auth.data&&e.auth.data.access_token))throw console.error("[UPLOAD] Missing Home Assistant authentication details."),new Error("Authentication details are missing.");const o=new FormData;o.append("file",t);try{console.log("[UPLOAD] Attempting upload to local media source...");const i=await fetch("/api/media_source/local/upload",{method:"POST",body:o,headers:{Authorization:`Bearer ${e.auth.data.access_token}`}});if(i.ok){const e=(await i.json()).media_content_id||`/media/local/${t.name}`;return console.log(`[UPLOAD] Successfully uploaded to local media source: ${e}`),e}console.warn(`[UPLOAD] Local media source failed (${i.status}), trying fallback method...`)}catch(e){console.warn("[UPLOAD] Local media source not available, trying fallback method...",e)}try{console.log("[UPLOAD] Attempting upload to image API...");let t="";t=e.connection&&"string"==typeof(null===(i=e.connection.options)||void 0===i?void 0:i.url)?e.connection.options.url.replace(/^ws/,"http"):"function"==typeof e.hassUrl?e.hassUrl():`${window.location.protocol}//${window.location.host}`;const n=`${t.replace(/\/$/,"")}/api/image/upload`,a=await fetch(n,{method:"POST",headers:{Authorization:`Bearer ${e.auth.data.access_token}`},body:o});if(!a.ok){const e=await a.text();throw console.error(`[UPLOAD] Image API upload failed: ${a.status} ${a.statusText}`,e),new Error(`Image API upload failed: ${a.statusText}`)}const r=await a.json();if(!r||!r.id)throw console.error("[UPLOAD] Invalid response from image API: missing id",r),new Error("Invalid response from image API: missing id");const s=`/api/image/serve/${r.id}`;return console.log(`[UPLOAD] Successfully uploaded to image API: ${s}`),s}catch(e){throw console.error("[UPLOAD] All upload methods failed:",e),new Error(`Upload failed: ${e instanceof Error?e.message:"Unknown network error"}`)}}function n(e,t){if(!t)return"";if(t.startsWith("http"))return t;if(t.includes("/api/image/serve/")){const i=t.match(/\/api\/image\/serve\/([^\/]+)/);if(i&&i[1]){const o=i[1];try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/api/image/serve/${o}/original`}catch(e){return t}}return t}if(t.startsWith("/media/local/")||t.startsWith("media/local/")||t.startsWith("local/")||t.includes("/local/")||t.startsWith("media-source://")){const i=t.replace(/^\/media\/local\//,"").replace(/^media\/local\//,"").replace(/^\/?local\//,"").replace(/^media-source:\/\/media_source\/local\//,"");try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/local/${i}`}catch(e){return`/local/${i}`}}if(t.startsWith("/"))try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}${t}`}catch(e){return t}return t}i.d(t,{V:()=>n,m:()=>o})},2593:(e,t,i)=>{i.d(t,{Dx:()=>d,Jz:()=>m,KO:()=>g,Rt:()=>s,cN:()=>h,lx:()=>c,mY:()=>u,ps:()=>r,qb:()=>a});var o=i(9247);const{I:n}=o.ge,a=(e,t)=>void 0===t?void 0!==e?._$litType$:e?._$litType$===t,r=e=>null!=e?._$litType$?.h,s=e=>void 0===e.strings,l=()=>document.createComment(""),d=(e,t,i)=>{const o=e._$AA.parentNode,a=void 0===t?e._$AB:t._$AA;if(void 0===i){const t=o.insertBefore(l(),a),r=o.insertBefore(l(),a);i=new n(t,r,e,e.options)}else{const t=i._$AB.nextSibling,n=i._$AM,r=n!==e;if(r){let t;i._$AQ?.(e),i._$AM=e,void 0!==i._$AP&&(t=e._$AU)!==n._$AU&&i._$AP(t)}if(t!==a||r){let e=i._$AA;for(;e!==t;){const t=e.nextSibling;o.insertBefore(e,a),e=t}}}return i},c=(e,t,i=e)=>(e._$AI(t,i),e),p={},u=(e,t=p)=>e._$AH=t,h=e=>e._$AH,g=e=>{e._$AP?.(!1,!0);let t=e._$AA;const i=e._$AB.nextSibling;for(;t!==i;){const e=t.nextSibling;t.remove(),t=e}},m=e=>{e._$AR()}},2701:(e,t,i)=>{i.d(t,{s:()=>ke});var o=i(5183),n=i(866),a=i(9662),r=i(2371),s=i(796),l=i(7987),d=i(2381),c=i(456),p=i(4345);var u={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function h(e){u=e}var g={exec:()=>null};function m(e,t=""){let i="string"==typeof e?e:e.source,o={replace:(e,t)=>{let n="string"==typeof t?t:t.source;return n=n.replace(f.caret,"$1"),i=i.replace(e,n),o},getRegex:()=>new RegExp(i,t)};return o}var f={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},_=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,v=/(?:[*+-]|\d{1,9}[.)])/,b=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,y=m(b).replace(/bull/g,v).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),x=m(b).replace(/bull/g,v).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),k=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,w=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,S=m(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",w).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),O=m(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,v).getRegex(),A="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",C=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,$=m("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",C).replace("tag",A).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),T=m(k).replace("hr",_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A).getRegex(),z={blockquote:m(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",T).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:S,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:_,html:$,lheading:y,list:O,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:T,table:g,text:/^[^\n]+/},P=m("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A).getRegex(),E={...z,lheading:x,table:P,paragraph:m(k).replace("hr",_).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",P).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",A).getRegex()},I={...z,html:m("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",C).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:m(k).replace("hr",_).replace("heading"," *#{1,6} *[^\n]").replace("lheading",y).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},j=/^( {2,}|\\)\n(?!\s*$)/,M=/[\p{P}\p{S}]/u,D=/[\s\p{P}\p{S}]/u,B=/[^\s\p{P}\p{S}]/u,R=m(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,D).getRegex(),U=/(?!~)[\p{P}\p{S}]/u,H=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,J=m(H,"u").replace(/punct/g,M).getRegex(),Q=m(H,"u").replace(/punct/g,U).getRegex(),N="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",L=m(N,"gu").replace(/notPunctSpace/g,B).replace(/punctSpace/g,D).replace(/punct/g,M).getRegex(),F=m(N,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,U).getRegex(),q=m("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,B).replace(/punctSpace/g,D).replace(/punct/g,M).getRegex(),V=m(/\\(punct)/,"gu").replace(/punct/g,M).getRegex(),K=m(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),G=m(C).replace("(?:--\x3e|$)","--\x3e").getRegex(),Z=m("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",G).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Y=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,W=m(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",Y).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),X=m(/^!?\[(label)\]\[(ref)\]/).replace("label",Y).replace("ref",w).getRegex(),ee=m(/^!?\[(ref)\](?:\[\])?/).replace("ref",w).getRegex(),te={_backpedal:g,anyPunctuation:V,autolink:K,blockSkip:/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,br:j,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:g,emStrongLDelim:J,emStrongRDelimAst:L,emStrongRDelimUnd:q,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:W,nolink:ee,punctuation:R,reflink:X,reflinkSearch:m("reflink|nolink(?!\\()","g").replace("reflink",X).replace("nolink",ee).getRegex(),tag:Z,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:g},ie={...te,link:m(/^!?\[(label)\]\((.*?)\)/).replace("label",Y).getRegex(),reflink:m(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Y).getRegex()},oe={...te,emStrongRDelimAst:F,emStrongLDelim:Q,url:m(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ne={...oe,br:m(j).replace("{2,}","*").getRegex(),text:m(oe.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ae={normal:z,gfm:E,pedantic:I},re={normal:te,gfm:oe,breaks:ne,pedantic:ie},se={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},le=e=>se[e];function de(e,t){if(t){if(f.escapeTest.test(e))return e.replace(f.escapeReplace,le)}else if(f.escapeTestNoEncode.test(e))return e.replace(f.escapeReplaceNoEncode,le);return e}function ce(e){try{e=encodeURI(e).replace(f.percentDecode,"%")}catch{return null}return e}function pe(e,t){let i=e.replace(f.findPipe,((e,t,i)=>{let o=!1,n=t;for(;--n>=0&&"\\"===i[n];)o=!o;return o?"|":" |"})).split(f.splitPipe),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(f.slashPipe,"|");return i}function ue(e,t,i){let o=e.length;if(0===o)return"";let n=0;for(;n<o;){let a=e.charAt(o-n-1);if(a!==t||i){if(a===t||!i)break;n++}else n++}return e.slice(0,o-n)}function he(e,t,i,o,n){let a=t.href,r=t.title||null,s=e[1].replace(n.other.outputLinkReplace,"$1");o.state.inLink=!0;let l={type:"!"===e[0].charAt(0)?"image":"link",raw:i,href:a,title:r,text:s,tokens:o.inlineTokens(s)};return o.state.inLink=!1,l}var ge=class{options;rules;lexer;constructor(e){this.options=e||u}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:ue(e,"\n")}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let e=t[0],i=function(e,t,i){let o=e.match(i.other.indentCodeCompensation);if(null===o)return t;let n=o[1];return t.split("\n").map((e=>{let t=e.match(i.other.beginningSpace);if(null===t)return e;let[o]=t;return o.length>=n.length?e.slice(n.length):e})).join("\n")}(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let t=ue(e,"#");(this.options.pedantic||!t||this.rules.other.endingSpaceChar.test(t))&&(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ue(t[0],"\n")}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let e=ue(t[0],"\n").split("\n"),i="",o="",n=[];for(;e.length>0;){let t,a=!1,r=[];for(t=0;t<e.length;t++)if(this.rules.other.blockquoteStart.test(e[t]))r.push(e[t]),a=!0;else{if(a)break;r.push(e[t])}e=e.slice(t);let s=r.join("\n"),l=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}\n${s}`:s,o=o?`${o}\n${l}`:l;let d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,n,!0),this.lexer.state.top=d,0===e.length)break;let c=n.at(-1);if("code"===c?.type)break;if("blockquote"===c?.type){let t=c,a=t.raw+"\n"+e.join("\n"),r=this.blockquote(a);n[n.length-1]=r,i=i.substring(0,i.length-t.raw.length)+r.raw,o=o.substring(0,o.length-t.text.length)+r.text;break}if("list"!==c?.type);else{let t=c,a=t.raw+"\n"+e.join("\n"),r=this.list(a);n[n.length-1]=r,i=i.substring(0,i.length-c.raw.length)+r.raw,o=o.substring(0,o.length-t.raw.length)+r.raw,e=a.substring(n.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:i,tokens:n,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim(),o=i.length>1,n={type:"list",raw:"",ordered:o,start:o?+i.slice(0,-1):"",loose:!1,items:[]};i=o?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=o?i:"[*+-]");let a=this.rules.other.listItemRegex(i),r=!1;for(;e;){let i=!1,o="",s="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let l=t[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(e=>" ".repeat(3*e.length))),d=e.split("\n",1)[0],c=!l.trim(),p=0;if(this.options.pedantic?(p=2,s=l.trimStart()):c?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,s=l.slice(p),p+=t[1].length),c&&this.rules.other.blankLine.test(d)&&(o+=d+"\n",e=e.substring(d.length+1),i=!0),!i){let t=this.rules.other.nextBulletRegex(p),i=this.rules.other.hrRegex(p),n=this.rules.other.fencesBeginRegex(p),a=this.rules.other.headingBeginRegex(p),r=this.rules.other.htmlBeginRegex(p);for(;e;){let u,h=e.split("\n",1)[0];if(d=h,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),u=d):u=d.replace(this.rules.other.tabCharGlobal,"    "),n.test(d)||a.test(d)||r.test(d)||t.test(d)||i.test(d))break;if(u.search(this.rules.other.nonSpaceChar)>=p||!d.trim())s+="\n"+u.slice(p);else{if(c||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||n.test(l)||a.test(l)||i.test(l))break;s+="\n"+d}!c&&!d.trim()&&(c=!0),o+=h+"\n",e=e.substring(h.length+1),l=u.slice(p)}}n.loose||(r?n.loose=!0:this.rules.other.doubleBlankLine.test(o)&&(r=!0));let u,h=null;this.options.gfm&&(h=this.rules.other.listIsTask.exec(s),h&&(u="[ ] "!==h[0],s=s.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:o,task:!!h,checked:u,loose:!1,text:s,tokens:[]}),n.raw+=o}let s=n.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),n.raw=n.raw.trimEnd();for(let e=0;e<n.items.length;e++)if(this.lexer.state.top=!1,n.items[e].tokens=this.lexer.blockTokens(n.items[e].text,[]),!n.loose){let t=n.items[e].tokens.filter((e=>"space"===e.type)),i=t.length>0&&t.some((e=>this.rules.other.anyLine.test(e.raw)));n.loose=i}if(n.loose)for(let e=0;e<n.items.length;e++)n.items[e].loose=!0;return n}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:i,title:o}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let i=pe(t[1]),o=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===o.length){for(let e of o)this.rules.other.tableAlignRight.test(e)?a.align.push("right"):this.rules.other.tableAlignCenter.test(e)?a.align.push("center"):this.rules.other.tableAlignLeft.test(e)?a.align.push("left"):a.align.push(null);for(let e=0;e<i.length;e++)a.header.push({text:i[e],tokens:this.lexer.inline(i[e]),header:!0,align:a.align[e]});for(let e of n)a.rows.push(pe(e,a.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:a.align[t]}))));return a}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let t=ue(e.slice(0,-1),"\\");if((e.length-t.length)%2==0)return}else{let e=function(e,t){if(-1===e.indexOf(t[1]))return-1;let i=0;for(let o=0;o<e.length;o++)if("\\"===e[o])o++;else if(e[o]===t[0])i++;else if(e[o]===t[1]&&(i--,i<0))return o;return i>0?-2:-1}(t[2],"()");if(-2===e)return;if(e>-1){let i=(0===t[0].indexOf("!")?5:4)+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,i).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){let e=this.rules.other.pedanticHrefTitle.exec(i);e&&(i=e[1],o=e[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(i=this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?i.slice(1):i.slice(1,-1)),he(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let e=t[(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!e){let e=i[0].charAt(0);return{type:"text",raw:e,text:e}}return he(i,e,i[0],this.lexer,this.rules)}}emStrong(e,t,i=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!(!o||o[3]&&i.match(this.rules.other.unicodeAlphaNumeric))&&(!o[1]&&!o[2]||!i||this.rules.inline.punctuation.exec(i))){let i,n,a=[...o[0]].length-1,r=a,s=0,l="*"===o[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,t=t.slice(-1*e.length+a);null!=(o=l.exec(t));){if(i=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!i)continue;if(n=[...i].length,o[3]||o[4]){r+=n;continue}if((o[5]||o[6])&&a%3&&!((a+n)%3)){s+=n;continue}if(r-=n,r>0)continue;n=Math.min(n,n+r+s);let t=[...o[0]][0].length,l=e.slice(0,a+o.index+t+n);if(Math.min(a,n)%2){let e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}let d=l.slice(2,-2);return{type:"strong",raw:l,text:d,tokens:this.lexer.inlineTokens(d)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(e),o=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return i&&o&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let e,i;return"@"===t[2]?(e=t[1],i="mailto:"+e):(e=t[1],i=e),{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,i;if("@"===t[2])e=t[0],i="mailto:"+e;else{let o;do{o=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(o!==t[0]);e=t[0],i="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:i,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},me=class e{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||u,this.options.tokenizer=this.options.tokenizer||new ge,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:f,block:ae.normal,inline:re.normal};this.options.pedantic?(t.block=ae.pedantic,t.inline=re.pedantic):this.options.gfm&&(t.block=ae.gfm,this.options.breaks?t.inline=re.breaks:t.inline=re.gfm),this.tokenizer.rules=t}static get rules(){return{block:ae,inline:re}}static lex(t,i){return new e(i).lex(t)}static lexInline(t,i){return new e(i).inlineTokens(t)}lex(e){e=e.replace(f.carriageReturn,"\n"),this.blockTokens(e,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let t=this.inlineQueue[e];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],i=!1){for(this.options.pedantic&&(e=e.replace(f.tabCharGlobal,"    ").replace(f.spaceLine,""));e;){let o;if(this.options.extensions?.block?.some((i=>!!(o=i.call({lexer:this},e,t))&&(e=e.substring(o.raw.length),t.push(o),!0))))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);let i=t.at(-1);1===o.raw.length&&void 0!==i?i.raw+="\n":t.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);let i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+o.raw,i.text+="\n"+o.text,this.inlineQueue.at(-1).src=i.text):t.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);let i=t.at(-1);"paragraph"===i?.type||"text"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+o.raw,i.text+="\n"+o.raw,this.inlineQueue.at(-1).src=i.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title},t.push(o));continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),t.push(o);continue}let n=e;if(this.options.extensions?.startBlock){let t,i=1/0,o=e.slice(1);this.options.extensions.startBlock.forEach((e=>{t=e.call({lexer:this},o),"number"==typeof t&&t>=0&&(i=Math.min(i,t))})),i<1/0&&i>=0&&(n=e.substring(0,i+1))}if(this.state.top&&(o=this.tokenizer.paragraph(n))){let a=t.at(-1);i&&"paragraph"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+o.raw,a.text+="\n"+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):t.push(o),i=n.length!==e.length,e=e.substring(o.raw.length)}else if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);let i=t.at(-1);"text"===i?.type?(i.raw+=(i.raw.endsWith("\n")?"":"\n")+o.raw,i.text+="\n"+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=i.text):t.push(o)}else if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i=e,o=null;if(this.tokens.links){let e=Object.keys(this.tokens.links);if(e.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(i));)e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(i));)i=i.slice(0,o.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(i));)i=i.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);i=this.options.hooks?.emStrongMask?.call({lexer:this},i)??i;let n=!1,a="";for(;e;){let o;if(n||(a=""),n=!1,this.options.extensions?.inline?.some((i=>!!(o=i.call({lexer:this},e,t))&&(e=e.substring(o.raw.length),t.push(o),!0))))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);let i=t.at(-1);"text"===o.type&&"text"===i?.type?(i.raw+=o.raw,i.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,i,a)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let r=e;if(this.options.extensions?.startInline){let t,i=1/0,o=e.slice(1);this.options.extensions.startInline.forEach((e=>{t=e.call({lexer:this},o),"number"==typeof t&&t>=0&&(i=Math.min(i,t))})),i<1/0&&i>=0&&(r=e.substring(0,i+1))}if(o=this.tokenizer.inlineText(r)){e=e.substring(o.raw.length),"_"!==o.raw.slice(-1)&&(a=o.raw.slice(-1)),n=!0;let i=t.at(-1);"text"===i?.type?(i.raw+=o.raw,i.text+=o.text):t.push(o)}else if(e){let t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return t}},fe=class{options;parser;constructor(e){this.options=e||u}space(e){return""}code({text:e,lang:t,escaped:i}){let o=(t||"").match(f.notSpaceStart)?.[0],n=e.replace(f.endingNewline,"")+"\n";return o?'<pre><code class="language-'+de(o)+'">'+(i?n:de(n,!0))+"</code></pre>\n":"<pre><code>"+(i?n:de(n,!0))+"</code></pre>\n"}blockquote({tokens:e}){return`<blockquote>\n${this.parser.parse(e)}</blockquote>\n`}html({text:e}){return e}def(e){return""}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){let t=e.ordered,i=e.start,o="";for(let t=0;t<e.items.length;t++){let i=e.items[t];o+=this.listitem(i)}let n=t?"ol":"ul";return"<"+n+(t&&1!==i?' start="'+i+'"':"")+">\n"+o+"</"+n+">\n"}listitem(e){let t="";if(e.task){let i=this.checkbox({checked:!!e.checked});e.loose?"paragraph"===e.tokens[0]?.type?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=i+" "+de(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",i="";for(let t=0;t<e.header.length;t++)i+=this.tablecell(e.header[t]);t+=this.tablerow({text:i});let o="";for(let t=0;t<e.rows.length;t++){let n=e.rows[t];i="";for(let e=0;e<n.length;e++)i+=this.tablecell(n[e]);o+=this.tablerow({text:i})}return o&&(o=`<tbody>${o}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+o+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){let t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${de(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){let o=this.parser.parseInline(i),n=ce(e);if(null===n)return o;let a='<a href="'+(e=n)+'"';return t&&(a+=' title="'+de(t)+'"'),a+=">"+o+"</a>",a}image({href:e,title:t,text:i,tokens:o}){o&&(i=this.parser.parseInline(o,this.parser.textRenderer));let n=ce(e);if(null===n)return de(i);let a=`<img src="${e=n}" alt="${i}"`;return t&&(a+=` title="${de(t)}"`),a+=">",a}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:de(e.text)}},_e=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},ve=class e{options;renderer;textRenderer;constructor(e){this.options=e||u,this.options.renderer=this.options.renderer||new fe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new _e}static parse(t,i){return new e(i).parse(t)}static parseInline(t,i){return new e(i).parseInline(t)}parse(e,t=!0){let i="";for(let o=0;o<e.length;o++){let n=e[o];if(this.options.extensions?.renderers?.[n.type]){let e=n,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(e.type)){i+=t||"";continue}}let a=n;switch(a.type){case"space":i+=this.renderer.space(a);continue;case"hr":i+=this.renderer.hr(a);continue;case"heading":i+=this.renderer.heading(a);continue;case"code":i+=this.renderer.code(a);continue;case"table":i+=this.renderer.table(a);continue;case"blockquote":i+=this.renderer.blockquote(a);continue;case"list":i+=this.renderer.list(a);continue;case"html":i+=this.renderer.html(a);continue;case"def":i+=this.renderer.def(a);continue;case"paragraph":i+=this.renderer.paragraph(a);continue;case"text":{let n=a,r=this.renderer.text(n);for(;o+1<e.length&&"text"===e[o+1].type;)n=e[++o],r+="\n"+this.renderer.text(n);i+=t?this.renderer.paragraph({type:"paragraph",raw:r,text:r,tokens:[{type:"text",raw:r,text:r,escaped:!0}]}):r;continue}default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}parseInline(e,t=this.renderer){let i="";for(let o=0;o<e.length;o++){let n=e[o];if(this.options.extensions?.renderers?.[n.type]){let e=this.options.extensions.renderers[n.type].call({parser:this},n);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){i+=e||"";continue}}let a=n;switch(a.type){case"escape":case"text":i+=t.text(a);break;case"html":i+=t.html(a);break;case"link":i+=t.link(a);break;case"image":i+=t.image(a);break;case"strong":i+=t.strong(a);break;case"em":i+=t.em(a);break;case"codespan":i+=t.codespan(a);break;case"br":i+=t.br(a);break;case"del":i+=t.del(a);break;default:{let e='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return i}},be=class{options;block;constructor(e){this.options=e||u}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}emStrongMask(e){return e}provideLexer(){return this.block?me.lex:me.lexInline}provideParser(){return this.block?ve.parse:ve.parseInline}},ye=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ve;Renderer=fe;TextRenderer=_e;Lexer=me;Tokenizer=ge;Hooks=be;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(let o of e)switch(i=i.concat(t.call(this,o)),o.type){case"table":{let e=o;for(let o of e.header)i=i.concat(this.walkTokens(o.tokens,t));for(let o of e.rows)for(let e of o)i=i.concat(this.walkTokens(e.tokens,t));break}case"list":{let e=o;i=i.concat(this.walkTokens(e.items,t));break}default:{let e=o;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((o=>{let n=e[o].flat(1/0);i=i.concat(this.walkTokens(n,t))})):e.tokens&&(i=i.concat(this.walkTokens(e.tokens,t)))}}return i}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{let i={...e};if(i.async=this.defaults.async||i.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){let i=t.renderers[e.name];t.renderers[e.name]=i?function(...t){let o=e.renderer.apply(this,t);return!1===o&&(o=i.apply(this,t)),o}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");let i=t[e.level];i?i.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),i.extensions=t),e.renderer){let t=this.defaults.renderer||new fe(this.defaults);for(let i in e.renderer){if(!(i in t))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;let o=i,n=e.renderer[o],a=t[o];t[o]=(...e)=>{let i=n.apply(t,e);return!1===i&&(i=a.apply(t,e)),i||""}}i.renderer=t}if(e.tokenizer){let t=this.defaults.tokenizer||new ge(this.defaults);for(let i in e.tokenizer){if(!(i in t))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;let o=i,n=e.tokenizer[o],a=t[o];t[o]=(...e)=>{let i=n.apply(t,e);return!1===i&&(i=a.apply(t,e)),i}}i.tokenizer=t}if(e.hooks){let t=this.defaults.hooks||new be;for(let i in e.hooks){if(!(i in t))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;let o=i,n=e.hooks[o],a=t[o];be.passThroughHooks.has(i)?t[o]=e=>{if(this.defaults.async&&be.passThroughHooksRespectAsync.has(i))return Promise.resolve(n.call(t,e)).then((e=>a.call(t,e)));let o=n.call(t,e);return a.call(t,o)}:t[o]=(...e)=>{let i=n.apply(t,e);return!1===i&&(i=a.apply(t,e)),i}}i.hooks=t}if(e.walkTokens){let t=this.defaults.walkTokens,o=e.walkTokens;i.walkTokens=function(e){let i=[];return i.push(o.call(this,e)),t&&(i=i.concat(t.call(this,e))),i}}this.defaults={...this.defaults,...i}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return me.lex(e,t??this.defaults)}parser(e,t){return ve.parse(e,t??this.defaults)}parseMarkdown(e){return(t,i)=>{let o={...i},n={...this.defaults,...o},a=this.onError(!!n.silent,!!n.async);if(!0===this.defaults.async&&!1===o.async)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||null===t)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof t)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=e);let r=n.hooks?n.hooks.provideLexer():e?me.lex:me.lexInline,s=n.hooks?n.hooks.provideParser():e?ve.parse:ve.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(t):t).then((e=>r(e,n))).then((e=>n.hooks?n.hooks.processAllTokens(e):e)).then((e=>n.walkTokens?Promise.all(this.walkTokens(e,n.walkTokens)).then((()=>e)):e)).then((e=>s(e,n))).then((e=>n.hooks?n.hooks.postprocess(e):e)).catch(a);try{n.hooks&&(t=n.hooks.preprocess(t));let e=r(t,n);n.hooks&&(e=n.hooks.processAllTokens(e)),n.walkTokens&&this.walkTokens(e,n.walkTokens);let i=s(e,n);return n.hooks&&(i=n.hooks.postprocess(i)),i}catch(e){return a(e)}}}onError(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){let e="<p>An error occurred:</p><pre>"+de(i.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(i);throw i}}};function xe(e,t){return ye.parse(e,t)}xe.options=xe.setOptions=function(e){return ye.setOptions(e),xe.defaults=ye.defaults,h(xe.defaults),xe},xe.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},xe.defaults=u,xe.use=function(...e){return ye.use(...e),xe.defaults=ye.defaults,h(xe.defaults),xe},xe.walkTokens=function(e,t){return ye.walkTokens(e,t)},xe.parseInline=ye.parseInline,xe.Parser=ve,xe.parser=ve.parse,xe.Renderer=fe,xe.TextRenderer=_e,xe.Lexer=me,xe.lexer=me.lex,xe.Tokenizer=ge,xe.Hooks=be,xe.parse=xe,xe.options,xe.setOptions,xe.use,xe.walkTokens,xe.parseInline,ve.parse,me.lex;class ke extends n.m{constructor(){super(...arguments),this._templateService=null,this._renderedContentCache=new Map,this._templateInputDebounce=null,this._templateUpdateListener=null,this.metadata={type:"markdown",title:"Markdown Module",description:"Display rich markdown content",author:"WJD Designs",version:"1.0.0",icon:"mdi:language-markdown",category:"content",tags:["markdown","content","rich-text","formatting","template"]}}_hashString(e){let t=0;for(let i=0;i<e.length;i+=1)t=(t<<5)-t+e.charCodeAt(i)&4294967295;return Math.abs(t).toString(36)}_clearMarkdownCache(e){e?Array.from(this._renderedContentCache.keys()).filter((t=>t.startsWith(`${e}_`))).forEach((e=>{this._renderedContentCache.delete(e)})):this._renderedContentCache.clear()}cleanup(){this._templateUpdateListener&&(window.removeEventListener("ultra-card-template-update",this._templateUpdateListener),this._templateUpdateListener=null),this._templateService&&(this._templateService=null),this._renderedContentCache.clear(),this._templateInputDebounce&&(clearTimeout(this._templateInputDebounce),this._templateInputDebounce=null)}createDefault(e,t){return{id:e||this.generateId("markdown"),type:"markdown",markdown_content:"# Markdown Module\n\nThe **Markdown** module supports rich formatting including **bold**, *italicized*, `inline code`, ~~strikethrough~~, and [links](https://example.com).\n\n> Blockquotes and nested content work perfectly\n>> Including nested blockquotes\n\n**Lists and formatting:**\n- **Bold**, *italic*, ~~strikethrough~~\n- `inline code` and code blocks\n- Tables, headers, and horizontal rules\n\n**Jinja Templates:**\n- Current time: {{now().strftime('%H:%M:%S')}}\n- Date: {{now().strftime('%Y-%m-%d')}}\n\nAll standard markdown features are automatically enabled!",enable_html:!1,enable_tables:!0,enable_code_highlighting:!0,template_mode:!1,template:"",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,n){var a;const r=e,s=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Content Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,c.kg)("editor.markdown.content.title",s,"Markdown Content")}
          </div>
          <div class="field-group">
            <div class="field-title" style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">
              ${(0,c.kg)("editor.markdown.content.label",s,"Content")}
            </div>
            <div
              class="field-description"
              style="font-size: 12px; margin-bottom: 8px; color: var(--secondary-text-color);"
            >
              ${(0,c.kg)("editor.markdown.content.desc",s,"Enter your markdown content with full formatting support")}
            </div>
            <ultra-template-editor
              .hass=${t}
              .value=${r.markdown_content||""}
              .placeholder=${"# Welcome\n\nEnter your **markdown** content here with full formatting support...\n\n- Lists\n- **Bold** and *italic*\n- Tables, code blocks, and more!"}
              .minHeight=${200}
              .maxHeight=${400}
              @value-changed=${e=>{n({markdown_content:e.detail.value})}}
            ></ultra-template-editor>
          </div>
        </div>

        <!-- HTML Support Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,c.kg)("editor.markdown.html.title",s,"HTML Support")}
          </div>

          <div class="field-group">
            <ha-form
              .hass=${t}
              .data=${{enable_html:r.enable_html||!1}}
              .schema=${[{name:"enable_html",label:(0,c.kg)("editor.markdown.enable_html",s,"Enable HTML"),description:(0,c.kg)("editor.markdown.enable_html_desc",s,"Allow raw HTML tags in markdown content (all standard markdown features are always enabled)"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>n({enable_html:e.detail.value.enable_html})}
            ></ha-form>
          </div>
        </div>

        <!-- Template Configuration -->
        <div
          class="settings-section template-mode-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,c.kg)("editor.markdown.template_mode",s,"Template Mode")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,c.kg)("editor.markdown.template_mode_desc",s,"Use Home Assistant templating syntax to render markdown content dynamically")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:r.template_mode||!1}}
              .schema=${[{name:"template_mode",label:(0,c.kg)("editor.markdown.template_mode",s,"Template Mode"),description:(0,c.kg)("editor.markdown.template_mode_desc",s,"Use Home Assistant templating syntax to render markdown content dynamically"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>n({template_mode:e.detail.value.template_mode})}
            ></ha-form>
          </div>

          ${r.template_mode?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                  >
                    ${(0,c.kg)("editor.markdown.template.content",s,"Template Content")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 12px; margin-bottom: 8px; color: var(--secondary-text-color);"
                  >
                    ${(0,c.kg)("editor.markdown.template.content_desc",s,"Enter markdown content with Jinja2 templates that will be processed dynamically")}
                  </div>
                  <ultra-template-editor
                    .hass=${t}
                    .value=${r.template||r.markdown_content||""}
                    .placeholder=${"# Welcome Home\n\nToday is **{{ now().strftime('%A, %B %d') }}**\n\nCurrent temperature: {{ states('sensor.temperature') }}°F"}
                    .minHeight=${200}
                    .maxHeight=${400}
                    @value-changed=${e=>{n({template:e.detail.value})}}
                  ></ultra-template-editor>
                </div>

                <div class="template-examples">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,c.kg)("editor.markdown.template.examples_title",s,"Common Examples:")}
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      # Dashboard Header<br />
                      Today is **{{ now().strftime('%A, %B %d') }}**<br />
                      Temperature: {{ states('sensor.temperature') }}°F
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,c.kg)("editor.markdown.template.examples.header",s,"Dynamic header with current date and sensor values")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      ## System Status<br />
                      - ✅ Internet: Connected<br />
                      - ✅ Security: {{ states('alarm_control_panel.home') }}<br />
                      - ⚠️ Backup: {{ states('sensor.backup_status') }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,c.kg)("editor.markdown.template.examples.status",s,"Status list with dynamic entity states")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      ### Quick Info<br /><br />
                      | Sensor | Value |<br />
                      | ----------- | ------------------------------------ |<br />
                      | Temperature | {{ states('sensor.temperature') }}°F |<br />
                      | Humidity | {{ states('sensor.humidity') }}% |
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,c.kg)("editor.markdown.template.examples.table",s,"Table with dynamic sensor data")}
                    </div>
                  </div>
                </div>
              `:""}
        </div>
      </div>
    `}renderActionsTab(e,t,i,o){return a.A.render(e,t,(e=>o(e)))}renderPreview(e,t,i,n){var a,r;const d=e;this._templateUpdateListener||"undefined"==typeof window||(this._templateUpdateListener=()=>{this._renderedContentCache.clear(),this.triggerPreviewUpdate()},window.addEventListener("ultra-card-template-update",this._templateUpdateListener));const c=d,u=d.design||{},h={color:d.color||u.color,font_size:d.font_size||u.font_size,font_weight:d.font_weight||u.font_weight,font_style:d.font_style||u.font_style,text_transform:d.text_transform||u.text_transform,font_family:d.font_family||u.font_family,line_height:d.line_height||u.line_height,letter_spacing:d.letter_spacing||u.letter_spacing,text_align:d.text_align||u.text_align,text_shadow_h:d.text_shadow_h||u.text_shadow_h,text_shadow_v:d.text_shadow_v||u.text_shadow_v,text_shadow_blur:d.text_shadow_blur||u.text_shadow_blur,text_shadow_color:d.text_shadow_color||u.text_shadow_color,background_color:d.background_color||u.background_color,background_image:d.background_image||u.background_image,background_image_type:d.background_image_type||u.background_image_type,background_image_entity:d.background_image_entity||u.background_image_entity,background_repeat:d.background_repeat||u.background_repeat,background_position:d.background_position||u.background_position,background_size:d.background_size||u.background_size,backdrop_filter:d.backdrop_filter||u.backdrop_filter,width:d.width||u.width,height:d.height||u.height,max_width:d.max_width||u.max_width,max_height:d.max_height||u.max_height,min_width:d.min_width||u.min_width,min_height:d.min_height||u.min_height,margin_top:d.margin_top||u.margin_top,margin_bottom:d.margin_bottom||u.margin_bottom,margin_left:d.margin_left||u.margin_left,margin_right:d.margin_right||u.margin_right,padding_top:d.padding_top||u.padding_top,padding_bottom:d.padding_bottom||u.padding_bottom,padding_left:d.padding_left||u.padding_left,padding_right:d.padding_right||u.padding_right,border_radius:d.border_radius||u.border_radius,border_style:d.border_style||u.border_style,border_width:d.border_width||u.border_width,border_color:d.border_color||u.border_color,position:d.position||u.position,top:d.top||u.top,bottom:d.bottom||u.bottom,left:d.left||u.left,right:d.right||u.right,z_index:d.z_index||u.z_index,overflow:d.overflow||u.overflow,clip_path:d.clip_path||u.clip_path,box_shadow_h:d.box_shadow_h||u.box_shadow_h,box_shadow_v:d.box_shadow_v||u.box_shadow_v,box_shadow_blur:d.box_shadow_blur||u.box_shadow_blur,box_shadow_spread:d.box_shadow_spread||u.box_shadow_spread,box_shadow_color:d.box_shadow_color||u.box_shadow_color},g={padding:h.padding_top||h.padding_bottom||h.padding_left||h.padding_right||c.padding_top||c.padding_bottom||c.padding_left||c.padding_right?`${this.addPixelUnit(h.padding_top||c.padding_top)||"0px"} ${this.addPixelUnit(h.padding_right||c.padding_right)||"0px"} ${this.addPixelUnit(h.padding_bottom||c.padding_bottom)||"0px"} ${this.addPixelUnit(h.padding_left||c.padding_left)||"0px"}`:"16px",margin:h.margin_top||h.margin_bottom||h.margin_left||h.margin_right||c.margin_top||c.margin_bottom||c.margin_left||c.margin_right?`${h.margin_top||c.margin_top||"0px"} ${h.margin_right||c.margin_right||"0px"} ${h.margin_bottom||c.margin_bottom||"0px"} ${h.margin_left||c.margin_left||"0px"}`:"0",background:h.background_color&&"transparent"!==h.background_color?h.background_color:c.background_color&&"transparent"!==c.background_color?c.background_color:"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},c),h),t),backgroundSize:h.background_size||c.background_size||"cover",backgroundPosition:h.background_position||c.background_position||"center",backgroundRepeat:h.background_repeat||c.background_repeat||"no-repeat",border:(h.border_style||c.border_style)&&"none"!==(h.border_style||c.border_style)?`${this.addPixelUnit(h.border_width||c.border_width)||"1px"} ${h.border_style||c.border_style} ${h.border_color||c.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(h.border_radius||c.border_radius)||"0",position:h.position||c.position||"static",top:h.top||c.top||"auto",bottom:h.bottom||c.bottom||"auto",left:h.left||c.left||"auto",right:h.right||c.right||"auto",zIndex:h.z_index||c.z_index||"auto",width:h.width||c.width||"100%",height:h.height||c.height||"auto",maxWidth:h.max_width||c.max_width||"100%",maxHeight:h.max_height||c.max_height||"none",minWidth:h.min_width||c.min_width||"none",minHeight:h.min_height||c.min_height||"auto",overflow:h.overflow||c.overflow||"visible",clipPath:h.clip_path||c.clip_path||"none",backdropFilter:h.backdrop_filter||c.backdrop_filter||"none",boxShadow:h.box_shadow_h&&h.box_shadow_v?`${h.box_shadow_h||"0"} ${h.box_shadow_v||"0"} ${h.box_shadow_blur||"0"} ${h.box_shadow_spread||"0"} ${h.box_shadow_color||"rgba(0,0,0,0.1)"}`:c.box_shadow_h&&c.box_shadow_v?`${c.box_shadow_h||"0"} ${c.box_shadow_v||"0"} ${c.box_shadow_blur||"0"} ${c.box_shadow_spread||"0"} ${c.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"},m={fontSize:(()=>h.font_size&&"string"==typeof h.font_size&&""!==h.font_size.trim()?/[a-zA-Z%]/.test(h.font_size)?h.font_size:this.addPixelUnit(h.font_size)||h.font_size:void 0!==c.font_size?`${c.font_size}px`:"clamp(12px, 3vw, 14px)")(),fontFamily:h.font_family||c.font_family||d.font_family||'var(--primary-font-family, "Roboto", sans-serif)',color:h&&h.color||c.color||d.color||"var(--primary-text-color)",textAlign:(h.text_align&&"inherit"!==h.text_align?h.text_align:void 0)||c.text_align||d.alignment||"left",lineHeight:h.line_height||c.line_height||d.line_height||1.4,letterSpacing:h.letter_spacing||c.letter_spacing||d.letter_spacing||"normal",padding:"0",maxHeight:(h.max_height&&"none"!==h.max_height?h.max_height:void 0)||(d.max_height&&"none"!==d.max_height?d.max_height:"none"),overflow:(h.max_height&&"none"!==h.max_height?h.overflow||"visible":void 0)||d.max_height&&"none"!==d.max_height&&d.overflow_behavior||"visible",textShadow:h.text_shadow_h&&h.text_shadow_v?`${h.text_shadow_h||"0"} ${h.text_shadow_v||"0"} ${h.text_shadow_blur||"0"} ${h.text_shadow_color||"rgba(0,0,0,0.5)"}`:c.text_shadow_h&&c.text_shadow_v?`${c.text_shadow_h||"0"} ${c.text_shadow_v||"0"} ${c.text_shadow_blur||"0"} ${c.text_shadow_color||"rgba(0,0,0,0.5)"}`:"none",boxShadow:h.box_shadow_h&&h.box_shadow_v?`${h.box_shadow_h||"0"} ${h.box_shadow_v||"0"} ${h.box_shadow_blur||"0"} ${h.box_shadow_spread||"0"} ${h.box_shadow_color||"rgba(0,0,0,0.1)"}`:c.box_shadow_h&&c.box_shadow_v?`${c.box_shadow_h||"0"} ${c.box_shadow_v||"0"} ${c.box_shadow_blur||"0"} ${c.box_shadow_spread||"0"} ${c.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none"},f=e=>{var i;if(!e)return"";let o=e;if(/\{\{[\s\S]*?\}\}|\{%[\s\S]*?%\}/.test(e)&&t){this._templateService||(this._templateService=new p.I(t)),t.__uvc_template_strings||(t.__uvc_template_strings={});const n=this._hashString(e),a=`state_text_markdown_${d.id}_${n}`;this._templateService.hasTemplateSubscription(a)||this._templateService.subscribeToTemplate(e,a,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const r=null===(i=t.__uvc_template_strings)||void 0===i?void 0:i[a];o=void 0!==r?String(r):"Template processing..."}const n={breaks:!1,gfm:!0,tables:!0,headerIds:!1,mangle:!1};try{let e=xe(o,n);return d.enable_html||(e=e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),e=e.replace(/<iframe\b[^<]*(?:(?!<\/iframe>)<[^<]*)*<\/iframe>/gi,""),e=e.replace(/<object\b[^<]*(?:(?!<\/object>)<[^<]*)*<\/object>/gi,""),e=e.replace(/<embed\b[^<]*>/gi,"")),e}catch(e){return console.warn("Ultra Card: Failed to process markdown:",e),o}},_=d.template_mode&&d.template?d.template:d.markdown_content||"",v=`${d.id}_${this._hashString(_)}`;let b=this._renderedContentCache.get(v)||_;const y=/\{\{[\s\S]*?\}\}|\{%[\s\S]*?%\}/.test(_);if(!this._renderedContentCache.has(v)||y)try{const e=f(_);this._renderedContentCache.set(v,e),b=e}catch(e){console.warn("Ultra Card: Failed to render markdown:",e),b=_}else if(y&&t){const e=this._hashString(_),i=`state_text_markdown_${d.id}_${e}`,o=null===(a=t.__uvc_template_strings)||void 0===a?void 0:a[i];if(void 0!==o){const e=f(String(o));this._renderedContentCache.set(v,e),b=e}}let x=null,k=null,w=!1,S=0,O=0;const A=o.qy`<div class="markdown-content" .innerHTML=${b}></div>`,C=null===(r=c.design)||void 0===r?void 0:r.hover_effect,$=l.k.getHoverEffectClass(C);return o.qy`
      <div
        class="markdown-module-container ${$}"
        style="${this.styleObjectToCss(g)}; cursor: ${d.tap_action&&"nothing"!==d.tap_action.action||d.hold_action&&"nothing"!==d.hold_action.action||d.double_tap_action&&"nothing"!==d.double_tap_action.action?"pointer":"default"};"
        @pointerdown=${e=>{e.preventDefault(),e.stopPropagation(),w=!1,k=setTimeout((()=>{w=!0,d.hold_action&&"nothing"!==d.hold_action.action&&s.K.handleAction(d.hold_action,t,e.target,i)}),500)}}
        @pointerup=${e=>{if(e.preventDefault(),e.stopPropagation(),k&&(clearTimeout(k),k=null),w)return void(w=!1);const o=Date.now();o-O<300&&1===S?(x&&(clearTimeout(x),x=null),S=0,d.double_tap_action&&"nothing"===d.double_tap_action.action||s.K.handleAction(d.double_tap_action||{action:"default"},t,e.target,i,d.entity)):(S=1,O=o,x=setTimeout((()=>{S=0,d.tap_action&&"nothing"===d.tap_action.action||s.K.handleAction(d.tap_action||{action:"default"},t,e.target,i,d.entity)}),300))}}
      >
        <div class="markdown-module-preview" style=${this.styleObjectToCss(m)}>
          ${A}
        </div>
      </div>
    `}renderLogicTab(e,t,i,o){return r.X.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors];if(t.markdown_content&&""!==t.markdown_content.trim()||i.push("Markdown content is required"),t.font_size&&(t.font_size<1||t.font_size>200)&&i.push("Font size must be between 1 and 200 pixels"),t.link&&""!==t.link.trim())try{new URL(t.link)}catch(e){t.link.startsWith("/")||t.link.startsWith("#")||i.push('Link must be a valid URL or start with "/" for relative paths')}return{valid:0===i.length,errors:i}}getStyles(){return"\n      /* Match Home Assistant ha-markdown exactly */\n      .markdown-module-preview {\n        display: block;\n        -ms-user-select: text;\n        -webkit-user-select: text;\n        -moz-user-select: text;\n      }\n\n      .markdown-content {\n        width: 100%;\n      }\n\n      /* Match HA's exact first/last child rules */\n      .markdown-content > *:first-child {\n        margin-top: 0;\n      }\n\n      .markdown-content > *:last-child {\n        margin-bottom: 0;\n      }\n\n      /* Links - Match HA exactly */\n      .markdown-content a {\n        color: -webkit-link;\n        cursor: pointer;\n        text-decoration: underline !important;\n      }\n\n      /* Images - Match HA */\n      .markdown-content img {\n        max-width: 100%;\n      }\n\n      /* Code and Pre - Match HA exactly */\n      .markdown-content code,\n      .markdown-content pre {\n        background-color: var(--markdown-code-background-color, none);\n        border-radius: 3px;\n      }\n\n      /* Strikethrough - exact HA styling */\n      .markdown-content del {\n        text-decoration: line-through !important;\n        color: var(--primary-text-color) !important;\n      }\n\n      .markdown-content code {\n        font-size: inherit;\n        color: var(--primary-text-color) !important;\n        padding: .2em .4em;\n      }\n\n      .markdown-content pre code {\n        padding: 0;\n      }\n\n      .markdown-content pre {\n        padding: 16px;\n        overflow: auto;\n        line-height: var(--ha-line-height-condensed);\n        font-family: var(--ha-font-family-code);\n      }\n\n      /* Headers - Match HA exactly */\n      .markdown-content h1,\n      .markdown-content h2,\n      .markdown-content h3,\n      .markdown-content h4,\n      .markdown-content h5,\n      .markdown-content h6 {\n        line-height: initial;\n      }\n\n      .markdown-content h2 {\n        font-size: inherit;\n        font-weight: var(--ha-font-weight-bold);\n      }\n\n      /* Horizontal rules - Match HA */\n      .markdown-content hr {\n        border-color: var(--divider-color);\n        border-bottom: none;\n        margin: 16px 0;\n      }\n\n      /* Module-specific grid layouts */\n      .two-column-grid {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 20px;\n        margin-bottom: 20px;\n      }\n\n      .three-column-grid {\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;\n        gap: 16px;\n        margin-bottom: 20px;\n      }\n       \n      @media (max-width: 768px) {\n        .two-column-grid,\n        .three-column-grid {\n          grid-template-columns: 1fr;\n          gap: 16px;\n        }\n      }\n    "}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}getBackgroundImageCSS(e,t){var i,o;const n=e.background_image_type,a=e.background_image,r=e.background_image_entity;if(!n||"none"===n)return"none";switch(n){case"upload":if(a)return`url("${(0,d.V)(t,a)}")`;break;case"url":if(a)return`url("${a}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const n=(null===(i=e.attributes)||void 0===i?void 0:i.entity_picture)||(null===(o=e.attributes)||void 0===o?void 0:o.image)||("string"==typeof e.state?e.state:"");if(n&&"unknown"!==n&&"unavailable"!==n)return`url("${(0,d.V)(t,n)}")`}}}return"none"}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}}},2929:(e,t,i)=>{i.d(t,{X:()=>p});var o=i(5183),n=i(866),a=(i(6768),i(4276)),r=i(2314),s=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};class l{static rgbToHs(e,t,i){e/=255,t/=255,i/=255;const o=Math.max(e,t,i),n=Math.min(e,t,i);let a=0;const r=0===o?0:(o-n)/o;if(o!==n){switch(o){case e:a=(t-i)/(o-n)+(t<i?6:0);break;case t:a=(i-e)/(o-n)+2;break;case i:a=(e-t)/(o-n)+4}a/=6}return[Math.round(360*a),Math.round(100*r)]}static hsToRgb(e,t){e/=360,t/=100;const i=Math.floor(6*e),o=6*e-i,n=1*(1-t),a=1*(1-o*t),r=1*(1-(1-o)*t);let s,l,d;switch(i%6){case 0:[s,l,d]=[1,r,n];break;case 1:[s,l,d]=[a,1,n];break;case 2:[s,l,d]=[n,1,r];break;case 3:[s,l,d]=[n,a,1];break;case 4:[s,l,d]=[r,n,1];break;case 5:[s,l,d]=[1,n,a];break;default:[s,l,d]=[0,0,0]}return[Math.round(255*s),Math.round(255*l),Math.round(255*d)]}static rgbToXy(e,t,i){t/=255,i/=255;const o=.4124*(e=(e/=255)>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92),n=.2126*e+.7152*t+.0722*i,a=o+n+(.0193*e+.1192*t+.9505*i);return 0===a?[.3127,.329]:[Math.round(o/a*1e4)/1e4,Math.round(n/a*1e4)/1e4]}static xyToRgb(e,t,i=1){const o=i/t*e,n=i/t*(1-e-t);let a=3.2406*o+-1.5372*i+-.4986*n,r=-.9689*o+1.8758*i+.0415*n,s=.0557*o+-.204*i+1.057*n;return a=a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055,r=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,s=s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055,a=Math.max(0,Math.min(1,a)),r=Math.max(0,Math.min(1,r)),s=Math.max(0,Math.min(1,s)),[Math.round(255*a),Math.round(255*r),Math.round(255*s)]}static rgbToHex(e,t,i){return"#"+[e,t,i].map((e=>{const t=e.toString(16);return 1===t.length?"0"+t:t})).join("")}static hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}static kelvinToMired(e){return Math.round(1e6/e)}static miredToKelvin(e){return Math.round(1e6/e)}}let d=class extends o.WF{constructor(){super(...arguments),this.mode="hs",this.min_mireds=153,this.max_mireds=500,this.disabled=!1,this.rgbww_mode=!1,this._isDragging=!1,this._currentRgb=[255,255,255],this._currentHs=[0,0],this._currentXy=[.3127,.329],this._currentColorTemp=333,this._showColorPicker=!1,this._ignoringNextEffectChange=!1,this._processingEffectChange=!1,this._effectDropdownOpen=!1,this._effectSearchTerm="",this._filteredEffects=[],this.handleClickOutside=e=>{var t;const i=e.target,o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".custom-select-container");!o||o.contains(i)||this.contains(i)||(console.log("🎯 Click outside detected, closing dropdown"),this._effectDropdownOpen=!1,this._effectSearchTerm="",this.requestUpdate())}}firstUpdated(){this.updateCurrentValues(),document.addEventListener("click",this.handleClickOutside)}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this.handleClickOutside)}updated(e){(e.has("rgb_color")||e.has("hs_color")||e.has("xy_color")||e.has("color_temp"))&&this.updateCurrentValues()}updateCurrentValues(){this.rgb_color?(this._currentRgb=[...this.rgb_color],this._currentHs=l.rgbToHs(this.rgb_color[0],this.rgb_color[1],this.rgb_color[2]),this._currentXy=l.rgbToXy(this.rgb_color[0],this.rgb_color[1],this.rgb_color[2])):this.hs_color?(this._currentHs=[...this.hs_color],this._currentRgb=l.hsToRgb(this.hs_color[0],this.hs_color[1]),this._currentXy=l.rgbToXy(this._currentRgb[0],this._currentRgb[1],this._currentRgb[2])):this.xy_color&&(this._currentXy=[...this.xy_color],this._currentRgb=l.xyToRgb(this.xy_color[0],this.xy_color[1]),this._currentHs=l.rgbToHs(this._currentRgb[0],this._currentRgb[1],this._currentRgb[2])),this.color_temp&&(this._currentColorTemp=this.color_temp)}fireColorChanged(e){let t=this.mode;!this.rgbww_mode||"hs"!==this.mode&&"rgb"!==this.mode&&"xy"!==this.mode||(t="rgbww");const i=new CustomEvent("color-changed",{detail:Object.assign({rgb_color:this._currentRgb,hs_color:this._currentHs,xy_color:this._currentXy,color_temp:this._currentColorTemp,effect:this.effect,mode:t,rgbww_mode:this.rgbww_mode},e)});this.dispatchEvent(i)}openColorPicker(){this.disabled||(this._showColorPicker=!this._showColorPicker)}handleUltraColorPickerChange(e){const t=e.detail.value;this.handleHexChange(t),this._showColorPicker=!1}handleTestPreset(){const e=new CustomEvent("test-preset",{detail:{mode:this.mode,rgb_color:this.rgb_color,hs_color:this.hs_color,xy_color:this.xy_color,color_temp:this.color_temp,effect:this.effect},bubbles:!0,composed:!0});this.dispatchEvent(e)}handleColorWheelClick(e){if(this.disabled)return;const t=e.currentTarget.getBoundingClientRect(),i=t.width/2,o=t.height/2,n=e.clientX-t.left-i,a=e.clientY-t.top-o,r=Math.sqrt(n*n+a*a),s=Math.min(t.width,t.height)/2-3,d=Math.min(r,s);let c=Math.atan2(a,n)*(180/Math.PI);c+=90,c<0&&(c+=360),c>=360&&(c-=360);const p=100*Math.min(d/s,1);this._currentHs=[Math.round(c),Math.round(p)],this._currentRgb=l.hsToRgb(c,p),this._currentXy=l.rgbToXy(this._currentRgb[0],this._currentRgb[1],this._currentRgb[2]),this.fireColorChanged({rgb_color:this._currentRgb,hs_color:this._currentHs,xy_color:this._currentXy,mode:"hs"})}handleRgbChange(e,t){if(this.disabled)return;const i=[...this._currentRgb];i[e]=Math.max(0,Math.min(255,t)),this._currentRgb=i,this._currentHs=l.rgbToHs(i[0],i[1],i[2]),this._currentXy=l.rgbToXy(i[0],i[1],i[2]),this.fireColorChanged({rgb_color:this._currentRgb,hs_color:this._currentHs,xy_color:this._currentXy,mode:"rgb"})}handleHexChange(e){if(this.disabled)return;const t=l.hexToRgb(e);t&&(this._currentRgb=t,this._currentHs=l.rgbToHs(t[0],t[1],t[2]),this._currentXy=l.rgbToXy(t[0],t[1],t[2]),this.fireColorChanged({rgb_color:this._currentRgb,hs_color:this._currentHs,xy_color:this._currentXy,mode:"rgb"}))}handleColorTempChange(e){this.disabled||(this._currentColorTemp=Math.max(this.min_mireds,Math.min(this.max_mireds,e)),this.rgbww_mode?this.fireColorChanged({rgb_color:this._currentRgb,hs_color:this._currentHs,xy_color:this._currentXy,color_temp:this._currentColorTemp,mode:"rgbww"}):this.fireColorChanged({color_temp:this._currentColorTemp,mode:"color_temp"}))}handleEffectsTabClick(){var e;console.log("🎯 Effects tab clicked!"),console.log("🎯 Component disabled:",this.disabled),console.log("🎯 Effect list length:",(null===(e=this.effect_list)||void 0===e?void 0:e.length)||0),console.log("🎯 Current mode before:",this.mode),this.disabled?console.log("🎯 Tab click blocked - component is disabled"):(this.mode="effect",console.log("🎯 Current mode after:",this.mode),this.requestUpdate())}handleEffectSelectionSimple(e){console.log("🎆 Simple effect selection:",e),this.disabled?console.log("🎆 Component disabled, ignoring"):(this._effectDropdownOpen=!1,this._effectSearchTerm="",this.effect=e,console.log("🎆 Updated this.effect to:",this.effect),e&&""!==e.trim()?(console.log("🎆 Effect selected, switching to effect mode and firing event"),this.mode="effect",this.fireColorChanged({effect:e,mode:"effect"})):(console.log("🎆 No effect selected, clearing and switching to hs mode"),this.mode="hs",this.fireColorChanged({effect:"",mode:"hs"})))}updateFilteredEffects(){var e;const t=this._effectSearchTerm.toLowerCase();console.log("🔍 Filtering effects with search term:",t),console.log("🔍 Total effect list length:",(null===(e=this.effect_list)||void 0===e?void 0:e.length)||0),this._filteredEffects=(this.effect_list||[]).filter((e=>e.toLowerCase().includes(t))),console.log("🔍 Filtered effects count:",this._filteredEffects.length)}handleEffectSearch(e){const t=e.target;this._effectSearchTerm=t.value,this.updateFilteredEffects()}toggleEffectDropdown(){console.log("🎯 Toggle dropdown clicked! Current state:",this._effectDropdownOpen),console.log("🎯 Component disabled:",this.disabled),this.disabled?console.log("🎯 Component is disabled, not opening dropdown"):(this._effectDropdownOpen=!this._effectDropdownOpen,console.log("🎯 New dropdown state:",this._effectDropdownOpen),this._effectDropdownOpen&&(this.updateFilteredEffects(),console.log("🎯 Updated filtered effects, count:",this._filteredEffects.length),setTimeout((()=>{var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".effect-search");t?(t.focus(),console.log("🎯 Focused search input")):console.log("🎯 Could not find search input")}),100)),this.requestUpdate())}handleEffectChange(e){if(!this.disabled){if(console.log("🎬 handleEffectChange called with:",e),this._ignoringNextEffectChange)return console.log("🎬 Ignoring automatic effect change event"),void(this._ignoringNextEffectChange=!1);if(this._processingEffectChange)console.log("🎬 Already processing effect change, skipping");else{this._processingEffectChange=!0;try{const t=e||"";this.effect=t,console.log("🎬 Updated this.effect to:",this.effect),t&&""!==t.trim()?(console.log("🎬 Setting effect to:",t),this.fireColorChanged({effect:t,mode:"effect"})):(console.log("🎬 Effect is empty, clearing effect"),this.fireColorChanged({effect:"",mode:"hs"}))}catch(e){console.error("🎬 Error in handleEffectChange:",e)}finally{this._processingEffectChange=!1}}}}getColorWheelPickerPosition(){const[e,t]=this._currentHs,i=(e-90)*Math.PI/180,o=t/100*45;return{x:50+Math.cos(i)*o,y:50+Math.sin(i)*o}}render(){const e=this.getColorWheelPickerPosition(),t=l.rgbToHex(this._currentRgb[0],this._currentRgb[1],this._currentRgb[2]),i=l.miredToKelvin(this._currentColorTemp);return o.qy`
      <div class="light-color-picker ${this.disabled?"disabled":""}">
        <!-- Debug Info -->

        <!-- Color Mode Tabs -->
        <div class="color-mode-tabs">
          <button
            class="mode-tab ${"hs"===this.mode?"active":""}"
            @click=${()=>this.mode="hs"}
            .disabled=${this.disabled}
          >
            Color
          </button>
          <button
            class="mode-tab ${"color_temp"===this.mode?"active":""}"
            @click=${()=>this.mode="color_temp"}
            .disabled=${this.disabled}
          >
            White
          </button>
          <button
            class="mode-tab ${"effect"===this.mode?"active":""}"
            @click=${()=>{console.log("🎯 Effects tab clicked!"),console.log("🎯 Current mode before:",this.mode),this.mode="effect",console.log("🎯 Current mode after:",this.mode)}}
            .disabled=${this.disabled}
            style="position: relative; z-index: 10;"
          >
            Effects
          </button>
        </div>

        <!-- Color Controls -->
        ${"hs"===this.mode?o.qy`
              <div class="color-controls ${this.rgbww_mode?"rgbww-controls":""}">
                <!-- Color Wheel -->
                <div class="color-wheel-section">
                  <div
                    class="color-wheel"
                    @click=${this.handleColorWheelClick}
                    @mousedown=${e=>{this.disabled||(this._isDragging=!0,this.handleColorWheelClick(e))}}
                    @mousemove=${e=>{this._isDragging&&!this.disabled&&this.handleColorWheelClick(e)}}
                    @mouseup=${()=>this._isDragging=!1}
                    @mouseleave=${()=>this._isDragging=!1}
                  >
                    <div
                      class="color-wheel-picker"
                      style="left: ${e.x}%; top: ${e.y}%;"
                    ></div>
                  </div>
                </div>

                <!-- Color Values -->
                <div class="color-values">
                  <!-- RGB Values -->
                  <div class="rgb-section">
                    <div class="section-title">RGB Values</div>
                    <div class="rgb-inputs">
                      <div class="rgb-input-group">
                        <label>Red</label>
                        <input
                          type="number"
                          min="0"
                          max="255"
                          .value=${this._currentRgb[0]}
                          .disabled=${this.disabled}
                          @input=${e=>{const t=e.target;this.handleRgbChange(0,parseInt(t.value)||0)}}
                        />
                      </div>
                      <div class="rgb-input-group">
                        <label>Green</label>
                        <input
                          type="number"
                          min="0"
                          max="255"
                          .value=${this._currentRgb[1]}
                          .disabled=${this.disabled}
                          @input=${e=>{const t=e.target;this.handleRgbChange(1,parseInt(t.value)||0)}}
                        />
                      </div>
                      <div class="rgb-input-group">
                        <label>Blue</label>
                        <input
                          type="number"
                          min="0"
                          max="255"
                          .value=${this._currentRgb[2]}
                          .disabled=${this.disabled}
                          @input=${e=>{const t=e.target;this.handleRgbChange(2,parseInt(t.value)||0)}}
                        />
                      </div>
                    </div>
                  </div>

                  <!-- HEX Value -->
                  <div class="hex-section">
                    <div class="hex-input-group">
                      <label>HEX</label>
                      <div class="hex-input-container">
                        <input
                          type="text"
                          .value=${t}
                          .disabled=${this.disabled}
                          @input=${e=>{const t=e.target;this.handleHexChange(t.value)}}
                          placeholder="#ffffff"
                        />
                        <div
                          class="color-preview clickable"
                          style="background-color: ${t};"
                          @click=${this.openColorPicker}
                          title="Click to open color picker"
                        ></div>
                      </div>

                      <!-- Ultra Color Picker -->
                      ${this._showColorPicker?o.qy`
                            <div class="color-picker-dropdown">
                              <ultra-color-picker
                                .hass=${this.hass}
                                .value=${t}
                                @value-changed=${this.handleUltraColorPickerChange}
                              ></ultra-color-picker>
                            </div>
                          `:""}
                    </div>
                  </div>

                  <!-- HS Values -->
                  <div class="hs-section">
                    <div class="section-title">HS Values</div>
                    <div class="hs-values-display">
                      <span>H: ${this._currentHs[0]}°</span>
                      <span>S: ${this._currentHs[1]}%</span>
                    </div>
                  </div>

                  <!-- XY Values -->
                  <div class="xy-section">
                    <div class="section-title">XY Values</div>
                    <div class="xy-values-display">
                      <span>X: ${this._currentXy[0]}</span>
                      <span>Y: ${this._currentXy[1]}</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- RGBWW White Temperature Balance (shown when rgbww_mode is enabled) -->
              ${this.rgbww_mode?o.qy`
                    <div class="rgbww-divider">
                      <div class="divider-line"></div>
                      <span class="divider-label">White Temperature Balance</span>
                      <div class="divider-line"></div>
                    </div>
                    <div class="rgbww-temp-controls">
                      <div class="color-temp-slider-container">
                        <div class="temp-labels">
                          <span>Warm</span>
                          <span>${i}K</span>
                          <span>Cool</span>
                        </div>
                        <input
                          type="range"
                          min=${this.min_mireds}
                          max=${this.max_mireds}
                          step="1"
                          .value=${this._currentColorTemp}
                          .disabled=${this.disabled}
                          @input=${e=>{const t=e.target;this.handleColorTempChange(parseInt(t.value))}}
                          class="color-temp-slider"
                          style="direction: rtl;"
                        />
                        <div class="kelvin-markers">
                          <span>2000K</span>
                          <span>3000K</span>
                          <span>4000K</span>
                          <span>5000K</span>
                          <span>6500K</span>
                        </div>
                      </div>

                      <!-- Mired Input -->
                      <div class="mired-input-group">
                        <label>Mired</label>
                        <input
                          type="number"
                          min=${this.min_mireds}
                          max=${this.max_mireds}
                          .value=${this._currentColorTemp}
                          .disabled=${this.disabled}
                          @input=${e=>{const t=e.target;this.handleColorTempChange(parseInt(t.value)||this._currentColorTemp)}}
                        />
                      </div>
                    </div>
                  `:""}
            `:""}

        <!-- Color Temperature Controls -->
        ${"color_temp"===this.mode?o.qy`
              <div class="color-temp-controls">
                <div class="color-temp-section">
                  <div class="section-title">Color Temperature</div>
                  <div class="color-temp-slider-container">
                    <div class="temp-labels">
                      <span>Warm</span>
                      <span>${i}K</span>
                      <span>Cool</span>
                    </div>
                    <input
                      type="range"
                      min=${this.min_mireds}
                      max=${this.max_mireds}
                      step="1"
                      .value=${this._currentColorTemp}
                      .disabled=${this.disabled}
                      @input=${e=>{const t=e.target;this.handleColorTempChange(parseInt(t.value))}}
                      class="color-temp-slider"
                      style="direction: rtl;"
                    />
                    <div class="kelvin-markers">
                      <span>2000K</span>
                      <span>3000K</span>
                      <span>4000K</span>
                      <span>5000K</span>
                      <span>6500K</span>
                    </div>
                  </div>

                  <!-- Mired Input -->
                  <div class="mired-input-group">
                    <label>Mired</label>
                    <input
                      type="number"
                      min=${this.min_mireds}
                      max=${this.max_mireds}
                      .value=${this._currentColorTemp}
                      .disabled=${this.disabled}
                      @input=${e=>{const t=e.target;this.handleColorTempChange(parseInt(t.value)||this._currentColorTemp)}}
                    />
                  </div>
                </div>
              </div>
            `:""}

        <!-- Effects Controls -->
        ${"effect"===this.mode?this.effect_list&&this.effect_list.length>0?o.qy``:o.qy` <div
                style="padding: 16px; background: rgba(var(--rgb-warning-color), 0.1); border-radius: 8px; text-align: center;"
              >
                <ha-icon
                  icon="mdi:information-outline"
                  style="--mdc-icon-size: 24px; color: var(--warning-color); margin-bottom: 8px;"
                ></ha-icon>
                <div style="font-weight: 500; color: var(--warning-color); margin-bottom: 8px;">
                  No Shared Effects Available
                </div>
                <div style="font-size: 14px; color: var(--secondary-text-color); line-height: 1.4;">
                  The selected lighting devices don't have any effects in common.<br />
                  Try selecting devices of the same type for shared effects.
                </div>
              </div>`:""}
        ${"effect"===this.mode&&this.effect_list&&this.effect_list.length>0?o.qy`
              <div class="effects-controls">
                <div class="effects-section">
                  <div class="section-title">Light Effects</div>
                  <div class="effects-dropdown">
                    <div class="custom-select-container">
                      <!-- Selected Effect Display -->
                      <div
                        class="custom-select-trigger ${this._effectDropdownOpen?"open":""}"
                        @click=${e=>{e.stopPropagation(),this.toggleEffectDropdown()}}
                        .disabled=${this.disabled}
                      >
                        <span class="selected-effect"> ${this.effect||"No Effect"} </span>
                        <ha-icon
                          icon="mdi:chevron-down"
                          class="dropdown-arrow ${this._effectDropdownOpen?"rotated":""}"
                        ></ha-icon>
                      </div>

                      <!-- Searchable Dropdown -->
                      ${this._effectDropdownOpen?o.qy`
                            <div class="custom-dropdown-menu">
                              <!-- Search Input -->
                              <div class="search-container">
                                <input
                                  type="text"
                                  class="effect-search"
                                  placeholder="Search effects..."
                                  .value=${this._effectSearchTerm}
                                  @input=${this.handleEffectSearch}
                                  @click=${e=>e.stopPropagation()}
                                />
                                <ha-icon icon="mdi:magnify" class="search-icon"></ha-icon>
                              </div>

                              <!-- Effect Options -->
                              <div class="effect-options">
                                <div
                                  class="effect-option ${this.effect?"":"selected"}"
                                  @click=${()=>this.handleEffectSelectionSimple("")}
                                >
                                  <span>No Effect</span>
                                </div>
                                ${(this._filteredEffects.length>0?this._filteredEffects:this.effect_list||[]).map((e=>o.qy`
                                    <div
                                      class="effect-option ${this.effect===e?"selected":""}"
                                      @click=${()=>this.handleEffectSelectionSimple(e)}
                                    >
                                      <span>${e}</span>
                                    </div>
                                  `))}
                                ${this.effect_list&&0!==this.effect_list.length||""!==this._effectSearchTerm?"":o.qy`
                                      <div
                                        class="effect-option"
                                        @click=${()=>this.handleEffectSelectionSimple("colorloop")}
                                      >
                                        <span>Color Loop (Common)</span>
                                      </div>
                                      <div
                                        class="effect-option"
                                        @click=${()=>this.handleEffectSelectionSimple("random")}
                                      >
                                        <span>Random (Common)</span>
                                      </div>
                                    `}
                                ${this._effectSearchTerm&&0===this._filteredEffects.length?o.qy` <div class="no-results">No effects found</div> `:""}
                              </div>
                            </div>
                          `:""}
                    </div>
                  </div>

                  <div
                    class="effect-description"
                    style="margin-top: 12px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.05); border-radius: 4px; font-size: 12px; color: var(--secondary-text-color);"
                  >
                    Effects create dynamic lighting patterns and will override any color settings.
                  </div>
                </div>
              </div>
            `:""}

        <!-- Test Preset Button -->
        <div class="test-preset-section" style="margin-top: 16px;">
          <button
            class="test-preset-btn"
            @click=${this.handleTestPreset}
            .disabled=${this.disabled}
            style="
            width: 100%;
            padding: 12px 16px;
            background: var(--primary-color);
            color: var(--text-primary-color);
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            opacity: ${this.disabled?"0.5":"1"};
          "
            onmouseover="this.style.background = 'var(--primary-color)'; this.style.opacity = '0.9';"
            onmouseout="this.style.background = 'var(--primary-color)'; this.style.opacity = '1';"
          >
            🎨 Test Preset
          </button>
        </div>
      </div>
    `}static get styles(){return o.AH`
      :host {
        display: block;
        width: 100%;
      }

      .light-color-picker {
        background: var(--card-background-color);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid var(--divider-color);
      }

      .light-color-picker.disabled {
        opacity: 0.5;
        pointer-events: none;
      }

      .color-mode-tabs {
        display: flex;
        gap: 4px;
        margin-bottom: 16px;
        background: var(--secondary-background-color);
        border-radius: 6px;
        padding: 4px;
      }

      .mode-tab {
        flex: 1;
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        background: transparent;
        color: var(--secondary-text-color);
        cursor: pointer;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .mode-tab.active {
        background: var(--primary-color);
        color: var(--text-primary-color);
      }

      .mode-tab:hover:not(.active):not(:disabled) {
        background: rgba(var(--rgb-primary-color), 0.1);
        color: var(--primary-text-color);
      }

      .color-controls {
        display: flex;
        gap: 20px;
        align-items: flex-start;
      }

      .color-wheel-section {
        flex-shrink: 0;
      }

      .color-wheel {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: conic-gradient(
          from 0deg,
          hsl(0, 100%, 50%),
          hsl(60, 100%, 50%),
          hsl(120, 100%, 50%),
          hsl(180, 100%, 50%),
          hsl(240, 100%, 50%),
          hsl(300, 100%, 50%),
          hsl(360, 100%, 50%)
        );
        position: relative;
        cursor: crosshair;
        border: 3px solid var(--card-background-color);
        box-shadow: 0 0 0 1px var(--divider-color);
        box-sizing: border-box;
        transition: all 0.2s ease;
      }

      .color-wheel:hover {
        box-shadow: 0 0 0 2px var(--primary-color);
        transform: scale(1.02);
      }

      .color-wheel-picker {
        width: 12px;
        height: 12px;
        background: white;
        border: 2px solid #333;
        border-radius: 50%;
        position: absolute;
        transform: translate(-50%, -50%);
        pointer-events: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
      }

      .color-values {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .section-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--primary-text-color);
        margin-bottom: 8px;
      }

      .rgb-inputs {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 8px;
      }

      .rgb-input-group {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .rgb-input-group label {
        font-size: 12px;
        color: var(--secondary-text-color);
        font-weight: 500;
      }

      .rgb-input-group input {
        padding: 6px 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 12px;
        text-align: center;
      }

      .rgb-input-group input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .hex-input-group {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .hex-input-group label {
        font-size: 12px;
        color: var(--secondary-text-color);
        font-weight: 500;
      }

      .hex-input-container {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .hex-input-container input {
        flex: 1;
        padding: 6px 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-family: monospace;
        font-size: 12px;
        text-transform: uppercase;
      }

      .hex-input-container input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .color-preview {
        width: 24px;
        height: 24px;
        border-radius: 4px;
        border: 1px solid var(--divider-color);
        flex-shrink: 0;
        transition: all 0.2s ease;
      }

      .color-preview.clickable {
        cursor: pointer;
      }

      .color-preview.clickable:hover {
        transform: scale(1.1);
        border-color: var(--primary-color);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
      }

      .color-picker-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        z-index: ${r.Mu.DROPDOWN_MENU};
        margin-top: 8px;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        padding: 16px;
      }

      .hex-input-group {
        position: relative;
      }

      .hs-values-display,
      .xy-values-display {
        display: flex;
        gap: 16px;
        font-size: 12px;
        color: var(--secondary-text-color);
        font-family: monospace;
      }

      .color-temp-controls {
        width: 100%;
      }

      .color-temp-slider-container {
        background: var(--secondary-background-color);
        border-radius: 8px;
        padding: 16px;
      }

      .temp-labels {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      .color-temp-slider {
        width: 100%;
        height: 8px;
        border-radius: 4px;
        outline: none;
        appearance: none;
        background: linear-gradient(to right, #ffb366, #fff2e6, #cce6ff);
        cursor: pointer;
        margin-bottom: 8px;
      }

      .color-temp-slider::-webkit-slider-thumb {
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--primary-color);
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
      }

      .color-temp-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--primary-color);
        cursor: pointer;
        border: 2px solid white;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
      }

      .kelvin-markers {
        display: flex;
        justify-content: space-between;
        font-size: 11px;
        color: var(--secondary-text-color);
        margin-top: 4px;
      }

      .mired-input-group {
        margin-top: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .mired-input-group label {
        font-size: 12px;
        color: var(--secondary-text-color);
        font-weight: 500;
        min-width: 50px;
      }

      .mired-input-group input {
        flex: 1;
        padding: 6px 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 12px;
        text-align: center;
      }

      .mired-input-group input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .effects-controls {
        width: 100%;
      }

      .effects-section {
        background: var(--secondary-background-color);
        border-radius: 8px;
        padding: 16px;
      }

      .effects-dropdown {
        width: 100%;
        max-width: 100%;
        overflow: visible !important;
        z-index: ${r.Mu.DROPDOWN_SELECT};
      }

      /* Custom Searchable Dropdown Styles */
      .custom-select-container {
        position: relative;
        width: 100%;
        z-index: ${r.Mu.DROPDOWN_SELECT};
      }

      .custom-select-trigger {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: 12px 16px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-family: inherit;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
        box-sizing: border-box;
      }

      .custom-select-trigger:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 8px rgba(var(--rgb-primary-color), 0.1);
      }

      .custom-select-trigger.open {
        border-color: var(--primary-color);
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        box-shadow: 0 2px 8px rgba(var(--rgb-primary-color), 0.15);
      }

      .custom-select-trigger[disabled] {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .selected-effect {
        flex: 1;
        text-align: left;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .dropdown-arrow {
        transition: transform 0.2s ease;
        color: var(--secondary-text-color);
        --mdc-icon-size: 20px;
      }

      .dropdown-arrow.rotated {
        transform: rotate(180deg);
      }

      .custom-dropdown-menu {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--card-background-color);
        border: 1px solid var(--primary-color);
        border-top: none;
        border-radius: 0 0 8px 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        z-index: ${r.Mu.DROPDOWN_MENU} !important;
        max-height: 300px;
        overflow: hidden;
      }

      .search-container {
        position: relative;
        padding: 12px;
        border-bottom: 1px solid var(--divider-color);
      }

      .effect-search {
        width: 100%;
        padding: 8px 12px 8px 36px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-family: inherit;
        font-size: 14px;
        box-sizing: border-box;
      }

      .effect-search:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .search-icon {
        position: absolute;
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--secondary-text-color);
        --mdc-icon-size: 16px;
        pointer-events: none;
      }

      .effect-options {
        max-height: 200px;
        overflow-y: auto;
      }

      .effect-option {
        padding: 10px 16px;
        cursor: pointer;
        transition: background-color 0.15s ease;
        border-bottom: 1px solid var(--divider-color);
      }

      .effect-option:last-child {
        border-bottom: none;
      }

      .effect-option:hover {
        background: var(--secondary-background-color);
      }

      .effect-option.selected {
        background: rgba(var(--rgb-primary-color), 0.1);
        color: var(--primary-color);
        font-weight: 500;
      }

      .effect-option span {
        display: block;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .no-results {
        padding: 16px;
        text-align: center;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      .effect-select {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box;
      }

      .effect-select ha-select {
        width: 100% !important;
        max-width: 100% !important;
      }

      .effect-description {
        margin-top: 12px;
        padding: 12px;
        background: rgba(var(--rgb-primary-color), 0.05);
        border-radius: 4px;
        font-size: 12px;
        color: var(--secondary-text-color);
        line-height: 1.4;
      }

      /* RGBWW Combined Mode Styles */
      .rgbww-controls {
        margin-bottom: 16px;
      }

      .rgbww-divider {
        display: flex;
        align-items: center;
        gap: 12px;
        margin: 20px 0;
        color: var(--primary-text-color);
      }

      .rgbww-divider .divider-line {
        flex: 1;
        height: 1px;
        background: linear-gradient(to right, transparent, var(--divider-color), transparent);
      }

      .rgbww-divider .divider-label {
        font-size: 13px;
        font-weight: 600;
        color: var(--primary-color);
        white-space: nowrap;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .rgbww-temp-controls {
        background: rgba(var(--rgb-primary-color), 0.05);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid rgba(var(--rgb-primary-color), 0.1);
      }

      /* Responsive design */
      @media (max-width: 600px) {
        .color-controls {
          flex-direction: column;
          gap: 16px;
        }

        .color-wheel {
          width: 100px;
          height: 100px;
        }

        .rgb-inputs {
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .rgbww-divider .divider-label {
          font-size: 11px;
        }
      }
    `}};s([(0,a.MZ)({attribute:!1})],d.prototype,"hass",void 0),s([(0,a.MZ)()],d.prototype,"rgb_color",void 0),s([(0,a.MZ)()],d.prototype,"hs_color",void 0),s([(0,a.MZ)()],d.prototype,"xy_color",void 0),s([(0,a.MZ)()],d.prototype,"color_temp",void 0),s([(0,a.MZ)()],d.prototype,"effect",void 0),s([(0,a.MZ)()],d.prototype,"effect_speed",void 0),s([(0,a.MZ)()],d.prototype,"effect_intensity",void 0),s([(0,a.MZ)()],d.prototype,"effect_reverse",void 0),s([(0,a.MZ)()],d.prototype,"effect_list",void 0),s([(0,a.MZ)()],d.prototype,"mode",void 0),s([(0,a.MZ)()],d.prototype,"min_mireds",void 0),s([(0,a.MZ)()],d.prototype,"max_mireds",void 0),s([(0,a.MZ)({type:Boolean})],d.prototype,"disabled",void 0),s([(0,a.MZ)({type:Boolean})],d.prototype,"rgbww_mode",void 0),s([(0,a.wk)()],d.prototype,"_isDragging",void 0),s([(0,a.wk)()],d.prototype,"_currentRgb",void 0),s([(0,a.wk)()],d.prototype,"_currentHs",void 0),s([(0,a.wk)()],d.prototype,"_currentXy",void 0),s([(0,a.wk)()],d.prototype,"_currentColorTemp",void 0),s([(0,a.wk)()],d.prototype,"_showColorPicker",void 0),s([(0,a.wk)()],d.prototype,"_ignoringNextEffectChange",void 0),s([(0,a.wk)()],d.prototype,"_processingEffectChange",void 0),s([(0,a.wk)()],d.prototype,"_effectDropdownOpen",void 0),s([(0,a.wk)()],d.prototype,"_effectSearchTerm",void 0),s([(0,a.wk)()],d.prototype,"_filteredEffects",void 0),d=s([(0,a.EM)("uc-light-color-picker")],d);class c{static rgbToHex(e,t,i){return"#"+[e,t,i].map((e=>{const t=e.toString(16);return 1===t.length?"0"+t:t})).join("")}static hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}static rgbToHsv(e,t,i){e/=255,t/=255,i/=255;const o=Math.max(e,t,i),n=Math.min(e,t,i);let a=0;const r=o,s=o-n,l=0===o?0:s/o;if(o!==n){switch(o){case e:a=(t-i)/s+(t<i?6:0);break;case t:a=(i-e)/s+2;break;case i:a=(e-t)/s+4}a/=6}return[Math.round(360*a),Math.round(100*l),Math.round(100*r)]}static hsvToRgb(e,t,i){e/=360,t/=100,i/=100;const o=Math.floor(6*e),n=6*e-o,a=i*(1-t),r=i*(1-n*t),s=i*(1-(1-n)*t);let l,d,c;switch(o%6){case 0:[l,d,c]=[i,s,a];break;case 1:[l,d,c]=[r,i,a];break;case 2:[l,d,c]=[a,i,s];break;case 3:[l,d,c]=[a,r,i];break;case 4:[l,d,c]=[s,a,i];break;case 5:[l,d,c]=[i,a,r];break;default:[l,d,c]=[0,0,0]}return[Math.round(255*l),Math.round(255*d),Math.round(255*c)]}static rgbToXy(e,t,i){t/=255,i/=255;const o=.4124*(e=(e/=255)>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.1805*(i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92),n=.2126*e+.7152*t+.0722*i,a=o+n+(.0193*e+.1192*t+.9505*i);return 0===a?[.3127,.329]:[o/a,n/a]}static xyToRgb(e,t,i=1){const o=i/t*e,n=i/t*(1-e-t);let a=3.2406*o+-1.5372*i+-.4986*n,r=-.9689*o+1.8758*i+.0415*n,s=.0557*o+-.204*i+1.057*n;return a=a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055,r=r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055,s=s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055,a=Math.max(0,Math.min(1,a)),r=Math.max(0,Math.min(1,r)),s=Math.max(0,Math.min(1,s)),[Math.round(255*a),Math.round(255*r),Math.round(255*s)]}static kelvinToMired(e){return Math.round(1e6/e)}static miredToKelvin(e){return Math.round(1e6/e)}static calculateWwCwMix(e,t,i){const o=(Math.max(t,Math.min(i,e))-t)/(i-t);return{ww:Math.round(255*(1-o)),cw:Math.round(255*o)}}}class p extends n.m{constructor(){super(...arguments),this.metadata={type:"light",title:"Light Control",description:"Advanced light control with color, brightness, and effects",author:"WJD Designs",version:"1.0.0",icon:"mdi:lightbulb",category:"interactive",tags:["light","color","brightness","control","smart"]},this.expandedPresets=new Set,this.draggedPresetIndex=null}createDefault(e,t){return{id:e||this.generateId("light"),type:"light",presets:[{id:this.generateId("preset"),name:"My Preset",action:"turn_on",entities:[],brightness:255,rgb_color:[255,255,255],effect:"",effect_speed:128,effect_intensity:128,effect_reverse:!1,text_color:"var(--text-primary-color)",icon_color:"var(--primary-color)",button_color:"var(--primary-color)",use_light_color_for_icon:!1,use_light_color_for_button:!0,use_icon_color_for_text:!1,smart_color:!0,button_style:"filled",show_label:!0,border_radius:8}],layout:"buttons",button_alignment:"center",allow_wrapping:!0,button_gap:.8,columns:3,show_labels:!0,button_style:"filled",default_transition_time:.5,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}getSupportedColorModes(e,t){const i=t.states[e];return i&&i.attributes.supported_color_modes?i.attributes.supported_color_modes:["onoff"]}hasRgbwwSupport(e,t){return!(!e||0===e.length)&&e.some((e=>{const i=t.states[e];return((null==i?void 0:i.attributes.supported_color_modes)||[]).some((e=>"rgbww"===e||"rgbcct"===e||"rgbww_color"===e))}))}getCurrentColorMode(e,t){const i=t.states[e];return(null==i?void 0:i.attributes.color_mode)||"onoff"}getEffectList(e,t){const i=t.states[e];return(null==i?void 0:i.attributes.effect_list)||[]}findSimilarEffect(e,t){const i=e.toLowerCase(),o=t.find((e=>e.toLowerCase()===i));if(o)return o;const n=t.find((e=>{const t=e.toLowerCase();return t.includes(i)||i.includes(t)}));if(n)return n;const a={colorloop:["rainbow","color_loop","colorloop"],rainbow:["colorloop","rainbow","color_loop"],strobe:["blink","flash","strobe"],blink:["strobe","flash","blink"],breathe:["fade","breathing","breathe"],fade:["breathe","breathing","fade"],solid:["static","solid","none"]}[i]||[];for(const e of a){const i=t.find((t=>t.toLowerCase().includes(e)));if(i)return i}return null}getCommonSupportedEffects(e,t){if(0===e.length)return["colorloop","random"];const i=e.map((e=>this.getEffectList(e,t)));if(1===i.length)return i[0];const o=i.reduce(((e,t)=>e.filter((e=>t.some((t=>e.toLowerCase()===t.toLowerCase()))))));if(0===o.length){const e=[],t=["colorloop","color_loop","rainbow","strobe","flash","blink","fade","breathe","breathing","solid","static"];for(const o of t)for(const t of i){const n=t.find((e=>e.toLowerCase().includes(o.toLowerCase())));n&&!e.includes(n)&&i.every((e=>e.some((e=>e.toLowerCase().includes(o.toLowerCase())||e.toLowerCase()===n.toLowerCase()))))&&e.push(n)}return 0===e.length?["colorloop","strobe","fade"]:e}return o}getColorTempRange(e,t){const i=t.states[e];return{min:(null==i?void 0:i.attributes.min_mireds)||153,max:(null==i?void 0:i.attributes.max_mireds)||500}}async callLightService(e,t,i,o){try{await o.callService("light",e,Object.assign({entity_id:t},i))}catch(o){console.error(`Failed to call light.${e} for ${t}:`,o),console.error("Service data was:",i);const n=new CustomEvent("hass-notification",{detail:{message:`Failed to control light ${t}: ${o}`}});document.dispatchEvent(n)}}renderGeneralTab(e,t,i,n){var a,r;const s=e;return null===(a=null==t?void 0:t.locale)||void 0===a||a.language,o.qy`
      ${this.injectUcFormStyles()}
      <div class="general-tab">
        <!-- Layout Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            Layout Configuration
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
          >
            Configure how preset buttons are arranged and displayed
          </div>

          <!-- Layout Style -->
          <div class="field-container" style="margin-bottom: 16px;">
            <div class="field-title">Layout Style</div>
            <div class="field-description">Choose the overall arrangement style for preset buttons</div>
            ${this.renderUcForm(t,{layout:s.layout||"buttons"},[this.selectField("layout",[{value:"buttons",label:"Flexible Buttons"},{value:"grid",label:"Grid Layout"}])],(e=>{const t=e.detail.value.layout;t!==s.layout&&(n({layout:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
          </div>

            <!-- Button Alignment -->
            <div class="field-container" style="margin-bottom: 16px;">
              <div class="field-title">Button Alignment</div>
              <div class="field-description">Choose how buttons are aligned within the container</div>
              ${this.renderUcForm(t,{button_alignment:s.button_alignment||"center"},[this.selectField("button_alignment",[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"},{value:"space-between",label:"Space Between"},{value:"space-around",label:"Space Around"},{value:"space-evenly",label:"Space Evenly"}])],(e=>{const t=e.detail.value.button_alignment;t!==s.button_alignment&&(n({button_alignment:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
            </div>
          </div>
        </div>

        <!-- Allow Wrapping Toggle -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <div style="display: flex; align-items: center; justify-content: space-between;">
            <div style="flex: 1;">
              <div
                class="field-title"
                style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
              >
                Allow Button Wrapping
              </div>
              <div
                class="field-description"
                style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8; line-height: 1.4;"
              >
                Allow buttons to wrap to the next line when they exceed the container width
              </div>
            </div>
            <div style="margin-left: 16px;">
              <ha-switch
                .checked=${s.allow_wrapping||!1}
                @change=${e=>{const t=e.target;n({allow_wrapping:t.checked})}}
              ></ha-switch>
            </div>
          </div>
        </div>

        <!-- Gap Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            Gap Configuration
          </div>

          <div style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
            >
              Gap Between Buttons
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
            >
              Set the spacing between preset buttons (in rem units)
            </div>
            <div
              class="gap-control-container"
              style="display: flex; align-items: center; gap: 12px;"
            >
              <input
                type="range"
                class="gap-slider"
                min="0"
                max="5"
                step="0.1"
                .value="${s.button_gap||.8}"
                @input=${e=>{const t=e.target,i=parseFloat(t.value);n({button_gap:i})}}
              />
              <input
                type="number"
                class="gap-input"
                style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                min="0"
                max="5"
                step="0.1"
                .value="${s.button_gap||.8}"
                @input=${e=>{const t=e.target,i=parseFloat(t.value);isNaN(i)||n({button_gap:i})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseFloat(t.value)||.8,o="ArrowUp"===e.key?.1:-.1,a=Math.max(0,Math.min(5,i+o)),r=Math.round(10*a)/10;n({button_gap:r})}}}
              />
              <button
                class="reset-btn"
                @click=${()=>n({button_gap:.8})}
                title="Reset to default (0.8)"
                style="width: 36px; height: 36px; padding: 0; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s ease;"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>
        </div>
        ${"grid"===s.layout?o.qy`
                <div
                  class="settings-section"
                  style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
                >
                  <div
                    class="section-title"
                    style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
                  >
                    Grid Settings
                  </div>
                  <div
                    style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
                  >
                    Configure grid layout options
                  </div>

                  <div style="margin-bottom: 20px;">
                    <div
                      class="field-title"
                      style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
                    >
                      Columns
                    </div>
                    <div
                      class="field-description"
                      style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 8px; opacity: 0.8; line-height: 1.4;"
                    >
                      Number of columns in grid layout
                    </div>
                    <div class="field-container" style="margin-bottom: 16px;">
                      <div class="field-title">Columns</div>
                      <div class="field-description">Number of columns in grid layout</div>
                      ${this.renderUcForm(t,{columns:s.columns||3},[this.selectField("columns",[{value:"1",label:"1 Column"},{value:"2",label:"2 Columns"},{value:"3",label:"3 Columns"},{value:"4",label:"4 Columns"},{value:"5",label:"5 Columns"},{value:"6",label:"6 Columns"}])],(e=>{const t=Number(e.detail.value.columns);isNaN(t)||t===s.columns||(n({columns:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
                    </div>
                  </div>
                </div>
              `:""}

        <!-- Global Settings -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            Global Settings
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
          >
            Settings that apply to all presets
          </div>

          <div class="field-container" style="margin-bottom: 16px;">
            <div class="field-title">Default Transition Time</div>
            <div class="field-description">Default transition time for all presets (can be overridden per preset)</div>
            ${this.renderUcForm(t,{default_transition_time:null!==(r=s.default_transition_time)&&void 0!==r?r:.5},[this.numberField("default_transition_time",0,10,.1)],(e=>{const t=Number(e.detail.value.default_transition_time);isNaN(t)||t===s.default_transition_time||(n({default_transition_time:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
          </div>
          </div>
        </div>

        <!-- Preset Configuration -->
        <div class="presets-configuration">
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            Light Presets
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
          >
            Configure light presets with specific colors, brightness, and effects. Each preset can
            control different entities.
          </div>

          ${(s.presets||[]).map(((e,o)=>this.renderPresetEditor(e,o,s,t,n,i)))}

          <button
            class="add-preset-btn"
            @click=${()=>this.addPreset(s,n)}
            style="width: 100%; padding: 12px; border: 2px dashed var(--primary-color); background: transparent; color: var(--primary-color); border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: 500; margin-top: 16px;"
          >
            + Add New Preset
          </button>
        </div>
      </div>
    `}renderOtherTab(e,t,i,n){var a,r;const s=e;return o.qy`
      <div class="other-tab">
        <!-- Import/Export Presets -->
        ${this.renderSettingsSection("Import/Export","Save and share your preset configurations",[{title:"Export Presets",description:"Export all presets as JSON for backup or sharing",hass:t,data:{export_ready:(s.presets||[]).length>0},schema:[{name:"export_ready",label:"Export Configuration",selector:{action:{text:"Export JSON"}}}],onChange:()=>this.exportPresets(s)},{title:"Import Presets",description:"Import presets from JSON configuration",hass:t,data:{import_data:""},schema:[{name:"import_data",label:"Paste JSON Configuration",selector:{text:{multiline:!0,placeholder:"Paste exported JSON here..."}}}],onChange:e=>this.importPresets(e.detail.value.import_data,s,n)}])}

        <!-- Advanced Options -->
        ${this.renderSettingsSection("Advanced Options","Fine-tune module behavior",[{title:"Confirm Actions",description:"Show confirmation dialog before applying presets",hass:t,data:{confirm_actions:null!==(a=s.confirm_actions)&&void 0!==a&&a},schema:[this.booleanField("confirm_actions")],onChange:e=>n({confirm_actions:e.detail.value.confirm_actions})},{title:"Show Status Feedback",description:"Show visual feedback when presets are applied",hass:t,data:{show_feedback:null===(r=s.show_feedback)||void 0===r||r},schema:[this.booleanField("show_feedback")],onChange:e=>n({show_feedback:e.detail.value.show_feedback})}])}
      </div>
    `}renderPresetEditor(e,t,i,n,a,r){const s=()=>{const t=Object.assign(Object.assign({},e),{id:this.generateId("preset"),name:`${e.name} Copy`}),o=[...i.presets||[],t];a({presets:o})},l=(e,t)=>{const o=[...i.presets||[]],[n]=o.splice(e,1);o.splice(t,0,n),a({presets:o})};return o.qy`
      <div
        class="preset-item"
        style="margin-bottom: 24px; background: var(--secondary-background-color); border-radius: 8px; border: 1px solid var(--divider-color); overflow: hidden;"
        data-preset-id="${e.id}"
        data-preset-index="${t}"
        @dragover=${e=>this.handlePresetDragOver(e)}
        @dragenter=${e=>this.handlePresetDragEnter(e)}
        @dragleave=${e=>this.handlePresetDragLeave(e)}
        @drop=${e=>this.handlePresetDrop(e,t,l)}
      >
        <div
          class="preset-header"
          style="display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; background: rgba(var(--rgb-primary-color), 0.05); border-bottom: 1px solid var(--divider-color); cursor: pointer;"
          @click=${e=>this.togglePresetHeader(e)}
        >
          <div style="display: flex; align-items: center; gap: 12px;">
            <div
              class="drag-handle"
              style="padding: 8px; margin: -8px; cursor: grab; border-radius: 4px; transition: background-color 0.2s ease;"
              draggable="true"
              @dragstart=${e=>this.handlePresetDragStart(e,t)}
              @dragend=${e=>this.handlePresetDragEnd(e)}
              @click=${e=>e.stopPropagation()}
              @mousedown=${e=>e.stopPropagation()}
              .title=${"Drag to reorder"}
              @mouseenter=${e=>{e.target.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)"}}
              @mouseleave=${e=>{e.target.style.backgroundColor="transparent"}}
            >
              <ha-icon
                icon="mdi:drag"
                style="color: var(--secondary-text-color); pointer-events: none;"
              ></ha-icon>
            </div>
            <div style="font-weight: 600; color: var(--primary-text-color);">
              ${e.name||`Preset ${t+1}`}
            </div>
            ${e.icon?o.qy`<ha-icon icon="${e.icon}" style="color: var(--primary-color);"></ha-icon>`:""}
          </div>
          <div style="display: flex; align-items: center; gap: 8px;">
            <ha-icon-button
              @click=${e=>{e.stopPropagation(),s()}}
              .title=${"Duplicate preset"}
            >
              <ha-icon icon="mdi:content-duplicate"></ha-icon>
            </ha-icon-button>
            <ha-icon-button
              @click=${e=>{e.stopPropagation(),(()=>{const e=[...i.presets||[]];e.splice(t,1),a({presets:e})})()}}
              .title=${"Delete preset"}
              .disabled=${(i.presets||[]).length<=1}
            >
              <ha-icon icon="mdi:delete"></ha-icon>
            </ha-icon-button>
            <ha-icon
              class="expand-caret"
              icon="mdi:chevron-down"
              style="color: var(--secondary-text-color); transition: transform 0.2s ease; transform: ${this.expandedPresets.has(e.id)?"rotate(180deg)":"rotate(0deg)"}; cursor: pointer; padding: 8px; margin: -8px;"
              @click=${e=>{e.stopPropagation();const t=e.target,i=t.closest(".preset-item"),o=null==i?void 0:i.querySelector(".preset-content");if(i&&o&&t){const e=i.getAttribute("data-preset-id")||"";this.expandedPresets.has(e)?(this.expandedPresets.delete(e),o.style.display="none",t.style.transform="rotate(0deg)"):(this.expandedPresets.add(e),o.style.display="block",t.style.transform="rotate(180deg)")}}}
            ></ha-icon>
          </div>
        </div>

        <div
          class="preset-content"
          style="padding: 16px; display: ${this.expandedPresets.has(e.id)?"block":"none"};"
        >
          ${this.renderPresetConfiguration(e,n,(o=>{const n=[...i.presets||[]];n[t]=Object.assign(Object.assign({},e),o),a({presets:n})}),i,r)}
        </div>
      </div>
    `}renderPresetConfiguration(e,t,i,n,a){var r,s,l,d,c,p;return o.qy`
      <!-- Action Selection -->
      <div class="field-group" style="margin-bottom: 16px;">
        ${this.renderFieldSection("Preset Action","Choose what this preset should do",t,{action:e.action||"turn_on"},[this.selectField("action",[{value:"turn_on",label:"Turn On (with settings)"},{value:"turn_off",label:"Turn Off"},{value:"toggle",label:"Toggle"}])],(e=>i({action:e.detail.value.action})))}
      </div>

      <!-- Basic Settings -->
      <div class="field-group" style="margin-bottom: 16px;">
        ${this.renderFieldSection("Basic Settings","Configure preset name and icon",t,{name:e.name||"",icon:e.icon||""},[this.textField("name"),this.iconField("icon")],(e=>i(e.detail.value)))}
      </div>

      <!-- Entity Selection -->
      <div class="field-group" style="margin-bottom: 16px;">
        ${this.renderFieldSection("Target Entities","Select which lights this preset will control",t,{entities:e.entities||[]},[{name:"entities",selector:{entity:{domain:["light","group"],multiple:!0}}}],(e=>i({entities:e.detail.value.entities})))}

        ${"turn_off"!==(e.action||"turn_on")?o.qy`
                <!-- Light Controls: Color, White, Effects & Test -->
                <div class="light-controls-section" style="margin-top: 20px; margin-bottom: 20px;">
                  <div
                    style="font-weight: 600; margin-bottom: 16px; color: var(--primary-text-color); font-size: 16px;"
                  >
                    Light Controls
                  </div>

                  <uc-light-color-picker
                    .hass=${t}
                    .rgb_color=${e.rgb_color}
                    .hs_color=${e.hs_color}
                    .xy_color=${e.xy_color}
                    .color_temp=${e.color_temp}
                    .effect=${e.effect}
                    .effect_speed=${e.effect_speed}
                    .effect_intensity=${e.effect_intensity}
                    .effect_reverse=${e.effect_reverse}
                    .effect_list=${this.getCommonSupportedEffects(e.entities||[],t)}
                    .mode=${"effect"===this.getPresetLightMode(e)?"effect":this.getPresetColorMode(e)}
                    .min_mireds=${153}
                    .max_mireds=${500}
                    .rgbww_mode=${this.hasRgbwwSupport(e.entities||[],t)}
                    @color-changed=${e=>{const t=e.detail,o={};"effect"===t.mode?(o.effect=t.effect||"",o.color_temp=void 0,o.rgb_color=void 0,o.hs_color=void 0,o.xy_color=void 0,o.rgbw_color=void 0,o.rgbww_color=void 0,o.white=void 0):"rgbww"===t.mode?(o.rgb_color=t.rgb_color,o.hs_color=t.hs_color,o.xy_color=t.xy_color,o.color_temp=t.color_temp,o.effect=""):"color_temp"===t.mode?(o.color_temp=t.color_temp,o.rgb_color=void 0,o.hs_color=void 0,o.xy_color=void 0,o.rgbw_color=void 0,o.rgbww_color=void 0,o.white=void 0,o.effect=""):(o.rgb_color=t.rgb_color,o.hs_color=t.hs_color,o.xy_color=t.xy_color,o.color_temp=void 0,o.rgbw_color=void 0,o.rgbww_color=void 0,o.white=void 0,o.effect=""),i(o),this.triggerPreviewUpdate()}}
                    @test-preset=${()=>{this.applyPreset(e,n,t,a)}}
                  ></uc-light-color-picker>
                </div>
              `:""}

        <!-- Button Style (moved here from global settings) -->
        <div
          style="margin-top: 16px; background: rgba(var(--rgb-accent-color), 0.05); border-radius: 6px; padding: 12px;"
        >
          <div style="font-weight: 500; margin-bottom: 12px; color: var(--primary-text-color);">
            Button Appearance
          </div>

          ${this.renderFieldSection("Button Style","Visual style for this preset button",t,{button_style:e.button_style||"filled"},[this.selectField("button_style",[{value:"filled",label:"Filled (solid background)"},{value:"outlined",label:"Outlined (border only)"},{value:"text",label:"Text (minimal style)"}])],(e=>i({button_style:e.detail.value.button_style})))}

          <!-- Border Radius (for filled and outlined styles) -->
          ${"text"!==(e.button_style||"filled")?o.qy`
                  <div style="margin-top: 12px;">
                    ${this.renderFieldSection("Border Radius","Adjust button roundness (0 = square, 50 = circle)",t,{border_radius:e.border_radius||8},[this.numberField("border_radius",0,50,1)],(e=>i({border_radius:e.detail.value.border_radius})))}
                  </div>
                `:""}

          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-top: 12px;"
          >
            <div>
              <div style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);">
                Show Label
              </div>
              <div style="font-size: 12px; color: var(--secondary-text-color);">
                Display preset name on this button
              </div>
            </div>
            <ha-switch
              .checked=${null===(r=e.show_label)||void 0===r||r}
              @change=${e=>{const t=e.target;i({show_label:t.checked})}}
            ></ha-switch>
          </div>
        </div>
      </div>

      ${"turn_off"!==(e.action||"turn_on")?o.qy`
              <!-- Light Controls Section -->
              <div class="light-controls-section" style="margin-top: 20px;">
                <div
                  style="font-weight: 600; margin-bottom: 16px; color: var(--primary-text-color); font-size: 16px;"
                >
                  Light Controls
                </div>

                <!-- Brightness Control -->
                <div class="brightness-control" style="margin-bottom: 20px;">
                  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                    <ha-icon icon="mdi:brightness-6" style="color: var(--primary-color);"></ha-icon>
                    <span style="font-weight: 500; color: var(--primary-text-color);"
                      >Brightness</span
                    >
                    <span
                      style="margin-left: auto; font-size: 14px; color: var(--secondary-text-color);"
                    >
                      ${e.brightness?Math.round(e.brightness/255*100):100}%
                    </span>
                  </div>
                  <div style="display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 12px; color: var(--secondary-text-color);">0%</span>
                    <input
                      type="range"
                      min="1"
                      max="100"
                      step="1"
                      .value=${e.brightness?Math.round(e.brightness/255*100):100}
                      @input=${e=>{const t=e.target,o=Math.round(parseInt(t.value)/100*255);i({brightness:o}),this.triggerPreviewUpdate()}}
                      class="brightness-slider"
                    />
                    <span style="font-size: 12px; color: var(--secondary-text-color);">100%</span>
                  </div>
                </div>

                <!-- Visual Customization -->
                <div
                  class="visual-customization"
                  style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--divider-color);"
                ></div>
              </div>
            `:o.qy`
              <div
                style="padding: 20px; text-align: center; color: var(--secondary-text-color); background: var(--secondary-background-color); border-radius: 8px; font-style: italic; margin-top: 20px;"
              >
                Light controls are not available for "Turn Off" action
              </div>
            `}

      ${"turn_off"!==(e.action||"turn_on")?o.qy`
          <div
            style="font-weight: 600; margin-bottom: 16px; color: var(--primary-text-color); font-size: 16px;"
          >
            Visual Customization
          </div>

          <!-- Smart Color Toggles -->
          <div
            class="smart-color-toggles"
            style="margin-bottom: 16px; background: rgba(var(--rgb-primary-color), 0.05); border-radius: 6px; padding: 12px;"
          >
            <div style="font-weight: 500; margin-bottom: 12px; color: var(--primary-text-color);">
              Smart Color Options
            </div>

            <!-- Smart Contrast Mode (Top Priority) -->
            <div
              style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;"
            >
              <div>
                <div style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);">
                  Smart Contrast Mode
                </div>
                <div style="font-size: 12px; color: var(--secondary-text-color);">
                  Auto-contrast text & icon (white/black) based on button background
                </div>
              </div>
              <ha-switch
                .checked=${null===(s=e.smart_color)||void 0===s||s}
                @change=${e=>{const t=e.target;i({smart_color:t.checked})}}
              ></ha-switch>
            </div>

            <!-- Use Light Color for Icon (disabled if smart contrast is on) -->
            <div
              style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; ${e.smart_color?"opacity: 0.5;":""}"
            >
              <div>
                <div style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);">
                  Use Light Color for Icon
                </div>
                <div style="font-size: 12px; color: var(--secondary-text-color);">
                  Icon color matches the preset's light color
                </div>
              </div>
              <ha-switch
                .checked=${e.use_light_color_for_icon||!1}
                .disabled=${null===(l=e.smart_color)||void 0===l||l}
                @change=${e=>{const t=e.target;i({use_light_color_for_icon:t.checked})}}
              ></ha-switch>
            </div>

            <!-- Use Light Color for Button (disabled if smart contrast is on) -->
            <div
              style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; ${e.smart_color?"opacity: 0.5;":""}"
            >
              <div>
                <div style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);">
                  Use Light Color for Button
                </div>
                <div style="font-size: 12px; color: var(--secondary-text-color);">
                  Button background matches the preset's light color
                </div>
              </div>
              <ha-switch
                .checked=${e.use_light_color_for_button||!1}
                .disabled=${null===(d=e.smart_color)||void 0===d||d}
                @change=${e=>{const t=e.target;i({use_light_color_for_button:t.checked})}}
              ></ha-switch>
            </div>

            <!-- Use Icon Color for Text (disabled if smart contrast is on) -->
            <div
              style="display: flex; align-items: center; justify-content: space-between; ${e.smart_color?"opacity: 0.5;":""}"
            >
              <div>
                <div style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);">
                  Use Icon Color for Text
                </div>
                <div style="font-size: 12px; color: var(--secondary-text-color);">
                  Text color matches the icon color
                </div>
              </div>
              <ha-switch
                .checked=${e.use_icon_color_for_text||!1}
                .disabled=${null===(c=e.smart_color)||void 0===c||c}
                @change=${e=>{const t=e.target;i({use_icon_color_for_text:t.checked})}}
              ></ha-switch>
            </div>
          </div>

          <!-- Per-Preset Styling -->
          <div
            style="margin-bottom: 16px; background: rgba(var(--rgb-accent-color), 0.05); border-radius: 6px; padding: 12px;"
          >
            <div style="font-weight: 500; margin-bottom: 12px; color: var(--primary-text-color);">
              Button Style
            </div>

            ${this.renderFieldSection("Button Style","Visual style for this preset button",t,{button_style:e.button_style||"filled"},[this.selectField("button_style",[{value:"filled",label:"Filled (solid background)"},{value:"outlined",label:"Outlined (border only)"},{value:"text",label:"Text (minimal style)"}])],(e=>i({button_style:e.detail.value.button_style})))}

            <div
              style="display: flex; align-items: center; justify-content: space-between; margin-top: 12px;"
            >
              <div>
                <div style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);">
                  Show Label
                </div>
                <div style="font-size: 12px; color: var(--secondary-text-color);">
                  Display preset name on this button
                </div>
              </div>
              <ha-switch
                .checked=${null===(p=e.show_label)||void 0===p||p}
                @change=${e=>{const t=e.target;i({show_label:t.checked})}}
              ></ha-switch>
            </div>
          </div>

          <!-- Custom Colors (only show when smart contrast is disabled) -->
          ${e.smart_color?o.qy`
                  <div
                    style="text-align: center; padding: 24px; color: var(--secondary-text-color); font-style: italic; background: rgba(var(--rgb-primary-color), 0.05); border-radius: 6px;"
                  >
                    Smart Contrast Mode is enabled - colors are automatically optimized
                  </div>
                `:o.qy`
                  <div
                    class="custom-colors"
                    style="display: flex; flex-direction: column; gap: 16px;"
                  >
                    <!-- Text Color -->
                    ${e.use_icon_color_for_text?o.qy`
                          <div class="color-field disabled">
                            <div
                              style="font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--secondary-text-color);"
                            >
                              Text Color
                            </div>
                            <div
                              style="padding: 20px; text-align: center; color: var(--secondary-text-color); font-style: italic; background: var(--secondary-background-color); border-radius: 4px;"
                            >
                              Using icon color
                            </div>
                          </div>
                        `:o.qy`
                          <div class="color-field">
                            <div
                              style="font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--primary-text-color);"
                            >
                              Text Color
                            </div>
                            <ultra-color-picker
                              .hass=${t}
                              .value=${e.text_color||"var(--primary-text-color)"}
                              @value-changed=${e=>i({text_color:e.detail.value})}
                            ></ultra-color-picker>
                          </div>
                        `}

                    <!-- Icon Color -->
                    ${e.use_light_color_for_icon?o.qy`
                          <div class="color-field disabled">
                            <div
                              style="font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--secondary-text-color);"
                            >
                              Icon Color
                            </div>
                            <div
                              style="padding: 20px; text-align: center; color: var(--secondary-text-color); font-style: italic; background: var(--secondary-background-color); border-radius: 4px;"
                            >
                              Using light color
                            </div>
                          </div>
                        `:o.qy`
                          <div class="color-field">
                            <div
                              style="font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--primary-text-color);"
                            >
                              Icon Color
                            </div>
                            <ultra-color-picker
                              .hass=${t}
                              .value=${e.icon_color||"var(--primary-color)"}
                              @value-changed=${e=>i({icon_color:e.detail.value})}
                            ></ultra-color-picker>
                          </div>
                        `}

                    <!-- Button Color -->
                    ${e.use_light_color_for_button?o.qy`
                          <div class="color-field disabled">
                            <div
                              style="font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--secondary-text-color);"
                            >
                              Button Color
                            </div>
                            <div
                              style="padding: 20px; text-align: center; color: var(--secondary-text-color); font-style: italic; background: var(--secondary-background-color); border-radius: 4px;"
                            >
                              Using light color
                            </div>
                          </div>
                        `:o.qy`
                          <div class="color-field">
                            <div
                              style="font-size: 14px; font-weight: 500; margin-bottom: 8px; color: var(--primary-text-color);"
                            >
                              Button Color
                            </div>
                            <ultra-color-picker
                              .hass=${t}
                              .value=${e.button_color||"var(--primary-color)"}
                              @value-changed=${e=>i({button_color:e.detail.value})}
                            ></ultra-color-picker>
                          </div>
                        `}
                  </div>
                `}
        </div>
            `:""}

        <!-- Advanced Settings -->
        <div
          class="advanced-settings"
          style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--divider-color);"
        >
          <div style="font-weight: 500; margin-bottom: 12px; color: var(--primary-text-color);">
            Advanced Settings
          </div>
          ${this.renderFieldSection("Transition Time (seconds)","Override default transition time for this preset",t,{transition_time:e.transition_time||n.default_transition_time||.5},[this.numberField("transition_time",0,10,.1)],(e=>i({transition_time:e.detail.value.transition_time})))}
        </div>

        <!-- Test Preset -->
        <div
          style="margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--divider-color);"
        >
          <button
            @click=${()=>this.applyPreset(e,n,t)}
            style="width: 100%; padding: 12px; background: var(--primary-color); color: var(--text-primary-color); border: none; border-radius: 6px; cursor: pointer; font-weight: 500; font-size: 14px;"
            .disabled=${!e.entities||0===e.entities.length}
          >
            <ha-icon icon="mdi:play" style="margin-right: 8px;"></ha-icon>
            Test Preset
          </button>
        </div>
      </div>
    `}handlePresetDragStart(e,t){this.draggedPresetIndex=t,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.toString()));const i=e.target.closest(".preset-item");i&&i.classList.add("dragging")}handlePresetDragOver(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}handlePresetDragEnter(e){e.preventDefault();const t=e.currentTarget;t&&!t.classList.contains("dragging")&&(t.style.borderTop="3px solid var(--primary-color)",t.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)")}handlePresetDragLeave(e){const t=e.currentTarget;t&&(t.style.borderTop="",t.style.backgroundColor="")}handlePresetDrop(e,t,i){e.preventDefault();const o=e.currentTarget;o.style.borderTop="",o.style.backgroundColor="",null!==this.draggedPresetIndex&&this.draggedPresetIndex!==t&&i(this.draggedPresetIndex,t),document.querySelectorAll(".preset-item").forEach((e=>{e.style.borderTop="",e.style.backgroundColor="",e.classList.remove("dragging")})),this.draggedPresetIndex=null}handlePresetDragEnd(e){var t;const i=null===(t=e.target)||void 0===t?void 0:t.closest(".preset-item");i&&i.classList.remove("dragging"),document.querySelectorAll(".preset-item").forEach((e=>{e.style.borderTop=""})),this.draggedPresetIndex=null}togglePresetHeader(e){const t=e.currentTarget.closest(".preset-item");if(!t)return;const i=t.getAttribute("data-preset-id")||"";if(!i)return;const o=t.querySelector(".preset-content"),n=t.querySelector(".expand-caret");this.expandedPresets.has(i)?this.expandedPresets.delete(i):this.expandedPresets.add(i),o&&n&&(this.expandedPresets.has(i)?(o.style.display="block",n.style.transform="rotate(180deg)"):(o.style.display="none",n.style.transform="rotate(0deg)"))}togglePresetExpanded(e){const t=document.querySelector(`[data-preset-id="${e}"]`);if(t){const i=t.querySelector(".preset-content"),o=t.querySelector(".expand-caret");i&&o&&(this.expandedPresets.has(e)?(this.expandedPresets.delete(e),i.style.display="none",o.style.transform="rotate(0deg)"):(this.expandedPresets.add(e),i.style.display="block",o.style.transform="rotate(180deg)"))}}addPreset(e,t){const i=this.generateId("preset"),o={id:i,name:`Preset ${(e.presets||[]).length+1}`,action:"turn_on",entities:[],brightness:255,hs_color:[0,0],text_color:"var(--text-primary-color)",icon_color:"var(--primary-color)",button_color:"var(--primary-color)",use_light_color_for_icon:!1,use_light_color_for_button:!0,use_icon_color_for_text:!1,smart_color:!0,button_style:"filled",show_label:!0,border_radius:8};this.expandedPresets.add(i),t({presets:[...e.presets||[],o]})}getPresetColorMode(e){return e.color_temp?"color_temp":e.hs_color?"hs":e.xy_color?"xy":e.rgb_color?"rgb":"hs"}getPresetLightMode(e){return e.effect&&""!==e.effect.trim()?"effect":e.color_temp?"white":(e.rgb_color||e.hs_color||e.xy_color,"color")}exportPresets(e){const t={presets:e.presets||[],exported_at:(new Date).toISOString(),version:"1.0"},i=JSON.stringify(t,null,2),o=new Blob([i],{type:"application/json"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download="ultra-card-light-presets.json",a.click(),URL.revokeObjectURL(n)}importPresets(e,t,i){try{if(!e.trim())return;const o=JSON.parse(e);if(o.presets&&Array.isArray(o.presets)){const e=o.presets.map((e=>Object.assign(Object.assign({},e),{id:this.generateId("preset")})));i({presets:[...t.presets||[],...e]});const n=new CustomEvent("hass-notification",{detail:{message:`Successfully imported ${e.length} presets`}});document.dispatchEvent(n)}}catch(e){const t=new CustomEvent("hass-notification",{detail:{message:"Failed to import presets: Invalid JSON format"}});document.dispatchEvent(t)}}async applyPreset(e,t,o,n){if(!1!==(null==n?void 0:n.haptic_feedback)){const{forwardHaptic:e}=await Promise.resolve().then(i.bind(i,9811));e("medium")}const a=e.entities||[];if(0===a.length){const e=new CustomEvent("hass-notification",{detail:{message:"No entities configured for this preset"}});return void document.dispatchEvent(e)}const r=e.action||"turn_on";for(const i of a){if("turn_off"===r){await this.callLightService("turn_off",i,{},o);continue}const n={},a=o.states[i],s="wled"===(null==a?void 0:a.attributes.integration)||"wled"===(null==a?void 0:a.attributes.device_class)||(null==a?void 0:a.attributes.effect_list)&&a.attributes.effect_list.length>50||(null==a?void 0:a.entity_id)&&a.entity_id.toLowerCase().includes("wled")||(null==a?void 0:a.attributes.friendly_name)&&a.attributes.friendly_name.toLowerCase().includes("wled")||(null==a?void 0:a.attributes.friendly_name)&&a.attributes.friendly_name.toLowerCase().includes("glorb"),l=e.transition_time||t.default_transition_time;!(l&&l>0)||s&&e.effect&&""!==e.effect.trim()||(n.transition=l),void 0!==e.brightness&&(n.brightness=e.brightness);const d=(e.rgb_color||e.hs_color||e.xy_color)&&void 0!==e.color_temp;if(e.effect&&""!==e.effect.trim())if(this.getEffectList(i,o).includes(e.effect))n.effect=e.effect,delete n.rgb_color,delete n.hs_color,delete n.xy_color,delete n.color_temp,delete n.rgbw_color,delete n.rgbww_color,delete n.white,s&&delete n.transition;else{const t=this.getEffectList(i,o),a=this.findSimilarEffect(e.effect,t);a&&(n.effect=a,delete n.rgb_color,delete n.hs_color,delete n.xy_color,delete n.color_temp,delete n.rgbw_color,delete n.rgbww_color,delete n.white)}else d?(void 0!==e.rgb_color?n.rgb_color=e.rgb_color:void 0!==e.hs_color?n.hs_color=e.hs_color:void 0!==e.xy_color&&(n.xy_color=e.xy_color),n.color_temp=e.color_temp,s&&(n.effect="Solid")):void 0!==e.color_temp?n.color_temp=e.color_temp:s&&void 0!==e.rgb_color?(n.rgb_color=e.rgb_color,n.effect="Solid"):void 0!==e.hs_color?(n.hs_color=e.hs_color,s&&(n.effect="Solid")):void 0!==e.xy_color?(n.xy_color=e.xy_color,s&&(n.effect="Solid")):void 0!==e.rgb_color?(n.rgb_color=e.rgb_color,s&&(n.effect="Solid")):void 0!==e.rgbw_color?n.rgbw_color=e.rgbw_color:void 0!==e.rgbww_color?n.rgbww_color=e.rgbww_color:void 0!==e.white&&(n.white=e.white);const c="toggle"===r?"toggle":"turn_on";await this.callLightService(c,i,n,o)}if(!1!==t.show_feedback){const t=new CustomEvent("hass-notification",{detail:{message:`Applied preset "${e.name}" to ${a.length} ${1===a.length?"entity":"entities"}`}});document.dispatchEvent(t)}}deletePreset(e,t,i){const o=[...t.presets||[]];o.splice(e,1),i({presets:o})}renderPreview(e,t,i,n){var a,r;const s=e,l=s.presets||[],d=s,c={padding:this.getPaddingCSS(d),margin:this.getMarginCSS(d),background:this.getBackgroundCSS(d),backgroundImage:this.getBackgroundImageCSS(d,t),border:this.getBorderCSS(d),borderRadius:this.addPixelUnit(d.border_radius)||"8px",boxSizing:"border-box",width:"100%"};if(0===l.length)return o.qy`
        <div class="light-module-container" style=${this.styleObjectToCss(c)}>
          <div class="no-presets-preview">
            <ha-icon icon="mdi:lightbulb-group"></ha-icon>
            <div>No presets configured</div>
            <div class="config-hint">Add presets in the General tab</div>
          </div>
        </div>
      `;const p=s.layout||"buttons",u=null===(a=s.show_labels)||void 0===a||a,h=s.button_style||"filled",g=s.columns||3,m=s.button_alignment||"center",f=null===(r=s.allow_wrapping)||void 0===r||r,_=s.button_gap||.8;let v="";return v="grid"===p?`\n        display: grid;\n        grid-template-columns: repeat(${g}, 1fr);\n        gap: ${_}rem;\n      `:`\n        display: flex;\n        flex-wrap: ${f?"wrap":"nowrap"};\n        justify-content: ${this.getJustifyContent(m)};\n        align-items: center;\n        gap: ${_}rem;\n      `,o.qy`
      <div class="light-module-container" style=${this.styleObjectToCss(c)}>
        <div class="presets-container ${p}" style="${v}">
          ${l.map((e=>this.renderPresetButton(e,s,t,u,h,i)))}
        </div>
      </div>
    `}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"8px"} ${this.addPixelUnit(e.padding_right)||"8px"} ${this.addPixelUnit(e.padding_bottom)||"8px"} ${this.addPixelUnit(e.padding_left)||"8px"}`:"16px"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"0"} ${this.addPixelUnit(e.margin_right)||"0"} ${this.addPixelUnit(e.margin_bottom)||"0"} ${this.addPixelUnit(e.margin_left)||"0"}`:"0"}getBackgroundCSS(e){return e.background_color||"var(--card-background-color)"}getBackgroundImageCSS(e,t){if("url"===e.background_image_type&&e.background_image)return`url(${e.background_image})`;if("entity"===e.background_image_type&&e.background_image_entity){const i=t.states[e.background_image_entity];if(i&&i.attributes.entity_picture)return`url(${i.attributes.entity_picture})`}return"none"}getBorderCSS(e){return e.border_style&&"none"!==e.border_style?`${this.addPixelUnit(e.border_width)||"1px"} ${e.border_style} ${e.border_color||"var(--divider-color)"}`:"none"}addPixelUnit(e){return e?"auto"===e||"none"===e||"inherit"===e?e:/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}getJustifyContent(e){switch(e){case"left":return"flex-start";case"center":default:return"center";case"right":return"flex-end";case"space-between":return"space-between";case"space-around":return"space-around";case"space-evenly":return"space-evenly"}}getDefaultIconForAction(e){switch(e){case"turn_off":return"mdi:lightbulb-off";case"toggle":return"mdi:lightbulb-auto";default:return"mdi:lightbulb"}}renderPresetButton(e,t,i,n,a,r){var s,l;const d=e.entities&&e.entities.length>0,c=e.button_style||a,p=null!==(s=e.show_label)&&void 0!==s?s:n,u=this.getPresetColors(e,i);let h=`\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      padding: 12px 16px;\n      border-radius: ${null!==(l=e.border_radius)&&void 0!==l?l:8}px;\n      cursor: pointer;\n      font-size: 14px;\n      font-weight: 500;\n      transition: all 0.2s ease;\n      min-height: 48px;\n      position: relative;\n      overflow: hidden;\n      box-sizing: border-box;\n    `;return"filled"===c?u.buttonColor.startsWith("linear-gradient")?h+=`background: ${u.buttonColor}; color: ${u.textColor}; border: none;`:h+=`background-color: ${u.buttonColor}; color: ${u.textColor}; border: none;`:"outlined"===c?h+=`border: 2px solid ${u.buttonColor}; color: ${u.textColor}; background: transparent;`:"text"===c&&(h+=`color: ${u.textColor}; background: transparent; border: none;`),o.qy`
      <div class="preset-button-container">
        <button
          class="preset-button ${c} ${d?"":"disabled"}"
          @click=${d?()=>this.applyPreset(e,t,i,r):void 0}
          style="
            ${h}
            ${d?"":"opacity: 0.5; cursor: not-allowed;"}
          "
          title="${d?`Apply preset: ${e.name}`:"No entities configured"}"
        >
          <ha-icon
            icon="${e.icon||this.getDefaultIconForAction(e.action)}"
            style="color: ${u.iconColor};"
          ></ha-icon>
          ${p?o.qy`<span class="preset-label">${e.name}</span>`:""}
        </button>
      </div>
    `}getPresetColors(e,t){const i=this.getPresetColorPreview(e);let o,n;o=e.use_light_color_for_icon&&i?i:e.icon_color||"var(--primary-color)";const a=e.button_style||"filled";let r;if(n="filled"===a&&e.use_light_color_for_button&&i?i:e.button_color||i||"var(--primary-color)",e.smart_color){const e=this.getContrastColor(n);r=e,o=e}else r="text"===a?e.use_icon_color_for_text?o:e.text_color||i||o:"outlined"===a?e.use_icon_color_for_text?o:e.text_color||i||n:e.use_icon_color_for_text?o:e.text_color||"var(--text-primary-color)";return{textColor:r,iconColor:o,buttonColor:n}}getContrastColor(e){if(e.startsWith("var(")||e.includes("gradient"))return"white";let t=0,i=0,o=0;if(e.startsWith("#")){const n=c.hexToRgb(e);n&&([t,i,o]=n)}else if(e.startsWith("rgb(")){const n=e.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);n&&(t=parseInt(n[1]),i=parseInt(n[2]),o=parseInt(n[3]))}return(.299*t+.587*i+.114*o)/255>.5?"black":"white"}getCurrentLightColor(e){if(!e||!e.attributes)return null;if(e.attributes.rgb_color&&Array.isArray(e.attributes.rgb_color))return`rgb(${e.attributes.rgb_color.join(",")})`;if(e.attributes.hs_color&&Array.isArray(e.attributes.hs_color)){const[t,i]=e.attributes.hs_color;return`rgb(${c.hsvToRgb(t,i,100).join(",")})`}if(e.attributes.xy_color&&Array.isArray(e.attributes.xy_color)){const[t,i]=e.attributes.xy_color;return`rgb(${c.xyToRgb(t,i).join(",")})`}if(e.attributes.color_temp){const t=c.miredToKelvin(e.attributes.color_temp);return t<3e3?"#ffb366":t>5e3?"#cce6ff":"#fff2e6"}return null}getPresetColorPreview(e){if(e.rgb_color)return`rgb(${e.rgb_color.join(",")})`;if(e.hs_color)return`rgb(${c.hsvToRgb(e.hs_color[0],e.hs_color[1],100).join(",")})`;if(e.xy_color)return`rgb(${c.xyToRgb(e.xy_color[0],e.xy_color[1]).join(",")})`;if(e.color_temp){const t=c.miredToKelvin(e.color_temp);return t<3e3?"#ffb366":t>5e3?"#cce6ff":"#fff2e6"}return e.effect?"linear-gradient(45deg, #ff0000, #00ff00, #0000ff, #ff0000)":null}validatePreset(e){const t=[];return e.name&&""!==e.name.trim()||t.push("Preset name is required"),e.entities&&0!==e.entities.length||t.push("At least one entity must be selected for each preset"),"turn_off"!==(e.action||"turn_on")&&(e.brightness||e.rgb_color||e.hs_color||e.xy_color||e.color_temp||e.effect||t.push("At least one light setting (brightness, color, or effect) must be configured for turn_on/toggle actions")),t}validate(e){const t=e,i=[...super.validate(e).errors];return t.presets&&0!==t.presets.length||i.push("At least one preset must be configured"),(t.presets||[]).forEach(((e,t)=>{this.validatePreset(e).forEach((e=>{i.push(`Preset ${t+1}: ${e}`)}))})),t.default_transition_time&&(t.default_transition_time<0||t.default_transition_time>10)&&i.push("Default transition time must be between 0 and 10 seconds"),"grid"===t.layout&&t.columns&&(t.columns<1||t.columns>6)&&i.push("Grid columns must be between 1 and 6"),{valid:0===i.length,errors:i}}getStyles(){return`\n      .light-module-container {\n        padding: 16px;\n        background: var(--card-background-color);\n        border-radius: 8px;\n      }\n\n      .no-presets-preview {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        padding: 32px;\n        color: var(--secondary-text-color);\n        text-align: center;\n      }\n\n      .no-presets-preview ha-icon {\n        font-size: 48px;\n        margin-bottom: 16px;\n        opacity: 0.5;\n      }\n\n      .config-hint {\n        font-size: 12px;\n        opacity: 0.7;\n        margin-top: 8px;\n      }\n\n      .presets-container {\n        /* Base container - specific layout styles applied inline */\n      }\n\n      .presets-container.buttons {\n        /* Flexible button layout - styles applied inline */\n      }\n\n      .presets-container.grid {\n        /* Grid layout - styles applied inline */\n      }\n\n\n      .preset-button-container {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 8px;\n      }\n\n      /* Preset button styles - work in both card and editor contexts */\n      .preset-button,\n      .module-preview .preset-button,\n      .light-module-container .preset-button {\n        display: flex !important;\n        align-items: center !important;\n        justify-content: center !important;\n        gap: 8px !important;\n        padding: 12px 16px !important;\n        border-radius: 8px !important;\n        border: none !important;\n        cursor: pointer !important;\n        font-size: 14px !important;\n        font-weight: 500 !important;\n        transition: all 0.2s ease !important;\n        min-height: 48px !important;\n        position: relative !important;\n        overflow: hidden !important;\n        box-sizing: border-box !important;\n      }\n\n      .preset-button ha-icon,\n      .module-preview .preset-button ha-icon,\n      .light-module-container .preset-button ha-icon {\n        font-size: 20px !important;\n      }\n\n      .preset-button.filled,\n      .module-preview .preset-button.filled,\n      .light-module-container .preset-button.filled {\n        border: 2px solid transparent !important;\n      }\n\n      .preset-button.filled:hover:not(.disabled),\n      .module-preview .preset-button.filled:hover:not(.disabled),\n      .light-module-container .preset-button.filled:hover:not(.disabled) {\n        transform: translateY(-2px) !important;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;\n        filter: brightness(1.1) !important;\n      }\n\n      .preset-button.outlined,\n      .module-preview .preset-button.outlined,\n      .light-module-container .preset-button.outlined {\n        background: transparent !important;\n        border: 2px solid !important;\n      }\n\n      .preset-button.outlined:hover:not(.disabled),\n      .module-preview .preset-button.outlined:hover:not(.disabled),\n      .light-module-container .preset-button.outlined:hover:not(.disabled) {\n        filter: brightness(1.1) !important;\n      }\n\n      .preset-button.text,\n      .module-preview .preset-button.text,\n      .light-module-container .preset-button.text {\n        background: transparent !important;\n        border: 2px solid transparent !important;\n      }\n\n      .preset-button.text:hover:not(.disabled),\n      .module-preview .preset-button.text:hover:not(.disabled),\n      .light-module-container .preset-button.text:hover:not(.disabled) {\n        background: rgba(var(--rgb-primary-color), 0.1) !important;\n      }\n\n      .preset-button.disabled,\n      .module-preview .preset-button.disabled,\n      .light-module-container .preset-button.disabled {\n        opacity: 0.5 !important;\n        cursor: not-allowed !important;\n      }\n\n      .preset-label {\n        font-size: 13px;\n        font-weight: 500;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 120px;\n      }\n\n      .preset-name {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        text-align: center;\n        max-width: 80px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      /* Layout-specific styles */\n      .presets-container.icons .preset-button {\n        width: 56px;\n        height: 56px;\n        border-radius: 50%;\n        padding: 0;\n      }\n\n      .presets-container.icons .preset-button ha-icon {\n        font-size: 24px;\n      }\n\n      .presets-container.list .preset-button-container {\n        flex-direction: row;\n        justify-content: flex-start;\n        align-items: center;\n        width: 100%;\n        gap: 12px;\n      }\n\n      .presets-container.list .preset-button {\n        flex: 1;\n        justify-content: flex-start;\n        text-align: left;\n        min-height: 56px;\n      }\n\n      .presets-container.list .preset-name {\n        flex: 1;\n        text-align: left;\n        max-width: none;\n        font-size: 14px;\n        color: var(--primary-text-color);\n      }\n\n      /* Preset editor styles (mimicking dropdown module) */\n      .preset-item {\n        transition: all 0.2s ease;\n        position: relative;\n        cursor: default;\n      }\n\n      .preset-item:hover {\n        background: rgba(var(--rgb-primary-color), 0.05);\n      }\n\n      .preset-item.dragging {\n        opacity: 0.7;\n        transform: rotate(2deg) scale(0.95);\n        box-shadow: 0 8px 16px rgba(0,0,0,0.2);\n        z-index: ${r.Mu.POPUP_TABS+10};\n        position: relative;\n      }\n\n      .preset-header {\n        user-select: none;\n        transition: background-color 0.2s ease;\n      }\n\n      .preset-header:hover {\n        background: rgba(var(--rgb-primary-color), 0.1) !important;\n      }\n\n      .drag-handle {\n        transition: all 0.2s ease;\n      }\n\n      .drag-handle:hover {\n        background: rgba(var(--rgb-primary-color), 0.15) !important;\n        transform: scale(1.1);\n      }\n\n      .drag-handle:active {\n        cursor: grabbing !important;\n        transform: scale(0.95);\n      }\n\n      .expand-caret {\n        transition: transform 0.2s ease !important;\n      }\n\n      .preset-content {\n        transition: all 0.3s ease;\n        overflow: hidden;\n      }\n\n      /* Light control styles */\n      .light-controls-section {\n        background: rgba(var(--rgb-primary-color), 0.02);\n        border-radius: 8px;\n        padding: 16px;\n        border: 1px solid rgba(var(--rgb-primary-color), 0.1);\n      }\n\n      .brightness-control,\n      .color-picker-section,\n      .effects-control {\n        background: var(--card-background-color);\n        border-radius: 6px;\n        padding: 12px;\n        border: 1px solid var(--divider-color);\n      }\n\n      /* Brightness slider styling */\n      .brightness-slider {\n        flex: 1;\n        height: 6px;\n        background: linear-gradient(to right, #333, #fff);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        cursor: pointer;\n      }\n\n      .brightness-slider::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        appearance: none;\n        height: 20px;\n        width: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        border: 2px solid white;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.2);\n      }\n\n      .brightness-slider::-moz-range-thumb {\n        height: 20px;\n        width: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        border: 2px solid white;\n        box-shadow: 0 2px 6px rgba(0,0,0,0.2);\n      }\n\n      .color-preview {\n        margin-top: 8px;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n\n      .color-preview div {\n        width: 32px;\n        height: 32px;\n        border-radius: 4px;\n        border: 1px solid var(--divider-color);\n      }\n\n      /* Responsive design */\n      @media (max-width: 600px) {\n        .presets-container.buttons,\n        .presets-container.icons {\n          justify-content: center;\n        }\n\n        .presets-container.grid {\n          grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));\n        }\n\n        .preset-button {\n          min-width: 80px;\n        }\n\n        .preset-label {\n          max-width: 70px;\n        }\n      }\n\n      /* Animation for smooth transitions */\n      .preset-button {\n        transition: all 0.2s ease;\n      }\n\n      .preset-button:active:not(.disabled) {\n        transform: scale(0.95);\n      }\n\n      .presets-container {\n        animation: fadeIn 0.3s ease-out;\n      }\n\n      @keyframes fadeIn {\n        from {\n          opacity: 0;\n          transform: translateY(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n\n      /* Visual customization styles */\n      .visual-customization {\n        background: rgba(var(--rgb-primary-color), 0.02);\n        border-radius: 8px;\n        padding: 16px;\n        border: 1px solid rgba(var(--rgb-primary-color), 0.1);\n      }\n\n      .smart-color-toggles {\n        background: rgba(var(--rgb-primary-color), 0.05);\n        border-radius: 6px;\n        padding: 12px;\n        margin-bottom: 16px;\n      }\n\n      .custom-colors {\n        display: flex;\n        flex-direction: column;\n        gap: 16px;\n      }\n\n      .color-field {\n        background: var(--card-background-color);\n        border-radius: 6px;\n        padding: 12px;\n        border: 1px solid var(--divider-color);\n      }\n\n      .color-field.disabled {\n        background: var(--secondary-background-color);\n        opacity: 0.7;\n      }\n\n      /* Gap control styles (from horizontal module) */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Responsive design for color fields */\n      @media (max-width: 600px) {\n        .custom-colors {\n          gap: 12px;\n        }\n\n        .presets-container.buttons {\n          justify-content: center;\n        }\n\n        .gap-control-container {\n          flex-direction: column;\n          align-items: stretch;\n          gap: 8px;\n        }\n\n        .gap-input {\n          width: 100% !important;\n          max-width: 100% !important;\n          min-width: 100% !important;\n        }\n      }\n    `}}},3057:(e,t,i)=>{i.d(t,{formatEntityState:()=>n});var o=i(9811);const n=(e,t,i)=>{var n,a;const r=!1!==(null==i?void 0:i.includeUnit),s=null===(n=null==e?void 0:e.states)||void 0===n?void 0:n[t];if(!e||!s)return void 0!==(null==i?void 0:i.state)?String(i.state):"";const l=e.formatEntityState,d=l?l(s,void 0!==(null==i?void 0:i.state)?String(i.state):void 0):(0,o.computeStateDisplay)(e.localize,s,e.locale,null==i?void 0:i.state);if(r)return d;const c=null===(a=s.attributes)||void 0===a?void 0:a.unit_of_measurement;if(c&&"string"==typeof d){const e=` ${c}`;if(d.endsWith(e))return d.slice(0,-e.length)}return d}},3063:(e,t,i)=>{i.d(t,{T:()=>a});var o=i(5183),n=i(8914);i(6768);class a{static render(e,t,i){const a=e.design||{},r=t=>{const o=Object.assign({},a);Object.keys(t).forEach((e=>{const i=t[e];""===i||null==i||"string"==typeof i&&""===i.trim()?delete o[e]:o[e]=i}));const n={design:o};if(Object.prototype.hasOwnProperty.call(t,"background_color")&&(n.background_color=t.background_color||void 0,n.background_color||delete n.background_color),Object.prototype.hasOwnProperty.call(t,"font_size")){const e=t.font_size;""===e||null==e||"string"==typeof e&&""===e.trim()?(n.font_size=void 0,delete n.font_size):n.font_size=e}t.hasOwnProperty("font_size")&&console.log("🔧 GlobalDesignTab: Font size update",{originalUpdates:t,combinedUpdates:n,fontSizeValue:t.font_size,designObject:n.design}),i(n),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-design-update",{detail:{moduleId:e.id,updates:t}}))};return o.qy`
      <div class="uc-global-design-tab">
        ${n.Q.injectCleanFormStyles()}

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <!-- Padding Section with Direct Inputs to Avoid HA Form Validation Issues -->
          <div class="form-field-container">
            <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
              Padding
            </div>
            <div
              class="field-description"
              style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
            >
              Spacing inside the module container (top/right/bottom/left).
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Top</label
                >
                <input
                  type="text"
                  .value=${a.padding_top||""}
                  @input=${e=>r({padding_top:e.target.value})}
                  placeholder="0px, 1rem, 5%"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Right</label
                >
                <input
                  type="text"
                  .value=${a.padding_right||""}
                  @input=${e=>r({padding_right:e.target.value})}
                  placeholder="0px, 1rem, 5%"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Bottom</label
                >
                <input
                  type="text"
                  .value=${a.padding_bottom||""}
                  @input=${e=>r({padding_bottom:e.target.value})}
                  placeholder="0px, 1rem, 5%"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Left</label
                >
                <input
                  type="text"
                  .value=${a.padding_left||""}
                  @input=${e=>r({padding_left:e.target.value})}
                  placeholder="0px, 1rem, 5%"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
            </div>
          </div>
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <!-- Background Color with Ultra Color Picker -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
              Background Color
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px;"
            >
              Background color for the module container.
            </div>
            <ultra-color-picker
              .value=${a.background_color||""}
              .defaultValue=${"transparent"}
              .hass=${t}
              @value-changed=${e=>r({background_color:e.detail.value})}
            ></ultra-color-picker>
          </div>

          <!-- Background Image Settings -->
          ${n.Q.renderField("Background Image","Background image for the module container.",t,{background_image_type:a.background_image_type||"none",background_image:a.background_image||"",background_image_entity:a.background_image_entity||"",background_size:a.background_size||"cover",background_repeat:a.background_repeat||"no-repeat",background_position:a.background_position||"center center"},[n.Q.createSchemaItem("background_image_type",{select:{options:[{value:"none",label:"None"},{value:"upload",label:"Upload/Local"},{value:"url",label:"URL"},{value:"entity",label:"Entity"}],mode:"dropdown"}}),n.Q.createSchemaItem("background_image",{text:{}}),n.Q.createSchemaItem("background_image_entity",{entity:{}}),n.Q.createSchemaItem("background_size",{select:{options:[{value:"cover",label:"Cover"},{value:"contain",label:"Contain"},{value:"auto",label:"Auto"},{value:"custom",label:"Custom"}],mode:"dropdown"}}),n.Q.createSchemaItem("background_repeat",{select:{options:[{value:"no-repeat",label:"No Repeat"},{value:"repeat",label:"Repeat"},{value:"repeat-x",label:"Repeat X"},{value:"repeat-y",label:"Repeat Y"}],mode:"dropdown"}}),n.Q.createSchemaItem("background_position",{select:{options:[{value:"left top",label:"Left Top"},{value:"left center",label:"Left Center"},{value:"left bottom",label:"Left Bottom"},{value:"center top",label:"Center Top"},{value:"center center",label:"Center"},{value:"center bottom",label:"Center Bottom"},{value:"right top",label:"Right Top"},{value:"right center",label:"Right Center"},{value:"right bottom",label:"Right Bottom"}],mode:"dropdown"}})],(e=>r(e.detail.value)))}
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <!-- Sizes Section with Direct Inputs -->
          <div class="form-field-container">
            <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
              Sizes
            </div>
            <div
              class="field-description"
              style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
            >
              Control the dimensions and size constraints of the module container.
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Width</label
                >
                <input
                  type="text"
                  .value=${a.width||""}
                  @input=${e=>r({width:e.target.value})}
                  placeholder="auto, 200px, 100%, 14rem, 10vw"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Height</label
                >
                <input
                  type="text"
                  .value=${a.height||""}
                  @input=${e=>r({height:e.target.value})}
                  placeholder="auto, 200px, 15rem, 10vh"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Max Width</label
                >
                <input
                  type="text"
                  .value=${a.max_width||""}
                  @input=${e=>r({max_width:e.target.value})}
                  placeholder="200px, 100%, 14rem, 10vw"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Max Height</label
                >
                <input
                  type="text"
                  .value=${a.max_height||""}
                  @input=${e=>r({max_height:e.target.value})}
                  placeholder="200px, 15rem, 10vh"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Min Width</label
                >
                <input
                  type="text"
                  .value=${a.min_width||""}
                  @input=${e=>r({min_width:e.target.value})}
                  placeholder="200px, 100%, 14rem, 10vw"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Min Height</label
                >
                <input
                  type="text"
                  .value=${a.min_height||""}
                  @input=${e=>r({min_height:e.target.value})}
                  placeholder="200px, 15rem, 10vh"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
            </div>
          </div>
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px;"
        >
          <!-- Typography Section with Direct Inputs to Avoid HA Form Validation Issues -->
          <div class="form-field-container">
            <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
              Typography
            </div>
            <div
              class="field-description"
              style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
            >
              Text color and font properties.
            </div>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Color</label
                >
                <input
                  type="text"
                  .value=${a.color||""}
                  @input=${e=>r({color:e.target.value})}
                  placeholder="var(--primary-text-color), #fff, red"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Font Size</label
                >
                <input
                  type="text"
                  .value=${a.font_size||""}
                  @input=${e=>r({font_size:e.target.value})}
                  placeholder="16px, 1.2rem, 1.5em"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Font Family</label
                >
                <input
                  type="text"
                  .value=${a.font_family||""}
                  @input=${e=>r({font_family:e.target.value})}
                  placeholder="Arial, sans-serif"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
              <div>
                <label
                  style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 4px; display: block;"
                  >Font Weight</label
                >
                <input
                  type="text"
                  .value=${a.font_weight||""}
                  @input=${e=>r({font_weight:e.target.value})}
                  placeholder="400, 600, bold"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--card-background-color); color: var(--primary-text-color);"
                />
              </div>
            </div>
          </div>
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;"
        >
          ${n.Q.renderField("Border","Container border style.",t,{border_style:a.border_style||"none",border_width:a.border_width||0,border_color:a.border_color||"var(--divider-color)",border_radius:a.border_radius||0},[n.Q.createSchemaItem("border_style",{select:{options:[{value:"none",label:"None"},{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"},{value:"dotted",label:"Dotted"}]}}),n.Q.createSchemaItem("border_width",{number:{min:0,max:20}}),n.Q.createSchemaItem("border_color",{text:{}}),n.Q.createSchemaItem("border_radius",{number:{min:0,max:64}})],(e=>r(e.detail.value)))}
        </div>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;"
        >
          ${n.Q.renderField("Shadow","Box shadow properties.",t,{box_shadow_h:a.box_shadow_h||0,box_shadow_v:a.box_shadow_v||0,box_shadow_blur:a.box_shadow_blur||0,box_shadow_spread:a.box_shadow_spread||0,box_shadow_color:a.box_shadow_color||"rgba(0,0,0,0.2)"},[n.Q.createSchemaItem("box_shadow_h",{number:{min:-50,max:50}}),n.Q.createSchemaItem("box_shadow_v",{number:{min:-50,max:50}}),n.Q.createSchemaItem("box_shadow_blur",{number:{min:0,max:200}}),n.Q.createSchemaItem("box_shadow_spread",{number:{min:-50,max:50}}),n.Q.createSchemaItem("box_shadow_color",{text:{}})],(e=>r(e.detail.value)))}
        </div>

        <!-- Smart Scaling Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <ha-icon icon="mdi:fit-to-screen" style="color: var(--primary-color);"></ha-icon>
            <span style="font-size: 16px; font-weight: 600; color: var(--primary-text-color);">
              Smart Scaling
            </span>
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
          >
            When enabled, content automatically scales to fit within the card boundaries. Disable to
            allow overflow effects like glows and shadows to extend beyond bounds.
          </div>
          <div style="display: flex; align-items: center; justify-content: space-between;">
            <span style="font-size: 14px; color: var(--primary-text-color);"
              >Enable Smart Scaling</span
            >
            <ha-switch
              .checked="${!1!==e.smart_scaling}"
              @change="${e=>{const t=e.target;i({smart_scaling:t.checked})}}"
            ></ha-switch>
          </div>
        </div>
      </div>
      ${(()=>{try{const i=e.renderDesignExtensions;if("function"==typeof i)return i(t,(e=>r(e)))}catch(e){}return o.qy``})()}
    `}}},3220:(e,t,i)=>{function o(e=!0){return e?{overflow:"hidden",maxWidth:"100%",boxSizing:"border-box"}:{overflow:"visible",maxWidth:"none",boxSizing:"content-box"}}i.d(t,{jY:()=>o})},3587:(e,t,i)=>{i.d(t,{S:()=>d});var o=i(5183),n=i(866),a=(i(6768),i(456)),r=i(2381);var s=i(4367),l=i(3220);class d extends n.m{constructor(){super(...arguments),this.metadata={type:"animated_clock",title:"Animated Clock (PRO)",description:"Beautiful flip clock with smooth animations",author:"WJD Designs",version:"1.0.0",icon:"mdi:clock-outline",category:"content",tags:["clock","time","pro","premium","animated","flip"]}}createDefault(e,t){return{id:e||this.generateId("animated_clock"),type:"animated_clock",time_format:"12",clock_style:"flip",update_frequency:"1",analog_show_seconds:!0,analog_smooth_seconds:!0,analog_show_hour_hand:!0,analog_show_minute_hand:!0,analog_show_hour_markers:!0,analog_show_center_dot:!0,analog_show_numbers:!1,analog_show_hour_ticks:!0,analog_show_minute_ticks:!0,analog_face_background_type:"color",analog_face_background_size:"cover",analog_face_background_position:"center",analog_face_background_repeat:"no-repeat",show_hours:!0,show_minutes:!0,show_seconds:!0,show_ampm:!0,show_separators:!0,show_labels:!0,show_prefix:!0,show_prompt:!0,show_command:!0,show_cursor:!0,clock_size:100,clock_color:"var(--primary-text-color)",clock_background:"var(--card-background-color)",flip_tile_color:"rgba(0, 0, 0, 0.5)",flip_hours_color:"var(--primary-text-color)",flip_minutes_color:"var(--primary-text-color)",flip_separator_color:"var(--primary-text-color)",flip_ampm_color:"var(--primary-text-color)",digital_background_color:"#000",digital_hours_color:"#ff3333",digital_minutes_color:"#ff3333",digital_seconds_color:"#ff3333",digital_separator_color:"#ff3333",digital_ampm_color:"#33ff33",digital_glow_color:"#ff0000",binary_hours_empty_color:"rgba(128, 128, 128, 0.2)",binary_hours_filled_color:"var(--primary-text-color)",binary_minutes_empty_color:"rgba(128, 128, 128, 0.2)",binary_minutes_filled_color:"var(--primary-text-color)",binary_seconds_empty_color:"rgba(128, 128, 128, 0.2)",binary_seconds_filled_color:"var(--primary-text-color)",binary_separator_color:"var(--primary-text-color)",binary_hours_label_color:"var(--primary-text-color)",binary_minutes_label_color:"var(--primary-text-color)",binary_seconds_label_color:"var(--primary-text-color)",minimal_hours_color:"var(--primary-text-color)",minimal_minutes_color:"var(--primary-text-color)",minimal_seconds_color:"var(--primary-text-color)",minimal_separator_color:"var(--primary-text-color)",minimal_ampm_color:"var(--primary-text-color)",retro_background_color:"linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%)",retro_hours_tile_color:"rgba(0, 0, 0, 0.3)",retro_minutes_tile_color:"rgba(0, 0, 0, 0.3)",retro_seconds_tile_color:"rgba(0, 0, 0, 0.3)",retro_separator_tile_color:"rgba(0, 0, 0, 0.3)",retro_hours_color:"#ffa500",retro_minutes_color:"#ffa500",retro_seconds_color:"#ffa500",retro_separator_color:"#ffa500",retro_ampm_color:"#00ff00",text_orientation:"horizontal",text_word_gap:8,text_prefix_color:"var(--primary-text-color)",text_prefix_size:38,text_hours_color:"var(--primary-text-color)",text_hours_size:48,text_minutes_color:"var(--primary-text-color)",text_minutes_size:48,text_ampm_color:"var(--primary-text-color)",text_ampm_size:24,neon_padding:24,neon_hours_color:"#00ffff",neon_minutes_color:"#00ffff",neon_seconds_color:"#00ffff",neon_separator_color:"#ff00ff",neon_ampm_color:"#00ff00",material_vertical_gap:8,material_background_color:"var(--card-background-color)",material_hours_color:"var(--primary-text-color)",material_minutes_color:"var(--primary-text-color)",material_seconds_color:"var(--primary-text-color)",material_separator_color:"var(--primary-text-color)",material_ampm_color:"var(--primary-text-color)",terminal_background_color:"#1e1e1e",terminal_line1_color:"#4ec9b0",terminal_line2_color:"#ce9178",terminal_cursor_color:"#4ec9b0",terminal_hours_color:"#d4d4d4",terminal_minutes_color:"#d4d4d4",terminal_seconds_color:"#d4d4d4",terminal_separator_color:"#d4d4d4",terminal_ampm_color:"#d4d4d4",terminal_vertical_spacing:8,terminal_line1_size:17,terminal_line2_size:17,terminal_output_size:38,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,n){return function(e,t,i,n,s){var l;const d=t,c=(null===(l=i.locale)||void 0===l?void 0:l.language)||"en";return o.qy`
    ${e.injectUcFormStyles()}
    <div class="module-general-settings">
      <!-- ============================================ -->
      <!-- CLOCK CONFIGURATION SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
      >
        <div
          class="section-title"
          style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;"
        >
          <ha-icon icon="mdi:clock-outline" style="color: var(--primary-color);"></ha-icon>
          ${(0,a.kg)("editor.animated_clock.config.title",c,"Clock Configuration")}
        </div>

        <!-- Clock Style -->
        ${e.renderFieldSection((0,a.kg)("editor.animated_clock.clock_style",c,"Clock Style"),(0,a.kg)("editor.animated_clock.clock_style_desc",c,"Choose from 10 different clock display styles"),i,{clock_style:d.clock_style||"flip"},[e.selectField("clock_style",[{value:"flip",label:"Flip Clock"},{value:"digital",label:"Digital LED"},{value:"analog",label:"Analog Clock"},{value:"binary",label:"Binary Clock"},{value:"minimal",label:"Minimal"},{value:"retro",label:"Retro 7-Segment"},{value:"word",label:"Text Clock"},{value:"neon",label:"Neon Glow"},{value:"material",label:"Material Design"},{value:"terminal",label:"Terminal/Console"}])],(t=>{t.detail.value.clock_style!==d.clock_style&&(s(t.detail.value),setTimeout((()=>e.triggerPreviewUpdate()),50))}))}

        <!-- Time Format (hidden for analog clock) -->
        ${"analog"!==d.clock_style?o.qy`
              <div style="margin-top: 16px;">
                ${e.renderFieldSection((0,a.kg)("editor.animated_clock.time_format",c,"Time Format"),(0,a.kg)("editor.animated_clock.time_format_desc",c,"12-hour or 24-hour time display"),i,{time_format:d.time_format||"12"},[e.selectField("time_format",[{value:"12",label:"12 Hour (AM/PM)"},{value:"24",label:"24 Hour"}])],(t=>{t.detail.value.time_format!==d.time_format&&(s(t.detail.value),setTimeout((()=>e.triggerPreviewUpdate()),50))}))}
              </div>
            `:""}

        <!-- Clock Size Slider -->
        <div style="margin-top: 16px;">
          <label
            style="display: block; font-size: 14px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
          >
            ${(0,a.kg)("editor.animated_clock.clock_size",c,"Clock Size")}
          </label>
          <div style="font-size: 12px; color: var(--secondary-text-color); margin-bottom: 8px;">
            ${(0,a.kg)("editor.animated_clock.clock_size_desc",c,"Scale factor for clock size (0-200)")}
          </div>
          <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
            <input
              type="range"
              class="gap-slider"
              min="0"
              max="200"
              step="1"
              .value="${d.clock_size||100}"
              @input="${t=>{const i=t.target,o=parseInt(i.value);s({clock_size:o}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}"
            />
            <input
              type="number"
              class="gap-input"
              min="0"
              max="200"
              step="1"
              .value="${d.clock_size||100}"
              @input="${t=>{const i=t.target,o=parseInt(i.value);!isNaN(o)&&o>=0&&o<=200&&(s({clock_size:o}),setTimeout((()=>e.triggerPreviewUpdate()),50))}}"
              @keydown="${t=>{if("ArrowUp"===t.key||"ArrowDown"===t.key){t.preventDefault();const i=t.target,o=parseInt(i.value)||100,n="ArrowUp"===t.key?1:-1,a=Math.max(0,Math.min(200,o+n));s({clock_size:a}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}}"
            />
            <button
              class="reset-btn"
              @click="${()=>{s({clock_size:100}),setTimeout((()=>e.triggerPreviewUpdate()),50)}}"
              title="Reset to default (100)"
            >
              <ha-icon icon="mdi:refresh"></ha-icon>
            </button>
          </div>
        </div>
      </div>

      <!-- ============================================ -->
      <!-- CLOCK CUSTOMIZATION SECTION -->
      <!-- ============================================ -->
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
      >
        <div
          class="section-title"
          style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;"
        >
          <ha-icon icon="mdi:palette" style="color: var(--primary-color);"></ha-icon>
          ${(0,a.kg)("editor.animated_clock.customization.title",c,"Clock Customization")}
        </div>

        ${function(e,t,i,n,s){const l=e.clock_style||"flip";return"analog"===l?o.qy`
      <!-- Hour Hand -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.analog_show_hour_hand}"
            @change="${e=>{const t=e.target;i({analog_show_hour_hand:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_hour_hand",s,"Hour Hand")}</span
          >
        </label>
        ${!1!==e.analog_show_hour_hand?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_hour_hand_color||e.clock_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_hour_hand_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minute Hand -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.analog_show_minute_hand}"
            @change="${e=>{const t=e.target;i({analog_show_minute_hand:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_minute_hand",s,"Minute Hand")}</span
          >
        </label>
        ${!1!==e.analog_show_minute_hand?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_minute_hand_color||e.clock_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_minute_hand_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Second Hand -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.analog_show_seconds}"
            @change="${e=>{const t=e.target;i({analog_show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_seconds",s,"Second Hand")}</span
          >
        </label>
        ${!1!==e.analog_show_seconds?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_second_hand_color||"#ff4444"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_second_hand_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <!-- Smooth Seconds Toggle -->
                <label
                  style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color); margin-top: 8px;"
                >
                  <ha-switch
                    .checked="${!1!==e.analog_smooth_seconds}"
                    @change="${e=>{const t=e.target;i({analog_smooth_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  ></ha-switch>
                  <span style="font-size: 13px; color: var(--secondary-text-color);"
                    >${(0,a.kg)("editor.animated_clock.analog_smooth_seconds",s,"Smooth Sweeping Motion")}</span
                  >
                </label>
              </div>
            `:""}
      </div>

      <!-- Hour Markers -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.analog_show_hour_markers}"
            @change="${e=>{const t=e.target;i({analog_show_hour_markers:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_hour_markers",s,"Hour Markers")}</span
          >
        </label>
        ${!1!==e.analog_show_hour_markers?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_hour_marker_color||e.clock_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_hour_marker_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Center Dot -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.analog_show_center_dot}"
            @change="${e=>{const t=e.target;i({analog_show_center_dot:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_center_dot",s,"Center Dot")}</span
          >
        </label>
        ${!1!==e.analog_show_center_dot?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_center_dot_color||e.clock_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_center_dot_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Clock Numbers (1-12) -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!0===e.analog_show_numbers}"
            @change="${e=>{const t=e.target;i({analog_show_numbers:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_numbers",s,"Clock Numbers (1-12)")}</span
          >
        </label>
        ${!0===e.analog_show_numbers?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_numbers_color||e.clock_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_numbers_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Hour Tick Marks (12 major ticks) -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!0===e.analog_show_hour_ticks}"
            @change="${e=>{const t=e.target;i({analog_show_hour_ticks:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_hour_ticks",s,"Hour Tick Marks")}</span
          >
        </label>
        ${!0===e.analog_show_hour_ticks?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_hour_ticks_color||e.clock_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_hour_ticks_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minute Tick Marks (48 minor ticks) -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!0===e.analog_show_minute_ticks}"
            @change="${e=>{const t=e.target;i({analog_show_minute_ticks:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.analog_show_minute_ticks",s,"Minute Tick Marks")}</span
          >
        </label>
        ${!0===e.analog_show_minute_ticks?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.analog_minute_ticks_color||e.clock_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_minute_ticks_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Clock Face Section -->
      <div style="border-top: 1px solid var(--divider-color); padding-top: 20px; margin-top: 20px;">
        <div
          style="font-size: 14px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 12px;"
        >
          ${(0,a.kg)("editor.animated_clock.clock_face",s,"Clock Face")}
        </div>

        <!-- Face Outline Color -->
        <div style="margin-bottom: 16px;">
          <label
            style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
          >
            ${(0,a.kg)("editor.animated_clock.face_outline",s,"Outline Color")}
          </label>
          <ultra-color-picker
            .value="${e.analog_face_outline_color||e.clock_color||"var(--primary-text-color)"}"
            .hass="${t}"
            @value-changed="${e=>{i({analog_face_outline_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
            style="width: 100%; height: 40px;"
          ></ultra-color-picker>
        </div>

        <!-- Face Background -->
        <div style="margin-top: 16px;">
          ${n.renderFieldSection((0,a.kg)("editor.animated_clock.face_background_type",s,"Background Type"),"",t,{analog_face_background_type:e.analog_face_background_type||"color"},[n.selectField("analog_face_background_type",[{value:"color",label:"Color"},{value:"upload",label:"Upload Image"},{value:"entity",label:"Entity Image"},{value:"url",label:"Image URL"}])],(t=>{t.detail.value.analog_face_background_type!==e.analog_face_background_type&&(i(t.detail.value),(null==n?void 0:n.requestUpdate)&&n.requestUpdate(),setTimeout((()=>n.triggerPreviewUpdate()),50))}),!1)}
        </div>

        <!-- Background Color (shown when type is 'color') -->
        ${"color"===(e.analog_face_background_type||"color")?o.qy`
              <div style="margin-bottom: 16px;">
                <label
                  style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                >
                  ${(0,a.kg)("editor.animated_clock.face_background",s,"Background Color")}
                </label>
                <ultra-color-picker
                  .value="${e.analog_face_background_color||e.clock_background||"var(--card-background-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({analog_face_background_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}

        <!-- Entity Image (shown when type is 'entity') -->
        ${"entity"===e.analog_face_background_type?o.qy`
              <div style="margin-bottom: 16px;">
                <ha-form
                  .hass=${t}
                  .data=${{entity:e.analog_face_background_image_entity||""}}
                  .schema=${[{name:"entity",selector:{entity:{}}}]}
                  .computeLabel=${()=>(0,a.kg)("editor.animated_clock.background_entity",s,"Background Image Entity")}
                  @value-changed=${e=>{i({analog_face_background_image_entity:e.detail.value.entity}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}
                ></ha-form>
              </div>
            `:""}

        <!-- Upload Image (shown when type is 'upload') -->
        ${"upload"===e.analog_face_background_type?o.qy`
              <div style="margin-bottom: 16px;">
                <label
                  style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                >
                  ${(0,a.kg)("editor.animated_clock.upload_background",s,"Upload Background Image")}
                </label>
                <div style="margin-top: 8px;">
                  <label
                    style="display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; background: var(--primary-color); color: var(--text-primary-color); border-radius: 6px; cursor: pointer;"
                  >
                    <ha-icon icon="mdi:upload"></ha-icon>
                    <span>Choose File</span>
                    <input
                      type="file"
                      accept="image/*"
                      @change="${async e=>{var o;const a=null===(o=e.target.files)||void 0===o?void 0:o[0];if(a&&t)try{const e=await(0,r.m)(t,a);i({analog_face_background_image_upload:e}),setTimeout((()=>n.triggerPreviewUpdate()),50)}catch(e){console.error("Image upload failed:",e),alert(`Upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}}}"
                      style="display: none"
                    />
                  </label>
                  <div
                    style="margin-top: 8px; padding: 8px; background: var(--secondary-background-color); border-radius: 4px; font-size: 12px;"
                  >
                    ${e.analog_face_background_image_upload?o.qy`<span title="${e.analog_face_background_image_upload}">
                          ${d=e.analog_face_background_image_upload,d?d.length<=30?d:"..."+d.slice(-27):""}
                        </span>`:o.qy`<span style="color: var(--secondary-text-color);"
                          >No file chosen</span
                        >`}
                  </div>
                </div>
              </div>
            `:""}

        <!-- Image URL (shown when type is 'url') -->
        ${"url"===e.analog_face_background_type?o.qy`
              <div style="margin-bottom: 16px;">
                <label
                  style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                >
                  ${(0,a.kg)("editor.animated_clock.background_url",s,"Image URL")}
                </label>
                <input
                  type="text"
                  .value="${e.analog_face_background_image_url||""}"
                  @input="${e=>{const t=e.target;i({analog_face_background_image_url:t.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color); font-size: 14px;"
                  placeholder="https://example.com/image.jpg"
                />
              </div>
            `:""}

        <!-- Background Image Options (shown when type is not 'color') -->
        ${e.analog_face_background_type&&"color"!==e.analog_face_background_type?o.qy`
              <div style="margin-bottom: 16px;">
                <label
                  style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                >
                  ${(0,a.kg)("editor.animated_clock.background_size",s,"Background Size")}
                </label>
                ${n.renderFieldSection("","",t,{analog_face_background_size:e.analog_face_background_size||"cover"},[n.selectField("analog_face_background_size",[{value:"cover",label:"Cover"},{value:"contain",label:"Contain"},{value:"auto",label:"Auto"},{value:"100% 100%",label:"Stretch"}])],(e=>{i(e.detail.value),setTimeout((()=>n.triggerPreviewUpdate()),50)}),!1)}
              </div>

              <div style="margin-bottom: 16px;">
                <label
                  style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                >
                  ${(0,a.kg)("editor.animated_clock.background_position",s,"Background Position")}
                </label>
                ${n.renderFieldSection("","",t,{analog_face_background_position:e.analog_face_background_position||"center"},[n.selectField("analog_face_background_position",[{value:"center",label:"Center"},{value:"top",label:"Top"},{value:"bottom",label:"Bottom"},{value:"left",label:"Left"},{value:"right",label:"Right"}])],(e=>{i(e.detail.value),setTimeout((()=>n.triggerPreviewUpdate()),50)}),!1)}
              </div>

              <div style="margin-bottom: 16px;">
                <label
                  style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
                >
                  ${(0,a.kg)("editor.animated_clock.background_repeat",s,"Background Repeat")}
                </label>
                ${n.renderFieldSection("","",t,{analog_face_background_repeat:e.analog_face_background_repeat||"no-repeat"},[n.selectField("analog_face_background_repeat",[{value:"no-repeat",label:"No Repeat"},{value:"repeat",label:"Repeat"},{value:"repeat-x",label:"Repeat X"},{value:"repeat-y",label:"Repeat Y"}])],(e=>{i(e.detail.value),setTimeout((()=>n.triggerPreviewUpdate()),50)}),!1)}
              </div>
            `:""}
      </div>
    `:"neon"===l?o.qy`
      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_hours",s,"Hours")}</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.neon_hours_color||"#00ffff"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({neon_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_minutes",s,"Minutes")}</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.neon_minutes_color||"#00ffff"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({neon_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Seconds -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_seconds}"
            @change="${e=>{const t=e.target;i({show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_seconds",s,"Seconds")}</span
          >
        </label>
        ${!1!==e.show_seconds?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.neon_seconds_color||"#00ffff"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({neon_seconds_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_separators",s,"Separators (:)")}</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.neon_separator_color||"#ff00ff"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({neon_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >${(0,a.kg)("editor.animated_clock.show_ampm",s,"AM/PM")}</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div style="margin-top: 8px; padding-left: 40px;">
                      <ultra-color-picker
                        .value="${e.neon_ampm_color||"#00ff00"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({neon_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    </div>
                  `:""}
            </div>
          `:""}
    `:"flip"===l?o.qy`
      <!-- Flip Tile Background Color -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
        >
          ${(0,a.kg)("editor.animated_clock.flip_tile_color",s,"Tile Background Color")}
        </label>
        <ultra-color-picker
          .value="${e.flip_tile_color||"rgba(0, 0, 0, 0.5)"}"
          .hass="${t}"
          @value-changed="${e=>{i({flip_tile_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          style="width: 100%; height: 40px;"
        ></ultra-color-picker>
      </div>

      <div
        style="border-top: 1px solid var(--divider-color); padding-top: 20px; margin-top: 20px;"
      ></div>

      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_hours",s,"Hours")}</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.flip_hours_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({flip_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_minutes",s,"Minutes")}</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.flip_minutes_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({flip_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_separators",s,"Separators (:)")}</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.flip_separator_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({flip_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >${(0,a.kg)("editor.animated_clock.show_ampm",s,"AM/PM")}</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div style="margin-top: 8px; padding-left: 40px;">
                      <ultra-color-picker
                        .value="${e.flip_ampm_color||"var(--primary-text-color)"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({flip_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    </div>
                  `:""}
            </div>
          `:""}
    `:"digital"===l?o.qy`
      <!-- Clock Background Color -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
        >
          Clock Background Color
        </label>
        <ultra-color-picker
          .value="${e.digital_background_color||"#000"}"
          .hass="${t}"
          @value-changed="${e=>{i({digital_background_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          style="width: 100%; height: 40px;"
        ></ultra-color-picker>
      </div>

      <div
        style="border-top: 1px solid var(--divider-color); padding-top: 20px; margin-top: 20px;"
      ></div>

      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Hours</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.digital_hours_color||"#ff3333"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({digital_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Minutes</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.digital_minutes_color||"#ff3333"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({digital_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Seconds -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_seconds}"
            @change="${e=>{const t=e.target;i({show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Seconds</span
          >
        </label>
        ${!1!==e.show_seconds?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.digital_seconds_color||"#ff3333"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({digital_seconds_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Separators (:)</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.digital_separator_color||"#ff3333"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({digital_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >AM/PM</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div style="margin-top: 8px; padding-left: 40px;">
                      <ultra-color-picker
                        .value="${e.digital_ampm_color||"#33ff33"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({digital_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    </div>
                  `:""}
            </div>
          `:""}
    `:"minimal"===l?o.qy`
      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Hours</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.minimal_hours_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({minimal_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Minutes</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.minimal_minutes_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({minimal_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Seconds -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_seconds}"
            @change="${e=>{const t=e.target;i({show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Seconds</span
          >
        </label>
        ${!1!==e.show_seconds?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.minimal_seconds_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({minimal_seconds_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Separators (:)</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.minimal_separator_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({minimal_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >AM/PM</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div style="margin-top: 8px; padding-left: 40px;">
                      <ultra-color-picker
                        .value="${e.minimal_ampm_color||"var(--primary-text-color)"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({minimal_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    </div>
                  `:""}
            </div>
          `:""}
    `:"retro"===l?o.qy`
      <!-- Display Background Color -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
        >
          Display Background
        </label>
        <ultra-color-picker
          .value="${e.retro_background_color||"linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%)"}"
          .hass="${t}"
          @value-changed="${e=>{i({retro_background_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          style="width: 100%; height: 40px;"
        ></ultra-color-picker>
      </div>

      <div
        style="border-top: 1px solid var(--divider-color); padding-top: 20px; margin-top: 20px;"
      ></div>

      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Hours</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div
                style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Tile Background</label
                >
                <ultra-color-picker
                  .value="${e.retro_hours_tile_color||"rgba(0, 0, 0, 0.3)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_hours_tile_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Digit Color</label
                >
                <ultra-color-picker
                  .value="${e.retro_hours_color||"#ffa500"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Minutes</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div
                style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Tile Background</label
                >
                <ultra-color-picker
                  .value="${e.retro_minutes_tile_color||"rgba(0, 0, 0, 0.3)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_minutes_tile_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Digit Color</label
                >
                <ultra-color-picker
                  .value="${e.retro_minutes_color||"#ffa500"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Seconds -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_seconds}"
            @change="${e=>{const t=e.target;i({show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Seconds</span
          >
        </label>
        ${!1!==e.show_seconds?o.qy`
              <div
                style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Tile Background</label
                >
                <ultra-color-picker
                  .value="${e.retro_seconds_tile_color||"rgba(0, 0, 0, 0.3)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_seconds_tile_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Digit Color</label
                >
                <ultra-color-picker
                  .value="${e.retro_seconds_color||"#ffa500"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_seconds_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Separators (:)</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div
                style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Tile Background</label
                >
                <ultra-color-picker
                  .value="${e.retro_separator_tile_color||"rgba(0, 0, 0, 0.3)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_separator_tile_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Colon Color</label
                >
                <ultra-color-picker
                  .value="${e.retro_separator_color||"#ffa500"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({retro_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >AM/PM</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div style="margin-top: 8px; padding-left: 40px;">
                      <ultra-color-picker
                        .value="${e.retro_ampm_color||"#00ff00"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({retro_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    </div>
                  `:""}
            </div>
          `:""}
    `:"material"===l?o.qy`
      <!-- Card Background Color -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
        >
          Card Background
        </label>
        <ultra-color-picker
          .value="${e.material_background_color||"var(--card-background-color)"}"
          .hass="${t}"
          @value-changed="${e=>{i({material_background_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          style="width: 100%; height: 40px;"
        ></ultra-color-picker>
      </div>

      <div
        style="border-top: 1px solid var(--divider-color); padding-top: 20px; margin-top: 20px;"
      ></div>

      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Hours</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.material_hours_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({material_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Minutes</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.material_minutes_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({material_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Seconds -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_seconds}"
            @change="${e=>{const t=e.target;i({show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Seconds</span
          >
        </label>
        ${!1!==e.show_seconds?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.material_seconds_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({material_seconds_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Separators (:)</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.material_separator_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({material_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >AM/PM</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div style="margin-top: 8px; padding-left: 40px;">
                      <ultra-color-picker
                        .value="${e.material_ampm_color||"var(--primary-text-color)"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({material_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    </div>
                  `:""}
            </div>
          `:""}
    `:"binary"===l?o.qy`
      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Hours</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div
                style="margin-top: 12px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                  >Empty Dots</label
                >
                <ultra-color-picker
                  .value="${e.binary_hours_empty_color||"rgba(128, 128, 128, 0.2)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({binary_hours_empty_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px; margin-bottom: 16px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                  >Filled Dots</label
                >
                <ultra-color-picker
                  .value="${e.binary_hours_filled_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({binary_hours_filled_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px; margin-bottom: 16px;"
                ></ultra-color-picker>
                ${!1!==e.show_labels?o.qy`
                      <label
                        style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                        >Label (HH)</label
                      >
                      <ultra-color-picker
                        .value="${e.binary_hours_label_color||"var(--primary-text-color)"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({binary_hours_label_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    `:""}
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Minutes</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div
                style="margin-top: 12px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                  >Empty Dots</label
                >
                <ultra-color-picker
                  .value="${e.binary_minutes_empty_color||"rgba(128, 128, 128, 0.2)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({binary_minutes_empty_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px; margin-bottom: 16px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                  >Filled Dots</label
                >
                <ultra-color-picker
                  .value="${e.binary_minutes_filled_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({binary_minutes_filled_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px; margin-bottom: 16px;"
                ></ultra-color-picker>
                ${!1!==e.show_labels?o.qy`
                      <label
                        style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                        >Label (MM)</label
                      >
                      <ultra-color-picker
                        .value="${e.binary_minutes_label_color||"var(--primary-text-color)"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({binary_minutes_label_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    `:""}
              </div>
            `:""}
      </div>

      <!-- Seconds -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_seconds}"
            @change="${e=>{const t=e.target;i({show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Seconds</span
          >
        </label>
        ${!1!==e.show_seconds?o.qy`
              <div
                style="margin-top: 12px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                  >Empty Dots</label
                >
                <ultra-color-picker
                  .value="${e.binary_seconds_empty_color||"rgba(128, 128, 128, 0.2)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({binary_seconds_empty_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px; margin-bottom: 16px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                  >Filled Dots</label
                >
                <ultra-color-picker
                  .value="${e.binary_seconds_filled_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({binary_seconds_filled_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px; margin-bottom: 16px;"
                ></ultra-color-picker>
                ${!1!==e.show_labels?o.qy`
                      <label
                        style="font-size: 12px; color: var(--secondary-text-color); margin-top: 4px;"
                        >Label (SS)</label
                      >
                      <ultra-color-picker
                        .value="${e.binary_seconds_label_color||"var(--primary-text-color)"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({binary_seconds_label_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    `:""}
              </div>
            `:""}
      </div>

      <!-- Labels (H M S) -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_labels}"
            @change="${e=>{const t=e.target;i({show_labels:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Labels (HH MM SS)</span
          >
        </label>
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Separators (:)</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.binary_separator_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({binary_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>
    `:"word"===l?o.qy`
      <!-- Prefix ("It is") -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_prefix}"
            @change="${e=>{const t=e.target;i({show_prefix:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >"It is" Prefix</span
          >
        </label>
        ${!1!==e.show_prefix?o.qy`
              <div
                style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color);">Color</label>
                <ultra-color-picker
                  .value="${e.text_prefix_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({text_prefix_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Font Size (px)</label
                >
                <input
                  type="number"
                  .value="${e.text_prefix_size||38}"
                  @input="${e=>{const t=parseInt(e.target.value)||38;i({text_prefix_size:t}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  min="10"
                  max="100"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color); font-size: 14px;"
                />
              </div>
            `:""}
      </div>

      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Hours</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div
                style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color);">Color</label>
                <ultra-color-picker
                  .value="${e.text_hours_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({text_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Font Size (px)</label
                >
                <input
                  type="number"
                  .value="${e.text_hours_size||48}"
                  @input="${e=>{const t=parseInt(e.target.value)||48;i({text_hours_size:t}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  min="10"
                  max="100"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color); font-size: 14px;"
                />
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >Minutes</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div
                style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
              >
                <label style="font-size: 12px; color: var(--secondary-text-color);">Color</label>
                <ultra-color-picker
                  .value="${e.text_minutes_color||"var(--primary-text-color)"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({text_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
                <label style="font-size: 12px; color: var(--secondary-text-color);"
                  >Font Size (px)</label
                >
                <input
                  type="number"
                  .value="${e.text_minutes_size||48}"
                  @input="${e=>{const t=parseInt(e.target.value)||48;i({text_minutes_size:t}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  min="10"
                  max="100"
                  style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color); font-size: 14px;"
                />
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >AM/PM</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div
                      style="margin-top: 8px; padding-left: 40px; display: flex; flex-direction: column; gap: 8px;"
                    >
                      <label style="font-size: 12px; color: var(--secondary-text-color);"
                        >Color</label
                      >
                      <ultra-color-picker
                        .value="${e.text_ampm_color||"var(--primary-text-color)"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({text_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                      <label style="font-size: 12px; color: var(--secondary-text-color);"
                        >Font Size (px)</label
                      >
                      <input
                        type="number"
                        .value="${e.text_ampm_size||24}"
                        @input="${e=>{const t=parseInt(e.target.value)||24;i({text_ampm_size:t}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        min="10"
                        max="100"
                        style="width: 100%; padding: 8px; border: 1px solid var(--divider-color); border-radius: 4px; background: var(--secondary-background-color); color: var(--primary-text-color); font-size: 14px;"
                      />
                    </div>
                  `:""}
            </div>
          `:""}
    `:"terminal"===l?o.qy`
      <!-- Terminal Background Color -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: block; font-size: 13px; font-weight: 500; color: var(--primary-text-color); margin-bottom: 6px;"
        >
          Terminal Background
        </label>
        <ultra-color-picker
          .value="${e.terminal_background_color||"#1e1e1e"}"
          .hass="${t}"
          @value-changed="${e=>{i({terminal_background_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          style="width: 100%; height: 40px;"
        ></ultra-color-picker>
      </div>

      <div
        style="border-top: 1px solid var(--divider-color); padding-top: 20px; margin-top: 20px;"
      ></div>

      <!-- Terminal Prompt -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_prompt}"
            @change="${e=>{const t=e.target;i({show_prompt:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_prompt",s,"Terminal Prompt")}</span
          >
        </label>
        ${!1!==e.show_prompt?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.terminal_line1_color||"#4ec9b0"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({terminal_line1_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Terminal Command -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_command}"
            @change="${e=>{const t=e.target;i({show_command:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_command",s,"Terminal Command")}</span
          >
        </label>
        ${!1!==e.show_command?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.terminal_line2_color||"#ce9178"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({terminal_line2_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Hours -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_hours}"
            @change="${e=>{const t=e.target;i({show_hours:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_hours",s,"Hours")}</span
          >
        </label>
        ${!1!==e.show_hours?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.terminal_hours_color||"#d4d4d4"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({terminal_hours_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Minutes -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_minutes}"
            @change="${e=>{const t=e.target;i({show_minutes:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_minutes",s,"Minutes")}</span
          >
        </label>
        ${!1!==e.show_minutes?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.terminal_minutes_color||"#d4d4d4"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({terminal_minutes_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Seconds -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_seconds}"
            @change="${e=>{const t=e.target;i({show_seconds:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_seconds",s,"Seconds")}</span
          >
        </label>
        ${!1!==e.show_seconds?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.terminal_seconds_color||"#d4d4d4"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({terminal_seconds_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- Separators -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_separators}"
            @change="${e=>{const t=e.target;i({show_separators:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_separators",s,"Separators (:)")}</span
          >
        </label>
        ${!1!==e.show_separators?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.terminal_separator_color||"#d4d4d4"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({terminal_separator_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>

      <!-- AM/PM (12-hour format only) -->
      ${"12"===e.time_format?o.qy`
            <div style="margin-bottom: 20px;">
              <label
                style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
              >
                <ha-switch
                  .checked="${!1!==e.show_ampm}"
                  @change="${e=>{const t=e.target;i({show_ampm:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                ></ha-switch>
                <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
                  >AM/PM</span
                >
              </label>
              ${!1!==e.show_ampm?o.qy`
                    <div style="margin-top: 8px; padding-left: 40px;">
                      <ultra-color-picker
                        .value="${e.terminal_ampm_color||"#d4d4d4"}"
                        .hass="${t}"
                        @value-changed="${e=>{i({terminal_ampm_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                        style="width: 100%; height: 40px;"
                      ></ultra-color-picker>
                    </div>
                  `:""}
            </div>
          `:""}

      <!-- Cursor -->
      <div style="margin-bottom: 20px;">
        <label
          style="display: flex; align-items: center; gap: 8px; cursor: pointer; padding: 8px; border-radius: 6px; background: var(--primary-background-color);"
        >
          <ha-switch
            .checked="${!1!==e.show_cursor}"
            @change="${e=>{const t=e.target;i({show_cursor:t.checked}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
          ></ha-switch>
          <span style="font-size: 14px; font-weight: 500; color: var(--primary-text-color);"
            >${(0,a.kg)("editor.animated_clock.show_cursor",s,"Blinking Cursor")}</span
          >
        </label>
        ${!1!==e.show_cursor?o.qy`
              <div style="margin-top: 8px; padding-left: 40px;">
                <ultra-color-picker
                  .value="${e.terminal_cursor_color||"#4ec9b0"}"
                  .hass="${t}"
                  @value-changed="${e=>{i({terminal_cursor_color:e.detail.value}),setTimeout((()=>n.triggerPreviewUpdate()),50)}}"
                  style="width: 100%; height: 40px;"
                ></ultra-color-picker>
              </div>
            `:""}
      </div>
    `:o.qy`
    <div style="text-align: center; padding: 20px; color: var(--secondary-text-color);">
      Select a clock style to customize
    </div>
  `;var d}(d,i,s,e,c)}
      </div>
    </div>
  `}(this,e,t,0,n)}renderPreview(e,t,i,n){const a=e,r=a,d=r.design||{},c=!1!==a.smart_scaling,p=(0,l.jY)(c),u=parseInt(a.update_frequency||"1");s.D.registerClock(a.id,u);const h=new Date,g=h.getHours(),m=g%12||12,f="24"===a.time_format?g:m,_=h.getMinutes(),v=h.getSeconds(),b=h.getMilliseconds(),y=g>=12?"PM":"AM";let x;switch(a.clock_style||"flip"){case"flip":default:x=this._renderFlipClock(f,_,y,a);break;case"digital":x=this._renderDigitalClock(f,_,v,y,a);break;case"analog":x=this._renderAnalogClock(f,_,v,b,t,a);break;case"binary":x=this._renderBinaryClock(g,_,v,a);break;case"minimal":x=this._renderMinimalClock(f,_,v,y,a);break;case"retro":x=this._renderRetroClock(f,_,v,y,a);break;case"word":x=this._renderTextClock(f,_,y,a);break;case"neon":x=this._renderNeonClock(f,_,v,y,a);break;case"material":x=this._renderMaterialClock(f,_,v,y,a);break;case"terminal":x=this._renderTerminalClock(f,_,v,y,a)}const k=Object.assign({padding:d.padding_top||d.padding_bottom||d.padding_left||d.padding_right||r.padding_top||r.padding_bottom||r.padding_left||r.padding_right?`${this.addPixelUnit(d.padding_top||r.padding_top)||"0px"} ${this.addPixelUnit(d.padding_right||r.padding_right)||"0px"} ${this.addPixelUnit(d.padding_bottom||r.padding_bottom)||"0px"} ${this.addPixelUnit(d.padding_left||r.padding_left)||"0px"}`:"16px",margin:d.margin_top||d.margin_bottom||d.margin_left||d.margin_right||r.margin_top||r.margin_bottom||r.margin_left||r.margin_right?`${d.margin_top||r.margin_top||"8px"} ${d.margin_right||r.margin_right||"0px"} ${d.margin_bottom||r.margin_bottom||"8px"} ${d.margin_left||r.margin_left||"0px"}`:"8px 0",background:d.background_color||r.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},r),d),t),backgroundSize:d.background_size||r.background_size||"cover",backgroundPosition:d.background_position||r.background_position||"center",backgroundRepeat:d.background_repeat||r.background_repeat||"no-repeat",border:(d.border_style||r.border_style)&&"none"!==(d.border_style||r.border_style)?`${d.border_width||r.border_width||"1px"} ${d.border_style||r.border_style} ${d.border_color||r.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(d.border_radius||r.border_radius)||"0",position:d.position||r.position||"static",top:d.top||r.top||"auto",bottom:d.bottom||r.bottom||"auto",left:d.left||r.left||"auto",right:d.right||r.right||"auto",zIndex:d.z_index||r.z_index||"auto",width:d.width||r.width||"100%",height:d.height||r.height||"auto",maxWidth:d.max_width||r.max_width||"100%",maxHeight:d.max_height||r.max_height||"none",minWidth:d.min_width||r.min_width||"auto",minHeight:d.min_height||r.min_height||"50px",boxShadow:d.box_shadow||r.box_shadow||void 0,backdropFilter:d.backdrop_filter||r.backdrop_filter||void 0,clipPath:d.clip_path||r.clip_path||void 0,overflow:d.overflow||r.overflow||p.overflow,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",boxSizing:p.boxSizing},c?{maxWidth:p.maxWidth}:{});return o.qy`
      <style>
        ${this.getStyles()}
      </style>
      <div style=${this.objectToStyleString(k)}>
        <div
          class="animated-clock-module-container"
          style="
            --clock-size: ${a.clock_size||50}px;
            --clock-size-value: ${a.clock_size||50};
            --clock-color: ${a.clock_color||"var(--primary-text-color)"};
            --clock-background: ${a.clock_background||"var(--card-background-color)"};
          "
        >
          ${x}
        </div>
      </div>
    `}_renderFlipClock(e,t,i,n){const a=!1!==n.show_hours,r=!1!==n.show_minutes,s=!1!==n.show_ampm,l=!1!==n.show_separators,d=n.flip_tile_color||"rgba(0, 0, 0, 0.5)",c=n.flip_hours_color||n.clock_color||"var(--primary-text-color)",p=n.flip_minutes_color||n.clock_color||"var(--primary-text-color)",u=n.flip_separator_color||n.clock_color||"var(--primary-text-color)",h=n.flip_ampm_color||n.clock_color||"var(--primary-text-color)";return o.qy`
      <div class="flip-clock" style="--flip-tile-color: ${d};">
        ${a?o.qy`
              <div class="flip-unit">
                <div class="flip-digit-display" style="color: ${c};">
                  ${String(Math.floor(e/10))}
                </div>
              </div>
              <div class="flip-unit">
                <div class="flip-digit-display" style="color: ${c};">
                  ${String(e%10)}
                </div>
              </div>
            `:""}
        ${l&&a&&r?o.qy`<div class="flip-separator" style="color: ${u};">:</div>`:""}
        ${r?o.qy`
              <div class="flip-unit">
                <div class="flip-digit-display" style="color: ${p};">
                  ${String(Math.floor(t/10))}
                </div>
              </div>
              <div class="flip-unit">
                <div class="flip-digit-display" style="color: ${p};">
                  ${String(t%10)}
                </div>
              </div>
            `:""}
        ${"12"===n.time_format&&s?o.qy`<div class="flip-ampm" style="color: ${h};">${i}</div>`:""}
      </div>
    `}_renderDigitalClock(e,t,i,n,a){const r=!1!==a.show_hours,s=!1!==a.show_minutes,l=!1!==a.show_seconds,d=!1!==a.show_ampm,c=!1!==a.show_separators,p=String(e).padStart(2,"0"),u=String(t).padStart(2,"0"),h=String(i).padStart(2,"0"),g=a.digital_background_color||"#000",m=a.digital_hours_color||"#ff3333",f=a.digital_minutes_color||"#ff3333",_=a.digital_seconds_color||"#ff3333",v=a.digital_separator_color||"#ff3333",b=a.digital_ampm_color||"#33ff33";return o.qy`
      <div class="digital-clock">
        <div class="digital-display" style="background: ${g};">
          <span class="digital-time">
            ${r?o.qy`<span
                  style="color: ${m}; text-shadow: 0 0 10px ${m}, 0 0 20px ${m}, 0 0 30px ${m};"
                  >${p}</span
                >`:""}
            ${r&&s&&c?o.qy`<span
                  style="color: ${v}; text-shadow: 0 0 10px ${v}, 0 0 20px ${v}, 0 0 30px ${v};"
                  >:</span
                >`:""}
            ${s?o.qy`<span
                  style="color: ${f}; text-shadow: 0 0 10px ${f}, 0 0 20px ${f}, 0 0 30px ${f};"
                  >${u}</span
                >`:""}
            ${s&&l&&c?o.qy`<span
                  style="color: ${v}; text-shadow: 0 0 10px ${v}, 0 0 20px ${v}, 0 0 30px ${v};"
                  >:</span
                >`:""}
            ${l?o.qy`<span
                  style="color: ${_}; text-shadow: 0 0 10px ${_}, 0 0 20px ${_}, 0 0 30px ${_};"
                  >${h}</span
                >`:""}
          </span>
          ${"12"===a.time_format&&d?o.qy`<span
                class="digital-ampm"
                style="color: ${b}; text-shadow: 0 0 8px ${b}, 0 0 16px ${b};"
                >${n}</span
              >`:""}
        </div>
      </div>
    `}_renderAnalogClock(e,t,i,n,a,s){const l=!1!==s.analog_show_seconds,d=!1!==s.analog_smooth_seconds,c=!1!==s.analog_show_hour_hand,p=!1!==s.analog_show_minute_hand,u=!1!==s.analog_show_hour_markers,h=!1!==s.analog_show_center_dot,g=!0===s.analog_show_numbers,m=!0===s.analog_show_hour_ticks,f=!0===s.analog_show_minute_ticks,_=e%12,v=i+n/1e3,b=d?v:Math.floor(v),y=60*t+v,x=3600*_+60*t+v,k=s.analog_hour_hand_color||s.clock_color||"var(--primary-color)",w=s.analog_minute_hand_color||s.clock_color||"var(--primary-color)",S=s.analog_second_hand_color||"var(--error-color)",O=s.analog_hour_marker_color||s.clock_color||"var(--primary-text-color)",A=s.analog_center_dot_color||s.clock_color||"var(--error-color)",C=s.analog_numbers_color||s.clock_color||"var(--primary-text-color)",$=s.analog_hour_ticks_color||s.clock_color||"var(--primary-text-color)",T=s.analog_minute_ticks_color||s.clock_color||"var(--disabled-text-color)",z=s.analog_face_outline_color||s.clock_color||"var(--primary-text-color)",P=s.analog_face_background_color||s.clock_background||"var(--card-background-color)";let E="";const I=s.analog_face_background_type||"color";if("entity"===I&&s.analog_face_background_image_entity&&a){const e=a.states[s.analog_face_background_image_entity];e&&e.attributes.entity_picture&&(E=e.attributes.entity_picture)}else"upload"===I&&s.analog_face_background_image_upload?E=(0,r.V)(a,s.analog_face_background_image_upload):"url"===I&&s.analog_face_background_image_url&&(E=s.analog_face_background_image_url);const j=s.analog_face_background_size||"cover",M=s.analog_face_background_position||"center",D=s.analog_face_background_repeat||"no-repeat";return o.qy`
      <div class="analog-clock">
        <div
          class="analog-clock-dial"
          style="
          --face-outline-color: ${z};
          --face-background-color: ${"color"===I?P:"transparent"};
          --marker-color: ${O};
          ${E?`\n            background-image: url('${E}');\n            background-size: ${j};\n            background-position: ${M};\n            background-repeat: ${D};\n          `:""}
        "
        >
          <!-- SVG for static elements (face, markers, numbers, ticks) -->
          <svg viewBox="0 0 200 200" class="analog-face-svg" xmlns="http://www.w3.org/2000/svg">
            <!-- Clock face circle (drawn first, appears in back) -->
            <circle cx="100" cy="100" r="93.5" class="clock-face-circle" />

            <!-- Hour markers -->
            ${u?[...Array(12)].map(((e,t)=>{const i=(30*t-90)*(Math.PI/180),n=100+85*Math.cos(i),a=100+85*Math.sin(i),r=100+75*Math.cos(i),s=100+75*Math.sin(i);return o.qy`<line
                    x1="${n}"
                    y1="${a}"
                    x2="${r}"
                    y2="${s}"
                    class="hour-marker"
                  />`})):""}

            <!-- Clock numbers (1-12) - drawn last, appears on top -->
            ${g?[...Array(12)].map(((e,t)=>{const i=0===t?12:t,n=(30*t-90)*(Math.PI/180),a=100+65*Math.cos(n),r=100+65*Math.sin(n);return o.qy`<text
                    x="${a}"
                    y="${r}"
                    font-size="22"
                    font-weight="900"
                    text-anchor="middle"
                    dominant-baseline="middle"
                    font-family="Arial, sans-serif"
                    class="clock-number"
                    fill="${C}"
                    stroke="${P}"
                    stroke-width="0.5"
                    paint-order="stroke fill"
                    >${i}</text
                  >`})):""}
          </svg>

          <!-- Clock hands using CSS animations (HA native approach) -->
          ${c?o.qy`<div
                class="clock-hand clock-hand-hour"
                style="
                  background: ${k};
                  animation-delay: -${x}s;
                "
              ></div>`:""}
          ${p?o.qy`<div
                class="clock-hand clock-hand-minute"
                style="
                  background: ${w};
                  animation-delay: -${y}s;
                "
              ></div>`:""}
          ${l?o.qy`<div
                class="clock-hand clock-hand-second ${d?"":"step"}"
                style="
                  background: ${S};
                  animation-delay: -${b}s;
                "
              ></div>`:""}

          <!-- Center dot -->
          ${h?o.qy`<div class="clock-center-dot" style="background: ${A};"></div>`:""}

          <!-- Clock numbers as HTML elements (fallback) -->
          ${g?[...Array(12)].map(((e,t)=>{const i=0===t?12:t,n=(30*t-90)*(Math.PI/180),a=50+32.5*Math.cos(n),r=50+32.5*Math.sin(n);return o.qy`<div
                  class="clock-number-html"
                  style="
                    left: ${a}%;
                    top: ${r}%;
                    color: ${C};
                  "
                >
                  ${i}
                </div>`})):""}

          <!-- Hour tick marks as HTML elements (12 major ticks) -->
          ${m?[...Array(12)].map(((e,t)=>{const i=(30*t-90)*(Math.PI/180),n=50+44.75*Math.cos(i),a=50+44.75*Math.sin(i),r=30*t;return o.qy`<div
                  class="clock-hour-tick-html"
                  style="
                    left: ${n}%;
                    top: ${a}%;
                    transform: translate(-50%, -50%) rotate(${r}deg);
                    background: ${$};
                  "
                ></div>`})):""}

          <!-- Minute tick marks as HTML elements (48 minor ticks) -->
          ${f?[...Array(60)].map(((e,t)=>{if(t%5==0)return"";const i=(6*t-90)*(Math.PI/180),n=50+45.25*Math.cos(i),a=50+45.25*Math.sin(i),r=6*t;return o.qy`<div
                  class="clock-minute-tick-html"
                  style="
                    left: ${n}%;
                    top: ${a}%;
                    transform: translate(-50%, -50%) rotate(${r}deg);
                    background: ${T};
                  "
                ></div>`})):""}
        </div>
      </div>
    `}_renderBinaryClock(e,t,i,n){const a=!1!==n.show_hours,r=!1!==n.show_minutes,s=!1!==n.show_seconds,l=!1!==n.show_labels,d=!1!==n.show_separators,c=(e,t=4)=>e.toString(2).padStart(t,"0").split(""),p=c(Math.floor(e/10),4),u=c(e%10,4),h=c(Math.floor(t/10),4),g=c(t%10,4),m=c(Math.floor(i/10),4),f=c(i%10,4),_=[],v=[],b=[];a&&(_.push(p,u),v.push("H","H"),b.push("hours","hours")),r&&(_.push(h,g),v.push("M","M"),b.push("minutes","minutes")),s&&(_.push(m,f),v.push("S","S"),b.push("seconds","seconds"));const y=n.binary_hours_empty_color||"rgba(128, 128, 128, 0.2)",x=n.binary_hours_filled_color||n.clock_color||"var(--primary-text-color)",k=n.binary_minutes_empty_color||"rgba(128, 128, 128, 0.2)",w=n.binary_minutes_filled_color||n.clock_color||"var(--primary-text-color)",S=n.binary_seconds_empty_color||"rgba(128, 128, 128, 0.2)",O=n.binary_seconds_filled_color||n.clock_color||"var(--primary-text-color)",A=n.binary_separator_color||n.clock_color||"var(--primary-text-color)",C=n.binary_hours_label_color||n.clock_color||"var(--primary-text-color)",$=n.binary_minutes_label_color||n.clock_color||"var(--primary-text-color)",T=n.binary_seconds_label_color||n.clock_color||"var(--primary-text-color)";return o.qy`
      <div class="binary-clock">
        ${_.map(((e,t)=>{const i=d&&(a&&r&&1===t||r&&s&&t===(a?3:1)),n=b[t],c="hours"===n?y:"minutes"===n?k:S,p="hours"===n?x:"minutes"===n?w:O,u="hours"===n?C:"minutes"===n?$:T;return o.qy`
            <div class="binary-column">
              ${l?o.qy`<div class="binary-label" style="color: ${u};">
                    ${v[t]}
                  </div>`:""}
              ${e.map((e=>o.qy`
                  <div
                    class="binary-dot ${"1"===e?"active":""}"
                    style="${"1"===e?`background: ${p}; border-color: ${p}; box-shadow: 0 0 10px ${p};`:`background: ${c}; border-color: rgba(128, 128, 128, 0.3);`}"
                  ></div>
                `))}
            </div>
            ${i?o.qy`<div class="binary-separator" style="color: ${A};">:</div>`:""}
          `}))}
      </div>
    `}_renderMinimalClock(e,t,i,n,a){const r=!1!==a.show_hours,s=!1!==a.show_minutes,l=!1!==a.show_seconds,d=!1!==a.show_ampm,c=!1!==a.show_separators,p=String(e).padStart(2,"0"),u=String(t).padStart(2,"0"),h=String(i).padStart(2,"0"),g=a.minimal_hours_color||a.clock_color||"var(--primary-text-color)",m=a.minimal_minutes_color||a.clock_color||"var(--primary-text-color)",f=a.minimal_seconds_color||a.clock_color||"var(--primary-text-color)",_=a.minimal_separator_color||a.clock_color||"var(--primary-text-color)",v=a.minimal_ampm_color||a.clock_color||"var(--primary-text-color)";return o.qy`
      <div class="minimal-clock">
        <div class="minimal-time">
          ${r?o.qy`<span style="color: ${g};">${p}</span>`:""}${c&&r&&s?o.qy`<span class="minimal-separator" style="color: ${_};">:</span>`:""}${s?o.qy`<span style="color: ${m};">${u}</span>`:""}${c&&s&&l?o.qy`<span class="minimal-separator" style="color: ${_};">:</span>`:""}${l?o.qy`<span style="color: ${f};">${h}</span>`:""}
        </div>
        ${"12"===a.time_format&&d?o.qy`<div class="minimal-ampm" style="color: ${v};">${n}</div>`:""}
      </div>
    `}_renderRetroClock(e,t,i,n,a){const r=!1!==a.show_hours,s=!1!==a.show_minutes,l=!1!==a.show_seconds,d=!1!==a.show_ampm,c=!1!==a.show_separators,p=String(e).padStart(2,"0"),u=String(t).padStart(2,"0"),h=String(i).padStart(2,"0"),g=a.retro_background_color||"linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%)",m=a.retro_hours_tile_color||"rgba(0, 0, 0, 0.3)",f=a.retro_minutes_tile_color||"rgba(0, 0, 0, 0.3)",_=a.retro_seconds_tile_color||"rgba(0, 0, 0, 0.3)",v=a.retro_separator_tile_color||"rgba(0, 0, 0, 0.3)",b=a.retro_hours_color||"#ffa500",y=a.retro_minutes_color||"#ffa500",x=a.retro_seconds_color||"#ffa500",k=a.retro_separator_color||"#ffa500",w=a.retro_ampm_color||"#00ff00",S=`0 0 5px ${b}, 0 0 10px ${b.replace("500","600")}`,O=`0 0 5px ${y}, 0 0 10px ${y.replace("500","600")}`,A=`0 0 5px ${x}, 0 0 10px ${x.replace("500","600")}`,C=`0 0 5px ${k}, 0 0 10px ${k.replace("500","600")}`;return o.qy`
      <div class="retro-clock">
        <div class="retro-display" style="background: ${g};">
          ${r?o.qy`
                <span
                  class="retro-digit"
                  style="background: ${m}; color: ${b}; text-shadow: ${S};"
                  >${p[0]}</span
                >
                <span
                  class="retro-digit"
                  style="background: ${m}; color: ${b}; text-shadow: ${S};"
                  >${p[1]}</span
                >
              `:""}
          ${c&&r&&s?o.qy`<span
                class="retro-colon"
                style="background: ${v}; color: ${k}; text-shadow: ${C};"
                >:</span
              >`:""}
          ${s?o.qy`
                <span
                  class="retro-digit"
                  style="background: ${f}; color: ${y}; text-shadow: ${O};"
                  >${u[0]}</span
                >
                <span
                  class="retro-digit"
                  style="background: ${f}; color: ${y}; text-shadow: ${O};"
                  >${u[1]}</span
                >
              `:""}
          ${c&&s&&l?o.qy`<span
                class="retro-colon"
                style="background: ${v}; color: ${k}; text-shadow: ${C};"
                >:</span
              >`:""}
          ${l?o.qy`
                <span
                  class="retro-digit"
                  style="background: ${_}; color: ${x}; text-shadow: ${A};"
                  >${h[0]}</span
                >
                <span
                  class="retro-digit"
                  style="background: ${_}; color: ${x}; text-shadow: ${A};"
                  >${h[1]}</span
                >
              `:""}
          ${"12"===a.time_format&&d?o.qy`<span
                class="retro-ampm"
                style="color: ${w}; text-shadow: 0 0 5px ${w.replace("ff00","cc00")};"
                >${n}</span
              >`:""}
        </div>
      </div>
    `}_renderTextClock(e,t,i,n){const a=!1!==n.show_hours,r=!1!==n.show_minutes,s=!1!==n.show_ampm,l=!1!==n.show_prefix,d=n.text_orientation||"horizontal",c=n.text_word_gap||8,p=n.text_prefix_color||"var(--primary-text-color)",u=n.text_hours_color||"var(--primary-text-color)",h=n.text_minutes_color||"var(--primary-text-color)",g=n.text_ampm_color||"var(--primary-text-color)",m=n.text_prefix_size||38,f=n.text_hours_size||48,_=n.text_minutes_size||48,v=n.text_ampm_size||24,b=["twelve","one","two","three","four","five","six","seven","eight","nine","ten","eleven"][e%12],y=0===t?"o'clock":t<10?`oh ${this._numberToWords(t)}`:this._numberToWords(t),x="vertical"===d;return o.qy`
      <div class="text-clock">
        <div
          class="text-display"
          style="
          flex-direction: ${x?"column":"row"};
          gap: calc(${c}px * var(--clock-scale));
        "
        >
          ${l?o.qy`<span
                class="text-word text-prefix"
                style="color: ${p}; font-size: calc(${m}px * var(--clock-scale));"
                >It is</span
              >`:""}
          ${a?o.qy`<span
                class="text-word text-hours"
                style="color: ${u}; font-size: calc(${f}px * var(--clock-scale));"
                >${b}</span
              >`:""}
          ${r?o.qy`<span
                class="text-word text-minutes"
                style="color: ${h}; font-size: calc(${_}px * var(--clock-scale));"
                >${y}</span
              >`:""}
          ${"12"===n.time_format&&s?o.qy`<span
                class="text-word text-ampm"
                style="color: ${g}; font-size: calc(${v}px * var(--clock-scale));"
                >${i}</span
              >`:""}
        </div>
      </div>
    `}_renderNeonClock(e,t,i,n,a){const r=!1!==a.show_hours,s=!1!==a.show_minutes,l=!1!==a.show_seconds,d=!1!==a.show_ampm,c=!1!==a.show_separators,p=a.neon_padding||24,u=a.neon_hours_color||"#00ffff",h=a.neon_minutes_color||"#00ffff",g=a.neon_seconds_color||"#00ffff",m=a.neon_separator_color||"#ff00ff",f=a.neon_ampm_color||"#00ff00",_=String(e).padStart(2,"0"),v=String(t).padStart(2,"0"),b=String(i).padStart(2,"0");return o.qy`
      <div class="neon-clock" style="padding: calc(${p}px * var(--clock-scale));">
        <div class="neon-display">
          ${r?o.qy`<span
                class="neon-digit"
                style="color: ${u}; text-shadow: 0 0 5px ${u}, 0 0 10px ${u}, 0 0 20px ${u}, 0 0 30px ${u}, 0 0 40px ${u};"
                >${_}</span
              >`:""}
          ${c&&r&&s?o.qy`<span
                class="neon-separator"
                style="color: ${m}; text-shadow: 0 0 5px ${m}, 0 0 10px ${m}, 0 0 20px ${m}, 0 0 30px ${m};"
                >:</span
              >`:""}
          ${s?o.qy`<span
                class="neon-digit"
                style="color: ${h}; text-shadow: 0 0 5px ${h}, 0 0 10px ${h}, 0 0 20px ${h}, 0 0 30px ${h}, 0 0 40px ${h};"
                >${v}</span
              >`:""}
          ${c&&s&&l?o.qy`<span
                class="neon-separator"
                style="color: ${m}; text-shadow: 0 0 5px ${m}, 0 0 10px ${m}, 0 0 20px ${m}, 0 0 30px ${m};"
                >:</span
              >`:""}
          ${l?o.qy`<span
                class="neon-digit"
                style="color: ${g}; text-shadow: 0 0 5px ${g}, 0 0 10px ${g}, 0 0 20px ${g}, 0 0 30px ${g}, 0 0 40px ${g};"
                >${b}</span
              >`:""}
          ${"12"===a.time_format&&d?o.qy`<span
                class="neon-ampm"
                style="color: ${f}; text-shadow: 0 0 5px ${f}, 0 0 10px ${f}, 0 0 20px ${f};"
                >${n}</span
              >`:""}
        </div>
      </div>
    `}_renderMaterialClock(e,t,i,n,a){const r=!1!==a.show_hours,s=!1!==a.show_minutes,l=!1!==a.show_seconds,d=!1!==a.show_ampm,c=!1!==a.show_separators,p=a.material_vertical_gap||8,u=String(e).padStart(2,"0"),h=String(t).padStart(2,"0"),g=String(i).padStart(2,"0"),m=a.material_background_color||a.clock_background||"var(--card-background-color)",f=a.material_hours_color||a.clock_color||"var(--primary-text-color)",_=a.material_minutes_color||a.clock_color||"var(--primary-text-color)",v=a.material_seconds_color||a.clock_color||"var(--primary-text-color)",b=a.material_separator_color||a.clock_color||"var(--primary-text-color)",y=a.material_ampm_color||a.clock_color||"var(--primary-text-color)";return o.qy`
      <div class="material-clock">
        <div
          class="material-card"
          style="gap: calc(${p}px * var(--clock-scale)); background: ${m};"
        >
          <div class="material-time">
            ${r?o.qy`<span style="color: ${f};">${u}</span>`:""}
            ${r&&s&&c?o.qy`<span style="color: ${b};">:</span>`:""}
            ${s?o.qy`<span style="color: ${_};">${h}</span>`:""}
          </div>
          ${l||"12"===a.time_format&&d?o.qy`
                <div class="material-seconds">
                  ${l?o.qy`<span style="color: ${v};">${g}</span>`:""}
                  ${"12"===a.time_format&&d?o.qy` <span style="color: ${y};">${n}</span>`:""}
                </div>
              `:""}
        </div>
      </div>
    `}_renderTerminalClock(e,t,i,n,a){const r=!1!==a.show_hours,s=!1!==a.show_minutes,l=!1!==a.show_seconds,d=!1!==a.show_ampm,c=!1!==a.show_separators,p=!1!==a.show_prompt,u=!1!==a.show_command,h=!1!==a.show_cursor,g=a.terminal_background_color||"#1e1e1e",m=a.terminal_line1_color||"#4ec9b0",f=a.terminal_line2_color||"#ce9178",_=a.terminal_cursor_color||"#4ec9b0",v=a.terminal_hours_color||"#d4d4d4",b=a.terminal_minutes_color||"#d4d4d4",y=a.terminal_seconds_color||"#d4d4d4",x=a.terminal_separator_color||"#d4d4d4",k=a.terminal_ampm_color||"#d4d4d4",w=a.terminal_vertical_spacing||8,S=a.terminal_line1_size||17,O=a.terminal_line2_size||17,A=a.terminal_output_size||38,C=String(e).padStart(2,"0"),$=String(t).padStart(2,"0"),T=String(i).padStart(2,"0");return o.qy`
      <div class="terminal-clock" style="background: ${g};">
        ${p?o.qy`<div
              class="terminal-prompt"
              style="font-size: calc(${S}px * var(--clock-scale)); color: ${m}; margin-bottom: calc(${w}px * var(--clock-scale));"
            >
              user@homeassistant:~$
            </div>`:""}
        ${u?o.qy`<div
              class="terminal-command"
              style="font-size: calc(${O}px * var(--clock-scale)); color: ${f}; margin-bottom: calc(${1.5*w}px * var(--clock-scale));"
            >
              date +"%T"
            </div>`:""}
        <div class="terminal-output" style="font-size: calc(${A}px * var(--clock-scale));">
          ${r?o.qy`<span style="color: ${v};">${C}</span>`:""}
          ${r&&s&&c?o.qy`<span style="color: ${x};">:</span>`:""}
          ${s?o.qy`<span style="color: ${b};">${$}</span>`:""}
          ${s&&l&&c?o.qy`<span style="color: ${x};">:</span>`:""}
          ${l?o.qy`<span style="color: ${y};">${T}</span>`:""}
          ${"12"===a.time_format&&d?o.qy` <span style="color: ${k};">${n}</span>`:""}
          ${h?o.qy`<span
                class="terminal-cursor"
                style="background: ${_}; width: calc(${.21*A}px * var(--clock-scale)); height: calc(${A}px * var(--clock-scale)); margin-left: calc(${.105*A}px * var(--clock-scale));"
              ></span>`:""}
        </div>
      </div>
    `}_numberToWords(e){const t=["","one","two","three","four","five","six","seven","eight","nine"],i=["","","twenty","thirty","forty","fifty"];if(e<10)return t[e];if(e<20)return["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"][e-10];if(e<60){const o=Math.floor(e/10),n=e%10;return 0===n?i[o]:`${i[o]} ${t[n]}`}return String(e)}objectToStyleString(e){return Object.entries(e).filter((([e,t])=>null!=t&&""!==t)).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t}`)).join("; ")}addPixelUnit(e){if(e)return"string"==typeof e&&(e.includes("px")||e.includes("%")||e.includes("em")||e.includes("rem")||e.includes("vh")||e.includes("vw"))?e:`${e}px`}getBackgroundImageCSS(e,t){const i=e.background_type||"color";if("entity"===i&&e.background_image_entity&&t){const i=t.states[e.background_image_entity];if(i&&i.attributes.entity_picture)return`url('${i.attributes.entity_picture}')`}else{if("upload"===i&&e.background_image_upload)return`url('${e.background_image_upload}')`;if("url"===i&&e.background_image_url)return`url('${e.background_image_url}')`}return""}getStyles(){return"\n      .animated-clock-module-container {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 0;\n        width: 100%;\n        min-height: 50px;\n        box-sizing: border-box;\n        overflow: visible;\n        --clock-scale: calc(var(--clock-size-value) / 115);\n      }\n\n      /* Ensure all clock styles fit within container and are responsive */\n      .flip-clock,\n      .digital-clock,\n      .analog-clock,\n      .binary-clock,\n      .minimal-clock,\n      .retro-clock,\n      .text-clock,\n      .neon-clock,\n      .material-clock,\n      .terminal-clock {\n        max-width: 100%;\n        width: auto;\n        transform-origin: center;\n        box-sizing: border-box;\n        overflow: visible;\n      }\n\n      /* ========== FLIP CLOCK ========== */\n      .flip-clock {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: calc(6px * var(--clock-scale));\n        max-width: 100%;\n        width: 100%;\n        flex-wrap: nowrap;\n      }\n\n      .flip-unit {\n        position: relative;\n        width: min(calc(56px * var(--clock-scale)), 12vw);\n        height: min(calc(77px * var(--clock-scale)), 16vw);\n        background: var(--flip-tile-color, rgba(0, 0, 0, 0.5));\n        border-radius: calc(8px * var(--clock-scale));\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);\n        overflow: hidden;\n        flex-shrink: 1;\n        min-width: 0;\n      }\n\n      .flip-digit-display {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: min(calc(48px * var(--clock-scale)), 8vw);\n        font-weight: 700;\n        color: var(--clock-color);\n        line-height: 1;\n        overflow: hidden;\n        text-overflow: clip;\n      }\n\n      .flip-unit::before {\n        content: '';\n        position: absolute;\n        top: 50%;\n        left: 0;\n        right: 0;\n        height: 1px;\n        background: rgba(0, 0, 0, 0.2);\n        z-index: 1;\n      }\n\n      .flip-separator {\n        font-size: min(calc(48px * var(--clock-scale)), 8vw);\n        font-weight: 700;\n        color: var(--clock-color);\n        animation: blink 1s ease-in-out infinite;\n        flex-shrink: 1;\n        min-width: 0;\n      }\n\n      @keyframes blink {\n        0%, 49% { opacity: 1; }\n        50%, 100% { opacity: 0.3; }\n      }\n\n      .flip-ampm {\n        font-size: min(calc(19px * var(--clock-scale)), 3vw);\n        font-weight: 600;\n        color: var(--clock-color);\n        opacity: 0.9;\n        align-self: flex-end;\n        margin-bottom: calc(8px * var(--clock-scale));\n        margin-left: calc(4px * var(--clock-scale));\n        flex-shrink: 1;\n        min-width: 0;\n      }\n\n      /* ========== DIGITAL CLOCK ========== */\n      .digital-clock {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: calc(8px * var(--clock-scale));\n        max-width: 100%;\n      }\n\n      .digital-display {\n        display: flex;\n        align-items: center;\n        gap: calc(16px * var(--clock-scale));\n        background: #000;\n        padding: calc(24px * var(--clock-scale)) calc(32px * var(--clock-scale));\n        border-radius: calc(12px * var(--clock-scale));\n        box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.5), 0 4px 12px rgba(255, 0, 0, 0.3);\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Editor preview-specific padding */\n      .preview-content .digital-display {\n        padding: calc(46px * var(--clock-scale)) calc(32px * var(--clock-scale));\n      }\n\n      .digital-time {\n        font-family: 'Courier New', monospace;\n        font-size: clamp(36px, calc(64px * var(--clock-scale)), 12vw);\n        font-weight: bold;\n        color: #ff3333;\n        text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000, 0 0 30px #ff0000;\n        letter-spacing: calc(6px * var(--clock-scale));\n      }\n\n      .digital-ampm {\n        font-family: 'Courier New', monospace;\n        font-size: clamp(16px, calc(26px * var(--clock-scale)), 5vw);\n        font-weight: bold;\n        color: #33ff33;\n        text-shadow: 0 0 8px #00ff00, 0 0 16px #00ff00;\n      }\n\n      /* ========== ANALOG CLOCK (HA Native Approach) ========== */\n      .analog-clock {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        max-width: 100%;\n      }\n\n      .analog-clock-dial {\n        position: relative;\n        width: calc(192px * var(--clock-scale));\n        height: calc(192px * var(--clock-scale));\n        max-width: 100%;\n        max-height: 100%;\n        box-sizing: border-box;\n        overflow: hidden;\n        border-radius: 50%;\n        clip-path: circle(47.25% at 50% 50%);\n      }\n\n      .analog-face-svg {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        pointer-events: none;\n        z-index: 1;\n        overflow: hidden;\n      }\n\n      .clock-face-circle {\n        fill: var(--face-background-color);\n        stroke: var(--face-outline-color);\n        stroke-width: 2;\n      }\n\n      .hour-marker {\n        stroke: var(--marker-color);\n        stroke-width: 3;\n        stroke-linecap: round;\n        fill: none;\n        opacity: 1;\n      }\n\n      .tick-mark {\n        stroke-width: 2.5;\n        stroke-linecap: round;\n        fill: none;\n        opacity: 1;\n      }\n\n      /* Clock numbers - SVG text (may not render in some browsers) */\n      .clock-number {\n        font-family: Arial, sans-serif !important;\n        font-size: 22px !important;\n        font-weight: 900 !important;\n        text-anchor: middle !important;\n        dominant-baseline: middle !important;\n        pointer-events: none !important;\n        user-select: none !important;\n        opacity: 1 !important;\n        visibility: visible !important;\n        paint-order: stroke fill !important;\n      }\n\n      /* Clock numbers - HTML fallback (guaranteed to render) */\n      .clock-number-html {\n        position: absolute;\n        transform: translate(-50%, -50%);\n        font-family: Arial, -apple-system, BlinkMacSystemFont, sans-serif;\n        font-size: calc(18px * var(--clock-scale));\n        font-weight: 900;\n        pointer-events: none;\n        user-select: none;\n        z-index: 8;\n        text-shadow: \n          1px 1px 2px var(--face-background-color, rgba(0, 0, 0, 0.3)),\n          -1px -1px 2px var(--face-background-color, rgba(0, 0, 0, 0.3));\n      }\n\n      /* Hour tick marks - HTML elements (guaranteed to render) */\n      .clock-hour-tick-html {\n        position: absolute;\n        width: calc(3px * var(--clock-scale));\n        height: calc(8px * var(--clock-scale));\n        border-radius: 1.5px;\n        pointer-events: none;\n        z-index: 2;\n        opacity: 1;\n      }\n\n      /* Minute tick marks - HTML elements (smaller than hour ticks) */\n      .clock-minute-tick-html {\n        position: absolute;\n        width: calc(1.5px * var(--clock-scale));\n        height: calc(5px * var(--clock-scale));\n        border-radius: 1px;\n        pointer-events: none;\n        z-index: 2;\n        opacity: 1;\n      }\n\n      /* Clock hands using CSS animations (HA native approach) */\n      .clock-hand {\n        position: absolute;\n        left: 50%;\n        bottom: 50%;\n        transform-origin: 50% 100%;\n        transform: translate(-50%, 0) rotate(0deg);\n        border-radius: 2px;\n        will-change: transform;\n        animation-name: ha-clock-rotate;\n        animation-timing-function: linear;\n        animation-iteration-count: infinite;\n        box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .clock-hand-hour {\n        width: calc(4px * var(--clock-scale));\n        height: calc(48px * var(--clock-scale)); /* 25% of 192px */\n        z-index: 5;\n        animation-duration: 43200s; /* 12 hours */\n      }\n\n      .clock-hand-minute {\n        width: calc(3px * var(--clock-scale));\n        height: calc(67px * var(--clock-scale)); /* 35% of 192px */\n        opacity: 0.9;\n        z-index: 6;\n        animation-duration: 3600s; /* 60 minutes */\n      }\n\n      .clock-hand-second {\n        width: calc(2px * var(--clock-scale));\n        height: calc(81px * var(--clock-scale)); /* 42% of 192px */\n        opacity: 0.8;\n        z-index: 7;\n        animation-duration: 60s; /* 60 seconds */\n      }\n\n      .clock-hand-second.step {\n        animation-timing-function: steps(60, end);\n      }\n\n      .clock-center-dot {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: calc(8px * var(--clock-scale));\n        height: calc(8px * var(--clock-scale));\n        border-radius: 50%;\n        transform: translate(-50%, -50%);\n        z-index: 10;\n      }\n\n      @keyframes ha-clock-rotate {\n        from {\n          transform: translate(-50%, 0) rotate(0deg);\n        }\n        to {\n          transform: translate(-50%, 0) rotate(360deg);\n        }\n      }\n\n      /* ========== BINARY CLOCK ========== */\n      .binary-clock {\n        display: flex;\n        align-items: center;\n        gap: calc(4px * var(--clock-scale));\n        max-width: 100%;\n        flex-wrap: nowrap;\n        justify-content: center;\n        overflow-x: auto;\n      }\n\n      .binary-column {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: calc(6px * var(--clock-scale));\n      }\n\n      .binary-label {\n        font-size: calc(14px * var(--clock-scale));\n        color: var(--clock-color);\n        opacity: 0.7;\n        font-weight: 600;\n        margin-bottom: calc(4px * var(--clock-scale));\n      }\n\n      .binary-dot {\n        width: calc(19px * var(--clock-scale));\n        height: calc(19px * var(--clock-scale));\n        border-radius: 50%;\n        background: rgba(128, 128, 128, 0.2);\n        border: 2px solid rgba(128, 128, 128, 0.3);\n        transition: all 0.2s ease;\n      }\n\n      .binary-dot.active {\n        background: var(--clock-color);\n        border-color: var(--clock-color);\n        box-shadow: 0 0 10px var(--clock-color);\n      }\n\n      .binary-separator {\n        font-size: calc(38px * var(--clock-scale));\n        color: var(--clock-color);\n        margin: 0 calc(4px * var(--clock-scale));\n        opacity: 0.5;\n      }\n\n      /* ========== MINIMAL CLOCK ========== */\n      .minimal-clock {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: calc(8px * var(--clock-scale));\n        max-width: 100%;\n      }\n\n      .minimal-time {\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        font-size: calc(48px * var(--clock-scale));\n        font-weight: 300;\n        color: var(--clock-color);\n        letter-spacing: calc(2px * var(--clock-scale));\n      }\n\n      .minimal-separator {\n        opacity: 0.5;\n        margin: 0 calc(4px * var(--clock-scale));\n      }\n\n      .minimal-ampm {\n        font-size: calc(17px * var(--clock-scale));\n        font-weight: 400;\n        color: var(--clock-color);\n        opacity: 0.7;\n        text-transform: uppercase;\n        letter-spacing: calc(3px * var(--clock-scale));\n      }\n\n      /* ========== RETRO CLOCK ========== */\n      .retro-clock {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        max-width: 100%;\n      }\n\n      .retro-display {\n        display: flex;\n        align-items: center;\n        gap: calc(4px * var(--clock-scale));\n        background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);\n        padding: calc(16px * var(--clock-scale)) calc(20px * var(--clock-scale));\n        border-radius: calc(4px * var(--clock-scale));\n        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);\n        max-width: 100%;\n        box-sizing: border-box;\n        flex-wrap: nowrap;\n        justify-content: center;\n        overflow-x: auto;\n      }\n\n      .retro-digit, .retro-colon {\n        font-family: 'Courier New', monospace;\n        font-size: clamp(24px, calc(48px * var(--clock-scale)), 10vw);\n        font-weight: bold;\n        color: #ffa500;\n        text-shadow: 0 0 5px #ff8800, 0 0 10px #ff6600;\n        background: rgba(0, 0, 0, 0.3);\n        padding: calc(4px * var(--clock-scale)) calc(8px * var(--clock-scale));\n        border-radius: calc(2px * var(--clock-scale));\n      }\n\n      .retro-colon {\n        padding: calc(4px * var(--clock-scale)) calc(4px * var(--clock-scale));\n      }\n\n      .retro-ampm {\n        font-family: 'Courier New', monospace;\n        font-size: calc(19px * var(--clock-scale));\n        font-weight: bold;\n        color: #00ff00;\n        text-shadow: 0 0 5px #00cc00;\n        margin-left: calc(8px * var(--clock-scale));\n      }\n\n      /* ========== TEXT CLOCK ========== */\n      .text-clock {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        max-width: 100%;\n      }\n\n      .text-display {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-wrap: wrap;\n        max-width: 100%;\n      }\n\n      .text-word {\n        font-family: Georgia, serif;\n        font-size: clamp(24px, calc(48px * var(--clock-scale)), 10vw);\n        font-weight: 600;\n        line-height: 1.4;\n        text-transform: capitalize;\n      }\n\n      .text-prefix {\n        font-size: clamp(20px, calc(38px * var(--clock-scale)), 8vw);\n        font-weight: 400;\n        opacity: 0.7;\n        text-transform: lowercase;\n      }\n\n      .text-ampm {\n        font-size: clamp(14px, calc(24px * var(--clock-scale)), 5vw);\n        opacity: 0.8;\n        text-transform: uppercase;\n      }\n\n      /* ========== NEON CLOCK ========== */\n      .neon-clock {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      .neon-display {\n        display: flex;\n        align-items: center;\n        gap: calc(8px * var(--clock-scale));\n        width: 100%;\n        max-width: 100%;\n        flex-wrap: nowrap;\n        justify-content: center;\n        box-sizing: border-box;\n      }\n\n      .neon-digit {\n        font-family: 'Arial Black', sans-serif;\n        font-size: clamp(24px, calc(48px * var(--clock-scale)), 10vw);\n        font-weight: 900;\n        animation: neon-flicker 3s ease-in-out infinite;\n      }\n\n      .neon-separator {\n        font-family: 'Arial Black', sans-serif;\n        font-size: clamp(24px, calc(48px * var(--clock-scale)), 10vw);\n        font-weight: 900;\n      }\n\n      .neon-ampm {\n        font-family: 'Arial Black', sans-serif;\n        font-size: clamp(14px, calc(19px * var(--clock-scale)), 4vw);\n        font-weight: 900;\n      }\n\n      @keyframes neon-flicker {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.95; }\n        51% { opacity: 1; }\n        52% { opacity: 0.98; }\n      }\n\n      /* ========== MATERIAL CLOCK ========== */\n      .material-clock {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        max-width: 100%;\n      }\n\n      .material-card {\n        background: var(--clock-background);\n        border-radius: calc(16px * var(--clock-scale));\n        padding: calc(24px * var(--clock-scale)) calc(32px * var(--clock-scale));\n        box-shadow: \n          0 4px 6px rgba(0, 0, 0, 0.1),\n          0 1px 3px rgba(0, 0, 0, 0.08);\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: calc(8px * var(--clock-scale));\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      .material-time {\n        font-family: 'Roboto', sans-serif;\n        font-size: clamp(28px, calc(48px * var(--clock-scale)), 10vw);\n        font-weight: 300;\n        color: var(--clock-color);\n        letter-spacing: -1px;\n      }\n\n      .material-seconds {\n        font-family: 'Roboto', sans-serif;\n        font-size: clamp(14px, calc(19px * var(--clock-scale)), 4vw);\n        font-weight: 400;\n        color: var(--clock-color);\n        opacity: 0.7;\n      }\n\n      /* ========== TERMINAL CLOCK ========== */\n      .terminal-clock {\n        font-family: 'Courier New', Consolas, monospace;\n        background: #1e1e1e;\n        padding: calc(20px * var(--clock-scale));\n        border-radius: calc(8px * var(--clock-scale));\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      .terminal-prompt {\n        font-weight: 400;\n      }\n\n      .terminal-command {\n        font-weight: 400;\n      }\n\n      .terminal-output {\n        font-weight: 600;\n      }\n\n      .terminal-cursor {\n        display: inline-block;\n        animation: cursor-blink 1s step-end infinite;\n      }\n\n      @keyframes cursor-blink {\n        0%, 50% { opacity: 1; }\n        51%, 100% { opacity: 0; }\n      }\n\n      /* ========== RESPONSIVE SIZING ========== */\n      /* Improved responsive behavior with better viewport constraints */\n      @media (max-width: 768px) {\n        .animated-clock-module-container {\n          --clock-scale: min(calc(var(--clock-size-value) / 115), calc(100vw / 300));\n        }\n        \n        .digital-time {\n          font-size: clamp(32px, 6vw, calc(96px * var(--clock-scale)));\n        }\n        \n        .flip-unit {\n          width: min(calc(56px * var(--clock-scale)), 12vw);\n          height: min(calc(77px * var(--clock-scale)), 16vw);\n        }\n        \n        .flip-digit-display {\n          font-size: clamp(24px, 5vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .analog-clock-dial {\n          width: min(calc(192px * var(--clock-scale)), 50vw);\n          height: min(calc(192px * var(--clock-scale)), 50vw);\n        }\n        \n        .retro-digit, .retro-colon {\n          font-size: clamp(24px, 5vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .neon-digit {\n          font-size: clamp(24px, 5vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .material-time {\n          font-size: clamp(24px, 5vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .terminal-output {\n          font-size: clamp(18px, 4vw, calc(38px * var(--clock-scale)));\n        }\n        \n        .text-word {\n          font-size: clamp(24px, 5vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .binary-dot {\n          width: min(calc(19px * var(--clock-scale)), 4vw);\n          height: min(calc(19px * var(--clock-scale)), 4vw);\n        }\n        \n        .digital-display {\n          padding: calc(16px * var(--clock-scale)) calc(20px * var(--clock-scale));\n        }\n        \n        .material-card {\n          padding: calc(16px * var(--clock-scale)) calc(24px * var(--clock-scale));\n        }\n        \n        .terminal-clock {\n          padding: calc(16px * var(--clock-scale));\n        }\n      }\n\n      @media (max-width: 480px) {\n        .animated-clock-module-container {\n          --clock-scale: min(calc(var(--clock-size-value) / 115), calc(100vw / 200));\n        }\n        \n        .digital-time {\n          font-size: clamp(24px, 5vw, calc(64px * var(--clock-scale)));\n        }\n        \n        .digital-display {\n          padding: calc(12px * var(--clock-scale)) calc(16px * var(--clock-scale));\n        }\n\n        .flip-unit {\n          width: min(calc(56px * var(--clock-scale)), 15vw);\n          height: min(calc(77px * var(--clock-scale)), 20vw);\n        }\n        \n        .flip-digit-display {\n          font-size: clamp(18px, 4vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .analog-clock-dial {\n          width: min(calc(192px * var(--clock-scale)), 60vw);\n          height: min(calc(192px * var(--clock-scale)), 60vw);\n        }\n        \n        .retro-digit, .retro-colon {\n          font-size: clamp(18px, 4vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .neon-digit {\n          font-size: clamp(18px, 4vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .material-time {\n          font-size: clamp(18px, 4vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .terminal-output {\n          font-size: clamp(14px, 3vw, calc(38px * var(--clock-scale)));\n        }\n        \n        .text-word {\n          font-size: clamp(18px, 4vw, calc(48px * var(--clock-scale)));\n        }\n        \n        .binary-dot {\n          width: min(calc(19px * var(--clock-scale)), 5vw);\n          height: min(calc(19px * var(--clock-scale)), 5vw);\n        }\n        \n        .material-card {\n          padding: calc(12px * var(--clock-scale)) calc(20px * var(--clock-scale));\n        }\n        \n        .terminal-clock {\n          padding: calc(12px * var(--clock-scale));\n        }\n      }\n\n    "}validate(e){const t=[];return{valid:0===t.length,errors:t}}}},3856:(e,t,i)=>{i.d(t,{FB:()=>g});var o=i(5183),n=i(4276),a=i(9247),r=i(5201),s=i(2593);const l=(e,t,i)=>{const o=new Map;for(let n=t;n<=i;n++)o.set(e[n],n);return o},d=(0,r.u$)(class extends r.WL{constructor(e){if(super(e),e.type!==r.OA.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,i){let o;void 0===i?i=t:void 0!==t&&(o=t);const n=[],a=[];let r=0;for(const t of e)n[r]=o?o(t,r):r,a[r]=i(t,r),r++;return{values:a,keys:n}}render(e,t,i){return this.dt(e,t,i).values}update(e,[t,i,o]){const n=(0,s.cN)(e),{values:r,keys:d}=this.dt(t,i,o);if(!Array.isArray(n))return this.ut=d,r;const c=this.ut??=[],p=[];let u,h,g=0,m=n.length-1,f=0,_=r.length-1;for(;g<=m&&f<=_;)if(null===n[g])g++;else if(null===n[m])m--;else if(c[g]===d[f])p[f]=(0,s.lx)(n[g],r[f]),g++,f++;else if(c[m]===d[_])p[_]=(0,s.lx)(n[m],r[_]),m--,_--;else if(c[g]===d[_])p[_]=(0,s.lx)(n[g],r[_]),(0,s.Dx)(e,p[_+1],n[g]),g++,_--;else if(c[m]===d[f])p[f]=(0,s.lx)(n[m],r[f]),(0,s.Dx)(e,n[g],n[m]),m--,f++;else if(void 0===u&&(u=l(d,f,_),h=l(c,g,m)),u.has(c[g]))if(u.has(c[m])){const t=h.get(d[f]),i=void 0!==t?n[t]:null;if(null===i){const t=(0,s.Dx)(e,n[g]);(0,s.lx)(t,r[f]),p[f]=t}else p[f]=(0,s.lx)(i,r[f]),(0,s.Dx)(e,n[g],i),n[t]=null;f++}else(0,s.KO)(n[m]),m--;else(0,s.KO)(n[g]),g++;for(;f<=_;){const t=(0,s.Dx)(e,p[_+1]);(0,s.lx)(t,r[f]),p[f++]=t}for(;g<=m;){const e=n[g++];null!==e&&(0,s.KO)(e)}return this.ut=d,(0,s.mY)(e,p),a.c0}});var c=i(2314),p=(i(6768),function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r});function u(e,t,i){const o=h(e),n=h(t);return o&&n?(a=Math.round(o.r+(n.r-o.r)*i),r=Math.round(o.g+(n.g-o.g)*i),s=Math.round(o.b+(n.b-o.b)*i),`#${((1<<24)+(a<<16)+(r<<8)+s).toString(16).slice(1)}`):e;var a,r,s}function h(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function g(){return[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}]}let m=4,f=class extends o.WF{constructor(){super(...arguments),this.stops=[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],this.barSize="regular",this.barRadius="round",this.barStyle="flat",this._draggedIndex=null,this._colorPickerOpen=!1,this._colorPickerStopId=null,this._colorPickerCurrentColor="#000000"}render(){const e=[...this.stops].sort(((e,t)=>e.position-t.position));return o.qy`
      <!-- Action Buttons -->
      <div class="buttons-row">
        <button class="add-button" @click=${this._addStop}>
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
          </svg>
          Add Stop
        </button>
        <button class="reset-button" @click=${this._resetStops}>
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
            />
          </svg>
          Reset
        </button>
      </div>

      <!-- Gradient Stops List -->
      <div class="stops-list ${null!==this._draggedIndex?"drag-active":""}">
        ${d(e,(e=>e.id),((t,i)=>this._renderStopItem(t,i,e.length)))}
      </div>

      <!-- Color Picker Popup -->
      ${this._colorPickerOpen?o.qy`
            <div class="color-picker-overlay" @click=${this._closeColorPicker}>
              <div class="color-picker-popup" @click=${e=>e.stopPropagation()}>
                <div class="color-picker-header">
                  <h3>Choose Color</h3>
                  <button class="close-btn" @click=${this._closeColorPicker}>×</button>
                </div>
                <ultra-color-picker
                  .value=${this._colorPickerCurrentColor}
                  .defaultValue=${this._colorPickerCurrentColor}
                  @value-changed=${this._handleColorPickerChange}
                ></ultra-color-picker>
              </div>
            </div>
          `:""}
    `}_renderStopItem(e,t,i){const n=0===e.position||100===e.position,a=this._draggedIndex===t,r=i>2&&!n;return o.qy`
      <div
        class="stop-item ${n?"boundary":""} ${a?"dragging":""}"
        draggable="true"
        @dragstart=${e=>this._handleDragStart(e,t)}
        @dragend=${this._handleDragEnd}
        @dragover=${this._handleDragOver}
        @drop=${e=>this._handleDrop(e,t)}
      >
        <!-- Drag Handle -->
        <div class="drag-handle">
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M9 3h2v2H9V3zm4 0h2v2h-2V3zM9 7h2v2H9V7zm4 0h2v2h-2V7zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2zm-4 4h2v2H9v-2zm4 0h2v2h-2v-2z"
            />
          </svg>
        </div>

        <!-- Color Preview & Picker -->
        <div
          class="color-preview color-circle"
          style="background-color: ${e.color}; cursor: pointer;"
          @click=${()=>this._openColorPicker(e.id,e.color)}
        ></div>

        <!-- Percentage Input -->
        <input
          type="number"
          class="percentage-input"
          .value=${e.position.toString()}
          min="0"
          max="100"
          @input=${t=>this._handlePositionChange(e.id,parseFloat(t.target.value)||0)}
          @blur=${this._validateAndSortStops}
        />

        <!-- Stop Info -->
        <div class="stop-info">
          <span>${e.position}%</span>
        </div>

        <!-- Delete Button -->
        <button
          class="delete-button"
          ?disabled=${!r}
          @click=${()=>this._deleteStop(e.id)}
          title=${r?"Delete stop":"Cannot delete boundary stops"}
        >
          <svg class="icon" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"
            />
          </svg>
        </button>
      </div>
    `}_addStop(){const e=function(e){if(!e||e.length<2)return{id:"stop-"+m++,position:50,color:"#808080"};const t=[...e].sort(((e,t)=>e.position-t.position));let i=0,o=50,n="#808080";for(let e=0;e<t.length-1;e++){const a=t[e+1].position-t[e].position;a>i&&(i=a,o=t[e].position+a/2,n=u(t[e].color,t[e+1].color,.5))}return{id:"stop-"+m++,position:Math.round(o),color:n}}(this.stops);this.stops=[...this.stops,e],this._notifyChange()}_resetStops(){this.stops=[{id:"1",position:0,color:"#ff0000"},{id:"2",position:50,color:"#ffff00"},{id:"3",position:100,color:"#00ff00"}],m=4,this._notifyChange(),this._dispatchResetEvent()}_deleteStop(e){if(this.stops.length<=2)return;const t=this.stops.find((t=>t.id===e));t&&0!==t.position&&100!==t.position&&(this.stops=this.stops.filter((t=>t.id!==e)),this._notifyChange())}_handleColorChange(e,t){this.stops=this.stops.map((i=>i.id===e?Object.assign(Object.assign({},i),{color:t}):i)),this._notifyChange()}_openColorPicker(e,t){this._colorPickerStopId=e,this._colorPickerCurrentColor=t,this._colorPickerOpen=!0}_closeColorPicker(){this._colorPickerOpen=!1,this._colorPickerStopId=null}_handleColorPickerChange(e){this._colorPickerStopId&&(this._handleColorChange(this._colorPickerStopId,e.detail.value),this._colorPickerCurrentColor=e.detail.value)}_handlePositionChange(e,t){t=Math.max(0,Math.min(100,t)),this.stops=this.stops.map((i=>i.id===e?Object.assign(Object.assign({},i),{position:t}):i)),this.requestUpdate()}_validateAndSortStops(){this.stops=this.stops.map((e=>0===e.position||"1"===e.id&&e.position<50?Object.assign(Object.assign({},e),{position:0}):100===e.position||"3"===e.id&&e.position>50?Object.assign(Object.assign({},e),{position:100}):e)),this._notifyChange()}_notifyChange(){this.dispatchEvent(new CustomEvent("gradient-changed",{detail:{stops:this.stops},bubbles:!0,composed:!0}))}_dispatchResetEvent(){this.dispatchEvent(new CustomEvent("gradient-stop-reset",{bubbles:!0,composed:!0}))}_handleDragStart(e,t){this._draggedIndex=t,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",t.toString()))}_handleDragEnd(){this._draggedIndex=null}_handleDragOver(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}_handleDrop(e,t){if(e.preventDefault(),null===this._draggedIndex||this._draggedIndex===t)return;const i=[...this.stops].sort(((e,t)=>e.position-t.position)),o=i[this._draggedIndex],n=i[t];this.stops=this.stops.map((e=>e.id===o.id?Object.assign(Object.assign({},e),{position:n.position}):e.id===n.id?Object.assign(Object.assign({},e),{position:o.position}):e)),this._draggedIndex=null,this._notifyChange()}};f.styles=o.AH`
    :host {
      display: block;
      width: 100%;
      font-family: var(--mdc-typography-body1-font-family, Roboto, sans-serif);
    }

    .gradient-preview {
      width: 100%;
      height: 16px;
      border-radius: 8px;
      border: 1px solid var(--divider-color);
      margin-bottom: 16px;
      position: relative;
      overflow: hidden;
      background-color: var(--card-background-color, #1c1c1c);
      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
    }

    .gradient-preview-fill {
      width: 100%;
      height: 100%;
      border-radius: inherit;
      position: relative;
    }

    /* Bar size variants to match actual card bars */
    .gradient-preview.bar-size-thin {
      height: 8px;
      border-radius: 4px;
    }

    .gradient-preview.bar-size-regular {
      height: 16px;
      border-radius: 8px;
    }

    .gradient-preview.bar-size-thick {
      height: 24px;
      border-radius: 12px;
    }

    .gradient-preview.bar-size-thiccc {
      height: 32px;
      border-radius: 16px;
    }

    /* Bar radius variants to match actual card bars */
    .gradient-preview.bar-radius-square {
      border-radius: 0;
    }

    .gradient-preview.bar-radius-round {
      /* Uses default border-radius from size classes */
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-thin {
      border-radius: 2px;
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-regular {
      border-radius: 4px;
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-thick {
      border-radius: 6px;
    }

    .gradient-preview.bar-radius-rounded-square.bar-size-thiccc {
      border-radius: 8px;
    }

    .buttons-row {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
    }

    .add-button,
    .reset-button {
      flex: 1;
      padding: 12px 16px;
      border: none;
      border-radius: 8px;
      font-weight: 500;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s ease;
    }

    .add-button {
      background: var(--primary-color);
      color: var(--text-primary-color);
    }

    .add-button:hover {
      background: var(--primary-color);
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .reset-button {
      background: var(--secondary-color, #666);
      color: white;
    }

    .reset-button:hover {
      background: var(--secondary-color, #666);
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .stops-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .stop-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--card-background-color, #1c1c1c);
      border: 1px solid var(--divider-color);
      border-radius: 8px;
      transition: all 0.2s ease;
    }

    .stop-item:hover {
      border-color: var(--primary-color);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .stop-item.dragging {
      opacity: 0.7;
      transform: scale(1.02);
      z-index: ${c.Mu.MODULE_POPUP_CONTENT};
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .drag-handle {
      width: 20px;
      height: 20px;
      cursor: grab;
      color: var(--secondary-text-color);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .drag-handle:hover {
      color: var(--primary-text-color);
    }

    .drag-handle:active {
      cursor: grabbing;
    }

    .color-preview {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid var(--divider-color);
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .color-preview:hover {
      border-color: var(--primary-color);
      transform: scale(1.1);
    }

    .percentage-input {
      width: 80px;
      padding: 8px 12px;
      border: 1px solid var(--divider-color);
      border-radius: 6px;
      background: var(--secondary-background-color);
      color: var(--primary-text-color);
      text-align: center;
      font-weight: 500;
    }

    .percentage-input:focus {
      border-color: var(--primary-color);
      outline: none;
      box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
    }

    .stop-info {
      flex: 1;
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--secondary-text-color);
      font-size: 14px;
    }

    .delete-button {
      width: 32px;
      height: 32px;
      border: none;
      background: transparent;
      cursor: pointer;
      color: var(--secondary-text-color);
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .delete-button:hover {
      background: rgba(var(--rgb-error-color, 244, 67, 54), 0.1);
      color: var(--error-color, #f44336);
    }

    .delete-button:disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .stop-item.boundary .delete-button {
      opacity: 0.3;
      cursor: not-allowed;
    }

    .icon {
      width: 18px;
      height: 18px;
    }

    /* Drag and drop styling */
    .stops-list.drag-active .stop-item:not(.dragging) {
      transition: transform 0.2s ease;
    }

    /* Color Circle Styling */
    .color-circle {
      border: 3px solid var(--divider-color);
      transition: all 0.2s ease;
    }

    .color-circle:hover {
      border-color: var(--primary-color);
      transform: scale(1.15);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
    }

    /* Color Picker Popup */
    .color-picker-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: ${c.Mu.MODULE_POPUP_CONTENT};
      backdrop-filter: blur(2px);
    }

    .color-picker-popup {
      background: var(--card-background-color);
      border-radius: 12px;
      padding: 24px;
      max-width: 400px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      border: 1px solid var(--divider-color);
    }

    .color-picker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--divider-color);
    }

    .color-picker-header h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      color: var(--primary-text-color);
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--secondary-text-color);
      padding: 4px;
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .close-btn:hover {
      background: var(--divider-color);
      color: var(--primary-text-color);
    }
  `,p([(0,n.MZ)({type:Array})],f.prototype,"stops",void 0),p([(0,n.MZ)({type:String})],f.prototype,"barSize",void 0),p([(0,n.MZ)({type:String})],f.prototype,"barRadius",void 0),p([(0,n.MZ)({type:String})],f.prototype,"barStyle",void 0),p([(0,n.wk)()],f.prototype,"_draggedIndex",void 0),p([(0,n.wk)()],f.prototype,"_colorPickerOpen",void 0),p([(0,n.wk)()],f.prototype,"_colorPickerStopId",void 0),p([(0,n.wk)()],f.prototype,"_colorPickerCurrentColor",void 0),f=p([(0,n.EM)("uc-gradient-editor")],f)},4002:(e,t,i)=>{i.d(t,{oD:()=>o.oD}),i(866);var o=i(7593);i(4504),i(278),i(884),i(5649),i(4260),i(794),i(1866),i(4790),i(6256),i(2701),i(6101),i(5863),i(9477),i(1394),i(1522),i(2929),i(3587),i(1371),i(1867),i(1986),i(6682),i(927),i(9643)},4260:(e,t,i)=>{i.d(t,{Q:()=>g});var o=i(5183),n=i(866),a=i(8914),r=i(9662),s=i(2371),l=i(796),d=(i(6768),i(3856)),c=(i(7487),i(3057)),p=i(4345),u=i(7987),h=i(456);class g extends n.m{constructor(){super(...arguments),this.metadata={type:"bar",title:"Bars",description:"Progress bars for values",author:"WJD Designs",version:"1.0.0",icon:"mdi:chart-bar",category:"data",tags:["bar","progress","chart","value","sensor"]},this._templateInputDebounce=null}createDefault(e,t){const i=this.findSuitableBatterySensor(t);return{id:e||this.generateId("bar"),type:"bar",entity:i||"",percentage_type:"entity",percentage_entity:"",percentage_attribute_entity:"",percentage_attribute_name:"",percentage_current_entity:"",percentage_total_entity:"",percentage_template:"",height:20,bar_direction:"left-to-right",bar_size:"medium",bar_radius:"round",bar_style:"flat",bar_width:100,bar_alignment:"center",border_radius:10,label_alignment:"space-between",show_percentage:!0,show_value:!1,percentage_text_size:14,percentage_text_alignment:"center",value_position:"inside",left_title:"",left_entity:"",left_condition_type:"none",left_condition_entity:"",left_condition_state:"",left_template_mode:!1,left_template:"",left_title_size:14,left_value_size:14,left_title_color:"",left_value_color:"",left_enabled:!1,right_title:"",right_entity:"",right_enabled:!1,right_condition_type:"none",right_condition_entity:"",right_condition_state:"",right_template_mode:!1,right_template:"",right_title_size:14,right_value_size:14,right_title_color:"",right_value_color:"",bar_color:"",bar_background_color:"",bar_border_color:"var(--divider-color)",percentage_text_color:"",dot_color:"",minimal_icon_enabled:!1,minimal_icon:"",minimal_icon_mode:"icon-in-dot",minimal_icon_size:24,minimal_icon_size_auto:!0,minimal_icon_color:"",minimal_icon_use_dot_color:!0,use_gradient:!1,gradient_display_mode:"full",gradient_stops:(0,d.FB)(),limit_entity:"",limit_color:"",animation:!0,template_mode:!1,template:"",bar_animation_enabled:!1,bar_animation_entity:"",bar_animation_trigger_type:"state",bar_animation_attribute:"",bar_animation_value:"",bar_animation_type:"none",bar_animation_override_entity:"",bar_animation_override_trigger_type:"state",bar_animation_override_attribute:"",bar_animation_override_value:"",bar_animation_override_type:"none",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}renderLogicTab(e,t,i,o){return s.X.render(e,t,(e=>o(e)))}findSuitableBatterySensor(e){if(!e||!e.states)return"";const t=["battery_level","battery","charge","power_level","fuel_level","energy"],i=["battery","energy","power"],o=["sensor","binary_sensor"],n=[];return Object.keys(e.states).forEach((a=>{const r=e.states[a],s=a.split(".")[0];if(!o.includes(s))return;if("binary_sensor"===s)return;const l=r.attributes||{},d=l.friendly_name||a,c=l.device_class,p=l.unit_of_measurement,u=parseFloat(r.state);if(isNaN(u)||u<0||u>100)return;if("unavailable"===r.state||"unknown"===r.state)return;let h=0;i.includes(c)&&(h+=100),"%"===p&&(h+=80),t.forEach((e=>{a.toLowerCase().includes(e)&&(h+=50)})),t.forEach((e=>{d.toLowerCase().includes(e)&&(h+=40)})),a.includes("battery")&&"%"===p&&(h+=60),(a.includes("phone")||a.includes("mobile")||a.includes("device"))&&(a.includes("battery")||"battery"===c)&&(h+=30),h>0&&n.push({entity:a,score:h,friendlyName:d})})),n.length>0?(n.sort(((e,t)=>t.score-e.score)),n[0].entity):""}renderGeneralTab(e,t,i,n){var r,s,l,c,p,u;const g=e,m=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en",f=[this.selectField("percentage_type",[{value:"entity",label:(0,h.kg)("editor.bar.perc_type.entity",m,"Entity (0-100)")},{value:"attribute",label:(0,h.kg)("editor.bar.perc_type.attribute",m,"Entity Attribute")},{value:"difference",label:(0,h.kg)("editor.bar.perc_type.difference",m,"Difference")},{value:"template",label:(0,h.kg)("editor.bar.perc_type.template",m,"Template")}])];return o.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Bar Settings -->
        ${this.renderSettingsSection((0,h.kg)("editor.bar.bar_settings.title",m,"Bar Settings"),(0,h.kg)("editor.bar.bar_settings.desc",m,"Configure how the bar percentage is calculated and displayed."),[])}
        <div class="field-group percentage-type-group" style="margin-top: -16px; margin-bottom: 16px;">
          ${this.renderFieldSection((0,h.kg)("editor.bar.percentage_type.title",m,"Percentage Type"),(0,h.kg)("editor.bar.percentage_type.desc",m,"Choose how the bar percentage is calculated"),t,{percentage_type:g.percentage_type||"entity"},f,(e=>{var t;const i=null===(t=e.detail.value)||void 0===t?void 0:t.percentage_type;void 0!==i&&i!==g.percentage_type&&n({percentage_type:i})}))}
        </div>

          <!-- Entity Attribute Fields -->
          ${"attribute"===g.percentage_type?this.renderConditionalFieldsGroup((0,h.kg)("editor.bar.attr_config.title",m,"Entity Attribute Configuration"),o.qy`
                    ${this.renderSettingsSection((0,h.kg)("editor.bar.attr_config.title",m,"Entity Attribute Configuration"),(0,h.kg)("editor.bar.attr_config.desc",m,"Configure entity attribute settings"),[{title:(0,h.kg)("editor.bar.attr_config.attribute_entity",m,"Attribute Entity"),description:(0,h.kg)("editor.bar.attr_config.attribute_entity_desc",m,"Select the entity that contains the attribute with the percentage value"),hass:t,data:{percentage_attribute_entity:g.percentage_attribute_entity||""},schema:[this.entityField("percentage_attribute_entity")],onChange:e=>n({percentage_attribute_entity:e.detail.value.percentage_attribute_entity})},{title:(0,h.kg)("editor.bar.attr_config.attribute_name",m,"Attribute Name"),description:(0,h.kg)("editor.bar.attr_config.attribute_name_desc",m,'Enter the name of the attribute that contains the percentage value (e.g., "battery_level")'),hass:t,data:{percentage_attribute_name:g.percentage_attribute_name||""},schema:[this.textField("percentage_attribute_name")],onChange:e=>n({percentage_attribute_name:e.detail.value.percentage_attribute_name})}])}
                  `):""}

          <!-- Difference Fields -->
          ${"difference"===g.percentage_type?this.renderConditionalFieldsGroup((0,h.kg)("editor.bar.diff_config.title",m,"Difference Calculation Configuration"),o.qy`
                    ${this.renderSettingsSection((0,h.kg)("editor.bar.diff_config.title",m,"Difference Calculation Configuration"),(0,h.kg)("editor.bar.diff_config.desc",m,"Configure difference calculation settings"),[{title:(0,h.kg)("editor.bar.diff_config.current_entity",m,"Current Value Entity"),description:(0,h.kg)("editor.bar.diff_config.current_entity_desc",m,"Entity representing the current/used amount (e.g., fuel used, battery consumed)"),hass:t,data:{percentage_current_entity:g.percentage_current_entity||""},schema:[this.entityField("percentage_current_entity")],onChange:e=>n({percentage_current_entity:e.detail.value.percentage_current_entity})},{title:(0,h.kg)("editor.bar.diff_config.total_entity",m,"Total Value Entity"),description:(0,h.kg)("editor.bar.diff_config.total_entity_desc",m,"Entity representing the total/maximum amount (e.g., fuel capacity, battery capacity)"),hass:t,data:{percentage_total_entity:g.percentage_total_entity||""},schema:[this.entityField("percentage_total_entity")],onChange:e=>n({percentage_total_entity:e.detail.value.percentage_total_entity})}])}
                  `):""}

          <!-- Template Field -->
          ${"template"===g.percentage_type?this.renderConditionalFieldsGroup((0,h.kg)("editor.bar.template_config.title",m,"Template Configuration"),o.qy`
                    ${this.renderSettingsSection((0,h.kg)("editor.bar.template_config.title",m,"Template Configuration"),(0,h.kg)("editor.bar.template_config.desc",m,"Configure template settings"),[{title:(0,h.kg)("editor.bar.template_config.percentage_template",m,"Percentage Template"),description:(0,h.kg)("editor.bar.template_config.percentage_template_desc",m,"Enter a Jinja2 template that returns a number between 0-100 for the percentage. Example: {{ (states('sensor.battery_level') | float) * 100 }}"),hass:t,data:g,schema:[this.textField("percentage_template",!0)],onChange:e=>n({percentage_template:e.detail.value.percentage_template})}])}
                  `):""}

          <!-- Bar Percentage Entity -->
          <div style="margin-top: 24px;">
            ${a.Q.renderField((0,h.kg)("editor.bar.entity.title",m,"Bar Percentage Entity"),g.entity?(0,h.kg)("editor.bar.entity.desc_present",m,"The entity that provides the percentage value for the bar."):(0,h.kg)("editor.bar.entity.desc_empty",m,"Select an entity that provides a percentage value (0-100). Battery sensors are ideal for bars."),t,{entity:g.entity||""},[a.Q.createSchemaItem("entity",{entity:{filter:[{domain:"sensor"},{domain:"input_number"}]}})],(e=>n({entity:e.detail.value.entity})))}
            ${g.entity?"":o.qy`
                    <div
                      style="color: var(--warning-color); font-size: 12px; margin-top: 4px; font-style: italic;"
                    >
                      <ha-icon
                        icon="mdi:information-outline"
                        style="font-size: 14px; margin-right: 4px;"
                      ></ha-icon>
                      ${(0,h.kg)("editor.bar.entity.no_entity_warning",m,"No entity selected - Please choose a sensor with values between 0-100")}
                    </div>
                  `}
          </div>

          <!-- Limit Value Entity -->
          <div style="margin-top: 24px;">
            ${a.Q.renderField((0,h.kg)("editor.bar.limit_entity.title",m,"Limit Value Entity (optional)"),(0,h.kg)("editor.bar.limit_entity.desc",m,"Optional: Add a vertical indicator line on the bar (e.g. charge limit for EV battery)."),t,{limit_entity:g.limit_entity||""},[a.Q.createSchemaItem("limit_entity",{entity:{}})],(e=>n({limit_entity:e.detail.value.limit_entity})))}
          </div>
        </div>

        <!-- Bar Appearance Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,h.kg)("editor.bar.appearance.title",m,"Bar Appearance")}
          </div>

          <!-- Bar Style -->
          <div class="field-group" style="margin-bottom: 16px;">
            <div
              class="field-title"
              style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
            >
              ${(0,h.kg)("editor.bar.appearance.style",m,"Bar Style")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
            >
              ${(0,h.kg)("editor.bar.appearance.style_desc",m,"Choose the visual style of the progress bar.")}
            </div>
            ${this.renderUcForm(t,{bar_style:g.bar_style||"flat"},[this.selectField("bar_style",[{value:"flat",label:(0,h.kg)("editor.bar.appearance.style_flat",m,"Flat (Default)")},{value:"glossy",label:(0,h.kg)("editor.bar.appearance.style_glossy",m,"Glossy")},{value:"embossed",label:(0,h.kg)("editor.bar.appearance.style_embossed",m,"Embossed")},{value:"inset",label:(0,h.kg)("editor.bar.appearance.style_inset",m,"Inset")},{value:"gradient-overlay",label:(0,h.kg)("editor.bar.appearance.style_gradient",m,"Gradient Overlay")},{value:"neon-glow",label:(0,h.kg)("editor.bar.appearance.style_neon",m,"Neon Glow")},{value:"outline",label:(0,h.kg)("editor.bar.appearance.style_outline",m,"Outline")},{value:"glass",label:(0,h.kg)("editor.bar.appearance.style_glass",m,"Glass")},{value:"metallic",label:(0,h.kg)("editor.bar.appearance.style_metallic",m,"Metallic")},{value:"neumorphic",label:(0,h.kg)("editor.bar.appearance.style_neumorphic",m,"Neumorphic")},{value:"dashed",label:(0,h.kg)("editor.bar.appearance.style_dashed",m,"Dashed")},{value:"dots",label:(0,h.kg)("editor.bar.appearance.style_dots",m,"Dots")},{value:"minimal",label:(0,h.kg)("editor.bar.appearance.style_minimal",m,"Minimal")}])],(e=>{const t=e.detail.value.bar_style;t!==(g.bar_style||"flat")&&(n({bar_style:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
          </div>

          <!-- Bar Fill Direction -->
          <div class="field-group" style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px !important; font-weight: 600 !important;"
            >
              ${(0,h.kg)("editor.bar.appearance.direction",m,"Fill Direction")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
            >
              ${(0,h.kg)("editor.bar.appearance.direction_desc",m,"Choose which direction the bar fills from as the value increases.")}
            </div>
            <div
              style="display: flex; gap: 8px; justify-content: flex-start; flex-wrap: wrap;"
            >
              <button
                type="button"
                style="padding: 8px 12px; border: 2px solid ${"left-to-right"===(g.bar_direction||"left-to-right")?"var(--primary-color)":"var(--divider-color)"}; background: ${"left-to-right"===(g.bar_direction||"left-to-right")?"var(--primary-color)":"transparent"}; color: ${"left-to-right"===(g.bar_direction||"left-to-right")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                @click=${()=>n({bar_direction:"left-to-right"})}
              >
                <ha-icon
                  icon="mdi:arrow-right"
                  style="font-size: 16px; flex-shrink: 0;"
                ></ha-icon>
                <span
                  style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                  >${(0,h.kg)("editor.bar.appearance.left_to_right",m,"Left to Right")}</span
                >
              </button>
              <button
                type="button"
                style="padding: 8px 12px; border: 2px solid ${"right-to-left"===(g.bar_direction||"left-to-right")?"var(--primary-color)":"var(--divider-color)"}; background: ${"right-to-left"===(g.bar_direction||"left-to-right")?"var(--primary-color)":"transparent"}; color: ${"right-to-left"===(g.bar_direction||"left-to-right")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                @click=${()=>n({bar_direction:"right-to-left"})}
              >
                <ha-icon
                  icon="mdi:arrow-left"
                  style="font-size: 16px; flex-shrink: 0;"
                ></ha-icon>
                <span
                  style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                  >${(0,h.kg)("editor.bar.appearance.right_to_left",m,"Right to Left")}</span
                >
              </button>
            </div>
          </div>

          <!-- Bar Height -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title">${(0,h.kg)("editor.bar.appearance.height",m,"Bar Height")}</div>
            <div class="field-description">${(0,h.kg)("editor.bar.appearance.height_desc",m,"Adjust the thickness of the progress bar in pixels.")}</div>
            <div class="number-range-control">
              <input
                type="range"
                class="range-slider"
                min="8"
                max="60"
                step="2"
                .value="${null!==(s=g.height)&&void 0!==s?s:20}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);n({height:i})}}
              />
              <input
                type="number"
                class="range-input"
                min="8"
                step="2"
                .value="${null!==(l=g.height)&&void 0!==l?l:20}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({height:i})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||20,o="ArrowUp"===e.key?2:-2,a=Math.max(8,i+o);n({height:a})}}}
              />
              <button
                class="range-reset-btn"
                @click=${()=>n({height:20})}
                title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","20px")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>

          <!-- Border Radius -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title">${(0,h.kg)("editor.bar.appearance.border_radius",m,"Border Radius")}</div>
            <div class="field-description">${(0,h.kg)("editor.bar.appearance.border_radius_desc",m,"Control the rounded corners of the bar.")}</div>
            <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
              <input
                type="range"
                class="gap-slider"
                min="0"
                max="50"
                step="1"
                .value="${null!==(c=g.border_radius)&&void 0!==c?c:10}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);n({border_radius:i})}}
              />
              <input
                type="number"
                class="gap-input"
                min="0"
                step="1"
                .value="${null!==(p=g.border_radius)&&void 0!==p?p:10}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({border_radius:i})}}
                @keydown=${e=>{var t;if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const i=e.target,o=null!==(t=parseInt(i.value))&&void 0!==t?t:10,a="ArrowUp"===e.key?1:-1,r=Math.max(0,Math.min(50,o+a));n({border_radius:r})}}}
              />
              <button
                class="reset-btn"
                @click=${()=>n({border_radius:10})}
                title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","10")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>

          <!-- Bar Width -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title">${(0,h.kg)("editor.bar.appearance.width",m,"Bar Width")}</div>
            <div class="field-description">
              ${(0,h.kg)("editor.bar.appearance.width_desc",m,"Set the width of the bar as a percentage of the container.")}
            </div>
            <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
              <input
                type="range"
                class="gap-slider"
                min="10"
                max="100"
                step="5"
                .value="${g.bar_width||100}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);n({bar_width:i})}}
              />
              <input
                type="number"
                class="gap-input"
                min="10"
                step="5"
                .value="${g.bar_width||100}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({bar_width:i})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||100,o="ArrowUp"===e.key?5:-5,a=Math.max(10,Math.min(100,i+o));n({bar_width:a})}}}
              />
              <button
                class="reset-btn"
                @click=${()=>n({bar_width:100})}
                title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","100")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>

          <!-- Bar Alignment with Icons -->
          ${(g.bar_width||100)<100?o.qy`
                  <div class="field-group" style="margin-bottom: 16px;">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important;"
                    >
                      ${(0,h.kg)("editor.bar.appearance.alignment",m,"Bar Alignment")}
                    </div>
                    <div
                      class="field-description"
                      style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                    >
                      ${(0,h.kg)("editor.bar.appearance.alignment_desc",m,"Choose how to align the bar when it's less than 100% width.")}
                    </div>
                    <div
                      style="display: flex; gap: 8px; justify-content: flex-start; flex-wrap: wrap;"
                    >
                      <button
                        type="button"
                        style="padding: 8px 12px; border: 2px solid ${"left"===(g.bar_alignment||"center")?"var(--primary-color)":"var(--divider-color)"}; background: ${"left"===(g.bar_alignment||"center")?"var(--primary-color)":"transparent"}; color: ${"left"===(g.bar_alignment||"center")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                        @click=${()=>n({bar_alignment:"left"})}
                      >
                        <ha-icon
                          icon="mdi:format-align-left"
                          style="font-size: 16px; flex-shrink: 0;"
                        ></ha-icon>
                        <span
                          style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >${(0,h.kg)("editor.common.left",m,"Left")}</span
                        >
                      </button>
                      <button
                        type="button"
                        style="padding: 8px 12px; border: 2px solid ${"center"===(g.bar_alignment||"center")?"var(--primary-color)":"var(--divider-color)"}; background: ${"center"===(g.bar_alignment||"center")?"var(--primary-color)":"transparent"}; color: ${"center"===(g.bar_alignment||"center")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                        @click=${()=>n({bar_alignment:"center"})}
                      >
                        <ha-icon
                          icon="mdi:format-align-center"
                          style="font-size: 16px; flex-shrink: 0;"
                        ></ha-icon>
                        <span
                          style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >${(0,h.kg)("editor.common.center",m,"Center")}</span
                        >
                      </button>
                      <button
                        type="button"
                        style="padding: 8px 12px; border: 2px solid ${"right"===(g.bar_alignment||"center")?"var(--primary-color)":"var(--divider-color)"}; background: ${"right"===(g.bar_alignment||"center")?"var(--primary-color)":"transparent"}; color: ${"right"===(g.bar_alignment||"center")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                        @click=${()=>n({bar_alignment:"right"})}
                      >
                        <ha-icon
                          icon="mdi:format-align-right"
                          style="font-size: 16px; flex-shrink: 0;"
                        ></ha-icon>
                        <span
                          style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >${(0,h.kg)("editor.common.right",m,"Right")}</span
                        >
                      </button>
                    </div>
                  </div>
                `:""}

          <!-- Label Alignment -->
          ${g.left_enabled||g.right_enabled?o.qy`
                  <div class="field-group">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important;"
                    >
                      ${(0,h.kg)("editor.bar.labels.alignment",m,"Label Alignment")}
                    </div>
                    <div
                      class="field-description"
                      style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                    >
                      ${(0,h.kg)("editor.bar.labels.alignment_desc",m,"Control how the left and right side labels are positioned.")}
                    </div>
                    ${this.renderUcForm(t,{label_alignment:g.label_alignment||"space-between"},[this.selectField("label_alignment",[{value:"left",label:(0,h.kg)("editor.common.left",m,"Left")},{value:"center",label:(0,h.kg)("editor.common.center",m,"Center")},{value:"right",label:(0,h.kg)("editor.common.right",m,"Right")},{value:"space-between",label:(0,h.kg)("editor.common.space_between",m,"Space Between")}])],(e=>{const t=e.detail.value.label_alignment;t!==(g.label_alignment||"space-between")&&(n({label_alignment:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
                  </div>
                `:""}
        </div>

        <!-- Minimal Style Icon Configuration Section -->
        ${"minimal"===g.bar_style?o.qy`
                <div
                  class="settings-section"
                  style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
                >
                  <div
                    class="section-title"
                    style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
                  >
                    ${(0,h.kg)("editor.bar.minimal.icon_config",m,"Minimal Style Icon")}
                  </div>

                  <!-- Enable Icon Toggle -->
                  <div
                    class="field-group"
                    style="margin-bottom: 8px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                  >
                    <div>
                      <div
                        class="field-title"
                        style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 4px;"
                      >
                        ${(0,h.kg)("editor.bar.minimal.icon_enabled",m,"Enable Icon")}
                      </div>
                    </div>
                    <ha-switch
                      .checked=${g.minimal_icon_enabled||!1}
                      @change=${e=>{const t=e.target;n({minimal_icon_enabled:t.checked})}}
                    ></ha-switch>
                  </div>

                  <div
                    class="field-description"
                    style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
                  >
                    ${(0,h.kg)("editor.bar.minimal.icon_enabled_desc",m,"Enable icon display to replace or enhance the dot indicator in minimal bar style.")}
                  </div>

                  ${g.minimal_icon_enabled?o.qy`
                        <!-- Icon Picker -->
                        <div class="field-group" style="margin-bottom: 16px;">
                          <div
                            class="field-title"
                            style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                          >
                            ${(0,h.kg)("editor.bar.minimal.icon",m,"Icon")}
                          </div>
                          <div
                            class="field-description"
                            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                          >
                            ${(0,h.kg)("editor.bar.minimal.icon_desc",m,"Select the icon to display (e.g., mdi:battery).")}
                          </div>
                          <ha-icon-picker
                            .hass=${t}
                            .value=${g.minimal_icon||""}
                            .placeholder=${"mdi:circle"}
                            @value-changed=${e=>n({minimal_icon:e.detail.value})}
                          ></ha-icon-picker>
                        </div>

                        <!-- Icon Display Mode -->
                        <div class="field-group" style="margin-bottom: 16px;">
                          <div
                            class="field-title"
                            style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 4px;"
                          >
                            ${(0,h.kg)("editor.bar.minimal.icon_mode",m,"Display Mode")}
                          </div>
                          <div
                            class="field-description"
                            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                          >
                            ${(0,h.kg)("editor.bar.minimal.icon_mode_desc",m,"Choose how the icon is displayed with the dot.")}
                          </div>
                          ${this.renderUcForm(t,{minimal_icon_mode:g.minimal_icon_mode||"icon-in-dot"},[this.selectField("minimal_icon_mode",[{value:"dot-only",label:(0,h.kg)("editor.bar.minimal.mode_dot_only",m,"Dot Only")},{value:"icon-only",label:(0,h.kg)("editor.bar.minimal.mode_icon_only",m,"Icon Only")},{value:"icon-in-dot",label:(0,h.kg)("editor.bar.minimal.mode_icon_in_dot",m,"Icon in Dot")}])],(e=>{const t=e.detail.value.minimal_icon_mode;t!==(g.minimal_icon_mode||"icon-in-dot")&&(n({minimal_icon_mode:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
                        </div>

                        <!-- Icon Size Auto Toggle -->
                        <div
                          class="field-group"
                          style="margin-bottom: 8px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                        >
                          <div>
                            <div
                              class="field-title"
                              style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 4px;"
                            >
                              ${(0,h.kg)("editor.bar.minimal.icon_size_auto",m,"Auto Size")}
                            </div>
                          </div>
                          <ha-switch
                            .checked=${!1!==g.minimal_icon_size_auto}
                            @change=${e=>{const t=e.target;n({minimal_icon_size_auto:t.checked})}}
                          ></ha-switch>
                        </div>

                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
                        >
                          ${(0,h.kg)("editor.bar.minimal.icon_size_auto_desc",m,"Automatically scale icon size based on bar height.")}
                        </div>

                        <!-- Manual Icon Size (only if auto is disabled) -->
                        ${!1===g.minimal_icon_size_auto?o.qy`
                              <div class="field-container" style="margin-bottom: 24px;">
                                <div class="field-title">
                                  ${(0,h.kg)("editor.bar.minimal.icon_size",m,"Icon Size")}
                                </div>
                                <div class="field-description">
                                  ${(0,h.kg)("editor.bar.minimal.icon_size_desc",m,"Manually set the icon size in pixels.")}
                                </div>
                                <div class="number-range-control">
                                  <input
                                    type="range"
                                    class="range-slider"
                                    min="8"
                                    max="48"
                                    step="1"
                                    .value="${g.minimal_icon_size||24}"
                                    @input=${e=>{const t=e.target,i=parseInt(t.value);n({minimal_icon_size:i})}}
                                  />
                                  <input
                                    type="number"
                                    class="range-input"
                                    min="8"
                                    step="1"
                                    .value="${g.minimal_icon_size||24}"
                                    @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({minimal_icon_size:i})}}
                                    @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||16,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(48,i+o));n({minimal_icon_size:a})}}}
                                  />
                                  <button
                                    class="range-reset-btn"
                                    @click=${()=>n({minimal_icon_size:24})}
                                    title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","24")}"
                                  >
                                    <ha-icon icon="mdi:refresh"></ha-icon>
                                  </button>
                                </div>
                              </div>
                            `:""}

                        <!-- Use Dot Color Toggle -->
                        <div
                          class="field-group"
                          style="margin-bottom: 8px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                        >
                          <div>
                            <div
                              class="field-title"
                              style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 4px;"
                            >
                              ${(0,h.kg)("editor.bar.minimal.use_dot_color",m,"Use Dot Color")}
                            </div>
                          </div>
                          <ha-switch
                            .checked=${!1!==g.minimal_icon_use_dot_color}
                            @change=${e=>{const t=e.target;n({minimal_icon_use_dot_color:t.checked})}}
                          ></ha-switch>
                        </div>

                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
                        >
                          ${(0,h.kg)("editor.bar.minimal.use_dot_color_desc",m,"Use the dot color (including gradient colors) for the icon.")}
                        </div>

                        <!-- Custom Icon Color (only if use_dot_color is false) -->
                        ${!1===g.minimal_icon_use_dot_color?o.qy`
                              <div class="field-container" style="margin-bottom: 16px;">
                                <div class="field-title">
                                  ${(0,h.kg)("editor.bar.minimal.icon_color",m,"Icon Color")}
                                </div>
                                <div class="field-description">
                                  ${(0,h.kg)("editor.bar.minimal.icon_color_desc",m,"Set a custom color for the icon.")}
                                </div>
                                <ultra-color-picker
                                  style="width: 100%;"
                                  .value=${g.minimal_icon_color||""}
                                  .defaultValue=${"var(--primary-color)"}
                                  .hass=${t}
                                  @value-changed=${e=>n({minimal_icon_color:e.detail.value})}
                                ></ultra-color-picker>
                              </div>
                            `:""}
                      `:o.qy`
                        <div
                          style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                        >
                          ${(0,h.kg)("editor.bar.minimal.enable_toggle",m,"Enable the toggle above to configure icon settings")}
                        </div>
                      `}
                </div>
              `:""}

        <!-- Percentage Text Display Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;">
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px; margin: 0;"
            >
              ${(0,h.kg)("editor.bar.text_display.title",m,"Text Display")}
            </div>
            <ha-switch
              .checked=${!1!==g.show_percentage}
              @change=${e=>n({show_percentage:e.target.checked})}
            ></ha-switch>
          </div>
          <div
            class="field-description"
            style="font-size: 13px; font-weight: 400; margin-bottom: 16px;"
          >
            ${(0,h.kg)("editor.bar.text_display.desc",m,"Control the visibility and appearance of text values shown directly on the bar. For difference and template modes, you can choose to display raw entity values instead of percentages.")}
          </div>

          

          ${!1!==g.show_percentage?o.qy`
                  <!-- Display Type Toggle - Only show for difference and template types -->
                  ${"difference"===g.percentage_type||"template"===g.percentage_type?o.qy`
                        <div
                          class="field-group"
                          style="margin-bottom: 16px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                        >
                          <div
                            class="field-title"
                            style="font-size: 16px !important; font-weight: 600 !important; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                          >
                            ${(0,h.kg)("editor.bar.text_display.show_value",m,"Show Value Instead of Percentage")}
                          </div>
                          <ha-switch
                            style="justify-self: end;"
                            .checked=${g.show_value||!1}
                            @change=${e=>n({show_value:e.target.checked})}
                          ></ha-switch>
                        </div>
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
                        >
                          ${(0,h.kg)("editor.bar.text_display.show_value_desc",m,'When enabled, shows the actual entity value instead of percentage. Useful for displaying raw sensor values like "45 kWh" instead of "75%".')}
                        </div>
                      `:""}

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,h.kg)("editor.bar.text_display.text_size",m,"Text Size")}
                    </div>
                    <div class="field-description">
                      ${(0,h.kg)("editor.bar.text_display.text_size_desc",m,"Adjust the size of the text displayed on the bar.")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${g.percentage_text_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);n({percentage_text_size:i})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        step="1"
                        .value="${g.percentage_text_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({percentage_text_size:i})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||14,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(32,i+o));n({percentage_text_size:a})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>n({percentage_text_size:14})}
                        title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                  <div class="field-group" style="margin-bottom: 16px;">
                    <div class="field-title">
                      ${(0,h.kg)("editor.bar.text_display.text_alignment",m,"Text Alignment")}
                    </div>
                    ${this.renderUcForm(t,{percentage_text_alignment:g.percentage_text_alignment||"center"},[this.selectField("percentage_text_alignment",[{value:"left",label:(0,h.kg)("editor.common.left",m,"Left")},{value:"center",label:(0,h.kg)("editor.common.center",m,"Center")},{value:"right",label:(0,h.kg)("editor.common.right",m,"Right")}])],(e=>{const t=e.detail.value.percentage_text_alignment;t!==(g.percentage_text_alignment||"center")&&(n({percentage_text_alignment:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
                  </div>

                  <!-- Text Color -->
                  <div class="field-container" style="margin-bottom: 16px;">
                    <div class="field-title">
                      ${(0,h.kg)("editor.bar.colors.text_color",m,"Text Color")}
                    </div>
                    <div class="field-description">
                      ${(0,h.kg)("editor.bar.colors.text_color_desc",m,"Choose the color for the text displayed on the bar.")}
                    </div>
                    <ultra-color-picker
                      style="width: 100%;"
                      .value=${g.percentage_text_color||""}
                      .defaultValue=${"var(--primary-text-color)"}
                      .hass=${t}
                      @value-changed=${e=>n({percentage_text_color:e.detail.value})}
                    ></ultra-color-picker>
                  </div>
                `:""}
        </div>

        <!-- Left Side Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
          >
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px;"
            >
              ${(0,h.kg)("editor.bar.left.title",m,"Left Side")}
            </div>
            <ha-switch
              .checked=${g.left_enabled||!1}
              @change=${e=>{const t=e.target.checked;n(t?{left_enabled:!0,left_title:g.left_title||"Fuel",left_entity:g.left_entity||"",left_template_mode:g.left_template_mode||!1,left_title_size:g.left_title_size||14,left_value_size:g.left_value_size||14,left_title_color:g.left_title_color||"var(--primary-text-color)",left_value_color:g.left_value_color||"var(--primary-text-color)"}:{left_enabled:!1,left_title:"",left_entity:"",left_template_mode:!1,left_template:""})}}
            ></ha-switch>
          </div>

          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,h.kg)("editor.bar.left.desc",m,"Configure the title and entity value displayed on the left side of the bar. This is useful for showing labels like 'Range' or 'Battery' along with their values.")}
          </div>

          ${g.left_enabled?o.qy`
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{left_title:g.left_title||""}}
                      .schema=${[{name:"left_title",selector:{text:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>n({left_title:e.detail.value.left_title})}
                    ></ha-form>
                  </div>

                  <!-- Left Entity (value source) -->
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{left_entity:g.left_entity||""}}
                      .schema=${[{name:"left_entity",selector:{entity:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>n({left_entity:e.detail.value.left_entity})}
                    ></ha-form>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,h.kg)("editor.bar.left.title_size",m,"Title Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${g.left_title_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);n({left_title_size:i})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        step="1"
                        .value="${g.left_title_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({left_title_size:i})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||14,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(32,i+o));n({left_title_size:a})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>n({left_title_size:14})}
                        title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,h.kg)("editor.bar.left.value_size",m,"Value Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${g.left_value_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);n({left_value_size:i})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        step="1"
                        .value="${g.left_value_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({left_value_size:i})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||14,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(32,i+o));n({left_value_size:a})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>n({left_value_size:14})}
                        title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                  <!-- Left Template Mode -->
                  <div
                    class="field-group"
                    style="margin-bottom: 8px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                  >
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                    >
                      ${(0,h.kg)("editor.bar.left.template_mode",m,"Template Mode")}
                    </div>
                    <ha-switch
                      style="justify-self: end;"
                      .checked=${g.left_template_mode||!1}
                      @change=${e=>n({left_template_mode:e.target.checked})}
                    ></ha-switch>
                  </div>
                  ${g.left_template_mode?o.qy`
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                        >
                          ${(0,h.kg)("editor.bar.left.template_desc",m,"Use a template to format the displayed value. Templates use Home Assistant's Jinja2 syntax.")}
                        </div>
                        <div class="field-group" style="margin-bottom: 0;">
                          <ha-form
                            .hass=${t}
                            .data=${{left_template:g.left_template||""}}
                            .schema=${[{name:"left_template",label:(0,h.kg)("editor.bar.left.value_template",m,"Value Template"),description:(0,h.kg)("editor.bar.left.value_template_desc",m,"Template to format the left-side value using Jinja2 syntax"),selector:{text:{multiline:!0}}}]}
                            .computeLabel=${e=>e.label||e.name}
                            .computeDescription=${e=>e.description||""}
                            @value-changed=${e=>{n({left_template:e.detail.value.left_template})}}
                          ></ha-form>
                        </div>
                      `:""}
                `:o.qy`
                  <div
                    style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                  >
                    ${(0,h.kg)("editor.bar.left.enable_toggle",m,"Enable the toggle above to configure left side settings")}
                  </div>
                `}
        </div>

        <!-- Right Side Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
          >
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px;"
            >
              ${(0,h.kg)("editor.bar.right.title",m,"Right Side")}
            </div>
            <ha-switch
              .checked=${g.right_enabled||!1}
              @change=${e=>{const t=e.target.checked;n(t?{right_enabled:!0,right_title:g.right_title||"Range",right_entity:g.right_entity||"",right_template_mode:g.right_template_mode||!1,right_title_size:g.right_title_size||14,right_value_size:g.right_value_size||14,right_title_color:g.right_title_color||"var(--primary-text-color)",right_value_color:g.right_value_color||"var(--primary-text-color)"}:{right_enabled:!1,right_title:"",right_entity:"",right_template_mode:!1,right_template:""})}}
            ></ha-switch>
          </div>

          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,h.kg)("editor.bar.right.desc",m,"Configure the title and entity value displayed on the right side of the bar. This is ideal for complementary information like 'Time to Full' or secondary measurements.")}
          </div>

          ${g.right_enabled?o.qy`
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{right_title:g.right_title||""}}
                      .schema=${[{name:"right_title",selector:{text:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>n({right_title:e.detail.value.right_title})}
                    ></ha-form>
                  </div>
                  <div class="field-group" style="margin-bottom: 16px;">
                    <ha-form
                      .hass=${t}
                      .data=${{right_entity:g.right_entity||""}}
                      .schema=${[{name:"right_entity",selector:{entity:{}},label:""}]}
                      .computeLabel=${()=>""}
                      @value-changed=${e=>n({right_entity:e.detail.value.right_entity})}
                    ></ha-form>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,h.kg)("editor.bar.right.title_size",m,"Title Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${g.right_title_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);n({right_title_size:i})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        step="1"
                        .value="${g.right_title_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({right_title_size:i})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||14,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(32,i+o));n({right_title_size:a})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>n({right_title_size:14})}
                        title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>

                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,h.kg)("editor.bar.right.value_size",m,"Value Size")}
                    </div>
                    <div class="number-range-control">
                      <input
                        type="range"
                        class="range-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${g.right_value_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);n({right_value_size:i})}}
                      />
                      <input
                        type="number"
                        class="range-input"
                        min="8"
                        step="1"
                        .value="${g.right_value_size||14}"
                        @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({right_value_size:i})}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||14,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(32,i+o));n({right_value_size:a})}}}
                      />
                      <button
                        class="range-reset-btn"
                        @click=${()=>n({right_value_size:14})}
                        title="${(0,h.kg)("editor.fields.reset_default_value",m,"Reset to default ({value})").replace("{value}","14")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                  <div
                    class="field-group"
                    style="margin-bottom: 8px; display: grid !important; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px; width: 100%;"
                  >
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                    >
                      ${(0,h.kg)("editor.bar.right.template_mode",m,"Template Mode")}
                    </div>
                    <ha-switch
                      style="justify-self: end;"
                      .checked=${g.right_template_mode||!1}
                      @change=${e=>n({right_template_mode:e.target.checked})}
                    ></ha-switch>
                  </div>
                  ${g.right_template_mode?o.qy`
                        <div
                          class="field-description"
                          style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 8px;"
                        >
                          ${(0,h.kg)("editor.bar.right.template_desc",m,"Use a template to format the displayed value. Templates use Home Assistant's Jinja2 syntax.")}
                        </div>
                        <div class="field-group" style="margin-bottom: 0;">
                          <div
                            class="field-title"
                            style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                          >
                            ${(0,h.kg)("editor.bar.right.value_template",m,"Value Template")}
                          </div>
                          <div
                            class="field-description"
                            style="font-size: 12px; margin-bottom: 8px; color: var(--secondary-text-color);"
                          >
                            ${(0,h.kg)("editor.bar.right.value_template_desc",m,"Template to format the right-side value using Jinja2 syntax")}
                          </div>
                          <ultra-template-editor
                            .hass=${t}
                            .value=${g.right_template||""}
                            .placeholder=${"{{ states('sensor.example') }}"}
                            .minHeight=${100}
                            .maxHeight=${300}
                            @value-changed=${e=>n({right_template:e.detail.value})}
                          ></ultra-template-editor>
                        </div>
                      `:""}
                `:o.qy`
                  <div
                    style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                  >
                    ${(0,h.kg)("editor.bar.right.enable_toggle",m,"Enable the toggle above to configure right side settings")}
                  </div>
                `}
        </div>

        <!-- Colors Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            ${(0,h.kg)("editor.bar.colors.title",m,"Colors")}
          </div>

          
          <div class="field-group" style="margin-bottom: 24px;">
            <div
              class="colors-grid"
              style="display: grid; grid-template-columns: 1fr; gap: 16px;"
            >
              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,h.kg)("editor.bar.colors.bar_color",m,"Bar Color")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${g.bar_color||""}
                  .defaultValue=${"var(--primary-color)"}
                  .hass=${t}
                  @value-changed=${e=>n({bar_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,h.kg)("editor.bar.colors.background_color",m,"Background Color")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${g.bar_background_color||""}
                  .defaultValue=${"transparent"}
                  .hass=${t}
                  @value-changed=${e=>n({bar_background_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,h.kg)("editor.bar.colors.border_color",m,"Border Color")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${g.bar_border_color||""}
                  .defaultValue=${"var(--divider-color)"}
                  .hass=${t}
                  @value-changed=${e=>n({bar_border_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="color-item">
                <div
                  class="field-title"
                  style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                >
                  ${(0,h.kg)("editor.bar.colors.limit_indicator",m,"Limit Indicator")}
                </div>
                <ultra-color-picker style="width: 100%;"
                  .value=${g.limit_color||""}
                  .defaultValue=${"var(--warning-color)"}
                  .hass=${t}
                  @value-changed=${e=>n({limit_color:e.detail.value})}
                ></ultra-color-picker>
              </div>


              ${"minimal"===g.bar_style?o.qy`
                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,h.kg)("editor.bar.colors.dot_color",m,"Dot Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${g.dot_color||""}
                          .defaultValue=${"var(--primary-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({dot_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>
                    `:""}
            </div>
          </div>

          <!-- Minimal Style Icon Configuration -->
          ${"minimal"===g.bar_style?o.qy`
                  <div class="field-group" style="margin-top: 24px;">
                    <div
                      style="display: grid; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px;"
                    >
                      <div class="field-title">
                        ${(0,h.kg)("editor.bar.minimal.icon_enabled",m,"Enable Icon")}
                      </div>
                      <ha-switch
                        .checked=${g.minimal_icon_enabled||!1}
                        @change=${e=>n({minimal_icon_enabled:e.target.checked})}
                      ></ha-switch>
                    </div>
                    <div class="field-description">
                      ${(0,h.kg)("editor.bar.minimal.icon_enabled_desc",m,"Show an icon on the minimal bar indicator")}
                    </div>
                  </div>

                  ${g.minimal_icon_enabled?o.qy`
                        <!-- Icon Selection -->
                        <div class="field-group" style="margin-top: 16px;">
                          ${this.renderFieldSection((0,h.kg)("editor.bar.minimal.icon",m,"Icon"),(0,h.kg)("editor.bar.minimal.icon_desc",m,"Choose an icon to display (e.g., mdi:battery)"),t,{minimal_icon:g.minimal_icon||""},[this.iconField("minimal_icon")],(e=>n(e.detail.value)))}
                        </div>

                        <!-- Icon Display Mode -->
                        <div class="field-group" style="margin-top: 16px;">
                          ${this.renderFieldSection((0,h.kg)("editor.bar.minimal.icon_mode",m,"Display Mode"),(0,h.kg)("editor.bar.minimal.icon_mode_desc",m,"How to display the icon"),t,{minimal_icon_mode:g.minimal_icon_mode||"icon-in-dot"},[this.selectField("minimal_icon_mode",[{value:"dot-only",label:(0,h.kg)("editor.bar.minimal.mode_dot_only",m,"Dot Only")},{value:"icon-only",label:(0,h.kg)("editor.bar.minimal.mode_icon_only",m,"Icon Only")},{value:"icon-in-dot",label:(0,h.kg)("editor.bar.minimal.mode_icon_in_dot",m,"Icon in Dot")}])],(e=>{n(e.detail.value),setTimeout((()=>this.triggerPreviewUpdate()),50)}))}
                        </div>

                        <!-- Icon Size Controls -->
                        <div class="field-group" style="margin-top: 16px;">
                          <div
                            style="display: grid; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px;"
                          >
                            <div class="field-title">
                              ${(0,h.kg)("editor.bar.minimal.icon_size_auto",m,"Auto-Scale Icon")}
                            </div>
                            <ha-switch
                              .checked=${!1!==g.minimal_icon_size_auto}
                              @change=${e=>n({minimal_icon_size_auto:e.target.checked})}
                            ></ha-switch>
                          </div>
                          <div class="field-description">
                            ${(0,h.kg)("editor.bar.minimal.icon_size_auto_desc",m,"Automatically scale icon with bar height")}
                          </div>
                        </div>

                        ${!1===g.minimal_icon_size_auto?o.qy`
                              <div class="field-container" style="margin-top: 16px;">
                                <div class="field-title">
                                  ${(0,h.kg)("editor.bar.minimal.icon_size",m,"Icon Size")}
                                </div>
                                <div class="field-description">
                                  ${(0,h.kg)("editor.bar.minimal.icon_size_desc",m,"Custom icon size in pixels")}
                                </div>
                                <div class="number-range-control">
                                  <input
                                    type="range"
                                    class="range-slider"
                                    min="8"
                                    max="48"
                                    step="2"
                                    .value="${g.minimal_icon_size||24}"
                                    @input=${e=>n({minimal_icon_size:parseInt(e.target.value)})}
                                  />
                                  <input
                                    type="number"
                                    class="range-input"
                                    min="8"
                                    step="2"
                                    .value="${g.minimal_icon_size||24}"
                                    @input=${e=>{const t=parseInt(e.target.value);isNaN(t)||n({minimal_icon_size:t})}}
                                  />
                                  <button
                                    class="range-reset-btn"
                                    @click=${()=>n({minimal_icon_size:24})}
                                  >
                                    <ha-icon icon="mdi:refresh"></ha-icon>
                                  </button>
                                </div>
                              </div>
                            `:""}

                        <!-- Icon Color Controls -->
                        <div class="field-group" style="margin-top: 16px;">
                          <div
                            style="display: grid; grid-template-columns: minmax(0,1fr) auto; align-items: center; column-gap: 12px;"
                          >
                            <div class="field-title">
                              ${(0,h.kg)("editor.bar.minimal.use_dot_color",m,"Use Dot Color")}
                            </div>
                            <ha-switch
                              .checked=${!1!==g.minimal_icon_use_dot_color}
                              @change=${e=>n({minimal_icon_use_dot_color:e.target.checked})}
                            ></ha-switch>
                          </div>
                          <div class="field-description">
                            ${(0,h.kg)("editor.bar.minimal.use_dot_color_desc",m,"Use the dot color for the icon (matches gradient)")}
                          </div>
                        </div>

                        ${!1===g.minimal_icon_use_dot_color?o.qy`
                              <div class="field-container" style="margin-top: 16px;">
                                <div class="field-title">
                                  ${(0,h.kg)("editor.bar.minimal.icon_color",m,"Icon Color")}
                                </div>
                                <div class="field-description">
                                  ${(0,h.kg)("editor.bar.minimal.icon_color_desc",m,"Custom color for the icon")}
                                </div>
                                <ultra-color-picker
                                  style="width: 100%;"
                                  .value=${g.minimal_icon_color||""}
                                  .defaultValue=${"var(--primary-color)"}
                                  .hass=${t}
                                  @value-changed=${e=>n({minimal_icon_color:e.detail.value})}
                                ></ultra-color-picker>
                              </div>
                            `:""}
                      `:""}
                `:""}

          <!-- Left Side Colors -->
          ${g.left_enabled?o.qy`
                  <div class="field-group" style="margin-bottom: 24px;">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px; color: var(--primary-color);"
                    >
                      ${(0,h.kg)("editor.bar.colors.left_side",m,"Left Side Colors")}
                    </div>
                    <div
                      class="colors-grid"
                      style="display: grid; grid-template-columns: 1fr; gap: 16px;"
                    >
                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,h.kg)("editor.bar.colors.title_color",m,"Title Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${g.left_title_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({left_title_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>

                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,h.kg)("editor.bar.colors.value_color",m,"Value Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${g.left_value_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({left_value_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>
                    </div>
                  </div>
                `:""}

          <!-- Right Side Colors -->
          ${g.right_enabled?o.qy`
                  <div class="field-group">
                    <div
                      class="field-title"
                      style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px; color: var(--primary-color);"
                    >
                      ${(0,h.kg)("editor.bar.colors.right_side",m,"Right Side Colors")}
                    </div>
                    <div
                      class="colors-grid"
                      style="display: grid; grid-template-columns: 1fr; gap: 16px;"
                    >
                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,h.kg)("editor.bar.colors.title_color",m,"Title Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${g.right_title_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({right_title_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>

                      <div class="color-item">
                        <div
                          class="field-title"
                          style="font-size: 14px !important; font-weight: 600 !important; margin-bottom: 8px;"
                        >
                          ${(0,h.kg)("editor.bar.colors.value_color",m,"Value Color")}
                        </div>
                        <ultra-color-picker
                          style="width: 100%;"
                          .value=${g.right_value_color||""}
                          .defaultValue=${"var(--primary-text-color)"}
                          .hass=${t}
                          @value-changed=${e=>n({right_value_color:e.detail.value})}
                        ></ultra-color-picker>
                      </div>
                    </div>
                  </div>
                `:""}
        </div>

        <!-- Gradient Mode -->
        <div class="settings-section" style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;">
          <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px;">
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px; margin: 0;"
            >
              ${(0,h.kg)("editor.bar.gradient.title",m,"Gradient Mode")}
            </div>
            <ha-switch
              .checked=${g.use_gradient||!1}
              @change=${e=>{const t=e.target.checked,i={use_gradient:t};!t||g.gradient_stops&&0!==g.gradient_stops.length||(i.gradient_stops=(0,d.FB)(),i.gradient_display_mode=g.gradient_display_mode||"full"),n(i)}}
            ></ha-switch>
          </div>

          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px;"
          >
            ${(0,h.kg)("editor.bar.gradient.desc",m,"Apply a color gradient to the bar fill. When enabled, choose how the gradient is displayed and customize the color stops below.")}
          </div>

          ${g.use_gradient?o.qy`
                  <div class="field-group" style="margin-bottom: 12px;">
                    ${this.renderUcForm(t,{gradient_display_mode:g.gradient_display_mode||"full"},[this.selectField("gradient_display_mode",[{value:"full",label:(0,h.kg)("editor.bar.gradient.full",m,"Full")},{value:"cropped",label:(0,h.kg)("editor.bar.gradient.cropped",m,"Cropped")},{value:"value-based",label:(0,h.kg)("editor.bar.gradient.value_based",m,"Value-Based")}])],(e=>{const t=e.detail.value.gradient_display_mode;t!==(g.gradient_display_mode||"full")&&(n({gradient_display_mode:t}),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}),!1)}
                  </div>
                  <uc-gradient-editor
                    .stops=${g.gradient_stops||(0,d.FB)()}
                    .barSize=${this.getBarSizeFromHeight(null!==(u=g.height)&&void 0!==u?u:20)}
                    .barRadius=${this.getBarRadiusFromStyle(g.border_radius||10)}
                    .barStyle=${g.bar_style||"flat"}
                    @gradient-changed=${e=>{n({gradient_stops:e.detail.stops})}}
                  ></uc-gradient-editor>
                `:""}
        </div>

        <!-- Bar Animation -->
        <div class="settings-section" style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 16px;">
          <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 12px;">
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px; margin: 0;"
            >
              ${(0,h.kg)("editor.bar.animation.title",m,"Bar Animation")}
            </div>
            <ha-switch
              .checked=${g.bar_animation_enabled||!1}
              @change=${e=>n({bar_animation_enabled:e.target.checked})}
            ></ha-switch>
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px;"
          >
            ${(0,h.kg)("editor.bar.animation.desc",m,"Animate the bar fill using presets like charging stripes, pulse, shimmer, and more. You can trigger animations based on an entity's state or attribute, and optionally override the animation when another condition is met.")}
          </div>
          ${g.bar_animation_enabled?o.qy`
                  ${this.renderSettingsSection((0,h.kg)("editor.bar.animation.trigger.title",m,"Animation Trigger"),(0,h.kg)("editor.bar.animation.trigger.desc",m,"Select an entity to watch and define the value + animation to apply when it matches."),[{title:(0,h.kg)("editor.common.entity",m,"Entity"),description:(0,h.kg)("editor.bar.animation.trigger.entity_desc",m,"Entity to evaluate for animation trigger"),hass:t,data:{bar_animation_entity:g.bar_animation_entity||""},schema:[this.entityField("bar_animation_entity")],onChange:e=>n({bar_animation_entity:e.detail.value.bar_animation_entity})},{title:(0,h.kg)("editor.bar.animation.trigger.type",m,"Trigger Type"),description:(0,h.kg)("editor.bar.animation.trigger.type_desc",m,"Choose whether to compare the entity state or an attribute"),hass:t,data:{bar_animation_trigger_type:g.bar_animation_trigger_type||"state"},schema:[this.selectField("bar_animation_trigger_type",[{value:"state",label:(0,h.kg)("editor.common.state",m,"State")},{value:"attribute",label:(0,h.kg)("editor.common.attribute",m,"Attribute")}])],onChange:e=>n(e.detail.value)},..."attribute"===(g.bar_animation_trigger_type||"state")?[{title:(0,h.kg)("editor.common.attribute_name",m,"Attribute Name"),description:(0,h.kg)("editor.bar.animation.trigger.attribute_name_desc",m,"Name of the attribute to compare (e.g., charging_status)"),hass:t,data:{bar_animation_attribute:g.bar_animation_attribute||""},schema:[this.textField("bar_animation_attribute")],onChange:e=>n({bar_animation_attribute:e.detail.value.bar_animation_attribute})}]:[],...(g.bar_animation_entity||"").trim()?[{title:(0,h.kg)("editor.bar.animation.trigger.match_value",m,"Match Value"),description:(0,h.kg)("editor.bar.animation.trigger.match_value_desc",m,"Text to compare against the state or attribute (comparison is string-based)."),hass:t,data:{bar_animation_value:g.bar_animation_value||""},schema:[this.textField("bar_animation_value")],onChange:e=>n({bar_animation_value:e.detail.value.bar_animation_value})}]:[],{title:(0,h.kg)("editor.bar.animation.type",m,"Animation Type"),description:(0,h.kg)("editor.bar.animation.type_desc",m,"Select how the bar should animate when triggered."),hass:t,data:{bar_animation_type:g.bar_animation_type||"none"},schema:[this.selectField("bar_animation_type",[{value:"none",label:(0,h.kg)("editor.common.none",m,"None")},{value:"charging",label:(0,h.kg)("editor.bar.animation.types.charging",m,"Charging (Diagonal Lines)")},{value:"pulse",label:(0,h.kg)("editor.bar.animation.types.pulse",m,"Pulse")},{value:"blinking",label:(0,h.kg)("editor.bar.animation.types.blinking",m,"Blinking")},{value:"bouncing",label:(0,h.kg)("editor.bar.animation.types.bouncing",m,"Bouncing")},{value:"glow",label:(0,h.kg)("editor.bar.animation.types.glow",m,"Glow")},{value:"rainbow",label:(0,h.kg)("editor.bar.animation.types.rainbow",m,"Rainbow")},{value:"bubbles",label:(0,h.kg)("editor.bar.animation.types.bubbles",m,"Bubbles")},{value:"fill",label:(0,h.kg)("editor.bar.animation.types.fill",m,"Fill")},{value:"ripple",label:(0,h.kg)("editor.bar.animation.types.ripple",m,"Ripple")},{value:"traffic",label:(0,h.kg)("editor.bar.animation.types.traffic",m,"Traffic (Barber Pole)")},{value:"heartbeat",label:(0,h.kg)("editor.bar.animation.types.heartbeat",m,"Heartbeat")},{value:"flicker",label:(0,h.kg)("editor.bar.animation.types.flicker",m,"Flicker")},{value:"shimmer",label:(0,h.kg)("editor.bar.animation.types.shimmer",m,"Shimmer")},{value:"vibrate",label:(0,h.kg)("editor.bar.animation.types.vibrate",m,"Vibrate")}])],onChange:e=>n(e.detail.value)}])}
                  ${this.renderSettingsSection((0,h.kg)("editor.bar.animation.override.title",m,"Action Animation Override"),(0,h.kg)("editor.bar.animation.override.desc",m,"Select an Action Entity and state to define when this animation should override the regular animation"),[{title:(0,h.kg)("editor.common.entity",m,"Entity"),description:(0,h.kg)("editor.bar.animation.override.entity_desc",m,"Entity to evaluate for the override trigger"),hass:t,data:{bar_animation_override_entity:g.bar_animation_override_entity||""},schema:[this.entityField("bar_animation_override_entity")],onChange:e=>n({bar_animation_override_entity:e.detail.value.bar_animation_override_entity})},{title:(0,h.kg)("editor.bar.animation.trigger.type",m,"Trigger Type"),description:(0,h.kg)("editor.bar.animation.override.type_desc",m,"Compare the entity state or one of its attributes"),hass:t,data:{bar_animation_override_trigger_type:g.bar_animation_override_trigger_type||"state"},schema:[this.selectField("bar_animation_override_trigger_type",[{value:"state",label:(0,h.kg)("editor.common.state",m,"State")},{value:"attribute",label:(0,h.kg)("editor.common.attribute",m,"Attribute")}])],onChange:e=>{e.detail.value.bar_animation_override_trigger_type!==(g.bar_animation_override_trigger_type||"state")&&n(e.detail.value)}},..."attribute"===(g.bar_animation_override_trigger_type||"state")?[{title:(0,h.kg)("editor.common.attribute_name",m,"Attribute Name"),description:(0,h.kg)("editor.bar.animation.override.attribute_name_desc",m,"Name of the attribute to compare"),hass:t,data:{bar_animation_override_attribute:g.bar_animation_override_attribute||""},schema:[this.textField("bar_animation_override_attribute")],onChange:e=>n({bar_animation_override_attribute:e.detail.value.bar_animation_override_attribute})}]:[],{title:(0,h.kg)("editor.bar.animation.override.match_value",m,"Override Match Value"),description:(0,h.kg)("editor.bar.animation.override.match_value_desc",m,"String comparison against state or attribute"),hass:t,data:{bar_animation_override_value:g.bar_animation_override_value||""},schema:[this.textField("bar_animation_override_value")],onChange:e=>n({bar_animation_override_value:e.detail.value.bar_animation_override_value})},{title:(0,h.kg)("editor.bar.animation.override.type",m,"Override Animation Type"),description:(0,h.kg)("editor.bar.animation.override.type_desc",m,"Animation to use when override condition matches."),hass:t,data:{bar_animation_override_type:g.bar_animation_override_type||"none"},schema:[this.selectField("bar_animation_override_type",[{value:"none",label:(0,h.kg)("editor.common.none",m,"None")},{value:"charging",label:(0,h.kg)("editor.bar.animation.types.charging",m,"Charging (Diagonal Lines)")},{value:"pulse",label:(0,h.kg)("editor.bar.animation.types.pulse",m,"Pulse")},{value:"blinking",label:(0,h.kg)("editor.bar.animation.types.blinking",m,"Blinking")},{value:"bouncing",label:(0,h.kg)("editor.bar.animation.types.bouncing",m,"Bouncing")},{value:"glow",label:(0,h.kg)("editor.bar.animation.types.glow",m,"Glow")},{value:"rainbow",label:(0,h.kg)("editor.bar.animation.types.rainbow",m,"Rainbow")},{value:"bubbles",label:(0,h.kg)("editor.bar.animation.types.bubbles",m,"Bubbles")},{value:"fill",label:(0,h.kg)("editor.bar.animation.types.fill",m,"Fill")},{value:"ripple",label:(0,h.kg)("editor.bar.animation.types.ripple",m,"Ripple")},{value:"traffic",label:(0,h.kg)("editor.bar.animation.types.traffic",m,"Traffic (Barber Pole)")},{value:"heartbeat",label:(0,h.kg)("editor.bar.animation.types.heartbeat",m,"Heartbeat")},{value:"flicker",label:(0,h.kg)("editor.bar.animation.types.flicker",m,"Flicker")},{value:"shimmer",label:(0,h.kg)("editor.bar.animation.types.shimmer",m,"Shimmer")},{value:"vibrate",label:(0,h.kg)("editor.bar.animation.types.vibrate",m,"Vibrate")}])],onChange:e=>n(e.detail.value)}])}
                `:""}
        </div>

        <!-- Action Animation Override removed as standalone: now included inside Bar Animation section above -->
      </div>
    `}renderActionsTab(e,t,i,o){return r.A.render(e,t,(e=>o(e)))}renderPreview(e,t,n,a){var r,s,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I,j,M,D,B;const R=e;let U=0;const H=e=>Math.min(Math.max(e,0),100),J=!(R.entity&&(null==t?void 0:t.states[R.entity])),Q=R.percentage_type||"entity";if("template"===Q&&R.percentage_template){if(!this._templateService&&t&&(this._templateService=new p.I(t)),t){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=R.percentage_template,i=`bar_percentage_${R.id}_${this._hashString(e)}`;this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(e,i,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const o=null===(r=t.__uvc_template_strings)||void 0===r?void 0:r[i];if(void 0!==o){const e=parseFloat(String(o));isNaN(e)||(U=H(e<=1?100*e:e))}}}else if("attribute"===Q){const e=R.percentage_attribute_entity||R.entity,i=R.percentage_attribute_name||"",o=e?null==t?void 0:t.states[e]:void 0,n=i?null===(s=null==o?void 0:o.attributes)||void 0===s?void 0:s[i]:void 0,a=(null===(h=null==o?void 0:o.attributes)||void 0===h?void 0:h.unit_of_measurement)||"",r=parseFloat(String(null!=n?n:"0"));if(!isNaN(r))if("%"===a||String(n).toString().trim().endsWith("%"))U=H(r);else if(null===(g=null==o?void 0:o.attributes)||void 0===g?void 0:g.max){const e=parseFloat(String(o.attributes.max));U=e>0?H(r/e*100):0}else U=H(r)}else if("difference"===Q){const e=R.percentage_current_entity,i=R.percentage_total_entity,o=e?parseFloat(String(null!==(f=null===(m=null==t?void 0:t.states[e])||void 0===m?void 0:m.state)&&void 0!==f?f:"0")):0,n=i?parseFloat(String(null!==(v=null===(_=null==t?void 0:t.states[i])||void 0===_?void 0:_.state)&&void 0!==v?v:"0")):0;U=n>0?H(o/n*100):0}else{const e=null==t?void 0:t.states[R.entity];let i=0,o=100,n="";e&&(i=parseFloat(e.state)||0,n=(null===(b=e.attributes)||void 0===b?void 0:b.unit_of_measurement)||"",(null===(y=e.attributes)||void 0===y?void 0:y.max)?o=parseFloat(e.attributes.max):("%"===n||"battery"===(null===(x=e.attributes)||void 0===x?void 0:x.device_class))&&(o=100)),U=H(i/o*100)}J&&(U=65);let N="";if(R.left_template_mode&&R.left_template&&(!this._templateService&&t&&(this._templateService=new p.I(t)),t)){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=this._hashString(R.left_template),i=`bar_left_${R.id}_${e}`;this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(R.left_template,i,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const o=null===(k=t.__uvc_template_strings)||void 0===k?void 0:k[i];void 0!==o&&""!==String(o).trim()&&(N=String(o))}if(!N&&R.left_entity&&(null==t?void 0:t.states[R.left_entity])){const e=t.states[R.left_entity];try{N=(0,c.formatEntityState)(t,R.left_entity,{includeUnit:!0})}catch(t){N=`${e.state}${(null===(w=e.attributes)||void 0===w?void 0:w.unit_of_measurement)||""}`}}let L="";if(R.right_template_mode&&R.right_template&&(!this._templateService&&t&&(this._templateService=new p.I(t)),t)){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=this._hashString(R.right_template),i=`bar_right_${R.id}_${e}`;this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(R.right_template,i,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const o=null===(S=t.__uvc_template_strings)||void 0===S?void 0:S[i];void 0!==o&&""!==String(o).trim()&&(L=String(o))}if(!L&&R.right_entity&&(null==t?void 0:t.states[R.right_entity])){const e=t.states[R.right_entity];try{L=(0,c.formatEntityState)(t,R.right_entity,{includeUnit:!0})}catch(t){L=`${e.state}${(null===(O=e.attributes)||void 0===O?void 0:O.unit_of_measurement)||""}`}}let F=0;if(R.limit_entity&&(null==t?void 0:t.states[R.limit_entity])){const e=t.states[R.limit_entity],i=parseFloat(e.state)||0,o=100;F=Math.min(Math.max(i/o*100,0),100)}const q=R,V=R.design||{},K=V.background_color||q.background_color||"transparent",G=V.width||q.width||"100%",Z=R.bar_background_color||"transparent";let Y=null!==(A=R.height)&&void 0!==A?A:20;if("minimal"===R.bar_style){const e=Math.max(1,Math.floor(Y/3)),t=Math.max(8,Math.min(24,3*e+6));Y=Math.max(Y,t+8)}const W=`${Y}px`;let X=Y;(R.left_enabled||R.right_enabled)&&(X+=Math.max(R.left_title_size||14,R.left_value_size||14,R.right_title_size||14,R.right_value_size||14)+16);const ee=`${X}px`,te=null!==($=null!==(C=R.border_radius)&&void 0!==C?C:V.border_radius)&&void 0!==$?$:10,ie="string"==typeof te?parseInt(te,10)||10:te;let oe=R.bar_color||q.color||"var(--primary-color)";const ne=e=>{if(!e)return e;const t=String(e).trim();if(t.startsWith("#")||t.startsWith("rgb"))return t;try{const e=document.createElement("span");e.style.color=t,document.body.appendChild(e);const i=getComputedStyle(e).color;return e.remove(),i&&"rgba(0, 0, 0, 0)"!==i?i:t}catch(e){return t}},ae=(e,t)=>{const i=[...e].sort(((e,t)=>e.position-t.position));let o=i[0],n=i[i.length-1];for(let e=0;e<i.length-1;e++)if(t>=i[e].position&&t<=i[e+1].position){o=i[e],n=i[e+1];break}if(o.position===t)return o.color;if(n.position===t)return n.color;const a=n.position-o.position,r=0===a?0:(t-o.position)/a,s=e=>{const t=ne(e);if(!t)return null;if(t.startsWith("#"))return t;const i=t.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})(?:\s*,\s*([0-9.]+))?\s*\)/i);if(i){const e=Math.max(0,Math.min(255,parseInt(i[1],10))),t=Math.max(0,Math.min(255,parseInt(i[2],10))),o=Math.max(0,Math.min(255,parseInt(i[3],10)));return this.rgbToHex(e,t,o)}return null},l=s(o.color),d=s(n.color);return l&&d?this.interpolateColor(l,d,r):ne(r<.5?o.color:n.color)};if(R.use_gradient){const e=R.gradient_stops&&R.gradient_stops.length>0?R.gradient_stops:(0,d.FB)(),t="right-to-left"===(R.bar_direction||"left-to-right")?"to left":"to right",i=[...e].sort(((e,t)=>e.position-t.position)).map((e=>`${ne(e.color)} ${e.position}%`)).join(", ");if("full"===R.gradient_display_mode)oe=`linear-gradient(${t}, ${i})`;else if("value-based"===R.gradient_display_mode){const t=[...e].sort(((e,t)=>e.position-t.position)),i=ae(t,U);oe=ne(i)}else{const i=[...e].sort(((e,t)=>e.position-t.position));if(U<=0){const e=i[0];oe=e?ne(e.color):oe}else{const e=i.filter((e=>e.position<=U)),o=[];if(0===e.length){const e=i[0];e&&o.push(`${e.color} 0%`,`${e.color} 100%`)}else{for(const t of e){const e=t.position/U*100,i=Math.max(0,Math.min(100,e));o.push(`${ne(t.color)} ${i}%`)}const t=ne(ae(i,U));0===o.length?o.push(`${t} 0%`,`${t} 100%`):o.push(`${t} 100%`)}oe=`linear-gradient(${t}, ${o.join(", ")})`}}}let re="",se="",le="",de="";const ce=e=>e.includes("linear-gradient")?R.bar_color||"var(--primary-color)":e;switch(ce(oe),R.bar_style){case"flat":re="box-shadow: none;";break;case"glossy":R.use_gradient?le="\n            background-image: linear-gradient(to bottom, \n              rgba(255,255,255,0.3) 0%, \n              rgba(255,255,255,0.1) 50%, \n              rgba(0,0,0,0.1) 51%, \n              rgba(0,0,0,0.05) 100%);\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.3);\n          ":se=`\n            background: linear-gradient(to bottom, ${oe}, ${oe} 50%, rgba(0,0,0,0.1) 51%, ${oe});\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.3);\n          `;break;case"embossed":re="\n          box-shadow: inset 0 1px 2px rgba(0,0,0,0.2), 0 1px 0 rgba(255,255,255,0.8);\n          border: 1px solid rgba(0,0,0,0.1);\n        ",se="\n          box-shadow: inset 0 1px 0 rgba(255,255,255,0.3), inset 0 -1px 0 rgba(0,0,0,0.1);\n        ";break;case"inset":re="\n          box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);\n          border: 1px solid rgba(0,0,0,0.2);\n        ";break;case"gradient-overlay":R.use_gradient?le="\n            background-image: linear-gradient(to bottom, \n              rgba(255,255,255,0.4) 0%, \n              rgba(255,255,255,0) 100%);\n          ":se=`\n            background: linear-gradient(to bottom, \n              ${oe} 0%, \n              rgba(255,255,255,0) 100%\n            );\n          `;break;case"neon-glow":const e=(e=>{if(e.includes("linear-gradient")&&R.use_gradient&&R.gradient_stops){const e=R.gradient_display_mode||"full";if("value-based"===e||"cropped"===e)return ae(R.gradient_stops,U);{const e=[...R.gradient_stops].sort(((e,t)=>t.position-e.position));if(e.length>0)return e[0].color}}return ce(e)})(oe);se=`\n          box-shadow: 0 0 10px ${e}, 0 0 20px ${e}, 0 0 30px ${e};\n          filter: brightness(1.2);\n        `,re="\n          box-shadow: inset 0 0 10px rgba(0,0,0,0.5);\n        ";break;case"outline":{const e=R.bar_color||"var(--primary-color)",t=Z||"rgba(255, 255, 255, 0.1)",i=4;re=`\n            border: 2px solid ${ne(e)};\n            border-radius: ${ie}px;\n            background: ${t};\n            padding: ${i}px;\n          `,se=`\n            background: ${oe};\n            border: none;\n            border-radius: ${Math.max(0,ie-i)}px;\n            position: relative;\n            margin: 0;\n            width: ${U}%;\n            transition: width 0.3s ease;\n          `}break;case"glass":{const e=.15,t=20;re=`\n            backdrop-filter: blur(${t}px) saturate(180%);\n            background: linear-gradient(\n              135deg,\n              rgba(255, 255, 255, ${.8*e}) 0%,\n              rgba(255, 255, 255, ${.4*e}) 50%,\n              rgba(255, 255, 255, ${e}) 100%\n            );\n            border: 1px solid rgba(255, 255, 255, 0.25);\n            border-radius: ${ie}px;\n            box-shadow: \n              0 8px 32px rgba(0, 0, 0, 0.1),\n              inset 0 1px 0 rgba(255, 255, 255, 0.4),\n              inset 0 -1px 0 rgba(0, 0, 0, 0.1);\n            position: relative;\n          `,R.use_gradient?le=`\n              backdrop-filter: blur(${.6*t}px) saturate(200%);\n              background: linear-gradient(\n                135deg,\n                rgba(255, 255, 255, 0.25) 0%,\n                rgba(255, 255, 255, 0.1) 30%,\n                rgba(255, 255, 255, 0.05) 70%,\n                rgba(255, 255, 255, 0.15) 100%\n              );\n              border-radius: ${Math.max(0,ie-2)}px;\n              box-shadow: \n                inset 0 1px 0 rgba(255, 255, 255, 0.5),\n                inset 0 -1px 0 rgba(0, 0, 0, 0.05);\n            `:se=`\n              backdrop-filter: blur(${.6*t}px) saturate(200%);\n              background: linear-gradient(\n                135deg,\n                rgba(255, 255, 255, 0.25) 0%,\n                rgba(255, 255, 255, 0.1) 30%,\n                rgba(255, 255, 255, 0.05) 70%,\n                rgba(255, 255, 255, 0.15) 100%\n              );\n              border-radius: ${Math.max(0,ie-2)}px;\n              box-shadow: \n                inset 0 1px 0 rgba(255, 255, 255, 0.5),\n                inset 0 -1px 0 rgba(0, 0, 0, 0.05);\n              position: relative;\n            `}break;case"metallic":R.use_gradient?le="\n            background-image: linear-gradient(to bottom, \n              rgba(255,255,255,0.4) 0%, \n              rgba(255,255,255,0) 20%, \n              rgba(255,255,255,0) 80%, \n              rgba(0,0,0,0.2) 100%);\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.5), inset 0 -1px 0 rgba(0,0,0,0.3);\n          ":se=`\n            background: linear-gradient(to bottom, \n              rgba(255,255,255,0.4) 0%, \n              ${oe} 20%, \n              ${oe} 80%, \n              rgba(0,0,0,0.2) 100%);\n            box-shadow: inset 0 1px 0 rgba(255,255,255,0.5), inset 0 -1px 0 rgba(0,0,0,0.3);\n          `;break;case"neumorphic":re="\n          box-shadow: inset 2px 2px 4px rgba(0,0,0,0.1), inset -2px -2px 4px rgba(255,255,255,0.1);\n        ",se="\n          box-shadow: 2px 2px 4px rgba(0,0,0,0.1), -2px -2px 4px rgba(255,255,255,0.1);\n        ";break;case"dashed":const t=12,i=4,o=t+i,n="right-to-left"===(R.bar_direction||"left-to-right");if(U>=99.5)se=`\n            mask-image: repeating-linear-gradient(\n              90deg,\n              black 0px,\n              black ${t}px,\n              transparent ${t}px,\n              transparent ${o}px\n            );\n            -webkit-mask-image: repeating-linear-gradient(\n              90deg,\n              black 0px,\n              black ${t}px,\n              transparent ${t}px,\n              transparent ${o}px\n            );\n            border-radius: ${n?`${ie}px 0 0 ${ie}px`:`0 ${ie}px ${ie}px 0`};\n          `;else{const e=n?"270deg":"90deg";se=`\n            mask-image: \n              repeating-linear-gradient(\n                90deg,\n                black 0px,\n                black ${t}px,\n                transparent ${t}px,\n                transparent ${o}px\n              ),\n              linear-gradient(\n                ${e},\n                black 0%,\n                black calc(100% - ${i+2}px),\n                transparent calc(100% - ${i+2}px),\n                transparent 100%\n              );\n            -webkit-mask-image: \n              repeating-linear-gradient(\n                90deg,\n                black 0px,\n                black ${t}px,\n                transparent ${t}px,\n                transparent ${o}px\n              ),\n              linear-gradient(\n                ${e},\n                black 0%,\n                black calc(100% - ${i+2}px),\n                transparent calc(100% - ${i+2}px),\n                transparent 100%\n              );\n            mask-composite: intersect;\n            -webkit-mask-composite: source-in;\n            border-radius: 0;\n          `}break;case"dots":const a=4,r=[],s=[];for(let e=10;e<=U&&e<=100;e+=10)r.push(`${e}%`),s.push(`radial-gradient(circle ${a}px at ${e}% center, ${oe} 0%, ${oe} 100%, transparent 100%)`);se=s.length>0?`\n            background-image: ${s.join(", ")};\n            background-size: 100% 100%;\n            background-repeat: no-repeat;\n          `:"background: transparent;";break;case"minimal":re="\n          background: transparent;\n          border: none;\n          box-shadow: none;\n        ",se="\n          background: transparent;\n          border: none;\n          position: relative;\n        "}const pe=R.bar_animation_type||"none";let ue=!1;if(R.bar_animation_enabled&&"none"!==pe){const e=R.bar_animation_trigger_type||"state",i=R.bar_animation_entity,o=(null!==(T=R.bar_animation_value)&&void 0!==T?T:"").toString();if(i&&""!==i.trim()&&""!==o.trim()){if(null==t?void 0:t.states[i]){const n=t.states[i];let a="";if("attribute"===e){const e=R.bar_animation_attribute||"";a=e?String(null!==(P=null===(z=n.attributes)||void 0===z?void 0:z[e])&&void 0!==P?P:""):""}else a=String(null!==(E=n.state)&&void 0!==E?E:"");ue=String(a)===o}}else ue=!0;if(ue)switch(pe){case"charging":de="bar-anim-charging";break;case"pulse":de="bar-anim-pulse";break;case"blinking":de="bar-anim-blink";break;case"bouncing":de="bar-anim-bounce";break;case"glow":de="bar-anim-glow";break;case"rainbow":de="bar-anim-rainbow";break;case"bubbles":de="bar-anim-bubbles";break;case"fill":de="bar-anim-fill";break;case"ripple":de="bar-anim-ripple";break;case"traffic":de="bar-anim-traffic";break;case"heartbeat":de="bar-anim-heartbeat";break;case"flicker":de="bar-anim-flicker";break;case"shimmer":de="bar-anim-shimmer";break;case"vibrate":de="bar-anim-vibrate"}}const he=R.bar_animation_override_type||"none";if("none"!==he&&""!==(R.bar_animation_override_entity||"").trim()){const e=R.bar_animation_override_trigger_type||"state",i=R.bar_animation_override_entity,o=(null!==(I=R.bar_animation_override_value)&&void 0!==I?I:"").toString();let n=!1;if(null==t?void 0:t.states[i]){const a=t.states[i];if("attribute"===e){const e=R.bar_animation_override_attribute||"";n=(e?String(null!==(M=null===(j=a.attributes)||void 0===j?void 0:j[e])&&void 0!==M?M:""):"")===o}else n=String(null!==(D=a.state)&&void 0!==D?D:"")===o}if(n)switch(he){case"charging":de="bar-anim-charging";break;case"pulse":de="bar-anim-pulse";break;case"blinking":de="bar-anim-blink";break;case"bouncing":de="bar-anim-bounce";break;case"glow":de="bar-anim-glow";break;case"rainbow":de="bar-anim-rainbow";break;case"bubbles":de="bar-anim-bubbles";break;case"fill":de="bar-anim-fill";break;case"ripple":de="bar-anim-ripple";break;case"traffic":de="bar-anim-traffic";break;case"heartbeat":de="bar-anim-heartbeat";break;case"flicker":de="bar-anim-flicker";break;case"shimmer":de="bar-anim-shimmer";break;case"vibrate":de="bar-anim-vibrate"}}const ge={padding:V.padding_top||V.padding_bottom||V.padding_left||V.padding_right||q.padding_top||q.padding_bottom||q.padding_left||q.padding_right?`${this.addPixelUnit(V.padding_top||q.padding_top)||"0px"} ${this.addPixelUnit(V.padding_right||q.padding_right)||"0px"} ${this.addPixelUnit(V.padding_bottom||q.padding_bottom)||"0px"} ${this.addPixelUnit(V.padding_left||q.padding_left)||"0px"}`:"0",margin:V.margin_top||V.margin_bottom||V.margin_left||V.margin_right||q.margin_top||q.margin_bottom||q.margin_left||q.margin_right?`${V.margin_top||q.margin_top||"8px"} ${V.margin_right||q.margin_right||"0px"} ${V.margin_bottom||q.margin_bottom||"8px"} ${V.margin_left||q.margin_left||"0px"}`:"8px 0",background:K,backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},q),V),t),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",border:(V.border_style||q.border_style)&&"none"!==(V.border_style||q.border_style)?`${this.addPixelUnit(V.border_width||q.border_width)||"1px"} ${V.border_style||q.border_style} ${V.border_color||q.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(V.border_radius||q.border_radius)||"0",position:V.position||q.position||"relative",top:V.top||q.top||"auto",bottom:V.bottom||q.bottom||"auto",left:V.left||q.left||"auto",right:V.right||q.right||"auto",zIndex:V.z_index||q.z_index||"auto",width:G,height:V.height||q.height||ee,maxWidth:V.max_width||q.max_width||"100%",maxHeight:V.max_height||q.max_height||"none",minWidth:V.min_width||q.min_width||"none",minHeight:V.min_height||q.min_height||"auto",overflow:V.overflow||q.overflow||"visible",boxSizing:"border-box",clipPath:V.clip_path||q.clip_path||"none",backdropFilter:V.backdrop_filter||q.backdrop_filter||"none",boxShadow:V.box_shadow_h&&V.box_shadow_v?`${V.box_shadow_h||"0"} ${V.box_shadow_v||"0"} ${V.box_shadow_blur||"0"} ${V.box_shadow_spread||"0"} ${V.box_shadow_color||"rgba(0,0,0,0.1)"}`:q.box_shadow_h&&q.box_shadow_v?`${q.box_shadow_h||"0"} ${q.box_shadow_v||"0"} ${q.box_shadow_blur||"0"} ${q.box_shadow_spread||"0"} ${q.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",color:V.color||q.color||"var(--primary-text-color)",fontFamily:V.font_family||q.font_family||"inherit",fontSize:V.font_size&&"string"==typeof V.font_size&&""!==V.font_size.trim()?/[a-zA-Z%]/.test(V.font_size)?V.font_size:`${V.font_size}px`:void 0!==q.font_size?`${q.font_size}px`:"inherit",textAlign:V.text_align||q.text_align||"inherit",lineHeight:V.line_height||q.line_height||"inherit",letterSpacing:V.letter_spacing||q.letter_spacing||"normal",textShadow:V.text_shadow_h&&V.text_shadow_v?`${V.text_shadow_h||"0"} ${V.text_shadow_v||"0"} ${V.text_shadow_blur||"0"} ${V.text_shadow_color||"rgba(0,0,0,0.25)"}`:q.text_shadow_h&&q.text_shadow_v?`${q.text_shadow_h||"0"} ${q.text_shadow_v||"0"} ${q.text_shadow_blur||"0"} ${q.text_shadow_color||"rgba(0,0,0,0.25)"}`:"none"},me=Math.max(1,Math.min(100,Number(R.bar_width||100))),fe=`${me}%`;let _e="flex-start";switch(R.bar_alignment){case"left":_e="flex-start";break;case"center":_e="center";break;case"right":_e="flex-end"}let ve=null,be=null,ye=!1,xe=0,ke=0;const we=null===(B=R.design)||void 0===B?void 0:B.hover_effect,Se=u.k.getHoverEffectClass(we);return o.qy`
      <style>
        ${this.getStyles()}
      </style>
      <div class="bar-module-preview" style=${this.styleObjectToCss(ge)}>
        <!-- Bar Container -->
        <div style="display: flex; justify-content: ${_e}; width: 100%; min-height: ${W}; align-items: center; min-width: 0; overflow: visible;">
          <div
            class="bar-container ${Se}"
            style="
            ${me<100?`width: ${fe};`:""}
            max-width: 100%;
            flex: ${me<100?"0 0 auto":"1 1 0"};
            height: ${W}; 
            background: ${Z};
            ${me<100?"min-width: 80px;":"min-width: 0;"}
            border-radius: ${ie}px;
            overflow: 'visible';
            position: relative;
            transition: ${!1!==R.animation?"all 0.3s ease":"none"};
            border: ${"outline"!==R.bar_style?`1px solid ${R.bar_border_color||q.border_color||"var(--divider-color)"}`:"none"};
            ${re};
            cursor: ${R.tap_action&&"nothing"!==R.tap_action.action||R.hold_action&&"nothing"!==R.hold_action.action||R.double_tap_action&&"nothing"!==R.double_tap_action.action?"pointer":"default"};
            z-index: 1;
          "
          @pointerdown=${e=>{e.preventDefault(),ye=!1,be=setTimeout((()=>{ye=!0,R.hold_action&&"nothing"!==R.hold_action.action&&l.K.handleAction(R.hold_action,t,e.target,n)}),500)}}
          @pointerup=${e=>{if(e.preventDefault(),be&&(clearTimeout(be),be=null),ye)return void(ye=!1);const i=Date.now();i-ke<300&&1===xe?(ve&&(clearTimeout(ve),ve=null),xe=0,R.double_tap_action&&"nothing"===R.double_tap_action.action||l.K.handleAction(R.double_tap_action||{action:"default"},t,e.target,n,R.entity)):(xe=1,ke=i,ve=setTimeout((()=>{xe=0,R.tap_action&&"nothing"===R.tap_action.action||l.K.handleAction(R.tap_action||{action:"default"},t,e.target,n,R.entity)}),300))}}
        >
            <!-- Bar Fill / Dots Style / Minimal Style -->
            ${"minimal"===R.bar_style?(()=>{var e;const t=R.bar_direction||"left-to-right",i="right-to-left"===t,n=i?100-U:U;let a=R.bar_color||"var(--primary-color)",r=R.dot_color||R.bar_color||"var(--primary-color)";if(R.use_gradient&&R.gradient_stops&&R.gradient_stops.length>0){const e=[...R.gradient_stops].sort(((e,t)=>e.position-t.position)),i=R.gradient_display_mode||"full",o="right-to-left"===t?"to left":"to right";if("full"===i)a=`linear-gradient(${o}, ${e.map((e=>`${ne(e.color)} ${e.position}%`)).join(", ")})`,r=R.dot_color||ne(ae(e,U));else if("cropped"===i)if(U<=0){const t=ne(e[0].color);a=t,r=R.dot_color||t}else{const t=[...e.filter((e=>e.position<=U))],i=ae(e,U);if(t.some((e=>e.position===U))||t.push({id:`cropped_${U}`,position:U,color:i}),t.sort(((e,t)=>e.position-t.position)),0===t.length){const t=ne(e[0].color);a=t,r=R.dot_color||t}else a=`linear-gradient(${o}, ${t.map((e=>Object.assign(Object.assign({},e),{position:U>0?e.position/U*100:0}))).map((e=>`${ne(e.color)} ${Math.min(100,Math.max(0,e.position))}%`)).join(", ")})`,r=R.dot_color||ne(i)}else if("value-based"===i){const t=ae(e,U),i=ne(t);a=i,r=R.dot_color||i}}const s="cropped"===(R.gradient_display_mode||"full")&&R.use_gradient,l=null!==(e=R.height)&&void 0!==e?e:20,d=Math.max(1,Math.floor(l/3)),c=Math.max(8,Math.min(24,3*d+6));return o.qy`
                      ${s?o.qy`
                            <!-- Background track (unfilled portion) -->
                            <div
                              style="
                                position: absolute;
                                top: 50%;
                                left: 0;
                                right: 0;
                                height: ${d}px;
                            background: ${R.bar_background_color||"rgba(var(--rgb-primary-color), 0.2)"};
                            transform: translateY(-50%);
                            border-radius: ${Math.max(1,Math.floor(d/2))}px;
                            opacity: 0.6;
                          "
                            ></div>

                            <!-- Filled track portion (with gradient) -->
                            <div
                              class="minimal-track ${de}"
                              style="
                                position: absolute;
                                top: 50%;
                                left: ${i?100-U+"%":"0"};
                                width: ${U}%;
                                height: ${d}px;
                            background: ${a};
                            transform: translateY(-50%);
                            border-radius: ${Math.max(1,Math.floor(d/2))}px;
                            opacity: 0.8;
                            transition: ${!1!==R.animation?"all 0.3s ease":"none"};
                          "
                            ></div>
                          `:o.qy`
                            <!-- Track line (full/value-based modes) -->
                            <div
                              class="minimal-track ${de}"
                              style="
                                position: absolute;
                                top: 50%;
                                left: 0;
                                right: 0;
                                height: ${d}px;
                            background: ${a};
                            transform: translateY(-50%);
                            border-radius: ${Math.max(1,Math.floor(d/2))}px;
                            opacity: 0.8;
                            transition: ${!1!==R.animation?"all 0.3s ease":"none"};
                          "
                            ></div>
                          `}

                      <!-- Dot/Icon indicator -->
                      ${(()=>{const e=!1!==R.minimal_icon_size_auto?Math.max(16,Math.min(32,Math.max(24,1.2*l))):R.minimal_icon_size||24,t=!1!==R.minimal_icon_use_dot_color?r:R.minimal_icon_color||r,i=R.minimal_icon_mode||"icon-in-dot",a=R.minimal_icon_enabled&&R.minimal_icon;return"icon-only"===i&&a?o.qy`
                            <div
                              class="minimal-icon ${de}"
                              style="
                                position: absolute;
                                top: 50%;
                                left: ${n}%;
                                width: ${e}px;
                                height: ${e}px;
                                transform: translate(-50%, -50%);
                                transition: ${!1!==R.animation?"left 0.3s ease, color 0.3s ease":"none"};
                                z-index: 3;
                                will-change: left, color;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                              "
                            >
                              <ha-icon
                                icon="${R.minimal_icon}"
                                style="
                                  color: ${t};
                                  width: ${e}px;
                                  height: ${e}px;
                                  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
                                  display: flex;
                                  align-items: center;
                                  justify-content: center;
                                "
                              ></ha-icon>
                            </div>
                          `:"icon-in-dot"===i&&a?o.qy`
                            <div
                              class="minimal-dot ${de}"
                              style="
                                position: absolute;
                                top: 50%;
                                left: ${n}%;
                                width: ${c}px;
                                height: ${c}px;
                                background: ${r};
                                border: 2px solid var(--card-background-color);
                                border-radius: 50%;
                                transform: translate(-50%, -50%);
                                box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                                transition: ${!1!==R.animation?"left 0.3s ease, background 0.3s ease":"none"};
                                z-index: 3;
                                will-change: left, background;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                              "
                            >
                              <ha-icon
                                icon="${R.minimal_icon}"
                                style="
                                  color: ${t};
                                  width: ${Math.max(8,e-4)}px;
                                  height: ${Math.max(8,e-4)}px;
                                  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));
                                  display: flex;
                                  align-items: center;
                                  justify-content: center;
                                "
                              ></ha-icon>
                            </div>
                          `:o.qy`
                            <div
                              class="minimal-dot ${de}"
                              style="
                                position: absolute;
                                top: 50%;
                                left: ${n}%;
                                width: ${c}px;
                                height: ${c}px;
                                background: ${r};
                                border: 2px solid var(--card-background-color);
                                border-radius: 50%;
                                transform: translate(-50%, -50%);
                                box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                                transition: ${!1!==R.animation?"left 0.3s ease, background 0.3s ease":"none"};
                                z-index: 3;
                                will-change: left, background;
                              "
                            ></div>
                          `})()}
                    `})():"dots"===R.bar_style?(()=>{var e;const t=null!==(e=R.height)&&void 0!==e?e:20,i=Math.max(6,Math.floor(t-8)),n=Z,a=R.bar_direction||"left-to-right",r=R.use_gradient&&R.gradient_stops&&R.gradient_stops.length>0?[...R.gradient_stops].sort(((e,t)=>e.position-t.position)):(0,d.FB)(),s=e=>{const t=[...r].sort(((e,t)=>e.position-t.position));let i=t[0],o=t[t.length-1];for(let n=0;n<t.length-1;n++)if(e>=t[n].position&&e<=t[n+1].position){i=t[n],o=t[n+1];break}if(i.position===e)return i.color;if(o.position===e)return o.color;const n=o.position-i.position,a=0===n?0:(e-i.position)/n;return this.interpolateColor(i.color,o.color,a)},l=R.gradient_display_mode||"full",c=Array.from({length:20},((e,t)=>{const r=Math.round((t+1)/21*100),d="right-to-left"===a?100-r<=U:r<=U;let c=oe;if(R.use_gradient){if("full"===l)if(d){const e=U>0?Math.min(100,Math.max(0,Math.round(r/Math.max(1,U)*100))):0;c=s(e)}else c=n;else if("cropped"===l)c=d?s(r):n;else if("value-based"===l){const e=s(U);c=d?e:n}}else c=d?R.bar_color||q.color||"var(--primary-color)":n;return o.qy`<div
                          style="width:${i}px;height:${i}px;border-radius:50%;background:${c};flex-shrink:0;"
                        ></div>`})),p="right-to-left"===a?c.reverse():c;return o.qy`<div
                        class="dots-container"
                        style="display:flex;align-items:center;justify-content:space-between;width:100%;height:100%;padding:0 ${Math.max(2,Math.floor(i/3))}px;box-sizing:border-box;flex-direction:${"right-to-left"===a?"row-reverse":"row"};"
                      >
                        ${p}
                      </div>`})():(()=>{const e="right-to-left"===(R.bar_direction||"left-to-right");let t="";return t=U>=99.5?`${ie}px`:e?`0 ${ie}px ${ie}px 0`:`${ie}px 0 0 ${ie}px`,o.qy`
                        <div
                          class="bar-fill ${de}"
                          style="
                        width: ${U}%;
                        height: 100%;
                        background: ${oe};
                        transition: ${!1!==R.animation?"width 0.3s ease":"none"};
                        border-radius: ${t};
                        position: absolute;
                        ${e?"right: 0;":"left: 0;"}
                        top: 0;
                        bottom: 0;
                        will-change: width;
                        backface-visibility: hidden;
                        ${se}
                      "
                        >
                          ${le?o.qy` <div
                                class="bar-fill-overlay"
                                style="
                                position: absolute;
                                inset: 0;
                                border-radius: inherit;
                                pointer-events: none;
                                ${le}
                              "
                              ></div>`:""}
                        </div>
                      `})()}

            <!-- Limit Indicator -->
            ${R.limit_entity&&(null==t?void 0:t.states[R.limit_entity])&&F>=0?o.qy`
                    <div
                      class="bar-limit-line"
                      style="
                    position: absolute; 
                    top: 0; 
                    bottom: 0; 
                    left: ${F}%; 
                    width: 2px; 
                    background-color: ${R.limit_color||"var(--warning-color)"}; 
                    z-index: 5; 
                    transform: translateX(-50%);
                  "
                      title="${(()=>{var e;try{const o=null===(e=t.states[R.limit_entity])||void 0===e?void 0:e.state;return(async()=>{const{formatEntityState:e}=await Promise.resolve().then(i.bind(i,3057));e(t,R.limit_entity,{state:o,includeUnit:!0})})(),`Limit: ${o}`}catch(e){return"Limit"}})()}"
                    ></div>
                  `:""}

            <!-- Percentage Text (Inside Bar) -->
            ${R.show_percentage?o.qy`
                    <div
                      class="percentage-text"
                      style="
                    position: absolute;
                    top: 50%;
                    left: ${"left"===R.percentage_text_alignment?"8px":"right"===R.percentage_text_alignment?"calc(100% - 32px)":"50%"};
                    transform: ${"center"===R.percentage_text_alignment?"translate(-50%, -50%)":"translate(0, -50%)"};
                    text-align: ${R.percentage_text_alignment||"center"};
                    font-size: ${V.font_size?`${Math.min(V.font_size,.8*Y)}px`:`${Math.min(R.percentage_text_size||14,.8*Y)}px`};
                    color: ${R.percentage_text_color||V.color||q.color||"white"};
                    font-weight: 600;
                    z-index: 10;
                    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    max-width: 100%;
                  "
                    >
                      ${(()=>{var e,i,o;if(R.show_value){if(J)return"65 kWh";const n=R.percentage_type||"entity";if("difference"===n){const i=R.percentage_current_entity;if(i&&(null==t?void 0:t.states[i])){const o=t.states[i];try{return(0,c.formatEntityState)(t,i,{includeUnit:!0})}catch(t){return`${o.state}${(null===(e=o.attributes)||void 0===e?void 0:e.unit_of_measurement)||""}`}}}else if("template"===n){const e=R.percentage_template;if(e&&t){t.__uvc_template_strings||(t.__uvc_template_strings={});const o=`bar_percentage_${R.id}_${this._hashString(e)}`,n=null===(i=t.__uvc_template_strings)||void 0===i?void 0:i[o];if(void 0!==n)return String(n)}}const a=null==t?void 0:t.states[R.entity];if(a)try{return(0,c.formatEntityState)(t,R.entity,{includeUnit:!0})}catch(e){return`${a.state}${(null===(o=a.attributes)||void 0===o?void 0:o.unit_of_measurement)||""}`}return"N/A"}return`${Math.round(U)}%`})()}
                    </div>
                  `:""}
          </div>

          ${!(null==t?void 0:t.states[R.entity])&&R.entity?o.qy`
                  <div
                    class="entity-error"
                    style="color: var(--error-color); font-size: 12px; margin-top: 4px;"
                  >
                    Entity not found: ${R.entity}
                  </div>
                `:""}
        </div>

        <!-- Left and Right Side Labels (Below Bar) -->
        ${R.left_enabled||R.right_enabled?o.qy`
                <div
                  class="bar-labels-below"
                  style="display: flex; justify-content: ${R.label_alignment||"space-between"}; align-items: center; margin-top: 8px; gap: 16px; width: 100%; overflow: hidden; box-sizing: border-box;"
                >
                  ${R.left_enabled?o.qy`
                        <div
                          class="left-side-below"
                          style="text-align: left; flex: 1; min-width: 0; overflow: hidden;"
                        >
                          ${R.left_title&&R.left_title.trim()?o.qy`
                                <span
                                  style="font-size: ${V.font_size?`${Math.min(V.font_size,16)}px`:`${Math.min(R.left_title_size||14,16)}px`}; color: ${V.color||R.left_title_color||q.color||"var(--primary-text-color)"}; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                                >
                                  ${R.left_title}:
                                </span>
                              `:""}
                          <span
                            style="font-size: ${V.font_size?`${Math.min(V.font_size,16)}px`:`${Math.min(R.left_value_size||14,16)}px`}; font-weight: 600; color: ${V.color||R.left_value_color||q.color||"var(--primary-text-color)"}; margin-left: ${R.left_title&&R.left_title.trim()?"4px":"0"}; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >
                            ${N}
                          </span>
                        </div>
                      `:o.qy`<div></div>`}
                  ${R.right_enabled?o.qy`
                        <div
                          class="right-side-below"
                          style="text-align: right; flex: 1; min-width: 0; overflow: hidden;"
                        >
                          ${R.right_title&&R.right_title.trim()?o.qy`
                                <span
                                  style="font-size: ${V.font_size?`${Math.min(V.font_size,16)}px`:`${Math.min(R.right_title_size||14,16)}px`}; color: ${V.color||R.right_title_color||q.color||"var(--primary-text-color)"}; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                                >
                                  ${R.right_title}:
                                </span>
                              `:""}
                          <span
                            style="font-size: ${V.font_size?`${Math.min(V.font_size,16)}px`:`${Math.min(R.right_value_size||14,16)}px`}; font-weight: 600; color: ${V.color||R.right_value_color||q.color||"var(--primary-text-color)"}; margin-left: ${R.right_title&&R.right_title.trim()?"4px":"0"}; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                          >
                            ${L}
                          </span>
                        </div>
                      `:o.qy`<div></div>`}
                </div>
              `:""}
        </div>
      </div>
    `}_hashString(e){let t=0;for(let i=0;i<e.length;i+=1)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Math.abs(t)}validate(e){const t=e,i=[...super.validate(e).errors];return t.entity&&""!==t.entity.trim()||i.push("Entity ID is required"),t.height&&(t.height<5||t.height>200)&&i.push("Bar height must be between 5 and 200 pixels"),t.border_radius&&(t.border_radius<0||t.border_radius>100)&&i.push("Border radius must be between 0 and 100 pixels"),t.limit_entity&&""!==t.limit_entity.trim()&&(t.limit_entity.includes(".")||i.push("Limit entity must be a valid entity ID (e.g., sensor.battery_limit)")),{valid:0===i.length,errors:i}}getStyles(){return'\n      .bar-module-preview {\n        display: block; /* ensure bar occupies width of its container */\n        width: 100%;\n        max-width: 100%;\n        overflow: visible;\n        box-sizing: border-box;\n        min-width: 80px; /* keep a visible track inside flex rows */\n        position: relative;\n        z-index: 0; /* Establish stacking context */\n      }\n      \n      .bar-container {\n        width: 100%;\n        position: relative;\n        display: block;\n        box-sizing: border-box;\n        min-width: 0; /* allow flex parent to size correctly */\n        /* Ensure minimal style dots stay within container bounds */\n        contain: layout style;\n      }\n      \n      /* Minimal style specific containment */\n      .bar-container.minimal-style {\n        overflow: visible;\n        isolation: isolate; /* Create new stacking context */\n      }\n      \n      .bar-fill {\n        position: relative;\n        z-index: 1;\n        overflow: hidden; /* Keep overlay animations clipped to rounded corners */\n      }\n      \n      .bar-fill-overlay {\n        position: absolute;\n        inset: 0;\n        pointer-events: none;\n        z-index: 2;\n        overflow: hidden;\n        mix-blend-mode: normal;\n      }\n      \n      /* Ensure overlay inherits border radius properly */\n      .bar-fill-overlay {\n        border-radius: inherit;\n      }\n      \n      /* Outline style animation */\n      @keyframes outline-pulse {\n        0%, 100% { opacity: 0.6; }\n        50% { opacity: 1; }\n      }\n      \n      .bar-limit-line {\n        opacity: 0.9;\n        transition: opacity 0.2s ease;\n      }\n      \n      .bar-limit-line:hover {\n        opacity: 1;\n      }\n      \n      .bar-name {\n        font-size: 16px;\n        font-weight: 600;\n        color: var(--primary-text-color);\n        margin-bottom: 8px;\n        user-select: none;\n        word-wrap: break-word;\n      }\n      \n      .bar-value {\n        user-select: none;\n        text-shadow: 0 1px 2px rgba(0,0,0,0.1);\n      }\n      \n      .bar-value-outside {\n        user-select: none;\n        text-align: center;\n        font-weight: 600;\n        color: var(--primary-text-color);\n      }\n      \n      .entity-error {\n        font-size: 12px;\n        color: var(--error-color);\n        margin-top: 6px;\n        font-style: italic;\n        opacity: 0.8;\n      }\n      \n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n      \n      .settings-section * {\n        box-sizing: border-box;\n      }\n      \n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        margin-bottom: 12px !important;\n        padding-bottom: 0 !important;\n        border-bottom: none !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n      \n      .settings-section label {\n        display: block;\n        font-weight: 500;\n        margin-bottom: 4px;\n        color: var(--primary-text-color);\n      }\n      \n      .settings-section input,\n      .settings-section select {\n        width: 100%;\n        max-width: 100%;\n        padding: 8px;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--card-background-color);\n        color: var(--primary-text-color);\n        font-size: 14px;\n        box-sizing: border-box;\n      }\n      \n      .settings-section .checkbox-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-weight: 500;\n      }\n      \n      .settings-section .checkbox-wrapper input[type="checkbox"] {\n        width: auto;\n        margin: 0;\n      }\n      \n      .help-text {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        margin: 4px 0 0 0;\n        opacity: 0.8;\n        word-wrap: break-word;\n      }\n      \n      .number-input,\n      .text-input,\n      .entity-input,\n      .select-input {\n        transition: border-color 0.2s ease;\n      }\n      \n      .number-input:focus,\n      .text-input:focus,\n      .entity-input:focus,\n      .select-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 1px var(--primary-color);\n      }\n      \n      /* Fix padding overflow */\n      .module-general-settings {\n        max-width: 100%;\n        /* Allow dropdown menus to render outside local containers */\n        overflow: visible;\n      }\n      \n      .module-general-settings { }\n      /* Dropdown positioning fixes scoped to Bar module (defensive in case globals miss) */\n      /* Let HA handle dropdown positioning naturally */\n      .bar-module-preview .settings-section {\n        overflow: visible;\n      }\n\n      .module-general-settings > * {\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Proper form field arrangement: Title -> Description -> Field */\n      .settings-section ha-form {\n        --ha-form-field-margin: 8px 0;\n      }\n\n      .settings-section ha-form::part(field) {\n        margin-bottom: 8px;\n      }\n\n      .settings-section ha-form .ha-form-label {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--primary-text-color);\n        margin-bottom: 4px;\n        display: block;\n      }\n\n      .settings-section ha-form .ha-form-description {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        margin-bottom: 8px;\n        display: block;\n        opacity: 0.8;\n        line-height: 1.4;\n      }\n\n      .settings-section ha-form mwc-formfield {\n        --mdc-typography-body2-font-size: 14px;\n      }\n\n      .settings-section ha-form ha-switch {\n        --switch-checked-color: var(--primary-color);\n        --switch-unchecked-color: var(--disabled-color);\n      }\n\n      /* Field arrangement styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n      \n        margin-bottom: 4px !important;\n        padding-bottom: 0 !important;\n        border-bottom: none !important;\n        display: block !important;\n        line-height: 1.2 !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n        font-weight: 400 !important;\n      }\n\n      /* Remove labels from ultra-color-picker when using external titles */\n      .settings-section ultra-color-picker .color-label {\n        display: none;\n      }\n\n      /* Prevent form fields from going off screen */\n      .property-input, .property-select {\n        max-width: 500px;\n      }\n\n      /* Apply max-width to ha-form elements */\n      .settings-section ha-form {\n        max-width: 500px;\n      }\n\n      /* Apply max-width to form inputs and selects */\n      .settings-section input,\n      .settings-section select,\n      .settings-section ha-textfield,\n      .settings-section ha-select {\n        max-width: 500px;\n      }\n      /* Give selects a consistent card background (scoped to bar module sections only) */\n      .bar-module-preview .settings-section ha-select {\n        background: var(--card-background-color) !important;\n        border: 1px solid var(--divider-color) !important;\n        border-radius: 6px !important;\n        padding: 4px 0 !important;\n        /* MWC menu and text field surfaces */\n        --mdc-theme-surface: var(--card-background-color);\n        --mdc-text-field-fill-color: var(--card-background-color);\n        --mdc-select-fill-color: var(--card-background-color);\n        --mdc-menu-surface-fill-color: var(--card-background-color);\n        --mdc-text-field-ink-color: var(--primary-text-color);\n        --mdc-text-field-outline-color: var(--divider-color);\n        --mdc-select-dropdown-icon-color: var(--secondary-text-color);\n        --mdc-theme-text-primary-on-background: var(--primary-text-color);\n        --mdc-theme-on-surface: var(--primary-text-color);\n      }\n\n      /* Ensure ha-form selects inherit same surface in all contexts */\n      .bar-module-preview .settings-section ha-form ha-select {\n        --mdc-theme-surface: var(--card-background-color);\n        --mdc-text-field-fill-color: var(--card-background-color);\n        --mdc-select-fill-color: var(--card-background-color);\n        --mdc-menu-surface-fill-color: var(--card-background-color);\n        --mdc-text-field-ink-color: var(--primary-text-color);\n        --mdc-text-field-outline-color: var(--divider-color);\n        --mdc-select-dropdown-icon-color: var(--secondary-text-color);\n        --mdc-theme-text-primary-on-background: var(--primary-text-color);\n        --mdc-theme-on-surface: var(--primary-text-color);\n      }\n\n      /* Give animation selects a proper background */\n      .settings-section[data-animation] ha-select,\n      .animation-select-group ha-select {\n        background: var(--card-background-color) !important;\n        border: 1px solid var(--divider-color) !important;\n        border-radius: 6px !important;\n        padding: 4px 0 !important;\n      }\n      /* Ensure percentage type dropdown has standard background container */\n      .percentage-type-group ha-select {\n        background: var(--card-background-color) !important;\n        border: 1px solid var(--divider-color) !important;\n        border-radius: 6px !important;\n        padding: 4px 0 !important;\n      }\n\n      /* Fix slider and input field layouts */\n      .settings-section .field-group {\n        max-width: 100%;\n        overflow: visible;\n        align-items: stretch;\n      }\n\n      /* Ensure slider containers don\'t get cut off */\n      .settings-section ha-form[style*="flex: 1"] {\n        min-width: 200px;\n        flex: 1 1 200px;\n      }\n\n      /* Fix input field containers */\n      .settings-section input[type="number"] {\n        width: 72px !important;\n        max-width: 72px !important;\n        min-width: 72px !important;\n        flex-shrink: 0;\n      }\n\n      /* Ensure proper spacing for slider + input combos */\n      .settings-section div[style*="display: flex; gap: 8px"] {\n        gap: 8px !important;\n        align-items: center !important;\n        flex-wrap: nowrap !important;\n        min-width: 0;\n      }\n\n      .settings-section div[style*="display: flex; gap: 12px"] {\n        gap: 12px !important;\n        align-items: center !important;\n        flex-wrap: nowrap !important;\n        min-width: 0;\n      }\n\n      /* Prevent overflow in gradient editor */\n      .gradient-editor {\n        max-width: 100%;\n        overflow: visible;\n      }\n\n      .gradient-stop {\n        max-width: 100%;\n        overflow: visible;\n        position: relative;\n      }\n\n      /* Gradient stop drag handle styling */\n      .gradient-stop .drag-handle {\n        transition: all 0.2s ease;\n      }\n\n      .gradient-stop:hover .drag-handle {\n        color: var(--primary-color) !important;\n        transform: scale(1.1);\n      }\n\n      /* Ultra color picker sizing */\n      ultra-color-picker {\n        min-width: 40px;\n        max-width: 60px;\n        flex-shrink: 0;\n      }\n\n      /* Ensure gradient controls don\'t overflow */\n      .gradient-stops {\n        max-width: 100%;\n        overflow: visible;\n      }\n\n      /* Hide automatic value displays from ha-form sliders to prevent cut-off */\n      .settings-section ha-form ha-slider::part(value-display),\n      .settings-section ha-form mwc-slider::part(value-display),\n      .settings-section ha-form ha-slider .value-display,\n      .settings-section ha-form mwc-slider .value-display {\n        display: none !important;\n      }\n\n      /* Hide any automatic number displays that might appear next to sliders */\n      .settings-section ha-form .slider-value,\n      .settings-section ha-form .current-value,\n      .settings-section ha-form .number-display {\n        display: none !important;\n      }\n\n      /* Override any default slider value display styles */\n      .settings-section ha-form[data-field*="size"] .mdc-slider-value-indicator,\n      .settings-section ha-form[data-field*="size"] .value-indicator {\n        display: none !important;\n      }\n\n      /* More comprehensive hiding of slider value displays */\n      .settings-section ha-form ha-textfield[type="number"],\n      .settings-section ha-form mwc-textfield[type="number"],\n      .settings-section ha-form .number-input-display {\n        display: none !important;\n      }\n\n      /* Target specific Home Assistant slider value containers */\n      .settings-section ha-form .form-group .number-display,\n      .settings-section ha-form .ha-form-number .display-value,\n      .settings-section ha-form [role="slider"] + *:not(.mdc-slider-track),\n      .settings-section ha-form .mdc-slider + .value-display {\n        display: none !important;\n      }\n\n      /* Ensure sliders take full width without value displays */\n      .settings-section ha-form .mdc-slider,\n      .settings-section ha-form ha-slider {\n        width: 100% !important;\n        max-width: 100% !important;\n      }\n\n      /* Hide any text elements that might display current values */\n      .settings-section ha-form .field-wrapper > span:last-child,\n      .settings-section ha-form .form-control > span:last-child,\n      .settings-section ha-form .slider-container > span:last-child {\n        display: none !important;\n      }\n\n      /* Specifically target number displays in form groups */\n      .settings-section ha-form .form-group > *:last-child:not(ha-slider):not(.mdc-slider):not(input[type="range"]) {\n        display: none !important;\n      }\n\n      /* Gap control styles - Standardized Slider Pattern */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 72px !important;\n        max-width: 72px !important;\n        min-width: 72px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      /* Range input styling for number-range-control */\n      .number-range-control {\n        display: flex;\n        gap: 8px;\n        align-items: center;\n      }\n\n      .range-slider {\n        flex: 1;\n      }\n\n      .range-input {\n        width: 72px !important;\n        max-width: 72px !important;\n        min-width: 72px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .range-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Conditional Fields Grouping - Reusable Pattern */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n        border-left-color: var(--primary-color);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n        margin: 0;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n        background: transparent;\n      }\n\n      /* Remove top margin from first field in conditional groups */\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      /* Ensure proper spacing within conditional field groups */\n      .conditional-fields-content .field-title {\n     \n      }\n\n      .conditional-fields-content .field-description {\n        color: var(--secondary-text-color);\n        opacity: 0.9;\n      }\n\n      /* Animation for conditional fields appearing */\n      .conditional-fields-group {\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      @keyframes slideInFromLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n\n      /* Make conditional fields responsive */\n      @media (max-width: 768px) {\n        .conditional-fields-group {\n          border-left-width: 3px;\n        }\n        \n        .conditional-fields-header {\n          padding: 10px 12px;\n          font-size: 13px;\n        }\n        \n        .conditional-fields-content {\n          padding: 12px;\n        }\n      }\n\n      /* ==========================\n         Bar Animations\n         These classes animate the .bar-fill element when triggered\n         ========================== */\n      .bar-fill.bar-anim-charging::after {\n        content: \'\';\n        position: absolute; inset: 0; pointer-events: none;\n        background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.25) 0, rgba(255,255,255,0.25) 10px, transparent 10px, transparent 20px);\n        background-size: 28px 28px;\n        animation: charging-stripes 1.2s linear infinite;\n      }\n      @keyframes charging-stripes { 0% { background-position: 0 0; } 100% { background-position: 28px 0; } }\n\n      .bar-fill.bar-anim-pulse { animation: bar-pulse 1.6s ease-in-out infinite; }\n      @keyframes bar-pulse { 0%,100% { filter: brightness(1); } 50% { filter: brightness(1.3); } }\n\n      .bar-fill.bar-anim-blink { animation: bar-blink 1s steps(2, start) infinite; }\n      @keyframes bar-blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }\n\n      .bar-fill.bar-anim-bounce { animation: bar-bounce 1.2s ease-in-out infinite; transform-origin: center; }\n      @keyframes bar-bounce { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-2px); } }\n\n      .bar-fill.bar-anim-glow { box-shadow: 0 0 10px currentColor, 0 0 20px currentColor; animation: bar-glow 1.5s ease-in-out infinite; }\n      @keyframes bar-glow { 0%,100% { filter: brightness(1); } 50% { filter: brightness(1.4); } }\n\n      .bar-fill.bar-anim-rainbow::after { \n        content:\'\'; \n        position:absolute; \n        inset:0; \n        pointer-events:none; \n        background: linear-gradient(90deg, \n          red 0%, \n          orange 14.28%, \n          yellow 28.57%, \n          green 42.85%, \n          cyan 57.14%, \n          blue 71.42%, \n          violet 85.71%, \n          red 100%\n        ); \n        background-size: 200% 100%; \n        mix-blend-mode: overlay; \n        opacity: 0.9; \n        animation: rainbow-shift 4s linear infinite; \n      }\n      @keyframes rainbow-shift { \n        0% { background-position: 0% 0%; } \n        100% { background-position: 200% 0%; } \n      }\n\n      /* Bubbles: two extended layers with discrete bubbles, animated bottom -> top */\n      .bar-fill.bar-anim-bubbles::before,\n      .bar-fill.bar-anim-bubbles::after {\n        content: \'\';\n        position: absolute;\n        left: 0; right: 0;\n        top: -220%;\n        height: 440%;\n        pointer-events: none;\n        will-change: transform, opacity;\n        background-repeat: no-repeat;\n        filter: none;\n      }\n      /* Layer 1 (faster, fewer bubbles) */\n      .bar-fill.bar-anim-bubbles::before {\n        background:\n          radial-gradient(circle at 8% 80%,  rgba(255,255,255,0.55) 0 6px, transparent 7px),\n          radial-gradient(circle at 22% 55%, rgba(255,255,255,0.45) 0 5px, transparent 6px),\n          radial-gradient(circle at 37% 72%, rgba(255,255,255,0.50) 0 7px, transparent 8px),\n          radial-gradient(circle at 49% 60%, rgba(255,255,255,0.42) 0 5px, transparent 6px),\n          radial-gradient(circle at 63% 82%, rgba(255,255,255,0.50) 0 6px, transparent 7px),\n          radial-gradient(circle at 77% 68%, rgba(255,255,255,0.46) 0 5px, transparent 6px),\n          radial-gradient(circle at 89% 78%, rgba(255,255,255,0.52) 0 6px, transparent 7px);\n        animation: bubbles-rise-layer1 7s linear infinite;\n        transform: translateY(0%);\n      }\n      /* Layer 2 (slower, different positions) */\n      .bar-fill.bar-anim-bubbles::after {\n        background:\n          radial-gradient(circle at 14% 84%, rgba(255,255,255,0.48) 0 7px, transparent 8px),\n          radial-gradient(circle at 30% 66%, rgba(255,255,255,0.40) 0 5px, transparent 6px),\n          radial-gradient(circle at 55% 82%, rgba(255,255,255,0.50) 0 6px, transparent 7px),\n          radial-gradient(circle at 71% 64%, rgba(255,255,255,0.44) 0 5px, transparent 6px),\n          radial-gradient(circle at 84% 78%, rgba(255,255,255,0.50) 0 7px, transparent 8px);\n        animation: bubbles-rise-layer2 10s linear infinite;\n        animation-delay: 1.2s;\n        transform: translateY(0%);\n      }\n      @keyframes bubbles-rise-layer1 {\n        0%   { transform: translateY(0%); opacity: 0; }\n        22%  { opacity: 1; }\n        88%  { opacity: 1; }\n        100% { transform: translateY(-58%); opacity: 0; }\n      }\n      @keyframes bubbles-rise-layer2 {\n        0%   { transform: translateY(0%); opacity: 0; }\n        26%  { opacity: 1; }\n        88%  { opacity: 1; }\n        100% { transform: translateY(-58%); opacity: 0; }\n      }\n\n      .bar-fill.bar-anim-fill { animation: bar-fill-wave 1.5s ease-in-out infinite; }\n      @keyframes bar-fill-wave { 0%,100% { filter: saturate(1); } 50% { filter: saturate(1.4); } }\n\n      .bar-fill.bar-anim-ripple::after {\n        content: \'\';\n        position: absolute; inset: 0; pointer-events: none;\n        background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.65) 20%, transparent 40%);\n        background-size: 200% 100%;\n        animation: ripple-sweep 1.1s ease-in-out infinite;\n        opacity: 0.9;\n      }\n      @keyframes ripple-sweep {\n        0% { background-position-x: -50%; }\n        100% { background-position-x: 150%; }\n      }\n\n      /* Traffic: moving hazard chevrons left->right to evoke flowing traffic lanes */\n      .bar-fill.bar-anim-traffic::after {\n        content:\'\'; position:absolute; inset:0; pointer-events:none; opacity: 0.95;\n        background-image:\n          linear-gradient(135deg, rgba(255,255,255,0.00) 0 40%, rgba(255,255,255,0.25) 40% 60%, rgba(255,255,255,0.00) 60% 100%),\n          linear-gradient(-135deg, rgba(255,255,255,0.00) 0 40%, rgba(255,255,255,0.25) 40% 60%, rgba(255,255,255,0.00) 60% 100%);\n        background-size: 44px 100%, 44px 100%;\n        background-position: 0 0, 22px 0;\n        animation: traffic-chevrons 1s linear infinite;\n        mix-blend-mode: screen;\n      }\n      @keyframes traffic-chevrons { 0% { background-position: 0 0, 22px 0; } 100% { background-position: 44px 0, 66px 0; } }\n\n      /* Traffic Flow: thicker bands with alternating opacity, moving left->right */\n      \n\n      .bar-fill.bar-anim-heartbeat { animation: heartbeat 1.2s ease-in-out infinite; transform-origin: center; }\n      @keyframes heartbeat { 0%,100% { transform: scale(1); } 20% { transform: scale(1.02); } 40% { transform: scale(0.99); } 60% { transform: scale(1.02); } 80% { transform: scale(1); } }\n\n      .bar-fill.bar-anim-flicker { animation: flicker 2s infinite; }\n      @keyframes flicker { 0%,19%,21%,23%,25%,54%,56%,100%{ opacity:1 } 20%,24%,55%{ opacity:0.4 } }\n\n      .bar-fill.bar-anim-shimmer { position: relative; overflow: hidden; }\n      .bar-fill.bar-anim-shimmer::after { content:\'\'; position:absolute; top:0; bottom:0; width:40%; left:-40%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent); animation: shimmer-move 1.4s ease-in-out infinite; }\n      @keyframes shimmer-move { 0% { left: -40%; } 100% { left: 120%; } }\n\n      .bar-fill.bar-anim-vibrate { animation: vibrate 0.15s linear infinite; }\n      @keyframes vibrate { 0% { transform: translate(0); } 25% { transform: translate(0.5px,-0.5px); } 50% { transform: translate(-0.5px,0.5px); } 75% { transform: translate(0.5px,0.5px); } 100% { transform: translate(0); } }\n\n      /* Minimal Bar Animations */\n      .minimal-track.bar-anim-pulse { animation: minimal-track-pulse 1.6s ease-in-out infinite; }\n      @keyframes minimal-track-pulse { 0%,100% { opacity: 0.8; } 50% { opacity: 1; } }\n      \n      .minimal-dot.bar-anim-pulse { animation: minimal-dot-pulse 1.6s ease-in-out infinite; }\n      @keyframes minimal-dot-pulse { 0%,100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.15); } }\n      \n      /* Minimal style z-index management */\n      .minimal-track {\n        z-index: 1;\n        position: relative;\n      }\n      \n      .minimal-dot {\n        z-index: 3 !important;\n        position: absolute;\n        /* Ensure dot stays within reasonable bounds */\n        max-width: 32px;\n        max-height: 32px;\n        /* Prevent dot from going outside card boundaries */\n        contain: size layout style;\n      }\n      \n      /* Percentage text positioning for minimal style */\n      .bar-container .percentage-text {\n        /* Ensure text doesn\'t interfere with HA header */\n        max-width: 100%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      \n      .minimal-track.bar-anim-glow { box-shadow: 0 0 4px currentColor; animation: minimal-track-glow 1.5s ease-in-out infinite; }\n      @keyframes minimal-track-glow { 0%,100% { box-shadow: 0 0 4px currentColor; } 50% { box-shadow: 0 0 8px currentColor; } }\n      \n      .minimal-dot.bar-anim-glow { animation: minimal-dot-glow 1.5s ease-in-out infinite; }\n      @keyframes minimal-dot-glow { 0%,100% { box-shadow: 0 2px 4px rgba(0,0,0,0.2), 0 0 6px currentColor; } 50% { box-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 12px currentColor; } }\n      \n      .minimal-track.bar-anim-blink { animation: minimal-blink 1s steps(2, start) infinite; }\n      .minimal-dot.bar-anim-blink { animation: minimal-blink 1s steps(2, start) infinite; }\n      @keyframes minimal-blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }\n      \n      .minimal-dot.bar-anim-bouncing { animation: minimal-dot-bounce 1.2s ease-in-out infinite; }\n      @keyframes minimal-dot-bounce { 0%,100% { transform: translate(-50%, -50%); } 50% { transform: translate(-50%, calc(-50% - 4px)); } }\n      \n      .minimal-track.bar-anim-shimmer { position: relative; overflow: hidden; }\n      .minimal-track.bar-anim-shimmer::after { content:\'\'; position:absolute; top:-50%; bottom:-50%; width:40%; left:-40%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent); animation: minimal-shimmer-move 1.4s ease-in-out infinite; }\n      @keyframes minimal-shimmer-move { 0% { left: -40%; } 100% { left: 120%; } }\n      \n      .minimal-dot.bar-anim-vibrate { animation: minimal-dot-vibrate 0.15s linear infinite; }\n      @keyframes minimal-dot-vibrate { 0% { transform: translate(-50%, -50%); } 25% { transform: translate(calc(-50% + 0.5px), calc(-50% - 0.5px)); } 50% { transform: translate(calc(-50% - 0.5px), calc(-50% + 0.5px)); } 75% { transform: translate(calc(-50% + 0.5px), calc(-50% + 0.5px)); } 100% { transform: translate(-50%, -50%); } }\n    '}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}getBackgroundImageCSS(e,t){const i=e.background_image_type,o=e.background_image,n=e.background_image_entity;switch(i){case"upload":if(o)return o.startsWith("/api/image/serve/")?`url("${this.getImageUrl(t,o)}")`:(o.startsWith("data:image/"),`url("${o}")`);break;case"entity":if(n&&t){const e=t.states[n];if(e){const t=e.attributes.entity_picture||e.attributes.image||e.state;if(t&&"unknown"!==t&&"unavailable"!==t)return`url("${t}")`}}break;case"url":if(o)return`url("${o}")`;break;default:return"none"}return"none"}getImageUrl(e,t){if(!t)return"";if(t.startsWith("http"))return t;if(t.startsWith("data:image/"))return t;if(t.includes("/api/image/serve/")){const i=t.match(/\/api\/image\/serve\/([^\/]+)/);if(i&&i[1]){const o=i[1];try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/api/image/serve/${o}/original`}catch(e){return t}}return t}return t.startsWith("/")?`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}${t}`:t}getBarSizeFromHeight(e){return e<=12?"thin":e<=20?"regular":e<=30?"thick":"thiccc"}getBarRadiusFromStyle(e){return 0===e?"square":e<8?"rounded-square":"round"}interpolateColor(e,t,i){const o=this.hexToRgb(e),n=this.hexToRgb(t);if(!o||!n)return e;const a=Math.round(o.r+(n.r-o.r)*i),r=Math.round(o.g+(n.g-o.g)*i),s=Math.round(o.b+(n.b-o.b)*i);return this.rgbToHex(a,r,s)}hexToRgb(e){if(!e.startsWith("#"))return null;const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}rgbToHex(e,t,i){return`#${((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)}`}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}}},4276:(e,t,i)=>{i.d(t,{EM:()=>o,MZ:()=>s,wk:()=>l});const o=e=>(t,i)=>{void 0!==i?i.addInitializer((()=>{customElements.define(e,t)})):customElements.define(e,t)};var n=i(4885);const a={attribute:!0,type:String,converter:n.W3,reflect:!1,hasChanged:n.Ec},r=(e=a,t,i)=>{const{kind:o,metadata:n}=i;let r=globalThis.litPropertyMetadata.get(n);if(void 0===r&&globalThis.litPropertyMetadata.set(n,r=new Map),r.set(i.name,e),"accessor"===o){const{name:o}=i;return{set(i){const n=t.get.call(this);t.set.call(this,i),this.requestUpdate(o,n,e)},init(t){return void 0!==t&&this.P(o,void 0,e),t}}}if("setter"===o){const{name:o}=i;return function(i){const n=this[o];t.call(this,i),this.requestUpdate(o,n,e)}}throw Error("Unsupported decorator location: "+o)};function s(e){return(t,i)=>"object"==typeof i?r(e,t,i):((e,t,i)=>{const o=t.hasOwnProperty(i);return t.constructor.createProperty(i,o?{...e,wrapped:!0}:e),o?Object.getOwnPropertyDescriptor(t,i):void 0})(e,t,i)}function l(e){return s({...e,state:!0,attribute:!1})}},4345:(e,t,i)=>{i.d(t,{I:()=>o});class o{constructor(e){this.hass=e,this._templateSubscriptions=new Map,this._templateResults=new Map,this._evaluationCache=new Map,this.CACHE_TTL=1e3}getTemplateResult(e){const t=this._evaluationCache.get(e);return t&&Date.now()-t.timestamp<this.CACHE_TTL?t.value:this._templateResults.get(e)}hasTemplateSubscription(e){return this._templateSubscriptions.has(e)}getAllTemplateResults(){return this._templateResults}async subscribeToTemplate(e,t,i){if(e&&this.hass&&!this._templateSubscriptions.has(t))try{const o=this.hass.connection.subscribeMessage((e=>{const o=e.result;this.hass.__uvc_template_strings||(this.hass.__uvc_template_strings={}),this.hass.__uvc_template_strings[t]=o;const n=this.parseTemplateResult(o,t);n!==this._templateResults.get(t)&&i&&i(),this._templateResults.set(t,n),this._evaluationCache.set(t,{value:n,timestamp:Date.now(),stringValue:o})}),{type:"render_template",template:e});this._templateSubscriptions.set(t,Promise.resolve(o))}catch(t){console.error(`[UltraVehicleCard] Failed to subscribe to template: ${e}`,t)}}parseTemplateResult(e,t){if(t&&t.startsWith("info_entity_"))return!0;if(t&&t.startsWith("state_text_"))return!0;if(null==e)return!1;if("boolean"==typeof e)return e;if("number"==typeof e)return 0!==e;if("string"==typeof e){const t=e.toLowerCase().trim();return"true"===t||"on"===t||"yes"===t||"active"===t||"home"===t||"1"===t||"open"===t||"unlocked"===t||"false"!==t&&"off"!==t&&"no"!==t&&"inactive"!==t&&"not_home"!==t&&"away"!==t&&"0"!==t&&"closed"!==t&&"locked"!==t&&"unavailable"!==t&&"unknown"!==t&&""!==t}return console.warn(`[UltraVehicleCard] Template evaluated to ambiguous type '${typeof e}', interpreting as false.`),!1}async unsubscribeAllTemplates(){for(const[e,t]of this._templateSubscriptions.entries())try{if(t){const e=await Promise.resolve(t).catch((e=>null));if(e&&"function"==typeof e)try{await e()}catch(e){}}}catch(e){}this._templateSubscriptions.clear(),this._templateResults.clear(),this._evaluationCache.clear()}updateHass(e){this.hass=e,this._evaluationCache.clear()}}},4367:(e,t,i)=>{i.d(t,{D:()=>o});const o=new class{constructor(){this.timers=new Map}setUpdateCallback(e){this.updateCallback=e}registerClock(e,t=1){const i=this.timers.get(e);if(i&&i.frequency===t)return;i&&this.unregisterClock(e);const o=1e3*t,n=window.setInterval((()=>{this.updateCallback&&this.updateCallback()}),o);this.timers.set(e,{intervalId:n,frequency:t})}unregisterClock(e){const t=this.timers.get(e);t&&(clearInterval(t.intervalId),this.timers.delete(e))}isRegistered(e){return this.timers.has(e)}clearAll(){this.timers.forEach((e=>clearInterval(e.intervalId))),this.timers.clear()}getActiveClockCount(){return this.timers.size}}},4504:(e,t,i)=>{i.d(t,{o:()=>u});var o=i(5183),n=i(866),a=i(796),r=i(5575),s=i(9662),l=i(2371),d=i(4345),c=i(7987),p=i(456);i(6768),i(7487);class u extends n.m{constructor(){super(...arguments),this.metadata={type:"text",title:"Text Module",description:"Display custom text content",author:"WJD Designs",version:"1.0.0",icon:"mdi:format-text",category:"content",tags:["text","content","typography","template"]},this.clickTimeout=null,this._templateInputDebounce=null,this.holdTimeout=null,this.isHolding=!1}createDefault(e,t){return{id:e||this.generateId("text"),type:"text",text:"Sample Text",link:"",hide_if_no_link:!1,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},icon:"",icon_color:"",icon_position:"before",template_mode:!1,template:"",enable_hover_effect:!0,hover_background_color:"var(--divider-color)",font_weight:"700",text_transform:"uppercase",design:{},display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,n){var a;const s=e,l=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Content Configuration -->
        ${this.renderSettingsSection((0,p.kg)("editor.text.content_section.title",l,"Content Configuration"),(0,p.kg)("editor.text.content_section.desc",l,"Configure the text content and basic settings for this module."),[{title:(0,p.kg)("editor.text.text_content",l,"Text Content"),description:(0,p.kg)("editor.text.text_content_desc",l,"Enter the text content to display in this module."),hass:t,data:{text:s.text||""},schema:[this.textField("text")],onChange:e=>n(e.detail.value)}])}

        <!-- Icon Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,p.kg)("editor.text.icon_section.title",l,"Icon Configuration")}
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
          >
            ${(0,p.kg)("editor.text.icon_section.desc",l,"Choose an icon to display alongside the text content.")}
          </div>

          ${r.U.renderFieldSection((0,p.kg)("editor.text.icon",l,"Icon"),(0,p.kg)("editor.text.icon_desc",l,"Choose an icon to display alongside the text. Leave empty for no icon."),t,{icon:s.icon||""},[this.iconField("icon")],(e=>n(e.detail.value)))}
          ${s.icon&&""!==s.icon.trim()?o.qy`
                <div style="margin-top: 24px;">
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    ${(0,p.kg)("editor.text.icon_position",l,"Icon Position")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; font-weight: 400; margin-bottom: 12px;"
                  >
                    ${(0,p.kg)("editor.text.icon_position_desc",l,"Choose where to position the icon relative to the text.")}
                  </div>
                  <div
                    style="display: flex; gap: 8px; justify-content: flex-start; flex-wrap: wrap;"
                  >
                    <button
                      type="button"
                      style="padding: 8px 12px; border: 2px solid ${"before"===(s.icon_position||"before")?"var(--primary-color)":"var(--divider-color)"}; background: ${"before"===(s.icon_position||"before")?"var(--primary-color)":"transparent"}; color: ${"before"===(s.icon_position||"before")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                      @click=${()=>n({icon_position:"before"})}
                    >
                      <ha-icon
                        icon="mdi:format-align-left"
                        style="font-size: 16px; flex-shrink: 0;"
                      ></ha-icon>
                      <span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                        >${(0,p.kg)("editor.text.before_text",l,"Before Text")}</span
                      >
                    </button>
                    <button
                      type="button"
                      style="padding: 8px 12px; border: 2px solid ${"after"===(s.icon_position||"before")?"var(--primary-color)":"var(--divider-color)"}; background: ${"after"===(s.icon_position||"before")?"var(--primary-color)":"transparent"}; color: ${"after"===(s.icon_position||"before")?"white":"var(--primary-text-color)"}; border-radius: 6px; cursor: pointer; display: flex; align-items: center; gap: 4px; flex: 1; min-width: 0; box-sizing: border-box;"
                      @click=${()=>n({icon_position:"after"})}
                    >
                      <ha-icon
                        icon="mdi:format-align-right"
                        style="font-size: 16px; flex-shrink: 0;"
                      ></ha-icon>
                      <span style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                        >${(0,p.kg)("editor.text.after_text",l,"After Text")}</span
                      >
                    </button>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Color Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,p.kg)("editor.text.color_section.title",l,"Color Configuration")}
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
          >
            ${(0,p.kg)("editor.text.color_section.desc",l,"Configure the text and icon colors for this module.")}
          </div>

          <!-- Text Color -->
          <div class="field-container" style="margin-bottom: 24px;">
            <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
              ${(0,p.kg)("editor.text.text_color",l,"Text Color")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px;"
            >
              ${(0,p.kg)("editor.text.text_color_desc",l,"Choose the color for the text content.")}
            </div>
            <ultra-color-picker
              .value=${s.color||""}
              .defaultValue=${"var(--primary-text-color)"}
              .hass=${t}
              @value-changed=${e=>n({color:e.detail.value})}
            ></ultra-color-picker>
          </div>

          <!-- Icon Color (only show if icon is selected) -->
          ${s.icon&&""!==s.icon.trim()?o.qy`
                <div class="conditional-fields-group">
                  <div class="conditional-fields-content">
                    <div class="field-container">
                      <div
                        class="field-title"
                        style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                      >
                        ${(0,p.kg)("editor.text.icon_color",l,"Icon Color")}
                      </div>
                      <div
                        class="field-description"
                        style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px;"
                      >
                        ${(0,p.kg)("editor.text.icon_color_desc",l,"Choose the color for the icon.")}
                      </div>
                      <ultra-color-picker
                        .value=${s.icon_color||""}
                        .defaultValue=${"var(--primary-color)"}
                        .hass=${t}
                        @value-changed=${e=>n({icon_color:e.detail.value})}
                      ></ultra-color-picker>
                    </div>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Template Configuration -->
        <div
          class="settings-section template-mode-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,p.kg)("editor.text.template_mode",l,"Template Mode")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,p.kg)("editor.text.template_mode_desc",l,"Use Home Assistant templating syntax to render text")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:s.template_mode||!1}}
              .schema=${[{name:"template_mode",label:(0,p.kg)("editor.text.template_mode",l,"Template Mode"),description:(0,p.kg)("editor.text.template_mode_desc",l,"Use Home Assistant templating syntax to render text"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>n({template_mode:e.detail.value.template_mode})}
            ></ha-form>
          </div>

          ${s.template_mode?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                  >
                    ${(0,p.kg)("editor.text.value_template",l,"Value Template")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 12px; margin-bottom: 8px; color: var(--secondary-text-color);"
                  >
                    ${(0,p.kg)("editor.text.value_template_desc",l,"Template to render the text using Jinja2 syntax")}
                  </div>
                  <ultra-template-editor
                    .hass=${t}
                    .value=${s.template||""}
                    .placeholder=${"{{ states('sensor.example') }}"}
                    .minHeight=${100}
                    .maxHeight=${300}
                    @value-changed=${e=>{n({template:e.detail.value})}}
                  ></ultra-template-editor>
                </div>

                <div class="template-examples">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,p.kg)("editor.text.examples_title",l,"Common Examples:")}
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.example') }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,p.kg)("editor.text.example_basic",l,"Basic value")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.example') | int(default=0) }}%
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,p.kg)("editor.text.example_percent",l,"With percent")}
                    </div>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Text Alignment moved to Design tab per spec -->
      </div>
    `}renderActionsTab(e,t,i,o){return s.A.render(e,t,(e=>o(e)))}renderPreview(e,t,i,n){var a,r,l;const u=e,h=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";if(u.hide_if_no_link&&!this.hasActiveLink(u))return o.qy`<div class="text-module-hidden">
        ${(0,p.kg)("editor.text.hidden_no_link",h,"Hidden (no link)")}
      </div>`;const g=u,m=u.design||{},f=(()=>{const e=m.text_align;if(e&&"inherit"!==e)return e;const t=g.text_align;return t&&"inherit"!==t?t:g.alignment&&"inherit"!==g.alignment?g.alignment:"center"})(),_={fontSize:(()=>m.font_size&&"string"==typeof m.font_size&&""!==m.font_size.trim()?/[a-zA-Z%]/.test(m.font_size)?m.font_size:this.addPixelUnit(m.font_size)||m.font_size:void 0!==g.font_size?`${g.font_size}px`:"clamp(18px, 4vw, 26px)")(),fontFamily:m.font_family||g.font_family||"inherit",color:m.color||g.color||"inherit",textAlign:f,fontWeight:m.font_weight?m.font_weight:void 0!==g.font_weight?g.font_weight:"700",fontStyle:m.font_style||g.font_style||"inherit",textTransform:m.text_transform?m.text_transform:void 0!==g.text_transform?g.text_transform:"uppercase",textDecoration:"none",lineHeight:m.line_height||g.line_height||"inherit",letterSpacing:m.letter_spacing||g.letter_spacing||"inherit",margin:"0",display:"flex",alignItems:"center",justifyContent:{left:"flex-start",center:"center",right:"flex-end"}[f]||"center",gap:"8px",width:"100%",textShadow:m.text_shadow_h&&m.text_shadow_v?`${m.text_shadow_h||"0"} ${m.text_shadow_v||"0"} ${m.text_shadow_blur||"0"} ${m.text_shadow_color||"rgba(0,0,0,0.5)"}`:g.text_shadow_h&&g.text_shadow_v?`${g.text_shadow_h||"0"} ${g.text_shadow_v||"0"} ${g.text_shadow_blur||"0"} ${g.text_shadow_color||"rgba(0,0,0,0.5)"}`:"none",boxShadow:m.box_shadow_h&&m.box_shadow_v?`${m.box_shadow_h||"0"} ${m.box_shadow_v||"0"} ${m.box_shadow_blur||"0"} ${m.box_shadow_spread||"0"} ${m.box_shadow_color||"rgba(0,0,0,0.1)"}`:g.box_shadow_h&&g.box_shadow_v?`${g.box_shadow_h||"0"} ${g.box_shadow_v||"0"} ${g.box_shadow_blur||"0"} ${g.box_shadow_spread||"0"} ${g.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none"},v=u.icon?o.qy`<ha-icon
          icon="${u.icon}"
          style="color: ${u.icon_color||"var(--primary-color)"};"
        ></ha-icon>`:"";let b=u.text||"Sample Text";if(u.template_mode&&u.template&&(!this._templateService&&t&&(this._templateService=new d.I(t)),t)){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=`state_text_text_${this._hashString(u.template)}`;this._templateService&&!this._templateService.hasTemplateSubscription(e)&&this._templateService.subscribeToTemplate(u.template,e,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const i=null===(r=t.__uvc_template_strings)||void 0===r?void 0:r[e];b=void 0!==i&&""!==String(i).trim()?String(i):"Template Error: Invalid or incomplete template"}const y=o.qy`<span>${b}</span>`;let x;x="before"!==u.icon_position&&u.icon_position?"after"===u.icon_position?o.qy`${y}${v}`:y:o.qy`${v}${y}`;const k=this.hasActiveLink(u)?o.qy`<div
          class="${s.A.getClickableClass(u)}"
          style="${s.A.getClickableStyle(u)}"
          @click=${e=>this.handleClick(e,u,t)}
          @dblclick=${e=>this.handleDoubleClick(e,u,t)}
          @mousedown=${e=>this.handleMouseDown(e,u,t)}
          @mouseup=${e=>this.handleMouseUp(e,u,t)}
          @mouseleave=${e=>this.handleMouseLeave(e,u,t)}
          @touchstart=${e=>this.handleTouchStart(e,u,t)}
          @touchend=${e=>this.handleTouchEnd(e,u,t)}
        >
          ${x}
        </div>`:x,w={padding:m.padding_top||m.padding_bottom||m.padding_left||m.padding_right||g.padding_top||g.padding_bottom||g.padding_left||g.padding_right?`${this.addPixelUnit(m.padding_top||g.padding_top)||"0px"} ${this.addPixelUnit(m.padding_right||g.padding_right)||"0px"} ${this.addPixelUnit(m.padding_bottom||g.padding_bottom)||"0px"} ${this.addPixelUnit(m.padding_left||g.padding_left)||"0px"}`:"0",margin:m.margin_top||m.margin_bottom||m.margin_left||m.margin_right||g.margin_top||g.margin_bottom||g.margin_left||g.margin_right?`${m.margin_top||g.margin_top||"8px"} ${m.margin_right||g.margin_right||"0px"} ${m.margin_bottom||g.margin_bottom||"8px"} ${m.margin_left||g.margin_left||"0px"}`:"8px 0",background:m.background_color||g.background_color||"inherit",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},g),m),t),backgroundSize:m.background_size||g.background_size||"cover",backgroundPosition:m.background_position||g.background_position||"center",backgroundRepeat:m.background_repeat||g.background_repeat||"no-repeat",border:(m.border_style||g.border_style)&&"none"!==(m.border_style||g.border_style)?`${m.border_width||g.border_width||"1px"} ${m.border_style||g.border_style} ${m.border_color||g.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(m.border_radius||g.border_radius)||"inherit",position:m.position||g.position||"static",top:m.top||g.top||"auto",bottom:m.bottom||g.bottom||"auto",left:m.left||g.left||"auto",right:m.right||g.right||"auto",zIndex:m.z_index||g.z_index||"auto",width:m.width||g.width||"auto",height:m.height||g.height||"auto",maxWidth:m.max_width||g.max_width||"none",maxHeight:m.max_height||g.max_height||"none",minWidth:m.min_width||g.min_width||"auto",minHeight:m.min_height||g.min_height||"auto",overflow:m.overflow||g.overflow||"visible",clipPath:m.clip_path||g.clip_path||"none",backdropFilter:m.backdrop_filter||g.backdrop_filter||"none",boxShadow:m.box_shadow_h&&m.box_shadow_v?`${m.box_shadow_h||"0"} ${m.box_shadow_v||"0"} ${m.box_shadow_blur||"0"} ${m.box_shadow_spread||"0"} ${m.box_shadow_color||"rgba(0,0,0,0.1)"}`:g.box_shadow_h&&g.box_shadow_v?`${g.box_shadow_h||"0"} ${g.box_shadow_v||"0"} ${g.box_shadow_blur||"0"} ${g.box_shadow_spread||"0"} ${g.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"},S=null===(l=g.design)||void 0===l?void 0:l.hover_effect,O=c.k.getHoverEffectClass(S);return o.qy`
      <div
        class="text-module-container ${O}"
        style=${this.styleObjectToCss(w)}
      >
        <div class="text-module-preview" style=${this.styleObjectToCss(_)}>${k}</div>
      </div>
    `}renderLogicTab(e,t,i,o){return l.X.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors];if(t.text&&""!==t.text.trim()||i.push("Text content is required"),t.icon&&""!==t.icon.trim()&&(t.icon.includes(":")||i.push('Icon must be in format "mdi:icon-name" or "hass:icon-name"')),t.link&&""!==t.link.trim())try{new URL(t.link)}catch(e){t.link.startsWith("/")||t.link.startsWith("#")||i.push('Link must be a valid URL or start with "/" for relative paths')}return t.tap_action&&"default"!==t.tap_action.action&&"nothing"!==t.tap_action.action&&i.push(...this.validateAction(t.tap_action)),t.hold_action&&"default"!==t.hold_action.action&&"nothing"!==t.hold_action.action&&i.push(...this.validateAction(t.hold_action)),t.double_tap_action&&"default"!==t.double_tap_action.action&&"nothing"!==t.double_tap_action.action&&i.push(...this.validateAction(t.double_tap_action)),!t.template_mode||t.template&&""!==t.template.trim()||i.push("Template code is required when template mode is enabled"),{valid:0===i.length,errors:i}}hasActiveLink(e){const t=e.link&&""!==e.link.trim(),i=e.tap_action&&"default"!==e.tap_action.action&&"nothing"!==e.tap_action.action,o=e.hold_action&&"default"!==e.hold_action.action&&"nothing"!==e.hold_action.action,n=e.double_tap_action&&"default"!==e.double_tap_action.action&&"nothing"!==e.double_tap_action.action;return t||i||o||n}validateAction(e){const t=[];switch(e.action){case"more-info":case"toggle":e.entity||t.push(`Entity is required for ${e.action} action`);break;case"navigate":e.navigation_path||t.push("Navigation path is required for navigate action");break;case"url":e.url_path||t.push("URL path is required for url action");break;case"perform-action":e.perform_action||e.service||t.push("Action is required for perform-action")}return t}handleClick(e,t,i,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,i,o)}),300)}handleDoubleClick(e,t,i,o){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,i,o)}handleMouseDown(e,t,i,o){this.startHold(e,t,i,o)}handleMouseUp(e,t,i){this.endHold(e,t,i)}handleMouseLeave(e,t,i){this.endHold(e,t,i)}handleTouchStart(e,t,i,o){this.startHold(e,t,i,o)}handleTouchEnd(e,t,i){this.endHold(e,t,i)}startHold(e,t,i,o){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,i,o)}),500)}endHold(e,t,i){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTapAction(e,t,i,o){this.isHolding||(t.link&&""!==t.link.trim()?t.link.startsWith("http")||t.link.startsWith("https")?window.open(t.link,"_blank"):window.location.href=t.link:t.tap_action&&"default"!==t.tap_action.action&&"nothing"!==t.tap_action.action&&a.K.handleAction(t.tap_action,i,e.target,o))}handleDoubleAction(e,t,i,o){t.double_tap_action&&"default"!==t.double_tap_action.action&&"nothing"!==t.double_tap_action.action&&a.K.handleAction(t.double_tap_action,i,e.target,o)}handleHoldAction(e,t,i,o){t.hold_action&&"default"!==t.hold_action.action&&"nothing"!==t.hold_action.action&&a.K.handleAction(t.hold_action,i,e.target,o)}getStyles(){return`\n      .text-module-preview {\n        min-height: 20px;\n        word-wrap: break-word;\n      }\n      \n      .text-module-hidden {\n        color: var(--secondary-text-color);\n        font-style: italic;\n        text-align: center;\n        padding: 12px;\n        background: var(--secondary-background-color);\n        border-radius: 4px;\n      }\n      \n      /* Field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Conditional Fields Grouping CSS */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      .conditional-fields-group:hover {\n        background: rgba(var(--rgb-primary-color), 0.12);\n      }\n\n      .conditional-fields-header {\n        background: rgba(var(--rgb-primary-color), 0.15);\n        padding: 12px 16px;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-color);\n        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .conditional-fields-content {\n        padding: 16px;\n      }\n\n      .conditional-fields-content > .field-title:first-child {\n        margin-top: 0 !important;\n      }\n\n      @keyframes slideInFromLeft {\n        from { \n          opacity: 0; \n          transform: translateX(-10px); \n        }\n        to { \n          opacity: 1; \n          transform: translateX(0); \n        }\n      }\n\n      /* Icon picker specific styling */\n      ha-icon-picker {\n        --ha-icon-picker-width: 100%;\n        --ha-icon-picker-height: 56px;\n      }\n\n      /* Text field and select consistency */\n      ha-textfield,\n      ha-select {\n        --mdc-shape-small: 8px;\n        --mdc-theme-primary: var(--primary-color);\n      }\n\n      code {\n        background: var(--secondary-background-color);\n        padding: 2px 6px;\n        border-radius: 4px;\n        font-family: 'Courier New', monospace;\n        font-size: 0.9em;\n        color: var(--primary-color);\n      }\n\n      /* Clickable text hover styles */\n      ${s.A.getHoverStyles()}\n    `}getBackgroundImageCSS(e,t){const i=e.background_image_type,o=e.background_image,n=e.background_image_entity;switch(i){case"upload":if(o)return o.startsWith("/api/image/serve/")?`url("${this.getImageUrl(t,o)}")`:(o.startsWith("data:image/"),`url("${o}")`);break;case"entity":if(n&&t){const e=t.states[n];if(e){const t=e.attributes.entity_picture||e.attributes.image||e.state;if(t&&"unknown"!==t&&"unavailable"!==t)return`url("${t}")`}}break;case"url":if(o)return`url("${o}")`;break;default:return"none"}return"none"}getImageUrl(e,t){if(!t)return"";if(t.startsWith("http"))return t;if(t.startsWith("data:image/"))return t;if(t.includes("/api/image/serve/")){const i=t.match(/\/api\/image\/serve\/([^\/]+)/);if(i&&i[1]){const o=i[1];try{return`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}/api/image/serve/${o}/original`}catch(e){return t}}return t}return t.startsWith("/")?`${(e.hassUrl?e.hassUrl():"").replace(/\/$/,"")}${t}`:t}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_hashString(e){let t=0;for(let i=0;i<e.length;i+=1)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Math.abs(t)}}},4513:(e,t,i)=>{i.d(t,{m:()=>n});class o{constructor(){this._favorites=[],this._listeners=new Set,this._loadFromStorage(),this._setupStorageListener()}getFavorites(){return[...this._favorites].sort(((e,t)=>e.order-t.order))}addFavorite(e,t){const i={id:this._generateId(),name:e.trim(),color:t,order:this._getNextOrder()};return this._favorites.push(i),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),i}updateFavorite(e,t){var i;const o=this._favorites.findIndex((t=>t.id===e));return-1!==o&&(this._favorites[o]=Object.assign(Object.assign(Object.assign({},this._favorites[o]),t),{name:(null===(i=t.name)||void 0===i?void 0:i.trim())||this._favorites[o].name}),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),!0)}deleteFavorite(e){const t=this._favorites.findIndex((t=>t.id===e));return-1!==t&&(this._favorites[t],this._favorites.splice(t,1),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),!0)}reorderFavorites(e){const t=new Set(this._favorites.map((e=>e.id)));return!(!e.every((e=>t.has(e)))||e.length!==this._favorites.length||(e.forEach(((e,t)=>{const i=this._favorites.find((t=>t.id===e));i&&(i.order=t)})),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),0))}importFromConfig(e){if(!Array.isArray(e)||0===e.length)return;const t=new Set(this._favorites.map((e=>e.color.toLowerCase())));e.forEach((e=>{var i,o;!t.has(e.color.toLowerCase())&&this._isValidColor(e.color)&&this._favorites.push({id:e.id||this._generateId(),name:(null===(i=e.name)||void 0===i?void 0:i.trim())||"Unnamed Color",color:e.color,order:null!==(o=e.order)&&void 0!==o?o:this._getNextOrder()})})),this._saveToStorage(),this._notifyListeners(),this._broadcastChange()}exportForConfig(){return this.getFavorites()}hasColor(e){return this._favorites.some((t=>t.color.toLowerCase()===e.toLowerCase()))}subscribe(e){this._listeners.add(e);const t=this.getFavorites();return e(t),()=>{this._listeners.delete(e)}}clearAll(){this._favorites=[],this._saveToStorage(),this._notifyListeners(),this._broadcastChange()}testService(){console.log("UcFavoriteColorsService: Test method called"),console.log("Current favorites:",this._favorites),console.log("Number of listeners:",this._listeners.size);const e=this.addFavorite("Test Color","#ff0000");console.log("Test color added:",e);const t=this.getFavorites();console.log("All favorites after test add:",t)}debugFavoriteColors(){console.log("=== Ultra Card Favorite Colors Debug Info ==="),console.log("Storage Key:",o.STORAGE_KEY),console.log("Current Favorite Colors Count:",this._favorites.length),console.log("Listeners Count:",this._listeners.size),console.log("LocalStorage Available:",this._isLocalStorageAvailable());try{const e=localStorage.getItem(o.STORAGE_KEY);if(console.log("Raw Storage Data:",e?`${e.length} characters`:"null"),console.log("Storage Data Valid:",e?"Valid JSON":"No data"),e){const t=JSON.parse(e);console.log("Parsed Data Type:",Array.isArray(t)?"Array":typeof t),console.log("Parsed Data Length:",Array.isArray(t)?t.length:"N/A")}}catch(e){console.error("Storage Data Error:",e)}console.log("Favorite Colors List:",this._favorites.map((e=>({id:e.id,name:e.name,color:e.color,order:e.order})))),console.log("==========================================")}_loadFromStorage(){try{if(!this._isLocalStorageAvailable())return void(this._favorites=[]);const e=localStorage.getItem(o.STORAGE_KEY);if(e){const t=JSON.parse(e);Array.isArray(t)?this._favorites=t.filter(this._isValidFavorite.bind(this)):this._favorites=[]}else this._favorites=[]}catch(e){console.error("Failed to load favorite colors from storage:",e),this._favorites=[]}}_saveToStorage(){try{if(!this._isLocalStorageAvailable())return;const e=JSON.stringify(this._favorites);localStorage.setItem(o.STORAGE_KEY,e)}catch(e){console.error("Failed to save favorite colors to storage:",e),e instanceof DOMException&&e.code===DOMException.QUOTA_EXCEEDED_ERR?(console.error("localStorage quota exceeded! Consider clearing old data or using fewer favorite colors."),this._handleStorageQuotaExceeded()):console.error("Unknown storage error:",e)}}_setupStorageListener(){window.addEventListener("storage",(e=>{e.key===o.STORAGE_KEY&&(this._loadFromStorage(),this._notifyListeners())})),window.addEventListener(o.SYNC_EVENT,(()=>{this._loadFromStorage(),this._notifyListeners()}))}_broadcastChange(){window.dispatchEvent(new CustomEvent(o.SYNC_EVENT))}_notifyListeners(){const e=this.getFavorites();this._listeners.forEach((t=>{try{t(e)}catch(e){console.warn("Error notifying favorite colors listener:",e)}}))}_generateId(){return`fav-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}_getNextOrder(){return 0===this._favorites.length?0:Math.max(...this._favorites.map((e=>e.order)))+1}_isValidFavorite(e){return e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.color&&"number"==typeof e.order&&this._isValidColor(e.color)}_isValidColor(e){return!(!e||"string"!=typeof e)&&(e.toLowerCase().includes("gradient")?/^(linear-gradient|radial-gradient|conic-gradient|repeating-linear-gradient|repeating-radial-gradient)\(.*\)$/i.test(e.trim()):[/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/,/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/,/^hsl\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*\)$/,/^hsla\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*,\s*[\d.]+\s*\)$/,/^var\(--[\w-]+\)$/].some((t=>t.test(e)))||["transparent","red","blue","green","yellow","orange","purple","pink","brown","black","white","gray","grey","cyan","magenta","lime","navy","teal","silver","maroon","olive","aqua","fuchsia"].includes(e.toLowerCase()))}_isLocalStorageAvailable(){try{const e="__ultra_card_colors_storage_test__";return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return!1}}_handleStorageQuotaExceeded(){if(console.log("Attempting to free up storage space by removing oldest favorite colors..."),this._favorites.length<=1)return void console.error("Cannot free up space - only one or no favorite colors exist");const e=Math.max(1,Math.floor(.25*this._favorites.length)),t=[...this._favorites].sort(((e,t)=>e.order-t.order)).slice(0,this._favorites.length-e);this._favorites=t,console.log(`Removed ${e} oldest favorite colors to free up storage space`);try{const e=JSON.stringify(this._favorites);localStorage.setItem(o.STORAGE_KEY,e),console.log("Successfully saved favorite colors after cleanup"),this._notifyListeners(),this._broadcastChange()}catch(e){console.error("Still cannot save after cleanup:",e)}}}o.STORAGE_KEY="ultra-card-favorite-colors",o.SYNC_EVENT="ultra-card-favorite-colors-changed";const n=new o;"undefined"!=typeof window&&(window.ucFavoriteColorsService=n,window.debugUltraCardFavoriteColors=()=>n.debugFavoriteColors())},4790:(e,t,i)=>{i.d(t,{R:()=>h});var o=i(5183),n=i(456),a=i(866);class r{static getInstance(){return r.instance||(r.instance=new r),r.instance}setHass(e){this.hass=e}async executeAction(e){if(this.hass&&e.action_type&&"none"!==e.action_type)try{if(e.confirmation&&!confirm(e.confirmation.text||"Are you sure?"))return;switch(e.action_type){case"toggle":e.entity&&await this.hass.callService("homeassistant","toggle",{entity_id:e.entity});break;case"show_more_info":if(e.entity){const t=new CustomEvent("hass-more-info",{detail:{entityId:e.entity},bubbles:!0,composed:!0});document.dispatchEvent(t)}break;case"navigate":if(e.navigation_path){history.pushState(null,"",e.navigation_path);const t=new CustomEvent("location-changed",{detail:{replace:!1},bubbles:!0,composed:!0});window.dispatchEvent(t)}break;case"url":if(e.url||e.url_path){const t=e.url||e.url_path||"";window.open(t,"_blank")}break;case"call_service":if(e.service){const[t,i]=e.service.split(".");t&&i&&await this.hass.callService(t,i,e.service_data,e.target)}break;case"perform_action":if(e.custom_action){const t=new CustomEvent("action",{detail:{action:"tap",config:e.custom_action},bubbles:!0,composed:!0});document.dispatchEvent(t)}break;case"show_map":if(e.latitude&&e.longitude){const t=`/map?latitude=${e.latitude}&longitude=${e.longitude}`;history.pushState(null,"",t);const i=new CustomEvent("location-changed",{detail:{replace:!1},bubbles:!0,composed:!0});window.dispatchEvent(i)}break;case"voice_assistant":if(!1!==e.start_listening){const e=new CustomEvent("hass-start-voice-conversation",{bubbles:!0,composed:!0});document.dispatchEvent(e)}break;case"trigger":e.entity&&await this.hass.callService("automation","trigger",{entity_id:e.entity});break;default:console.warn("Unknown action type:",e.action_type)}}catch(e){console.error("Error executing action:",e)}}getActionTypeOptions(){return[{value:"none",label:"No Action"},{value:"toggle",label:"Toggle"},{value:"show_more_info",label:"Show More Info"},{value:"navigate",label:"Navigate to Path"},{value:"url",label:"Open URL"},{value:"call_service",label:"Call Service"},{value:"perform_action",label:"Perform Action"},{value:"show_map",label:"Show Map"},{value:"voice_assistant",label:"Voice Assistant"},{value:"trigger",label:"Trigger"}]}validateAction(e){const t=[];if(!e.action_type||"none"===e.action_type)return{valid:!0,errors:[]};switch(e.action_type){case"toggle":case"show_more_info":case"trigger":e.entity||t.push("Entity is required for this action type");break;case"navigate":e.navigation_path||t.push("Navigation path is required");break;case"url":e.url||e.url_path||t.push("URL is required");break;case"call_service":e.service?e.service.includes(".")||t.push("Service must be in domain.service format"):t.push("Service is required");break;case"show_map":void 0!==e.latitude&&void 0!==e.longitude||t.push("Latitude and longitude are required for map action")}return{valid:0===t.length,errors:t}}renderActionForm(e,t,i){return{action:t,actionTypes:this.getActionTypeOptions(),onUpdate:i,validate:()=>this.validateAction(t)}}}const s=r.getInstance();var l=i(9662),d=i(2371),c=i(796),p=i(7987),u=(i(6768),i(2381));class h extends a.m{constructor(){super(...arguments),this.metadata={type:"button",title:"Button",description:"Interactive buttons with actions",author:"WJD Designs",version:"1.0.0",icon:"mdi:gesture-tap-button",category:"interactive",tags:["button","action","click","interactive"]}}createDefault(e,t){return{id:e||this.generateId("button"),type:"button",label:"",action:{action_type:"none"},style:"flat",icon:"",icon_position:"before",show_icon:!1,background_color:"var(--primary-color)",text_color:"white",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}getButtonStyles(e){return[{value:"flat",label:(0,n.kg)("editor.button.styles.flat",e,"Flat (Default)")},{value:"glossy",label:(0,n.kg)("editor.button.styles.glossy",e,"Glossy")},{value:"embossed",label:(0,n.kg)("editor.button.styles.embossed",e,"Embossed")},{value:"inset",label:(0,n.kg)("editor.button.styles.inset",e,"Inset")},{value:"gradient-overlay",label:(0,n.kg)("editor.button.styles.gradient_overlay",e,"Gradient Overlay")},{value:"neon-glow",label:(0,n.kg)("editor.button.styles.neon_glow",e,"Neon Glow")},{value:"outline",label:(0,n.kg)("editor.button.styles.outline",e,"Outline")},{value:"glass",label:(0,n.kg)("editor.button.styles.glass",e,"Glass")},{value:"metallic",label:(0,n.kg)("editor.button.styles.metallic",e,"Metallic")}]}getAlignmentOptions(e){return[{value:"left",label:(0,n.kg)("editor.button.align.left",e,"Left")},{value:"center",label:(0,n.kg)("editor.button.align.center",e,"Center")},{value:"right",label:(0,n.kg)("editor.button.align.right",e,"Right")},{value:"justify",label:(0,n.kg)("editor.button.align.justify",e,"Justify (Full Width)")}]}getIconPositionOptions(e){return[{value:"before",label:(0,n.kg)("editor.button.icon.before",e,"Before Text")},{value:"after",label:(0,n.kg)("editor.button.icon.after",e,"After Text")}]}renderGeneralTab(e,t,i,a){var r;const s=e,l=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}
      <div class="general-tab">
        <!-- Basic Settings -->
        ${this.renderSettingsSection((0,n.kg)("editor.button.basic.title",l,"Basic Settings"),(0,n.kg)("editor.button.basic.desc",l,"Configure the button appearance and text content."),[{title:(0,n.kg)("editor.button.text.title",l,"Button Text"),description:(0,n.kg)("editor.button.text.desc",l,"Text to display on the button (leave blank for icon-only)."),hass:t,data:s,schema:[this.textField("label")],onChange:e=>a(e.detail.value)},{title:(0,n.kg)("editor.button.style.title",l,"Button Style"),description:(0,n.kg)("editor.button.style.desc",l,"Visual style of the button"),hass:t,data:{style:s.style||"flat"},schema:[this.selectField("style",this.getButtonStyles(l))],onChange:e=>{e.detail.value.style!==(s.style||"flat")&&(a(e.detail.value),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}},{title:(0,n.kg)("editor.button.alignment.title",l,"Alignment"),description:(0,n.kg)("editor.button.alignment.desc",l,"How the button is aligned within its container"),hass:t,data:{alignment:s.alignment||"center"},schema:[this.selectField("alignment",this.getAlignmentOptions(l))],onChange:e=>{e.detail.value.alignment!==(s.alignment||"center")&&(a(e.detail.value),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}}])}

        <!-- Icon Settings -->
        <div class="settings-section">
          <div class="section-title">
            ${(0,n.kg)("editor.button.icon.title",l,"Icon Settings")}
          </div>

          <!-- Icon Field - Always visible -->
          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.button.icon_field",l,"Icon"),(0,n.kg)("editor.button.icon_desc",l,"Icon to display (e.g., mdi:home). Selecting an icon will automatically enable icon display."),t,{icon:s.icon||""},[this.iconField("icon")],(e=>{const t=e.detail.value;t.icon&&t.icon.trim()?(t.show_icon=!0,s.icon_position||(t.icon_position="before")):t.icon&&t.icon.trim()||(t.show_icon=!1),a(t)}))}
          </div>

          ${s.show_icon&&s.icon?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,n.kg)("editor.button.icon_position",l,"Icon Position"),(0,n.kg)("editor.button.icon_position_desc",l,"Position of the icon relative to text"),t,{icon_position:s.icon_position||"before"},[this.selectField("icon_position",this.getIconPositionOptions(l))],(e=>{e.detail.value.icon_position!==(s.icon_position||"before")&&(a(e.detail.value),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
                </div>
              `:""}
        </div>

        <!-- Colors -->
        <div class="settings-section">
          <div class="section-title">${(0,n.kg)("editor.button.colors.title",l,"Colors")}</div>

          <div class="color-controls">
            <ultra-color-picker
              .label=${(0,n.kg)("editor.button.colors.background",l,"Background Color")}
              .value=${s.background_color||"var(--primary-color)"}
              .defaultValue=${"var(--primary-color)"}
              .hass=${t}
              @value-changed=${e=>a({background_color:e.detail.value})}
            ></ultra-color-picker>

            <ultra-color-picker
              .label=${(0,n.kg)("editor.button.colors.text",l,"Text Color")}
              .value=${s.text_color||"white"}
              .defaultValue=${"white"}
              .hass=${t}
              @value-changed=${e=>a({text_color:e.detail.value})}
            ></ultra-color-picker>
          </div>
        </div>

        <!-- Link Action removed: use global Tap/Hold/Double-Tap actions instead -->
      </div>
    `}renderLinkActionForm(e,t,i){const n=s.getActionTypeOptions();return o.qy`
      <div class="link-action-form">
        <!-- Action Type -->
        <div class="field-group" style="margin-bottom: 16px;">
          ${this.renderFieldSection("Action Type","Choose what happens when the button is clicked",t,{action_type:e.action_type||"none"},[this.selectField("action_type",n)],(t=>{const o=t.detail.value.action_type;o!==(e.action_type||"none")&&(i(Object.assign(Object.assign({},e),{action_type:o})),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}))}
        </div>

        ${this.renderActionTypeSpecificFields(e,t,i)}
      </div>
    `}renderActionTypeSpecificFields(e,t,i){switch(e.action_type){case"toggle":case"show_more_info":case"trigger":return this.renderFieldSection("Entity","Select the entity to interact with",t,{entity:e.entity||""},[this.entityField("entity")],(t=>i(Object.assign(Object.assign({},e),{entity:t.detail.value.entity}))));case"navigate":return this.renderFieldSection("Navigation Path","Path to navigate to (e.g., /dashboard/energy)",t,{navigation_path:e.navigation_path||""},[this.textField("navigation_path")],(t=>i(Object.assign(Object.assign({},e),{navigation_path:t.detail.value.navigation_path}))));case"url":return this.renderFieldSection("URL","URL to open (e.g., https://example.com)",t,{url:e.url||""},[this.textField("url")],(t=>i(Object.assign(Object.assign({},e),{url:t.detail.value.url}))));case"call_service":return o.qy`
          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection("Service","Service to call (e.g., light.turn_on)",t,{service:e.service||""},[this.textField("service")],(t=>i(Object.assign(Object.assign({},e),{service:t.detail.value.service}))))}
          </div>

          <div class="field-group">
            ${this.renderFieldSection("Service Data (JSON)","Optional data to pass to the service (JSON format)",t,{service_data:JSON.stringify(e.service_data||{})},[this.textField("service_data")],(t=>{try{const o=JSON.parse(t.detail.value.service_data||"{}");i(Object.assign(Object.assign({},e),{service_data:o}))}catch(e){console.warn("Invalid JSON in service data")}}))}
          </div>
        `;default:return o.qy``}}renderActionsTab(e,t,i,o){const n=e;return l.A.render(n,t,(e=>o(e)))}renderButtonActionConfig(e,t,i){return o.qy`
      <div style="margin-bottom: 16px;">
        ${this.renderSingleActionConfig("Tap Action","Action to perform when button is tapped",e.tap_action||{action:"nothing"},t,(e=>i({tap_action:e})))}
      </div>

      <div style="margin-bottom: 16px;">
        ${this.renderSingleActionConfig("Hold Action","Action to perform when button is held down",e.hold_action||{action:"nothing"},t,(e=>i({hold_action:e})))}
      </div>

      <div style="margin-bottom: 16px;">
        ${this.renderSingleActionConfig("Double Tap Action","Action to perform when button is double-tapped",e.double_tap_action||{action:"nothing"},t,(e=>i({double_tap_action:e})))}
      </div>
    `}renderSingleActionConfig(e,t,i,n,a){return o.qy`
      <div style="margin-bottom: 16px;">
        <div
          class="field-title"
          style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
        >
          ${e}
        </div>
        <div style="margin-bottom: 12px;">
          <ha-form
            .hass=${n}
            .data=${{action_config:"nothing"===(null==i?void 0:i.action)?Object.assign(Object.assign({},i),{action:"default"}):i}}
            .schema=${[{name:"action_config",label:"",selector:{ui_action:{actions:["default","more-info","toggle","navigate","url","perform-action","assist"]}}}]}
            .computeLabel=${e=>e.label||""}
            .computeDescription=${e=>e.description||""}
            @value-changed=${e=>{var t;const i=null===(t=e.detail.value)||void 0===t?void 0:t.action_config;i&&a(i)}}
          ></ha-form>
        </div>
      </div>
    `}renderPreview(e,t,i,n){var a,r;const l=e,d=l,u=l.design||{},h=u.color||l.text_color||"white",g=u.font_size||"14px",m=u.background_color||l.background_color||"var(--primary-color)",f=l.style||"flat",_={flat:`background: ${m}; border: none; box-shadow: none;`,glossy:`background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0)) , ${m}; border: none;`,embossed:`background: ${m}; border: 1px solid rgba(0,0,0,0.15); box-shadow: inset 0 2px 2px rgba(255,255,255,0.2), inset 0 -2px 2px rgba(0,0,0,0.15);`,inset:`background: ${m}; border: none; box-shadow: inset 0 2px 6px rgba(0,0,0,0.35);`,"gradient-overlay":`background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(0,0,0,0.15)), ${m}; border: none;`,"neon-glow":`background: ${m}; border: none; box-shadow: 0 0 10px ${m}, 0 0 20px ${m};`,outline:`background: transparent; border: 2px solid ${m}; color: ${m};`,glass:`background: ${m}; backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.25);`,metallic:"background: linear-gradient(90deg, #d7d7d7, #f0f0f0 50%, #d7d7d7); color: #333; border: 1px solid #bbb;"},v=`\n      color: ${h};\n      padding: 12px 24px;\n      font-size: ${g};\n      font-weight: 500;\n      border-radius: 8px;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 8px;\n      min-height: 40px;\n     ${_[f]||_.flat}`,b=`\n      display: flex;\n      justify-content: ${"left"===l.alignment?"flex-start":"right"===l.alignment?"flex-end":"center"};\n    `,y={width:"100%",height:"auto",maxWidth:"none",maxHeight:"none",minWidth:"auto",minHeight:"auto",padding:u.padding_top||u.padding_bottom||u.padding_left||u.padding_right?`${u.padding_top||"0px"} ${u.padding_right||"0px"} ${u.padding_bottom||"0px"} ${u.padding_left||"0px"}`:"0",margin:u.margin_top||u.margin_bottom||u.margin_left||u.margin_right?`${u.margin_top||"8px"} ${u.margin_right||"0px"} ${u.margin_bottom||"8px"} ${u.margin_left||"0px"}`:"8px 0",background:u.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},d),u),t),"background-size":"cover","background-position":"center","background-repeat":"no-repeat","border-radius":u.border_radius||"8px",border:u.border_style&&"none"!==u.border_style?`${u.border_width||"1px"} ${u.border_style} ${u.border_color||"var(--divider-color)"}`:"none","box-shadow":u.box_shadow_h||u.box_shadow_v||u.box_shadow_blur||u.box_shadow_spread?`${u.box_shadow_h||"0px"} ${u.box_shadow_v||"0px"} ${u.box_shadow_blur||"0px"} ${u.box_shadow_spread||"0px"} ${u.box_shadow_color||"rgba(0,0,0,.2)"}`:"none","box-sizing":"border-box"};let x=null,k=null,w=!1,S=0,O=0;const A=null===(a=l.design)||void 0===a?void 0:a.hover_effect,C=p.k.getHoverEffectClass(A);return o.qy`
      <div class="button-module-container" style=${this.styleObjectToCss(y)}>
        <div class="button-module-preview" style="${b}">
          <button
            class="ultra-button ${f} ${"justify"===l.alignment?"justify":""} ${C}"
            style="${v} ${"justify"===l.alignment?"width: 100%;":u.width||d.width?`width: ${u.width||d.width};`:""} ${u.height||d.height?`height: ${u.height||d.height};`:""} ${u.max_width||d.max_width?`max-width: ${u.max_width||d.max_width};`:""} ${u.max_height||d.max_height?`max-height: ${u.max_height||d.max_height};`:""} ${u.min_width||d.min_width?`min-width: ${u.min_width||d.min_width};`:""} ${u.min_height||d.min_height?`min-height: ${u.min_height||d.min_height};`:""} ${u.text_align?`text-align:${u.text_align};`:""} ${u.text_shadow_h||u.text_shadow_v||u.text_shadow_blur||u.text_shadow_color?`text-shadow:${u.text_shadow_h||"0px"} ${u.text_shadow_v||"0px"} ${u.text_shadow_blur||"0px"} ${u.text_shadow_color||"rgba(0,0,0,.2)"};`:""}"
            @pointerdown=${e=>{e.preventDefault(),w=!1,k=setTimeout((()=>{w=!0,l.hold_action&&"nothing"!==l.hold_action.action&&c.K.handleAction(l.hold_action,t,e.target,i)}),500)}}
            @pointerup=${e=>{if(e.preventDefault(),k&&(clearTimeout(k),k=null),w)return void(w=!1);const o=Date.now();o-O<300&&1===S?(x&&(clearTimeout(x),x=null),S=0,l.double_tap_action&&"nothing"===l.double_tap_action.action||c.K.handleAction(l.double_tap_action||{action:"default"},t,e.target,i,l.entity)):(S=1,O=o,x=setTimeout((()=>{S=0,l.tap_action&&"nothing"===l.tap_action.action?l.action&&(s.setHass(t),s.executeAction(l.action)):c.K.handleAction(l.tap_action||{action:"default"},t,e.target,i,l.entity)}),300))}}
          >
            ${l.show_icon&&l.icon&&"before"===l.icon_position?o.qy`<ha-icon icon="${l.icon}"></ha-icon>`:""}
            ${null!==(r=l.label)&&void 0!==r?r:""}
            ${l.show_icon&&l.icon&&"after"===l.icon_position?o.qy`<ha-icon icon="${l.icon}"></ha-icon>`:""}
          </button>
        </div>
      </div>
    `}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t}`)).join("; ")}getBackgroundImageCSS(e,t){var i,o;const n=e.background_image_type,a=e.background_image,r=e.background_image_entity;if(!n||"none"===n)return"none";switch(n){case"upload":if(a)return`url("${(0,u.V)(t,a)}")`;break;case"url":if(a)return`url("${a}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const n=(null===(i=e.attributes)||void 0===i?void 0:i.entity_picture)||(null===(o=e.attributes)||void 0===o?void 0:o.image)||("string"==typeof e.state?e.state:"");if(n&&"unknown"!==n&&"unavailable"!==n)return`url("${(0,u.V)(t,n)}")`}}}return"none"}renderLogicTab(e,t,i,o){return d.X.render(e,t,(e=>o(e)))}}},4866:(e,t,i)=>{function o(e,t,i=400){}i.d(t,{z:()=>o})},4885:(e,t,i)=>{i.d(t,{mN:()=>O,AH:()=>l,W3:()=>k,Ec:()=>w});const o=globalThis,n=o.ShadowRoot&&(void 0===o.ShadyCSS||o.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,a=Symbol(),r=new WeakMap;class s{constructor(e,t,i){if(this._$cssResult$=!0,i!==a)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(n&&void 0===e){const i=void 0!==t&&1===t.length;i&&(e=r.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&r.set(t,e))}return e}toString(){return this.cssText}}const l=(e,...t)=>{const i=1===e.length?e[0]:t.reduce(((t,i,o)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+e[o+1]),e[0]);return new s(i,e,a)},d=(e,t)=>{if(n)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const i of t){const t=document.createElement("style"),n=o.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=i.cssText,e.appendChild(t)}},c=n?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const i of e.cssRules)t+=i.cssText;return(e=>new s("string"==typeof e?e:e+"",void 0,a))(t)})(e):e,{is:p,defineProperty:u,getOwnPropertyDescriptor:h,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:f}=Object,_=globalThis,v=_.trustedTypes,b=v?v.emptyScript:"",y=_.reactiveElementPolyfillSupport,x=(e,t)=>e,k={toAttribute(e,t){switch(t){case Boolean:e=e?b:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let i=e;switch(t){case Boolean:i=null!==e;break;case Number:i=null===e?null:Number(e);break;case Object:case Array:try{i=JSON.parse(e)}catch(e){i=null}}return i}},w=(e,t)=>!p(e,t),S={attribute:!0,type:String,converter:k,reflect:!1,hasChanged:w};Symbol.metadata??=Symbol("metadata"),_.litPropertyMetadata??=new WeakMap;class O extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=S){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const i=Symbol(),o=this.getPropertyDescriptor(e,i,t);void 0!==o&&u(this.prototype,e,o)}}static getPropertyDescriptor(e,t,i){const{get:o,set:n}=h(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return o?.call(this)},set(t){const a=o?.call(this);n.call(this,t),this.requestUpdate(e,a,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??S}static _$Ei(){if(this.hasOwnProperty(x("elementProperties")))return;const e=f(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(x("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(x("properties"))){const e=this.properties,t=[...g(e),...m(e)];for(const i of t)this.createProperty(i,e[i])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,i]of t)this.elementProperties.set(e,i)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const i=this._$Eu(e,t);void 0!==i&&this._$Eh.set(i,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)t.unshift(c(e))}else void 0!==e&&t.push(c(e));return t}static _$Eu(e,t){const i=t.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const i of t.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return d(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,i){this._$AK(e,i)}_$EC(e,t){const i=this.constructor.elementProperties.get(e),o=this.constructor._$Eu(e,i);if(void 0!==o&&!0===i.reflect){const n=(void 0!==i.converter?.toAttribute?i.converter:k).toAttribute(t,i.type);this._$Em=e,null==n?this.removeAttribute(o):this.setAttribute(o,n),this._$Em=null}}_$AK(e,t){const i=this.constructor,o=i._$Eh.get(e);if(void 0!==o&&this._$Em!==o){const e=i.getPropertyOptions(o),n="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:k;this._$Em=o,this[o]=n.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,i){if(void 0!==e){if(i??=this.constructor.getPropertyOptions(e),!(i.hasChanged??w)(this[e],t))return;this.P(e,t,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(e,t,i){this._$AL.has(e)||this._$AL.set(e,t),!0===i.reflect&&this._$Em!==e&&(this._$Ej??=new Set).add(e)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,i]of e)!0!==i.wrapped||this._$AL.has(t)||void 0===this[t]||this.P(t,this[t],i)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EU()}catch(t){throw e=!1,this._$EU(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Ej&&=this._$Ej.forEach((e=>this._$EC(e,this[e]))),this._$EU()}updated(e){}firstUpdated(e){}}O.elementStyles=[],O.shadowRootOptions={mode:"open"},O[x("elementProperties")]=new Map,O[x("finalized")]=new Map,y?.({ReactiveElement:O}),(_.reactiveElementVersions??=[]).push("2.0.4")},5183:(e,t,i)=>{i.d(t,{WF:()=>a,AH:()=>o.AH,qy:()=>n.qy,JW:()=>n.JW});var o=i(4885),n=i(9247);class a extends o.mN{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,n.XX)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return n.c0}}a._$litElement$=!0,a.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:a});const r=globalThis.litElementPolyfillSupport;r?.({LitElement:a}),(globalThis.litElementVersions??=[]).push("4.1.1")},5201:(e,t,i)=>{i.d(t,{OA:()=>o,WL:()=>a,u$:()=>n});const o={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},n=e=>(...t)=>({_$litDirective$:e,values:t});class a{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,i){this._$Ct=e,this._$AM=t,this._$Ci=i}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}},5400:(e,t,i)=>{i.d(t,{s:()=>o});class o{static getEntityIcon(e,t){if(!e||!(null==t?void 0:t.states[e]))return null;const i=t.states[e];return this._getHomeAssistantComputedIcon(e,i,t)||this._getEnhancedIconForEntity(e,i)}static _getHomeAssistantComputedIcon(e,t,i){var o,n,a,r,s;if(null===(o=t.attributes)||void 0===o?void 0:o.icon)return t.attributes.icon;try{if(null===(a=null===(n=window.customCards)||void 0===n?void 0:n.helpers)||void 0===a?void 0:a.stateIcon){const e=window.customCards.helpers.stateIcon(t);if(e)return e}const o=[window.stateIcon,window.computeStateIcon,window.computeEntityIcon,null===(r=window.hassIcons)||void 0===r?void 0:r.stateIcon,null===(s=window.hassIcons)||void 0===s?void 0:s.computeStateIcon,i.stateIcon,i.computeStateIcon,i.computeEntityIcon];for(const e of o)if("function"==typeof e)try{const i=e(t);if(i)return i}catch(e){}if(i.entities&&i.entities[e]){const t=i.entities[e];if(t.icon)return t.icon}if(e.startsWith("weather.")){const e={"clear-night":"mdi:weather-night",cloudy:"mdi:weather-cloudy",fog:"mdi:weather-fog",hail:"mdi:weather-hail",lightning:"mdi:weather-lightning","lightning-rainy":"mdi:weather-lightning-rainy",partlycloudy:"mdi:weather-partly-cloudy",pouring:"mdi:weather-pouring",rainy:"mdi:weather-rainy",snowy:"mdi:weather-snowy","snowy-rainy":"mdi:weather-snowy-rainy",sunny:"mdi:weather-sunny",windy:"mdi:weather-windy","windy-variant":"mdi:weather-windy-variant",exceptional:"mdi:weather-exceptional"},i=t.state;if(e[i])return e[i]}}catch(e){console.debug("Failed to compute HA icon, falling back to enhanced detection:",e)}return null}static _getEnhancedIconForEntity(e,t){var i,o,n;const a=e.split(".")[0],r=e.split(".")[1]||"",s=null===(i=t.attributes)||void 0===i?void 0:i.device_class,l=null===(o=t.attributes)||void 0===o?void 0:o.unit_of_measurement,d=(null===(n=t.attributes)||void 0===n?void 0:n.friendly_name)||"",c=t.state,p=r.toLowerCase(),u=d.toLowerCase();return this._isBatteryRelated(p,u,s,l)?this._isChargingRelated(p,u)?this._getChargingBatteryIcon(c,l):this._getBatteryIcon(c,l):this._isTemperatureRelated(p,u,s,l)?"mdi:thermometer":this._isHumidityRelated(p,u,s,l)?"mdi:water-percent":this._isPowerRelated(p,u,s,l)?"mdi:flash":this._isSignalRelated(p,u)?"mdi:wifi":"binary_sensor"===a&&this._isDoorWindowRelated(p,u)?"on"===c?"mdi:door-open":"mdi:door-closed":"binary_sensor"===a&&this._isMotionRelated(p,u)?"on"===c?"mdi:motion-sensor":"mdi:motion-sensor-off":this._isIlluminanceRelated(p,u,s,l)?"mdi:brightness-5":this._isPressureRelated(p,u,s,l)?"mdi:gauge":this._getDefaultIconForDomain(a,s,c)}static _isBatteryRelated(e,t,i,o){return"battery"===i||e.includes("battery")||e.includes("charge")||e.includes("power_level")||t.includes("battery")||t.includes("charge")||"%"===o}static _isChargingRelated(e,t){return["charging","charge_target","charging_target","charge_limit"].some((i=>e.includes(i)||t.toLowerCase().includes(i)))}static _getBatteryIcon(e,t){const i=parseFloat(e);return isNaN(i)?"mdi:battery-unknown":i>=95?"mdi:battery":i>=85?"mdi:battery-90":i>=75?"mdi:battery-80":i>=65?"mdi:battery-70":i>=55?"mdi:battery-60":i>=45?"mdi:battery-50":i>=35?"mdi:battery-40":i>=25?"mdi:battery-30":i>=15?"mdi:battery-20":i>=5?"mdi:battery-10":"mdi:battery-alert"}static _getChargingBatteryIcon(e,t){const i=parseFloat(e);return isNaN(i)?"mdi:battery-charging":i>=95?"mdi:battery-charging-100":i>=85?"mdi:battery-charging-90":i>=75?"mdi:battery-charging-80":i>=65?"mdi:battery-charging-70":i>=55?"mdi:battery-charging-60":i>=45?"mdi:battery-charging-50":i>=35?"mdi:battery-charging-40":i>=25?"mdi:battery-charging-30":i>=15?"mdi:battery-charging-20":i>=5?"mdi:battery-charging-10":"mdi:battery-charging-outline"}static _isTemperatureRelated(e,t,i,o){return"temperature"===i||e.includes("temp")||t.includes("temperature")||"°C"===o||"°F"===o||"K"===o}static _isHumidityRelated(e,t,i,o){return"humidity"===i||e.includes("humidity")||t.includes("humidity")||"%"===o&&(e.includes("humid")||t.includes("humid"))}static _isPowerRelated(e,t,i,o){return"power"===i||"energy"===i||e.includes("power")||e.includes("energy")||e.includes("consumption")||"W"===o||"kW"===o||"kWh"===o||"Wh"===o}static _isSignalRelated(e,t){return["signal","rssi","wifi","network"].some((i=>e.includes(i)||t.toLowerCase().includes(i)))}static _isDoorWindowRelated(e,t){return["door","window","gate"].some((i=>e.includes(i)||t.toLowerCase().includes(i)))}static _isMotionRelated(e,t){return["motion","movement","occupancy","presence"].some((i=>e.includes(i)||t.toLowerCase().includes(i)))}static _isIlluminanceRelated(e,t,i,o){return"illuminance"===i||e.includes("illuminance")||e.includes("brightness")||e.includes("lux")||"lx"===o||"lux"===o}static _isPressureRelated(e,t,i,o){return"pressure"===i||e.includes("pressure")||t.includes("pressure")||"hPa"===o||"mbar"===o||"Pa"===o||"psi"===o}static _getDefaultIconForDomain(e,t,i){return{alarm_control_panel:"mdi:shield",automation:"mdi:robot",binary_sensor:"mdi:radiobox-blank",button:"mdi:button-pointer",calendar:"mdi:calendar",camera:"mdi:video",climate:"mdi:thermostat",cover:"mdi:window-shutter",device_tracker:"mdi:account",fan:"mdi:fan",group:"mdi:google-circles-communities",humidifier:"mdi:air-humidifier",input_boolean:"mdi:toggle-switch",input_button:"mdi:button-pointer",input_datetime:"mdi:calendar-clock",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:form-textbox",light:"mdi:lightbulb",lock:"mdi:lock",media_player:"mdi:speaker",number:"mdi:ray-vertex",person:"mdi:account",plant:"mdi:flower",remote:"mdi:remote",scene:"mdi:palette",script:"mdi:script-text",select:"mdi:format-list-bulleted",sensor:"mdi:eye",siren:"mdi:bullhorn",sun:"mdi:white-balance-sunny",switch:"mdi:toggle-switch",timer:"mdi:timer",vacuum:"mdi:robot-vacuum",water_heater:"mdi:thermometer",weather:"mdi:weather-partly-cloudy",zone:"mdi:map-marker"}[e]||"mdi:eye"}}},5575:(e,t,i)=>{i.d(t,{U:()=>a});var o=i(5183);let n=!1;class a{static renderForm(e,t,i,a,r=!1){return o.qy`
      <ha-form
        .hass=${e}
        .data=${t}
        .schema=${i}
        .computeLabel=${r?this._defaultComputeLabel:this._hideLabels}
        .computeDescription=${r?this._defaultComputeDescription:this._hideDescriptions}
        @value-changed=${e=>{n||(n=!0,requestAnimationFrame((()=>{n=!1})),a(e))}}
      ></ha-form>
    `}static renderFieldSection(e,t,i,n,r,s){return o.qy`
      <div class="field-section" style="margin-bottom: 16px;">
        ${e?o.qy`<div
              class="field-title"
              style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
            >
              ${e}
            </div>`:""}
        ${t?o.qy`<div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
            >
              ${t}
            </div>`:""}
        ${a.renderForm(i,n,r,s,!1)}
      </div>
    `}static renderSettingsSection(e,t,i){return o.qy`
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
      >
        ${e?o.qy`
              <div
                class="section-title"
                style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
              >
                ${e}
              </div>
            `:""}
        ${t?o.qy`
              <div
                style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; opacity: 0.8; line-height: 1.4;"
              >
                ${t}
              </div>
            `:""}
        ${i.map((e=>a.renderFieldSection(e.title,e.description,e.hass,e.data,e.schema,e.onChange)))}
      </div>
    `}static entity(e,t){return{name:e,selector:{entity:t?{domain:t}:{}}}}static text(e,t=!1){return{name:e,selector:{text:t?{multiline:!0}:{}}}}static select(e,t){return{name:e,selector:{select:{options:t,mode:"dropdown"}}}}static icon(e){return{name:e,selector:{icon:{}}}}static boolean(e){return{name:e,selector:{boolean:{}}}}static number(e,t,i,o){const n={};return void 0!==t&&(n.min=t),void 0!==i&&(n.max=i),void 0!==o&&(n.step=o),{name:e,selector:{number:Object.keys(n).length?n:{}}}}static color(e){return{name:e,selector:{color_rgb:{}}}}static grid(e){return{type:"grid",name:"",schema:e}}static expandable(e,t,i){return{type:"expandable",name:e,title:t,schema:i}}static getCleanFormStyles(){return"\n      .field-section {\n        margin-bottom: 16px;\n      }\n\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n       \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      .settings-section {\n        margin-bottom: 16px;\n        max-width: 100%;\n        box-sizing: border-box;\n      }\n\n      /* Ensure form elements are properly sized */\n      ha-form {\n        display: block;\n        width: 100%;\n      }\n\n      ha-form ha-select,\n      ha-form ha-textfield,\n      ha-form ha-entity-picker,\n      ha-form ha-icon-picker {\n        width: 100%;\n        --mdc-theme-primary: var(--primary-color);\n      }\n\n      /* Gap control styles - Standardized Slider Pattern */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    "}static injectCleanFormStyles(){return o.qy`
      <style>
        ${a.getCleanFormStyles()}
      </style>
    `}static getLayoutNestingDepth(e,t=0){if("horizontal"!==e.type&&"vertical"!==e.type)return t;let i=t+1;const o=e;if(o.modules&&o.modules.length>0)for(const e of o.modules){const o=a.getLayoutNestingDepth(e,t+1);i=Math.max(i,o)}return i}static validateNestingDepth(e,t,i=3){if("horizontal"!==e.type&&"vertical"!==e.type)return{valid:!0};if("horizontal"!==t.type&&"vertical"!==t.type)return{valid:!0};const o=a.getLayoutNestingDepth(e)+a.getLayoutNestingDepth(t);return o>i?{valid:!1,error:`Layout modules cannot be nested more than ${i-1} levels deep. This would create ${o-1} levels of layout nesting.`}:{valid:!0}}}a._hideLabels=()=>"",a._defaultComputeLabel=e=>e.name,a._hideDescriptions=()=>"",a._defaultComputeDescription=e=>e.description||""},5649:(e,t,i)=>{i.d(t,{f:()=>h});var o=i(5183),n=i(866),a=i(796),r=i(3057),s=i(9662),l=i(2371),d=i(5400),c=i(4345),p=i(7987),u=i(456);i(6768),i(7487);class h extends n.m{constructor(){super(...arguments),this.metadata={type:"info",title:"Info Items",description:"Show entity information values",author:"WJD Designs",version:"1.0.0",icon:"mdi:information",category:"data",tags:["info","entity","data","sensors"]},this._templateInputDebounce=null,this.clickTimeout=null,this.holdTimeout=null,this.isHolding=!1}createDefault(e,t){return{id:e||this.generateId("info"),type:"info",info_entities:[{id:this.generateId("entity"),entity:"weather.forecast_home",name:"Temperature",icon:"mdi:thermometer",show_icon:!0,show_name:!0,show_state:!0,show_units:!0,text_size:14,name_size:12,icon_size:26,text_bold:!1,text_italic:!1,text_uppercase:!1,text_strikethrough:!1,name_bold:!1,name_italic:!1,name_uppercase:!1,name_strikethrough:!1,icon_color:"var(--primary-color)",name_color:"var(--secondary-text-color)",text_color:"var(--primary-text-color)",state_color:"var(--primary-text-color)",click_action:"more-info",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:"",icon_position:"left",icon_alignment:"center",content_alignment:"start",overall_alignment:"center",icon_gap:8,name_value_layout:"vertical",name_value_gap:2}],columns:1,gap:12,allow_wrap:!0,tap_action:void 0,hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,n){var a,r,s,l,d,c;const p=e,h=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en",g=this.createDefault().info_entities[0];p.info_entities&&0!==p.info_entities.length||(p.info_entities=[Object.assign({},g)],n({info_entities:p.info_entities}));let m=p.info_entities[0]?Object.assign(Object.assign({},g),p.info_entities[0]):g;return m=Object.assign(Object.assign({},m),{icon_position:m.icon_position||"left",overall_alignment:m.overall_alignment||"center",icon_alignment:m.icon_alignment||"center",content_alignment:m.content_alignment||"start",name_value_layout:m.name_value_layout||"vertical",name_value_gap:void 0!==m.name_value_gap?m.name_value_gap:2}),o.qy`
      ${this.injectUcFormStyles()}
      <style>
        /* Layout & Positioning button active styles */
        .control-btn.active {
          border: none !important;
          background: var(--primary-color) !important;
          color: white !important;
          border-radius: 2px !important;
        }
      </style>
      <div class="module-general-settings">
        <!-- Entity Configuration -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,u.kg)("editor.info.entity_section.title",h,"ENTITY CONFIGURATION")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{entity:m.entity||""}}
              .schema=${[{name:"entity",label:(0,u.kg)("editor.info.entity",h,"Entity"),description:(0,u.kg)("editor.info.entity_desc",h,"Select the entity to display"),selector:{entity:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>{var i,o;const a=e.detail.value.entity;a!==((null===(o=null===(i=p.info_entities)||void 0===i?void 0:i[0])||void 0===o?void 0:o.entity)||"")&&(this._handleEntityChange(p,0,a,t,n),setTimeout((()=>this.triggerPreviewUpdate()),50))}}
            ></ha-form>
          </div>
        </div>

        <!-- Icon Settings -->
        <div
          class="settings-section icon-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,u.kg)("editor.info.icon_section.title",h,"Icon Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{show_icon:!1!==m.show_icon}}
              .schema=${[{name:"show_icon",label:(0,u.kg)("editor.info.show_icon",h,"Show Icon"),description:(0,u.kg)("editor.info.show_icon_desc",h,"Display an icon next to the entity value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>{this._updateEntity(p,0,{show_icon:e.detail.value.show_icon},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
            ></ha-form>
          </div>

          ${!1!==m.show_icon?o.qy`
                <div style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{icon:m.icon||""}}
                    .schema=${[{name:"icon",label:(0,u.kg)("editor.info.icon",h,"Icon"),description:(0,u.kg)("editor.info.icon_desc",h,"Choose an icon to display"),selector:{icon:{}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>{var t,i;const o=e.detail.value.icon;o!==((null===(i=null===(t=p.info_entities)||void 0===t?void 0:t[0])||void 0===i?void 0:i.icon)||"")&&(this._updateEntity(p,0,{icon:o},n),setTimeout((()=>this.triggerPreviewUpdate()),50))}}
                  ></ha-form>
                </div>

                <div style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,u.kg)("editor.info.icon_color",h,"Icon Color")}
                  </div>
                  <ultra-color-picker
                    .value=${m.icon_color||""}
                    .defaultValue=${"var(--primary-color)"}
                    .hass=${t}
                    @value-changed=${e=>{this._updateEntity(p,0,{icon_color:e.detail.value},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                  ></ultra-color-picker>
                </div>
              `:""}
        </div>

        <!-- Name Settings -->
        <div
          class="settings-section name-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,u.kg)("editor.info.name_section.title",h,"Name Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{show_name:!1!==m.show_name}}
              .schema=${[{name:"show_name",label:(0,u.kg)("editor.info.show_name",h,"Show Name"),description:(0,u.kg)("editor.info.show_name_desc",h,"Display the entity name above the value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>{this._updateEntity(p,0,{show_name:e.detail.value.show_name},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
            ></ha-form>
          </div>

          ${!1!==m.show_name?o.qy`
                <div style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{name:null!==(s=null===(r=p.info_entities[0])||void 0===r?void 0:r.name)&&void 0!==s?s:""}}
                    .schema=${[{name:"name",label:(0,u.kg)("editor.info.custom_name",h,"Custom Name"),description:(0,u.kg)("editor.info.custom_name_desc",h,"Override the entity name with a custom name"),selector:{text:{}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>{this._updateEntity(p,0,{name:e.detail.value.name},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                  ></ha-form>
                </div>

                <div style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,u.kg)("editor.info.name_color",h,"Name Color")}
                  </div>
                  <ultra-color-picker
                    .value=${m.name_color||""}
                    .defaultValue=${"var(--secondary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>{this._updateEntity(p,0,{name_color:e.detail.value},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                  ></ultra-color-picker>
                </div>
              `:""}
        </div>

        <!-- State Settings -->
        <div
          class="settings-section state-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,u.kg)("editor.info.state_section.title",h,"State Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{show_state:!1!==m.show_state}}
              .schema=${[{name:"show_state",label:(0,u.kg)("editor.info.show_state",h,"Show State"),description:(0,u.kg)("editor.info.show_state_desc",h,"Display the entity state/value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>{this._updateEntity(p,0,{show_state:e.detail.value.show_state},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
            ></ha-form>
          </div>

          ${!1!==m.show_state?o.qy`
                <div style="margin-bottom: 16px;">
                  <ha-form
                    .hass=${t}
                    .data=${{show_units:!1!==m.show_units}}
                    .schema=${[{name:"show_units",label:(0,u.kg)("editor.info.show_units",h,"Show Units"),description:(0,u.kg)("editor.info.show_units_desc",h,"Display the unit of measurement (if available)"),selector:{boolean:{}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>{this._updateEntity(p,0,{show_units:e.detail.value.show_units},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                  ></ha-form>
                </div>
              `:""}
          ${!1!==m.show_state?o.qy`
                <div style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,u.kg)("editor.info.state_color",h,"State Color")}
                  </div>
                  <ultra-color-picker
                    .value=${m.state_color||""}
                    .defaultValue=${"var(--primary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>{this._updateEntity(p,0,{state_color:e.detail.value},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                  ></ultra-color-picker>
                </div>
              `:""}
        </div>

        <!-- Name & Value Layout Section (shown when icon is disabled) -->
        ${!1===m.show_icon?o.qy`
              <div
                class="settings-section name-value-layout-section"
                style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
              >
                <div
                  class="section-title"
                  style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
                >
                  ${(0,u.kg)("editor.info.name_value_layout.title",h,"Name & Value Layout")}
                </div>

                <div class="field-group" style="margin-bottom: 24px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,u.kg)("editor.info.name_value_layout.orientation",h,"Layout Direction")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; color: var(--secondary-text-color);"
                  >
                    ${(0,u.kg)("editor.info.name_value_layout.orientation_desc",h,"Choose how to display the name and value")}
                  </div>
                  <div
                    class="control-button-group"
                    style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; width: 100%;"
                  >
                    ${[{value:"vertical",icon:"mdi:arrow-up-down",label:"Vertical"},{value:"horizontal",icon:"mdi:arrow-left-right",label:"Horizontal"}].map((e=>o.qy`
                        <button
                          type="button"
                          class="control-btn ${(m.name_value_layout||"vertical")===e.value?"active":""}"
                          @click=${()=>{this._updateEntity(p,0,{name_value_layout:e.value},n),setTimeout((()=>this.triggerPreviewUpdate()),200)}}
                          title="${e.label}"
                          style="padding: 12px 8px; gap: 8px;"
                        >
                          <ha-icon icon="${e.icon}"></ha-icon>
                          <span style="font-size: 12px;">${e.label}</span>
                        </button>
                      `))}
                  </div>
                </div>

                <div class="field-container" style="margin-bottom: 24px;">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 8px;"
                  >
                    ${(0,u.kg)("editor.info.name_value_gap",h,"Name & Value Gap")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 12px; color: var(--secondary-text-color);"
                  >
                    ${(0,u.kg)("editor.info.name_value_gap_desc",h,"Space between the name and value in pixels")}
                  </div>
                  <div
                    class="gap-control-container"
                    style="display: flex; align-items: center; gap: 12px;"
                  >
                    <input
                      type="range"
                      class="gap-slider"
                      min="0"
                      max="32"
                      step="1"
                      .value="${void 0!==m.name_value_gap?m.name_value_gap:2}"
                      @input=${e=>{const t=e.target,i=Number(t.value);this._updateEntity(p,0,{name_value_gap:i},n),setTimeout((()=>this.triggerPreviewUpdate()),200)}}
                    />
                    <input
                      type="number"
                      class="gap-input"
                      min="0"
                      max="32"
                      step="1"
                      .value="${void 0!==m.name_value_gap?m.name_value_gap:2}"
                      @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||(this._updateEntity(p,0,{name_value_gap:i},n),setTimeout((()=>this.triggerPreviewUpdate()),200))}}
                      @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=Number(t.value)||2,o="ArrowUp"===e.key?1:-1,a=Math.max(0,Math.min(32,i+o));this._updateEntity(p,0,{name_value_gap:a},n),setTimeout((()=>this.triggerPreviewUpdate()),200)}}}
                    />
                    <button
                      class="reset-btn"
                      @click=${()=>{this._updateEntity(p,0,{name_value_gap:2},n),setTimeout((()=>this.triggerPreviewUpdate()),200)}}
                      title="${(0,u.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","2")}"
                    >
                      <ha-icon icon="mdi:refresh"></ha-icon>
                    </button>
                  </div>
                </div>
              </div>
            `:""}

        <!-- Template Mode Section -->
        <div
          class="settings-section template-mode-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,u.kg)("editor.info.template.title",h,"Template Mode")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,u.kg)("editor.info.template.desc",h,"Use a template to format the entity value. Templates allow you to use Home Assistant templating syntax for complex formatting.")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:m.template_mode||!1}}
              .schema=${[{name:"template_mode",label:(0,u.kg)("editor.info.template.mode",h,"Template Mode"),description:(0,u.kg)("editor.info.template.mode_desc",h,"Use Home Assistant templating syntax to format the value"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>{this._updateEntity(p,0,{template_mode:e.detail.value.template_mode},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
            ></ha-form>
          </div>

          ${m.template_mode?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                  >
                    ${(0,u.kg)("editor.info.template.value",h,"Value Template")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 12px; margin-bottom: 8px; color: var(--secondary-text-color);"
                  >
                    ${(0,u.kg)("editor.info.template.value_desc",h,"Template to format the entity value using Jinja2 syntax")}
                  </div>
                  <ultra-template-editor
                    .hass=${t}
                    .value=${m.template||""}
                    .placeholder=${"{{ states('sensor.example') }}"}
                    .minHeight=${100}
                    .maxHeight=${300}
                    @value-changed=${e=>{this._updateEntity(p,0,{template:e.detail.value},n),this._handleTemplateChange(e.detail.value,p,0,t)}}
                  ></ultra-template-editor>
                </div>

                <div class="template-examples">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,u.kg)("editor.info.examples_title",h,"Common Examples:")}
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.${(null===(l=m.entity)||void 0===l?void 0:l.split(".")[1])||"example"}') }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,u.kg)("editor.info.example_basic",h,"Basic value")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.${(null===(d=m.entity)||void 0===d?void 0:d.split(".")[1])||"example"}') | float(0) }}
                      km
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,u.kg)("editor.info.example_units",h,"With units")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      {{ states('sensor.${(null===(c=m.entity)||void 0===c?void 0:c.split(".")[1])||"example"}') | float(0) |
                      round(1) }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,u.kg)("editor.info.example_round",h,"Round to 1 decimal")}
                    </div>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Size Settings -->
        <div
          class="settings-section size-settings"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,u.kg)("editor.info.size_section.title",h,"Size Settings")}
          </div>

          <div style="display: flex; flex-direction: column; gap: 20px;">
            ${!1!==m.show_icon?o.qy`
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,u.kg)("editor.info.icon_size",h,"Icon Size")}
                    </div>
                    <div class="field-description">
                      ${(0,u.kg)("editor.info.icon_size_desc",h,"Size of the icon in pixels")}
                    </div>
                    <div
                      class="gap-control-container"
                      style="display: flex; align-items: center; gap: 12px;"
                    >
                      <input
                        type="range"
                        class="gap-slider"
                        min="12"
                        max="48"
                        step="1"
                        .value="${Number(m.icon_size)||26}"
                        @input=${e=>{const t=e.target,i=Number(t.value);this._updateEntity(p,0,{icon_size:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                      />
                      <input
                        type="number"
                        class="gap-input"
                        min="12"
                        max="48"
                        step="1"
                        .value="${Number(m.icon_size)||26}"
                        @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||(this._updateEntity(p,0,{icon_size:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50))}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=Number(t.value)||26,o="ArrowUp"===e.key?1:-1,a=Math.max(12,Math.min(48,i+o));this._updateEntity(p,0,{icon_size:a},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}}
                      />
                      <button
                        class="reset-btn"
                        @click=${()=>{this._updateEntity(p,0,{icon_size:26},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                        title="${(0,u.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","26")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                `:""}
            ${!1!==m.show_name?o.qy`
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,u.kg)("editor.info.name_size",h,"Name Size")}
                    </div>
                    <div class="field-description">
                      ${(0,u.kg)("editor.info.name_size_desc",h,"Size of the entity name text in pixels")}
                    </div>
                    <div
                      class="gap-control-container"
                      style="display: flex; align-items: center; gap: 12px;"
                    >
                      <input
                        type="range"
                        class="gap-slider"
                        min="8"
                        max="32"
                        step="1"
                        .value="${m.name_size||12}"
                        @input=${e=>{const t=e.target,i=Number(t.value);this._updateEntity(p,0,{name_size:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                      />
                      <input
                        type="number"
                        class="gap-input"
                        min="8"
                        max="32"
                        step="1"
                        .value="${m.name_size||12}"
                        @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||(this._updateEntity(p,0,{name_size:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50))}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=Number(t.value)||12,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(32,i+o));this._updateEntity(p,0,{name_size:a},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}}
                      />
                      <button
                        class="reset-btn"
                        @click=${()=>{this._updateEntity(p,0,{name_size:12},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                        title="${(0,u.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","12")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                `:""}

            <div class="field-container" style="margin-bottom: 24px;">
              <div class="field-title">
                ${(0,u.kg)("editor.info.value_size",h,"Value Size")}
              </div>
              <div class="field-description">
                ${(0,u.kg)("editor.info.value_size_desc",h,"Size of the entity value text in pixels")}
              </div>
              <div
                class="gap-control-container"
                style="display: flex; align-items: center; gap: 12px;"
              >
                <input
                  type="range"
                  class="gap-slider"
                  min="8"
                  max="32"
                  step="1"
                  .value="${m.text_size||14}"
                  @input=${e=>{const t=e.target,i=Number(t.value);this._updateEntity(p,0,{text_size:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                />
                <input
                  type="number"
                  class="gap-input"
                  min="8"
                  max="32"
                  step="1"
                  .value="${m.text_size||14}"
                  @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||(this._updateEntity(p,0,{text_size:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50))}}
                  @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=Number(t.value)||14,o="ArrowUp"===e.key?1:-1,a=Math.max(8,Math.min(32,i+o));this._updateEntity(p,0,{text_size:a},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}}
                />
                <button
                  class="reset-btn"
                  @click=${()=>{this._updateEntity(p,0,{text_size:14},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                  title="${(0,u.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","14")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            ${!1!==m.show_icon?o.qy`
                  <div class="field-container" style="margin-bottom: 24px;">
                    <div class="field-title">
                      ${(0,u.kg)("editor.info.icon_gap",h,"Icon Gap")}
                    </div>
                    <div class="field-description">
                      ${(0,u.kg)("editor.info.icon_gap_desc",h,"Space between the icon and content in pixels")}
                    </div>
                    <div
                      class="gap-control-container"
                      style="display: flex; align-items: center; gap: 12px;"
                    >
                      <input
                        type="range"
                        class="gap-slider"
                        min="0"
                        max="32"
                        step="1"
                        .value="${m.icon_gap||8}"
                        @input=${e=>{const t=e.target,i=Number(t.value);this._updateEntity(p,0,{icon_gap:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                      />
                      <input
                        type="number"
                        class="gap-input"
                        min="0"
                        max="32"
                        step="1"
                        .value="${m.icon_gap||8}"
                        @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||(this._updateEntity(p,0,{icon_gap:i},n),setTimeout((()=>this.triggerPreviewUpdate()),50))}}
                        @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=Number(t.value)||8,o="ArrowUp"===e.key?1:-1,a=Math.max(0,Math.min(32,i+o));this._updateEntity(p,0,{icon_gap:a},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}}
                      />
                      <button
                        class="reset-btn"
                        @click=${()=>{this._updateEntity(p,0,{icon_gap:8},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                        title="${(0,u.kg)("editor.fields.reset_default_value",h,"Reset to default ({value})").replace("{value}","8")}"
                      >
                        <ha-icon icon="mdi:refresh"></ha-icon>
                      </button>
                    </div>
                  </div>
                `:""}
          </div>
        </div>

        <!-- Layout & Positioning Section -->
        <div
          class="settings-section layout-positioning-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,u.kg)("editor.info.layout_section.title",h,"Layout & Positioning")}
          </div>

          <!-- Icon Position -->
          <div class="field-group" style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
            >
              ${(0,u.kg)("editor.info.icon_position",h,"Icon Position")}
            </div>
            <div
              class="control-button-group"
              style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; width: 100%;"
            >
              ${[{value:"left",icon:"mdi:arrow-left"},{value:"top",icon:"mdi:arrow-up"},{value:"right",icon:"mdi:arrow-right"},{value:"bottom",icon:"mdi:arrow-down"}].map((e=>o.qy`
                  <button
                    type="button"
                    class="control-btn ${(m.icon_position||"left")===e.value?"active":""}"
                    @click=${()=>{this._updateEntity(p,0,{icon_position:e.value},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                    title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                  >
                    <ha-icon icon="${e.icon}"></ha-icon>
                  </button>
                `))}
            </div>
          </div>

          <!-- Overall Alignment -->
          <div class="field-group" style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
            >
              ${(0,u.kg)("editor.info.overall_alignment",h,"Overall Alignment")}
            </div>
            <div
              class="control-button-group"
              style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; width: 100%;"
            >
              ${[{value:"left",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"right",icon:"mdi:format-align-right"}].map((e=>o.qy`
                  <button
                    type="button"
                    class="control-btn ${(m.overall_alignment||"center")===e.value?"active":""}"
                    @click=${()=>{this._updateEntity(p,0,{overall_alignment:e.value},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                    title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                  >
                    <ha-icon icon="${e.icon}"></ha-icon>
                  </button>
                `))}
            </div>
          </div>

          <!-- Icon and Content Alignment Side by Side -->
          <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 32px;"
          >
            <!-- Icon Alignment -->
            <div class="field-group">
              <div
                class="field-title"
                style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
              >
                ${(0,u.kg)("editor.info.icon_alignment",h,"Icon Alignment")}
              </div>
              <div
                class="control-button-group"
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"
              >
                ${[{value:"start",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"end",icon:"mdi:format-align-right"}].map((e=>o.qy`
                    <button
                      type="button"
                      class="control-btn ${(m.icon_alignment||"center")===e.value?"active":""}"
                      @click=${()=>{this._updateEntity(p,0,{icon_alignment:e.value},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                      title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                    >
                      <ha-icon icon="${e.icon}"></ha-icon>
                    </button>
                  `))}
              </div>
            </div>

            <!-- Content Alignment -->
            <div class="field-group">
              <div
                class="field-title"
                style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
              >
                ${(0,u.kg)("editor.info.content_alignment",h,"Content Alignment")}
              </div>
              <div
                class="control-button-group"
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"
              >
                ${[{value:"start",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"end",icon:"mdi:format-align-right"}].map((e=>o.qy`
                    <button
                      type="button"
                      class="control-btn ${(m.content_alignment||"start")===e.value?"active":""}"
                      @click=${()=>{this._updateEntity(p,0,{content_alignment:e.value},n),setTimeout((()=>this.triggerPreviewUpdate()),50)}}
                      title="${e.value.charAt(0).toUpperCase()+e.value.slice(1)}"
                    >
                      <ha-icon icon="${e.icon}"></ha-icon>
                    </button>
                  `))}
              </div>
            </div>
          </div>
        </div>
      </div>
    `}renderActionsTab(e,t,i,o){return s.A.render(e,t,(e=>o(e)))}renderLogicTab(e,t,i,o){return l.X.render(e,t,(e=>o(e)))}renderSingleActionConfig(e,t,i,n,a){const r={action_config:"nothing"===(null==i?void 0:i.action)?Object.assign(Object.assign({},i),{action:"default"}):i};return o.qy`
      <div style="margin-bottom: 16px;">
        <ha-form
          .hass=${n}
          .data=${r}
          .schema=${[{name:"action_config",label:"",selector:{ui_action:{actions:["default","more-info","toggle","navigate","url","perform-action","assist"]}}}]}
          .computeLabel=${e=>e.label||""}
          @value-changed=${e=>{var t;const i=null===(t=e.detail.value)||void 0===t?void 0:t.action_config;i&&a(i)}}
        ></ha-form>
      </div>
    `}renderSplitPreview(e,t){return this.renderPreview(e,t)}renderPreview(e,t,i,n){const a=e,s=a,l=a.design||{},d={color:a.color||l.color,font_size:a.font_size||l.font_size,font_weight:a.font_weight||l.font_weight,font_style:a.font_style||l.font_style,text_transform:a.text_transform||l.text_transform,font_family:a.font_family||l.font_family,line_height:a.line_height||l.line_height,letter_spacing:a.letter_spacing||l.letter_spacing,text_align:a.text_align||l.text_align,text_shadow_h:a.text_shadow_h||l.text_shadow_h,text_shadow_v:a.text_shadow_v||l.text_shadow_v,text_shadow_blur:a.text_shadow_blur||l.text_shadow_blur,text_shadow_color:a.text_shadow_color||l.text_shadow_color,background_color:a.background_color||l.background_color,background_image:a.background_image||l.background_image,background_size:a.background_size||l.background_size,background_position:a.background_position||l.background_position,background_repeat:a.background_repeat||l.background_repeat,border_style:a.border_style||l.border_style,border_width:a.border_width||l.border_width,border_color:a.border_color||l.border_color,border_radius:a.border_radius||l.border_radius,position:a.position||l.position,top:a.top||l.top,bottom:a.bottom||l.bottom,left:a.left||l.left,right:a.right||l.right,z_index:a.z_index||l.z_index,width:a.width||l.width,height:a.height||l.height,max_width:a.max_width||l.max_width,max_height:a.max_height||l.max_height,min_width:a.min_width||l.min_width,min_height:a.min_height||l.min_height,overflow:a.overflow||l.overflow,clip_path:a.clip_path||l.clip_path,backdrop_filter:a.backdrop_filter||l.backdrop_filter,box_shadow_h:a.box_shadow_h||l.box_shadow_h,box_shadow_v:a.box_shadow_v||l.box_shadow_v,box_shadow_blur:a.box_shadow_blur||l.box_shadow_blur,box_shadow_spread:a.box_shadow_spread||l.box_shadow_spread,box_shadow_color:a.box_shadow_color||l.box_shadow_color,padding_top:a.padding_top||l.padding_top,padding_bottom:a.padding_bottom||l.padding_bottom,padding_left:a.padding_left||l.padding_left,padding_right:a.padding_right||l.padding_right,margin_top:a.margin_top||l.margin_top,margin_bottom:a.margin_bottom||l.margin_bottom,margin_left:a.margin_left||l.margin_left,margin_right:a.margin_right||l.margin_right},u=(e,t)=>null!=e&&""!==e?"string"==typeof e&&/[a-zA-Z%]/.test(e)?e:`${e}px`:null!=t?"string"==typeof t&&/[a-zA-Z%]/.test(t)?t:`${t}px`:"inherit",h=(e,t)=>null!=e&&""!==e&&"number"==typeof e?`${e}px`:null!=t?"string"==typeof t&&t.includes("px")?t:`${t}px`:"clamp(18px, 4vw, 26px)",g=e=>{if(d.text_align&&"inherit"!==d.text_align)return d.text_align;const t=e.content_alignment;if("start"===t)return"left";if("end"===t)return"right";if("center"===t)return"center";const i=e.overall_alignment;if(!t&&i){if("left"===i)return"left";if("right"===i)return"right";if("center"===i)return"center"}return"center"},m={padding:d.padding_top||d.padding_bottom||d.padding_left||d.padding_right||s.padding_top||s.padding_bottom||s.padding_left||s.padding_right?`${this.addPixelUnit(d.padding_top||s.padding_top)||"0px"} ${this.addPixelUnit(d.padding_right||s.padding_right)||"0px"} ${this.addPixelUnit(d.padding_bottom||s.padding_bottom)||"0px"} ${this.addPixelUnit(d.padding_left||s.padding_left)||"0px"}`:"16px",margin:d.margin_top||d.margin_bottom||d.margin_left||d.margin_right||s.margin_top||s.margin_bottom||s.margin_left||s.margin_right?`${d.margin_top||s.margin_top||"8px"} ${d.margin_right||s.margin_right||"0px"} ${d.margin_bottom||s.margin_bottom||"8px"} ${d.margin_left||s.margin_left||"0px"}`:"8px 0",background:d.background_color||s.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},s),d),t),backgroundSize:d.background_size||s.background_size||"cover",backgroundPosition:d.background_position||s.background_position||"center",backgroundRepeat:d.background_repeat||s.background_repeat||"no-repeat",border:(d.border_style||s.border_style)&&"none"!==(d.border_style||s.border_style)?`${d.border_width||s.border_width||"1px"} ${d.border_style||s.border_style} ${d.border_color||s.border_color||"var(--divider-color)"}`:"none",borderRadius:this.addPixelUnit(d.border_radius||s.border_radius)||"0",position:d.position||s.position||"relative",top:d.top||s.top||"auto",bottom:d.bottom||s.bottom||"auto",left:d.left||s.left||"auto",right:d.right||s.right||"auto",zIndex:d.z_index||s.z_index||"auto",width:d.width||s.width||"auto",height:d.height||s.height||"auto",maxWidth:d.max_width||s.max_width||"none",maxHeight:d.max_height||s.max_height||"none",minWidth:d.min_width||s.min_width||"none",minHeight:d.min_height||s.min_height||"auto",overflow:d.overflow||s.overflow||"visible",clipPath:d.clip_path||s.clip_path||"none",backdropFilter:d.backdrop_filter||s.backdrop_filter||"none",boxShadow:(d.box_shadow_h||s.box_shadow_h)&&(d.box_shadow_v||s.box_shadow_v)?`${d.box_shadow_h||s.box_shadow_h||"0"} ${d.box_shadow_v||s.box_shadow_v||"0"} ${d.box_shadow_blur||s.box_shadow_blur||"0"} ${d.box_shadow_spread||s.box_shadow_spread||"0"} ${d.box_shadow_color||s.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"},f=(a.info_entities&&a.info_entities.length>0?Object.assign(Object.assign({},this.createDefault().info_entities[0]),a.info_entities[0]):this.createDefault().info_entities[0]).overall_alignment||"center";return o.qy`
      <div class="info-module-container" style=${this.styleObjectToCss(m)}>
        <div class="info-module-preview">
          <div
            class="info-entities"
            style="
            display: grid;
            grid-template-columns: repeat(${a.columns||1}, 1fr);
            gap: ${a.gap||12}px;
            justify-content: ${"left"===f?"start":"right"===f?"end":"center"};
            justify-items: ${"left"===f?"start":"right"===f?"end":"center"};
          "
          >
            ${a.info_entities.slice(0,3).map(((e,i)=>{var n,l,m,f;const _=this.createDefault().info_entities[0];let v=Object.assign(Object.assign({},_),e);v=Object.assign(Object.assign({},v),{icon_position:v.icon_position||"left",overall_alignment:v.overall_alignment||"center",icon_alignment:v.icon_alignment||"center",content_alignment:v.content_alignment||"start",name_value_layout:v.name_value_layout||"vertical",name_value_gap:void 0!==v.name_value_gap?v.name_value_gap:2});const b=null==t?void 0:t.states[v.entity];let y;if(v.template_mode&&v.template){if(!this._templateService&&t&&(this._templateService=new c.I(t)),t){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=`info_entity_${i}_${this._hashString(v.template)}`;this._templateService&&!this._templateService.hasTemplateSubscription(e)&&this._templateService.subscribeToTemplate(v.template,e,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)),window._ultraCardUpdateTimer=null}),50)))}));const o=null===(n=t.__uvc_template_strings)||void 0===n?void 0:n[e];y=void 0!==o&&""!==String(o).trim()?String(o):"Template Error: Invalid or incomplete template"}}else y=b?(0,r.formatEntityState)(t,v.entity,{includeUnit:!1!==v.show_units}):"N/A";const x=void 0!==e.name&&null!==e.name&&""!==String(e.name).trim()?String(e.name):(null===(l=null==b?void 0:b.attributes)||void 0===l?void 0:l.friendly_name)||v.entity,k=v.icon||(null===(m=null==b?void 0:b.attributes)||void 0===m?void 0:m.icon)||"mdi:help-circle",w=v.icon_position||"left",S=v.icon_alignment||"center",O=(v.content_alignment,v.overall_alignment||"center"),A=v.icon_gap||8,C=!1!==v.show_icon?this._shouldUseEntityPicture(b)?o.qy`
                        <img
                          src="${this._getEntityPicture(b,t)}"
                          class="entity-icon entity-picture"
                          style="
                            width: ${h(d.font_size,v.icon_size||26)};
                            height: ${h(d.font_size,v.icon_size||26)};
                            border-radius: 50%;
                            object-fit: cover;
                          "
                          alt="Entity picture"
                        />
                      `:o.qy`
                        <ha-icon
                          icon="${k}"
                          class="entity-icon"
                          style="color: ${d.color||v.icon_color||"var(--primary-color)"}; --mdc-icon-size: ${h(d.font_size,v.icon_size||26)};"
                        ></ha-icon>
                      `:"",$=()=>{const e=d.text_shadow_h||s.text_shadow_h,t=d.text_shadow_v||s.text_shadow_v,i=d.text_shadow_blur||s.text_shadow_blur,o=d.text_shadow_color||s.text_shadow_color;return e||t||i||o?`${e||"0px"} ${t||"0px"} ${i||"0px"} ${o||"rgba(0,0,0,0.2)"}`:"none"},T=!1===v.show_icon&&v.name_value_layout||"vertical",z=void 0!==v.name_value_gap?v.name_value_gap:2,P=o.qy`
                <div
                  class="entity-content"
                  data-layout="${T}"
                  data-gap="${z}"
                  data-entity-gap="${v.name_value_gap}"
                  data-show-icon="${v.show_icon}"
                  style="
                  display: flex;
                  align-items: ${"horizontal"===T?"center":(e=>{if(d.text_align&&"inherit"!==d.text_align)return"left"===d.text_align?"flex-start":"right"===d.text_align?"flex-end":"center";const t=e.content_alignment;if("start"===t)return"flex-start";if("end"===t)return"flex-end";if("center"===t)return"center";const i=e.overall_alignment;if(!t&&i){if("left"===i)return"flex-start";if("right"===i)return"flex-end";if("center"===i)return"center"}return"center"})(v)};
                  text-align: ${g(v)};
                  flex-direction: ${"horizontal"===T?"row":"column"};
                  gap: ${z}px;
                "
                >
                  ${!1!==v.show_name?o.qy`
                        <div
                          class="entity-name"
                          style="
                    color: ${d.color||v.name_color||"var(--secondary-text-color)"};
                    font-size: ${u(d.font_size,v.name_size||12)};
                    font-weight: ${d.font_weight||(v.name_bold?"bold":"normal")};
                    font-style: ${d.font_style||(v.name_italic?"italic":"normal")};
                    text-transform: ${d.text_transform||(v.name_uppercase?"uppercase":"none")};
                    text-decoration: ${v.name_strikethrough?"line-through":"none"};
                    font-family: ${d.font_family||"inherit"};
                    line-height: ${d.line_height||"inherit"};
                    letter-spacing: ${d.letter_spacing||"inherit"};
                    text-align: ${g(v)};
                    text-shadow: ${$()};
                    ${"horizontal"===T?"white-space: nowrap;":""}
                  "
                        >
                          ${x}
                        </div>
                      `:""}
                  ${!1!==v.show_state?o.qy`
                        <div
                          class="entity-value"
                          style="
                        color: ${d.color||v.state_color||v.text_color||"var(--primary-text-color)"};
                        font-size: ${u(d.font_size,v.text_size||14)};
                        font-weight: ${d.font_weight||(v.text_bold?"bold":"normal")};
                        font-style: ${d.font_style||(v.text_italic?"italic":"normal")};
                        text-transform: ${d.text_transform||(v.text_uppercase?"uppercase":"none")};
                        text-decoration: ${v.text_strikethrough?"line-through":"none"};
                        font-family: ${d.font_family||"inherit"};
                        line-height: ${d.line_height||"inherit"};
                        letter-spacing: ${d.letter_spacing||"inherit"};
                        text-align: ${g(v)};
                        text-shadow: ${$()};
                      "
                        >
                          ${y}
                        </div>
                      `:""}
                </div>
              `,E=null===(f=a.design)||void 0===f?void 0:f.hover_effect,I=p.k.getHoverEffectClass(E);var j;return(null==(j=a)?void 0:j.tap_action)&&"nothing"!==j.tap_action.action||(null==j?void 0:j.hold_action)&&"nothing"!==j.hold_action.action||(null==j?void 0:j.double_tap_action)&&"nothing"!==j.double_tap_action.action?o.qy`<div
                    class="info-entity-clickable position-${w} ${I}"
                    style="
                    display: flex;
                    flex-direction: ${"top"===w||"bottom"===w?"column":"row"};
                    align-items: ${"start"===S?"flex-start":"end"===S?"flex-end":"center"};
                    justify-content: ${"left"===O?"flex-start":"right"===O?"flex-end":"center"};
                    gap: ${A}px;
                    cursor: pointer;
                    user-select: none;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                  "
                    @click=${e=>this.handleClick(e,a,t)}
                    @dblclick=${e=>this.handleDoubleClick(e,a,t)}
                    @mousedown=${e=>this.handleMouseDown(e,a,t)}
                    @mouseup=${e=>this.handleMouseUp(e,a,t)}
                    @mouseleave=${e=>this.handleMouseLeave(e,a,t)}
                    @touchstart=${e=>this.handleTouchStart(e,a,t)}
                    @touchend=${e=>this.handleTouchEnd(e,a,t)}
                  >
                    ${"left"===w||"top"===w?o.qy`${C}${P}`:o.qy`${P}${C}`}
                  </div>`:o.qy`<div
                    class="info-entity-item position-${w} ${I}"
                    style="
                    display: flex;
                    flex-direction: ${"top"===w||"bottom"===w?"column":"row"};
                    align-items: ${"start"===S?"flex-start":"end"===S?"flex-end":"center"};
                    justify-content: ${"left"===O?"flex-start":"right"===O?"flex-end":"center"};
                    gap: ${A}px;
                  "
                  >
                    ${"left"===w||"top"===w?o.qy`${C}${P}`:o.qy`${P}${C}`}
                  </div>`}))}
            ${a.info_entities.length>3?o.qy`
                  <div class="more-entities">+${a.info_entities.length-3} more</div>
                `:""}
          </div>
        </div>
      </div>
    `}validate(e){const t=e,i=[...super.validate(e).errors];return t.info_entities&&0!==t.info_entities.length||i.push("At least one info entity is required"),t.info_entities.forEach(((e,t)=>{e.entity&&""!==e.entity.trim()||i.push(`Entity ${t+1}: Entity ID is required`)})),{valid:0===i.length,errors:i}}getStyles(){return"\n      .info-module-preview {\n      }\n      \n      .info-entities {\n        width: 100%;\n      }\n      \n      .info-entity-item {\n        min-width: 0;\n        flex: 1;\n      }\n      \n      .entity-content {\n        display: flex;\n        min-width: 0;\n        flex: 1;\n      }\n      \n      .entity-icon {\n        flex-shrink: 0;\n      }\n      \n      .entity-name {\n        font-size: 12px;\n        line-height: 1.2;\n      }\n      \n      .entity-value {\n        font-size: 14px;\n        font-weight: 500;\n        line-height: 1.2;\n      }\n      \n      .more-entities {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 8px;\n        color: var(--secondary-text-color);\n        font-size: 12px;\n        font-style: italic;\n      }\n      \n      .info-entities-section,\n      .layout-section {\n        margin-top: 16px;\n        padding-top: 16px;\n        border-top: 1px solid var(--divider-color);\n      }\n      \n      .info-entities-section:first-child {\n        margin-top: 0;\n        padding-top: 0;\n        border-top: none;\n      }\n      \n      .info-entities-section h4,\n      .layout-section h4 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--primary-text-color);\n      }\n      \n      .entity-item {\n        border: 1px solid var(--divider-color);\n        border-radius: 8px;\n        padding: 12px;\n        margin-bottom: 12px;\n        background: var(--card-background-color);\n      }\n      \n      .entity-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 12px;\n        font-weight: 500;\n        font-size: 14px;\n      }\n      \n      .remove-entity-btn {\n        background: none;\n        border: none;\n        color: var(--error-color);\n        cursor: pointer;\n        padding: 4px;\n        border-radius: 4px;\n        font-size: 14px;\n      }\n      \n      .remove-entity-btn:disabled {\n        opacity: 0.3;\n        cursor: not-allowed;\n      }\n      \n      .add-entity-btn {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n        width: 100%;\n        padding: 12px;\n        border: 2px dashed var(--primary-color);\n        border-radius: 8px;\n        background: none;\n        color: var(--primary-color);\n        cursor: pointer;\n        font-size: 14px;\n        font-weight: 500;\n      }\n      \n      .add-entity-btn:hover {\n        background: var(--primary-color);\n        color: white;\n      }\n      \n      .entity-display-options {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 8px;\n        margin: 8px 0;\n      }\n      \n      /* Control button styles */\n      .control-btn {\n        padding: 8px 4px;\n        border: 1px solid var(--divider-color);\n        background: var(--card-background-color);\n        color: var(--primary-text-color);\n        border-radius: 4px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        user-select: none;\n        font-size: 10px;\n      }\n      \n      .control-btn:hover:not(.active) {\n        border-color: var(--primary-color) !important;\n        background: var(--primary-color) !important;\n        color: white !important;\n        opacity: 0.8;\n      }\n      \n      .control-btn ha-icon {\n        font-size: 14px;\n      }\n      \n      .control-button-group {\n        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n        border-radius: 4px;\n        overflow: visible;\n        position: relative;\n      }\n      \n      .control-button-group .control-btn:not(:last-child) {\n        border-right: none;\n      }\n      \n      .control-button-group .control-btn:first-child {\n        border-radius: 4px 0 0 4px;\n      }\n      \n      .control-button-group .control-btn:last-child {\n        border-radius: 0 4px 4px 0;\n      }\n      \n      .control-button-group .control-btn:only-child {\n        border-radius: 4px;\n      }\n\n      .control-button-group .control-btn.active {\n        position: relative;\n        z-index: 2;\n        border-radius: 4px !important;\n      }\n      \n      /* Position-specific layout styles */\n      .position-left {\n        flex-direction: row;\n      }\n      \n      .position-right {\n        flex-direction: row-reverse;\n      }\n      \n      .position-top {\n        flex-direction: column;\n      }\n      \n      .position-bottom {\n        flex-direction: column-reverse;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n\n      /* Legacy hover effects removed - now handled by new hover effects system */\n    "}hasActiveActions(e){const t=e.tap_action&&"default"!==e.tap_action.action&&"nothing"!==e.tap_action.action,i=e.hold_action&&"default"!==e.hold_action.action&&"nothing"!==e.hold_action.action,o=e.double_tap_action&&"default"!==e.double_tap_action.action&&"nothing"!==e.double_tap_action.action;return t||i||o}handleClick(e,t,i,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,i,o)}),300)}handleDoubleClick(e,t,i,o){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,i,o)}handleMouseDown(e,t,i,o){this.startHold(e,t,i,o)}handleMouseUp(e,t,i){this.endHold(e,t,i)}handleMouseLeave(e,t,i){this.endHold(e,t,i)}handleTouchStart(e,t,i,o){this.startHold(e,t,i,o)}handleTouchEnd(e,t,i){this.endHold(e,t,i)}startHold(e,t,i,o){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,i,o)}),500)}endHold(e,t,i){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTapAction(e,t,i,o){this.isHolding||t.tap_action&&"nothing"===t.tap_action.action||a.K.handleAction(t.tap_action||{action:"default"},i,e.target,o,t.entity)}handleDoubleAction(e,t,i,o){t.double_tap_action&&"nothing"===t.double_tap_action.action||a.K.handleAction(t.double_tap_action||{action:"default"},i,e.target,o,t.entity)}handleHoldAction(e,t,i,o){t.hold_action&&"nothing"===t.hold_action.action||a.K.handleAction(t.hold_action||{action:"default"},i,e.target,o,t.entity)}_addEntity(e,t){const i={id:this.generateId("entity"),entity:"weather.forecast_home",name:"Temperature",icon:"mdi:thermometer",show_icon:!0,show_name:!0,show_state:!0,text_size:14,name_size:12,icon_size:26,text_bold:!1,text_italic:!1,text_uppercase:!1,text_strikethrough:!1,name_bold:!1,name_italic:!1,name_uppercase:!1,name_strikethrough:!1,icon_color:"var(--primary-color)",name_color:"var(--secondary-text-color)",text_color:"var(--primary-text-color)",state_color:"var(--primary-text-color)",click_action:"more-info",navigation_path:"",url:"",service:"",service_data:{},template_mode:!1,template:"",dynamic_icon_template_mode:!1,dynamic_icon_template:"",dynamic_color_template_mode:!1,dynamic_color_template:"",icon_position:"left",icon_alignment:"center",content_alignment:"start",overall_alignment:"center",icon_gap:8,name_value_layout:"vertical",name_value_gap:2},o=[...e.info_entities,i],n={info_entities:o};1!==o.length||e.tap_action&&"nothing"!==e.tap_action.action&&"default"!==e.tap_action.action||(n.tap_action={action:"more-info",entity:i.entity}),t(n)}_removeEntity(e,t,i){e.info_entities.length<=1||i({info_entities:e.info_entities.filter(((e,i)=>i!==t))})}_handleEntityChange(e,t,i,o,n){var a;const r={entity:i};if(i&&(null==o?void 0:o.states[i])){const e=(null===(a=o.states[i].attributes)||void 0===a?void 0:a.friendly_name)||i.split(".").pop()||"",t=d.s.getEntityIcon(i,o);r.name=e,t&&(r.icon=t)}const s={info_entities:e.info_entities.map(((e,i)=>i===t?Object.assign(Object.assign({},e),r):e))};i&&(null==o?void 0:o.states[i])&&(!e.tap_action||"nothing"===e.tap_action.action||"default"===e.tap_action.action||"more-info"===e.tap_action.action)&&(s.tap_action={action:"default",entity:i}),n(s),setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-actions-refresh",{detail:{moduleId:e.id},bubbles:!0,composed:!0}))}),50)}_updateEntity(e,t,i,o){if(!e.info_entities||0===e.info_entities.length){const t=this.createDefault().info_entities[0];return e.info_entities=[Object.assign(Object.assign({},t),i)],void o({info_entities:e.info_entities})}if(t>=e.info_entities.length){const i=this.createDefault().info_entities[0];for(;e.info_entities.length<=t;)e.info_entities.push(Object.assign({},i))}o({info_entities:e.info_entities.map(((e,o)=>o===t?Object.assign(Object.assign({},e),i):e))})}getBackgroundImageCSS(e,t){var i,o;if(!e.background_image_type||"none"===e.background_image_type)return"none";switch(e.background_image_type){case"upload":case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const n=t.states[e.background_image_entity];let a="";if((null===(i=n.attributes)||void 0===i?void 0:i.entity_picture)?a=n.attributes.entity_picture:(null===(o=n.attributes)||void 0===o?void 0:o.image)?a=n.attributes.image:n.state&&"string"==typeof n.state&&(n.state.startsWith("/")||n.state.startsWith("http"))&&(a=n.state),a)return a.startsWith("/local/")||a.startsWith("/media/")||a.startsWith("/"),`url("${a}")`}}return"none"}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_hashString(e){let t=0;for(let i=0;i<e.length;i+=1)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Math.abs(t)}async _handleTemplateChange(e,t,i,o){e&&o&&(this._templateInputDebounce&&clearTimeout(this._templateInputDebounce),this._templateInputDebounce=setTimeout((async()=>{try{const t=e.trim();if(!t.startsWith("{{")||!t.endsWith("}}"))return;const n=await o.callApi("POST","template",{template:e});o.__uvc_template_strings||(o.__uvc_template_strings={});const a=this._hashString(e),r=`info_entity_${i}_${a}`;o.__uvc_template_strings[r]=n,"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}catch(e){}}),3e3))}_getEntityPicture(e,t){var i,o;if(!e||!t)return null;if(!e.entity_id)return null;const n=null===(i=e.attributes)||void 0===i?void 0:i.entity_picture;if(n)return n.startsWith("/")?`${(t.hassUrl?t.hassUrl():"").replace(/\/$/,"")}${n}`:n;const a=["image","picture","thumbnail","avatar","photo","icon_url","image_url"];for(const i of a){const n=null===(o=e.attributes)||void 0===o?void 0:o[i];if(n&&"string"==typeof n)return n.startsWith("/")?`${(t.hassUrl?t.hassUrl():"").replace(/\/$/,"")}${n}`:n}return null}_shouldUseEntityPicture(e){var t;return!!e&&(!!e.entity_id&&(!!(null===(t=e.attributes)||void 0===t?void 0:t.entity_picture)||["image","picture","thumbnail","avatar","photo","icon_url","image_url"].some((t=>{var i;return(null===(i=e.attributes)||void 0===i?void 0:i[t])&&"string"==typeof e.attributes[t]&&""!==e.attributes[t].trim()}))))}}},5672:(e,t,i)=>{i.d(t,{x:()=>o});const o="2.0-beta26"},5728:(e,t,i)=>{i.d(t,{O:()=>l,Vo:()=>c,yp:()=>d});var o=i(1787),n=i(8460),a=i(4866),r=i(933);class s{constructor(){this.registrations=new Map,this.listeners=new Set,this.signatureToCardId=new Map,this.cardIdToSignature=new Map,this.globalScanCache=null}register(e,t,i){(0,a.z)("register:start",{cardId:e,dashboardId:t});const o=this.extractModules(t,e,i);this.ensureFirstSeen(t,o);const n=this.registrations.get(e);if(n&&this._sameModules(n.modules,o))return void(0,a.z)("register:no-change",{cardId:e,count:o.length});const r=this._computeModuleSignature(o),s=this.signatureToCardId.get(r);s&&s!==e&&(this.registrations.delete(s),this.cardIdToSignature.delete(s),(0,a.z)("register:prune-duplicate",{priorCardId:s,cardId:e})),this.registrations.set(e,{cardId:e,modules:o}),this.signatureToCardId.set(r,e),this.cardIdToSignature.set(e,r),(0,a.z)("register:updated",{cardId:e,count:o.length}),this.notify()}unregister(e){this.registrations.delete(e);const t=this.cardIdToSignature.get(e);t&&this.signatureToCardId.get(t)===e&&this.signatureToCardId.delete(t),this.cardIdToSignature.delete(e),(0,a.z)("unregister",{cardId:e}),this.notify()}onChange(e){return this.listeners.add(e),()=>this.listeners.delete(e)}trigger(){this.notify()}evaluate(e){const t=this.getDashboardId(),i=this.isPro(e),n=Array.from(this.registrations.values()).flatMap((e=>e.modules)),r=new Map,l=new Set,d=`${t}:`;for(const e of n)if((0,o.Y)(e.type)&&e.key.startsWith(d)){r.set(e.key,e);const t=this._signatureForKey(e);t&&l.add(t)}try{const t=Date.now();if((!this.globalScanCache||t-this.globalScanCache.ts>s.GLOBAL_SCAN_TTL)&&this.performGlobalScan(e),this.globalScanCache)for(const e of this.globalScanCache.keys){if(!e.key.startsWith(d))continue;const t=this._signatureForKey(e);t&&l.has(t)||r.set(e.key,e)}}catch(e){}const c=Array.from(r.values());if((0,a.z)("evaluate",{isPro:i,count:c.length}),i)return{allowedKeys:new Set(c.map((e=>e.key))),lockedKeys:new Set,totalThirdParty:c.length,isPro:i};const p=this.loadFirstSeen(t),u=[...c].sort(((e,t)=>(p[e.key]||0)-(p[t.key]||0))),h=new Set(u.slice(0,s.LIMIT).map((e=>e.key))),g=new Set(u.slice(s.LIMIT).map((e=>e.key)));return(0,a.z)("evaluate:result",{allowed:h.size,locked:g.size,exampleAllowed:Array.from(h).slice(0,2),exampleLocked:Array.from(g).slice(0,2)}),{allowedKeys:h,lockedKeys:g,totalThirdParty:c.length,isPro:i}}wouldExceedLimit(e,t){return!this.isPro(e)&&this.evaluate(e).totalThirdParty+t>s.LIMIT}notify(){this.listeners.forEach((e=>e()))}_sameModules(e,t){if(e.length!==t.length)return!1;const i=[...e].sort(((e,t)=>e.key<t.key?-1:e.key>t.key?1:0)),o=[...t].sort(((e,t)=>e.key<t.key?-1:e.key>t.key?1:0));for(let e=0;e<i.length;e++)if(i[e].key!==o[e].key||i[e].type!==o[e].type)return!1;return!0}isPro(e){var t,i;const o=n.x.checkIntegrationAuth(e);return!!o&&"pro"===(null===(t=o.subscription)||void 0===t?void 0:t.tier)&&"active"===(null===(i=o.subscription)||void 0===i?void 0:i.status)}getDashboardId(){const e=window.location.pathname.match(/\/lovelace\/(.+)$/);return e?e[1]:"default"}storageKey(e){return`${s.STORAGE_PREFIX}${e}`}loadFirstSeen(e){try{const t=localStorage.getItem(this.storageKey(e));if(!t)return{};const i=JSON.parse(t);return"object"==typeof i&&i?i:{}}catch(e){return{}}}saveFirstSeen(e,t){try{localStorage.setItem(this.storageKey(e),JSON.stringify(t))}catch(e){}}ensureFirstSeen(e,t){const i=this.loadFirstSeen(e);let o=!1;const n=Date.now();for(const e of t)void 0===i[e.key]&&(i[e.key]=n,o=!0);o&&this.saveFirstSeen(e,i)}extractModules(e,t,i){var o;const n=[];try{((null===(o=null==i?void 0:i.layout)||void 0===o?void 0:o.rows)||[]).forEach((i=>{(i.columns||[]).forEach((i=>{(i.modules||[]).forEach((i=>{const o=`${e}:${t}:${i.id}`;n.push({key:o,type:i.type})}))}))}))}catch(e){}return n}async performGlobalScan(e){var t;try{r.ucDashboardScannerService.initialize(e);const i=await r.ucDashboardScannerService.scanDashboard(),o=[],n=this.getDashboardId();if(i&&Array.isArray(i.cards))for(const e of i.cards){const i=e.config,a=this.buildSlotId(e);((null===(t=null==i?void 0:i.layout)||void 0===t?void 0:t.rows)||[]).forEach((e=>{(e.columns||[]).forEach((e=>{(e.modules||[]).forEach((e=>{if("external_card"===e.type){const t=`${n}:${a}:${e.id}`;o.push({key:t,type:"external_card"})}}))}))}))}this.ensureFirstSeen(n,o),this.globalScanCache={keys:o,ts:Date.now()},(0,a.z)("global-scan",{total:o.length}),this.notify()}catch(e){(0,a.z)("global-scan:error")}}buildSlotId(e){var t,i,o;return`${(null==e?void 0:e.view_path)||(null==e?void 0:e.view_id)||"default"}:${null!==(t=null==e?void 0:e.section_index)&&void 0!==t?t:-1}:${null!==(o=null!==(i=null==e?void 0:e.card_index_in_section)&&void 0!==i?i:null==e?void 0:e.card_index)&&void 0!==o?o:0}`}_computeModuleSignature(e){return e.map((e=>{const t=e.key.lastIndexOf(":");return`${e.type}:${t>=0?e.key.substring(t+1):e.key}`})).sort().join("|")}_signatureForKey(e){const t=e.key.lastIndexOf(":");return t<0?null:`${e.type}:${e.key.substring(t+1)}`}}s.STORAGE_PREFIX="uc_3p_first_seen_",s.LIMIT=5,s.GLOBAL_SCAN_TTL=3e3;const l=new s;function d(e){if(e.card_name&&"string"==typeof e.card_name)return`card:${e.card_name}`;try{const t=JSON.stringify(e.layout||{});let i=0;for(let e=0;e<t.length;e++)i=31*i+t.charCodeAt(e)>>>0;return`card-hash:${i.toString(16)}`}catch(e){return"card-hash:0"}}function c(){const e=window.location.pathname.match(/\/lovelace\/(.+)$/);return e?e[1]:"default"}},5863:(e,t,i)=>{i.d(t,{j:()=>u});var o=i(5183),n=i(866),a=i(2381),r=i(796),s=i(7593),l=i(2371),d=i(456),c=i(1397),p=i(8460);class u extends n.m{constructor(){super(...arguments),this.metadata={type:"vertical",title:"Vertical Layout",description:"Arrange modules in columns with flexible alignment and spacing",author:"WJD Designs",version:"1.0.0",icon:"mdi:view-agenda",category:"layout",tags:["layout","vertical","alignment","container","flexbox"]}}createDefault(e,t){return{id:e||this.generateId("vertical"),type:"vertical",alignment:"center",horizontal_alignment:"center",gap:1.2,modules:[],tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[]}}renderGeneralTab(e,t,i,n){var a;const r=e,s=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}

      <div class="module-general-settings">
        <!-- Layout Configuration Section -->
        ${this.renderSettingsSection((0,d.kg)("editor.vertical.layout.title",s,"Layout Configuration"),(0,d.kg)("editor.vertical.layout.desc",s,"Configure alignment and spacing for items in a single column."),[{title:(0,d.kg)("editor.vertical.alignment.horizontal",s,"Horizontal Alignment"),description:(0,d.kg)("editor.vertical.alignment.horizontal_desc",s,"Choose how items are aligned horizontally within the column."),hass:t,data:{horizontal_alignment:r.horizontal_alignment||"center"},schema:[this.selectField("horizontal_alignment",[{value:"left",label:(0,d.kg)("editor.common.left",s,"Left")},{value:"center",label:(0,d.kg)("editor.common.center",s,"Center")},{value:"right",label:(0,d.kg)("editor.common.right",s,"Right")},{value:"stretch",label:(0,d.kg)("editor.common.stretch",s,"Stretch")}])],onChange:e=>{e.detail.value.horizontal_alignment!==(r.horizontal_alignment||"center")&&(n(e.detail.value),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}},{title:(0,d.kg)("editor.vertical.alignment.vertical",s,"Vertical Distribution"),description:(0,d.kg)("editor.vertical.alignment.vertical_desc",s,"How items are distributed along the vertical axis."),hass:t,data:{alignment:r.alignment||"top"},schema:[this.selectField("alignment",[{value:"top",label:(0,d.kg)("editor.common.top",s,"Top")},{value:"center",label:(0,d.kg)("editor.common.center",s,"Center")},{value:"bottom",label:(0,d.kg)("editor.common.bottom",s,"Bottom")},{value:"space-between",label:(0,d.kg)("editor.common.space_between",s,"Space Between")},{value:"space-around",label:(0,d.kg)("editor.common.space_around",s,"Space Around")}])],onChange:e=>{e.detail.value.alignment!==(r.alignment||"top")&&(n(e.detail.value),setTimeout((()=>{this.triggerPreviewUpdate()}),50))}}])}

        <!-- Gap Between Items Field with Custom Slider -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,d.kg)("editor.vertical.gap.title",s,"Gap Configuration")}
          </div>

          <div style="margin-bottom: 8px;">
            <div
              class="field-title"
              style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
            >
              ${(0,d.kg)("editor.vertical.gap.between_items",s,"Gap Between Items")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
            >
              ${(0,d.kg)("editor.vertical.gap.desc",s,"Set the spacing between vertical items (in rem units). Use negative values to overlap items. Any value is allowed. Note: Gap is disabled when using Space Between or Space Around distribution.")}
            </div>
            <div
              class="gap-control-container"
              style="display: flex; align-items: center; gap: 12px; ${"space-between"===r.alignment||"space-around"===r.alignment?"opacity: 0.5; pointer-events: none;":""}"
            >
              <input
                type="range"
                class="gap-slider"
                min="-50"
                max="50"
                step="0.1"
                .value="${r.gap||1.2}"
                @input=${e=>{const t=e.target,i=parseFloat(t.value);n({gap:i})}}
              />
              <input
                type="number"
                class="gap-input"
                style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                step="0.1"
                .value="${r.gap||1.2}"
                @input=${e=>{const t=e.target,i=parseFloat(t.value);isNaN(i)||n({gap:i})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=(parseFloat(t.value)||1.2)+("ArrowUp"===e.key?.1:-.1),o=Math.round(10*i)/10;n({gap:o})}}}
              />
              <button
                class="reset-btn"
                @click=${()=>n({gap:1.2})}
                title="Reset to default (1.2)"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    `}renderPreview(e,t,i,n){var a;const s=e,l=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en",p=s,u=Object.assign(Object.assign({},p),p.design||{}),h=s.modules&&s.modules.length>0,g=s.gap||1.2,m={padding:this.getPaddingCSS(u),margin:this.getMarginCSS(u),background:this.getBackgroundCSS(u),backgroundImage:this.getBackgroundImageCSS(u,t),backgroundSize:u.background_size||"cover",backgroundPosition:u.background_position||"center",backgroundRepeat:u.background_repeat||"no-repeat",border:u.border_width?this.getBorderCSS(u):"none",borderRadius:this.addPixelUnit(u.border_radius)||"0",display:"flex",flexDirection:"column",justifyContent:this.getJustifyContent(s.alignment||"center"),gap:g>=0&&"space-between"!==s.alignment&&"space-around"!==s.alignment?`${g}rem`:"0",alignItems:this.getAlignItems(s.horizontal_alignment||"center"),width:"100%",minHeight:"0"};let f=null,_=null,v=!1,b=0,y=0;return o.qy`
      <div class="vertical-module-preview">
        <div
          class="vertical-preview-content"
          style="${this.styleObjectToCss(m)}; cursor: ${s.tap_action&&"nothing"!==s.tap_action.action||s.hold_action&&"nothing"!==s.hold_action.action||s.double_tap_action&&"nothing"!==s.double_tap_action.action?"pointer":"default"};"
          @pointerdown=${e=>{e.preventDefault(),v=!1,_=setTimeout((()=>{v=!0,s.hold_action&&"nothing"!==s.hold_action.action&&r.K.handleAction(s.hold_action,t,e.target,i)}),500)}}
          @pointerup=${e=>{if(e.preventDefault(),_&&(clearTimeout(_),_=null),v)return void(v=!1);const o=Date.now();o-y<300&&1===b?(f&&(clearTimeout(f),f=null),b=0,s.double_tap_action&&"nothing"!==s.double_tap_action.action&&r.K.handleAction(s.double_tap_action,t,e.target,i)):(b=1,y=o,f=setTimeout((()=>{b=0,s.tap_action&&"nothing"===s.tap_action.action||r.K.handleAction(s.tap_action||{action:"default"},t,e.target,i,s.entity)}),300))}}
        >
          ${h?(()=>{c.S.setHass(t);const e=s.modules.filter((e=>{var t,i,o,n;const a=e,r=c.S.evaluateModuleVisibility(a),s=c.S.evaluateLogicProperties({logic_entity:null===(t=null==a?void 0:a.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(i=null==a?void 0:a.design)||void 0===i?void 0:i.logic_attribute,logic_operator:null===(o=null==a?void 0:a.design)||void 0===o?void 0:o.logic_operator,logic_value:null===(n=null==a?void 0:a.design)||void 0===n?void 0:n.logic_value});return r&&s}));return e.map(((e,i)=>{const n=g<0&&i>0&&"space-between"!==s.alignment&&"space-around"!==s.alignment,a=n?`${g}rem 0 0 0`:"0",r=n;return o.qy`
                    <div
                      class="child-module-preview ${r?"negative-gap":""}"
                      style="max-width: 100%; overflow: hidden; width: 100%; box-sizing: border-box; margin: ${a}; ${r?"padding: 0; border: none; background: transparent;":""}"
                    >
                      ${this._renderChildModulePreview(e,t,p)}
                    </div>
                  `}))})():o.qy`
                <div class="empty-layout-message">
                  <span
                    >${(0,d.kg)("editor.vertical.empty.no_modules",l,"No modules added yet")}</span
                  >
                  <small
                    >${(0,d.kg)("editor.vertical.empty.add_modules",l,"Add modules in the layout builder to see them here")}</small
                  >
                </div>
              `}
        </div>
      </div>
    `}_renderChildModulePreview(e,t,i){var n,a,r,l,d,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A;let C=e;i&&(C=this.applyLayoutDesignToChild(e,i)),c.S.setHass(t);const $=C,T=c.S.evaluateModuleVisibility($),z=c.S.evaluateLogicProperties({logic_entity:null===(n=null==$?void 0:$.design)||void 0===n?void 0:n.logic_entity,logic_attribute:null===(a=null==$?void 0:$.design)||void 0===a?void 0:a.logic_attribute,logic_operator:null===(r=null==$?void 0:$.design)||void 0===r?void 0:r.logic_operator,logic_value:null===(l=null==$?void 0:$.design)||void 0===l?void 0:l.logic_value});if(!T||!z)return o.qy``;const P=(0,s.oD)().getModule(C.type);if(!P)return o.qy``;const E=(null===(u=null===(d=P.metadata)||void 0===d?void 0:d.tags)||void 0===u?void 0:u.includes("pro"))||(null===(g=null===(h=P.metadata)||void 0===h?void 0:h.tags)||void 0===g?void 0:g.includes("premium"))||!1;let I=!1;const j=p.x.checkIntegrationAuth(t);if("pro"===(null===(m=null==j?void 0:j.subscription)||void 0===m?void 0:m.tier)&&"active"===(null===(f=null==j?void 0:j.subscription)||void 0===f?void 0:f.status))I=!0;else if(p.x.isAuthenticated()){const e=p.x.getCurrentUser();"pro"===(null===(_=null==e?void 0:e.subscription)||void 0===_?void 0:_.tier)&&"active"===(null===(v=null==e?void 0:e.subscription)||void 0===v?void 0:v.status)&&(I=!0)}const M=E&&!I;if(P){const e=P.renderPreview(C,t);if(M)return o.qy`
          <div class="pro-module-locked" style="position: relative;">
            ${e}
            <div
              class="pro-module-overlay"
              style="
              position: absolute;
              top: 0;
              left: 0;
              right: 0;
              bottom: 0;
              background: rgba(0, 0, 0, 0.8);
              backdrop-filter: blur(8px);
              display: flex;
              align-items: center;
              justify-content: center;
              border-radius: 12px;
              z-index: 10;
            "
            >
              <div
                class="pro-module-message"
                style="
                text-align: center;
                color: white;
                padding: 6px;
                max-width: 95%;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 4px;
              "
              >
                <ha-icon icon="mdi:lock" style="font-size: 20px; flex-shrink: 0;"></ha-icon>
                <div
                  style="font-size: 11px; font-weight: 600; line-height: 1.2; white-space: nowrap;"
                >
                  Pro Module
                </div>
                <div style="font-size: 9px; opacity: 0.8; line-height: 1.2; display: none;">
                  Login to view
                </div>
              </div>
            </div>
          </div>
        `;const i=C,n=i.animation_type||(null===(b=i.design)||void 0===b?void 0:b.animation_type);if(n&&"none"!==n){const a=i.animation_duration||(null===(y=i.design)||void 0===y?void 0:y.animation_duration)||"2s",r=i.animation_delay||(null===(x=i.design)||void 0===x?void 0:x.animation_delay)||"0s",s=i.animation_timing||(null===(k=i.design)||void 0===k?void 0:k.animation_timing)||"ease",l=i.animation_entity||(null===(w=i.design)||void 0===w?void 0:w.animation_entity),d=i.animation_trigger_type||(null===(S=i.design)||void 0===S?void 0:S.animation_trigger_type)||"state",c=i.animation_attribute||(null===(O=i.design)||void 0===O?void 0:O.animation_attribute),p=i.animation_state||(null===(A=i.design)||void 0===A?void 0:A.animation_state);let u=!1;if(l){if(p&&t&&t.states[l]){const e=t.states[l];u="attribute"===d&&c?String(e.attributes[c])===p:e.state===p}}else u=!0;if(u)return o.qy`
            <div
              class="module-animation-wrapper animation-${n}"
              style="
                --animation-duration: ${a};
                --animation-delay: ${r};
                --animation-timing: ${s};
              "
            >
              ${e}
            </div>
          `}return e}return o.qy`
      <div class="unknown-child-module">
        <ha-icon icon="mdi:help-circle"></ha-icon>
        <span>Unknown Module: ${C.type}</span>
      </div>
    `}applyLayoutDesignToChild(e,t){const i=Object.assign({},e);return t.color&&(i.color=t.color),t.font_size&&(i.font_size=t.font_size),t.font_family&&(i.font_family=t.font_family),t.font_weight&&(i.font_weight=t.font_weight),t.text_align&&(i.text_align=t.text_align),t.line_height&&(i.line_height=t.line_height),t.letter_spacing&&(i.letter_spacing=t.letter_spacing),t.text_transform&&(i.text_transform=t.text_transform),t.font_style&&(i.font_style=t.font_style),t.text_shadow_h&&(i.text_shadow_h=t.text_shadow_h),t.text_shadow_v&&(i.text_shadow_v=t.text_shadow_v),t.text_shadow_blur&&(i.text_shadow_blur=t.text_shadow_blur),t.text_shadow_color&&(i.text_shadow_color=t.text_shadow_color),t.box_shadow_h&&(i.box_shadow_h=t.box_shadow_h),t.box_shadow_v&&(i.box_shadow_v=t.box_shadow_v),t.box_shadow_blur&&(i.box_shadow_blur=t.box_shadow_blur),t.box_shadow_spread&&(i.box_shadow_spread=t.box_shadow_spread),t.box_shadow_color&&(i.box_shadow_color=t.box_shadow_color),t.animation_type&&(i.animation_type=t.animation_type),t.animation_entity&&(i.animation_entity=t.animation_entity),t.animation_trigger_type&&(i.animation_trigger_type=t.animation_trigger_type),t.animation_attribute&&(i.animation_attribute=t.animation_attribute),t.animation_state&&(i.animation_state=t.animation_state),t.intro_animation&&(i.intro_animation=t.intro_animation),t.outro_animation&&(i.outro_animation=t.outro_animation),t.animation_duration&&(i.animation_duration=t.animation_duration),t.animation_delay&&(i.animation_delay=t.animation_delay),t.animation_timing&&(i.animation_timing=t.animation_timing),t.horizontal_alignment&&(i.alignment=t.horizontal_alignment),i}renderLogicTab(e,t,i,o){return l.X.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors];if(t.modules&&t.modules.length>0)for(const e of t.modules)if("horizontal"===e.type||"vertical"===e.type){const t=e;if(t.modules&&t.modules.length>0)for(const e of t.modules)if("horizontal"===e.type||"vertical"===e.type){const t=e;if(t.modules&&t.modules.length>0)for(const e of t.modules)if("horizontal"===e.type||"vertical"===e.type){i.push("Layout modules cannot be nested more than 2 levels deep. Remove layout modules from the third level.");break}}}return{valid:0===i.length,errors:i}}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"8px"} ${this.addPixelUnit(e.padding_right)||"8px"} ${this.addPixelUnit(e.padding_bottom)||"8px"} ${this.addPixelUnit(e.padding_left)||"8px"}`:"8px"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"0"} ${this.addPixelUnit(e.margin_right)||"0"} ${this.addPixelUnit(e.margin_bottom)||"0"} ${this.addPixelUnit(e.margin_left)||"0"}`:"0"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){var i,o;if(!e.background_image_type||"none"===e.background_image_type)return e.background_image?`url("${e.background_image}")`:"none";switch(e.background_image_type){case"upload":if(e.background_image)return`url("${(0,a.V)(t,e.background_image)}")`;break;case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const n=t.states[e.background_image_entity];let r="";if((null===(i=n.attributes)||void 0===i?void 0:i.entity_picture)?r=n.attributes.entity_picture:(null===(o=n.attributes)||void 0===o?void 0:o.image)?r=n.attributes.image:n.state&&"string"==typeof n.state&&(n.state.startsWith("/")||n.state.startsWith("http"))&&(r=n.state),r)return`url("${(0,a.V)(t,r)}")`}}return"none"}getBorderCSS(e){return`${this.addPixelUnit(e.border_width)||"0"} ${e.border_style||"solid"} ${e.border_color||"transparent"}`}getJustifyContent(e){switch(e){case"top":default:return"flex-start";case"center":return"center";case"bottom":return"flex-end";case"space-between":return"space-between";case"space-around":return"space-around"}}getAlignItems(e){switch(e){case"left":default:return"flex-start";case"center":return"center";case"right":return"flex-end";case"stretch":return"stretch"}}getStyles(){return'\n      /* Vertical Module Styles */\n      .vertical-module-preview {\n        width: 100%;\n        min-height: 60px;\n      }\n\n      .vertical-preview-content {\n        background: transparent;\n        border-radius: 6px;\n        border: none;\n        transition: all 0.2s ease;\n      }\n\n      .child-module-preview {\n        background: transparent;\n        border: none;\n        border-radius: 4px;\n        padding: 0;\n        transition: all 0.2s ease;\n        width: 100%;\n      }\n\n      .child-module-preview.negative-gap {\n        background: transparent !important;\n        border: none !important;\n        border-radius: 0 !important;\n        padding: 0 !important;\n      }\n\n      /* Legacy hover effects removed - now handled by new hover effects system */\n\n      .empty-layout-message {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 4px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n        text-align: center;\n        width: 100%;\n        padding: 20px;\n      }\n\n      .empty-layout-message span {\n        font-size: 14px;\n        font-weight: 500;\n      }\n\n      .empty-layout-message small {\n        font-size: 12px;\n        opacity: 0.8;\n      }\n\n      .unknown-child-module {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n      }\n\n      /* Scoped list-style reset to avoid stray bullet markers in preview */\n      .vertical-module-preview ul,\n      .vertical-module-preview ol {\n        list-style: none;\n        margin: 0;\n        padding: 0;\n      }\n      .vertical-module-preview li::marker {\n        content: \'\';\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n      \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Custom Range Slider Styling */\n      input[type="range"] {\n        -webkit-appearance: none;\n        appearance: none;\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        outline: none;\n        opacity: 0.7;\n        transition: opacity 0.2s;\n      }\n\n      input[type="range"]:hover {\n        opacity: 1;\n      }\n\n      input[type="range"]::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        appearance: none;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-webkit-slider-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-moz-range-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-track {\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        border: none;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    '}}},6101:(e,t,i)=>{i.d(t,{b:()=>u});var o=i(5183),n=i(866),a=(i(796),i(2381)),r=i(7593),s=i(7987),l=i(2371),d=i(456),c=i(1397),p=i(8460);class u extends n.m{constructor(){super(...arguments),this.metadata={type:"horizontal",title:"Horizontal Layout",description:"Arrange modules in rows with flexible horizontal and vertical alignment and spacing",author:"WJD Designs",version:"1.0.0",icon:"mdi:view-column",category:"layout",tags:["layout","horizontal","vertical","alignment","container","flexbox"]}}createDefault(e,t){return{id:e||this.generateId("horizontal"),type:"horizontal",alignment:"center",vertical_alignment:"center",gap:.7,wrap:!1,modules:[],tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[]}}renderGeneralTab(e,t,i,n){var a;const r=e,s=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}

      <div class="module-general-settings">
        <!-- Layout Configuration Section -->
        ${this.renderSettingsSection((0,d.kg)("editor.horizontal.layout.title",s,"Layout Configuration"),(0,d.kg)("editor.horizontal.layout.desc",s,"Configure how items are arranged horizontally within the container."),[{title:(0,d.kg)("editor.horizontal.alignment.horizontal",s,"Horizontal Alignment"),description:(0,d.kg)("editor.horizontal.alignment.horizontal_desc",s,"Choose how items are aligned horizontally within the container."),hass:t,data:r,schema:[this.selectField("alignment",[{value:"left",label:(0,d.kg)("editor.common.left",s,"Left")},{value:"center",label:(0,d.kg)("editor.common.center",s,"Center")},{value:"right",label:(0,d.kg)("editor.common.right",s,"Right")},{value:"space-between",label:(0,d.kg)("editor.common.space_between",s,"Space Between")},{value:"space-around",label:(0,d.kg)("editor.common.space_around",s,"Space Around")},{value:"justify",label:(0,d.kg)("editor.common.justify",s,"Justify")}])],onChange:e=>{e.detail.value.alignment!==(r.alignment||"center")&&n(e.detail.value)}}])}
        ${this.renderSettingsSection("","",[{title:(0,d.kg)("editor.horizontal.alignment.vertical",s,"Vertical Alignment"),description:(0,d.kg)("editor.horizontal.alignment.vertical_desc",s,"Choose how items are aligned vertically within the container."),hass:t,data:r,schema:[this.selectField("vertical_alignment",[{value:"top",label:(0,d.kg)("editor.common.top",s,"Top")},{value:"center",label:(0,d.kg)("editor.common.center",s,"Center")},{value:"bottom",label:(0,d.kg)("editor.common.bottom",s,"Bottom")},{value:"stretch",label:(0,d.kg)("editor.common.stretch",s,"Stretch")},{value:"baseline",label:(0,d.kg)("editor.common.baseline",s,"Baseline")}])],onChange:e=>{var t;const i=null===(t=e.detail.value)||void 0===t?void 0:t.vertical_alignment;void 0!==i&&i!==r.vertical_alignment&&n({vertical_alignment:i})}}])}

        <!-- Allow Wrapping Toggle -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 16px;"
        >
          <div style="display: flex; align-items: center; justify-content: space-between;">
            <div style="flex: 1;">
              <div
                class="field-title"
                style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
              >
                ${(0,d.kg)("editor.horizontal.wrapping.title",s,"Allow Wrapping")}
              </div>
              <div
                class="field-description"
                style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8; line-height: 1.4;"
              >
                ${(0,d.kg)("editor.horizontal.wrapping.desc",s,"Allow items to wrap to the next line when they exceed the container width.")}
              </div>
            </div>
            <div style="margin-left: 16px;">
              <ha-switch
                .checked=${r.wrap||!1}
                @change=${e=>{const t=e.target;n({wrap:t.checked})}}
              ></ha-switch>
            </div>
          </div>
        </div>

        <!-- Gap Between Items Field with Custom Slider -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,d.kg)("editor.horizontal.gap.title",s,"Gap Configuration")}
          </div>

          <div style="margin-bottom: 24px;">
            <div
              class="field-title"
              style="font-size: 16px; font-weight: 600; color: var(--primary-text-color); margin-bottom: 4px;"
            >
              ${(0,d.kg)("editor.horizontal.gap.between_items",s,"Gap Between Items")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
            >
              ${(0,d.kg)("editor.horizontal.gap.desc",s,"Set the spacing between horizontal items (in rem units). Use negative values to overlap items. Any value is allowed.")}
            </div>
            <div
              class="gap-control-container"
              style="display: flex; align-items: center; gap: 12px;"
            >
              <input
                type="range"
                class="gap-slider"
                min="-50"
                max="50"
                step="0.1"
                .value="${r.gap||.7}"
                @input=${e=>{const t=e.target,i=parseFloat(t.value);n({gap:i})}}
              />
              <input
                type="number"
                class="gap-input"
                style="width: 50px !important; max-width: 50px !important; min-width: 50px !important; padding: 4px 6px !important; font-size: 13px !important;"
                step="0.1"
                .value="${r.gap||.7}"
                @input=${e=>{const t=e.target,i=parseFloat(t.value);isNaN(i)||n({gap:i})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=(parseFloat(t.value)||.7)+("ArrowUp"===e.key?.1:-.1),o=Math.round(10*i)/10;n({gap:o})}}}
              />
              <button
                class="reset-btn"
                @click=${()=>n({gap:.7})}
                title="${(0,d.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","0.7")}"
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>
        </div>
      </div>
    `}renderPreview(e,t,i,n){var a,r;const l=e,p=(null===(a=null==t?void 0:t.locale)||void 0===a?void 0:a.language)||"en",u=l,h=Object.assign(Object.assign({},u),u.design||{}),g=l.modules&&l.modules.length>0,m=l.gap||.7,f=void 0!==l.alignment&&null!==l.alignment?l.alignment:"center",_={padding:this.getPaddingCSS(h),margin:this.getMarginCSS(h),background:this.getBackgroundCSS(h),backgroundImage:this.getBackgroundImageCSS(h,t),backgroundSize:h.background_size||"cover",backgroundPosition:h.background_position||"center",backgroundRepeat:h.background_repeat||"no-repeat",border:h.border_width?this.getBorderCSS(h):"none",borderRadius:this.addPixelUnit(h.border_radius)||"0",position:h.position||(h.z_index?"relative":"static"),zIndex:h.z_index||"auto",width:h.width||"100%",height:h.height||void 0,maxWidth:h.max_width||void 0,minWidth:h.min_width||void 0,maxHeight:h.max_height||void 0,boxShadow:h.box_shadow||void 0,backdropFilter:h.backdrop_filter||void 0,clipPath:h.clip_path||void 0,display:"flex",flexDirection:"row",justifyContent:this.getJustifyContent(f||"center"),gap:m>=0?`${m}rem`:"0",flexWrap:l.wrap?"wrap":"nowrap",alignItems:this.getAlignItems(l.vertical_alignment||"center"),minHeight:h.min_height||"auto",overflowX:"visible",overflowY:"visible",boxSizing:"border-box"},v=null===(r=l.design)||void 0===r?void 0:r.hover_effect,b=s.k.getHoverEffectClass(v);return o.qy`
      <style>
        ${this.getStyles()}
      </style>
      <div class="horizontal-module-preview">
        <div
          class="horizontal-preview-content ${b}"
          style="${this.styleObjectToCss(_)}; cursor: ${l.tap_action&&"nothing"!==l.tap_action.action||l.hold_action&&"nothing"!==l.hold_action.action||l.double_tap_action&&"nothing"!==l.double_tap_action.action?"pointer":"default"};"
          data-wrap=${l.wrap?"true":"false"}
        >
          ${g?(()=>{c.S.setHass(t);const e=l.modules.filter((e=>{var t,i,o,n;const a=e,r=c.S.evaluateModuleVisibility(a),s=c.S.evaluateLogicProperties({logic_entity:null===(t=null==a?void 0:a.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(i=null==a?void 0:a.design)||void 0===i?void 0:i.logic_attribute,logic_operator:null===(o=null==a?void 0:a.design)||void 0===o?void 0:o.logic_operator,logic_value:null===(n=null==a?void 0:a.design)||void 0===n?void 0:n.logic_value});return r&&s}));return e.map(((e,i)=>{const n=m<0&&i>0?`0 0 0 ${m}rem`:"0",a=m<0,r="bar"===(null==e?void 0:e.type),s="separator"===(null==e?void 0:e.type)&&("horizontal"===(null==e?void 0:e.orientation)||!(null==e?void 0:e.orientation)),d="external_card"===(null==e?void 0:e.type),c="justify"===l.alignment,p=r||s||d||c,h=`\n                    overflow: visible;\n                    flex-grow: ${p?1:0};\n                    flex-shrink: ${p?1:0};\n                    flex-basis: ${p?"0":"content"};\n                    min-width: ${r?"80px":s?"20px":"0"};\n                    ${d?"":"width: auto;"}\n                    ${d?"max-width: 100%;":""}\n                    align-self: auto;\n                    box-sizing: border-box;\n                    margin: ${n};\n                  `,g=a?"padding: 0; border: none; background: transparent;":"";return o.qy`
                    <div
                      class="child-module-preview ${a?"negative-gap":""}"
                      style="${h} ${g}"
                    >
                      ${this._renderChildModulePreview(e,t,u)}
                    </div>
                  `}))})():o.qy`
                <div class="empty-layout-message">
                  <span
                    >${(0,d.kg)("editor.horizontal.empty.no_modules",p,"No modules added yet")}</span
                  >
                  <small
                    >${(0,d.kg)("editor.horizontal.empty.add_modules",p,"Add modules in the layout builder to see them here")}</small
                  >
                </div>
              `}
        </div>
      </div>
    `}_renderChildModulePreview(e,t,i){var n,a,s,l,d,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A;let C=e;i&&(C=this.applyLayoutDesignToChild(e,i));const $=i;if($&&$.alignment){const e=C;e.alignment||(e.alignment=$.alignment)}c.S.setHass(t);const T=C,z=c.S.evaluateModuleVisibility(T),P=c.S.evaluateLogicProperties({logic_entity:null===(n=null==T?void 0:T.design)||void 0===n?void 0:n.logic_entity,logic_attribute:null===(a=null==T?void 0:T.design)||void 0===a?void 0:a.logic_attribute,logic_operator:null===(s=null==T?void 0:T.design)||void 0===s?void 0:s.logic_operator,logic_value:null===(l=null==T?void 0:T.design)||void 0===l?void 0:l.logic_value});if(!z||!P)return o.qy``;const E=(0,r.oD)().getModule(C.type);if(!E)return o.qy``;const I=(null===(u=null===(d=E.metadata)||void 0===d?void 0:d.tags)||void 0===u?void 0:u.includes("pro"))||(null===(g=null===(h=E.metadata)||void 0===h?void 0:h.tags)||void 0===g?void 0:g.includes("premium"))||!1;let j=!1;const M=p.x.checkIntegrationAuth(t);if("pro"===(null===(m=null==M?void 0:M.subscription)||void 0===m?void 0:m.tier)&&"active"===(null===(f=null==M?void 0:M.subscription)||void 0===f?void 0:f.status))j=!0;else if(p.x.isAuthenticated()){const e=p.x.getCurrentUser();"pro"===(null===(_=null==e?void 0:e.subscription)||void 0===_?void 0:_.tier)&&"active"===(null===(v=null==e?void 0:e.subscription)||void 0===v?void 0:v.status)&&(j=!0)}const D=I&&!j;if(E){const e=E.renderPreview(C,t);if(D)return o.qy`
          <div class="pro-module-locked" style="position: relative;">
            ${e}
            <div
              class="pro-module-overlay"
              style="
              position: absolute;
              top: 0;
              left: 0;
              right: 0;
              bottom: 0;
              background: rgba(0, 0, 0, 0.8);
              backdrop-filter: blur(8px);
              display: flex;
              align-items: center;
              justify-content: center;
              border-radius: 12px;
              z-index: 10;
            "
            >
              <div
                class="pro-module-message"
                style="
                text-align: center;
                color: white;
                padding: 6px;
                max-width: 95%;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 4px;
              "
              >
                <ha-icon icon="mdi:lock" style="font-size: 20px; flex-shrink: 0;"></ha-icon>
                <div
                  style="font-size: 11px; font-weight: 600; line-height: 1.2; white-space: nowrap;"
                >
                  Pro Module
                </div>
                <div style="font-size: 9px; opacity: 0.8; line-height: 1.2; display: none;">
                  Login to view
                </div>
              </div>
            </div>
          </div>
        `;const i=C,n=i.animation_type||(null===(b=i.design)||void 0===b?void 0:b.animation_type);if(n&&"none"!==n){const a=i.animation_duration||(null===(y=i.design)||void 0===y?void 0:y.animation_duration)||"2s",r=i.animation_delay||(null===(x=i.design)||void 0===x?void 0:x.animation_delay)||"0s",s=i.animation_timing||(null===(k=i.design)||void 0===k?void 0:k.animation_timing)||"ease",l=i.animation_entity||(null===(w=i.design)||void 0===w?void 0:w.animation_entity),d=i.animation_trigger_type||(null===(S=i.design)||void 0===S?void 0:S.animation_trigger_type)||"state",c=i.animation_attribute||(null===(O=i.design)||void 0===O?void 0:O.animation_attribute),p=i.animation_state||(null===(A=i.design)||void 0===A?void 0:A.animation_state);let u=!1;if(l){if(p&&t&&t.states[l]){const e=t.states[l];u="attribute"===d&&c?String(e.attributes[c])===p:e.state===p}}else u=!0;if(u)return o.qy`
            <div
              class="module-animation-wrapper animation-${n}"
              style="
                --animation-duration: ${a};
                --animation-delay: ${r};
                --animation-timing: ${s};
              "
            >
              ${e}
            </div>
          `}return e}return o.qy`
      <div class="unknown-child-module">
        <ha-icon icon="mdi:help-circle"></ha-icon>
        <span>Unknown Module: ${C.type}</span>
      </div>
    `}applyLayoutDesignToChild(e,t){const i=Object.assign({},e);return t.color&&(i.color=t.color),t.font_size&&(i.font_size=t.font_size),t.font_family&&(i.font_family=t.font_family),t.font_weight&&(i.font_weight=t.font_weight),t.text_align&&(i.text_align=t.text_align),t.line_height&&(i.line_height=t.line_height),t.letter_spacing&&(i.letter_spacing=t.letter_spacing),t.text_transform&&(i.text_transform=t.text_transform),t.font_style&&(i.font_style=t.font_style),t.text_shadow_h&&(i.text_shadow_h=t.text_shadow_h),t.text_shadow_v&&(i.text_shadow_v=t.text_shadow_v),t.text_shadow_blur&&(i.text_shadow_blur=t.text_shadow_blur),t.text_shadow_color&&(i.text_shadow_color=t.text_shadow_color),t.box_shadow_h&&(i.box_shadow_h=t.box_shadow_h),t.box_shadow_v&&(i.box_shadow_v=t.box_shadow_v),t.box_shadow_blur&&(i.box_shadow_blur=t.box_shadow_blur),t.box_shadow_spread&&(i.box_shadow_spread=t.box_shadow_spread),t.box_shadow_color&&(i.box_shadow_color=t.box_shadow_color),t.animation_type&&(i.animation_type=t.animation_type),t.animation_entity&&(i.animation_entity=t.animation_entity),t.animation_trigger_type&&(i.animation_trigger_type=t.animation_trigger_type),t.animation_attribute&&(i.animation_attribute=t.animation_attribute),t.animation_state&&(i.animation_state=t.animation_state),t.intro_animation&&(i.intro_animation=t.intro_animation),t.outro_animation&&(i.outro_animation=t.outro_animation),t.animation_duration&&(i.animation_duration=t.animation_duration),t.animation_delay&&(i.animation_delay=t.animation_delay),t.animation_timing&&(i.animation_timing=t.animation_timing),t.alignment&&(i.alignment=t.alignment),i}renderLogicTab(e,t,i,o){return l.X.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors];if(t.vertical_alignment&&!["top","center","bottom","stretch","baseline"].includes(t.vertical_alignment)&&i.push("Vertical alignment must be one of: top, center, bottom, stretch, baseline"),t.modules&&t.modules.length>0)for(const e of t.modules)if("horizontal"===e.type||"vertical"===e.type){const t=e;if(t.modules&&t.modules.length>0)for(const e of t.modules)if("horizontal"===e.type||"vertical"===e.type){const t=e;if(t.modules&&t.modules.length>0)for(const e of t.modules)if("horizontal"===e.type||"vertical"===e.type){i.push("Layout modules cannot be nested more than 2 levels deep. Remove layout modules from the third level.");break}}}return{valid:0===i.length,errors:i}}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"0px"} ${this.addPixelUnit(e.padding_right)||"0px"} ${this.addPixelUnit(e.padding_bottom)||"0px"} ${this.addPixelUnit(e.padding_left)||"0px"}`:"0"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"0"} ${this.addPixelUnit(e.margin_right)||"0"} ${this.addPixelUnit(e.margin_bottom)||"0"} ${this.addPixelUnit(e.margin_left)||"0"}`:"0"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){var i,o;if(!e.background_image_type||"none"===e.background_image_type)return e.background_image?`url("${e.background_image}")`:"none";switch(e.background_image_type){case"upload":if(e.background_image)return`url("${(0,a.V)(t,e.background_image)}")`;break;case"url":if(e.background_image)return`url("${e.background_image}")`;break;case"entity":if(e.background_image_entity&&(null==t?void 0:t.states[e.background_image_entity])){const n=t.states[e.background_image_entity];let r="";if((null===(i=n.attributes)||void 0===i?void 0:i.entity_picture)?r=n.attributes.entity_picture:(null===(o=n.attributes)||void 0===o?void 0:o.image)?r=n.attributes.image:n.state&&"string"==typeof n.state&&(n.state.startsWith("/")||n.state.startsWith("http"))&&(r=n.state),r)return`url("${(0,a.V)(t,r)}")`}}return"none"}getBorderCSS(e){return`${this.addPixelUnit(e.border_width)||"0"} ${e.border_style||"solid"} ${e.border_color||"transparent"}`}getJustifyContent(e){switch(e){case"left":default:return"flex-start";case"center":return"center";case"right":return"flex-end";case"space-between":case"justify":return"space-between";case"space-around":return"space-around"}}getAlignItems(e){switch(e){case"top":default:return"flex-start";case"center":return"center";case"bottom":return"flex-end";case"stretch":return"stretch";case"baseline":return"baseline"}}getStyles(){return'\n      /* Horizontal Module Styles */\n      .horizontal-module-preview {\n        width: 100%;\n        /* No forced min-height - let content and user design properties control height */\n      }\n\n      .horizontal-preview-content {\n        background: transparent;\n        border-radius: 6px;\n        border: none;\n        transition: all 0.2s ease;\n      }\n\n      .child-module-preview {\n        background: transparent;\n        border: none;\n        border-radius: 4px;\n        padding: 0;\n        transition: all 0.2s ease, transform 0.3s ease;\n        /* Ensure modules maintain readable size */\n        min-width: max-content;\n        min-height: 0;\n        overflow: visible;\n        box-sizing: border-box;\n      }\n\n      /* Ensure external card wrappers handle scaling properly */\n      .child-module-preview:has(.external-card-container) {\n        overflow: visible;\n        transform-origin: center center;\n      }\n\n      .child-module-preview.negative-gap {\n        background: transparent !important;\n        border: none !important;\n        border-radius: 0 !important;\n        padding: 0 !important;\n      }\n\n      /* Legacy hover effects removed - now handled by new hover effects system */\n\n      .empty-layout-message {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        gap: 4px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n        text-align: center;\n        width: 100%;\n        padding: 20px;\n      }\n\n      .empty-layout-message span {\n        font-size: 14px;\n        font-weight: 500;\n      }\n\n      .empty-layout-message small {\n        font-size: 12px;\n        opacity: 0.8;\n      }\n\n      .unknown-child-module {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px;\n        color: var(--secondary-text-color);\n        font-style: italic;\n      }\n\n      /* Ensure module defaults play nicely in a horizontal row */\n      .child-module-preview .icon-module-preview {\n        /* Icon modules should size to content in rows */\n        width: auto !important;\n        max-width: 100% !important;\n      }\n\n      .child-module-preview .icon-module-container {\n        /* Override any inline width from icon module when inside horizontal rows */\n        width: auto !important;\n        max-width: 100% !important;\n        flex: 0 0 auto !important;\n      }\n\n      .child-module-preview .bar-module-preview {\n        /* Bars should expand to available space in rows */\n        width: 100% !important;\n        max-width: 100% !important;\n      }\n\n      /* When wrapping is enabled, allow items to maintain their natural size */\n      .horizontal-preview-content[data-wrap="true"] .child-module-preview {\n        flex-shrink: 1;\n        min-width: 0;\n      }\n\n      /* When wrapping is disabled, compress items to fit in one line */\n      .horizontal-preview-content:not([data-wrap="true"]) .child-module-preview {\n        flex-shrink: 1;\n        min-width: 0;\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n        \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Custom Range Slider Styling */\n      input[type="range"] {\n        -webkit-appearance: none;\n        appearance: none;\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        outline: none;\n        opacity: 0.7;\n        transition: opacity 0.2s;\n      }\n\n      input[type="range"]:hover {\n        opacity: 1;\n      }\n\n      input[type="range"]::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        appearance: none;\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-webkit-slider-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        border-radius: 50%;\n        background: var(--primary-color);\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n        transition: all 0.2s ease;\n      }\n\n      input[type="range"]::-moz-range-thumb:hover {\n        transform: scale(1.1);\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);\n      }\n\n      input[type="range"]::-moz-range-track {\n        height: 6px;\n        border-radius: 3px;\n        background: var(--disabled-color);\n        border: none;\n      }\n\n      /* Gap control styles */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    '}}},6256:(e,t,i)=>{i.d(t,{W:()=>p});var o=i(5183),n=i(456),a=i(866),r=i(9662),s=i(2371),l=i(7987),d=i(4345),c=(i(6768),i(2381));class p extends a.m{constructor(){super(...arguments),this._templateInputDebounce=null,this.metadata={type:"spinbox",title:"Spinbox",description:"Number input with increment/decrement buttons",author:"WJD Designs",version:"1.0.0",icon:"mdi:numeric",category:"interactive",tags:["spinbox","number","increment","decrement","input","stepper"]}}createDefault(e,t){return{id:e||this.generateId("spinbox"),type:"spinbox",min_value:0,max_value:100,step:1,value:50,layout:"horizontal",show_value:!0,value_position:"center",show_unit:!1,unit:"",button_style:"flat",button_shape:"rounded",button_size:40,button_spacing:12,button_gap:8,increment_icon:"mdi:plus",decrement_icon:"mdi:minus",button_background_color:"var(--primary-color)",button_text_color:"white",value_color:"var(--primary-text-color)",value_font_size:18,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0,template_mode:!1,template:""}}getButtonStyles(e){return[{value:"flat",label:(0,n.kg)("editor.spinbox.styles.flat",e,"Flat (Default)")},{value:"glossy",label:(0,n.kg)("editor.spinbox.styles.glossy",e,"Glossy")},{value:"embossed",label:(0,n.kg)("editor.spinbox.styles.embossed",e,"Embossed")},{value:"inset",label:(0,n.kg)("editor.spinbox.styles.inset",e,"Inset")},{value:"gradient-overlay",label:(0,n.kg)("editor.spinbox.styles.gradient_overlay",e,"Gradient Overlay")},{value:"neon-glow",label:(0,n.kg)("editor.spinbox.styles.neon_glow",e,"Neon Glow")},{value:"outline",label:(0,n.kg)("editor.spinbox.styles.outline",e,"Outline")},{value:"glass",label:(0,n.kg)("editor.spinbox.styles.glass",e,"Glass")},{value:"metallic",label:(0,n.kg)("editor.spinbox.styles.metallic",e,"Metallic")}]}getButtonShapeOptions(e){return[{value:"rounded",label:(0,n.kg)("editor.spinbox.shapes.rounded",e,"Rounded Square (Default)")},{value:"square",label:(0,n.kg)("editor.spinbox.shapes.square",e,"Square")},{value:"circle",label:(0,n.kg)("editor.spinbox.shapes.circle",e,"Circle")}]}getLayoutOptions(e){return[{value:"horizontal",label:(0,n.kg)("editor.spinbox.layout_options.horizontal",e,"Horizontal")},{value:"vertical",label:(0,n.kg)("editor.spinbox.layout_options.vertical",e,"Vertical")}]}getValuePositionOptions(e){return[{value:"center",label:(0,n.kg)("editor.spinbox.value_position_options.center",e,"Center (Between Buttons)")},{value:"top",label:(0,n.kg)("editor.spinbox.value_position_options.top",e,"Top (Above Both Buttons)")},{value:"bottom",label:(0,n.kg)("editor.spinbox.value_position_options.bottom",e,"Bottom (Below Both Buttons)")},{value:"left",label:(0,n.kg)("editor.spinbox.value_position_options.left",e,"Left (Before Buttons)")},{value:"right",label:(0,n.kg)("editor.spinbox.value_position_options.right",e,"Right (After Buttons)")}]}renderGeneralTab(e,t,i,a){var r,s,l,d,c,p,u,h,g,m,f;const _=e,v=(null===(r=null==t?void 0:t.locale)||void 0===r?void 0:r.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}
      <div class="general-tab">
        <!-- Entity Configuration -->
        ${this.renderSettingsSection((0,n.kg)("editor.spinbox.entity.title",v,"Entity Configuration"),(0,n.kg)("editor.spinbox.entity.desc",v,"Optional: Link to a Home Assistant entity for synced values (e.g., input_number, climate temperature)."),[{title:(0,n.kg)("editor.spinbox.entity_field",v,"Entity"),description:(0,n.kg)("editor.spinbox.entity_field_desc",v,"Select an entity to sync the spinbox value (optional). Supports input_number, number, climate entities."),hass:t,data:{entity:_.entity||""},schema:[this.entityField("entity")],onChange:e=>a(e.detail.value)}])}

        <!-- Value Configuration -->
        ${this.renderSettingsSection((0,n.kg)("editor.spinbox.value.title",v,"Value Configuration"),(0,n.kg)("editor.spinbox.value.desc",v,"Configure the numeric range, step size, and default value."),[{title:(0,n.kg)("editor.spinbox.min_value",v,"Minimum Value"),description:(0,n.kg)("editor.spinbox.min_value_desc",v,"The minimum allowed value"),hass:t,data:{min_value:null!==(s=_.min_value)&&void 0!==s?s:0},schema:[this.numberField("min_value")],onChange:e=>a(e.detail.value)},{title:(0,n.kg)("editor.spinbox.max_value",v,"Maximum Value"),description:(0,n.kg)("editor.spinbox.max_value_desc",v,"The maximum allowed value"),hass:t,data:{max_value:null!==(l=_.max_value)&&void 0!==l?l:100},schema:[this.numberField("max_value")],onChange:e=>a(e.detail.value)},{title:(0,n.kg)("editor.spinbox.step",v,"Step Size"),description:(0,n.kg)("editor.spinbox.step_desc",v,"How much the value changes with each button press"),hass:t,data:{step:null!==(d=_.step)&&void 0!==d?d:1},schema:[this.numberField("step")],onChange:e=>a(e.detail.value)},{title:(0,n.kg)("editor.spinbox.value",v,"Default Value"),description:(0,n.kg)("editor.spinbox.value_desc",v,"The initial value (only used when no entity is linked)"),hass:t,data:{value:null!==(c=_.value)&&void 0!==c?c:50},schema:[this.numberField("value")],onChange:e=>a(e.detail.value)}])}

        <!-- Display Configuration -->
        <div class="settings-section">
          <div class="section-title">
            ${(0,n.kg)("editor.spinbox.display.title",v,"Display Configuration")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.layout_title",v,"Layout"),(0,n.kg)("editor.spinbox.layout_desc",v,"Arrangement of buttons and value"),t,{layout:_.layout||"horizontal"},[this.selectField("layout",this.getLayoutOptions(v))],(e=>{e.detail.value.layout!==(_.layout||"horizontal")&&(a(e.detail.value),setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div style="flex: 1;">
                <div
                  class="field-title"
                  style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                >
                  ${(0,n.kg)("editor.spinbox.show_value",v,"Show Value")}
                </div>
                <div
                  class="field-description"
                  style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 0;"
                >
                  ${(0,n.kg)("editor.spinbox.show_value_desc",v,"Display the current numeric value")}
                </div>
              </div>
              <ha-switch
                .checked=${null===(p=_.show_value)||void 0===p||p}
                @change=${e=>{const t=e.target;a({show_value:t.checked})}}
              ></ha-switch>
            </div>
          </div>

          ${_.show_value?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,n.kg)("editor.spinbox.value_position_title",v,"Value Position"),(0,n.kg)("editor.spinbox.value_position_desc",v,"Where to display the value relative to buttons"),t,{value_position:_.value_position||"center"},[this.selectField("value_position",this.getValuePositionOptions(v))],(e=>{e.detail.value.value_position!==(_.value_position||"center")&&(a(e.detail.value),setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
                </div>
              `:""}

          <div class="field-group" style="margin-bottom: 16px;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div style="flex: 1;">
                <div
                  class="field-title"
                  style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                >
                  ${(0,n.kg)("editor.spinbox.show_unit",v,"Show Unit")}
                </div>
                <div
                  class="field-description"
                  style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 0;"
                >
                  ${(0,n.kg)("editor.spinbox.show_unit_desc",v,"Display a unit label (e.g., °C, %)")}
                </div>
              </div>
              <ha-switch
                .checked=${null!==(u=_.show_unit)&&void 0!==u&&u}
                @change=${e=>{const t=e.target;a({show_unit:t.checked})}}
              ></ha-switch>
            </div>
          </div>

          ${_.show_unit?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,n.kg)("editor.spinbox.unit",v,"Unit"),(0,n.kg)("editor.spinbox.unit_desc",v,"Unit to display (e.g., °C, %, km)"),t,{unit:_.unit||""},[this.textField("unit")],(e=>a(e.detail.value)))}
                </div>
              `:""}
        </div>

        <!-- Button Configuration -->
        <div class="settings-section">
          <div class="section-title">
            ${(0,n.kg)("editor.spinbox.buttons.title",v,"Button Configuration")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.button_style",v,"Button Style"),(0,n.kg)("editor.spinbox.button_style_desc",v,"Visual style for buttons"),t,{button_style:_.button_style||"flat"},[this.selectField("button_style",this.getButtonStyles(v))],(e=>{e.detail.value.button_style!==(_.button_style||"flat")&&(a(e.detail.value),setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.button_shape",v,"Button Shape"),(0,n.kg)("editor.spinbox.button_shape_desc",v,"Shape of the buttons"),t,{button_shape:_.button_shape||"rounded"},[this.selectField("button_shape",this.getButtonShapeOptions(v))],(e=>{e.detail.value.button_shape!==(_.button_shape||"rounded")&&(a(e.detail.value),setTimeout((()=>this.triggerPreviewUpdate()),50))}))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.button_size",v,"Button Size"),(0,n.kg)("editor.spinbox.button_size_desc",v,"Size of the buttons in pixels (width and height)"),t,{button_size:null!==(h=_.button_size)&&void 0!==h?h:40},[this.numberField("button_size")],(e=>a(e.detail.value)))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.button_spacing",v,"Value Spacing"),(0,n.kg)("editor.spinbox.button_spacing_desc",v,"Space between buttons and value display in pixels"),t,{button_spacing:null!==(g=_.button_spacing)&&void 0!==g?g:12},[this.numberField("button_spacing")],(e=>a(e.detail.value)))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.button_gap",v,"Button Gap"),(0,n.kg)("editor.spinbox.button_gap_desc",v,"Space between increment and decrement buttons in pixels"),t,{button_gap:null!==(m=_.button_gap)&&void 0!==m?m:8},[this.numberField("button_gap")],(e=>a(e.detail.value)))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.increment_icon",v,"Increment Icon"),(0,n.kg)("editor.spinbox.increment_icon_desc",v,"Icon for the increment button (e.g., mdi:plus, mdi:chevron-up)"),t,{increment_icon:_.increment_icon||"mdi:plus"},[this.iconField("increment_icon")],(e=>a(e.detail.value)))}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,n.kg)("editor.spinbox.decrement_icon",v,"Decrement Icon"),(0,n.kg)("editor.spinbox.decrement_icon_desc",v,"Icon for the decrement button (e.g., mdi:minus, mdi:chevron-down)"),t,{decrement_icon:_.decrement_icon||"mdi:minus"},[this.iconField("decrement_icon")],(e=>a(e.detail.value)))}
          </div>

          <!-- Button Colors -->
          <div class="color-controls" style="margin-bottom: 16px;">
            <ultra-color-picker
              .label=${(0,n.kg)("editor.spinbox.button_background_color",v,"Button Background")}
              .value=${_.button_background_color||"var(--primary-color)"}
              .defaultValue=${"var(--primary-color)"}
              .hass=${t}
              @value-changed=${e=>a({button_background_color:e.detail.value})}
            ></ultra-color-picker>
          </div>

          <div class="color-controls">
            <ultra-color-picker
              .label=${(0,n.kg)("editor.spinbox.button_text_color",v,"Button Icon Color")}
              .value=${_.button_text_color||"white"}
              .defaultValue=${"white"}
              .hass=${t}
              @value-changed=${e=>a({button_text_color:e.detail.value})}
            ></ultra-color-picker>
          </div>
        </div>

        <!-- Value Display Styling -->
        ${_.show_value?o.qy`
              <div class="settings-section">
                <div class="section-title">
                  ${(0,n.kg)("editor.spinbox.value_style.title",v,"Value Display Styling")}
                </div>

                <div class="color-controls" style="margin-bottom: 16px;">
                  <ultra-color-picker
                    .label=${(0,n.kg)("editor.spinbox.value_color",v,"Value Color")}
                    .value=${_.value_color||"var(--primary-text-color)"}
                    .defaultValue=${"var(--primary-text-color)"}
                    .hass=${t}
                    @value-changed=${e=>a({value_color:e.detail.value})}
                  ></ultra-color-picker>
                </div>

                <div class="field-group">
                  ${this.renderFieldSection((0,n.kg)("editor.spinbox.value_font_size",v,"Value Font Size"),(0,n.kg)("editor.spinbox.value_font_size_desc",v,"Font size for the value display (in pixels)"),t,{value_font_size:null!==(f=_.value_font_size)&&void 0!==f?f:18},[this.numberField("value_font_size")],(e=>a(e.detail.value)))}
                </div>
              </div>
            `:""}

        <!-- Template Mode -->
        <div class="settings-section">
          <div class="section-title">
            ${(0,n.kg)("editor.spinbox.template.title",v,"Template Mode")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
              <div style="flex: 1;">
                <div
                  class="field-title"
                  style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                >
                  ${(0,n.kg)("editor.spinbox.template_mode",v,"Enable Template Mode")}
                </div>
                <div
                  class="field-description"
                  style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 0;"
                >
                  ${(0,n.kg)("editor.spinbox.template_mode_desc",v,"Use Jinja2 templates to dynamically compute the displayed value")}
                </div>
              </div>
              <ha-switch
                .checked=${_.template_mode||!1}
                @change=${e=>{const t=e.target;a({template_mode:t.checked})}}
              ></ha-switch>
            </div>
          </div>

          ${_.template_mode?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                  >
                    ${(0,n.kg)("editor.spinbox.template",v,"Value Template")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px;"
                  >
                    ${(0,n.kg)("editor.spinbox.template_desc",v,'Jinja2 template for value (e.g., {{ states("input_number.temperature") }})')}
                  </div>
                  <ha-form
                    .hass=${t}
                    .data=${{template:_.template||""}}
                    .schema=${[{name:"template",label:"",selector:{text:{multiline:!0}}}]}
                    .computeLabel=${e=>e.label||e.name}
                    .computeDescription=${e=>e.description||""}
                    @value-changed=${e=>{a(e.detail.value)}}
                  ></ha-form>
                </div>

                <div class="template-examples">
                  <div
                    class="field-title"
                    style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                  >
                    ${(0,n.kg)("editor.spinbox.template_examples",v,"Common Examples:")}
                  </div>
                  <div class="example-item" style="margin-bottom: 12px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 8px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 11px; color: #d4d4d4; margin-bottom: 4px;"
                    >
                      {{ states('input_number.temperature') | float }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 11px; color: var(--secondary-text-color);"
                    >
                      Read value from input_number entity
                    </div>
                  </div>
                  <div class="example-item">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 8px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 11px; color: #d4d4d4; margin-bottom: 4px;"
                    >
                      {{ state_attr('climate.thermostat', 'temperature') }}
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 11px; color: var(--secondary-text-color);"
                    >
                      Read temperature from climate entity
                    </div>
                  </div>
                </div>
              `:o.qy`
                <div
                  style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                >
                  ${(0,n.kg)("editor.spinbox.template_disabled",v,"Enable template mode to use dynamic values")}
                </div>
              `}
        </div>
      </div>
    `}renderActionsTab(e,t,i,o){const n=e;return r.A.render(n,t,(e=>o(e)))}renderLogicTab(e,t,i,o){return s.X.render(e,t,(e=>o(e)))}renderPreview(e,t,i,n){var a,r,s,c,p,u,h;const g=e;let m=null!==(a=g.value)&&void 0!==a?a:50,f="";if(g.template_mode&&g.template){if(!this._templateService&&t&&(this._templateService=new d.I(t)),t){t.__uvc_template_strings||(t.__uvc_template_strings={});const e=this._hashString(g.template),i=`spinbox_value_${g.id}_${e}`;this._templateService&&!this._templateService.hasTemplateSubscription(i)&&this._templateService.subscribeToTemplate(g.template,i,(()=>{"undefined"!=typeof window&&(window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update")),window._ultraCardUpdateTimer=null}),50)))}));const o=null===(r=t.__uvc_template_strings)||void 0===r?void 0:r[i];if(void 0!==o){const e=parseFloat(String(o));isNaN(e)||(m=e)}}}else if(g.entity&&t){const e=t.states[g.entity];if(f=g.entity.split(".")[0],e)if("climate"===f)if(void 0!==(null===(s=e.attributes)||void 0===s?void 0:s.temperature)){const t=parseFloat(String(e.attributes.temperature));isNaN(t)||(m=t)}else{const t=parseFloat(e.state);isNaN(t)||(m=t)}else{const t=parseFloat(e.state);isNaN(t)||(m=t)}}m=Math.max(g.min_value,Math.min(g.max_value,m));const _=g,v=g.design||{},b=v.button_background_color||g.button_background_color||"var(--primary-color)",y=v.button_text_color||g.button_text_color||"white",x=g.button_style||"flat",k=null!==(c=g.button_size)&&void 0!==c?c:40,w=g.button_shape||"rounded",S=null!==(p=g.button_spacing)&&void 0!==p?p:12,O=null!==(u=g.button_gap)&&void 0!==u?u:8;let A="8px";"circle"===w?A="50%":"square"===w&&(A="0");const C={flat:"box-shadow: none;",glossy:`background: linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0)), ${b}; border: none;`,embossed:"border: 1px solid rgba(0,0,0,0.15); box-shadow: inset 0 2px 2px rgba(255,255,255,0.2), inset 0 -2px 2px rgba(0,0,0,0.15);",inset:"box-shadow: inset 0 2px 6px rgba(0,0,0,0.35);","gradient-overlay":`background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(0,0,0,0.15)), ${b};`,"neon-glow":`box-shadow: 0 0 10px ${b}, 0 0 20px ${b};`,outline:`background: transparent; border: 2px solid ${b}; color: ${b};`,glass:"backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.25);",metallic:"background: linear-gradient(90deg, #d7d7d7, #f0f0f0 50%, #d7d7d7); color: #333; border: 1px solid #bbb;"},$=`\n      background: ${b};\n      color: ${y};\n      padding: 0;\n      border-radius: ${A};\n      cursor: pointer;\n      transition: all 0.2s ease;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      min-width: ${k}px;\n      min-height: ${k}px;\n      width: ${k}px;\n      height: ${k}px;\n      border: none;\n     ${C[x]||C.flat}`,T=v.value_color||g.value_color||"var(--primary-text-color)",z=v.value_font_size||g.value_font_size||18,P=`\n      color: ${T};\n      font-size: ${z}px;\n      font-weight: 600;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      min-width: 60px;\n    `,E={width:"100%",height:"auto",maxWidth:"none",maxHeight:"none",minWidth:"auto",minHeight:"auto",padding:v.padding_top||v.padding_bottom||v.padding_left||v.padding_right?`${v.padding_top||"0px"} ${v.padding_right||"0px"} ${v.padding_bottom||"0px"} ${v.padding_left||"0px"}`:"0",margin:v.margin_top||v.margin_bottom||v.margin_left||v.margin_right?`${v.margin_top||"8px"} ${v.margin_right||"0px"} ${v.margin_bottom||"8px"} ${v.margin_left||"0px"}`:"8px 0",background:v.background_color||"transparent",backgroundImage:this.getBackgroundImageCSS(Object.assign(Object.assign({},_),v),t),"background-size":"cover","background-position":"center","background-repeat":"no-repeat","border-radius":v.border_radius||"8px",border:v.border_style&&"none"!==v.border_style?`${v.border_width||"1px"} ${v.border_style} ${v.border_color||"var(--divider-color)"}`:"none","box-shadow":v.box_shadow_h||v.box_shadow_v||v.box_shadow_blur||v.box_shadow_spread?`${v.box_shadow_h||"0px"} ${v.box_shadow_v||"0px"} ${v.box_shadow_blur||"0px"} ${v.box_shadow_spread||"0px"} ${v.box_shadow_color||"rgba(0,0,0,.2)"}`:"none","box-sizing":"border-box"},I=null===(h=g.design)||void 0===h?void 0:h.hover_effect,j=l.k.getHoverEffectClass(I),M="vertical"===g.layout,D=!1!==g.show_value,B=g.value_position||"center",R=g.show_unit&&g.unit,U=D?o.qy`
          <div class="spinbox-value" style="${P}">
            ${m.toFixed(this.getDecimalPlaces(g.step))}${R?o.qy`<span style="margin-left: 4px; font-size: ${.8*z}px;"
                  >${g.unit}</span
                >`:""}
          </div>
        `:"",H=o.qy`
      <button
        class="spinbox-button decrement ${j}"
        style="${$}"
        @click=${e=>{if(e.stopPropagation(),e.preventDefault(),g.entity&&t){const e=Math.max(g.min_value,m-g.step);this.callEntityService(g.entity,e,t,f)}}}
        ?disabled=${m<=g.min_value}
      >
        <ha-icon icon="${g.decrement_icon||"mdi:minus"}"></ha-icon>
      </button>
    `,J=o.qy`
      <button
        class="spinbox-button increment ${j}"
        style="${$}"
        @click=${e=>{if(e.stopPropagation(),e.preventDefault(),g.entity&&t){const e=Math.min(g.max_value,m+g.step);this.callEntityService(g.entity,e,t,f)}}}
        ?disabled=${m>=g.max_value}
      >
        <ha-icon icon="${g.increment_icon||"mdi:plus"}"></ha-icon>
      </button>
    `,Q=O>=0,N=S>=0,L=Q?`display: flex; gap: ${O}px; ${M?"flex-direction: column;":"flex-direction: row;"}`:"display: flex; "+(M?"flex-direction: column;":"flex-direction: row;");return o.qy`
      <style>
        .spinbox-button {
          flex-shrink: 0;
        }
        .spinbox-button:disabled {
          opacity: 0.4;
          cursor: not-allowed;
        }
        .spinbox-button:not(:disabled):hover {
          opacity: 0.8;
          transform: scale(1.05);
        }
      </style>
      <div class="spinbox-module-container" style=${this.styleObjectToCss(E)}>
        <div
          class="spinbox-container"
          style="display: flex; align-items: center; justify-content: center;"
        >
          ${(()=>{const e=o.qy`
        <div style="${L}">
          ${M?o.qy` <div style="${Q?"":`margin-bottom: ${O}px;`}">
                  ${J}
                </div>
                <div>${H}</div>`:o.qy` <div style="${Q?"":`margin-right: ${O}px;`}">
                  ${H}
                </div>
                <div>${J}</div>`}
        </div>
      `,t=N?`gap: ${S}px;`:"";switch(B){case"top":return o.qy`
            <div
              style="display: flex; flex-direction: column; align-items: center; ${t}"
            >
              <div style="${N?"":`margin-bottom: ${S}px;`}">
                ${U}
              </div>
              ${e}
            </div>
          `;case"bottom":return o.qy`
            <div
              style="display: flex; flex-direction: column; align-items: center; ${t}"
            >
              <div style="${N?"":`margin-bottom: ${S}px;`}">
                ${e}
              </div>
              ${U}
            </div>
          `;case"left":return o.qy`
            <div style="display: flex; flex-direction: row; align-items: center; ${t}">
              <div style="${N?"":`margin-right: ${S}px;`}">
                ${U}
              </div>
              ${e}
            </div>
          `;case"right":return o.qy`
            <div style="display: flex; flex-direction: row; align-items: center; ${t}">
              <div style="${N?"":`margin-right: ${S}px;`}">
                ${e}
              </div>
              ${U}
            </div>
          `;default:return M?o.qy`
              <div
                style="display: flex; flex-direction: column; align-items: center; ${t}"
              >
                <div style="${N?"":`margin-bottom: ${S}px;`}">
                  ${J}
                </div>
                <div style="${N?"":`margin-bottom: ${S}px;`}">
                  ${U}
                </div>
                ${H}
              </div>
            `:o.qy`
              <div style="display: flex; flex-direction: row; align-items: center; ${t}">
                <div style="${N?"":`margin-right: ${S}px;`}">
                  ${H}
                </div>
                <div style="${N?"":`margin-right: ${S}px;`}">
                  ${U}
                </div>
                ${J}
              </div>
            `}})()}
        </div>
      </div>
    `}async callEntityService(e,t,i,o){var n,a,r,s,l;const d=o||e.split(".")[0],c=i.states[e];console.log(`[Spinbox] Calling service for ${e} with value ${t}`);let p="",u={};try{switch(d){case"input_number":case"number":p=`${d}.set_value`,u={entity_id:e,value:t};break;case"climate":p="climate.set_temperature";const i=null==c?void 0:c.state,o=void 0!==(null===(n=null==c?void 0:c.attributes)||void 0===n?void 0:n.target_temp_high),h=void 0!==(null===(a=null==c?void 0:c.attributes)||void 0===a?void 0:a.target_temp_low);if(u={entity_id:e},"heat_cool"===i&&(o||h)){const e=null===(r=null==c?void 0:c.attributes)||void 0===r?void 0:r.temperature,i=null===(s=null==c?void 0:c.attributes)||void 0===s?void 0:s.target_temp_high,o=null===(l=null==c?void 0:c.attributes)||void 0===l?void 0:l.target_temp_low;if(void 0!==e&&void 0!==i&&void 0!==o){Math.abs(t-i)<Math.abs(t-o)?(u.target_temp_high=t,u.target_temp_low=o):(u.target_temp_low=t,u.target_temp_high=i)}else u.target_temp_high=t+2,u.target_temp_low=t-2;console.log("[Spinbox] Climate heat_cool mode - serviceData:",u)}else u.temperature=t,console.log(`[Spinbox] Climate single temp mode - temperature: ${t}`);break;default:return void console.warn(`[Spinbox] Unsupported entity domain: ${d}`)}console.log(`[Spinbox] Calling service ${p} with data:`,u),await i.callService(p.split(".")[0],p.split(".")[1],u),console.log("[Spinbox] Service call successful")}catch(t){console.error(`[Spinbox] Failed to call service for ${e}:`,t),console.error("[Spinbox] Service data was:",u)}}getDecimalPlaces(e){const t=e.toString();return t.includes(".")?t.split(".")[1].length:0}styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/([A-Z])/g,"-$1").toLowerCase()}: ${t}`)).join("; ")}getBackgroundImageCSS(e,t){var i,o;const n=e.background_image_type,a=e.background_image,r=e.background_image_entity;if(!n||"none"===n)return"none";switch(n){case"upload":if(a)return`url("${(0,c.V)(t,a)}")`;break;case"url":if(a)return`url("${a}")`;break;case"entity":if(r&&t){const e=t.states[r];if(e){const n=(null===(i=e.attributes)||void 0===i?void 0:i.entity_picture)||(null===(o=e.attributes)||void 0===o?void 0:o.image)||("string"==typeof e.state?e.state:"");if(n&&"unknown"!==n&&"unavailable"!==n)return`url("${(0,c.V)(t,n)}")`}}}return"none"}_hashString(e){let t=0;for(let i=0;i<e.length;i+=1)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}}},6682:(e,t,i)=>{i.d(t,{O:()=>r});class o{constructor(){this.cache=new Map,this.corsProxies=["https://api.allorigins.win/raw?url=","https://corsproxy.io/?","https://cors-anywhere.herokuapp.com/"]}async fetchPresets(e={}){const t=`presets_${JSON.stringify(e)}`,i=this.cache.get(t);if(i&&Date.now()-i.timestamp<o.CACHE_DURATION)return i.data;const n=this._getFromLocalStorage(t);if(n)return this.cache.set(t,n),n.data;try{const i=new URLSearchParams;e.page&&i.set("page",e.page.toString()),e.per_page&&i.set("per_page",e.per_page.toString()),e.category&&i.set("category",e.category),e.search&&i.set("search",e.search),e.sort&&i.set("sort",e.sort),i.set("_embed","true");const n=`${o.API_BASE}/presets_dir_ltg?${i.toString()}`,a=await this._fetchWithCorsResilience(n),r={presets:Array.isArray(a)?a.map((e=>{var t,i,o,n,a,r,s,l,d,c,p,u,h,g,m,f;const _=e.preset_meta||{},v=_.tags?_.tags.split(",").map((e=>e.trim())):[],b=_.integrations?String(_.integrations).split(",").map((e=>e.trim())).filter(Boolean):[],y=this._stripHtml(_.description||(null===(t=e.excerpt)||void 0===t?void 0:t.rendered)||(null===(i=e.content)||void 0===i?void 0:i.rendered)||"No description available");return{id:e.id,name:(null===(o=e.title)||void 0===o?void 0:o.rendered)||"Untitled Preset",description:this._truncateDescription(y,15),description_full:y,shortcode:_.shortcode||'{"rows":[]}',category:_.category||"badges",tags:v,integrations:b,author:(null===(r=null===(a=null===(n=e._embedded)||void 0===n?void 0:n.author)||void 0===a?void 0:a[0])||void 0===r?void 0:r.display_name)||(null===(d=null===(l=null===(s=e._embedded)||void 0===s?void 0:s.author)||void 0===l?void 0:l[0])||void 0===d?void 0:d.name)||(null===(u=null===(p=null===(c=e._embedded)||void 0===c?void 0:c.author)||void 0===p?void 0:p[0])||void 0===u?void 0:u.slug)||"Community",author_avatar:(null===(f=null===(m=null===(g=null===(h=e._embedded)||void 0===h?void 0:h.author)||void 0===g?void 0:g[0])||void 0===m?void 0:m.avatar_urls)||void 0===f?void 0:f[48])||"",downloads:parseInt(_.downloads)||0,rating:parseFloat(_.rating)||0,reviews_count:parseInt(_.rating_count)||0,rating_count:parseInt(_.rating_count)||0,created:e.date,updated:e.modified,is_featured:!1,difficulty:_.difficulty||"beginner",compatibility:_.compatibility?_.compatibility.split(","):[],featured_image:_.featured_image||e.featured_media_src_url||"",gallery:Array.isArray(_.gallery)?_.gallery:[],preset_url:e.link||`https://ultracard.io/presets/${e.slug}/`}})):[],total:a.length||0,pages:1,current_page:1};if(!Array.isArray(a))throw new Error("Invalid response format: expected array of posts");const s={data:r,timestamp:Date.now()};return this.cache.set(t,s),this._saveToLocalStorage(t,s),r}catch(e){console.error("Failed to fetch Directories Pro presets:",e);const i=this._getFromLocalStorage(t,!0);if(i)return console.warn("Using stale cached presets due to fetch error"),i.data;const o=this._getFallbackCache();return o?(console.warn("Using fallback cached presets due to fetch error"),o):{presets:[],total:0,pages:0,current_page:1}}}async fetchPreset(e){var t,i,n,a,r,s,l,d,c,p,u,h,g,m,f,_;const v=`preset_${e}`,b=this.cache.get(v);if(b&&Date.now()-b.timestamp<o.CACHE_DURATION)return b.data;try{const b=`${o.API_BASE}/presets_dir_ltg/${e}?_embed=true`,y=await this._fetchWithCorsResilience(b),x=y.preset_meta||{},k=x.tags?x.tags.split(",").map((e=>e.trim())):[],w=x.integrations?String(x.integrations).split(",").map((e=>e.trim())).filter(Boolean):[],S=this._stripHtml((null===(t=y.excerpt)||void 0===t?void 0:t.rendered)||(null===(i=y.content)||void 0===i?void 0:i.rendered)||"No description available"),O={id:y.id,name:(null===(n=y.title)||void 0===n?void 0:n.rendered)||"Untitled Preset",description:this._truncateDescription(S,15),description_full:S,shortcode:x.shortcode||'{"rows":[]}',category:x.category||"badges",tags:k,integrations:w,author:(null===(s=null===(r=null===(a=y._embedded)||void 0===a?void 0:a.author)||void 0===r?void 0:r[0])||void 0===s?void 0:s.display_name)||(null===(c=null===(d=null===(l=y._embedded)||void 0===l?void 0:l.author)||void 0===d?void 0:d[0])||void 0===c?void 0:c.name)||(null===(h=null===(u=null===(p=y._embedded)||void 0===p?void 0:p.author)||void 0===u?void 0:u[0])||void 0===h?void 0:h.slug)||"Community",author_avatar:(null===(_=null===(f=null===(m=null===(g=y._embedded)||void 0===g?void 0:g.author)||void 0===m?void 0:m[0])||void 0===f?void 0:f.avatar_urls)||void 0===_?void 0:_[48])||"",downloads:parseInt(x.downloads)||0,rating:parseFloat(x.rating)||0,reviews_count:parseInt(x.rating_count)||0,rating_count:parseInt(x.rating_count)||0,created:y.date,updated:y.modified,is_featured:!1,difficulty:x.difficulty||"beginner",compatibility:x.compatibility?x.compatibility.split(","):[],featured_image:x.featured_image||y.featured_media_src_url||"",gallery:Array.isArray(x.gallery)?x.gallery:[],preset_url:y.link||`https://ultracard.io/presets/${y.slug}/`},A={data:O,timestamp:Date.now()};return this.cache.set(v,A),O}catch(t){return console.error(`Failed to fetch preset ${e}:`,t),null}}async trackDownload(e){}async getCategories(){const e="categories",t=this.cache.get(e);if(t&&Date.now()-t.timestamp<o.CACHE_DURATION)return t.data;try{const t=await fetch(`${o.API_BASE}/categories`,{signal:AbortSignal.timeout(5e3)});if(t.ok){const i=await t.json(),o={data:i,timestamp:Date.now()};return this.cache.set(e,o),i}}catch(e){console.warn("Failed to fetch categories:",e)}return["badges","layouts","widgets","dashboards","themes"]}clearCache(){this.cache.clear(),Object.keys(localStorage).forEach((e=>{e.startsWith("wp-presets-cache-")&&localStorage.removeItem(e)}))}async testConnection(){const e=`${o.API_BASE}/presets_dir_ltg?per_page=1`,t=[];try{await fetch(e,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(5e3)}),t.push({method:"Direct Fetch",success:!0})}catch(e){t.push({method:"Direct Fetch",success:!1,error:e instanceof Error?e.message:"Unknown error"})}for(const i of this.corsProxies)try{const o=`${i}${encodeURIComponent(e)}`;await fetch(o,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(8e3)}),t.push({method:`Proxy: ${i}`,success:!0})}catch(e){t.push({method:`Proxy: ${i}`,success:!1,error:e instanceof Error?e.message:"Unknown error"})}return t}getCacheStats(){return{memoryEntries:this.cache.size,localStorageEntries:Object.keys(localStorage).filter((e=>e.startsWith("wp-presets-cache-"))).length}}_saveToLocalStorage(e,t){try{const i=`wp-presets-cache-${e}`;localStorage.setItem(i,JSON.stringify(t))}catch(e){console.warn("Failed to save to localStorage:",e)}}_getFromLocalStorage(e,t=!1){try{const i=`wp-presets-cache-${e}`,n=localStorage.getItem(i);if(!n)return null;const a=JSON.parse(n);return Date.now()-a.timestamp>(t?o.EXTENDED_CACHE_DURATION:o.CACHE_DURATION)?(t||localStorage.removeItem(i),t?a:null):a}catch(e){return console.warn("Failed to read from localStorage:",e),null}}_stripHtml(e){if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").trim().replace(/\s+/g," ")}_truncateDescription(e,t=15){if(!e)return"";const i=e.split(" ");return i.length<=t?e:i.slice(0,t).join(" ")+"..."}async _fetchWithCorsResilience(e){try{const t=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},signal:AbortSignal.timeout(8e3)});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return await t.json()}catch(t){for(const t of this.corsProxies)try{const i=`${t}${encodeURIComponent(e)}`,o=await fetch(i,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(1e4)});if(!o.ok)throw new Error(`Proxy HTTP ${o.status}: ${o.statusText}`);const n=await o.json();return console.log(`Successfully fetched via proxy: ${t}`),n}catch(e){continue}try{return await this._fetchViaJsonp(e)}catch(e){console.warn("JSONP fetch failed:",e)}throw new Error("All CORS-resilient fetch methods failed")}}async _fetchViaJsonp(e){return new Promise(((t,i)=>{const o=`ultracard_jsonp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=document.createElement("script"),a=setTimeout((()=>{r(),i(new Error("JSONP timeout"))}),15e3),r=()=>{n.parentNode&&n.parentNode.removeChild(n),delete window[o],clearTimeout(a)};window[o]=e=>{r(),t(e)},n.onerror=()=>{r(),i(new Error("JSONP script error"))};const s=e.includes("?")?"&":"?";n.src=`${e}${s}callback=${o}`,document.head.appendChild(n)}))}_getFallbackCache(){try{const e=Object.keys(localStorage).filter((e=>e.startsWith("wp-presets-cache-presets_"))).map((e=>{try{const t=localStorage.getItem(e);if(!t)return null;const i=JSON.parse(t);return{key:e,timestamp:i.timestamp,data:i.data}}catch(e){return null}})).filter(Boolean).sort(((e,t)=>((null==t?void 0:t.timestamp)||0)-((null==e?void 0:e.timestamp)||0)));if(e.length>0&&e[0])return e[0].data}catch(e){console.warn("Failed to get fallback cache:",e)}return null}}o.API_BASE="https://ultracard.io/wp-json/wp/v2",o.CACHE_KEY="ultra-card-directories-pro-presets",o.CACHE_TIMESTAMP_KEY="ultra-card-directories-pro-presets-timestamp",o.CACHE_DURATION=3e5,o.EXTENDED_CACHE_DURATION=864e5;const n=new o;class a{constructor(){this._userPresets=[],this._wordpressPresets=[],this._wordpressLoading=!1,this._wordpressError=null,this._listeners=new Set,this._statusListeners=new Set,this._loadFromStorage(),this._setupStorageListener(),this._loadWordPressPresets()}getAllPresets(){return[...this._getBuiltInPresets(),...this._userPresets,...this._wordpressPresets]}getPresetsByCategory(e){const t=this.getAllPresets();return"all"===e?t:t.filter((t=>t.category===e))}getPreset(e){return this.getAllPresets().find((t=>t.id===e))}addUserPreset(e){const t=Object.assign(Object.assign({},e),{id:this._generateId(),metadata:{created:(new Date).toISOString(),updated:(new Date).toISOString()}});return this._userPresets.push(t),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),t}removeUserPreset(e){const t=this._userPresets.findIndex((t=>t.id===e));return-1!==t&&(this._userPresets.splice(t,1),this._saveToStorage(),this._notifyListeners(),this._broadcastChange(),!0)}subscribe(e){return this._listeners.add(e),()=>this._listeners.delete(e)}subscribeToStatus(e){return this._statusListeners.add(e),()=>this._statusListeners.delete(e)}getWordPressStatus(){return{loading:this._wordpressLoading,error:this._wordpressError}}async refreshWordPressPresets(){n.clearCache(),await this._loadWordPressPresets(!0)}getWordPressPresetsCount(){return this._wordpressPresets.length}async trackPresetDownload(e){if(e.startsWith("wp-")){const t=parseInt(e.replace("wp-",""));isNaN(t)||await n.trackDownload(t)}}_getBuiltInPresets(){return[]}_generateId(){return`preset-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}_loadFromStorage(){try{const e=localStorage.getItem(a.STORAGE_KEY);if(e){const t=JSON.parse(e);Array.isArray(t)&&(this._userPresets=t.filter(this._isValidPreset.bind(this)))}}catch(e){console.warn("Failed to load user presets from storage:",e),this._userPresets=[]}}_saveToStorage(){try{localStorage.setItem(a.STORAGE_KEY,JSON.stringify(this._userPresets))}catch(e){console.warn("Failed to save user presets to storage:",e)}}_setupStorageListener(){window.addEventListener("storage",(e=>{e.key===a.STORAGE_KEY&&(this._loadFromStorage(),this._notifyListeners())})),window.addEventListener(a.SYNC_EVENT,(()=>{this._loadFromStorage(),this._notifyListeners()}))}_notifyListeners(){const e=this.getAllPresets();this._listeners.forEach((t=>t(e)))}_notifyStatusListeners(){const e=this.getWordPressStatus();this._statusListeners.forEach((t=>t(e)))}async _loadWordPressPresets(e=!1){if(!this._wordpressLoading||e){this._wordpressLoading=!0,this._wordpressError=null,this._notifyStatusListeners();try{const e=await n.fetchPresets({per_page:50,sort:"popular"});this._wordpressPresets=e.presets.map(this._convertWordPressPreset.bind(this)),this._wordpressError=null,this._notifyListeners()}catch(e){console.error("Failed to load WordPress presets from Directories Pro:",e);let t="Unable to load presets from ultracard.io";e instanceof Error&&(t=e.message.includes("CORS")?"Network access blocked. Using cached presets if available.":e.message.includes("timeout")?"Connection timeout. Please check your internet connection.":e.message.includes("Failed to fetch")?"Network error. Using cached presets if available.":`Connection error: ${e.message}`),this._wordpressError=t,this._wordpressPresets.length>0&&(console.warn("Using previously loaded presets due to network error"),this._wordpressError=`${t} (Using cached presets)`)}finally{this._wordpressLoading=!1,this._notifyStatusListeners()}}}_convertWordPressPreset(e){try{let t;try{if(t=JSON.parse(e.shortcode),!t.rows||!Array.isArray(t.rows)||0===t.rows.length)throw console.warn(`Preset ${e.id} has empty rows array, skipping...`),new Error("Layout has no rows");if(!t.rows.some((e=>e.columns&&e.columns.some((e=>e.modules&&e.modules.length>0)))))throw console.warn(`Preset ${e.id} has no modules, skipping...`),new Error("Layout has no modules")}catch(i){try{const i=e.shortcode.match(/\[ultra_card\]([\s\S]*?)\[\/ultra_card\]/);if(!i)throw new Error("No shortcode format found");{const e=i[1].trim(),o=atob(e),n=JSON.parse(o);if("ultra-card-row"===n.type&&n.data)t={rows:[n.data]};else if(n.data&&n.data.rows)t=n.data;else{if(!n.rows)throw new Error("No valid layout found in shortcode");t=n}}}catch(i){t={rows:[{id:`demo-row-${e.id}`,columns:[{id:`demo-col-${e.id}`,modules:[{id:`demo-horizontal-${e.id}`,type:"horizontal",alignment:"space-between",vertical_alignment:"center",gap:.7,wrap:!1,modules:[{id:`demo-avatar-${e.id}`,type:"image",image_type:"url",height:"40px",width:"40px",border_radius:"50%",object_fit:"cover",image_url:"https://cdn-icons-png.freepik.com/512/3177/3177440.png"},{id:`demo-info-${e.id}`,type:"icon",icons:[{id:`demo-icon-${e.id}`,entity:"person.demo_user",icon_inactive:"mdi:account",icon_active:"mdi:account",show_name:!0,show_state:!0,icon_size:26,text_size:14}]}]}]}],column_layout:"1-col",background_color:"#333333",border_radius:60,height:"50px",width:"140px",padding:{left:"4px",right:"16px"}}]}}}const i=this._mapWordPressCategory(e.category),o=e.author&&(e.author.toLowerCase().includes("wayne@wjddesigns.com")||e.author.toLowerCase().includes("wjddesigns")),n=e.tags||[],a=o?["standard"]:["community"],r={id:`wp-${e.id}`,name:e.name,description:e.description||"No description provided",category:i,icon:this._getPresetIcon(e.category,e.tags),author:e.author||"Community",version:"1.0.0",tags:[...n,...a],integrations:e.integrations||[],thumbnail:e.featured_image,layout:t,metadata:{created:e.created,updated:e.updated||e.created,downloads:e.downloads,rating:e.rating}};return r.preset_url=e.preset_url,r.description_full=e.description_full,r.gallery=e.gallery||[],r}catch(t){return console.error(`Error converting WordPress preset ${e.id}:`,t),{id:`wp-error-${e.id}`,name:e.name||"Error Preset",description:"This preset could not be loaded properly",category:"custom",icon:"mdi:alert-circle",author:e.author||"Community",version:"1.0.0",tags:["error","community"],layout:{rows:[{id:`error-row-${e.id}`,columns:[{id:`error-col-${e.id}`,modules:[{id:`error-text-${e.id}`,type:"text",text:"Preset Loading Error",font_size:14,alignment:"center",color:"var(--error-color)"}]}],column_layout:"1-col"}]},metadata:{created:e.created||(new Date).toISOString(),updated:e.updated||(new Date).toISOString()}}}}_mapWordPressCategory(e){return{badges:"badges",layouts:"layouts",widgets:"widgets",custom:"badges",badge:"badges",layout:"layouts",widget:"widgets",dashboard:"layouts",dashboards:"layouts",theme:"custom",themes:"custom"}[e.toLowerCase().trim()]||"badges"}_getPresetIcon(e,t){return t.includes("person")||t.includes("user")?"mdi:account-circle":t.includes("weather")?"mdi:weather-partly-cloudy":t.includes("energy")?"mdi:lightning-bolt":t.includes("climate")?"mdi:thermostat":t.includes("security")?"mdi:shield-home":t.includes("lights")||t.includes("lighting")?"mdi:lightbulb":t.includes("vehicle")||t.includes("car")?"mdi:car":t.includes("location")?"mdi:map-marker":{badge:"mdi:card-account-details",badges:"mdi:card-account-details",layout:"mdi:view-column",layouts:"mdi:view-column",widget:"mdi:widgets",widgets:"mdi:widgets",dashboard:"mdi:view-dashboard",dashboards:"mdi:view-dashboard"}[e.toLowerCase().trim()]||"mdi:card"}_broadcastChange(){window.dispatchEvent(new CustomEvent(a.SYNC_EVENT))}_isValidPreset(e){return e&&"string"==typeof e.id&&"string"==typeof e.name&&"string"==typeof e.description&&"string"==typeof e.category&&"string"==typeof e.icon&&e.layout&&Array.isArray(e.layout.rows)}}a.STORAGE_KEY="ultra-card-presets",a.SYNC_EVENT="ultra-card-presets-changed";const r=new a},6693:(e,t,i)=>{var o,n=i(5183),a=i(4276),r=i(1338),s=(i(6768),i(7593)),l=i(866),d=i(1986),c=i(7987),p=i(2381),u=i(456),h=i(2314),g=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let m=o=class extends n.WF{constructor(){super(...arguments),this.designProperties={},this._expandedSections=new Set,this._marginLocked=!1,this._paddingLocked=!1,this._clipboardProperties=null}connectedCallback(){super.connectedCallback(),this._marginLocked=!1,this._paddingLocked=!1,this._loadClipboardFromStorage(),this._storageEventListener=this._handleStorageEvent.bind(this),window.addEventListener("storage",this._storageEventListener)}disconnectedCallback(){super.disconnectedCallback(),this._storageEventListener&&window.removeEventListener("storage",this._storageEventListener)}_handleStorageEvent(e){e.key===o.CLIPBOARD_KEY&&this._loadClipboardFromStorage()}_loadClipboardFromStorage(){try{const e=localStorage.getItem(o.CLIPBOARD_KEY);if(e){const t=JSON.parse(e);t&&"object"==typeof t&&(this._clipboardProperties=t,this.requestUpdate())}}catch(e){console.warn("Failed to load design clipboard from localStorage:",e),this._clipboardProperties=null}}_saveClipboardToStorage(e){try{localStorage.setItem(o.CLIPBOARD_KEY,JSON.stringify(e))}catch(e){console.warn("Failed to save design clipboard to localStorage:",e)}}_clearClipboardFromStorage(){try{localStorage.removeItem(o.CLIPBOARD_KEY)}catch(e){console.warn("Failed to clear design clipboard from localStorage:",e)}}_toggleSection(e){this._expandedSections.has(e)?this._expandedSections.delete(e):(this._expandedSections.clear(),this._expandedSections.add(e)),this.requestUpdate()}_updateProperty(e,t){const i=""===t||null===t||"string"==typeof t&&""===t.trim()?void 0:t,o={[e]:i},n=Object.assign({},this.designProperties||{});if(void 0===i?delete n[e]:n[e]=i,this.designProperties=n,this.requestUpdate(),"font_size"===e&&console.log("🔧 EditorGlobalDesignTab: Font size update",{property:e,originalValue:t,processedValue:i,updates:o,newDesignProperties:this.designProperties}),this.onUpdate)this.onUpdate(o);else{const e=new CustomEvent("design-changed",{detail:o,bubbles:!0,composed:!0});this.dispatchEvent(e)}}_updateSpacing(e,t,i){const o="margin"===e?Boolean(this._marginLocked):Boolean(this._paddingLocked);if(o&&"top"!==t)return;let n;n=o?{[`${e}_top`]:i,[`${e}_bottom`]:i,[`${e}_left`]:i,[`${e}_right`]:i}:{[`${e}_${t}`]:i},this.designProperties=Object.assign(Object.assign({},this.designProperties||{}),n);const a=Object.keys(n).some((e=>e.startsWith("margin_")||e.startsWith("padding_"))),r="margin"===e&&this._marginLocked||"padding"===e&&this._paddingLocked;if(a&&r?this.requestUpdate():setTimeout((()=>{this.requestUpdate()}),0),this.onUpdate)this.onUpdate(n);else{const e=new CustomEvent("design-changed",{detail:n,bubbles:!0,composed:!0});this.dispatchEvent(e)}}_createRobustInputHandler(e,t){return i=>{const o=i.target,n=o.value,a=o.selectionStart,r=o.selectionEnd;if(i.stopPropagation(),t(n),(e.includes("margin_")||e.includes("padding_"))&&(e.includes("margin_")&&this._marginLocked||e.includes("padding_")&&this._paddingLocked))requestAnimationFrame((()=>{o&&"number"==typeof a&&o.setSelectionRange(a,r||a)}));else{const e=()=>{o&&o.value!==n&&(o.value=n,"number"==typeof a&&o.setSelectionRange(a,r||a))};requestAnimationFrame(e),setTimeout(e,0),setTimeout(e,10)}}}_createProtectedKeydownHandler(e,t,i){return e=>{e.target,"ArrowUp"!==e.key&&"ArrowDown"!==e.key||this._handleNumericKeydown(e,t(),i)}}_handleNumericKeydown(e,t,i){if("ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;e.preventDefault();const o=t.match(/^(-?\d*\.?\d*)(.*)$/);if(!o)return;const n=o[1],a=o[2].trim()||"px";let r=parseFloat(n)||0,s=1;"rem"===a||"em"===a?s=.1:"%"===a?s=5:"px"===a&&(s=1),e.shiftKey?s*=10:e.altKey&&(s/=10),"ArrowUp"===e.key?r+=s:r-=s;let l=0;"rem"===a||"em"===a?l=e.altKey?3:1:"%"===a&&e.altKey&&(l=1),i(`${parseFloat(r.toFixed(l))}${a}`)}_toggleSpacingLock(e){if("margin"===e){const e=this._marginLocked;if(this._marginLocked=!this._marginLocked,!e&&!0===this._marginLocked){const e=this.designProperties.margin_top||"";this._updateProperty("margin_right",e),this._updateProperty("margin_bottom",e),this._updateProperty("margin_left",e)}}else{const e=this._paddingLocked;if(this._paddingLocked=!this._paddingLocked,!e&&!0===this._paddingLocked){const e=this.designProperties.padding_top||"";this._updateProperty("padding_right",e),this._updateProperty("padding_bottom",e),this._updateProperty("padding_left",e)}}this.requestUpdate()}_resetSection(e){const t={};switch(e){case"text":t.color=void 0,t.text_align=void 0,t.font_size=void 0,t.line_height=void 0,t.letter_spacing=void 0,t.font_family=void 0,t.font_weight=void 0,t.text_transform=void 0,t.font_style=void 0;break;case"background":t.background_color=void 0,t.background_image=void 0,t.background_image_type=void 0,t.background_image_entity=void 0,t.background_size=void 0,t.background_repeat=void 0,t.background_position=void 0,t.backdrop_filter=void 0;break;case"sizes":t.width=void 0,t.height=void 0,t.max_width=void 0,t.max_height=void 0,t.min_width=void 0,t.min_height=void 0;break;case"spacing":t.margin_top=void 0,t.margin_bottom=void 0,t.margin_left=void 0,t.margin_right=void 0,t.padding_top=void 0,t.padding_bottom=void 0,t.padding_left=void 0,t.padding_right=void 0;break;case"border":t.border_radius=void 0,t.border_style=void 0,t.border_width=void 0,t.border_color=void 0;break;case"position":t.position=void 0,t.top=void 0,t.bottom=void 0,t.left=void 0,t.right=void 0,t.z_index=void 0;break;case"text-shadow":t.text_shadow_h=void 0,t.text_shadow_v=void 0,t.text_shadow_blur=void 0,t.text_shadow_color=void 0;break;case"box-shadow":t.box_shadow_h=void 0,t.box_shadow_v=void 0,t.box_shadow_blur=void 0,t.box_shadow_spread=void 0,t.box_shadow_color=void 0;break;case"overflow":t.overflow=void 0,t.clip_path=void 0;break;case"animations":t.animation_type=void 0,t.animation_entity=void 0,t.animation_trigger_type=void 0,t.animation_attribute=void 0,t.animation_state=void 0,t.intro_animation=void 0,t.outro_animation=void 0,t.animation_duration=void 0,t.animation_delay=void 0,t.animation_timing=void 0}if(this.designProperties=Object.assign(Object.assign({},this.designProperties||{}),t),this.requestUpdate(),this.onUpdate)try{this.onUpdate(t)}catch(t){console.error(`🔄 GlobalDesignTab: Callback error for ${e}:`,t)}else{const e=new CustomEvent("design-changed",{detail:t,bubbles:!0,composed:!0});this.dispatchEvent(e)}this.requestUpdate(),setTimeout((()=>{this.requestUpdate()}),50)}_copyDesign(){this._clipboardProperties=Object.assign({},this.designProperties),this._saveClipboardToStorage(this._clipboardProperties),Object.keys(this._clipboardProperties).filter((e=>this._clipboardProperties[e])).length,this.requestUpdate()}_pasteDesign(){this._clipboardProperties||this._loadClipboardFromStorage(),this._clipboardProperties&&(this.onUpdate?this.onUpdate(this._clipboardProperties):this.dispatchEvent(new CustomEvent("design-changed",{detail:this._clipboardProperties,bubbles:!0,composed:!0})))}_resetAllDesign(){const e={color:void 0,text_align:void 0,font_size:void 0,line_height:void 0,letter_spacing:void 0,font_family:void 0,font_weight:void 0,text_transform:void 0,font_style:void 0,background_color:void 0,background_image:void 0,background_image_type:void 0,background_image_entity:void 0,backdrop_filter:void 0,width:void 0,height:void 0,max_width:void 0,max_height:void 0,min_width:void 0,min_height:void 0,margin_top:void 0,margin_bottom:void 0,margin_left:void 0,margin_right:void 0,padding_top:void 0,padding_bottom:void 0,padding_left:void 0,padding_right:void 0,border_radius:void 0,border_style:void 0,border_width:void 0,border_color:void 0,position:void 0,top:void 0,bottom:void 0,left:void 0,right:void 0,z_index:void 0,text_shadow_h:void 0,text_shadow_v:void 0,text_shadow_blur:void 0,text_shadow_color:void 0,box_shadow_h:void 0,box_shadow_v:void 0,box_shadow_blur:void 0,box_shadow_spread:void 0,box_shadow_color:void 0,overflow:void 0,clip_path:void 0,animation_type:void 0,animation_entity:void 0,animation_trigger_type:void 0,animation_attribute:void 0,animation_state:void 0,intro_animation:void 0,outro_animation:void 0,animation_duration:void 0,animation_delay:void 0,animation_timing:void 0};if(this.onUpdate)try{this.onUpdate(e)}catch(e){console.error("🔄 GlobalDesignTab: Reset all callback error:",e)}else{const t=new CustomEvent("design-changed",{detail:e,bubbles:!0,composed:!0});this.dispatchEvent(t)}this.requestUpdate(),setTimeout((()=>{this.requestUpdate()}),50)}_clearClipboard(){this._clipboardProperties=null,this._clearClipboardFromStorage(),this.requestUpdate()}async _handleBackgroundImageUpload(e){var t;const i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i&&this.hass)try{const e={background_image:await(0,p.m)(this.hass,i),background_image_type:"upload"};this.onUpdate?this.onUpdate(e):this.dispatchEvent(new CustomEvent("design-changed",{detail:e,bubbles:!0,composed:!0}))}catch(e){console.error("Background image upload failed:",e),alert(`Upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}}_truncatePath(e){return e?e.length<=30?e:"..."+e.slice(-27):""}_getStateValueHint(e){if(!this.hass||!e)return"Enter the state value to trigger animation";const t=this.hass.states[e];return t?t.state&&"unknown"!==t.state&&"unavailable"!==t.state?`Current state: ${t.state}`:"Enter the state value to trigger animation":"Entity not found"}_getAttributeNameHint(e){if(!this.hass||!e)return"Enter the attribute name to monitor";const t=this.hass.states[e];if(!t||!t.attributes)return"Entity not found or has no attributes";const i=Object.keys(t.attributes).filter((e=>!e.startsWith("_")&&"object"!=typeof t.attributes[e])).slice(0,3);return i.length>0?`Available attributes: ${i.join(", ")}${Object.keys(t.attributes).length>3?", ...":""}`:"Enter the attribute name to monitor"}_getAttributeValueHint(e,t){if(!this.hass||!e)return"Enter the attribute value to trigger animation";if(!t)return"Select an attribute first";const i=this.hass.states[e];if(!i||!i.attributes)return"Entity not found or has no attributes";const o=i.attributes[t];if(null!=o){const e=String(o);return`Current value: ${e.length>30?`${e.slice(0,27)}...`:e}`}return"Attribute not found - check the attribute name"}_hasModifiedProperties(e){const t=this.designProperties,i=e=>null!=e&&""!==e;switch(e){case"text":return!!(i(t.color)||i(t.text_align)||i(t.font_size)||i(t.line_height)||i(t.letter_spacing)||i(t.font_family)||i(t.font_weight)||i(t.text_transform)||i(t.font_style));case"background":return!!(i(t.background_color)||i(t.background_image)||i(t.background_image_type)||i(t.background_image_entity)||i(t.background_size)||i(t.background_repeat)||i(t.background_position)||i(t.backdrop_filter));case"sizes":return!!(i(t.width)||i(t.height)||i(t.max_width)||i(t.max_height)||i(t.min_width)||i(t.min_height));case"spacing":return!!(i(t.margin_top)||i(t.margin_bottom)||i(t.margin_left)||i(t.margin_right)||i(t.padding_top)||i(t.padding_bottom)||i(t.padding_left)||i(t.padding_right));case"border":return!!(i(t.border_radius)||i(t.border_style)||i(t.border_width)||i(t.border_color));case"position":return!!(i(t.position)||i(t.top)||i(t.bottom)||i(t.left)||i(t.right)||i(t.z_index));case"text-shadow":return!!(i(t.text_shadow_h)||i(t.text_shadow_v)||i(t.text_shadow_blur)||i(t.text_shadow_color));case"box-shadow":return!!(i(t.box_shadow_h)||i(t.box_shadow_v)||i(t.box_shadow_blur)||i(t.box_shadow_spread)||i(t.box_shadow_color));case"overflow":return!(!i(t.overflow)&&!i(t.clip_path));case"animations":return!!(i(t.animation_type)&&"none"!==t.animation_type||i(t.animation_entity)||i(t.animation_trigger_type)||i(t.animation_attribute)||i(t.animation_state)||i(t.intro_animation)&&"none"!==t.intro_animation||i(t.outro_animation)&&"none"!==t.outro_animation||i(t.animation_duration)||i(t.animation_delay)||i(t.animation_timing)&&"ease"!==t.animation_timing);default:return!1}}_renderAccordion(e,t,i){const o=this._expandedSections.has(i),a=this._hasModifiedProperties(i);return n.qy`
      <div class="accordion-section">
        <div class="accordion-header ${o?"expanded":""}">
          <button class="accordion-toggle" @click=${()=>this._toggleSection(i)}>
            <span class="accordion-title">
              ${e} ${a?n.qy`<span class="edit-indicator"></span>`:""}
            </span>
          </button>
          <div class="accordion-actions">
            ${a?n.qy`
                  <button
                    class="reset-button"
                    @click=${e=>{e.stopPropagation(),this._resetSection(i)}}
                    title="Reset ${e} settings to default"
                  >
                    <ha-icon icon="mdi:refresh"></ha-icon>
                  </button>
                `:""}
            <button class="expand-button" @click=${()=>this._toggleSection(i)}>
              <ha-icon icon="mdi:chevron-${o?"up":"down"}"></ha-icon>
            </button>
          </div>
        </div>
        ${o?n.qy`<div class="accordion-content">${t}</div>`:""}
      </div>
    `}render(){var e,t,i,o,a,r,s,l,d,c,p,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I,j,M,D,B,R,U,H,J,Q,N,L,F,q,V,K,G,Z,Y,W,X,ee,te,ie,oe,ne,ae,re,se,le,de,ce,pe,ue,he,ge,me,fe,_e,ve,be,ye,xe;const ke=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return n.qy`
      <div class="global-design-tab">
        <!-- Design Actions Toolbar -->
        <div class="design-toolbar">
          <button
            class="toolbar-button copy-button"
            @click=${this._copyDesign}
            title="${(0,u.kg)("editor.design.copy_tooltip",ke,"Copy current design settings (works across all Ultra Cards)")}"
          >
            <ha-icon icon="mdi:content-copy"></ha-icon>
            <span>${(0,u.kg)("editor.design.copy",ke,"Copy")}</span>
          </button>

          <button
            class="toolbar-button paste-button ${this._clipboardProperties?"has-content":""}"
            @click=${this._pasteDesign}
            ?disabled=${!this._clipboardProperties}
            title="${this._clipboardProperties?(0,u.kg)("editor.design.paste_tooltip_has",ke,"Paste copied design settings (from cross-card clipboard)"):(0,u.kg)("editor.design.paste_tooltip_none",ke,"No design settings in cross-card clipboard")}"
          >
            <ha-icon icon="mdi:content-paste"></ha-icon>
            <span>${(0,u.kg)("editor.design.paste",ke,"Paste")}</span>
          </button>

          <button
            class="toolbar-button reset-all-button"
            @click=${this._resetAllDesign}
            title="${(0,u.kg)("editor.design.reset_all_tooltip",ke,"Reset all design settings to default")}"
          >
            <ha-icon icon="mdi:refresh"></ha-icon>
            <span>${(0,u.kg)("editor.design.reset_all",ke,"Reset All")}</span>
          </button>
        </div>

        ${this._renderAccordion((0,u.kg)("editor.design.text_section",ke,"Text"),n.qy`
            <div class="property-group">
              <ultra-color-picker
                .label=${(0,u.kg)("editor.design.text_color",ke,"Text Color")}
                .value=${this.designProperties.color||""}
                .defaultValue=${"var(--primary-text-color)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("color",e.detail.value)}
              ></ultra-color-picker>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.alignment",ke,"Alignment:")}:</label>
              <div class="button-group">
                ${[{value:"inherit",icon:"mdi:circle-off-outline"},{value:"left",icon:"mdi:format-align-left"},{value:"center",icon:"mdi:format-align-center"},{value:"right",icon:"mdi:format-align-right"},{value:"justify",icon:"mdi:format-align-justify"}].map((e=>n.qy`
                    <button
                      class="property-btn ${(this.designProperties.text_align||"inherit")===e.value?"active":""}"
                      @click=${()=>this._updateProperty("text_align","inherit"===e.value?void 0:e.value)}
                      title=${"inherit"===e.value?(0,u.kg)("editor.design.inherit_alignment",ke,"Inherit (no alignment)"):e.value}
                    >
                      <ha-icon icon="${e.icon}"></ha-icon>
                    </button>
                  `))}
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.font_size",ke,"Font Size:")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.font_size||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("font_size",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.font_size||"",(e=>this._updateProperty("font_size",e)))}
                  placeholder="${(0,u.kg)("editor.design.font_size_placeholder",ke,"16px (default), 1.2rem, max(1rem, 1.5vw)")}"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("font_size","")}
                  title="${(0,u.kg)("editor.design.reset_font_size",ke,"Reset font size to default")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.line_height",ke,"Line Height:")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.line_height||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("line_height",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  placeholder="${(0,u.kg)("editor.design.line_height_placeholder",ke,"0 (default), 28px, 1.7")}"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("line_height","")}
                  title="${(0,u.kg)("editor.design.reset_line_height",ke,"Reset line height to default")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.letter_spacing",ke,"Letter Spacing:")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.letter_spacing||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("letter_spacing",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  placeholder="${(0,u.kg)("editor.design.letter_spacing_placeholder",ke,"auto (default), 1px, -0.04em")}"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("letter_spacing","")}
                  title="${(0,u.kg)("editor.design.reset_letter_spacing",ke,"Reset letter spacing to default")}"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.font",ke,"Font")}:</label>
              <select
                .value=${this.designProperties.font_family||""}
                @change=${e=>this._updateProperty("font_family",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,u.kg)("editor.design.default_option",ke,"– Default –")}
                </option>
                <option value="Arial, sans-serif">Arial</option>
                <option value="Helvetica, sans-serif">Helvetica</option>
                <option value="Times New Roman, serif">Times New Roman</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="Verdana, sans-serif">Verdana</option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.font_weight",ke,"Font Weight")}:</label>
              <select
                .value=${this.designProperties.font_weight||""}
                @change=${e=>this._updateProperty("font_weight",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,u.kg)("editor.design.default_option",ke,"– Default –")}
                </option>
                <option value="100">
                  ${(0,u.kg)("editor.design.weight_thin",ke,"100 - Thin")}
                </option>
                <option value="300">
                  ${(0,u.kg)("editor.design.weight_light",ke,"300 - Light")}
                </option>
                <option value="400">
                  ${(0,u.kg)("editor.design.weight_normal",ke,"400 - Normal")}
                </option>
                <option value="500">
                  ${(0,u.kg)("editor.design.weight_medium",ke,"500 - Medium")}
                </option>
                <option value="600">
                  ${(0,u.kg)("editor.design.weight_semi_bold",ke,"600 - Semi Bold")}
                </option>
                <option value="700">
                  ${(0,u.kg)("editor.design.weight_bold",ke,"700 - Bold")}
                </option>
                <option value="900">
                  ${(0,u.kg)("editor.design.weight_black",ke,"900 - Black")}
                </option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.text_transform",ke,"Text Transform")}:</label>
              <select
                .value=${this.designProperties.text_transform||""}
                @change=${e=>this._updateProperty("text_transform",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,u.kg)("editor.design.default_option",ke,"– Default –")}
                </option>
                <option value="none">
                  ${(0,u.kg)("editor.design.transform_none",ke,"None")}
                </option>
                <option value="uppercase">
                  ${(0,u.kg)("editor.design.transform_uppercase",ke,"UPPERCASE")}
                </option>
                <option value="lowercase">
                  ${(0,u.kg)("editor.design.transform_lowercase",ke,"lowercase")}
                </option>
                <option value="capitalize">
                  ${(0,u.kg)("editor.design.transform_capitalize",ke,"Capitalize")}
                </option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.font_style",ke,"Font Style")}:</label>
              <select
                .value=${this.designProperties.font_style||""}
                @change=${e=>this._updateProperty("font_style",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,u.kg)("editor.design.default_option",ke,"– Default –")}
                </option>
                <option value="normal">
                  ${(0,u.kg)("editor.design.style_normal",ke,"Normal")}
                </option>
                <option value="italic">
                  ${(0,u.kg)("editor.design.style_italic",ke,"Italic")}
                </option>
                <option value="oblique">
                  ${(0,u.kg)("editor.design.style_oblique",ke,"Oblique")}
                </option>
              </select>
            </div>
          `,"text")}
        ${this._renderAccordion((0,u.kg)("editor.design.background_section",ke,"Background"),n.qy`
            <div class="property-group">
              <ultra-color-picker
                .label=${(0,u.kg)("editor.design.background_color",ke,"Background Color")}
                .value=${this.designProperties.background_color||""}
                .defaultValue=${"transparent"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("background_color",e.detail.value)}
              ></ultra-color-picker>
            </div>

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.background_image_type",ke,"Background Image Type")}:</label
              >
              <select
                .value=${this.designProperties.background_image_type||"none"}
                @change=${e=>this._updateProperty("background_image_type",e.target.value)}
                class="property-select"
              >
                <option value="none">${(0,u.kg)("editor.design.bg_none",ke,"None")}</option>
                <option value="upload">
                  ${(0,u.kg)("editor.design.bg_upload",ke,"Upload Image")}
                </option>
                <option value="entity">
                  ${(0,u.kg)("editor.design.bg_entity",ke,"Entity Image")}
                </option>
                <option value="url">${(0,u.kg)("editor.design.bg_url",ke,"Image URL")}</option>
              </select>
            </div>

            ${"upload"===this.designProperties.background_image_type?n.qy`
                  <div class="property-group">
                    <label
                      >${(0,u.kg)("editor.design.upload_bg_image",ke,"Upload Background Image")}:</label
                    >
                    <div class="upload-container">
                      <div class="file-upload-row">
                        <label class="file-upload-button">
                          <div class="button-content">
                            <ha-icon icon="mdi:upload"></ha-icon>
                            <span class="button-label"
                              >${(0,u.kg)("editor.design.choose_file",ke,"Choose File")}</span
                            >
                          </div>
                          <input
                            type="file"
                            accept="image/*"
                            @change=${this._handleBackgroundImageUpload}
                            style="display: none"
                          />
                        </label>
                        <div class="path-display">
                          ${this.designProperties.background_image?n.qy`<span
                                class="uploaded-path"
                                title="${this.designProperties.background_image}"
                              >
                                ${this._truncatePath(this.designProperties.background_image)}
                              </span>`:n.qy`<span class="no-file"
                                >${(0,u.kg)("editor.design.no_file_chosen",ke,"No file chosen")}</span
                              >`}
                        </div>
                      </div>
                    </div>
                  </div>
                `:""}
            ${"entity"===this.designProperties.background_image_type?n.qy`
                  <div class="property-group">
                    <label
                      >${(0,u.kg)("editor.design.bg_image_entity",ke,"Background Image Entity")}:</label
                    >
                    <ha-entity-picker
                      .hass=${this.hass}
                      .value=${this.designProperties.background_image_entity||""}
                      @value-changed=${e=>this._updateProperty("background_image_entity",e.detail.value)}
                      .label=${"Select entity with image attribute"}
                      allow-custom-entity
                    ></ha-entity-picker>
                  </div>
                `:""}
            ${"url"===this.designProperties.background_image_type?n.qy`
                  <div class="property-group">
                    <label
                      >${(0,u.kg)("editor.design.bg_image_url",ke,"Background Image URL")}:</label
                    >
                    <input
                      type="text"
                      .value=${this.designProperties.background_image||""}
                      @input=${e=>this._updateProperty("background_image",e.target.value)}
                      placeholder="https://example.com/image.jpg"
                      class="property-input"
                    />
                  </div>
                `:""}
            ${this.designProperties.background_image_type&&"none"!==this.designProperties.background_image_type?n.qy`
                  <div class="property-group">
                    <label>Background Size:</label>
                    <select
                      .value=${this._getBackgroundSizeDropdownValue(this.designProperties.background_size)}
                      @change=${e=>this._updateProperty("background_size",e.target.value)}
                      class="property-select"
                    >
                      <option value="cover">Cover</option>
                      <option value="contain">Contain</option>
                      <option value="auto">Auto</option>
                      <option value="custom">Custom</option>
                    </select>
                  </div>

                  ${"custom"===this._getBackgroundSizeDropdownValue(this.designProperties.background_size)?n.qy`
                        <div class="property-group">
                          <label>Custom Width:</label>
                          <input
                            type="text"
                            .value=${this._getCustomSizeValue(this.designProperties.background_size,"width")}
                            @input=${e=>{const t=e.target.value,i=this._getCustomSizeValue(this.designProperties.background_size,"height"),o=t&&i?`${t} ${i}`:t||i||"auto";this._updateProperty("background_size",o)}}
                            placeholder="100px, 50%, auto"
                            class="property-input"
                          />
                        </div>
                        <div class="property-group">
                          <label>Custom Height:</label>
                          <input
                            type="text"
                            .value=${this._getCustomSizeValue(this.designProperties.background_size,"height")}
                            @input=${e=>{const t=e.target.value,i=this._getCustomSizeValue(this.designProperties.background_size,"width"),o=i&&t?`${i} ${t}`:i||t||"auto";this._updateProperty("background_size",o)}}
                            placeholder="100px, 50%, auto"
                            class="property-input"
                          />
                        </div>
                      `:""}

                  <div class="property-group">
                    <label>Background Repeat:</label>
                    <select
                      .value=${this.designProperties.background_repeat||"no-repeat"}
                      @change=${e=>this._updateProperty("background_repeat",e.target.value)}
                      class="property-select"
                    >
                      <option value="no-repeat">No Repeat</option>
                      <option value="repeat">Repeat</option>
                      <option value="repeat-x">Repeat X</option>
                      <option value="repeat-y">Repeat Y</option>
                    </select>
                  </div>

                  <div class="property-group">
                    <label>Background Position:</label>
                    <select
                      .value=${this.designProperties.background_position||"center center"}
                      @change=${e=>this._updateProperty("background_position",e.target.value)}
                      class="property-select"
                    >
                      <option value="left top">Left Top</option>
                      <option value="left center">Left Center</option>
                      <option value="left bottom">Left Bottom</option>
                      <option value="center top">Center Top</option>
                      <option value="center center">Center</option>
                      <option value="center bottom">Center Bottom</option>
                      <option value="right top">Right Top</option>
                      <option value="right center">Right Center</option>
                      <option value="right bottom">Right Bottom</option>
                    </select>
                  </div>
                `:""}

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.backdrop_filter",(null===(o=null===(i=this.hass)||void 0===i?void 0:i.locale)||void 0===o?void 0:o.language)||"en","Backdrop Filter")}:</label
              >
              <input
                type="text"
                .value=${this.designProperties.backdrop_filter||""}
                @input=${e=>this._updateProperty("backdrop_filter",e.target.value)}
                placeholder="blur(10px), grayscale(100%), invert(75%)"
                class="property-input"
              />
            </div>

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.background_filter",(null===(r=null===(a=this.hass)||void 0===a?void 0:a.locale)||void 0===r?void 0:r.language)||"en","Background Filter")}:</label
              >
              <input
                type="text"
                .value=${this.designProperties.background_filter||""}
                @input=${e=>this._updateProperty("background_filter",e.target.value)}
                placeholder="grayscale(100%), blur(10px), brightness(0.5)"
                class="property-input"
              />
            </div>
          `,"background")}
        ${this._renderAccordion((0,u.kg)("editor.design.sizes_section",ke,"Sizes"),n.qy`
            <div class="property-group">
              <label>${(0,u.kg)("editor.design.width",ke,"Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.width||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("width",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.width||"",(e=>this._updateProperty("width",e)))}
                  placeholder="auto (default), 200px, 100%, 14rem, 10vw"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("width","")}
                  title="Reset width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.height",ke,"Height")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.height||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("height",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.height||"",(e=>this._updateProperty("height",e)))}
                  placeholder="auto (default), 200px, 15rem, 10vh"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("height","")}
                  title="Reset height to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.max_width",ke,"Max Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.max_width||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("max_width",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.max_width||"",(e=>this._updateProperty("max_width",e)))}
                  placeholder="200px, 100%, 14rem, 10vw"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("max_width","")}
                  title="Reset max width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.max_height",ke,"Max Height")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.max_height||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("max_height",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  placeholder="200px, 15rem, 10vh"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("max_height","")}
                  title="Reset max height to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.min_width",ke,"Min Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.min_width||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("min_width",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  placeholder="200px, 100%, 14rem, 10vw"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("min_width","")}
                  title="Reset min width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.min_height",ke,"Min Height")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.min_height||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("min_height",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  placeholder="200px, 15rem, 10vh"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("min_height","")}
                  title="Reset min height to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>
          `,"sizes")}
        ${this._renderAccordion((0,u.kg)("editor.design.spacing_section",ke,"Spacing"),n.qy`
            <div class="spacing-group">
              <div class="spacing-header">
                <h4>
                  ${(0,u.kg)("editor.design.margin",(null===(l=null===(s=this.hass)||void 0===s?void 0:s.locale)||void 0===l?void 0:l.language)||"en","Margin")}
                </h4>
                <button
                  type="button"
                  class="lock-button ${this._marginLocked?"locked":""}"
                  @click=${()=>this._toggleSpacingLock("margin")}
                  title="${this._marginLocked?"Unlock to edit sides independently":"Lock to edit all sides together"}"
                >
                  <ha-icon icon="${this._marginLocked?"mdi:lock":"mdi:lock-open"}"></ha-icon>
                </button>
              </div>
              <div class="spacing-fields-desktop">
                <div class="spacing-field">
                  <label>Top</label>
                  <input
                    type="text"
                    placeholder="8px, auto, 1rem"
                    .value=${this.designProperties.margin_top||""}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("margin","top",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("margin_top",(()=>this.designProperties.margin_top||""),(e=>this._updateSpacing("margin","top",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Right</label>
                  <input
                    type="text"
                    placeholder="0px, auto, 1rem"
                    .value=${this._marginLocked?this.designProperties.margin_top||"":this.designProperties.margin_right||""}
                    .disabled=${this._marginLocked}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("margin","right",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("margin_right",(()=>this.designProperties.margin_right||""),(e=>this._updateSpacing("margin","right",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input ${this._marginLocked?"locked":""}"
                  />
                </div>
                <div class="spacing-field">
                  <label>Bottom</label>
                  <input
                    type="text"
                    placeholder="8px, auto, 1rem"
                    .value=${this._marginLocked?this.designProperties.margin_top||"":this.designProperties.margin_bottom||""}
                    .disabled=${this._marginLocked}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("margin","bottom",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("margin_bottom",(()=>this.designProperties.margin_bottom||""),(e=>this._updateSpacing("margin","bottom",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input ${this._marginLocked?"locked":""}"
                  />
                </div>
                <div class="spacing-field">
                  <label>Left</label>
                  <input
                    type="text"
                    placeholder="0px, auto, 1rem"
                    .value=${this._marginLocked?this.designProperties.margin_top||"":this.designProperties.margin_left||""}
                    .disabled=${this._marginLocked}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("margin","left",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("margin_left",(()=>this.designProperties.margin_left||""),(e=>this._updateSpacing("margin","left",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input ${this._marginLocked?"locked":""}"
                  />
                </div>
              </div>
            </div>

            <div class="spacing-group">
              <div class="spacing-header">
                <h4>Padding</h4>
                <button
                  type="button"
                  class="lock-button ${this._paddingLocked?"locked":""}"
                  @click=${()=>this._toggleSpacingLock("padding")}
                  title="${this._paddingLocked?"Unlock to edit sides independently":"Lock to edit all sides together"}"
                >
                  <ha-icon icon="${this._paddingLocked?"mdi:lock":"mdi:lock-open"}"></ha-icon>
                </button>
              </div>
              <div class="spacing-fields-desktop">
                <div class="spacing-field">
                  <label>Top</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this.designProperties.padding_top||""}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("padding","top",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("padding_top",(()=>this.designProperties.padding_top||""),(e=>this._updateSpacing("padding","top",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input"
                  />
                </div>
                <div class="spacing-field">
                  <label>Right</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this._paddingLocked?this.designProperties.padding_top||"":this.designProperties.padding_right||""}
                    .disabled=${this._paddingLocked}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("padding","right",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("padding_right",(()=>this.designProperties.padding_right||""),(e=>this._updateSpacing("padding","right",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input ${this._paddingLocked?"locked":""}"
                  />
                </div>
                <div class="spacing-field">
                  <label>Bottom</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this._paddingLocked?this.designProperties.padding_top||"":this.designProperties.padding_bottom||""}
                    .disabled=${this._paddingLocked}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("padding","bottom",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("padding_bottom",(()=>this.designProperties.padding_bottom||""),(e=>this._updateSpacing("padding","bottom",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input ${this._paddingLocked?"locked":""}"
                  />
                </div>
                <div class="spacing-field">
                  <label>Left</label>
                  <input
                    type="text"
                    placeholder="0px, 1rem, 5%"
                    .value=${this._paddingLocked?this.designProperties.padding_top||"":this.designProperties.padding_left||""}
                    .disabled=${this._paddingLocked}
                    @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateSpacing("padding","left",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                    @keydown=${this._createProtectedKeydownHandler("padding_left",(()=>this.designProperties.padding_left||""),(e=>this._updateSpacing("padding","left",e)))}
                    autocomplete="off"
                    autocorrect="off"
                    autocapitalize="off"
                    spellcheck="false"
                    class="spacing-input ${this._paddingLocked?"locked":""}"
                  />
                </div>
              </div>
            </div>
          `,"spacing")}
        ${this._renderAccordion((0,u.kg)("editor.design.border_section",ke,"Border"),n.qy`
            <div class="property-group">
              <label>${(0,u.kg)("editor.design.border_radius",ke,"Border Radius")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.border_radius||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("border_radius",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.border_radius||"",(e=>this._updateProperty("border_radius",e)))}
                  placeholder="5px, 50%, 0.3em, 12px 0"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("border_radius","")}
                  title="Reset border radius to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.border_style",ke,"Border Style")}:</label>
              <select
                .value=${this.designProperties.border_style||""}
                @change=${e=>this._updateProperty("border_style",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,u.kg)("editor.design.border_style_none",(null===(c=null===(d=this.hass)||void 0===d?void 0:d.locale)||void 0===c?void 0:c.language)||"en","None")}
                </option>
                <option value="solid">
                  ${(0,u.kg)("editor.design.border_style_solid",(null===(h=null===(p=this.hass)||void 0===p?void 0:p.locale)||void 0===h?void 0:h.language)||"en","Solid")}
                </option>
                <option value="dashed">
                  ${(0,u.kg)("editor.design.border_style_dashed",(null===(m=null===(g=this.hass)||void 0===g?void 0:g.locale)||void 0===m?void 0:m.language)||"en","Dashed")}
                </option>
                <option value="dotted">
                  ${(0,u.kg)("editor.design.border_style_dotted",(null===(_=null===(f=this.hass)||void 0===f?void 0:f.locale)||void 0===_?void 0:_.language)||"en","Dotted")}
                </option>
                <option value="double">
                  ${(0,u.kg)("editor.design.border_style_double",(null===(b=null===(v=this.hass)||void 0===v?void 0:v.locale)||void 0===b?void 0:b.language)||"en","Double")}
                </option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.border_width",ke,"Border Width")}:</label>
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.border_width||""}
                  @input=${e=>{const t=e.target,i=t.value,o=t.selectionStart,n=t.selectionEnd;this._updateProperty("border_width",i),requestAnimationFrame((()=>{t&&"number"==typeof o&&t.setSelectionRange(o,n||o)}))}}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.border_width||"",(e=>this._updateProperty("border_width",e)))}
                  placeholder="1px, 2px, 0.125rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("border_width","")}
                  title="Reset border width to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <ultra-color-picker
                .label=${(0,u.kg)("editor.design.border_color",ke,"Border Color")}
                .value=${this.designProperties.border_color||""}
                .defaultValue=${"var(--divider-color)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("border_color",e.detail.value)}
              ></ultra-color-picker>
            </div>
          `,"border")}
        ${this._renderAccordion((0,u.kg)("editor.design.position_section",ke,"Position"),n.qy`
            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.position",(null===(x=null===(y=this.hass)||void 0===y?void 0:y.locale)||void 0===x?void 0:x.language)||"en","Position")}:</label
              >
              <select
                .value=${this.designProperties.position||""}
                @change=${e=>this._updateProperty("position",e.target.value)}
                class="property-select"
              >
                <option value="">
                  ${(0,u.kg)("editor.design.position_default",(null===(w=null===(k=this.hass)||void 0===k?void 0:k.locale)||void 0===w?void 0:w.language)||"en","– Default –")}
                </option>
                <option value="static">
                  ${(0,u.kg)("editor.design.position_static",(null===(O=null===(S=this.hass)||void 0===S?void 0:S.locale)||void 0===O?void 0:O.language)||"en","Static")}
                </option>
                <option value="relative">
                  ${(0,u.kg)("editor.design.position_relative",(null===(C=null===(A=this.hass)||void 0===A?void 0:A.locale)||void 0===C?void 0:C.language)||"en","Relative")}
                </option>
                <option value="absolute">
                  ${(0,u.kg)("editor.design.position_absolute",(null===(T=null===($=this.hass)||void 0===$?void 0:$.locale)||void 0===T?void 0:T.language)||"en","Absolute")}
                </option>
                <option value="fixed">
                  ${(0,u.kg)("editor.design.position_fixed",(null===(P=null===(z=this.hass)||void 0===z?void 0:z.locale)||void 0===P?void 0:P.language)||"en","Fixed")}
                </option>
                <option value="sticky">
                  ${(0,u.kg)("editor.design.position_sticky",(null===(I=null===(E=this.hass)||void 0===E?void 0:E.locale)||void 0===I?void 0:I.language)||"en","Sticky")}
                </option>
              </select>
            </div>

            ${this.designProperties.position&&"static"!==this.designProperties.position?n.qy`
                  <div class="position-grid">
                    <input
                      type="text"
                      placeholder="Top"
                      .value=${this.designProperties.top||""}
                      @input=${e=>this._updateProperty("top",e.target.value)}
                      @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.top||"",(e=>this._updateProperty("top",e)))}
                    />
                    <div class="position-row">
                      <input
                        type="text"
                        placeholder="Left"
                        .value=${this.designProperties.left||""}
                        @input=${e=>this._updateProperty("left",e.target.value)}
                        @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.left||"",(e=>this._updateProperty("left",e)))}
                      />
                      <div class="position-center">POS</div>
                      <input
                        type="text"
                        placeholder="Right"
                        .value=${this.designProperties.right||""}
                        @input=${e=>this._updateProperty("right",e.target.value)}
                        @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.right||"",(e=>this._updateProperty("right",e)))}
                      />
                    </div>
                    <input
                      type="text"
                      placeholder="Bottom"
                      .value=${this.designProperties.bottom||""}
                      @input=${e=>this._updateProperty("bottom",e.target.value)}
                      @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.bottom||"",(e=>this._updateProperty("bottom",e)))}
                    />
                  </div>

                  <div class="property-group">
                    <label>Z-Index:</label>
                    <input
                      type="text"
                      .value=${this.designProperties.z_index||""}
                      @input=${e=>this._updateProperty("z_index",e.target.value)}
                      @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.z_index||"",(e=>this._updateProperty("z_index",e)))}
                      placeholder="-1, 1, 3, 50"
                      class="property-input"
                    />
                  </div>
                `:""}
          `,"position")}
        ${this._renderAccordion((0,u.kg)("editor.design.text_shadow_section",ke,"Text Shadow"),n.qy`
            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.horizontal_shift",(null===(M=null===(j=this.hass)||void 0===j?void 0:j.locale)||void 0===M?void 0:M.language)||"en","Horizontal Shift")}:</label
              >
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.text_shadow_h||""}
                  @input=${this._createRobustInputHandler("text_shadow_h",(e=>this._updateProperty("text_shadow_h",e)))}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.text_shadow_h||"",(e=>this._updateProperty("text_shadow_h",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("text_shadow_h","")}
                  title="Reset horizontal shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.vertical_shift",(null===(B=null===(D=this.hass)||void 0===D?void 0:D.locale)||void 0===B?void 0:B.language)||"en","Vertical Shift")}:</label
              >
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.text_shadow_v||""}
                  @input=${this._createRobustInputHandler("text_shadow_v",(e=>this._updateProperty("text_shadow_v",e)))}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.text_shadow_v||"",(e=>this._updateProperty("text_shadow_v",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("text_shadow_v","")}
                  title="Reset vertical shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.blur",(null===(U=null===(R=this.hass)||void 0===R?void 0:R.locale)||void 0===U?void 0:U.language)||"en","Blur")}:</label
              >
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.text_shadow_blur||""}
                  @input=${e=>this._updateProperty("text_shadow_blur",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.text_shadow_blur||"",(e=>this._updateProperty("text_shadow_blur",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("text_shadow_blur","")}
                  title="Reset shadow blur to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <ultra-color-picker
                .label=${(0,u.kg)("editor.design.text_shadow_color",ke,"Text Shadow Color")}
                .value=${this.designProperties.text_shadow_color||""}
                .defaultValue=${"rgba(0,0,0,0.5)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("text_shadow_color",e.detail.value)}
              ></ultra-color-picker>
            </div>
          `,"text-shadow")}
        ${this._renderAccordion((0,u.kg)("editor.design.box_shadow_section",ke,"Box Shadow"),n.qy`
            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.horizontal_shift",(null===(J=null===(H=this.hass)||void 0===H?void 0:H.locale)||void 0===J?void 0:J.language)||"en","Horizontal Shift")}:</label
              >
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_h||""}
                  @input=${this._createRobustInputHandler("box_shadow_h",(e=>this._updateProperty("box_shadow_h",e)))}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_h||"",(e=>this._updateProperty("box_shadow_h",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_h","")}
                  title="Reset horizontal box shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.vertical_shift",(null===(N=null===(Q=this.hass)||void 0===Q?void 0:Q.locale)||void 0===N?void 0:N.language)||"en","Vertical Shift")}:</label
              >
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_v||""}
                  @input=${this._createRobustInputHandler("box_shadow_v",(e=>this._updateProperty("box_shadow_v",e)))}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_v||"",(e=>this._updateProperty("box_shadow_v",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_v","")}
                  title="Reset vertical box shadow to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.blur",(null===(F=null===(L=this.hass)||void 0===L?void 0:L.locale)||void 0===F?void 0:F.language)||"en","Blur")}:</label
              >
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_blur||""}
                  @input=${e=>this._updateProperty("box_shadow_blur",e.target.value)}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_blur||"",(e=>this._updateProperty("box_shadow_blur",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_blur","")}
                  title="Reset box shadow blur to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <label
                >${(0,u.kg)("editor.design.spread",(null===(V=null===(q=this.hass)||void 0===q?void 0:q.locale)||void 0===V?void 0:V.language)||"en","Spread")}:</label
              >
              <div class="input-with-reset">
                <input
                  type="text"
                  .value=${this.designProperties.box_shadow_spread||""}
                  @input=${this._createRobustInputHandler("box_shadow_spread",(e=>this._updateProperty("box_shadow_spread",e)))}
                  @keydown=${e=>this._handleNumericKeydown(e,this.designProperties.box_shadow_spread||"",(e=>this._updateProperty("box_shadow_spread",e)))}
                  placeholder="0, 3px, 0.05em, 2rem"
                  class="property-input"
                />
                <button
                  class="reset-btn"
                  @click=${()=>this._updateProperty("box_shadow_spread","")}
                  title="Reset box shadow spread to default"
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <div class="property-group">
              <ultra-color-picker
                .label=${(0,u.kg)("editor.design.box_shadow_color",ke,"Box Shadow Color")}
                .value=${this.designProperties.box_shadow_color||""}
                .defaultValue=${"rgba(0,0,0,0.1)"}
                .hass=${this.hass}
                @value-changed=${e=>this._updateProperty("box_shadow_color",e.detail.value)}
              ></ultra-color-picker>
            </div>
          `,"box-shadow")}
        ${this._renderAccordion((0,u.kg)("editor.design.overflow_section",ke,"Overflow"),n.qy`
            <div class="property-group">
              <label>${(0,u.kg)("editor.design.overflow",ke,"Overflow")}:</label>
              <select
                .value=${this.designProperties.overflow||"visible"}
                @change=${e=>this._updateProperty("overflow",e.target.value)}
                class="property-select"
              >
                <option value="visible">Visible (Default)</option>
                <option value="hidden">Hidden</option>
                <option value="scroll">Scroll</option>
                <option value="auto">Auto</option>
              </select>
            </div>

            <div class="property-group">
              <label>${(0,u.kg)("editor.design.clip_path",ke,"Clip-path")}:</label>
              <input
                type="text"
                .value=${this.designProperties.clip_path||""}
                @input=${e=>this._updateProperty("clip_path",e.target.value)}
                placeholder="ellipse(75% 100% at bottom)"
                class="property-input"
              />
              <small class="property-hint"
                >Examples:<br />
                ellipse(75% 100% at bottom)<br />
                polygon(25% 0%, 100% 0%, 75% 100%, 0% 100%)<br />
                polygon(100% 50%, 75% 93.3%, 25% 93.3%, 0% 50%, 25% 6.7%, 75% 6.7%)
              </small>
            </div>
          `,"overflow")}
        ${this._renderAccordion((0,u.kg)("editor.design.animations_section",ke,"Animations"),n.qy`
            <!-- State-based Animation -->
            <div class="property-section">
              <h5>
                ${(0,u.kg)("editor.design.state_based_animation",(null===(G=null===(K=this.hass)||void 0===K?void 0:K.locale)||void 0===G?void 0:G.language)||"en","State-based Animation")}
              </h5>
              <div class="property-group">
                <label
                  >${(0,u.kg)("editor.design.animation_type",(null===(Y=null===(Z=this.hass)||void 0===Z?void 0:Z.locale)||void 0===Y?void 0:Y.language)||"en","Animation Type")}:</label
                >
                <select
                  .value=${this.designProperties.animation_type||"none"}
                  @change=${e=>this._updateProperty("animation_type",e.target.value)}
                  class="property-select"
                >
                  <option value="none">
                    ${(0,u.kg)("editor.design.none",(null===(X=null===(W=this.hass)||void 0===W?void 0:W.locale)||void 0===X?void 0:X.language)||"en","None")}
                  </option>
                  <option value="pulse">Pulse</option>
                  <option value="vibrate">Vibrate</option>
                  <option value="rotate-left">Rotate Left</option>
                  <option value="rotate-right">Rotate Right</option>
                  <option value="hover">Hover</option>
                  <option value="fade">Fade</option>
                  <option value="scale">Scale</option>
                  <option value="bounce">Bounce</option>
                  <option value="shake">Shake</option>
                  <option value="tada">Tada</option>
                </select>
              </div>

              <div class="property-group">
                <label
                  >${(0,u.kg)("editor.design.animation_duration",(null===(te=null===(ee=this.hass)||void 0===ee?void 0:ee.locale)||void 0===te?void 0:te.language)||"en","Animation Duration")}:</label
                >
                <input
                  type="text"
                  .value=${this.designProperties.animation_duration||"2s"}
                  @input=${e=>this._updateProperty("animation_duration",e.target.value)}
                  placeholder="2s, 500ms, 1.5s"
                  class="property-input"
                />
                <small class="property-hint">
                  ${(0,u.kg)("editor.design.animation_duration_desc",(null===(oe=null===(ie=this.hass)||void 0===ie?void 0:ie.locale)||void 0===oe?void 0:oe.language)||"en","Duration for the animation (e.g., 2s, 500ms, 1.5s)")}
                </small>
              </div>

              ${this.designProperties.animation_type&&"none"!==this.designProperties.animation_type?n.qy`
                    <div class="property-group">
                      <label>Entity to Monitor:</label>
                      <ha-form
                        .hass=${this.hass}
                        .data=${{entity:this.designProperties.animation_entity||""}}
                        .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
                        @value-changed=${e=>this._updateProperty("animation_entity",e.detail.value.entity)}
                      ></ha-form>
                    </div>

                    ${this.designProperties.animation_entity?n.qy`
                          <div class="property-group">
                            <label>Animation Trigger Type:</label>
                            <select
                              id="animation-trigger-type-select"
                              .value=${this.designProperties.animation_trigger_type||"state"}
                              @change=${e=>{const t={animation_trigger_type:e.target.value,animation_state:"",animation_attribute:""};this.onUpdate?this.onUpdate(t):this.dispatchEvent(new CustomEvent("design-changed",{detail:t,bubbles:!0,composed:!0})),this.designProperties=Object.assign(Object.assign({},this.designProperties),t),this.requestUpdate()}}
                              class="property-select ${"attribute"===this.designProperties.animation_trigger_type?"attribute-mode":"state-mode"}"
                            >
                              <option value="state">Entity State</option>
                              <option value="attribute">Entity Attribute</option>
                            </select>
                            <div
                              class="trigger-type-indicator ${"attribute"===this.designProperties.animation_trigger_type?"attribute-mode-indicator":"state-mode-indicator"}"
                            >
                              <ha-icon
                                icon="${"attribute"===this.designProperties.animation_trigger_type?"mdi:format-list-checks":"mdi:state-machine"}"
                              ></ha-icon>
                              <span
                                >${"attribute"===this.designProperties.animation_trigger_type?"Attribute mode: select an attribute and its value to trigger the animation":"State mode: enter a state value to trigger the animation"}</span
                              >
                            </div>
                          </div>

                          ${(()=>"attribute"===(this.designProperties.animation_trigger_type||"state")?n.qy`
                                <div class="property-group attribute-mode-container">
                                  <div class="property-group">
                                    <label>
                                      <ha-icon icon="mdi:format-list-checks"></ha-icon>
                                      Attribute Name:
                                    </label>
                                    <input
                                      type="text"
                                      .value=${this.designProperties.animation_attribute||""}
                                      @input=${e=>{const t=e.target.value,i=e.target;i.classList.add("change-success");const o={animation_attribute:t,animation_state:""};this.onUpdate?this.onUpdate(o):this.dispatchEvent(new CustomEvent("design-changed",{detail:o,bubbles:!0,composed:!0})),setTimeout((()=>{this.requestUpdate()}),50),setTimeout((()=>{this.requestUpdate()}),150),setTimeout((()=>{this.requestUpdate()}),300),setTimeout((()=>{this.requestUpdate(),i.classList.remove("change-success")}),500)}}
                                      placeholder="friendly_name, device_class, state, etc."
                                      class="property-input attribute-mode-input"
                                    />
                                    <small class="property-hint">
                                      Enter the attribute name manually (e.g., friendly_name,
                                      device_class, state, battery_level)
                                    </small>
                                  </div>

                                  <div class="property-group">
                                    <label>
                                      <ha-icon icon="mdi:format-text"></ha-icon>
                                      Attribute Value:
                                    </label>
                                    <input
                                      type="text"
                                      .value=${this.designProperties.animation_state||""}
                                      @input=${e=>this._updateProperty("animation_state",e.target.value)}
                                      placeholder="blue, 255, heating, on, off, etc."
                                      class="property-input attribute-value-input"
                                    />
                                    <small class="property-hint">
                                      Enter the attribute value that will trigger the animation
                                    </small>
                                  </div>
                                </div>
                              `:n.qy`
                                <div
                                  class="property-group state-value-container"
                                  style="display: ${"attribute"!==String(this.designProperties.animation_trigger_type)?"block !important":"none !important"}"
                                  data-mode="state"
                                >
                                  <label>
                                    <ha-icon icon="mdi:state-machine"></ha-icon>
                                    State Value:
                                  </label>
                                  <input
                                    type="text"
                                    .value=${this.designProperties.animation_state||""}
                                    @input=${e=>this._updateProperty("animation_state",e.target.value)}
                                    placeholder="on, off, playing, idle, etc."
                                    class="property-input state-value-input"
                                  />
                                  <small class="property-hint">
                                    Enter the exact state value that will trigger the animation
                                  </small>
                                  <div class="property-hint state-value-hint">
                                    <ha-icon icon="mdi:information-outline"></ha-icon>
                                    <span>
                                      ${this._getStateValueHint(this.designProperties.animation_entity)}
                                    </span>
                                  </div>
                                </div>
                              `)()}
                        `:n.qy`
                          <div class="property-group">
                            <label>Trigger Type:</label>
                            <select disabled class="property-select">
                              <option>Select an entity first</option>
                            </select>
                            <small class="property-hint">
                              Select an entity first to configure trigger conditions
                            </small>
                          </div>
                        `}
                  `:""}
            </div>

            <!-- Intro/Outro Animations -->
            <div class="property-section">
              <h5>
                ${(0,u.kg)("editor.design.intro_outro_animations",(null===(ae=null===(ne=this.hass)||void 0===ne?void 0:ne.locale)||void 0===ae?void 0:ae.language)||"en","Intro & Outro Animations")}
              </h5>
              <div class="two-column-grid">
                <div class="property-group">
                  <label
                    >${(0,u.kg)("editor.design.intro_animation",(null===(se=null===(re=this.hass)||void 0===re?void 0:re.locale)||void 0===se?void 0:se.language)||"en","Intro Animation")}:</label
                  >
                  <select
                    .value=${this.designProperties.intro_animation||"none"}
                    @change=${e=>this._updateProperty("intro_animation",e.target.value)}
                    class="property-select"
                  >
                    <option value="none">
                      ${(0,u.kg)("editor.design.none",(null===(de=null===(le=this.hass)||void 0===le?void 0:le.locale)||void 0===de?void 0:de.language)||"en","None")}
                    </option>
                    <option value="fadeIn">Fade In</option>
                    <option value="slideInUp">Slide In Up</option>
                    <option value="slideInDown">Slide In Down</option>
                    <option value="slideInLeft">Slide In Left</option>
                    <option value="slideInRight">Slide In Right</option>
                    <option value="zoomIn">Zoom In</option>
                    <option value="bounceIn">Bounce In</option>
                    <option value="flipInX">Flip In X</option>
                    <option value="flipInY">Flip In Y</option>
                    <option value="rotateIn">Rotate In</option>
                  </select>
                </div>

                <div class="property-group">
                  <label
                    >${(0,u.kg)("editor.design.outro_animation",(null===(pe=null===(ce=this.hass)||void 0===ce?void 0:ce.locale)||void 0===pe?void 0:pe.language)||"en","Outro Animation")}:</label
                  >
                  <select
                    .value=${this.designProperties.outro_animation||"none"}
                    @change=${e=>this._updateProperty("outro_animation",e.target.value)}
                    class="property-select"
                  >
                    <option value="none">
                      ${(0,u.kg)("editor.design.none",(null===(he=null===(ue=this.hass)||void 0===ue?void 0:ue.locale)||void 0===he?void 0:he.language)||"en","None")}
                    </option>
                    <option value="fadeOut">Fade Out</option>
                    <option value="slideOutUp">Slide Out Up</option>
                    <option value="slideOutDown">Slide Out Down</option>
                    <option value="slideOutLeft">Slide Out Left</option>
                    <option value="slideOutRight">Slide Out Right</option>
                    <option value="zoomOut">Zoom Out</option>
                    <option value="bounceOut">Bounce Out</option>
                    <option value="flipOutX">Flip Out X</option>
                    <option value="flipOutY">Flip Out Y</option>
                    <option value="rotateOut">Rotate Out</option>
                  </select>
                </div>
              </div>

              <!-- Animation Settings -->
              <div class="three-column-grid">
                <div class="property-group">
                  <label
                    >${(0,u.kg)("editor.design.duration",(null===(me=null===(ge=this.hass)||void 0===ge?void 0:ge.locale)||void 0===me?void 0:me.language)||"en","Duration")}:</label
                  >
                  <input
                    type="text"
                    .value=${this.designProperties.animation_duration||""}
                    @input=${e=>this._updateProperty("animation_duration",e.target.value)}
                    placeholder="0.3s, 500ms"
                    class="property-input"
                  />
                </div>

                <div class="property-group">
                  <label
                    >${(0,u.kg)("editor.design.delay",(null===(_e=null===(fe=this.hass)||void 0===fe?void 0:fe.locale)||void 0===_e?void 0:_e.language)||"en","Delay")}:</label
                  >
                  <input
                    type="text"
                    .value=${this.designProperties.animation_delay||""}
                    @input=${e=>this._updateProperty("animation_delay",e.target.value)}
                    placeholder="0s, 100ms"
                    class="property-input"
                  />
                </div>

                <div class="property-group">
                  <label
                    >${(0,u.kg)("editor.design.timing",(null===(be=null===(ve=this.hass)||void 0===ve?void 0:ve.locale)||void 0===be?void 0:be.language)||"en","Timing")}:</label
                  >
                  <select
                    .value=${this.designProperties.animation_timing||"ease"}
                    @change=${e=>this._updateProperty("animation_timing",e.target.value)}
                    class="property-select"
                  >
                    <option value="ease">
                      ${(0,u.kg)("editor.design.ease",(null===(xe=null===(ye=this.hass)||void 0===ye?void 0:ye.locale)||void 0===xe?void 0:xe.language)||"en","Ease")}
                    </option>
                    <option value="linear">Linear</option>
                    <option value="ease-in">Ease In</option>
                    <option value="ease-out">Ease Out</option>
                    <option value="ease-in-out">Ease In Out</option>
                    <option value="cubic-bezier(0.25,0.1,0.25,1)">Custom Cubic</option>
                  </select>
                </div>
              </div>
            </div>
          `,"animations")}

        <!-- Smart Scaling Section -->
        <div
          class="smart-scaling-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 8px; border: 1px solid rgba(var(--rgb-primary-color), 0.12);"
        >
          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
            <ha-icon icon="mdi:fit-to-screen" style="color: var(--primary-color);"></ha-icon>
            <span style="font-size: 16px; font-weight: 600; color: var(--primary-text-color);">
              ${(0,u.kg)("editor.design.smart_scaling",ke,"Smart Scaling")}
            </span>
          </div>
          <div
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
          >
            ${(0,u.kg)("editor.design.smart_scaling_description",ke,"When enabled, content automatically scales to fit within the card boundaries. Disable to allow overflow effects like glows and shadows to extend beyond bounds.")}
          </div>
          <div style="display: flex; align-items: center; justify-content: space-between;">
            <span style="font-size: 14px; color: var(--primary-text-color);">
              ${(0,u.kg)("editor.design.enable_smart_scaling",ke,"Enable Smart Scaling")}
            </span>
            <ha-switch
              .checked=${!1!==this.designProperties.smart_scaling}
              @change=${e=>{const t=e.target;this._updateProperty("smart_scaling",t.checked)}}
            ></ha-switch>
          </div>
        </div>
      </div>
    `}static get styles(){return n.AH`
      .global-design-tab {
        display: flex;
        flex-direction: column;
        gap: 8px;
        box-sizing: border-box;
        overflow: hidden;
      }

      .design-toolbar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        margin-bottom: 8px;
        box-sizing: border-box;
        overflow: hidden;
      }

      .toolbar-button {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 14px;
        font-weight: 500;
        min-width: 0;
        flex: 1;
        justify-content: center;
      }

      .toolbar-button:hover:not(:disabled) {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
        transform: translateY(-1px);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .toolbar-button:active:not(:disabled) {
        transform: translateY(0);
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .toolbar-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: var(--disabled-background-color, #f5f5f5);
        color: var(--disabled-text-color, #999);
        border-color: var(--disabled-border-color, #ddd);
      }

      .toolbar-button ha-icon {
        font-size: 16px;
        flex-shrink: 0;
      }

      .toolbar-button span {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Specific button styling */
      .copy-button:hover:not(:disabled) {
        border-color: var(--info-color, #2196f3);
        background: var(--info-color, #2196f3);
      }

      .paste-button.has-content {
        border-color: var(--success-color, #4caf50);
        background: rgba(76, 175, 80, 0.1);
      }

      .paste-button.has-content:hover:not(:disabled) {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
      }

      .reset-all-button:hover:not(:disabled) {
        border-color: var(--error-color, #f44336);
        background: var(--error-color, #f44336);
      }

      /* Responsive design for smaller screens */
      @media (max-width: 768px) {
        .design-toolbar {
          flex-direction: column;
          gap: 8px;
        }

        .toolbar-button {
          width: 100%;
          justify-content: center;
        }
      }

      @media (max-width: 480px) {
        .toolbar-button span {
          display: none;
        }

        .toolbar-button {
          min-width: 44px;
          padding: 8px;
          justify-content: center;
        }

        .design-toolbar {
          flex-direction: row;
          justify-content: space-around;
        }
      }

      .accordion-section {
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        overflow: hidden;
        box-sizing: border-box;
      }

      .accordion-header {
        width: 100%;
        padding: 12px 16px;
        background: var(--secondary-background-color);
        border: none;
        border-radius: 8px 8px 0 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-weight: 500;
        color: var(--primary-text-color);
        transition: background-color 0.2s ease;
        box-sizing: border-box;
      }

      .accordion-header:hover {
        background: var(--primary-color);
        color: white;
      }

      .accordion-header.expanded {
        background: var(--primary-color);
        color: white;
        border-radius: 8px 8px 0 0;
      }

      .accordion-header:not(.expanded) {
        border-radius: 8px;
      }

      .accordion-toggle {
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        cursor: pointer;
        display: flex;
        align-items: center;
        flex: 1;
        text-align: left;
        padding: 0;
      }

      .accordion-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .reset-button,
      .expand-button {
        background: none;
        border: none;
        color: inherit;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background-color 0.2s ease;
        min-width: 24px;
        height: 24px;
      }

      .reset-button:hover,
      .expand-button:hover {
        background: rgba(255, 255, 255, 0.1);
      }

      .accordion-header:not(.expanded) .reset-button:hover,
      .accordion-header:not(.expanded) .expand-button:hover {
        background: rgba(0, 0, 0, 0.1);
      }

      .accordion-title {
        position: relative;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .edit-indicator {
        width: 8px;
        height: 8px;
        background: var(--primary-color);
        border-radius: 50%;
        display: inline-block;
        animation: pulse 2s ease-in-out infinite;
      }

      .accordion-header.expanded .edit-indicator {
        background: white;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.6;
        }
      }

      .accordion-content {
        padding: 20px;
        background: var(--card-background-color, #fff);
        border-top: 1px solid var(--divider-color);
        border-radius: 0 0 8px 8px;
        position: relative;
        box-sizing: border-box;
        overflow: hidden;
      }

      .property-group {
        margin-bottom: 16px;
        box-sizing: border-box;
        overflow: hidden;
      }

      .property-group:last-child {
        margin-bottom: 0;
      }

      .property-group label {
        display: block;
        font-weight: 500;
        margin-bottom: 4px;
        color: var(--primary-text-color);
      }

      .property-input,
      .property-select {
        width: 100%;
        padding: 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        box-sizing: border-box;
        max-width: 100%;
      }

      .property-input:focus,
      .property-select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .property-hint {
        display: block;
        font-size: 11px;
        color: var(--secondary-text-color);
        margin-top: 4px;
        line-height: 1.3;
      }

      .checkbox-label {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: var(--secondary-text-color);
        cursor: pointer;
      }

      .button-group {
        display: flex;
        gap: 4px;
      }

      .property-btn {
        flex: 1;
        padding: 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .property-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .property-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .spacing-group {
        margin-bottom: 20px;
      }

      .spacing-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .spacing-group h4 {
        margin: 0;
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      .lock-button {
        padding: 6px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 32px;
        height: 32px;
      }

      .lock-button:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .lock-button.locked {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .spacing-fields-desktop {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 12px;
      }

      .spacing-field {
        display: flex;
        flex-direction: column;
      }

      .spacing-field label {
        font-size: 12px;
        font-weight: 500;
        color: var(--secondary-text-color);
        margin-bottom: 4px;
        text-align: center;
      }

      .spacing-input {
        width: 100%;
        padding: 6px 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 12px;
        text-align: center;
        box-sizing: border-box;
        max-width: 100%;
      }

      .spacing-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .spacing-input.locked {
        background: var(--disabled-color);
        color: var(--secondary-text-color);
        cursor: not-allowed;
        opacity: 0.6;
      }

      .spacing-input.locked:focus {
        border-color: var(--divider-color);
        box-shadow: none;
      }

      @media (max-width: 768px) {
        .spacing-fields-desktop {
          grid-template-columns: 1fr 1fr;
          gap: 8px;
        }
      }

      .spacing-grid,
      .position-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
        align-items: center;
        max-width: 150px;
        margin: 0 auto;
      }

      .spacing-row,
      .position-row {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 8px;
        align-items: center;
      }

      .spacing-center,
      .position-center {
        width: 40px;
        height: 32px;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        font-weight: bold;
        font-size: 11px;
      }

      .spacing-grid input,
      .position-grid input {
        width: 100%;
        text-align: center;
        padding: 4px 8px;
        font-size: 12px;
      }

      /* Property sections */
      .property-section {
        margin-bottom: 24px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--divider-color);
      }

      .property-section:last-child {
        border-bottom: none;
        margin-bottom: 0;
      }

      .property-section h5 {
        margin: 0 0 16px 0;
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-text-color);
        padding-bottom: 8px;
        border-bottom: 1px solid var(--primary-color);
        display: inline-block;
      }

      /* Grid layouts */
      .two-column-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
        margin-bottom: 16px;
      }

      .three-column-grid {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 12px;
        margin-bottom: 16px;
      }

      @media (max-width: 768px) {
        .two-column-grid,
        .three-column-grid {
          grid-template-columns: 1fr;
          gap: 12px;
        }
      }

      /* Animation keyframes for intro/outro animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }

      @keyframes slideInUp {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideOutUp {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInDown {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideOutDown {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(100%);
          opacity: 0;
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutLeft {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      @keyframes zoomIn {
        from {
          transform: scale(0.3);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes zoomOut {
        from {
          transform: scale(1);
          opacity: 1;
        }
        to {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes bounceOut {
        20% {
          transform: scale(0.9);
        }
        50%,
        55% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes flipInX {
        from {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateX(-20deg);
        }
        60% {
          transform: perspective(400px) rotateX(10deg);
        }
        80% {
          transform: perspective(400px) rotateX(-5deg);
        }
        to {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutX {
        from {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
      }

      @keyframes flipInY {
        from {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateY(-20deg);
        }
        60% {
          transform: perspective(400px) rotateY(10deg);
        }
        80% {
          transform: perspective(400px) rotateY(-5deg);
        }
        to {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutY {
        from {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
      }

      @keyframes rotateIn {
        from {
          transform: rotate(-200deg);
          opacity: 0;
        }
        to {
          transform: rotate(0deg);
          opacity: 1;
        }
      }

      @keyframes rotateOut {
        from {
          transform: rotate(0deg);
          opacity: 1;
        }
        to {
          transform: rotate(200deg);
          opacity: 0;
        }
      }

      /* Color picker z-index fix - ensure above editor UI */
      ultra-color-picker {
        position: relative;
        z-index: ${h.Mu.COLOR_PICKER_CONTAINER};
      }

      /* Upload button styling */
      .upload-container {
        width: 100%;
      }

      .file-upload-row {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
      }

      .file-upload-button {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 120px;
      }

      .file-upload-button:hover {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      .button-content {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .button-label {
        font-size: 14px;
        font-weight: 500;
      }

      .path-display {
        flex: 1;
        min-width: 0;
      }

      .uploaded-path {
        color: var(--primary-text-color);
        font-size: 12px;
        word-break: break-all;
      }

      .no-file {
        color: var(--secondary-text-color);
        font-size: 12px;
        font-style: italic;
      }

      /* Attribute value selection styling */
      .attribute-value-selection {
        display: flex;
        flex-direction: column;
        gap: 8px;
        position: relative;
        margin-bottom: 8px;
      }

      .attribute-value-select {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--primary-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        box-sizing: border-box;
        appearance: menulist;
        cursor: pointer;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
        max-height: 200px;
        overflow-y: auto;
      }

      .attribute-value-select:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
      }

      .attribute-value-select option {
        padding: 8px;
      }

      /* Enhanced attribute mode styling */
      .attribute-mode {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .attribute-mode-container {
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        padding: 12px;
        border-radius: 4px;
        border-left: 3px solid var(--primary-color);
        margin-bottom: 16px;
      }

      .trigger-type-indicator {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        margin: 8px 0;
        border-radius: 4px;
        font-weight: 500;
      }

      .attribute-mode-indicator {
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.1);
        border-left: 3px solid var(--primary-color);
        color: var(--primary-color);
      }

      .state-mode-indicator {
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.1);
        border-left: 3px solid var(--info-color, #03a9f4);
        color: var(--info-color, #03a9f4);
      }

      .attribute-mode-select {
        border-color: var(--primary-color);
      }

      .attribute-value-container {
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        padding: 16px;
        border-radius: 8px;
        border-left: 3px solid var(--primary-color);
        margin-top: 16px;
      }

      .attribute-value-container label {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--primary-color);
        font-weight: 600;
        margin-bottom: 8px;
      }

      .attribute-value-selection {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 12px;
        border: 1px solid var(--primary-color);
        border-radius: 4px;
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        margin-top: 8px;
      }

      .attribute-value-input {
        border-color: var(--primary-color);
        border-width: 2px;
      }

      .attribute-value-dropdown-container {
        background: white;
        padding: 12px;
        border-radius: 4px;
        border: 1px dashed var(--primary-color);
        position: relative;
        overflow: hidden;
      }

      .attribute-value-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--primary-color);
        margin-bottom: 4px;
      }

      .attribute-value-hint {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        margin-top: 8px;
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.05);
        padding: 8px;
        border-radius: 4px;
      }

      /* State mode styling */
      .state-value-container {
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.05);
        padding: 16px;
        border-radius: 8px;
        border-left: 3px solid var(--info-color, #03a9f4);
        margin-top: 16px;
      }

      .state-value-container label {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--info-color, #03a9f4);
        font-weight: 600;
        margin-bottom: 8px;
      }

      .state-value-selection {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 12px;
        border: 1px solid var(--info-color, #03a9f4);
        border-radius: 4px;
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.05);
        margin-top: 8px;
      }

      .state-value-input {
        border-color: var(--info-color, #03a9f4);
        border-width: 2px;
      }

      .state-value-dropdown-container {
        background: white;
        padding: 12px;
        border-radius: 4px;
        border: 1px dashed var(--info-color, #03a9f4);
        position: relative;
        overflow: hidden;
      }

      .state-value-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--info-color, #03a9f4);
        margin-bottom: 4px;
      }

      .state-value-hint {
        display: flex;
        align-items: flex-start;
        gap: 8px;
        margin-top: 8px;
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.05);
        padding: 8px;
        border-radius: 4px;
      }

      .state-value-hint ha-icon {
        color: var(--info-color, #03a9f4);
        flex-shrink: 0;
      }

      .attribute-value-hint ha-icon,
      .state-value-hint ha-icon {
        color: currentColor;
        flex-shrink: 0;
      }

      /* Visual feedback animations */
      @keyframes success-pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(var(--rgb-success-color, 76, 175, 80), 0.7);
        }
        70% {
          box-shadow: 0 0 0 10px rgba(var(--rgb-success-color, 76, 175, 80), 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(var(--rgb-success-color, 76, 175, 80), 0);
        }
      }

      .change-success {
        animation: success-pulse 0.5s ease-in-out;
        border-color: var(--success-color, #4caf50) !important;
        box-shadow: 0 0 0 1px var(--success-color, #4caf50);
        transition: all 0.3s ease;
      }

      .attribute-mode-select.change-success,
      .state-mode-select.change-success {
        border-width: 2px;
      }

      .select-attribute-first {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px;
        color: var(--warning-color, #ff9800);
        font-style: italic;
        text-align: center;
        background: rgba(var(--rgb-warning-color, 255, 152, 0), 0.05);
        border: 1px dashed var(--warning-color, #ff9800);
        border-radius: 4px;
      }

      /* Mode switch animation */
      @keyframes highlight-fade {
        0% {
          background-color: rgba(var(--rgb-success-color, 76, 175, 80), 0.2);
        }
        100% {
          background-color: transparent;
        }
      }

      .trigger-type-indicator {
        animation: highlight-fade 1.5s ease-out;
      }

      /* Additional highlight animation for mode switches */
      @keyframes border-pulse {
        0% {
          border-left-width: 3px;
        }
        50% {
          border-left-width: 6px;
        }
        100% {
          border-left-width: 3px;
        }
      }

      .attribute-mode-indicator {
        animation: border-pulse 1s ease-in-out;
      }

      .state-mode-indicator {
        animation: border-pulse 1s ease-in-out;
      }

      /* Visual transitions for UI state changes */
      .property-select,
      .property-input,
      .attribute-value-select,
      .state-value-select {
        transition:
          border-color 0.3s ease,
          box-shadow 0.3s ease,
          background-color 0.3s ease;
      }

      /* Value selection feedback */
      .attribute-value-select:focus,
      .state-value-select:focus {
        border-width: 2px;
        transform: translateY(-1px);
      }

      /* Attribute mode specific animations */
      .attribute-mode-select::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(var(--rgb-primary-color, 0, 140, 255), 0.1);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .attribute-mode-select:focus::after {
        opacity: 1;
      }

      /* State mode specific animations */
      .state-value-select::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(var(--rgb-info-color, 3, 169, 244), 0.1);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .state-value-select:focus::after {
        opacity: 1;
      }

      /* Animation classes */
      .fadeIn {
        animation: fadeIn var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .fadeOut {
        animation: fadeOut var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInUp {
        animation: slideInUp var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutUp {
        animation: slideOutUp var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInDown {
        animation: slideInDown var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutDown {
        animation: slideOutDown var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInLeft {
        animation: slideInLeft var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutLeft {
        animation: slideOutLeft var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideInRight {
        animation: slideInRight var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .slideOutRight {
        animation: slideOutRight var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .zoomIn {
        animation: zoomIn var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .zoomOut {
        animation: zoomOut var(--animation-duration, 0.3s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .bounceIn {
        animation: bounceIn var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .bounceOut {
        animation: bounceOut var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipInX {
        animation: flipInX var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipOutX {
        animation: flipOutX var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipInY {
        animation: flipInY var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .flipOutY {
        animation: flipOutY var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .rotateIn {
        animation: rotateIn var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }
      .rotateOut {
        animation: rotateOut var(--animation-duration, 0.6s) var(--animation-timing, ease)
          var(--animation-delay, 0s) both;
      }

      /* Input with reset button styles */
      .input-with-reset {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
      }

      .input-with-reset .property-input {
        flex: 1;
      }

      .reset-btn {
        width: 32px;
        height: 32px;
        min-width: 32px;
        padding: 0;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .reset-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .reset-btn ha-icon {
        font-size: 16px;
      }
    `}_getBackgroundSizeDropdownValue(e){return e?["cover","contain","auto"].includes(e)?e:"custom":"cover"}_getCustomSizeValue(e,t){if(!e||["cover","contain","auto"].includes(e))return"";if("custom"===e)return"";const i=e.split(" ");return"width"===t?i[0]||"":"height"===t&&(i[1]||i[0])||""}};m.CLIPBOARD_KEY="ultra-card-design-clipboard",m._lastAnimationTriggerType=null,g([(0,a.MZ)({attribute:!1})],m.prototype,"hass",void 0),g([(0,a.MZ)({attribute:!1})],m.prototype,"designProperties",void 0),g([(0,a.MZ)({type:Function})],m.prototype,"onUpdate",void 0),g([(0,a.wk)()],m.prototype,"_expandedSections",void 0),g([(0,a.wk)()],m.prototype,"_marginLocked",void 0),g([(0,a.wk)()],m.prototype,"_paddingLocked",void 0),g([(0,a.wk)()],m.prototype,"_clipboardProperties",void 0),m=o=g([(0,a.EM)("ultra-global-design-tab")],m);var f=i(2371),_=i(6682),v=i(927),b=i(5728),y=i(1787),x=i(9643),k=i(933),w=i(7073),S=i(8460),O=i(8525);i(8287),i(9956),e=i.hmd(e);var A=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};const C=[{value:"default",label:"– Default –",category:"default"}],$=[{value:"Montserrat",label:"Montserrat (used as default font)",category:"typography"}],T=[{value:"Georgia, serif",label:"Georgia, serif",category:"websafe"},{value:"Palatino Linotype, Book Antiqua, Palatino, serif",label:"Palatino Linotype, Book Antiqua, Palatino, serif",category:"websafe"},{value:"Times New Roman, Times, serif",label:"Times New Roman, Times, serif",category:"websafe"},{value:"Arial, Helvetica, sans-serif",label:"Arial, Helvetica, sans-serif",category:"websafe"},{value:"Impact, Charcoal, sans-serif",label:"Impact, Charcoal, sans-serif",category:"websafe"},{value:"Lucida Sans Unicode, Lucida Grande, sans-serif",label:"Lucida Sans Unicode, Lucida Grande, sans-serif",category:"websafe"},{value:"Tahoma, Geneva, sans-serif",label:"Tahoma, Geneva, sans-serif",category:"websafe"},{value:"Trebuchet MS, Helvetica, sans-serif",label:"Trebuchet MS, Helvetica, sans-serif",category:"websafe"},{value:"Verdana, Geneva, sans-serif",label:"Verdana, Geneva, sans-serif",category:"websafe"},{value:"Courier New, Courier, monospace",label:"Courier New, Courier, monospace",category:"websafe"},{value:"Lucida Console, Monaco, monospace",label:"Lucida Console, Monaco, monospace",category:"websafe"}];let z=class extends n.WF{constructor(){super(...arguments),this._showModuleSelector=!1,this._selectedRowIndex=-1,this._selectedColumnIndex=-1,this._showModuleSettings=!1,this._selectedModule=null,this._activeModuleTab="general",this._activeDesignSubtab="text",this._showRowSettings=!1,this._selectedRowForSettings=-1,this._activeRowTab="general",this._showColumnSettings=!1,this._selectedColumnForSettings=null,this._activeColumnTab="general",this._showColumnLayoutSelector=!1,this._selectedRowForLayout=-1,this._collapsedPreviewModules=new Set,this._isRowColumnPreviewCollapsed=!1,this._collapsedConditionIds=new Set,this._collapsedRows=new Set,this._collapsedColumns=new Set,this._isPreviewPinned=!1,this._draggingCondition=null,this._globalExternalCardCount=0,this._activeModuleSelectorTab="modules",this._activeModuleCategoryTab="standard",this._selectedPresetCategory="all",this._showFavoriteDialog=!1,this._favoriteRowToSave=null,this._showImportDialog=!1,this._openMoreMenuRowIndex=-1,this._undoStack=[],this._redoStack=[],this._maxHistorySize=50,this._isUndoRedoAction=!1,this._lastTemplateUpdate=0,this._savedScrollPosition=null,this._shouldRestoreScroll=!1,this._draggedItem=null,this._dropTarget=null,this._selectedLayoutModuleIndex=-1,this._selectedNestedChildIndex=-1,this._showLayoutChildSettings=!1,this._selectedLayoutChild=null,this._popupDragState={isDragging:!1,dragStartX:0,dragStartY:0,initialX:0,initialY:0,element:null},this._popupResizeState={isResizing:!1,resizeStartX:0,resizeStartY:0,initialWidth:0,initialHeight:0,element:null},this._windowResizeListener=null,this._resizeTimeout=null,this._handlePopupDrag=e=>{if(!this._popupDragState.isDragging||!this._popupDragState.element)return;const t=e.clientX-this._popupDragState.dragStartX,i=e.clientY-this._popupDragState.dragStartY,o=this._popupDragState.initialX+t,n=this._popupDragState.initialY+i,a=window.innerWidth-this._popupDragState.element.offsetWidth,r=window.innerHeight-this._popupDragState.element.offsetHeight,s=Math.max(0,Math.min(o,a)),l=Math.max(0,Math.min(n,r));this._popupDragState.element.style.left=`${s}px`,this._popupDragState.element.style.top=`${l}px`,this._popupDragState.element.style.transform="none"},this._endPopupDrag=()=>{this._popupDragState.element&&this._popupDragState.element.classList.remove("popup-dragging"),this._popupDragState={isDragging:!1,dragStartX:0,dragStartY:0,initialX:0,initialY:0,element:null},document.removeEventListener("mousemove",this._handlePopupDrag),document.removeEventListener("mouseup",this._endPopupDrag)},this._handlePopupResize=e=>{if(!this._popupResizeState.isResizing||!this._popupResizeState.element)return;const t=e.clientX-this._popupResizeState.resizeStartX,i=e.clientY-this._popupResizeState.resizeStartY,o=this._popupResizeState.initialWidth+t,n=this._popupResizeState.initialHeight+i,a=.9*window.innerWidth,r=.9*window.innerHeight,s=Math.min(o,a),l=Math.min(n,r);this._popupResizeState.element.style.setProperty("width",`${s}px`,"important"),this._popupResizeState.element.style.setProperty("height",`${l}px`,"important")},this._endPopupResize=()=>{this._popupResizeState.element&&this._popupResizeState.element.classList.remove("popup-resizing"),this._popupResizeState={isResizing:!1,resizeStartX:0,resizeStartY:0,initialWidth:0,initialHeight:0,element:null},document.removeEventListener("mousemove",this._handlePopupResize),document.removeEventListener("mouseup",this._endPopupResize)},this.COLUMN_LAYOUTS=[{id:"1-col",name:"1",proportions:[1],columnCount:1},{id:"1-2-1-2",name:"1/2 + 1/2",proportions:[1,1],columnCount:2},{id:"1-3-2-3",name:"1/3 + 2/3",proportions:[1,2],columnCount:2},{id:"2-3-1-3",name:"2/3 + 1/3",proportions:[2,1],columnCount:2},{id:"2-5-3-5",name:"2/5 + 3/5",proportions:[2,3],columnCount:2},{id:"3-5-2-5",name:"3/5 + 2/5",proportions:[3,2],columnCount:2},{id:"1-3-1-3-1-3",name:"1/3 + 1/3 + 1/3",proportions:[1,1,1],columnCount:3},{id:"1-4-1-2-1-4",name:"1/4 + 1/2 + 1/4",proportions:[1,2,1],columnCount:3},{id:"1-5-3-5-1-5",name:"1/5 + 3/5 + 1/5",proportions:[1,3,1],columnCount:3},{id:"1-6-2-3-1-6",name:"1/6 + 2/3 + 1/6",proportions:[1,4,1],columnCount:3},{id:"1-4-1-4-1-4-1-4",name:"1/4 + 1/4 + 1/4 + 1/4",proportions:[1,1,1,1],columnCount:4},{id:"1-5-1-5-1-5-1-5",name:"1/5 + 1/5 + 1/5 + 1/5",proportions:[1,1,1,1],columnCount:4},{id:"1-6-1-6-1-6-1-6",name:"1/6 + 1/6 + 1/6 + 1/6",proportions:[1,1,1,1],columnCount:4},{id:"1-8-1-4-1-4-1-8",name:"1/8 + 1/4 + 1/4 + 1/8",proportions:[1,2,2,1],columnCount:4},{id:"1-5-1-5-1-5-1-5-1-5",name:"1/5 + 1/5 + 1/5 + 1/5 + 1/5",proportions:[1,1,1,1,1],columnCount:5},{id:"1-6-1-6-1-3-1-6-1-6",name:"1/6 + 1/6 + 1/3 + 1/6 + 1/6",proportions:[1,1,2,1,1],columnCount:5},{id:"1-8-1-4-1-4-1-4-1-8",name:"1/8 + 1/4 + 1/4 + 1/4 + 1/8",proportions:[1,2,2,2,1],columnCount:5},{id:"1-6-1-6-1-6-1-6-1-6-1-6",name:"1/6 + 1/6 + 1/6 + 1/6 + 1/6 + 1/6",proportions:[1,1,1,1,1,1],columnCount:6}],this._isRefreshingGlobalCount=!1}connectedCallback(){super.connectedCallback(),this._templateUpdateListener=()=>{const e=Date.now();if(e-this._lastTemplateUpdate<100)return clearTimeout(this._templateUpdateTimer),void(this._templateUpdateTimer=window.setTimeout((()=>{this._performTemplateUpdate()}),100));this._lastTemplateUpdate=e,this._performTemplateUpdate()},window.addEventListener("ultra-card-template-update",this._templateUpdateListener),window.addEventListener("ultra-card-slider-update",this._templateUpdateListener),this._windowResizeListener=()=>{this._handleWindowResize()},window.addEventListener("resize",this._windowResizeListener),this._documentClickListener=e=>{-1!==this._openMoreMenuRowIndex&&(e.target.closest(".row-more-container")||(this._openMoreMenuRowIndex=-1))},document.addEventListener("click",this._documentClickListener),this._keydownListener=e=>{const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;const i=navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey;i&&"z"===e.key&&!e.shiftKey?(e.preventDefault(),this._undo()):i&&("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),this._redo())},document.addEventListener("keydown",this._keydownListener),c.k.injectHoverEffectStyles(this.shadowRoot),this._updateHoverEffectStyles()}_isMobileDevice(){const e=window.innerWidth<=768||window.innerHeight<=768,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),i="ontouchstart"in window||navigator.maxTouchPoints>0;return e||t||i&&window.innerWidth<=1024}_handleWindowResize(){clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout((()=>{document.querySelectorAll(".draggable-popup").forEach((e=>{const t=e;null!==t.offsetParent&&this._repositionPopup(t)}))}),100)}_repositionPopup(e){const t=this._isMobileDevice(),i=e.getBoundingClientRect(),o=window.innerWidth,n=window.innerHeight;if(t)return e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.marginLeft="",e.style.marginTop="",e.style.width="",e.style.height="",e.style.maxWidth="",void(e.style.maxHeight="");let a=i.left,r=i.top;i.right>o&&(a=o-i.width-20),a<20&&(a=20),i.bottom>n&&(r=n-i.height-20),r<20&&(r=20),a===i.left&&r===i.top||(e.style.position="fixed",e.style.left=`${a}px`,e.style.top=`${r}px`,e.style.transform="none",e.style.marginLeft="0",e.style.marginTop="0")}_initializePopupPosition(e){this._isMobileDevice()?(e.style.marginLeft="",e.style.marginTop="",e.style.left="",e.style.top="",e.style.transform="",e.style.width="",e.style.height=""):setTimeout((()=>{this._repositionPopup(e)}),0)}_togglePreviewCollapsed(e){e&&e.stopPropagation();const t=this._getSelectedModuleKey();t&&(this._collapsedPreviewModules.has(t)?this._collapsedPreviewModules.delete(t):this._collapsedPreviewModules.add(t),this.requestUpdate())}_getSelectedModuleKey(){if(!this._selectedModule)return null;const{rowIndex:e,columnIndex:t,moduleIndex:i}=this._selectedModule;return`${e}-${t}-${i}`}_isCurrentModulePreviewCollapsed(){const e=this._getSelectedModuleKey();return!!e&&this._collapsedPreviewModules.has(e)}_toggleRowColumnPreviewCollapsed(e){e&&e.stopPropagation(),this._isRowColumnPreviewCollapsed=!this._isRowColumnPreviewCollapsed}_toggleConditionExpanded(e){const t=new Set(this._collapsedConditionIds);t.has(e)?t.delete(e):t.add(e),this._collapsedConditionIds=t}_toggleRowCollapsed(e,t){t&&(t.stopPropagation(),t.preventDefault());const i=new Set(this._collapsedRows);i.has(e)?i.delete(e):i.add(e),this._collapsedRows=i,this.requestUpdate()}_toggleColumnCollapsed(e,t,i){i&&(i.stopPropagation(),i.preventDefault());const o=`${e}-${t}`,n=new Set(this._collapsedColumns);n.has(o)?n.delete(o):n.add(o),this._collapsedColumns=n,this.requestUpdate()}_reorderArray(e,t,i){if(t===i)return e;const o=[...e],[n]=o.splice(t,1),a=t<i?i-1:i;return o.splice(a,0,n),o}_onConditionDragStart(e,t,i){e.stopPropagation(),this._draggingCondition={scope:t,fromIndex:i},e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",String(i)))}_onConditionDragOver(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}_onConditionDrop(e,t,i,o,n){if(e.preventDefault(),e.stopPropagation(),!this._draggingCondition||this._draggingCondition.scope!==t)return void(this._draggingCondition=null);const a=this._draggingCondition.fromIndex,r=o()||[];n(this._reorderArray(r,a,i)),this._draggingCondition=null}_resolvePreviewBackgroundImageCSS(e){var t,i;const o=this.hass,n=null==e?void 0:e.background_image_type,a=null==e?void 0:e.background_image;if("none"===n)return"none";if(!n&&a)return`url("${o?(0,p.V)(o,a):a}")`;if("upload"===n||"url"===n)return a?`url("${o?(0,p.V)(o,a):a}")`:"none";if("entity"===n){const n=null==e?void 0:e.background_image_entity;if(n&&o&&o.states[n]){const e=o.states[n];let a="";if((null===(t=e.attributes)||void 0===t?void 0:t.entity_picture)?a=e.attributes.entity_picture:(null===(i=e.attributes)||void 0===i?void 0:i.image)?a=e.attributes.image:"string"==typeof e.state&&(a=e.state),a)return`url("${(0,p.V)(o,a)}")`}return"none"}return"none"}disconnectedCallback(){super.disconnectedCallback(),this._endPopupDrag(),this._endPopupResize(),this._templateUpdateListener&&(window.removeEventListener("ultra-card-template-update",this._templateUpdateListener),window.removeEventListener("ultra-card-slider-update",this._templateUpdateListener),this._templateUpdateListener=void 0),this._windowResizeListener&&(window.removeEventListener("resize",this._windowResizeListener),this._windowResizeListener=null),this._resizeTimeout&&(clearTimeout(this._resizeTimeout),this._resizeTimeout=null),this._documentClickListener&&(document.removeEventListener("click",this._documentClickListener),this._documentClickListener=void 0),this._keydownListener&&(document.removeEventListener("keydown",this._keydownListener),this._keydownListener=void 0),this._templateUpdateTimer&&(clearTimeout(this._templateUpdateTimer),this._templateUpdateTimer=void 0),c.k.removeHoverEffectStyles(this.shadowRoot)}_performTemplateUpdate(){this.requestUpdate()}_addFixedMenuPositionToSelects(){requestAnimationFrame((()=>{var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelectorAll("ha-select");null==t||t.forEach((e=>{e.hasAttribute("fixedmenuposition")||e.setAttribute("fixedmenuposition","")}))}))}_startPopupDrag(e,t){if(this._isMobileDevice())return;e.preventDefault();const i=t.getBoundingClientRect();t.style.position="fixed",t.style.left=`${i.left}px`,t.style.top=`${i.top}px`,t.style.transform="none",t.style.marginLeft="0",t.style.marginTop="0",this._popupDragState={isDragging:!0,dragStartX:e.clientX,dragStartY:e.clientY,initialX:i.left,initialY:i.top,element:t},document.addEventListener("mousemove",this._handlePopupDrag),document.addEventListener("mouseup",this._endPopupDrag),t.classList.add("popup-dragging")}_startPopupResize(e,t){if(this._isMobileDevice())return;e.preventDefault(),e.stopPropagation();const i=window.getComputedStyle(t),o=i.transform&&"none"!==i.transform,n=t.getBoundingClientRect();o&&(t.style.position="fixed",t.style.left=`${n.left}px`,t.style.top=`${n.top}px`,t.style.transform="none",t.style.marginLeft="0",t.style.marginTop="0"),this._popupResizeState={isResizing:!0,resizeStartX:e.clientX,resizeStartY:e.clientY,initialWidth:n.width,initialHeight:n.height,element:t},document.addEventListener("mousemove",this._handlePopupResize),document.addEventListener("mouseup",this._endPopupResize),t.classList.add("popup-resizing")}_createColumnIconHTML(e){const t=e.reduce(((e,t)=>e+t),0);return`<div style="display: flex; width: 100%; height: 16px; gap: 2px;">${e.map(((e,i)=>`<div style="width: ${e/t*100}%; height: 16px; background: #2196F3; border-radius: 2px; ${i>0?"margin-left: 2px;":""}"></div>`)).join("")}</div>`}_createSimpleIcon(e){return e.map((e=>"█".repeat(e))).join(" ")}_getLayoutsForColumnCount(e){const t=Math.min(e,6);return this.COLUMN_LAYOUTS.filter((e=>e.columnCount===t))}_migrateLegacyLayoutId(e){return{"50-50":"1-2-1-2","30-70":"1-3-2-3","70-30":"2-3-1-3","33-33-33":"1-3-1-3-1-3","25-50-25":"1-4-1-2-1-4","20-60-20":"1-5-3-5-1-5","25-25-25-25":"1-4-1-4-1-4-1-4"}[e]||e}_ensureLayout(){return this.config.layout&&this.config.layout.rows?this.config.layout:{rows:[{id:`row-${Date.now()}`,columns:[{id:`col-${Date.now()}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"}],column_layout:"1-col",design:{margin_top:"8px",margin_bottom:"8px"}}]}}_updateConfig(e){const t=Object.assign(Object.assign({},this.config),e);setTimeout((()=>{this._updateHoverEffectStyles()}),0);const i=new CustomEvent("config-changed",{detail:{config:t},bubbles:!0,composed:!0});this.dispatchEvent(i),setTimeout((()=>{window.dispatchEvent(new CustomEvent("ultra-card-template-update"))}),0)}_updateLayout(e){this._isUndoRedoAction||(this._saveStateToUndoStack(),this._redoStack=[]),this._updateConfig({layout:e})}_saveStateToUndoStack(){const e=this._ensureLayout(),t={rows:JSON.parse(JSON.stringify(e.rows))};this._undoStack.push(t),this._undoStack.length>this._maxHistorySize&&this._undoStack.shift()}_canUndo(){return this._undoStack.length>0}_canRedo(){return this._redoStack.length>0}_undo(){if(!this._canUndo())return;const e=this._ensureLayout(),t={rows:JSON.parse(JSON.stringify(e.rows))};this._redoStack.push(t);const i=this._undoStack.pop();this._isUndoRedoAction=!0,this._updateConfig({layout:i}),this._isUndoRedoAction=!1}_redo(){if(!this._canRedo())return;const e=this._ensureLayout(),t={rows:JSON.parse(JSON.stringify(e.rows))};this._undoStack.push(t);const i=this._redoStack.pop();this._isUndoRedoAction=!0,this._updateConfig({layout:i}),this._isUndoRedoAction=!1}_addRow(){const e=this._ensureLayout(),t={id:`row-${Date.now()}`,columns:[],column_layout:"1-col",design:{margin_top:"8px",margin_bottom:"8px"}},i={rows:[...e.rows,t]};this._updateLayout(i);try{b.O.trigger()}catch(e){}}_deleteRow(e){const t=this._ensureLayout();if(t.rows.length>1){const i={rows:t.rows.filter(((t,i)=>i!==e))};this._updateLayout(i)}}_duplicateRow(e){const t=this._ensureLayout(),i=t.rows[e];if(!i)return void console.error("Row to copy not found at index:",e);const o=Object.assign(Object.assign({},JSON.parse(JSON.stringify(i))),{id:`row-${Date.now()}`,columns:i.columns.map(((e,t)=>Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:`col-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`,modules:e.modules.map(((e,t)=>Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:`${e.type}-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`})))})))}),n=JSON.parse(JSON.stringify(t));n.rows.splice(e+1,0,o),this._updateLayout(n);try{b.O.trigger()}catch(e){}}_addColumn(e){const t=this._ensureLayout(),i=t.rows[e];if(!i)return void console.error("Row not found at index:",e);if(i.columns.length>=6)return;const o={id:`col-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"},n=i.columns.length+1,a=this._getLayoutsForColumnCount(n)[0],r=a?a.id:`repeat(${n}, 1fr)`,s={rows:t.rows.map(((t,i)=>i===e?Object.assign(Object.assign({},t),{columns:[...t.columns,o],column_layout:r}):t))};this._updateLayout(s)}_addColumnAfter(e,t){const i=this._ensureLayout(),o=i.rows[e];if(!o)return;if(o.columns.length>=6)return;const n={id:`col-${Date.now()}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"},a=o.columns.length+1,r=this._getLayoutsForColumnCount(a)[0],s=r?r.id:`repeat(${a}, 1fr)`,l={rows:i.rows.map(((i,o)=>{if(o===e){const e=[...i.columns];return e.splice(t+1,0,n),Object.assign(Object.assign({},i),{columns:e,column_layout:s})}return i}))};this._updateLayout(l)}_duplicateColumn(e,t){const i=this._ensureLayout(),o=i.rows[e];if(!o||!o.columns[t])return void console.error("Row or column not found:",e,t);if(o.columns.length>=6)return;const n=o.columns[t],a=Object.assign(Object.assign({},JSON.parse(JSON.stringify(n))),{id:`col-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,modules:n.modules.map(((e,t)=>Object.assign(Object.assign({},JSON.parse(JSON.stringify(e))),{id:`${e.type}-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`})))}),r=o.columns.length+1,s=this._getLayoutsForColumnCount(r)[0],l=s?s.id:`repeat(${r}, 1fr)`,d=JSON.parse(JSON.stringify(i));d.rows[e].columns.splice(t+1,0,a),d.rows[e].column_layout=l,this._updateLayout(d)}_deleteColumn(e,t){const i=this._ensureLayout(),o=i.rows[e];if(!o)return void console.error("Row not found at index:",e);if(!o.columns[t])return void console.error("Column not found at index:",t);const n=o.columns.length-1,a=n>0?this._getLayoutsForColumnCount(n)[0]:null,r=a?a.id:"1-col",s={rows:i.rows.map(((i,o)=>o===e?Object.assign(Object.assign({},i),{columns:i.columns.filter(((e,i)=>i!==t)),column_layout:r}):i))};this._updateLayout(s)}_openColumnLayoutSelector(e){this._selectedRowForLayout=e,this._showColumnLayoutSelector=!0}_changeColumnLayout(e){if(-1===this._selectedRowForLayout)return;const t=this._ensureLayout(),i=t.rows[this._selectedRowForLayout];if(!i)return;const o=this.COLUMN_LAYOUTS.find((t=>t.id===e));if(!o)return;const n=o.columnCount,a=i.columns.length,r=JSON.parse(JSON.stringify(t)),s=r.rows[this._selectedRowForLayout];if(n===a)s.column_layout=e;else if(n>a){const t=[...s.columns];for(let e=a;e<n;e++)t.push({id:`col-${Date.now()}-${e}-${Math.random().toString(36).substr(2,9)}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"});s.columns=t,s.column_layout=e}else{const t=[],i=[];s.columns.forEach((e=>{e.modules&&e.modules.length>0&&i.push(...e.modules)}));for(let e=0;e<n;e++)e<a?t.push(Object.assign(Object.assign({},s.columns[e]),{modules:[]})):t.push({id:`col-${Date.now()}-${e}-${Math.random().toString(36).substr(2,9)}`,modules:[],vertical_alignment:"center",horizontal_alignment:"center"});i.length>0&&(1===n?t[0].modules=i:i.forEach(((e,i)=>{t[i%n].modules.push(e)}))),s.columns=t,s.column_layout=e}this._updateLayout(r),this._showColumnLayoutSelector=!1,this._selectedRowForLayout=-1}_getCurrentLayoutText(e){const t=e.column_layout,i=this.COLUMN_LAYOUTS.find((e=>e.id===t));return i?i.name:`${e.columns.length} Column${1!==e.columns.length?"s":""}`}_getCurrentLayoutDisplay(e){const t=e.columns.length,i=e.column_layout,o=this.COLUMN_LAYOUTS.find((e=>e.id===i));if(o)return this._createSimpleIcon(o.proportions);switch(t){case 1:return"█";case 2:return"█ █";case 3:return"█ █ █";case 4:return"█ █ █ █";default:return"█ ".repeat(Math.min(t,6)).trim()}}_openModuleSelector(e,t){const i=this._ensureLayout().rows[e];i&&i.columns&&0!==i.columns.length||(this._addColumn(e),t=0),this._selectedRowIndex=e,this._selectedColumnIndex=t,this._selectedLayoutModuleIndex=-1,this._selectedNestedChildIndex=-1,this._showModuleSelector=!0}_addModule(e){var t,i,o,n;try{const o=S.x.checkIntegrationAuth(this.hass);if("pro"!==(null===(t=null==o?void 0:o.subscription)||void 0===t?void 0:t.tier)||"active"!==(null===(i=null==o?void 0:o.subscription)||void 0===i?void 0:i.status)){const t=(0,y.Y)(e)?1:0;if(b.O.wouldExceedLimit(this.hass,t))return void this._showToast("Limit reached: 5 third-party modules per dashboard. Upgrade to Pro to add more.","error")}}catch(e){}if(-1===this._selectedRowIndex||-1===this._selectedColumnIndex)return void console.error("No row or column selected");const a=this._ensureLayout();if(!a.rows[this._selectedRowIndex])return void console.error("Selected row does not exist:",this._selectedRowIndex);const r=a.rows[this._selectedRowIndex];if(!r.columns[this._selectedColumnIndex])return void console.error("Selected column does not exist:",this._selectedColumnIndex);const l=r.columns[this._selectedColumnIndex],d=(null===(n=null===(o=this.hass)||void 0===o?void 0:o.locale)||void 0===n?void 0:n.language)||"en";let c,p;switch(e){case"text":c={id:`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"text",text:(0,u.kg)("editor.modules.sample_text",d,"Sample Text"),font_size:16,color:"var(--primary-text-color)"},delete c.name,delete c.title;break;case"separator":c={id:`separator-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"separator",thickness:1,color:"var(--divider-color)"},delete c.name,delete c.title,delete c.label;break;case"image":c={id:`image-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"image",image_type:"none"},delete c.name,delete c.title,delete c.label;break;case"markdown":c={id:`markdown-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"markdown",content:"This is a markdown module that supports:\n\n- Italic and bold text\n- Links\n- inline code\n- Lists and more!",markdown_content:"This is a markdown module that supports:\n\n- Italic and bold text\n- Links\n- inline code\n- Lists and more!"},delete c.name,delete c.title,delete c.label;break;case"bar":c={id:`bar-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"bar",entity:"sensor.battery_level",bar_color:"var(--primary-color)",background_color:"transparent",height:20,show_value:!0},delete c.name,delete c.title,delete c.label;break;case"button":c={id:`button-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"button",label:"Click Me",button_text:"Click Me",tap_action:{action:"more-info"}},delete c.name,delete c.title;break;case"info":c={id:`info-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"info",info_entities:[{entity:"sensor.temperature",name:"Temperature",icon:"mdi:thermometer"}]},delete c.name,delete c.title,delete c.label;break;default:try{const t=(0,s.oD)().createDefaultModule(e);if(t){c=t,delete c.name,delete c.title,delete c.label;break}}catch(e){console.error("Module registry failed:",e)}c={id:`text-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"text",text:"Unknown Module Type",font_size:16,color:"var(--primary-text-color)"}}if(p=this._selectedLayoutModuleIndex>=0?{rows:a.rows.map(((e,t)=>t===this._selectedRowIndex?Object.assign(Object.assign({},e),{columns:e.columns.map(((e,t)=>t===this._selectedColumnIndex?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===this._selectedLayoutModuleIndex){const t=e;return this._selectedNestedChildIndex>=0?Object.assign(Object.assign({},t),{modules:t.modules.map(((e,t)=>{if(t===this._selectedNestedChildIndex){const t=e;return Object.assign(Object.assign({},t),{modules:[...t.modules||[],c]})}return e}))}):Object.assign(Object.assign({},t),{modules:[...t.modules||[],c]})}return e}))}):e))}):e))}:{rows:a.rows.map(((e,t)=>t===this._selectedRowIndex?Object.assign(Object.assign({},e),{columns:e.columns.map(((e,t)=>t===this._selectedColumnIndex?Object.assign(Object.assign({},e),{modules:[...e.modules||[],c]}):e))}):e))},this._updateLayout(p),this._showModuleSelector=!1,this._shouldAutoOpenSettings(e))if(this._selectedLayoutModuleIndex>=0);else{const e=l.modules.length;this._openModuleSettings(this._selectedRowIndex,this._selectedColumnIndex,e)}this._selectedRowIndex=-1,this._selectedColumnIndex=-1,this._selectedLayoutModuleIndex=-1,this._selectedNestedChildIndex=-1}_addPageBreakToSlider(e,t,i,o){const n=this._ensureLayout(),a=(0,s.oD)(),r=n.rows[e].columns[t].modules[i];if(!r||!r.modules||!r.modules[o])return void console.error("Parent layout or slider child not found");const l=r.modules[o];if(!l||"slider"!==l.type)return void console.error("Target is not a slider module");const d=a.createDefaultModule("pagebreak");if(!d)return void console.error("Could not create page break module");const c={rows:n.rows.map(((n,a)=>a===e?Object.assign(Object.assign({},n),{columns:n.columns.map(((e,n)=>n===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===i){const t=e;return Object.assign(Object.assign({},t),{modules:t.modules.map(((e,t)=>t===o?Object.assign(Object.assign({},e),{modules:[...e.modules||[],d]}):e))})}return e}))}):e))}):n))};this._updateLayout(c),this.requestUpdate()}_addPageBreakToColumnSlider(e,t,i){const o=this._ensureLayout(),n=(0,s.oD)(),a=o.rows[e].columns[t].modules[i];if(!a||"slider"!==a.type)return void console.error("Target is not a slider module");const r=n.createDefaultModule("pagebreak");if(!r)return void console.error("Could not create page break module");const l={rows:o.rows.map(((o,n)=>n===e?Object.assign(Object.assign({},o),{columns:o.columns.map(((e,o)=>o===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>t===i?Object.assign(Object.assign({},e),{modules:[...e.modules||[],r]}):e))}):e))}):o))};this._updateLayout(l),this.requestUpdate()}_addPreset(e){var t;try{const i=this._ensureLayout();if(!e.layout||!e.layout.rows||0===e.layout.rows.length)return console.error("Invalid preset layout:",e),console.error("Layout structure:",e.layout),console.error("Layout rows:",null===(t=e.layout)||void 0===t?void 0:t.rows),console.error("Full preset object:",e),void this._showToast(`Error: Invalid preset "${e.name}" - missing layout rows`,"error");console.log("Valid preset layout found:",e.layout),console.log("Layout rows structure:",e.layout.rows),console.log("First row structure:",e.layout.rows[0]);const o=[...i.rows];e.layout.rows.forEach(((e,t)=>{console.log(`Processing preset row ${t}:`,e);try{const i=this._cloneRowWithNewIds(e);console.log(`Successfully cloned row ${t}:`,i),o.push(i)}catch(e){throw console.error(`Failed to clone row ${t}:`,e),e}}));const n=Object.assign({rows:o},void 0!==i.gap&&{gap:i.gap});console.log("Final layout to apply:",n),console.log("Number of rows in final layout:",n.rows.length),this._updateLayout(n),this._showModuleSelector=!1,this._selectedLayoutModuleIndex=-1,this._selectedNestedChildIndex=-1,this._selectedRowIndex=-1,this._selectedColumnIndex=-1,this._showToast(`"${e.name}" preset added successfully!`,"success")}catch(e){console.error("Error adding preset:",e),this._showToast(`Error adding preset: ${e instanceof Error?e.message:"Unknown error"}`,"error")}}_addFavorite(e){const t=this._ensureLayout(),i=[...t.rows],o=this._cloneRowWithNewIds(e.row);i.push(o);const n=Object.assign({rows:i},void 0!==t.gap&&{gap:t.gap});this._updateLayout(n),this._showModuleSelector=!1,this._selectedLayoutModuleIndex=-1,this._selectedNestedChildIndex=-1,this._selectedRowIndex=-1,this._selectedColumnIndex=-1,this._showToast(`"${e.name}" favorite added successfully!`,"success")}_saveRowAsFavorite(e){const t=this._ensureLayout().rows[e];t&&(this._favoriteRowToSave=t,this._showFavoriteDialog=!0)}async _exportRow(e){const t=this._ensureLayout().rows[e];if(t)try{this._showToast("Exporting row to clipboard...","info"),await x.D.exportRowToClipboard(t,`Row ${e+1}`),this._showToast("Row exported to clipboard!","success")}catch(e){console.error("Failed to export row:",e),e instanceof Error&&"Export cancelled by user"===e.message?this._showToast("Export cancelled - privacy protection","info"):this._showToast("Failed to export row to clipboard","error")}}async _pasteRowFromClipboard(e){var t,i,o,n;try{this._showToast("Reading from clipboard...","info");let a,r=await x.D.importFromClipboard();if(r||(await new Promise((e=>setTimeout(e,100))),r=await x.D.importFromClipboard()),!r)return void this._showToast("No valid Ultra Card shortcode found. Please ensure you have copied a complete exported row/layout or try copying again.","error");let s="";if("ultra-card-row"===r.type&&r.data)a=r.data,s=(null===(t=r.metadata)||void 0===t?void 0:t.name)||"Imported Row";else{if("ultra-card-layout"!==r.type||!r.data)return void this._showToast(`Clipboard contains ${r.type} data, but row data is required`,"error");{const e=r.data;if(!(e.rows&&e.rows.length>0))return void this._showToast("Layout data does not contain any rows","error");a=e.rows[0],s=`${(null===(i=r.metadata)||void 0===i?void 0:i.name)||"Imported Layout"} (Row 1)`}}const l=this._cloneRowWithNewIds(a);try{const e=S.x.checkIntegrationAuth(this.hass);if("pro"!==(null===(o=null==e?void 0:e.subscription)||void 0===o?void 0:o.tier)||"active"!==(null===(n=null==e?void 0:e.subscription)||void 0===n?void 0:n.status)){const e=(l.columns||[]).reduce(((e,t)=>e+(t.modules||[]).reduce(((e,t)=>e+((0,y.Y)(t.type)?1:0)),0)),0);if(b.O.wouldExceedLimit(this.hass,e))return void this._showToast("Paste blocked: 5 third-party modules limit reached.","error")}}catch(e){}const d={rows:[...this._ensureLayout().rows]};d.rows.splice(e+1,0,l),this._updateLayout(d),this.requestUpdate(),this._showToast(`Row added successfully from "${s}"! Check below the current row.`,"success")}catch(e){console.error("Failed to paste row from clipboard:",e),e instanceof Error&&"NotAllowedError"===e.name?this._showToast("Clipboard access denied. Please check browser permissions.","error"):this._showToast("Failed to paste row from clipboard. Please try again.","error")}}async _exportFavorite(e){try{this._showToast("Exporting favorite to clipboard...","info"),await x.D.exportRowToClipboard(e.row,e.name),this._showToast("Favorite exported to clipboard!","success")}catch(e){console.error("Failed to export favorite:",e),e instanceof Error&&"Export cancelled by user"===e.message?this._showToast("Export cancelled - privacy protection","info"):this._showToast("Failed to export favorite to clipboard","error")}}_deleteFavorite(e){confirm("Are you sure you want to delete this favorite?")&&(v.B.removeFavorite(e),this._showToast("Favorite deleted","info"))}_cloneRowWithNewIds(e){try{const i=(t=e,"undefined"!=typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t))),o=Date.now(),n=Math.random().toString(36).substr(2,9);return i.id=`row-${o}-${n}`,i.design||(i.design={}),i.design.margin_top||i.design.margin_bottom||(i.design.margin_top="8px",i.design.margin_bottom="8px"),i.columns&&Array.isArray(i.columns)&&i.columns.forEach(((e,t)=>{e.id=`col-${o}-${t}-${n}`,e.modules&&Array.isArray(e.modules)&&e.modules.forEach(((e,t)=>{e.id=`${e.type}-${o}-${t}-${n}`}))})),i}catch(e){throw console.error("Error cloning row:",e),new Error(`Failed to clone row: ${e instanceof Error?e.message:"Unknown error"}`)}var t}_toggleMoreMenu(e){this._openMoreMenuRowIndex===e?this._openMoreMenuRowIndex=-1:this._openMoreMenuRowIndex=e}_showToast(e,t="info"){const i=document.createElement("div");i.className=`ultra-toast ultra-toast-${t}`,i.textContent=e,i.style.cssText=`\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      padding: 12px 24px;\n      background: var(--${"success"===t?"success":"error"===t?"error":"primary"}-color);\n      color: white;\n      border-radius: 8px;\n      z-index: ${h.Mu.TOAST_NOTIFICATION};\n      font-size: 14px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      opacity: 0;\n      transform: translateX(100%);\n      transition: all 0.3s ease;\n    `,document.body.appendChild(i),requestAnimationFrame((()=>{i.style.opacity="1",i.style.transform="translateX(0)"})),setTimeout((()=>{i.style.opacity="0",i.style.transform="translateX(100%)",setTimeout((()=>document.body.removeChild(i)),300)}),3e3)}_countExternalCardModules(){const e=this._ensureLayout();let t=0;return e.rows.forEach((e=>{e.columns.forEach((e=>{var i;null===(i=e.modules)||void 0===i||i.forEach((e=>{"external_card"===e.type&&t++}))}))})),t}async _countAllExternalCardModulesGlobally(){try{const e=await k.ucDashboardScannerService.scanAllDashboards();let t=0;return e.cards.forEach((e=>{const i=e.config;i.layout&&i.layout.rows&&i.layout.rows.forEach((e=>{var i;null===(i=e.columns)||void 0===i||i.forEach((e=>{var i;null===(i=e.modules)||void 0===i||i.forEach((e=>{"external_card"===e.type&&t++}))}))}))})),t}catch(e){return console.error("[UC] Failed to count global external cards:",e),this._countExternalCardModules()}}async _getAllowedExternalCardIds(){try{const e=await k.ucDashboardScannerService.scanDashboard(),t=[];e.cards.forEach((e=>{const i=e.config;i.layout&&i.layout.rows&&i.layout.rows.forEach((e=>{var i;null===(i=e.columns)||void 0===i||i.forEach((e=>{var i;null===(i=e.modules)||void 0===i||i.forEach((e=>{if("external_card"===e.type&&e.id){const i=e.id.match(/external-card-(\d+)-/);if(i){const o=parseInt(i[1],10);t.push({id:e.id,timestamp:o})}}}))}))}))})),t.sort(((e,t)=>e.timestamp-t.timestamp));const i=new Set(t.slice(0,5).map((e=>e.id)));return console.log("[UC] Allowed external card IDs (first 5):",Array.from(i)),i}catch(e){return console.error("[UC] Failed to get allowed external card IDs:",e),new Set}}async _refreshGlobalExternalCardCount(){if(!this._isRefreshingGlobalCount){this._isRefreshingGlobalCount=!0;try{const e=await this._countAllExternalCardModulesGlobally();this._globalExternalCardCount=e}finally{this._isRefreshingGlobalCount=!1}}}async _handleRefresh3rdPartyTab(){await this._refreshGlobalExternalCardCount(),this.requestUpdate()}_openProPage(){window.open("https://ultracard.io/product/ultra-card-pro/","_blank")}_duplicateModule(e,t,o){var n,a;const r=this._ensureLayout(),s=r.rows[e];if(!s||!s.columns[t])return;const l=s.columns[t];if(!l.modules||!l.modules[o])return;try{const e=S.x.checkIntegrationAuth(this.hass);if("pro"!==(null===(n=null==e?void 0:e.subscription)||void 0===n?void 0:n.tier)||"active"!==(null===(a=null==e?void 0:e.subscription)||void 0===a?void 0:a.status)){const e=l.modules[o],t=(0,y.Y)(null==e?void 0:e.type)?1:0;if(b.O.wouldExceedLimit(this.hass,t))return void this._showToast("Cannot duplicate: 5 third-party modules limit reached.","error")}}catch(e){}const d=l.modules[o],c=Object.assign(Object.assign({},JSON.parse(JSON.stringify(d))),{id:`${d.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`});d&&"external_card"===d.type&&Promise.resolve().then(i.bind(i,1986)).then((({invalidateExternalCardCache:e})=>{e()}));const p={rows:r.rows.map(((i,n)=>n===e?Object.assign(Object.assign({},i),{columns:i.columns.map(((e,i)=>{if(i===t){const t=[...e.modules];return t.splice(o+1,0,c),Object.assign(Object.assign({},e),{modules:t})}return e}))}):i))};this._updateLayout(p)}_deleteModule(e,t,o){const n=this._ensureLayout(),a=n.rows[e];if(!a||!a.columns[t])return;const r=a.columns[t];if(!r.modules||!r.modules[o])return;const s=r.modules[o],l=s&&"external_card"===s.type;l&&Promise.resolve().then(i.bind(i,1986)).then((({cleanupExternalCardCache:e})=>{e(s.id)}));const d={rows:n.rows.map(((i,n)=>n===e?Object.assign(Object.assign({},i),{columns:i.columns.map(((e,i)=>i===t?Object.assign(Object.assign({},e),{modules:e.modules.filter(((e,t)=>t!==o))}):e))}):i))};this._updateLayout(d),l&&this._refreshGlobalExternalCardCount()}_openModuleSettings(e,t,i){var o,n,a;const r=null===(a=null===(n=null===(o=this.config.layout)||void 0===o?void 0:o.rows[e])||void 0===n?void 0:n.columns[t])||void 0===a?void 0:a.modules[i];if(this._selectedModule={rowIndex:e,columnIndex:t,moduleIndex:i},this._showModuleSettings=!0,"external_card"===(null==r?void 0:r.type)){const e=r;if(e.card_type){const t=`${e.card_type}-editor`,i=customElements.get(t),o=void 0!==i&&!(i.prototype instanceof HTMLUnknownElement);this._activeModuleTab=o?"general":"yaml"}else this._activeModuleTab="general"}else this._activeModuleTab="general"}_updateModule(e){var t,i;if(!this._selectedModule)return;const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".popup-body"),n=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".selector-body"),a=o||n;a&&(this._savedScrollPosition=a.scrollTop,this._shouldRestoreScroll=!0);const r=this._ensureLayout(),{rowIndex:s,columnIndex:l,moduleIndex:d}=this._selectedModule,c={rows:r.rows.map(((t,i)=>i===s?Object.assign(Object.assign({},t),{columns:t.columns.map(((t,i)=>i===l?Object.assign(Object.assign({},t),{modules:t.modules.map(((t,i)=>{if(i===d){const i=Object.assign({},t);for(const[t,o]of Object.entries(e))void 0===o?delete i[t]:i[t]=o;return i}return t}))}):t))}):t))};this._updateLayout(c)}_updateLayoutChildModule(e){var t,i;if(!this._selectedLayoutChild)return;const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".popup-body"),n=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".selector-body"),a=o||n;a&&(this._savedScrollPosition=a.scrollTop,this._shouldRestoreScroll=!0);const{parentRowIndex:r,parentColumnIndex:s,parentModuleIndex:l,childIndex:d}=this._selectedLayoutChild,c=this._ensureLayout(),p=JSON.parse(JSON.stringify(c)),u=p.rows[r];if(!u||!u.columns[s])return;const h=u.columns[s];if(!h.modules||!h.modules[l])return;const g=h.modules[l];if(this._selectedNestedChildIndex>=0){if(!g.modules||!g.modules[d])return;const t=g.modules[d];if(!t.modules||!t.modules[this._selectedNestedChildIndex])return;const i=t.modules[this._selectedNestedChildIndex],o=Object.assign({},i);if(e.hasOwnProperty("design")){const t=e.design||{},i=o.design||{},n=Object.assign({},i);for(const[e,i]of Object.entries(t))void 0===i?delete n[e]:n[e]=i;o.design=n}for(const[t,i]of Object.entries(e))"design"!==t&&(void 0===i?delete o[t]:o[t]=i);t.modules[this._selectedNestedChildIndex]=o}else{if(!g.modules||!g.modules[d])return;const t=g.modules[d],i=Object.assign({},t);if(e.hasOwnProperty("design")){const t=e.design||{},o=i.design||{},n=Object.assign({},o);for(const[e,i]of Object.entries(t))void 0===i?delete n[e]:n[e]=i;i.design=n}for(const[t,o]of Object.entries(e))"design"!==t&&(void 0===o?delete i[t]:i[t]=o);g.modules[d]=i}this._updateLayout(p)}_updateModuleDesign(e){var t,i,o,n,a,r,s,l,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I,j,M,D,B,R,U,H,J,Q,N,L,F,q,V,K,G,Z,Y,W;const X=!this._selectedModule&&!!this._selectedLayoutChild;if(!this._selectedModule&&!this._selectedLayoutChild)return void console.warn("_updateModuleDesign called but no selected module or layout child");const ee={};if(e.hasOwnProperty("color")&&(ee.color=e.color),e.hasOwnProperty("text_align")){const s=this._ensureLayout();let l=null;if(X){const{parentRowIndex:e,parentColumnIndex:a,parentModuleIndex:r,childIndex:d}=this._selectedLayoutChild;l=null===(n=null===(o=null===(i=null===(t=s.rows[e])||void 0===t?void 0:t.columns[a])||void 0===i?void 0:i.modules[r])||void 0===o?void 0:o.modules)||void 0===n?void 0:n[d]}else{const{rowIndex:e,columnIndex:t,moduleIndex:i}=this._selectedModule;l=null===(r=null===(a=s.rows[e])||void 0===a?void 0:a.columns[t])||void 0===r?void 0:r.modules[i]}l&&"text"===l.type?(ee.design||(ee.design=Object.assign({},l.design||{})),ee.design.text_align=e.text_align):ee.text_align=e.text_align}if(e.hasOwnProperty("font_size")){const t=this._ensureLayout();let i=null;if(X){const{parentRowIndex:e,parentColumnIndex:o,parentModuleIndex:n,childIndex:a}=this._selectedLayoutChild;i=null===(c=null===(d=null===(l=null===(s=t.rows[e])||void 0===s?void 0:s.columns[o])||void 0===l?void 0:l.modules[n])||void 0===d?void 0:d.modules)||void 0===c?void 0:c[a]}else{const{rowIndex:e,columnIndex:o,moduleIndex:n}=this._selectedModule;i=null===(u=null===(p=t.rows[e])||void 0===p?void 0:p.columns[o])||void 0===u?void 0:u.modules[n]}i&&"text"===i.type&&(ee.design||(ee.design=Object.assign({},i.design||{})),ee.design.font_size=e.font_size||void 0),ee.font_size=e.font_size||void 0}if(e.hasOwnProperty("line_height")&&(ee.line_height=e.line_height),e.hasOwnProperty("letter_spacing")&&(ee.letter_spacing=e.letter_spacing),e.hasOwnProperty("font_family")&&(ee.font_family=e.font_family),e.hasOwnProperty("font_weight")&&(ee.font_weight=e.font_weight),e.hasOwnProperty("text_transform")&&(ee.text_transform=e.text_transform),e.hasOwnProperty("font_style")&&(ee.font_style=e.font_style),e.hasOwnProperty("background_color")){const t=this._ensureLayout();let i=null;if(X){const{parentRowIndex:e,parentColumnIndex:o,parentModuleIndex:n,childIndex:a}=this._selectedLayoutChild;i=null===(f=null===(m=null===(g=null===(h=t.rows[e])||void 0===h?void 0:h.columns[o])||void 0===g?void 0:g.modules[n])||void 0===m?void 0:m.modules)||void 0===f?void 0:f[a]}else this._selectedModule&&(i=null===(v=null===(_=t.rows[this._selectedModule.rowIndex])||void 0===_?void 0:_.columns[this._selectedModule.columnIndex])||void 0===v?void 0:v.modules[this._selectedModule.moduleIndex]);ee.design||(ee.design=Object.assign({},(null==i?void 0:i.design)||{})),ee.design.background_color=e.background_color,ee.background_color=e.background_color}if(e.hasOwnProperty("background_image")&&(ee.background_image=e.background_image),e.hasOwnProperty("background_image_type")&&(ee.background_image_type=e.background_image_type),e.hasOwnProperty("background_image_entity")&&(ee.background_image_entity=e.background_image_entity),e.hasOwnProperty("backdrop_filter")&&(ee.backdrop_filter=e.backdrop_filter),e.hasOwnProperty("background_filter")&&(ee.background_filter=e.background_filter),e.hasOwnProperty("width")){const t=this._ensureLayout();let i=null;if(X){const{parentRowIndex:e,parentColumnIndex:o,parentModuleIndex:n,childIndex:a}=this._selectedLayoutChild;i=null===(k=null===(x=null===(y=null===(b=t.rows[e])||void 0===b?void 0:b.columns[o])||void 0===y?void 0:y.modules[n])||void 0===x?void 0:x.modules)||void 0===k?void 0:k[a]}else this._selectedModule&&(i=null===(S=null===(w=t.rows[this._selectedModule.rowIndex])||void 0===w?void 0:w.columns[this._selectedModule.columnIndex])||void 0===S?void 0:S.modules[this._selectedModule.moduleIndex]);"bar"===(null==i?void 0:i.type)?(ee.design||(ee.design=Object.assign({},(null==i?void 0:i.design)||{})),ee.design.width=e.width):ee.width=e.width}if(e.hasOwnProperty("height")){const t=this._ensureLayout();let i=null;if(X){const{parentRowIndex:e,parentColumnIndex:o,parentModuleIndex:n,childIndex:a}=this._selectedLayoutChild;i=null===($=null===(C=null===(A=null===(O=t.rows[e])||void 0===O?void 0:O.columns[o])||void 0===A?void 0:A.modules[n])||void 0===C?void 0:C.modules)||void 0===$?void 0:$[a]}else this._selectedModule&&(i=null===(z=null===(T=t.rows[this._selectedModule.rowIndex])||void 0===T?void 0:T.columns[this._selectedModule.columnIndex])||void 0===z?void 0:z.modules[this._selectedModule.moduleIndex]);"bar"===(null==i?void 0:i.type)?(ee.design||(ee.design=Object.assign({},(null==i?void 0:i.design)||{})),ee.design.height=e.height):ee.height=e.height}if(e.hasOwnProperty("max_width")&&(ee.max_width=e.max_width),e.hasOwnProperty("max_height")&&(ee.max_height=e.max_height),e.hasOwnProperty("min_width")&&(ee.min_width=e.min_width),e.hasOwnProperty("min_height")&&(ee.min_height=e.min_height),e.hasOwnProperty("position")&&(ee.position=e.position),e.hasOwnProperty("top")&&(ee.top=e.top),e.hasOwnProperty("bottom")&&(ee.bottom=e.bottom),e.hasOwnProperty("left")&&(ee.left=e.left),e.hasOwnProperty("right")&&(ee.right=e.right),e.hasOwnProperty("z_index")&&(ee.z_index=e.z_index),e.hasOwnProperty("text_shadow_h")&&(ee.text_shadow_h=e.text_shadow_h),e.hasOwnProperty("text_shadow_v")&&(ee.text_shadow_v=e.text_shadow_v),e.hasOwnProperty("text_shadow_blur")&&(ee.text_shadow_blur=e.text_shadow_blur),e.hasOwnProperty("text_shadow_color")&&(ee.text_shadow_color=e.text_shadow_color),e.hasOwnProperty("box_shadow_h")&&(ee.box_shadow_h=e.box_shadow_h),e.hasOwnProperty("box_shadow_v")&&(ee.box_shadow_v=e.box_shadow_v),e.hasOwnProperty("box_shadow_blur")&&(ee.box_shadow_blur=e.box_shadow_blur),e.hasOwnProperty("box_shadow_spread")&&(ee.box_shadow_spread=e.box_shadow_spread),e.hasOwnProperty("box_shadow_color")&&(ee.box_shadow_color=e.box_shadow_color),e.hasOwnProperty("overflow")&&(ee.overflow=e.overflow),e.hasOwnProperty("clip_path")&&(ee.clip_path=e.clip_path),e.hasOwnProperty("margin_top")&&(ee.margin_top=e.margin_top),e.hasOwnProperty("margin_bottom")&&(ee.margin_bottom=e.margin_bottom),e.hasOwnProperty("margin_left")&&(ee.margin_left=e.margin_left),e.hasOwnProperty("margin_right")&&(ee.margin_right=e.margin_right),e.hasOwnProperty("padding_top")&&(ee.padding_top=e.padding_top),e.hasOwnProperty("padding_bottom")&&(ee.padding_bottom=e.padding_bottom),e.hasOwnProperty("padding_left")&&(ee.padding_left=e.padding_left),e.hasOwnProperty("padding_right")&&(ee.padding_right=e.padding_right),e.hasOwnProperty("border_radius")&&(ee.border_radius=e.border_radius),e.hasOwnProperty("border_style")&&(ee.border_style=e.border_style),e.hasOwnProperty("border_width")&&(ee.border_width=e.border_width),e.hasOwnProperty("border_color")&&(ee.border_color=e.border_color),e.hasOwnProperty("animation_type")&&(ee.animation_type=e.animation_type),e.hasOwnProperty("animation_entity")&&(ee.animation_entity=e.animation_entity),e.hasOwnProperty("animation_trigger_type")&&(ee.animation_trigger_type=e.animation_trigger_type),e.hasOwnProperty("animation_attribute")&&(ee.animation_attribute=e.animation_attribute),e.hasOwnProperty("animation_state")&&(ee.animation_state=e.animation_state),e.hasOwnProperty("intro_animation")&&(ee.intro_animation=e.intro_animation),e.hasOwnProperty("outro_animation")&&(ee.outro_animation=e.outro_animation),e.hasOwnProperty("animation_duration")&&(ee.animation_duration=e.animation_duration),e.hasOwnProperty("animation_delay")&&(ee.animation_delay=e.animation_delay),e.hasOwnProperty("animation_timing")&&(ee.animation_timing=e.animation_timing),e.hasOwnProperty("smart_scaling")&&(ee.smart_scaling=e.smart_scaling),e.hasOwnProperty("margin_top")||e.hasOwnProperty("margin_bottom")||e.hasOwnProperty("margin_left")||e.hasOwnProperty("margin_right")){const t=this._ensureLayout();let i=null;if(X){const{parentRowIndex:e,parentColumnIndex:o,parentModuleIndex:n,childIndex:a}=this._selectedLayoutChild;i=null===(j=null===(I=null===(E=null===(P=t.rows[e])||void 0===P?void 0:P.columns[o])||void 0===E?void 0:E.modules[n])||void 0===I?void 0:I.modules)||void 0===j?void 0:j[a]}else if(this._selectedModule){const{rowIndex:e,columnIndex:o,moduleIndex:n}=this._selectedModule;i=null===(D=null===(M=t.rows[e])||void 0===M?void 0:M.columns[o])||void 0===D?void 0:D.modules[n]}if(i){const t=e.hasOwnProperty("margin_top")?e.margin_top:null===(B=i.margin)||void 0===B?void 0:B.top,o=e.hasOwnProperty("margin_bottom")?e.margin_bottom:null===(R=i.margin)||void 0===R?void 0:R.bottom,n=e.hasOwnProperty("margin_left")?e.margin_left:null===(U=i.margin)||void 0===U?void 0:U.left,a=e.hasOwnProperty("margin_right")?e.margin_right:null===(H=i.margin)||void 0===H?void 0:H.right;if(void 0===t&&void 0===o&&void 0===n&&void 0===a)ee.margin=void 0;else{const e=i.margin||{};ee.margin={top:void 0!==t?t:e.top,bottom:void 0!==o?o:e.bottom,left:void 0!==n?n:e.left,right:void 0!==a?a:e.right}}}}if(e.hasOwnProperty("padding_top")||e.hasOwnProperty("padding_bottom")||e.hasOwnProperty("padding_left")||e.hasOwnProperty("padding_right")){const{rowIndex:t,columnIndex:i,moduleIndex:o}=this._selectedModule,n=null===(Q=null===(J=this._ensureLayout().rows[t])||void 0===J?void 0:J.columns[i])||void 0===Q?void 0:Q.modules[o];if(n){const t=e.hasOwnProperty("padding_top")?e.padding_top:null===(N=n.padding)||void 0===N?void 0:N.top,i=e.hasOwnProperty("padding_bottom")?e.padding_bottom:null===(L=n.padding)||void 0===L?void 0:L.bottom,o=e.hasOwnProperty("padding_left")?e.padding_left:null===(F=n.padding)||void 0===F?void 0:F.left,a=e.hasOwnProperty("padding_right")?e.padding_right:null===(q=n.padding)||void 0===q?void 0:q.right;if(void 0===t&&void 0===i&&void 0===o&&void 0===a)ee.padding=void 0;else{const e=n.padding||{};ee.padding={top:void 0!==t?t:e.top,bottom:void 0!==i?i:e.bottom,left:void 0!==o?o:e.left,right:void 0!==a?a:e.right}}}}if(e.hasOwnProperty("border_radius")||e.hasOwnProperty("border_style")||e.hasOwnProperty("border_width")||e.hasOwnProperty("border_color")){const{rowIndex:t,columnIndex:i,moduleIndex:o}=this._selectedModule,n=null===(K=null===(V=this._ensureLayout().rows[t])||void 0===V?void 0:V.columns[i])||void 0===K?void 0:K.modules[o];if(n){const t=e.hasOwnProperty("border_radius")?e.border_radius:null===(G=n.border)||void 0===G?void 0:G.radius,i=e.hasOwnProperty("border_style")?e.border_style:null===(Z=n.border)||void 0===Z?void 0:Z.style,o=e.hasOwnProperty("border_width")?e.border_width:null===(Y=n.border)||void 0===Y?void 0:Y.width,a=e.hasOwnProperty("border_color")?e.border_color:null===(W=n.border)||void 0===W?void 0:W.color;if(void 0===t&&void 0===i&&void 0===o&&void 0===a)ee.border=void 0;else{const e=n.border||{};ee.border={radius:void 0!==t?parseFloat(t)||0:e.radius||0,style:void 0!==i?i:e.style||"none",width:void 0!==o?o:e.width||"1px",color:void 0!==a?a:e.color||"var(--divider-color)"}}}}X?this._updateLayoutChildModule(ee):this._updateModule(ee)}_closeModuleSettings(){var e;if(this._selectedModule){const t=this._ensureLayout().rows[this._selectedModule.rowIndex];if(t&&t.columns[this._selectedModule.columnIndex]){const i=null===(e=t.columns[this._selectedModule.columnIndex].modules)||void 0===e?void 0:e[this._selectedModule.moduleIndex];"external_card"===(null==i?void 0:i.type)&&(0,d.cleanupExternalCardCache)(i.id)}}this._showModuleSettings=!1,this._selectedModule=null,this.requestUpdate()}_navigateToPro(){const e=new CustomEvent("navigate-to-tab",{detail:{tab:"pro"},bubbles:!0,composed:!0});this.dispatchEvent(e)}_closeLayoutChildSettings(){this._showLayoutChildSettings=!1,this._selectedLayoutChild=null,this._selectedNestedChildIndex=-1,this.requestUpdate()}_onDragStart(e,t,i,o,n){var a,r,s;if(!e.dataTransfer)return;e.stopPropagation();const l=this._ensureLayout();let d;switch(t){case"module":void 0!==o&&void 0!==n&&(d=null===(r=null===(a=l.rows[i])||void 0===a?void 0:a.columns[o])||void 0===r?void 0:r.modules[n]);break;case"column":void 0!==o&&(d=null===(s=l.rows[i])||void 0===s?void 0:s.columns[o]);break;case"row":d=l.rows[i]}this._draggedItem={type:t,rowIndex:i,columnIndex:o,moduleIndex:n,data:d},e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify({type:t,rowIndex:i,columnIndex:o,moduleIndex:n}));const c=e.currentTarget;c&&(c.style.opacity="0.6",c.style.transform="scale(0.95)"),"column"===t?this.setAttribute("dragging-column",""):"row"===t&&this.setAttribute("dragging-row","")}_onDragEnd(e){const t=e.currentTarget;t&&(t.style.opacity="",t.style.transform=""),this.removeAttribute("dragging-column"),this.removeAttribute("dragging-row"),this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}_onDragOver(e){this._draggedItem&&(e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"))}_onDragEnter(e,t,i,o,n){if(e.preventDefault(),e.stopPropagation(),!this._draggedItem)return;if(this._draggedItem.type===t&&this._draggedItem.rowIndex===i&&this._draggedItem.columnIndex===o&&this._draggedItem.moduleIndex===n)return;if(void 0!==this._draggedItem.layoutChildIndex&&"layout"===t&&this._draggedItem.rowIndex===i&&this._draggedItem.columnIndex===o&&this._draggedItem.moduleIndex===n)return;if(!this._isValidDropTarget(this._draggedItem.type,t))return;this._dropTarget={type:t,rowIndex:i,columnIndex:o,moduleIndex:n};const a=e.currentTarget;a&&(a.style.borderColor="var(--primary-color)",a.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)"),this.requestUpdate()}_onDragLeave(e){const t=e.currentTarget;t&&(t.style.borderColor="",t.style.backgroundColor=""),e.relatedTarget&&e.currentTarget&&!e.currentTarget.contains(e.relatedTarget)&&(this._dropTarget=null,this.requestUpdate())}_onDrop(e,t,i,o,n){e.preventDefault(),e.stopPropagation();const a=e.currentTarget;a&&(a.style.borderColor="",a.style.backgroundColor=""),this._draggedItem&&(this._draggedItem.type===t&&this._draggedItem.rowIndex===i&&this._draggedItem.columnIndex===o&&this._draggedItem.moduleIndex===n||this._isValidDropTarget(this._draggedItem.type,t)&&(this._performMove(this._draggedItem,{type:t,rowIndex:i,columnIndex:o,moduleIndex:n}),this._draggedItem=null,this._dropTarget=null,this.requestUpdate()))}_isValidDropTarget(e,t){var i;return(null===(i={module:["module","column","layout","layout-child"],"nested-child":["module","column","layout","layout-child"],"layout-child":["module","column","layout","layout-child"],column:["column","row"],row:["row"]}[e])||void 0===i?void 0:i.includes(t))||!1}_performMove(e,t){const i=this._ensureLayout(),o=JSON.parse(JSON.stringify(i));switch(e.type){case"module":this._moveModule(o,e,t);break;case"nested-child":this._moveNestedChild(o,e,t);break;case"column":this._moveColumn(o,e,t);break;case"row":this._moveRow(o,e,t)}this._updateLayout(o)}_moveModule(e,t,i){let o;if(void 0!==t.layoutChildIndex&&"layout-child"===i.type){const o=t.rowIndex,n=t.columnIndex,a=t.moduleIndex,r=t.layoutChildIndex,s=i.rowIndex,l=i.columnIndex,d=i.moduleIndex,c=i.childIndex;if(o===s&&n===l&&a===d){if(r===c)return;const t=e.rows[o].columns[n].modules[a];if(t&&this._isLayoutModule(t.type)&&t.modules){const e=t.modules.splice(r,1)[0];let i=c;r<c&&(i=c-1),t.modules.splice(i,0,e)}return}}if(void 0!==t.layoutChildIndex){const i=e.rows[t.rowIndex].columns[t.columnIndex].modules[t.moduleIndex];o=i.modules[t.layoutChildIndex],i.modules.splice(t.layoutChildIndex,1)}else o=e.rows[t.rowIndex].columns[t.columnIndex].modules[t.moduleIndex];if("layout"!==i.type)if("layout-child"!==i.type)if(void 0===t.layoutChildIndex&&e.rows[t.rowIndex].columns[t.columnIndex].modules.splice(t.moduleIndex,1),"module"===i.type){let n=i.moduleIndex||0;t.rowIndex===i.rowIndex&&t.columnIndex===i.columnIndex&&i.moduleIndex>t.moduleIndex&&n--,e.rows[i.rowIndex].columns[i.columnIndex].modules.splice(n,0,o)}else"column"===i.type&&e.rows[i.rowIndex].columns[i.columnIndex].modules.push(o);else{const n=e.rows[i.rowIndex].columns[i.columnIndex].modules[i.moduleIndex];if(n&&this._isLayoutModule(n.type)){n.modules||(n.modules=[]);const a=i.childIndex||0;n.modules.splice(a,0,o),void 0===t.layoutChildIndex&&e.rows[t.rowIndex].columns[t.columnIndex].modules.splice(t.moduleIndex,1)}}else{const n=e.rows[i.rowIndex].columns[i.columnIndex].modules[i.moduleIndex];n&&this._isLayoutModule(n.type)&&(n.modules||(n.modules=[]),n.modules.push(o),void 0===t.layoutChildIndex&&e.rows[t.rowIndex].columns[t.columnIndex].modules.splice(t.moduleIndex,1))}}_moveColumn(e,t,i){const o=e.rows[t.rowIndex].columns[t.columnIndex];e.rows[t.rowIndex].columns.splice(t.columnIndex,1);const n=e.rows[t.rowIndex].columns.length;if(n>0){const i=this._getLayoutsForColumnCount(n)[0];e.rows[t.rowIndex].column_layout=i?i.id:`repeat(${n}, 1fr)`}"column"===i.type?e.rows[i.rowIndex].columns.splice(i.columnIndex||0,0,o):"row"===i.type&&e.rows[i.rowIndex].columns.push(o);const a=e.rows[i.rowIndex].columns.length,r=this._getLayoutsForColumnCount(a)[0];e.rows[i.rowIndex].column_layout=r?r.id:`repeat(${a}, 1fr)`}_moveRow(e,t,i){const o=e.rows[t.rowIndex];e.rows.splice(t.rowIndex,1);const n=i.rowIndex;e.rows.splice(n,0,o)}_moveNestedChild(e,t,i){const o=e.rows[t.rowIndex].columns[t.columnIndex].modules[t.moduleIndex].modules[t.layoutChildIndex],n=o.modules[t.nestedChildIndex];if(o.modules.splice(t.nestedChildIndex,1),"module"===i.type){const t=e.rows[i.rowIndex].columns[i.columnIndex],o=i.moduleIndex||0;t.modules.splice(o,0,n)}else if("layout"===i.type){const t=e.rows[i.rowIndex].columns[i.columnIndex].modules[i.moduleIndex];t.modules||(t.modules=[]),t.modules.push(n)}else if("layout-child"===i.type){const t=e.rows[i.rowIndex].columns[i.columnIndex].modules[i.moduleIndex],o=i.childIndex||0;t.modules.splice(o,0,n)}}_openRowSettings(e){this._selectedRowForSettings=e,this._showRowSettings=!0}_updateRow(e){if(-1===this._selectedRowForSettings)return;const t=this._ensureLayout(),i=JSON.parse(JSON.stringify(t)),o=i.rows[this._selectedRowForSettings];for(const[t,i]of Object.entries(e))void 0===i?delete o[t]:o[t]=i;this._updateLayout(i)}_openColumnSettings(e,t){this._selectedColumnForSettings={rowIndex:e,columnIndex:t},this._showColumnSettings=!0}_updateColumn(e){if(!this._selectedColumnForSettings)return;const t=this._ensureLayout(),i=JSON.parse(JSON.stringify(t)),o=i.rows[this._selectedColumnForSettings.rowIndex].columns[this._selectedColumnForSettings.columnIndex];for(const[t,i]of Object.entries(e))void 0===i?delete o[t]:o[t]=i;this._updateLayout(i)}_loadGoogleFont(e){if(!e||"default"===e||T.some((t=>t.value===e)))return;if(document.querySelector(`link[href*="${e.replace(/\s+/g,"+")}"]`))return;const t=document.createElement("link");t.rel="stylesheet",t.href=`https://fonts.googleapis.com/css2?family=${e.replace(/\s+/g,"+")}:wght@300;400;500;600;700&display=swap`,document.head.appendChild(t)}_renderModulePreview(){var e,t,i,o,a,r,s,l;if(!this._selectedModule)return n.qy``;const d=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en",{rowIndex:c,columnIndex:p,moduleIndex:h}=this._selectedModule,g=null===(l=null===(s=null===(r=null===(a=null===(o=null===(i=this.config.layout)||void 0===i?void 0:i.rows)||void 0===o?void 0:o[c])||void 0===a?void 0:a.columns)||void 0===r?void 0:r[p])||void 0===s?void 0:s.modules)||void 0===l?void 0:l[h];if(!g)return n.qy``;const m=this._renderSingleModuleWithAnimation(g);return n.qy`
      <div class="module-preview ${this._isPreviewPinned?"pinned":""}">
        <div class="preview-header">
          <div style="display: flex; align-items: center; gap: 8px;">
            <ha-icon
              class="preview-pin-icon ${this._isPreviewPinned?"pinned":""}"
              icon="${this._isPreviewPinned?"mdi:pin":"mdi:pin-outline"}"
              @click=${e=>{e.stopPropagation(),this._togglePreviewPin()}}
              title="${this._isPreviewPinned?(0,u.kg)("editor.layout.unpin_preview",d,"Unpin preview (scroll with content)"):(0,u.kg)("editor.layout.pin_preview",d,"Pin preview (keep in view)")}"
            ></ha-icon>
            <span
              @click=${this._togglePreviewCollapsed}
              style="cursor: pointer; flex: 1;"
              title="${(0,u.kg)("editor.layout.toggle_preview",d,"Toggle preview")}"
            >
              ${(0,u.kg)("editor.layout.live_preview",d,"Live Preview")}
            </span>
          </div>
          <ha-icon
            class="preview-caret"
            icon="${this._isCurrentModulePreviewCollapsed()?"mdi:chevron-down":"mdi:chevron-up"}"
            @click=${this._togglePreviewCollapsed}
            title="${(0,u.kg)("editor.layout.toggle_preview",d,"Toggle preview")}"
          ></ha-icon>
        </div>
        <div
          class="preview-content"
          style="display: ${this._isCurrentModulePreviewCollapsed()?"none":"block"};"
        >
          ${m}
        </div>
      </div>
    `}_togglePreviewPin(){this._isPreviewPinned=!this._isPreviewPinned}_renderSingleModule(e,t,i,o){return this._renderSimplifiedModule(e,t,i,o)}_renderSimplifiedModule(e,t,i,o){var a,r;const l=(0,s.oD)(),d=(null===(r=null===(a=this.hass)||void 0===a?void 0:a.locale)||void 0===r?void 0:r.language)||"en",c=l.getModule(e.type),p=(null==c?void 0:c.metadata)||{icon:"mdi:help-circle",title:"Unknown",description:"Unknown module type"};if(this._isLayoutModule(e.type))return this._renderLayoutModuleAsColumn(e,t,i,o,p);const h=this._generateModuleInfo(e),g=this._getModuleDisplayName(e);return n.qy`
      <div class="simplified-module">
        <div class="simplified-module-header">
          <div
            class="simplified-module-drag-handle"
            title="${(0,u.kg)("editor.layout.drag_to_move_module",d,"Drag to move module")}"
          >
            <ha-icon icon="mdi:drag"></ha-icon>
          </div>
          <ha-icon icon="${p.icon}" class="simplified-module-icon"></ha-icon>
          <div class="simplified-module-content">
            <div class="simplified-module-title">${g}</div>
            <div class="simplified-module-info">${h}</div>
          </div>
          ${void 0!==t&&void 0!==i&&void 0!==o?n.qy`
                <div class="simplified-module-actions">
                  <button
                    class="simplified-action-btn edit-btn"
                    @click=${e=>{e.stopPropagation(),this._openModuleSettings(t,i,o)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.edit_module",d,"Edit Module")}"
                  >
                    <ha-icon icon="mdi:pencil"></ha-icon>
                  </button>
                  <button
                    class="simplified-action-btn duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateModule(t,i,o)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.duplicate_module",d,"Duplicate Module")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="simplified-action-btn delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteModule(t,i,o)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.delete_module",d,"Delete Module")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                </div>
              `:""}
        </div>
      </div>
    `}_renderLayoutModuleAsColumn(e,t,i,o,a){var r,s;const l=(null===(s=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===s?void 0:s.language)||"en",d=e,c=d.modules&&d.modules.length>0,p="horizontal"===e.type,h="vertical"===e.type,g="slider"===e.type;let m=(null==a?void 0:a.title)||"Layout";return p?m=(0,u.kg)("editor.layout.horizontal_layout",l,"Horizontal Layout"):h?m=(0,u.kg)("editor.layout.vertical_layout",l,"Vertical Layout"):g&&(m=(0,u.kg)("editor.layout.slider_layout",l,"Slider Layout")),n.qy`
      <div class="layout-module-container">
        <div class="layout-module-header">
          <div class="layout-module-title">
            <div
              class="layout-module-drag-handle"
              title="${(0,u.kg)("editor.layout.drag_to_move_layout",l,"Drag to move layout module")}"
            >
              <ha-icon icon="mdi:drag"></ha-icon>
            </div>
            <ha-icon icon="${(null==a?void 0:a.icon)||"mdi:view-sequential"}"></ha-icon>
            <span>${m}</span>
          </div>
          <div class="layout-module-actions">
            ${void 0!==t&&void 0!==i&&void 0!==o?n.qy`
                  <button
                    class="layout-module-add-btn"
                    @click=${e=>{e.stopPropagation(),this._openLayoutModuleSelector(t,i,o)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.add_module_to_layout",l,"Add Module to Layout")}"
                  >
                    <ha-icon icon="mdi:plus"></ha-icon>
                  </button>
                  ${g?n.qy`
                        <button
                          class="layout-module-add-btn"
                          @click=${e=>{e.stopPropagation(),this._addPageBreakToColumnSlider(t,i,o)}}
                          @mousedown=${e=>e.stopPropagation()}
                          @dragstart=${e=>e.preventDefault()}
                          title="${(0,u.kg)("editor.layout.add_page_break",l,"Add Page Separator")}"
                        >
                          <ha-icon icon="mdi:format-page-break"></ha-icon>
                        </button>
                      `:""}
                  <button
                    class="layout-module-settings-btn"
                    @click=${e=>{e.stopPropagation(),this._openModuleSettings(t,i,o)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.layout_settings",l,"Layout Settings")}"
                  >
                    <ha-icon icon="mdi:cog"></ha-icon>
                  </button>
                  <button
                    class="layout-module-duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateModule(t,i,o)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.duplicate_layout",l,"Duplicate Layout")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="layout-module-delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteModule(t,i,o)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.delete_layout",l,"Delete Layout")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                `:""}
          </div>
        </div>
        <div
          class="layout-modules-container"
          style="
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 8px 12px;
            min-height: 60px;
            box-sizing: border-box;
            overflow: hidden;
          "
          @dragover=${this._onDragOver}
          @dragenter=${e=>this._onDragEnter(e,"layout",t,i,o)}
          @dragleave=${this._onDragLeave}
          @drop=${e=>this._onDrop(e,"layout",t,i,o)}
        >
          ${c?d.modules.map(((e,a)=>{var r,s,l,d,c;return n.qy`
                  <div
                    class="layout-child-module-wrapper"
                    draggable="true"
                    @dragstart=${e=>this._onLayoutChildDragStart(e,t,i,o,a)}
                    @dragend=${e=>this._onLayoutChildDragEnd(e)}
                    @dragover=${this._onDragOver}
                    @dragenter=${e=>this._onLayoutChildDragEnter(e,t,i,o,a)}
                    @dragleave=${this._onDragLeave}
                    @drop=${e=>this._onLayoutChildDrop(e,t,i,o,a)}
                    class="${"layout-child"===(null===(r=this._dropTarget)||void 0===r?void 0:r.type)&&(null===(s=this._dropTarget)||void 0===s?void 0:s.rowIndex)===t&&(null===(l=this._dropTarget)||void 0===l?void 0:l.columnIndex)===i&&(null===(d=this._dropTarget)||void 0===d?void 0:d.moduleIndex)===o&&(null===(c=this._dropTarget)||void 0===c?void 0:c.childIndex)===a?"drop-target":""}"
                    style="width: 100%; max-width: 100%; box-sizing: border-box; overflow: hidden;"
                  >
                    ${this._renderLayoutChildModule(e,t,i,o,a)}
                  </div>
                `})):n.qy`
                <div
                  class="layout-module-empty"
                  @click=${e=>{e.stopPropagation(),this._openLayoutModuleSelector(t,i,o)}}
                  @dragover=${this._onDragOver}
                  @dragenter=${e=>this._onDragEnter(e,"layout",t,i,o)}
                  @dragleave=${this._onDragLeave}
                  @drop=${e=>this._onDrop(e,"layout",t,i,o)}
                  title="${(0,u.kg)("editor.layout.click_to_add_module",l,"Click to add a module")}"
                  style="cursor: pointer; border: 2px dashed transparent; border-radius: 4px; padding: 12px;"
                >
                  <ha-icon icon="mdi:plus-circle"></ha-icon>
                  <span
                    >${(0,u.kg)("editor.layout.drop_modules_here",l,"Drop modules here")}</span
                  >
                </div>
              `}
          ${c?n.qy`
                <div
                  class="layout-append-zone"
                  @dragover=${this._onDragOver}
                  @dragenter=${e=>this._onLayoutAppendDragEnter(e,t,i,o)}
                  @dragleave=${this._onDragLeave}
                  @drop=${e=>this._onLayoutAppendDrop(e,t,i,o)}
                  style="
                    min-height: 20px;
                    margin-top: 8px;
                    border: 2px dashed transparent;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: var(--secondary-text-color);
                    font-size: 12px;
                    transition: all 0.2s ease;
                  "
                >
                  Drop here to add to end
                </div>
              `:""}
        </div>
      </div>
    `}_getJustifyContent(e){switch(e){case"left":default:return"flex-start";case"center":return"center";case"right":return"flex-end";case"justify":return"space-between"}}_renderLayoutChildModule(e,t,i,o,a){var r,l;const d=(null===(l=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===l?void 0:l.language)||"en";if("horizontal"===e.type||"vertical"===e.type||"slider"===e.type)return this._renderNestedLayoutModule(e,t,i,o,a);const c=(0,s.oD)().getModule(e.type),p=(null==c?void 0:c.metadata)||{icon:"mdi:help-circle",title:"Unknown",description:"Unknown module type"},h=this._generateModuleInfo(e),g=this._getModuleDisplayName(e),m="pagebreak"===e.type,f=m?"background: rgba(var(--rgb-primary-color), 0.08); border-left: 3px solid rgba(var(--rgb-primary-color), 0.3);":"";return n.qy`
      <div
        class="layout-child-simplified-module ${m?"pagebreak-module":""}"
        style="${f}"
        @click=${e=>{const n=e.target;n.closest(".layout-child-actions")||n.closest(".layout-child-drag-handle")||(e.stopPropagation(),void 0!==t&&void 0!==i&&void 0!==o&&void 0!==a&&this._openLayoutChildSettings(t,i,o,a))}}
      >
        <div class="layout-child-module-header">
          <div
            class="layout-child-drag-handle"
            title="${(0,u.kg)("editor.layout.drag_to_reorder",d,"Drag to reorder")}"
          >
            <ha-icon icon="mdi:drag"></ha-icon>
          </div>
          <ha-icon icon="${p.icon}" class="layout-child-icon"></ha-icon>
          <div class="layout-child-content">
            <div class="layout-child-title">${g}</div>
            <div class="layout-child-info">${h}</div>
          </div>
          ${void 0!==t&&void 0!==i&&void 0!==o&&void 0!==a?n.qy`
                <div class="layout-child-actions">
                  <button
                    class="layout-child-action-btn edit-btn"
                    @click=${e=>{e.stopPropagation(),this._openLayoutChildSettings(t,i,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.edit_child_module",d,"Edit Child Module")}"
                  >
                    <ha-icon icon="mdi:pencil"></ha-icon>
                  </button>
                  <button
                    class="layout-child-action-btn duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateLayoutChildModule(t,i,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.duplicate_child_module",d,"Duplicate Child Module")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="layout-child-action-btn delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteLayoutChildModule(t,i,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.delete_child_module",d,"Delete Child Module")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                </div>
              `:""}
        </div>
      </div>
    `}_renderNestedLayoutModule(e,t,i,o,a){var r,l;const d=(null===(l=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===l?void 0:l.language)||"en",c=e,p=c.modules&&c.modules.length>0,h="horizontal"===e.type,g="vertical"===e.type,m="slider"===e.type,f=(0,s.oD)().getModule(e.type),_=(null==f?void 0:f.metadata)||{icon:"mdi:help-circle",title:"Unknown Layout",description:"Unknown layout type"};let v=_.title||"Layout";return h?v=(0,u.kg)("editor.layout.horizontal_layout",d,"Horizontal Layout"):g?v=(0,u.kg)("editor.layout.vertical_layout",d,"Vertical Layout"):m&&(v=(0,u.kg)("editor.layout.slider_module",d,"Slider Module")),n.qy`
      <div class="nested-layout-module-container layout-module-container">
        <div class="nested-layout-module-header layout-module-header">
          <div class="nested-layout-module-title layout-module-title">
            <div
              class="nested-layout-drag-handle layout-module-drag-handle"
              title="${(0,u.kg)("editor.layout.drag_to_move_nested_layout",d,"Drag to move nested layout module")}"
            >
              <ha-icon icon="mdi:drag"></ha-icon>
            </div>
            <ha-icon icon="${_.icon}"></ha-icon>
            <span>${v}</span>
          </div>
          <div class="nested-layout-module-actions layout-module-actions">
            ${void 0!==t&&void 0!==i&&void 0!==o&&void 0!==a?n.qy`
                  <button
                    class="layout-module-add-btn"
                    @click=${e=>{e.stopPropagation(),this._openNestedLayoutModuleSelector(t,i,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.add_module_to_nested_layout",d,"Add Module to Nested Layout")}"
                  >
                    <ha-icon icon="mdi:plus"></ha-icon>
                  </button>
                  ${m?n.qy`
                        <button
                          class="layout-module-add-btn"
                          @click=${e=>{e.stopPropagation(),this._addPageBreakToSlider(t,i,o,a)}}
                          @mousedown=${e=>e.stopPropagation()}
                          @dragstart=${e=>e.preventDefault()}
                          title="${(0,u.kg)("editor.layout.add_page_break",d,"Add Page Separator")}"
                        >
                          <ha-icon icon="mdi:format-page-break"></ha-icon>
                        </button>
                      `:""}
                  <button
                    class="layout-module-settings-btn"
                    @click=${e=>{e.stopPropagation(),this._openLayoutChildSettings(t,i,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.nested_layout_settings",d,"Nested Layout Settings")}"
                  >
                    <ha-icon icon="mdi:cog"></ha-icon>
                  </button>
                  <button
                    class="layout-module-duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateLayoutChildModule(t,i,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.duplicate_nested_layout",d,"Duplicate Nested Layout")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="layout-module-delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteLayoutChildModule(t,i,o,a)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.delete_nested_layout",d,"Delete Nested Layout")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                `:""}
          </div>
        </div>
        <div
          class="nested-layout-modules-container layout-modules-container"
          style="
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 8px 12px;
            min-height: 60px;
            box-sizing: border-box;
            overflow: hidden;
          "
          @dragover=${this._onDragOver}
          @dragenter=${e=>{if(e.preventDefault(),e.stopPropagation(),!this._draggedItem)return;if("nested-child"===this._draggedItem.type&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===o&&this._draggedItem.layoutChildIndex===a)return;this._dropTarget={type:"nested-layout",rowIndex:t,columnIndex:i,moduleIndex:o,childIndex:a};const n=e.currentTarget;n&&(n.style.borderColor="var(--primary-color)",n.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)"),this.requestUpdate()}}
          @dragleave=${this._onDragLeave}
          @drop=${e=>{e.preventDefault(),e.stopPropagation();const n=e.currentTarget;if(n&&(n.style.borderColor="",n.style.backgroundColor=""),!this._draggedItem)return;if("nested-child"===this._draggedItem.type&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===o&&this._draggedItem.layoutChildIndex===a)return;const r=this._ensureLayout(),s=JSON.parse(JSON.stringify(r)),l=s.rows[t].columns[i].modules[o].modules[a];if(l&&this._isLayoutModule(l.type)){let e;if(l.modules||(l.modules=[]),void 0!==this._draggedItem.layoutChildIndex){const t=s.rows[this._draggedItem.rowIndex].columns[this._draggedItem.columnIndex].modules[this._draggedItem.moduleIndex];e=t.modules[this._draggedItem.layoutChildIndex],t.modules.splice(this._draggedItem.layoutChildIndex,1)}else e=s.rows[this._draggedItem.rowIndex].columns[this._draggedItem.columnIndex].modules[this._draggedItem.moduleIndex],s.rows[this._draggedItem.rowIndex].columns[this._draggedItem.columnIndex].modules.splice(this._draggedItem.moduleIndex,1);l.modules.push(e),this._updateLayout(s)}this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}}
        >
          ${p?c.modules.map(((e,r)=>n.qy`
                  <div
                    class="nested-layout-child-wrapper"
                    style="width: 100%; box-sizing: border-box;"
                    @dragover=${e=>this._onNestedChildDragOver(e,t,i,o,a,r)}
                    @dragenter=${e=>this._onNestedChildDragEnter(e,t,i,o,a,r)}
                    @dragleave=${e=>this._onNestedChildDragLeave(e)}
                    @drop=${e=>this._onNestedChildDrop(e,t,i,o,a,r)}
                  >
                    ${this._renderNestedChildModule(e,t,i,o,a,r)}
                  </div>
                `)):n.qy`
                <div
                  class="nested-layout-empty layout-module-empty"
                  @click=${e=>{e.stopPropagation(),void 0!==t&&void 0!==i&&void 0!==o&&void 0!==a&&this._openNestedLayoutModuleSelector(t,i,o,a)}}
                  title="${(0,u.kg)("editor.layout.click_to_add_to_nested",d,"Click to add a module to nested layout")}"
                  style="cursor: pointer;"
                >
                  <ha-icon icon="mdi:plus-circle"></ha-icon>
                  <span>
                    ${(0,u.kg)("editor.layout.drop_modules_here",d,"Drop modules here")}
                  </span>
                </div>
              `}
        </div>
      </div>
    `}_renderNestedChildModule(e,t,i,o,a,r){var l,d;const c=(null===(d=null===(l=this.hass)||void 0===l?void 0:l.locale)||void 0===d?void 0:d.language)||"en";if("horizontal"===e.type||"vertical"===e.type||"slider"===e.type)return this._renderLayoutChildModule(e,t,i,o,a);const p=(0,s.oD)().getModule(e.type),h=(null==p?void 0:p.metadata)||{icon:"mdi:help-circle",title:"Unknown",description:"Unknown module type"},g=this._generateModuleInfo(e),m=this._getModuleDisplayName(e);return n.qy`
      <div
        class="layout-child-simplified-module"
        draggable="true"
        @dragstart=${n=>this._onNestedChildDragStart(n,e,t,i,o,a,r)}
        @dragend=${e=>this._onNestedChildDragEnd(e)}
        @click=${e=>{const n=e.target;n.closest(".layout-child-actions")||n.closest(".layout-child-drag-handle")||(e.stopPropagation(),void 0!==t&&void 0!==i&&void 0!==o&&void 0!==a&&void 0!==r&&this._openNestedChildSettings(t,i,o,a,r))}}
      >
        <div class="layout-child-module-header">
          <div
            class="layout-child-drag-handle"
            title="${(0,u.kg)("editor.layout.drag_to_reorder",c,"Drag to reorder")}"
          >
            <ha-icon icon="mdi:drag"></ha-icon>
          </div>
          <ha-icon icon="${h.icon}" class="layout-child-icon"></ha-icon>
          <div class="layout-child-content">
            <div class="layout-child-title">${m}</div>
            <div class="layout-child-info">${g}</div>
          </div>
          ${void 0!==t&&void 0!==i&&void 0!==o&&void 0!==a&&void 0!==r?n.qy`
                <div class="layout-child-actions">
                  <button
                    class="layout-child-action-btn edit-btn"
                    @click=${e=>{e.stopPropagation(),this._openNestedChildSettings(t,i,o,a,r)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.edit_nested_child_module",c,"Edit Nested Child Module")}"
                  >
                    <ha-icon icon="mdi:pencil"></ha-icon>
                  </button>
                  <button
                    class="layout-child-action-btn duplicate-btn"
                    @click=${e=>{e.stopPropagation(),this._duplicateNestedChildModule(t,i,o,a,r)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.duplicate_nested_child_module",c,"Duplicate Nested Child Module")}"
                  >
                    <ha-icon icon="mdi:content-copy"></ha-icon>
                  </button>
                  <button
                    class="layout-child-action-btn delete-btn"
                    @click=${e=>{e.stopPropagation(),this._deleteNestedChildModule(t,i,o,a,r)}}
                    @mousedown=${e=>e.stopPropagation()}
                    @dragstart=${e=>e.preventDefault()}
                    title="${(0,u.kg)("editor.layout.delete_nested_child_module",c,"Delete Nested Child Module")}"
                  >
                    <ha-icon icon="mdi:delete"></ha-icon>
                  </button>
                </div>
              `:""}
        </div>
      </div>
    `}_onLayoutModuleDragOver(e,t,i,o){e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}_onLayoutModuleDragEnter(e,t,i,o){e.preventDefault(),e.stopPropagation(),this._draggedItem&&"module"===this._draggedItem.type&&(this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===o||e.currentTarget.classList.add("layout-drop-target"))}_onLayoutModuleDragLeave(e){e.preventDefault(),e.stopPropagation()}_onLayoutModuleDrop(e,t,i,o){if(e.preventDefault(),e.stopPropagation(),e.currentTarget.classList.remove("layout-drop-target"),!this._draggedItem||"module"!==this._draggedItem.type)return;if(void 0===t||void 0===i||void 0===o)return;const n=this._ensureLayout(),a=n.rows[t];if(!a||!a.columns[i])return;const r=a.columns[i].modules[o];if(!r||!this._isLayoutModule(r.type))return;r.modules||(r.modules=[]);const s=JSON.parse(JSON.stringify(this._draggedItem.data));if(void 0!==this._draggedItem.layoutChildIndex&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===o)return;r.modules.push(s);const l=n.rows[this._draggedItem.rowIndex];l&&l.columns[this._draggedItem.columnIndex]&&l.columns[this._draggedItem.columnIndex].modules.splice(this._draggedItem.moduleIndex,1),this._updateLayout(n),this._draggedItem=null,this._dropTarget=null}_onLayoutChildDragStart(e,t,i,o,n){var a,r,s;if(!e.dataTransfer)return;e.stopPropagation();const l=null===(r=null===(a=this._ensureLayout().rows[t])||void 0===a?void 0:a.columns[i])||void 0===r?void 0:r.modules[o],d=null===(s=null==l?void 0:l.modules)||void 0===s?void 0:s[n];if(d){this._draggedItem={type:"module",rowIndex:t,columnIndex:i,moduleIndex:o,data:d,layoutChildIndex:n},e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",JSON.stringify({type:"layout-child",parentRowIndex:t,parentColumnIndex:i,parentModuleIndex:o,childIndex:n}));const a=e.currentTarget;a&&(a.style.opacity="0.6",a.style.transform="scale(0.95)")}}_onLayoutChildDragEnd(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget;t&&(t.style.opacity="",t.style.transform=""),this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}_onNestedChildDragStart(e,t,i,o,n,a,r){if(!e.dataTransfer)return;e.stopPropagation(),this._draggedItem={type:"nested-child",rowIndex:i,columnIndex:o,moduleIndex:n,layoutChildIndex:a,nestedChildIndex:r,data:t},e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","nested-child-module");const s=e.currentTarget;s&&(s.style.opacity="0.5",s.style.transform="scale(0.95)")}_onNestedChildDragEnd(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget;t&&(t.style.opacity="",t.style.transform=""),this._draggedItem=null,this._dropTarget=null}_onNestedChildDragOver(e,t,i,o,n,a){e.preventDefault(),e.stopPropagation()}_onNestedChildDragEnter(e,t,i,o,n,a){if(e.preventDefault(),e.stopPropagation(),!this._draggedItem)return;if("nested-child"!==this._draggedItem.type||this._draggedItem.rowIndex!==t||this._draggedItem.columnIndex!==i||this._draggedItem.moduleIndex!==o||this._draggedItem.layoutChildIndex!==n)return;if(this._draggedItem.nestedChildIndex===a)return;const r=e.currentTarget;r&&(r.style.backgroundColor="var(--primary-color, #03a9f4)",r.style.opacity="0.3")}_onNestedChildDragLeave(e){e.preventDefault(),e.stopPropagation();const t=e.currentTarget;t&&(t.style.backgroundColor="",t.style.opacity="")}_onNestedChildDrop(e,t,i,o,n,a){e.preventDefault(),e.stopPropagation();const r=e.currentTarget;if(r&&(r.style.backgroundColor="",r.style.opacity=""),!this._draggedItem)return;if("nested-child"!==this._draggedItem.type||this._draggedItem.rowIndex!==t||this._draggedItem.columnIndex!==i||this._draggedItem.moduleIndex!==o||this._draggedItem.layoutChildIndex!==n)return;if(this._draggedItem.nestedChildIndex===a)return;const s=this._ensureLayout(),l=JSON.parse(JSON.stringify(s));let d=this._draggedItem.nestedChildIndex,c=a;const p=l.rows[t].columns[i].modules[o];if(!p||!Array.isArray(p.modules))return void console.warn("❌ Parent layout module missing modules array");const u=p.modules[n];if(!u||!Array.isArray(u.modules))return void console.warn("❌ Nested layout missing modules array");const h=u.modules;d<c&&(c=Math.max(0,c-1)),d=Math.max(0,Math.min(d,h.length-1)),c=Math.max(0,Math.min(c,h.length));const[g]=h.splice(d,1);h.splice(c,0,g),this._updateLayout(l),this._draggedItem=null,this.requestUpdate()}_onLayoutChildDragEnter(e,t,i,o,n){e.preventDefault(),e.stopPropagation(),this._draggedItem&&"module"===this._draggedItem.type&&(void 0!==this._draggedItem.layoutChildIndex&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===o&&this._draggedItem.layoutChildIndex===n||(this._dropTarget={type:"layout-child",rowIndex:t,columnIndex:i,moduleIndex:o,childIndex:n},this.requestUpdate()))}_onLayoutChildDrop(e,t,i,o,n){if(e.preventDefault(),e.stopPropagation(),!this._draggedItem||"module"!==this._draggedItem.type)return;if(void 0===t||void 0===i||void 0===o||void 0===n)return;const a=this._ensureLayout(),r=JSON.parse(JSON.stringify(a)),s=r.rows[t].columns[i].modules[o];if(s&&this._isLayoutModule(s.type)){if(s.modules||(s.modules=[]),void 0!==this._draggedItem.layoutChildIndex){const e=this._draggedItem.rowIndex,a=this._draggedItem.columnIndex,l=this._draggedItem.moduleIndex,d=this._draggedItem.layoutChildIndex;if(e===t&&a===i&&l===o){if(d===n)return;const e=s.modules.splice(d,1)[0];let t=n;d<n&&(t=n-1),s.modules.splice(t,0,e),this._updateLayout(r)}else{const t=r.rows[e].columns[a].modules[l];if(t&&this._isLayoutModule(t.type)&&t.modules){const e=t.modules.splice(d,1)[0];s.modules.splice(n,0,e),this._updateLayout(r)}}}else{const e=JSON.parse(JSON.stringify(this._draggedItem.data));s.modules.splice(n,0,e);const t=r.rows[this._draggedItem.rowIndex];t&&t.columns[this._draggedItem.columnIndex]&&t.columns[this._draggedItem.columnIndex].modules.splice(this._draggedItem.moduleIndex,1),this._updateLayout(r)}this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}}_onLayoutAppendDragEnter(e,t,i,o){if(e.preventDefault(),e.stopPropagation(),!this._draggedItem||"module"!==this._draggedItem.type)return;this._dropTarget={type:"layout-append",rowIndex:t,columnIndex:i,moduleIndex:o};const n=e.currentTarget;n.style.borderColor="var(--primary-color)",n.style.backgroundColor="rgba(var(--rgb-primary-color), 0.1)",this.requestUpdate()}_onLayoutAppendDrop(e,t,i,o){e.preventDefault(),e.stopPropagation();const n=e.currentTarget;if(n.style.borderColor="transparent",n.style.backgroundColor="transparent",!this._draggedItem||"module"!==this._draggedItem.type)return;if(void 0===t||void 0===i||void 0===o)return;const a=this._ensureLayout(),r=JSON.parse(JSON.stringify(a)),s=r.rows[t].columns[i].modules[o];if(s&&this._isLayoutModule(s.type))if(s.modules||(s.modules=[]),void 0!==this._draggedItem.layoutChildIndex&&this._draggedItem.rowIndex===t&&this._draggedItem.columnIndex===i&&this._draggedItem.moduleIndex===o){const e=this._draggedItem.layoutChildIndex,t=s.modules.splice(e,1)[0];s.modules.push(t),this._updateLayout(r)}else{const e=JSON.parse(JSON.stringify(this._draggedItem.data));if(s.modules.push(e),void 0===this._draggedItem.layoutChildIndex){const e=r.rows[this._draggedItem.rowIndex];e&&e.columns[this._draggedItem.columnIndex]&&e.columns[this._draggedItem.columnIndex].modules.splice(this._draggedItem.moduleIndex,1)}this._updateLayout(r)}this._draggedItem=null,this._dropTarget=null,this.requestUpdate()}_openLayoutModuleSelector(e,t,i){this._selectedRowIndex=e,this._selectedColumnIndex=t,this._selectedLayoutModuleIndex=i,this._showModuleSelector=!0}_openNestedLayoutModuleSelector(e,t,i,o){this._selectedRowIndex=e,this._selectedColumnIndex=t,this._selectedLayoutModuleIndex=i,this._selectedNestedChildIndex=o,this._showModuleSelector=!0}_openLayoutChildSettings(e,t,i,o){const n=this._ensureLayout().rows[e];if(!n||!n.columns[t])return;const a=n.columns[t];if(!a.modules||!a.modules[i])return;const r=a.modules[i];r.modules&&r.modules[o]&&(this._selectedLayoutChild={parentRowIndex:e,parentColumnIndex:t,parentModuleIndex:i,childIndex:o},this._showLayoutChildSettings=!0)}_duplicateLayoutChildModule(e,t,i,o){const n=this._ensureLayout(),a=n.rows[e];if(!a||!a.columns[t])return;const r=a.columns[t];if(!r.modules||!r.modules[i])return;const s=r.modules[i];if(!s.modules||!s.modules[o])return;const l=s.modules[o],d=JSON.parse(JSON.stringify(l));this._regenerateModuleIds(d);const c={rows:n.rows.map(((n,a)=>a===e?Object.assign(Object.assign({},n),{columns:n.columns.map(((e,n)=>n===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===i){const t=e,i=[...t.modules];return i.splice(o+1,0,d),Object.assign(Object.assign({},t),{modules:i})}return e}))}):e))}):n))};this._updateLayout(c)}_duplicateNestedChildModule(e,t,i,o,n){const a=this._ensureLayout(),r=a.rows[e];if(!r||!r.columns[t])return;const s=r.columns[t];if(!s.modules||!s.modules[i])return;const l=s.modules[i];if(!l.modules||!l.modules[o])return;const d=l.modules[o];if(!d.modules||!d.modules[n])return;const c=d.modules[n],p=JSON.parse(JSON.stringify(c));this._regenerateModuleIds(p);const u={rows:a.rows.map(((a,r)=>r===e?Object.assign(Object.assign({},a),{columns:a.columns.map(((e,a)=>a===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===i){const t=e;return Object.assign(Object.assign({},t),{modules:t.modules.map(((e,t)=>{if(t===o){const t=e,i=[...t.modules];return i.splice(n+1,0,p),Object.assign(Object.assign({},t),{modules:i})}return e}))})}return e}))}):e))}):a))};this._updateLayout(u)}_deleteNestedChildModule(e,t,i,o,n){const a=this._ensureLayout(),r=a.rows[e];if(!r||!r.columns[t])return;const s=r.columns[t];if(!s.modules||!s.modules[i])return;const l=s.modules[i];if(!l.modules||!l.modules[o])return;const d=l.modules[o];if(!d.modules||!d.modules[n])return;const c={rows:a.rows.map(((a,r)=>r===e?Object.assign(Object.assign({},a),{columns:a.columns.map(((e,a)=>a===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===i){const t=e;return Object.assign(Object.assign({},t),{modules:t.modules.map(((e,t)=>{if(t===o){const t=e,i=[...t.modules];return i.splice(n,1),Object.assign(Object.assign({},t),{modules:i})}return e}))})}return e}))}):e))}):a))};this._updateLayout(c)}_openNestedChildSettings(e,t,i,o,n){this._selectedLayoutChild={parentRowIndex:e,parentColumnIndex:t,parentModuleIndex:i,childIndex:o},this._selectedNestedChildIndex=n,this._showLayoutChildSettings=!0}_regenerateModuleIds(e){e.id=`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,"horizontal"!==e.type&&"vertical"!==e.type||!e.modules||e.modules.forEach((e=>{this._regenerateModuleIds(e)})),"info"===e.type&&e.info_entities&&e.info_entities.forEach((e=>{e.id=`info-entity-${Date.now()}-${Math.random().toString(36).substr(2,9)}`})),"icon"===e.type&&e.icons&&e.icons.forEach((e=>{e.id=`icon-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}))}_deleteLayoutChildModule(e,t,i,o){const n=this._ensureLayout(),a=n.rows[e];if(!a||!a.columns[t])return;const r=a.columns[t];if(!r.modules||!r.modules[i])return;const s=r.modules[i];if(!s.modules||!s.modules[o])return;const l={rows:n.rows.map(((n,a)=>a===e?Object.assign(Object.assign({},n),{columns:n.columns.map(((e,n)=>n===t?Object.assign(Object.assign({},e),{modules:e.modules.map(((e,t)=>{if(t===i){const t=e;return Object.assign(Object.assign({},t),{modules:t.modules.filter(((e,t)=>t!==o))})}return e}))}):e))}):n))};this._updateLayout(l)}_getModuleSettingsTitle(e,t){if("external_card"===e.type){const t=e;if(t.name)return t.name;if(t.card_type){const e=O.M.getCardInfo(t.card_type);return e?e.name:t.card_type}return"3rd Party Card"}return`${(0,u.kg)("editor.layout.module_settings_title",t,"Module Settings")} - ${e.type.charAt(0).toUpperCase()+e.type.slice(1)}`}_getModuleDisplayName(e){var t,i;const o=e;if(o.module_name&&o.module_name.trim())return o.module_name;if("external_card"===e.type&&e.name)return e.name;const n=(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en";switch(e.type){case"text":return(0,u.kg)("editor.modules.text",n,"Text Module");case"image":return(0,u.kg)("editor.modules.image",n,"Image Module");case"icon":return(0,u.kg)("editor.modules.icon",n,"Icon Module");case"bar":return(0,u.kg)("editor.modules.bar",n,"Bar Module");case"info":return(0,u.kg)("editor.modules.info",n,"Info Module");case"button":return(0,u.kg)("editor.modules.button",n,"Button Module");case"separator":return(0,u.kg)("editor.modules.separator",n,"Separator Module");case"markdown":return(0,u.kg)("editor.modules.markdown",n,"Markdown Module");case"camera":return(0,u.kg)("editor.modules.camera",n,"Camera Module");case"graphs":return(0,u.kg)("editor.modules.graphs",n,"Graphs Module");case"external_card":return"3rd Party Card";default:return e.type.charAt(0).toUpperCase()+e.type.slice(1)+" Module"}}_generateModuleInfo(e){var t,i,o,n,a,r;const s=e,l=(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en";switch(e.type){case"text":return s.text&&s.text.trim()?s.text.length>50?`${s.text.substring(0,50)}...`:s.text:(0,u.kg)("editor.modules.no_text_configured",l,"No text configured");case"image":if(s.image_entity)return`Entity: ${s.image_entity}`;if(s.image_url){const e=s.image_url;if(e.startsWith("data:image/"))return(0,u.kg)("editor.modules.uploaded_image",l,"Uploaded image");const t=e.split("/").pop()||e;return t.length>30?`${t.substring(0,30)}...`:t}if(s.image_path){const e=s.image_path,t=e.split("/").pop()||e;return t.length>30?`${t.substring(0,30)}...`:t}return(0,u.kg)("editor.modules.no_image_configured",l,"No image configured");case"icon":const t=(null===(o=s.icons)||void 0===o?void 0:o.length)||0;if(t>1)return(0,u.kg)("editor.modules.icons_configured",l,"{count} icons configured").replace("{count}",t.toString());if(1===t){const e=s.icons[0];return(null==e?void 0:e.entity)?`Entity: ${e.entity}`:(null==e?void 0:e.icon)?`Icon: ${e.icon}`:"Icon configured"}return(0,u.kg)("editor.modules.no_icons_configured",l,"No icons configured");case"bar":return s.entity?`Entity: ${s.entity}`:(0,u.kg)("editor.modules.default_entity_suggestion",l,"Entity: sensor.battery_level");case"info":if(null===(n=s.info_entities)||void 0===n?void 0:n.length){const e=s.info_entities[0];if(null==e?void 0:e.entity)return s.info_entities.length>1?`${e.entity} + ${s.info_entities.length-1} more`:`Entity: ${e.entity}`}return s.entity?`Entity: ${s.entity}`:(null===(a=s.entities)||void 0===a?void 0:a.length)?`${s.entities.length} entities configured`:"No entity configured";case"button":return s.button_text&&s.button_text.trim()?s.button_text:s.text&&s.text.trim()?s.text:s.label&&s.label.trim()?s.label:"No button text configured";case"markdown":const i=s.content||s.markdown_content;if(i&&i.trim()){const e=i.replace(/[#*`>\-\[\]]/g,"").trim().split(" ").slice(0,8).join(" ");return e.length>40?`${e.substring(0,40)}...`:e}return"This is a markdown module that supports italic and bold text...";case"separator":const d=[];return s.separator_style&&d.push(`Style: ${s.separator_style}`),s.thickness&&d.push(`${s.thickness}px thick`),s.width_percent&&100!==s.width_percent&&d.push(`${s.width_percent}% width`),d.length>0?d.join(" • "):"Visual separator";case"external_card":return s.card_type?`Card: ${s.card_type}`:"No card type configured";default:return s.entity?`Entity: ${s.entity}`:(null===(r=s.entities)||void 0===r?void 0:r.length)?`${s.entities.length} entities`:void 0!==s.value?`Value: ${s.value}`:s.text?`Text: ${s.text.length>20?s.text.substring(0,20)+"...":s.text}`:`${e.type.charAt(0).toUpperCase()}${e.type.slice(1)} module`}}_renderSingleModuleWithAnimation(e){return w.E.renderModuleInCard(e,this.hass,this.config,{showLogicOverlay:!0})}_getRowPreviewAnimationData(e){const t=e.design||{},i=t.animation_type;if(!i||"none"===i)return{class:"",duration:"2s"};const o=t.animation_duration||"2s",n=t.animation_entity,a=t.animation_trigger_type||"state",r=t.animation_attribute,s=t.animation_state;if(!n)return{class:`animation-${i}`,duration:o};if(s&&this.hass){const e=this.hass.states[n];if(e){let t=!1;if("attribute"===a&&r){const i=e.attributes[r];t=String(i)===s}else t=e.state===s;if(t)return{class:`animation-${i}`,duration:o}}}return{class:"",duration:o}}_getColumnPreviewAnimationData(e){const t=e.design||{},i=t.animation_type;if(!i||"none"===i)return{class:"",duration:"2s"};const o=t.animation_duration||"2s",n=t.animation_entity,a=t.animation_trigger_type||"state",r=t.animation_attribute,s=t.animation_state;if(!n)return{class:`animation-${i}`,duration:o};if(s&&this.hass){const e=this.hass.states[n];if(e){let t=!1;if("attribute"===a&&r){const i=e.attributes[r];t=String(i)===s}else t=e.state===s;if(t)return{class:`animation-${i}`,duration:o}}}return{class:"",duration:o}}_renderRowPreview(e){var t,i,o,a;const r=this._getRowPreviewAnimationData(e),s=e.design||{},l=this._resolvePreviewBackgroundImageCSS(s),d=s.background_filter&&"none"!==s.background_filter,c=d?"has-background-filter":"",p=n.qy`
      <div
        class="row-preview-content ${c}"
        style="background: ${d?"transparent":(null===(t=e.design)||void 0===t?void 0:t.background_color)||e.background_color||"var(--ha-card-background, var(--card-background-color, #fff))"}; 
        background-image: ${d?"none":l}; 
        background-size: ${d?"auto":s.background_size||"cover"}; 
        background-position: ${d?"center":s.background_position||"center"}; 
        background-repeat: ${d?"repeat":s.background_repeat||"no-repeat"}; 
        backdrop-filter: ${s.backdrop_filter||"none"}; 
        gap: ${null!==(i=e.gap)&&void 0!==i?i:16}px;
        ${d?`\n          position: relative;\n          --bg-image: ${l};\n          --bg-size: ${s.background_size||"cover"};\n          --bg-position: ${s.background_position||"center"};\n          --bg-repeat: ${s.background_repeat||"no-repeat"};\n          --bg-filter: ${s.background_filter};\n        `:""}"
      >
        ${e.columns.map(((e,t)=>n.qy`<div class="column-preview">Column ${t+1}</div>`))}
      </div>
    `,h=(null===(a=null===(o=this.hass)||void 0===o?void 0:o.locale)||void 0===a?void 0:a.language)||"en";return n.qy`
      <div class="module-preview">
        <div
          class="preview-header"
          @click=${this._toggleRowColumnPreviewCollapsed}
          title="${(0,u.kg)("editor.layout.toggle_preview",h,"Toggle preview")}"
        >
          <span>${(0,u.kg)("editor.layout.live_preview",h,"Live Preview")}</span>
          <ha-icon
            class="preview-caret"
            icon="${this._isRowColumnPreviewCollapsed?"mdi:chevron-down":"mdi:chevron-up"}"
          ></ha-icon>
        </div>
        <div
          class="preview-content"
          style="display: ${this._isRowColumnPreviewCollapsed?"none":"block"};"
        >
          ${r.class?n.qy`
                <div
                  class="${r.class}"
                  style="display: inherit; width: inherit; height: inherit; flex: inherit; animation-duration: ${r.duration};"
                >
                  ${p}
                </div>
              `:p}
        </div>
      </div>
    `}_renderColumnPreview(e){var t,i,o,a,r,s,l,d;const c=this._getColumnPreviewAnimationData(e),p=e.design||{},h=this._resolvePreviewBackgroundImageCSS(p),g=p.background_filter&&"none"!==p.background_filter,m=g?"has-background-filter":"",f=n.qy`
      <div
        class="column-preview-content ${m}"
        style="background: ${g?"transparent":(null===(t=e.design)||void 0===t?void 0:t.background_color)||e.background_color||"var(--ha-card-background, var(--card-background-color, #fff))"}; 
        background-image: ${g?"none":h}; 
        background-size: ${g?"auto":p.background_size||"cover"}; 
        background-position: ${g?"center":p.background_position||"center"}; 
        background-repeat: ${g?"repeat":p.background_repeat||"no-repeat"}; 
        backdrop-filter: ${p.backdrop_filter||"none"};
        ${g?`\n          position: relative;\n          --bg-image: ${h};\n          --bg-size: ${p.background_size||"cover"};\n          --bg-position: ${p.background_position||"center"};\n          --bg-repeat: ${p.background_repeat||"no-repeat"};\n          --bg-filter: ${p.background_filter};\n        `:""}"
      >
        <p>
          ${(0,u.kg)("editor.layout.column_preview",(null===(o=null===(i=this.hass)||void 0===i?void 0:i.locale)||void 0===o?void 0:o.language)||"en","Column Preview")}
        </p>
        <div class="module-count">
          ${(0,u.kg)("editor.layout.modules_count",(null===(r=null===(a=this.hass)||void 0===a?void 0:a.locale)||void 0===r?void 0:r.language)||"en","{count} modules").replace("{count}",String((null===(s=e.modules)||void 0===s?void 0:s.length)||0))}
        </div>
      </div>
    `,_=(null===(d=null===(l=this.hass)||void 0===l?void 0:l.locale)||void 0===d?void 0:d.language)||"en";return n.qy`
      <div class="module-preview">
        <div
          class="preview-header"
          @click=${this._toggleRowColumnPreviewCollapsed}
          title="${(0,u.kg)("editor.layout.toggle_preview",_,"Toggle preview")}"
        >
          <span>${(0,u.kg)("editor.layout.live_preview",_,"Live Preview")}</span>
          <ha-icon
            class="preview-caret"
            icon="${this._isRowColumnPreviewCollapsed?"mdi:chevron-down":"mdi:chevron-up"}"
          ></ha-icon>
        </div>
        <div
          class="preview-content"
          style="display: ${this._isRowColumnPreviewCollapsed?"none":"block"};"
        >
          ${c.class?n.qy`
                <div
                  class="${c.class}"
                  style="display: inherit; width: inherit; height: inherit; flex: inherit; animation-duration: ${c.duration};"
                >
                  ${f}
                </div>
              `:f}
        </div>
      </div>
    `}_renderModuleSettings(){var e,t,i,o,a,r,l,d;if(!this._selectedModule)return n.qy``;const{rowIndex:c,columnIndex:p,moduleIndex:h}=this._selectedModule,g=null===(i=null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows[c])||void 0===t?void 0:t.columns[p])||void 0===i?void 0:i.modules[h];if(!g)return n.qy``;const m=(0,s.oD)().getModule(g.type),f="external_card"!==g.type&&m&&"function"==typeof m.renderActionsTab;if(("actions"===this._activeModuleTab&&!f||"other"===this._activeModuleTab||"yaml"===this._activeModuleTab&&"external_card"!==g.type)&&(this._activeModuleTab="general"),"external_card"===g.type){const e=g,t=O.M.hasCardEditor(e.card_type);t||"general"!==this._activeModuleTab||(this._activeModuleTab="yaml"),"actions"===this._activeModuleTab&&(this._activeModuleTab=t?"general":"yaml")}const _=(null===(a=null===(o=this.hass)||void 0===o?void 0:o.locale)||void 0===a?void 0:a.language)||"en";return n.qy`
      <div class="module-settings-popup">
        <div class="popup-overlay"></div>
        <div
          class="popup-content draggable-popup"
          id="module-popup-${null===(r=this._selectedModule)||void 0===r?void 0:r.rowIndex}-${null===(l=this._selectedModule)||void 0===l?void 0:l.columnIndex}-${null===(d=this._selectedModule)||void 0===d?void 0:d.moduleIndex}"
        >
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>${this._getModuleSettingsTitle(g,_)}</h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._selectedModule&&(this._duplicateModule(this._selectedModule.rowIndex,this._selectedModule.columnIndex,this._selectedModule.moduleIndex),this._closeModuleSettings())}}
                title="${(0,u.kg)("editor.layout.duplicate_module",_,"Duplicate Module")}"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._selectedModule&&(this._deleteModule(this._selectedModule.rowIndex,this._selectedModule.columnIndex,this._selectedModule.moduleIndex),this._closeModuleSettings())}}
                title="${(0,u.kg)("editor.layout.delete_module",_,"Delete Module")}"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._closeModuleSettings()}>×</button>
            </div>
          </div>

          <div class="popup-body">
            ${this._renderModulePreview()}

            <div class="module-tabs">
              ${"external_card"===g.type?O.M.hasCardEditor(g.card_type)?n.qy`
                      <button
                        class="module-tab ${"general"===this._activeModuleTab?"active":""}"
                        @click=${()=>this._activeModuleTab="general"}
                      >
                        ${(0,u.kg)("editor.layout.general_tab",_,"General")}
                      </button>
                    `:"":n.qy`
                    <button
                      class="module-tab ${"general"===this._activeModuleTab?"active":""}"
                      @click=${()=>this._activeModuleTab="general"}
                    >
                      ${(0,u.kg)("editor.layout.general_tab",_,"General")}
                    </button>
                  `}
              ${"external_card"===g.type?n.qy`
                    <button
                      class="module-tab ${"yaml"===this._activeModuleTab?"active":""}"
                      @click=${()=>{console.log("[UC] YAML tab clicked, current tab:",this._activeModuleTab),this._activeModuleTab="yaml",console.log("[UC] YAML tab set to:",this._activeModuleTab),this.requestUpdate(),console.log("[UC] YAML tab requestUpdate called")}}
                    >
                      YAML
                    </button>
                  `:f?n.qy`
                      <button
                        class="module-tab ${"actions"===this._activeModuleTab?"active":""}"
                        @click=${()=>this._activeModuleTab="actions"}
                      >
                        ${(0,u.kg)("editor.layout.actions_tab",_,"Actions")}
                      </button>
                    `:""}
              ${""}
              <button
                class="module-tab ${"logic"===this._activeModuleTab?"active":""}"
                @click=${()=>this._activeModuleTab="logic"}
              >
                ${(0,u.kg)("editor.layout.logic_tab",_,"Logic")}
              </button>
              <button
                class="module-tab ${"design"===this._activeModuleTab?"active":""}"
                @click=${()=>this._activeModuleTab="design"}
              >
                ${(0,u.kg)("editor.layout.design_tab",_,"Design")}
              </button>
            </div>

            <div class="module-tab-content">
              ${(()=>(console.log("[UC] Rendering tab content, active tab:",this._activeModuleTab,"module type:",g.type),""))()}
              ${"general"!==this._activeModuleTab||"external_card"===g.type&&!O.M.hasCardEditor(g.card_type)?"":this._renderGeneralTab(g)}
              ${"yaml"===this._activeModuleTab&&"external_card"===g.type?(()=>(console.log("[UC] Rendering YAML tab for module:",g.type,"card_type:",g.card_type),this._renderYamlTab(g)))():(()=>("yaml"===this._activeModuleTab&&console.log("[UC] YAML tab requested but module is not external_card, type:",g.type),""))()}
              ${"actions"===this._activeModuleTab&&f?this._renderActionsTab(g):""}
              ${this._activeModuleTab,""}
              ${"logic"===this._activeModuleTab?this._renderModuleLogicTab(g):""}
              ${"design"===this._activeModuleTab?this._renderDesignTab(g):""}
            </div>
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="${(0,u.kg)("editor.layout.drag_to_resize",_,"Drag to resize")}"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}_renderLayoutChildSettings(){var e,t,i,o,a,r;if(!this._selectedLayoutChild)return n.qy``;const{parentRowIndex:l,parentColumnIndex:d,parentModuleIndex:c,childIndex:p}=this._selectedLayoutChild,h=this._ensureLayout().rows[l];if(!h||!h.columns[d])return n.qy``;const g=h.columns[d];if(!g.modules||!g.modules[c])return n.qy``;const m=g.modules[c];let f;if(this._selectedNestedChildIndex>=0){if(!m.modules||!m.modules[p])return n.qy``;const e=m.modules[p];if(!e.modules||!e.modules[this._selectedNestedChildIndex])return n.qy``;f=e.modules[this._selectedNestedChildIndex]}else{if(!m.modules||!m.modules[p])return n.qy``;f=m.modules[p]}const _=(0,s.oD)().getModule(f.type),v="external_card"!==f.type&&_&&"function"==typeof _.renderActionsTab;if(("actions"===this._activeModuleTab&&!v||"other"===this._activeModuleTab||"yaml"===this._activeModuleTab&&"external_card"!==f.type)&&(this._activeModuleTab="general"),"external_card"===f.type){const e=O.M.hasCardEditor(f.card_type);e||"general"!==this._activeModuleTab||(this._activeModuleTab="yaml"),"actions"===this._activeModuleTab&&(this._activeModuleTab=e?"general":"yaml")}const b=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return n.qy`
      <div class="module-settings-popup">
        <div class="popup-overlay" @click=${()=>this._closeLayoutChildSettings()}></div>
        <div
          class="popup-content draggable-popup"
          id="child-popup-${null===(i=this._selectedLayoutChild)||void 0===i?void 0:i.parentRowIndex}-${null===(o=this._selectedLayoutChild)||void 0===o?void 0:o.parentColumnIndex}-${null===(a=this._selectedLayoutChild)||void 0===a?void 0:a.parentModuleIndex}-${null===(r=this._selectedLayoutChild)||void 0===r?void 0:r.childIndex}"
        >
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>
              ${(0,u.kg)("editor.layout.child_module_settings_title",b,"Child Module Settings")}
              -
              ${this._getModuleSettingsTitle(f,b).replace(/^(Module Settings - |Child Module Settings - )/,"")}
            </h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._selectedLayoutChild&&(this._duplicateLayoutChildModule(this._selectedLayoutChild.parentRowIndex,this._selectedLayoutChild.parentColumnIndex,this._selectedLayoutChild.parentModuleIndex,this._selectedLayoutChild.childIndex),this._closeLayoutChildSettings())}}
                title="Duplicate Child Module"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._selectedLayoutChild&&(this._deleteLayoutChildModule(this._selectedLayoutChild.parentRowIndex,this._selectedLayoutChild.parentColumnIndex,this._selectedLayoutChild.parentModuleIndex,this._selectedLayoutChild.childIndex),this._closeLayoutChildSettings())}}
                title="Delete Child Module"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._closeLayoutChildSettings()}>
                ×
              </button>
            </div>
          </div>

          <!-- Child module preview -->
          <div class="module-preview">
            <div
              class="preview-header"
              @click=${this._togglePreviewCollapsed}
              title="${(0,u.kg)("editor.layout.toggle_preview",b,"Toggle preview")}"
            >
              <span>${(0,u.kg)("editor.layout.live_preview",b,"Live Preview")}</span>
              <ha-icon
                class="preview-caret"
                icon="${this._isCurrentModulePreviewCollapsed()?"mdi:chevron-down":"mdi:chevron-up"}"
              ></ha-icon>
            </div>
            <div
              class="preview-content"
              style="display: ${this._isCurrentModulePreviewCollapsed()?"none":"block"};"
            >
              ${this._renderSingleModuleWithAnimation(f)}
            </div>
          </div>

          <div class="module-tabs">
            <button
              class="module-tab ${"general"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="general"}
            >
              ${(0,u.kg)("editor.layout.general_tab",b,"General")}
            </button>
            ${"external_card"===f.type?n.qy`
                  <button
                    class="module-tab ${"yaml"===this._activeModuleTab?"active":""}"
                    @click=${()=>{console.log("[UC] YAML tab clicked (layout child), current tab:",this._activeModuleTab),this._activeModuleTab="yaml",console.log("[UC] YAML tab set to:",this._activeModuleTab),this.requestUpdate(),console.log("[UC] YAML tab requestUpdate called")}}
                  >
                    YAML
                  </button>
                `:v?n.qy`
                    <button
                      class="module-tab ${"actions"===this._activeModuleTab?"active":""}"
                      @click=${()=>this._activeModuleTab="actions"}
                    >
                      ${(0,u.kg)("editor.layout.actions_tab",b,"Actions")}
                    </button>
                  `:""}
            ${""}
            <button
              class="module-tab ${"logic"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="logic"}
            >
              ${(0,u.kg)("editor.layout.logic_tab",b,"Logic")}
            </button>
            <button
              class="module-tab ${"design"===this._activeModuleTab?"active":""}"
              @click=${()=>this._activeModuleTab="design"}
            >
              ${(0,u.kg)("editor.layout.design_tab",b,"Design")}
            </button>
          </div>

          <div class="popup-body">
            <div class="module-tab-content">
              ${"general"===this._activeModuleTab?this._renderLayoutChildGeneralTab(f):""}
              ${"yaml"===this._activeModuleTab&&"external_card"===f.type?(()=>(console.log("[UC] Rendering YAML tab for layout child module:",f.type,"card_type:",f.card_type),this._renderLayoutChildYamlTab(f)))():""}
              ${"actions"===this._activeModuleTab&&v?this._renderLayoutChildActionsTab(f):""}
              ${this._activeModuleTab,""}
              ${"logic"===this._activeModuleTab?this._renderLayoutChildLogicTab(f):""}
              ${"design"===this._activeModuleTab?this._renderLayoutChildDesignTab(f):""}
            </div>
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}_renderLayoutChildGeneralTab(e){var t,i;const o=(0,s.oD)().getModule(e.type),a=(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en",r=n.qy`
      <div class="settings-section">
        <label>${(0,u.kg)("editor.layout_extra.module_name",a,"Module Name:")}</label>
        <input
          type="text"
          .value=${e.module_name||""}
          @input=${e=>this._updateLayoutChildModule({module_name:e.target.value})}
          placeholder="${(0,u.kg)("editor.layout_extra.module_name_placeholder",a,"Give this module a custom name to make it easier to identify in the editor.")}"
          class="module-name-input"
        />
        <div class="field-help">
          ${(0,u.kg)("editor.layout_extra.module_name_help",a,"Give this module a custom name to make it easier to identify in the editor.")}
        </div>
      </div>
    `;if(o){const t=o.renderGeneralTab(e,this.hass,this.config,(e=>this._updateLayoutChildModule(e)));return n.qy` ${r} ${t} `}return n.qy`
      ${r}
      <div class="settings-section">
        <div class="error-message">
          <ha-icon icon="mdi:alert-circle"></ha-icon>
          <span>No settings available for module type: ${e.type}</span>
        </div>
      </div>
    `}_renderLayoutChildActionsTab(e){const t=(0,s.oD)().getModule(e.type);return t&&"function"==typeof t.renderActionsTab?t.renderActionsTab(e,this.hass,this.config,(e=>this._updateLayoutChildModule(e)),(e=>this._updateConfig(e))):n.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have action settings</span>
        </div>
      </div>
    `}_renderLayoutChildYamlTab(e){const t=(0,s.oD)().getModule(e.type);return t&&"function"==typeof t.renderYamlTab?t.renderYamlTab(e,this.hass,this.config,(e=>this._updateLayoutChildModule(e))):n.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>YAML configuration not available for this module</span>
        </div>
      </div>
    `}_renderLayoutChildOtherTab(e){const t=(0,s.oD)().getModule(e.type);return t&&"function"==typeof t.renderOtherTab?t.renderOtherTab(e,this.hass,this.config,(e=>this._updateLayoutChildModule(e))):n.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have other settings</span>
        </div>
      </div>
    `}_renderModuleLogicTab(e){return f.X.render(e,this.hass,(e=>this._updateModule(e)))}_renderLayoutChildLogicTab(e){return f.X.render(e,this.hass,(e=>this._updateLayoutChildModule(e)))}_renderLayoutChildDesignTab(e){var t,i,o,a,r,s,l,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I,j,M,D,B,R,U,H,J,Q,N,L,F,q,V,K,G,Z,Y,W,X;const ee={color:e.color,text_align:e.text_align||(null===(t=e.design)||void 0===t?void 0:t.text_align),font_size:e.font_size||(null===(i=e.design)||void 0===i?void 0:i.font_size),line_height:e.line_height||(null===(o=e.design)||void 0===o?void 0:o.line_height),letter_spacing:e.letter_spacing||(null===(a=e.design)||void 0===a?void 0:a.letter_spacing),font_family:e.font_family||(null===(r=e.design)||void 0===r?void 0:r.font_family),font_weight:e.font_weight||(null===(s=e.design)||void 0===s?void 0:s.font_weight),text_transform:e.text_transform||(null===(l=e.design)||void 0===l?void 0:l.text_transform),font_style:e.font_style||(null===(d=e.design)||void 0===d?void 0:d.font_style),background_color:e.background_color||(null===(c=e.design)||void 0===c?void 0:c.background_color),background_image:e.background_image||(null===(p=e.design)||void 0===p?void 0:p.background_image),background_image_type:e.background_image_type||(null===(u=e.design)||void 0===u?void 0:u.background_image_type),background_image_entity:e.background_image_entity||(null===(h=e.design)||void 0===h?void 0:h.background_image_entity),background_repeat:e.background_repeat||(null===(g=e.design)||void 0===g?void 0:g.background_repeat),background_position:e.background_position||(null===(m=e.design)||void 0===m?void 0:m.background_position),background_size:e.background_size||(null===(f=e.design)||void 0===f?void 0:f.background_size),backdrop_filter:e.backdrop_filter||(null===(_=e.design)||void 0===_?void 0:_.backdrop_filter),background_filter:e.background_filter||(null===(v=e.design)||void 0===v?void 0:v.background_filter),width:e.width||(null===(b=e.design)||void 0===b?void 0:b.width),height:e.height||(null===(y=e.design)||void 0===y?void 0:y.height),max_width:e.max_width||(null===(x=e.design)||void 0===x?void 0:x.max_width),max_height:e.max_height||(null===(k=e.design)||void 0===k?void 0:k.max_height),min_width:e.min_width||(null===(w=e.design)||void 0===w?void 0:w.min_width),min_height:e.min_height||(null===(S=e.design)||void 0===S?void 0:S.min_height),margin_top:e.margin_top||(null===(O=e.design)||void 0===O?void 0:O.margin_top),margin_bottom:e.margin_bottom||(null===(A=e.design)||void 0===A?void 0:A.margin_bottom),margin_left:e.margin_left||(null===(C=e.design)||void 0===C?void 0:C.margin_left),margin_right:e.margin_right||(null===($=e.design)||void 0===$?void 0:$.margin_right),padding_top:e.padding_top||(null===(T=e.design)||void 0===T?void 0:T.padding_top),padding_bottom:e.padding_bottom||(null===(z=e.design)||void 0===z?void 0:z.padding_bottom),padding_left:e.padding_left||(null===(P=e.design)||void 0===P?void 0:P.padding_left),padding_right:e.padding_right||(null===(E=e.design)||void 0===E?void 0:E.padding_right),border_radius:e.border_radius||(null===(I=e.design)||void 0===I?void 0:I.border_radius),border_style:e.border_style||(null===(j=e.design)||void 0===j?void 0:j.border_style),border_width:e.border_width||(null===(M=e.design)||void 0===M?void 0:M.border_width),border_color:e.border_color||(null===(D=e.design)||void 0===D?void 0:D.border_color),position:e.position||(null===(B=e.design)||void 0===B?void 0:B.position),top:e.top||(null===(R=e.design)||void 0===R?void 0:R.top),bottom:e.bottom||(null===(U=e.design)||void 0===U?void 0:U.bottom),left:e.left||(null===(H=e.design)||void 0===H?void 0:H.left),right:e.right||(null===(J=e.design)||void 0===J?void 0:J.right),z_index:e.z_index||(null===(Q=e.design)||void 0===Q?void 0:Q.z_index),overflow:e.overflow||(null===(N=e.design)||void 0===N?void 0:N.overflow),clip_path:e.clip_path||(null===(L=e.design)||void 0===L?void 0:L.clip_path),box_shadow_h:e.box_shadow_h||(null===(F=e.design)||void 0===F?void 0:F.box_shadow_h),box_shadow_v:e.box_shadow_v||(null===(q=e.design)||void 0===q?void 0:q.box_shadow_v),box_shadow_blur:e.box_shadow_blur||(null===(V=e.design)||void 0===V?void 0:V.box_shadow_blur),box_shadow_spread:e.box_shadow_spread||(null===(K=e.design)||void 0===K?void 0:K.box_shadow_spread),box_shadow_color:e.box_shadow_color||(null===(G=e.design)||void 0===G?void 0:G.box_shadow_color),text_shadow_h:e.text_shadow_h||(null===(Z=e.design)||void 0===Z?void 0:Z.text_shadow_h),text_shadow_v:e.text_shadow_v||(null===(Y=e.design)||void 0===Y?void 0:Y.text_shadow_v),text_shadow_blur:e.text_shadow_blur||(null===(W=e.design)||void 0===W?void 0:W.text_shadow_blur),text_shadow_color:e.text_shadow_color||(null===(X=e.design)||void 0===X?void 0:X.text_shadow_color),animation_type:e.animation_type,animation_entity:e.animation_entity,animation_trigger_type:e.animation_trigger_type,animation_attribute:e.animation_attribute,animation_state:e.animation_state,intro_animation:e.intro_animation,outro_animation:e.outro_animation,animation_duration:e.animation_duration,animation_delay:e.animation_delay,animation_timing:e.animation_timing},te=n.qy`
      <ultra-global-design-tab
        .hass=${this.hass}
        .designProperties=${ee}
        .onUpdate=${e=>{var t,i;const o=this._ensureLayout(),n=this._selectedLayoutChild;let a;if(n){const e=((null===(i=null===(t=o.rows[n.parentRowIndex])||void 0===t?void 0:t.columns[n.parentColumnIndex])||void 0===i?void 0:i.modules)||[])[n.parentModuleIndex];a=((null==e?void 0:e.modules)||[])[n.childIndex]}const r=(null==a?void 0:a.design)||{},s={design:Object.assign(Object.assign({},r),e)};Object.prototype.hasOwnProperty.call(e,"background_color")&&(s.background_color=e.background_color,"bar"===(null==a?void 0:a.type)&&(s.bar_background_color=e.background_color)),Object.prototype.hasOwnProperty.call(e,"font_size")&&(s.font_size=e.font_size),this._updateLayoutChildModule(s)}}
      ></ultra-global-design-tab>
    `;return te}_renderRowSettings(){var e,t,i,o,a,r,s,l,d,c,p;if(-1===this._selectedRowForSettings)return n.qy``;const h=null===(e=this.config.layout)||void 0===e?void 0:e.rows[this._selectedRowForSettings];return h?n.qy`
      <div class="settings-popup">
        <div class="popup-overlay" @click=${()=>this._showRowSettings=!1}></div>
        <div class="popup-content draggable-popup" id="row-popup-${this._selectedRowForSettings}">
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>
              ${(0,u.kg)("editor.layout.row_settings",(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en","Row Settings")}
            </h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._duplicateRow(this._selectedRowForSettings),this._showRowSettings=!1}}
                title="Duplicate Row"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._deleteRow(this._selectedRowForSettings),this._showRowSettings=!1}}
                title="Delete Row"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._showRowSettings=!1}>
                ×
              </button>
            </div>
          </div>

          <div class="popup-body">
            ${this._renderRowPreview(h)}

            <div class="settings-tabs">
              <button
                class="settings-tab ${"general"===this._activeRowTab?"active":""}"
                @click=${()=>this._activeRowTab="general"}
              >
                ${(0,u.kg)("editor.layout.general_tab",(null===(a=null===(o=this.hass)||void 0===o?void 0:o.locale)||void 0===a?void 0:a.language)||"en","General")}
              </button>
              <button
                class="settings-tab ${"actions"===this._activeRowTab?"active":""}"
                @click=${()=>this._activeRowTab="actions"}
              >
                ${(0,u.kg)("editor.layout.actions_tab",(null===(s=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===s?void 0:s.language)||"en","Actions")}
              </button>
              <button
                class="settings-tab ${"logic"===this._activeRowTab?"active":""}"
                @click=${()=>this._activeRowTab="logic"}
              >
                ${(0,u.kg)("editor.layout.logic_tab",(null===(d=null===(l=this.hass)||void 0===l?void 0:l.locale)||void 0===d?void 0:d.language)||"en","Logic")}
              </button>
              <button
                class="settings-tab ${"design"===this._activeRowTab?"active":""}"
                @click=${()=>this._activeRowTab="design"}
              >
                ${(0,u.kg)("editor.layout.design_tab",(null===(p=null===(c=this.hass)||void 0===c?void 0:c.locale)||void 0===p?void 0:p.language)||"en","Design")}
              </button>
            </div>
            <div class="settings-tab-content">
              ${"general"===this._activeRowTab?this._renderRowGeneralTab(h):""}
              ${"actions"===this._activeRowTab?this._renderRowActionsTab(h):""}
              ${"logic"===this._activeRowTab?this._renderRowLogicTab(h):""}
              ${"design"===this._activeRowTab?this._renderRowDesignTab(h):""}
            </div>
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `:n.qy``}_renderColumnSettings(){var e,t,i,o,a,r,s,l,d,c,p,h,g,m;if(!this._selectedColumnForSettings)return n.qy``;const{rowIndex:f,columnIndex:_}=this._selectedColumnForSettings,v=null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows[f])||void 0===t?void 0:t.columns[_];return v?n.qy`
      <div class="settings-popup">
        <div class="popup-overlay" @click=${()=>this._showColumnSettings=!1}></div>
        <div
          class="popup-content draggable-popup"
          id="column-popup-${null===(i=this._selectedColumnForSettings)||void 0===i?void 0:i.rowIndex}-${null===(o=this._selectedColumnForSettings)||void 0===o?void 0:o.columnIndex}"
        >
          <div
            class="popup-header"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>
              ${(0,u.kg)("editor.layout.column_settings",(null===(r=null===(a=this.hass)||void 0===a?void 0:a.locale)||void 0===r?void 0:r.language)||"en","Column Settings")}
            </h3>
            <div class="header-actions">
              <button
                class="action-button duplicate-button"
                @click=${()=>{this._selectedColumnForSettings&&(this._duplicateColumn(this._selectedColumnForSettings.rowIndex,this._selectedColumnForSettings.columnIndex),this._showColumnSettings=!1)}}
                title="Duplicate Column"
              >
                <ha-icon icon="mdi:content-copy"></ha-icon>
              </button>
              <button
                class="action-button delete-button"
                @click=${()=>{this._selectedColumnForSettings&&(this._deleteColumn(this._selectedColumnForSettings.rowIndex,this._selectedColumnForSettings.columnIndex),this._showColumnSettings=!1)}}
                title="Delete Column"
              >
                <ha-icon icon="mdi:delete"></ha-icon>
              </button>
              <button class="close-button" @click=${()=>this._showColumnSettings=!1}>
                ×
              </button>
            </div>
          </div>

          <div class="popup-body">
            ${this._renderColumnPreview(v)}

            <div class="settings-tabs">
              <button
                class="settings-tab ${"general"===this._activeColumnTab?"active":""}"
                @click=${()=>this._activeColumnTab="general"}
              >
                ${(0,u.kg)("editor.layout.general_tab",(null===(l=null===(s=this.hass)||void 0===s?void 0:s.locale)||void 0===l?void 0:l.language)||"en","General")}
              </button>
              <button
                class="settings-tab ${"actions"===this._activeColumnTab?"active":""}"
                @click=${()=>this._activeColumnTab="actions"}
              >
                ${(0,u.kg)("editor.layout.actions_tab",(null===(c=null===(d=this.hass)||void 0===d?void 0:d.locale)||void 0===c?void 0:c.language)||"en","Actions")}
              </button>
              <button
                class="settings-tab ${"logic"===this._activeColumnTab?"active":""}"
                @click=${()=>this._activeColumnTab="logic"}
              >
                ${(0,u.kg)("editor.layout.logic_tab",(null===(h=null===(p=this.hass)||void 0===p?void 0:p.locale)||void 0===h?void 0:h.language)||"en","Logic")}
              </button>
              <button
                class="settings-tab ${"design"===this._activeColumnTab?"active":""}"
                @click=${()=>this._activeColumnTab="design"}
              >
                ${(0,u.kg)("editor.layout.design_tab",(null===(m=null===(g=this.hass)||void 0===g?void 0:g.locale)||void 0===m?void 0:m.language)||"en","Design")}
              </button>
            </div>
            <div class="settings-tab-content">
              ${"general"===this._activeColumnTab?this._renderColumnGeneralTab(v):""}
              ${"actions"===this._activeColumnTab?this._renderColumnActionsTab(v):""}
              ${"logic"===this._activeColumnTab?this._renderColumnLogicTab(v):""}
              ${"design"===this._activeColumnTab?this._renderColumnDesignTab(v):""}
            </div>
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".popup-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `:n.qy``}_renderRowGeneralTab(e){var t,i,o,a,r,s,l,d;return n.qy`
      <div class="settings-section">
        <label
          >${(0,u.kg)("editor.layout.row_name",(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en","Row Name")}:</label
        >
        <input
          type="text"
          .value=${e.row_name||""}
          placeholder="Give this row a custom name to make it easier to identify in the editor"
          @input=${e=>{const t=e.target.value;this._updateRow({row_name:t})}}
        />
        <div class="hint-text">
          Give this row a custom name to make it easier to identify in the editor.
        </div>
      </div>
      <div class="settings-section">
        <ultra-color-picker
          .label=${(0,u.kg)("editor.layout.row_background_color",(null===(a=null===(o=this.hass)||void 0===o?void 0:o.locale)||void 0===a?void 0:a.language)||"en","Row Background Color")}
          .value=${e.background_color||""}
          .defaultValue=${"var(--ha-card-background, var(--card-background-color, #fff))"}
          .hass=${this.hass}
          @value-changed=${e=>{const t=e.detail.value;this._updateRow({background_color:t})}}
        ></ultra-color-picker>
      </div>
      <div class="settings-section">
        <label
          >${(0,u.kg)("editor.layout.column_gap",(null===(s=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===s?void 0:s.language)||"en","Column Gap (px)")}:</label
        >
        <div class="gap-control-container" style="display: flex; align-items: center; gap: 12px;">
          <input
            type="range"
            class="gap-slider"
            min="0"
            max="50"
            step="1"
            .value="${null!==(l=e.gap)&&void 0!==l?l:16}"
            @input=${e=>{const t=e.target,i=Number(t.value);this._updateRow({gap:i})}}
          />
          <input
            type="number"
            class="gap-input"
            min="0"
            max="50"
            step="1"
            .value="${null!==(d=e.gap)&&void 0!==d?d:16}"
            @input=${e=>{const t=e.target,i=Number(t.value);isNaN(i)||this._updateRow({gap:i})}}
            @keydown=${e=>{"Enter"===e.key&&e.target.blur()}}
          />
        </div>
      </div>
    `}_renderRowActionsTab(e){const t=e;return(new class extends l.m{}).renderActionsTab(t,this.hass,this.config,(e=>{this._updateRow(e)}),(e=>this._updateConfig(e)))}_renderRowLogicTab(e){return f.X.render(e,this.hass,(e=>{this._updateRow(e)}))}_renderRowDesignTab(t){var i,o,a,r,s,l,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I,j;null==e||e.type;const M=Object.assign(Object.assign({},t.design),{background_color:(null===(i=t.design)||void 0===i?void 0:i.background_color)||t.background_color,padding_top:(null===(o=t.design)||void 0===o?void 0:o.padding_top)||(null===(a=t.padding)||void 0===a?void 0:a.toString()),padding_bottom:(null===(r=t.design)||void 0===r?void 0:r.padding_bottom)||(null===(s=t.padding)||void 0===s?void 0:s.toString()),padding_left:(null===(l=t.design)||void 0===l?void 0:l.padding_left)||(null===(d=t.padding)||void 0===d?void 0:d.toString()),padding_right:(null===(c=t.design)||void 0===c?void 0:c.padding_right)||(null===(p=t.padding)||void 0===p?void 0:p.toString()),border_radius:(null===(u=t.design)||void 0===u?void 0:u.border_radius)||(null===(h=t.border_radius)||void 0===h?void 0:h.toString()),border_color:(null===(g=t.design)||void 0===g?void 0:g.border_color)||t.border_color,border_width:(null===(m=t.design)||void 0===m?void 0:m.border_width)||(null===(f=t.border_width)||void 0===f?void 0:f.toString()),margin_top:(null===(_=t.design)||void 0===_?void 0:_.margin_top)||(null===(v=t.margin)||void 0===v?void 0:v.toString()),margin_bottom:(null===(b=t.design)||void 0===b?void 0:b.margin_bottom)||(null===(y=t.margin)||void 0===y?void 0:y.toString()),margin_left:(null===(x=t.design)||void 0===x?void 0:x.margin_left)||(null===(k=t.margin)||void 0===k?void 0:k.toString()),margin_right:(null===(w=t.design)||void 0===w?void 0:w.margin_right)||(null===(S=t.margin)||void 0===S?void 0:S.toString()),animation_type:null===(O=t.design)||void 0===O?void 0:O.animation_type,animation_entity:null===(A=t.design)||void 0===A?void 0:A.animation_entity,animation_trigger_type:null===(C=t.design)||void 0===C?void 0:C.animation_trigger_type,animation_attribute:null===($=t.design)||void 0===$?void 0:$.animation_attribute,animation_state:null===(T=t.design)||void 0===T?void 0:T.animation_state,animation_duration:null===(z=t.design)||void 0===z?void 0:z.animation_duration,intro_animation:null===(P=t.design)||void 0===P?void 0:P.intro_animation,outro_animation:null===(E=t.design)||void 0===E?void 0:E.outro_animation,animation_delay:null===(I=t.design)||void 0===I?void 0:I.animation_delay,animation_timing:null===(j=t.design)||void 0===j?void 0:j.animation_timing});return n.qy`
      <ultra-global-design-tab
        .hass=${this.hass}
        .designProperties=${M}
        @design-changed=${e=>{const i=e.detail,o=Object.assign(Object.assign({},t.design),i);this._updateRow({design:o})}}
      ></ultra-global-design-tab>
    `}_renderColumnGeneralTab(e){var t,i,o,a,r,s,l,d,c,p,h,g,m,f,_,v,b,y,x,k;return n.qy`
      <div class="settings-section">
        <label
          >${(0,u.kg)("editor.layout.vertical_alignment",(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en","Vertical Alignment")}:</label
        >
        <select
          .value=${e.vertical_alignment||"center"}
          @change=${e=>this._updateColumn({vertical_alignment:e.target.value})}
        >
          <option value="top">
            ${(0,u.kg)("editor.layout.alignment_top",(null===(a=null===(o=this.hass)||void 0===o?void 0:o.locale)||void 0===a?void 0:a.language)||"en","Top")}
          </option>
          <option value="center">
            ${(0,u.kg)("editor.layout.alignment_center",(null===(s=null===(r=this.hass)||void 0===r?void 0:r.locale)||void 0===s?void 0:s.language)||"en","Center")}
          </option>
          <option value="bottom">
            ${(0,u.kg)("editor.layout.alignment_bottom",(null===(d=null===(l=this.hass)||void 0===l?void 0:l.locale)||void 0===d?void 0:d.language)||"en","Bottom")}
          </option>
          <option value="stretch">
            ${(0,u.kg)("editor.layout.alignment_stretch",(null===(p=null===(c=this.hass)||void 0===c?void 0:c.locale)||void 0===p?void 0:p.language)||"en","Stretch")}
          </option>
        </select>
      </div>
      <div class="settings-section">
        <label
          >${(0,u.kg)("editor.layout.horizontal_alignment",(null===(g=null===(h=this.hass)||void 0===h?void 0:h.locale)||void 0===g?void 0:g.language)||"en","Horizontal Alignment")}:</label
        >
        <select
          .value=${e.horizontal_alignment||"center"}
          @change=${e=>this._updateColumn({horizontal_alignment:e.target.value})}
        >
          <option value="left">
            ${(0,u.kg)("editor.layout.alignment_left",(null===(f=null===(m=this.hass)||void 0===m?void 0:m.locale)||void 0===f?void 0:f.language)||"en","Left")}
          </option>
          <option value="center">
            ${(0,u.kg)("editor.layout.alignment_center",(null===(v=null===(_=this.hass)||void 0===_?void 0:_.locale)||void 0===v?void 0:v.language)||"en","Center")}
          </option>
          <option value="right">
            ${(0,u.kg)("editor.layout.alignment_right",(null===(y=null===(b=this.hass)||void 0===b?void 0:b.locale)||void 0===y?void 0:y.language)||"en","Right")}
          </option>
          <option value="stretch">
            ${(0,u.kg)("editor.layout.alignment_stretch",(null===(k=null===(x=this.hass)||void 0===x?void 0:x.locale)||void 0===k?void 0:k.language)||"en","Stretch")}
          </option>
        </select>
      </div>
    `}_renderColumnActionsTab(e){const t=e;return(new class extends l.m{}).renderActionsTab(t,this.hass,this.config,(e=>{this._updateColumn(e)}),(e=>this._updateConfig(e)))}_renderColumnLogicTab(e){return f.X.render(e,this.hass,(e=>{this._updateColumn(e)}))}_renderColumnDesignTab(e){var t,i,o,a,r,s,l,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I;const j=Object.assign(Object.assign({},e.design),{background_color:(null===(t=e.design)||void 0===t?void 0:t.background_color)||e.background_color,padding_top:(null===(i=e.design)||void 0===i?void 0:i.padding_top)||(null===(o=e.padding)||void 0===o?void 0:o.toString()),padding_bottom:(null===(a=e.design)||void 0===a?void 0:a.padding_bottom)||(null===(r=e.padding)||void 0===r?void 0:r.toString()),padding_left:(null===(s=e.design)||void 0===s?void 0:s.padding_left)||(null===(l=e.padding)||void 0===l?void 0:l.toString()),padding_right:(null===(d=e.design)||void 0===d?void 0:d.padding_right)||(null===(c=e.padding)||void 0===c?void 0:c.toString()),border_radius:(null===(p=e.design)||void 0===p?void 0:p.border_radius)||(null===(u=e.border_radius)||void 0===u?void 0:u.toString()),border_color:(null===(h=e.design)||void 0===h?void 0:h.border_color)||e.border_color,border_width:(null===(g=e.design)||void 0===g?void 0:g.border_width)||(null===(m=e.border_width)||void 0===m?void 0:m.toString()),margin_top:(null===(f=e.design)||void 0===f?void 0:f.margin_top)||(null===(_=e.margin)||void 0===_?void 0:_.toString()),margin_bottom:(null===(v=e.design)||void 0===v?void 0:v.margin_bottom)||(null===(b=e.margin)||void 0===b?void 0:b.toString()),margin_left:(null===(y=e.design)||void 0===y?void 0:y.margin_left)||(null===(x=e.margin)||void 0===x?void 0:x.toString()),margin_right:(null===(k=e.design)||void 0===k?void 0:k.margin_right)||(null===(w=e.margin)||void 0===w?void 0:w.toString()),animation_type:null===(S=e.design)||void 0===S?void 0:S.animation_type,animation_entity:null===(O=e.design)||void 0===O?void 0:O.animation_entity,animation_trigger_type:null===(A=e.design)||void 0===A?void 0:A.animation_trigger_type,animation_attribute:null===(C=e.design)||void 0===C?void 0:C.animation_attribute,animation_state:null===($=e.design)||void 0===$?void 0:$.animation_state,animation_duration:null===(T=e.design)||void 0===T?void 0:T.animation_duration,intro_animation:null===(z=e.design)||void 0===z?void 0:z.intro_animation,outro_animation:null===(P=e.design)||void 0===P?void 0:P.outro_animation,animation_delay:null===(E=e.design)||void 0===E?void 0:E.animation_delay,animation_timing:null===(I=e.design)||void 0===I?void 0:I.animation_timing});return n.qy`
      <ultra-global-design-tab
        .hass=${this.hass}
        .designProperties=${j}
        @design-changed=${t=>{const i=t.detail,o=Object.assign(Object.assign({},e.design),i);this._updateColumn({design:o})}}
      ></ultra-global-design-tab>
    `}_renderGeneralTab(e){var t,i;const o=(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en",a=(0,s.oD)().getModule(e.type),r="external_card"!==e.type?n.qy`
            <div class="settings-section">
              <label>${(0,u.kg)("editor.layout_extra.module_name",o,"Module Name:")}</label>
              <input
                type="text"
                .value=${e.module_name||""}
                @input=${e=>this._updateModule({module_name:e.target.value})}
                placeholder="${(0,u.kg)("editor.layout_extra.module_name_placeholder",o,"Give this module a custom name to make it easier to identify in the editor.")}"
                class="module-name-input"
              />
              <div class="field-help">
                ${(0,u.kg)("editor.layout_extra.module_name_help",o,"Give this module a custom name to make it easier to identify in the editor.")}
              </div>
            </div>
          `:"";if(a){const t=a.renderGeneralTab(e,this.hass,this.config,(e=>this._updateModule(e)));return"external_card"===e.type?t:(e.type,n.qy` ${r} ${t} `)}return n.qy`
      ${r}
      <div class="settings-section">
        <div class="error-message">
          <ha-icon icon="mdi:alert-circle"></ha-icon>
          <span>No settings available for module type: ${e.type}</span>
        </div>
      </div>
    `}_renderActionsTab(e){const t=(0,s.oD)().getModule(e.type);return t&&"function"==typeof t.renderActionsTab?t.renderActionsTab(e,this.hass,this.config,(e=>this._updateModule(e)),(e=>this._updateConfig(e))):n.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have action settings</span>
        </div>
      </div>
    `}_renderOtherTab(e){const t=(0,s.oD)().getModule(e.type);return t&&"function"==typeof t.renderOtherTab?t.renderOtherTab(e,this.hass,this.config,(e=>this._updateModule(e))):n.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>This module does not have other settings</span>
        </div>
      </div>
    `}_renderYamlTab(e){console.log("[UC] _renderYamlTab called for module type:",e.type);const t=(0,s.oD)().getModule(e.type);return console.log("[UC] Module handler found:",!!t),console.log("[UC] Module handler has renderYamlTab:",t&&"function"==typeof t.renderYamlTab),t&&"function"==typeof t.renderYamlTab?(console.log("[UC] Calling module handler renderYamlTab"),t.renderYamlTab(e,this.hass,this.config,(e=>this._updateModule(e)))):(console.log("[UC] Using fallback YAML tab (no renderYamlTab method)"),n.qy`
      <div class="settings-section">
        <div class="info-message">
          <ha-icon icon="mdi:information"></ha-icon>
          <span>YAML configuration not available for this module</span>
        </div>
      </div>
    `)}_addCondition(e){const t={id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"entity_state",entity:"",operator:"=",value:"",enabled:!0},i=[...e.display_conditions||[],t];this._updateModule({display_conditions:i})}_addRowCondition(e){const t={id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"entity_state",entity:"",operator:"=",value:"",enabled:!0},i=[...e.display_conditions||[],t];this._updateRow({display_conditions:i})}_addColumnCondition(e){const t={id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"entity_state",entity:"",operator:"=",value:"",enabled:!0},i=[...e.display_conditions||[],t];this._updateColumn({display_conditions:i})}_removeCondition(e,t){const i=(e.display_conditions||[]).filter(((e,i)=>i!==t));this._updateModule({display_conditions:i})}_updateCondition(e,t,i){const o=(e.display_conditions||[]).map(((e,o)=>o===t?Object.assign(Object.assign({},e),i):e));this._updateModule({display_conditions:o})}_duplicateCondition(e,t){const i=e.display_conditions||[],o=i[t];if(o){const e=Object.assign(Object.assign({},o),{id:`condition-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}),n=[...i.slice(0,t+1),e,...i.slice(t+1)];this._updateModule({display_conditions:n})}}_renderRowCondition(e,t,i){return this._renderConditionGeneric(t,i,(t=>{const o=(e.display_conditions||[]).map(((e,o)=>o===i?Object.assign(Object.assign({},e),t):e));this._updateRow({display_conditions:o})}),(()=>{const t=(e.display_conditions||[]).filter(((e,t)=>t!==i));this._updateRow({display_conditions:t})}),"row",i,(()=>e.display_conditions),(e=>this._updateRow({display_conditions:e})))}_renderColumnCondition(e,t,i){return this._renderConditionGeneric(t,i,(t=>{const o=(e.display_conditions||[]).map(((e,o)=>o===i?Object.assign(Object.assign({},e),t):e));this._updateColumn({display_conditions:o})}),(()=>{const t=(e.display_conditions||[]).filter(((e,t)=>t!==i));this._updateColumn({display_conditions:t})}),"column",i,(()=>e.display_conditions),(e=>this._updateColumn({display_conditions:e})))}_renderConditionGeneric(e,t,i,o,a,r,s,l){const d=!this._collapsedConditionIds.has(e.id);return n.qy`
      <div
        class="condition-item enabled"
        draggable="true"
        @dragstart=${e=>a&&this._onConditionDragStart(e,a,t)}
        @dragover=${this._onConditionDragOver}
        @drop=${e=>a&&s&&l&&"number"==typeof r?this._onConditionDrop(e,a,r,s,l):null}
      >
        <div class="condition-header">
          <div class="condition-header-left">
            <button
              type="button"
              class="condition-toggle ${d?"expanded":""}"
              @click=${()=>this._toggleConditionExpanded(e.id)}
            >
              <ha-icon icon="mdi:chevron-${d?"down":"right"}"></ha-icon>
            </button>
            <span class="condition-label">
              ${"entity_state"===e.type?e.entity||"Select Entity State":"entity_attribute"===e.type?e.entity||"Select Entity Attribute":"time"===e.type?"Time Condition":"Template Condition"}
            </span>
          </div>

          <div class="condition-actions">
            <button
              type="button"
              class="condition-action-btn delete"
              @click=${o}
              title="Delete"
            >
              <ha-icon icon="mdi:delete"></ha-icon>
            </button>
          </div>
        </div>

        ${d?n.qy`
              <div class="condition-content">
                <!-- Condition Type Selector -->
                <div class="condition-field">
                  <label>Condition Type:</label>
                  <select
                    .value=${e.type}
                    @change=${e=>{const t=e.target.value;i({type:t,entity:"",operator:"=",value:""})}}
                  >
                    <option value="entity_state">Entity State</option>
                    <option value="entity_attribute">Entity Attribute</option>
                    <option value="time">Date/Time</option>
                    <option value="template">Template</option>
                  </select>
                </div>

                ${"entity_state"===e.type?this._renderEntityConditionGeneric(e,i):""}
                ${"entity_attribute"===e.type?this._renderEntityAttributeConditionGeneric(e,i):""}

                <!-- Removed enable/disable toggle; delete the condition to disable -->
              </div>
            `:""}
      </div>
    `}_renderEntityConditionGeneric(e,t){return n.qy`
      <div class="entity-condition-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:e.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            @value-changed=${e=>t({entity:e.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${e.operator||"="}
            @change=${e=>t({operator:e.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==e.operator&&"no_value"!==e.operator?n.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${e.value||""}
                  @input=${e=>t({value:e.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderEntityAttributeConditionGeneric(e,t){return n.qy`
      <div class="entity-attribute-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:e.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            @value-changed=${e=>t({entity:e.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Attribute Selector -->
        <div class="condition-field">
          <label>Attribute Name:</label>
          <input
            type="text"
            .value=${e.attribute||""}
            @input=${e=>t({attribute:e.target.value})}
            placeholder="Enter attribute name (e.g., battery_level, friendly_name)"
          />
          <div class="field-help">
            Enter the exact attribute name from the entity. Common examples: battery_level,
            friendly_name, unit_of_measurement
          </div>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${e.operator||"="}
            @change=${e=>t({operator:e.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==e.operator&&"no_value"!==e.operator?n.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${e.value||""}
                  @input=${e=>t({value:e.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderCondition(e,t,i){const o=!this._collapsedConditionIds.has(t.id);return n.qy`
      <div class="condition-item enabled">
        <div class="condition-header">
          <div class="condition-header-left">
            <button
              type="button"
              class="condition-toggle ${o?"expanded":""}"
              @click=${()=>this._toggleConditionExpanded(t.id)}
            >
              <ha-icon icon="mdi:chevron-${o?"down":"right"}"></ha-icon>
            </button>
            <span class="condition-label">
              ${"entity_state"===t.type?t.entity||"Select Entity State":"entity_attribute"===t.type?t.entity||"Select Entity Attribute":"time"===t.type?"Time Condition":"Template Condition"}
            </span>
          </div>

          <div class="condition-actions">
            <button
              type="button"
              class="condition-action-btn"
              @click=${()=>this._duplicateCondition(e,i)}
              title="Duplicate"
            >
              <ha-icon icon="mdi:content-copy"></ha-icon>
            </button>
            <button
              type="button"
              class="condition-action-btn delete"
              @click=${()=>this._removeCondition(e,i)}
              title="Delete"
            >
              <ha-icon icon="mdi:delete"></ha-icon>
            </button>
            <button
              type="button"
              class="condition-drag-handle"
              title="Drag to reorder"
              draggable="true"
              @dragstart=${e=>this._onConditionDragStart(e,"module",i)}
              @dragover=${this._onConditionDragOver}
              @drop=${t=>this._onConditionDrop(t,"module",i,(()=>e.display_conditions),(e=>this._updateModule({display_conditions:e})))}
            >
              <ha-icon icon="mdi:drag"></ha-icon>
            </button>
          </div>
        </div>

        ${o?n.qy`
              <div class="condition-content">
                <!-- Condition Type Selector -->
                <div class="condition-field">
                  <label>Condition Type:</label>
                  <select
                    .value=${t.type}
                    @change=${t=>{const o=t.target.value;this._updateCondition(e,i,{type:o,entity:"",operator:"=",value:""})}}
                  >
                    <option value="entity_state">Entity State</option>
                    <option value="entity_attribute">Entity Attribute</option>
                    <option value="time">Date/Time</option>
                    <option value="template">Template</option>
                  </select>
                </div>

                ${"entity_state"===t.type?this._renderEntityCondition(e,t,i):""}
                ${"entity_attribute"===t.type?this._renderEntityAttributeCondition(e,t,i):""}
                ${"time"===t.type?this._renderTimeCondition(e,t,i):""}
                ${"template"===t.type?this._renderTemplateCondition(e,t,i):""}

                <!-- Removed enable/disable toggle; delete the condition to disable -->
              </div>
            `:""}
      </div>
    `}_renderEntityCondition(e,t,i){return n.qy`
      <div class="entity-condition-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:t.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            .computeLabel=${e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e.name?e.name.charAt(0).toUpperCase()+e.name.slice(1):""}}
            @value-changed=${t=>this._updateCondition(e,i,{entity:t.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${t.operator||"="}
            @change=${t=>this._updateCondition(e,i,{operator:t.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==t.operator&&"no_value"!==t.operator?n.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${t.value||""}
                  @input=${t=>this._updateCondition(e,i,{value:t.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderEntityAttributeCondition(e,t,i){return n.qy`
      <div class="entity-attribute-fields">
        <!-- Entity Picker -->
        <div class="condition-field">
          <ha-form
            .hass=${this.hass}
            .data=${{entity:t.entity||""}}
            .schema=${[{name:"entity",selector:{entity:{}},label:"Entity"}]}
            .computeLabel=${e=>{var t;return null!==(t=e.label)&&void 0!==t?t:e.name?e.name.charAt(0).toUpperCase()+e.name.slice(1):""}}
            @value-changed=${t=>this._updateCondition(e,i,{entity:t.detail.value.entity})}
          ></ha-form>
        </div>

        <!-- Attribute Selector -->
        <div class="condition-field">
          <label>Attribute Name:</label>
          <input
            type="text"
            .value=${t.attribute||""}
            @input=${t=>this._updateCondition(e,i,{attribute:t.target.value})}
            placeholder="Enter attribute name (e.g., battery_level, friendly_name)"
          />
          <div class="field-help">
            Enter the exact attribute name from the entity. Common examples: battery_level,
            friendly_name, unit_of_measurement
          </div>
        </div>

        <!-- Operator -->
        <div class="condition-field">
          <label>Operator:</label>
          <select
            .value=${t.operator||"="}
            @change=${t=>this._updateCondition(e,i,{operator:t.target.value})}
          >
            <option value="=">=</option>
            <option value="!=">!=</option>
            <option value=">">&gt;</option>
            <option value=">=">&gt;=</option>
            <option value="<">&lt;</option>
            <option value="<=">&lt;=</option>
            <option value="has_value">Has a value</option>
            <option value="no_value">Doesn't have a value</option>
          </select>
        </div>

        <!-- Value (if not has_value/no_value) -->
        ${"has_value"!==t.operator&&"no_value"!==t.operator?n.qy`
              <div class="condition-field">
                <label>Value:</label>
                <input
                  type="text"
                  .value=${t.value||""}
                  @input=${t=>this._updateCondition(e,i,{value:t.target.value})}
                  placeholder="Enter value to compare"
                />
              </div>
            `:""}
      </div>
    `}_renderTimeCondition(e,t,i){return n.qy`
      <div class="time-condition-fields">
        <p class="condition-info">Local time is ${(new Date).toLocaleString()}</p>

        <div class="time-inputs">
          <div class="condition-field">
            <label>From Time:</label>
            <input
              type="time"
              .value=${t.time_from||""}
              @input=${t=>this._updateCondition(e,i,{time_from:t.target.value})}
            />
          </div>

          <div class="condition-field">
            <label>To Time:</label>
            <input
              type="time"
              .value=${t.time_to||""}
              @input=${t=>this._updateCondition(e,i,{time_to:t.target.value})}
            />
          </div>
        </div>
      </div>
    `}_renderTemplateCondition(e,t,i){return n.qy`
      <div class="template-condition">
        <div class="condition-field">
          <label>Template:</label>
          <textarea
            .value=${t.template||""}
            @input=${t=>this._updateCondition(e,i,{template:t.target.value})}
            placeholder="{% if states('sensor.example') == 'on' %}true{% else %}false{% endif %}"
            rows="3"
          ></textarea>
        </div>
        <div class="template-help">Template should return 'true' or 'false'</div>
      </div>
    `}_renderLogicTab(e){var t,i;const o=e.display_conditions||[],a=e.display_mode||"always",r=(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en";return n.qy`
      <div class="logic-tab-content">
        <!-- Basic Conditions Section -->
        <div class="logic-section">
          <div class="section-header">
            <h3>${(0,u.kg)("editor.layout_logic.display_title",r,"Display this Element")}</h3>
          </div>

          <div class="template-description">
            ${(0,u.kg)("editor.layout_logic.display_desc",r,'Control when this element is shown. Choose "Always" to keep it visible. Select "If EVERY condition below is met" or "If ANY condition below is met" to display it only when the conditions you add below evaluate to true.')}
          </div>

          <div class="display-mode-selector">
            <select
              .value=${a}
              @change=${e=>{const t=e.target.value;this._updateModule({display_mode:t})}}
              class="display-mode-dropdown"
            >
              <option value="always">
                ${(0,u.kg)("editor.layout_logic.always",r,"Always")}
              </option>
              <option value="every">
                ${(0,u.kg)("editor.layout_logic.every",r,"If EVERY condition below is met")}
              </option>
              <option value="any">
                ${(0,u.kg)("editor.layout_logic.any",r,"If ANY condition below is met")}
              </option>
            </select>
          </div>
        </div>

        <!-- Conditions Section -->
        ${"always"!==a?n.qy`
              <div class="conditions-section">
                <div class="conditions-header">
                  <h4>${(0,u.kg)("editor.layout_logic.conditions",r,"Conditions")}</h4>
                  <button
                    type="button"
                    class="add-condition-btn"
                    @click=${()=>this._addCondition(e)}
                  >
                    <ha-icon icon="mdi:plus"></ha-icon>
                    ${(0,u.kg)("editor.layout_logic.add_condition",r,"Add Condition")}
                  </button>
                </div>

                <div class="conditions-list" @dragover=${this._onConditionDragOver}>
                  ${o.map(((t,i)=>n.qy`
                      <div
                        class="condition-row-dropzone"
                        @drop=${t=>this._onConditionDrop(t,"module",i,(()=>e.display_conditions),(e=>this._updateModule({display_conditions:e})))}
                      >
                        ${this._renderCondition(e,t,i)}
                      </div>
                    `))}
                </div>

                ${0===o.length?n.qy`
                      <div class="no-conditions">
                        <p>
                          ${(0,u.kg)("editor.layout_logic.no_conditions",r,'No conditions added yet. Click "Add Condition" to get started.')}
                        </p>
                      </div>
                    `:""}
              </div>
            `:""}

        <!-- Advanced Template Mode removed; use Template condition type in Conditions -->
      </div>
    `}_renderDesignTab(e){var t,i,o,a,r,s,l,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S,O,A,C,$,T,z,P,E,I;const j="bar"===(null==e?void 0:e.type),M={color:(null===(t=e.design)||void 0===t?void 0:t.color)||e.color,text_align:(()=>{var t;return void 0!==e.text_align?e.text_align:void 0!==e.alignment?e.alignment:void 0!==(null===(t=e.design)||void 0===t?void 0:t.text_align)?e.design.text_align:void 0})(),font_size:(()=>{var t;const i=(null===(t=e.design)||void 0===t?void 0:t.font_size)||e.font_size;if(null!=i&&""!==i)return i.toString()})(),line_height:null===(o=(null===(i=e.design)||void 0===i?void 0:i.line_height)||e.line_height)||void 0===o?void 0:o.toString(),letter_spacing:(null===(a=e.design)||void 0===a?void 0:a.letter_spacing)||e.letter_spacing,font_family:(null===(r=e.design)||void 0===r?void 0:r.font_family)||e.font_family,font_weight:(()=>{var t;const i=(null===(t=e.design)||void 0===t?void 0:t.font_weight)||e.font_weight;if(null!=i&&""!==i)return i})(),text_transform:(()=>{var t;const i=(null===(t=e.design)||void 0===t?void 0:t.text_transform)||e.text_transform;if(null!=i&&""!==i)return i})(),font_style:(null===(s=e.design)||void 0===s?void 0:s.font_style)||e.font_style,background_color:null===(l=e.design)||void 0===l?void 0:l.background_color,background_image:e.background_image,background_image_type:e.background_image_type,background_image_entity:e.background_image_entity,backdrop_filter:e.backdrop_filter,background_filter:e.background_filter,width:j?null===(d=e.design)||void 0===d?void 0:d.width:e.width,height:j?null===(c=e.design)||void 0===c?void 0:c.height:e.height,max_width:e.max_width,max_height:e.max_height,min_width:e.min_width,min_height:e.min_height,margin_top:(null===(u=null===(p=e.margin)||void 0===p?void 0:p.top)||void 0===u?void 0:u.toString())||e.margin_top,margin_bottom:(null===(g=null===(h=e.margin)||void 0===h?void 0:h.bottom)||void 0===g?void 0:g.toString())||e.margin_bottom,margin_left:(null===(f=null===(m=e.margin)||void 0===m?void 0:m.left)||void 0===f?void 0:f.toString())||e.margin_left,margin_right:(null===(v=null===(_=e.margin)||void 0===_?void 0:_.right)||void 0===v?void 0:v.toString())||e.margin_right,padding_top:(null===(y=null===(b=e.padding)||void 0===b?void 0:b.top)||void 0===y?void 0:y.toString())||e.padding_top,padding_bottom:(null===(k=null===(x=e.padding)||void 0===x?void 0:x.bottom)||void 0===k?void 0:k.toString())||e.padding_bottom,padding_left:(null===(S=null===(w=e.padding)||void 0===w?void 0:w.left)||void 0===S?void 0:S.toString())||e.padding_left,padding_right:(null===(A=null===(O=e.padding)||void 0===O?void 0:O.right)||void 0===A?void 0:A.toString())||e.padding_right,border_radius:(null===($=null===(C=e.border)||void 0===C?void 0:C.radius)||void 0===$?void 0:$.toString())||(null===(T=e.border_radius)||void 0===T?void 0:T.toString()),border_style:(null===(z=e.border)||void 0===z?void 0:z.style)||e.border_style,border_width:(null===(E=null===(P=e.border)||void 0===P?void 0:P.width)||void 0===E?void 0:E.toString())||e.border_width,border_color:(null===(I=e.border)||void 0===I?void 0:I.color)||e.border_color,position:e.position,top:e.top,bottom:e.bottom,left:e.left,right:e.right,z_index:e.z_index,text_shadow_h:e.text_shadow_h,text_shadow_v:e.text_shadow_v,text_shadow_blur:e.text_shadow_blur,text_shadow_color:e.text_shadow_color,box_shadow_h:e.box_shadow_h,box_shadow_v:e.box_shadow_v,box_shadow_blur:e.box_shadow_blur,box_shadow_spread:e.box_shadow_spread,box_shadow_color:e.box_shadow_color,overflow:e.overflow,clip_path:e.clip_path,animation_type:e.animation_type,animation_entity:e.animation_entity,animation_trigger_type:e.animation_trigger_type,animation_attribute:e.animation_attribute,animation_state:e.animation_state,intro_animation:e.intro_animation,outro_animation:e.outro_animation,animation_duration:e.animation_duration,animation_delay:e.animation_delay,animation_timing:e.animation_timing,smart_scaling:e.smart_scaling};return n.qy`
      <ultra-global-design-tab
        .hass=${this.hass}
        .designProperties=${M}
        .onUpdate=${e=>{this._updateModuleDesign(e)}}
      ></ultra-global-design-tab>
    `}_renderTextDesignTab(e){var t,i,o,a,r,s;if("text"===e.type){const i=e;return n.qy`
        <!-- Text Color Section -->
        <div class="settings-section">
          <ultra-color-picker
            .label=${"Text Color"}
            .value=${i.color||""}
            .defaultValue=${"var(--primary-text-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({color:t}),this._loadGoogleFont(i.font_family)}}
          ></ultra-color-picker>
        </div>

        <!-- Font Family Dropdown -->
        <div class="settings-section">
          <label>Font:</label>
          <select
            .value=${i.font_family||"default"}
            @change=${e=>{const t=e.target.value;this._updateModule({font_family:t}),this._loadGoogleFont(t)}}
            class="font-dropdown"
          >
            ${C.map((e=>n.qy`
                <option value="${e.value}" ?selected=${i.font_family===e.value}>
                  ${e.label}
                </option>
              `))}
            <optgroup label="Fonts from Typography settings">
              ${$.map((e=>n.qy`
                  <option value="${e.value}" ?selected=${i.font_family===e.value}>
                    ${e.label}
                  </option>
                `))}
            </optgroup>
            <optgroup label="Web safe font combinations (do not need to be loaded)">
              ${T.map((e=>n.qy`
                  <option value="${e.value}" ?selected=${i.font_family===e.value}>
                    ${e.label}
                  </option>
                `))}
            </optgroup>
          </select>
        </div>

        <!-- Font Size -->
        <div class="settings-section">
          <label>Font Size (px):</label>
          <input
            type="text"
            .value=${(null!==(t=i.font_size)&&void 0!==t?t:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({font_size:void 0});const i=parseFloat(t);!Number.isNaN(i)&&/^\s*-?\d*\.?\d*\s*(px|rem|em|%)?\s*$/i.test(t)&&this._updateModule({font_size:i})}}
            placeholder=""
            class="font-size-input"
          />
        </div>

        <!-- Text Alignment -->
        <div class="settings-section">
          <label>Text Alignment:</label>
          <div class="alignment-buttons">
            ${["left","center","right"].map((e=>n.qy`
                <button
                  class="alignment-btn ${i.alignment===e?"active":""}"
                  @click=${()=>this._updateModule({alignment:e})}
                >
                  <ha-icon icon="mdi:format-align-${e}"></ha-icon>
                </button>
              `))}
          </div>
        </div>

        <!-- Text Formatting -->
        <div class="settings-section">
          <label>Text Formatting:</label>
          <div class="format-buttons">
            <button
              class="format-btn ${i.bold?"active":""}"
              @click=${()=>this._updateModule({bold:!i.bold})}
            >
              <ha-icon icon="mdi:format-bold"></ha-icon>
            </button>
            <button
              class="format-btn ${i.italic?"active":""}"
              @click=${()=>this._updateModule({italic:!i.italic})}
            >
              <ha-icon icon="mdi:format-italic"></ha-icon>
            </button>
            <button
              class="format-btn ${i.uppercase?"active":""}"
              @click=${()=>this._updateModule({uppercase:!i.uppercase})}
            >
              <ha-icon icon="mdi:format-letter-case-upper"></ha-icon>
            </button>
            <button
              class="format-btn ${i.strikethrough?"active":""}"
              @click=${()=>this._updateModule({strikethrough:!i.strikethrough})}
            >
              <ha-icon icon="mdi:format-strikethrough"></ha-icon>
            </button>
          </div>
        </div>
      `}if("separator"===e.type){const t=e;return n.qy`
        <div class="settings-section">
          <ultra-color-picker
            .label=${"Separator Color"}
            .value=${t.color||""}
            .defaultValue=${"var(--divider-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({color:t})}}
          ></ultra-color-picker>
        </div>
      `}if("bar"===e.type){const t=e;return n.qy`
        <!-- Bar Colors -->
        <div class="settings-section">
          <ultra-color-picker
            .label=${"Bar Color"}
            .value=${t.bar_color||""}
            .defaultValue=${"var(--primary-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({bar_color:t})}}
          ></ultra-color-picker>
        </div>

        <div class="settings-section">
          <ultra-color-picker
            .label=${"Background Color"}
            .value=${t.background_color||""}
            .defaultValue=${"var(--secondary-background-color)"}
            .hass=${this.hass}
            @value-changed=${e=>{const t=e.detail.value;this._updateModule({background_color:t})}}
          ></ultra-color-picker>
        </div>

        <!-- Bar Dimensions -->
        <div class="settings-section">
          <label>Bar Height (px):</label>
          <input
            type="text"
            .value=${(null!==(i=t.height)&&void 0!==i?i:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({height:void 0});const i=parseFloat(t);Number.isNaN(i)||this._updateModule({height:i})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Border Radius (px):</label>
          <input
            type="text"
            .value=${(null!==(o=t.border_radius)&&void 0!==o?o:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({border_radius:void 0});const i=parseFloat(t);Number.isNaN(i)||this._updateModule({border_radius:i})}}
            class="number-input"
          />
        </div>

        <!-- Value Display Options -->
        <div class="settings-section">
          <label class="checkbox-wrapper">
            <input
              type="checkbox"
              .checked=${!1!==t.show_value}
              @change=${e=>this._updateModule({show_value:e.target.checked})}
            />
            Show Value
          </label>
        </div>

        ${t.show_value?n.qy`
              <div class="settings-section">
                <label>Value Position:</label>
                <div class="value-position-buttons">
                  ${["inside","outside","none"].map((e=>n.qy`
                      <button
                        class="position-btn ${t.value_position===e?"active":""}"
                        @click=${()=>this._updateModule({value_position:e})}
                      >
                        ${e.charAt(0).toUpperCase()+e.slice(1)}
                      </button>
                    `))}
                </div>
              </div>
            `:""}

        <div class="settings-section">
          <label class="checkbox-wrapper">
            <input
              type="checkbox"
              .checked=${!1!==t.show_percentage}
              @change=${e=>this._updateModule({show_percentage:e.target.checked})}
            />
            Show as Percentage
          </label>
        </div>

        <div class="settings-section">
          <label class="checkbox-wrapper">
            <input
              type="checkbox"
              .checked=${!1!==t.animation}
              @change=${e=>this._updateModule({animation:e.target.checked})}
            />
            Animation
          </label>
        </div>
      `}if("image"===e.type){const t=e;return n.qy`
        <!-- Image Alignment -->
        <div class="settings-section">
          <label>Image Alignment:</label>
          <div class="alignment-buttons">
            ${["left","center","right"].map((e=>n.qy`
                <button
                  class="alignment-btn ${t.alignment===e?"active":""}"
                  @click=${()=>this._updateModule({alignment:e})}
                >
                  <ha-icon icon="mdi:format-align-${e}"></ha-icon>
                </button>
              `))}
          </div>
        </div>

        <!-- Image Dimensions -->
        <div class="settings-section">
          <label>Width (px):</label>
          <input
            type="text"
            .value=${(null!==(a=t.image_width)&&void 0!==a?a:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({image_width:void 0});const i=parseFloat(t);Number.isNaN(i)||this._updateModule({image_width:i})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Height (px):</label>
          <input
            type="text"
            .value=${(null!==(r=t.image_height)&&void 0!==r?r:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({image_height:void 0});const i=parseFloat(t);Number.isNaN(i)||this._updateModule({image_height:i})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Border Radius (px):</label>
          <input
            type="text"
            .value=${(null!==(s=t.border_radius)&&void 0!==s?s:"").toString()}
            @input=${e=>{const t=e.target.value;if(""===t)return void this._updateModule({border_radius:void 0});const i=parseFloat(t);Number.isNaN(i)||this._updateModule({border_radius:i})}}
            class="number-input"
          />
        </div>

        <div class="settings-section">
          <label>Image Fit:</label>
          <div class="value-position-buttons">
            ${["cover","contain","fill","none"].map((e=>n.qy`
                <button
                  class="position-btn ${t.image_fit===e?"active":""}"
                  @click=${()=>this._updateModule({image_fit:e})}
                >
                  ${e.charAt(0).toUpperCase()+e.slice(1)}
                </button>
              `))}
          </div>
        </div>
      `}return n.qy`<div class="settings-section">
      <p>Design options not available for ${e.type} modules.</p>
    </div>`}_renderBackgroundDesignTab(e){return n.qy`
      <div class="settings-section">
        <ultra-color-picker
          .label=${"Background Color"}
          .value=${e.background_color||""}
          .defaultValue=${"var(--ha-card-background, var(--card-background-color, #fff))"}
          .hass=${this.hass}
          @value-changed=${e=>{const t=e.detail.value;this._updateModule({background_color:t})}}
        ></ultra-color-picker>

        <div class="property-group">
          <label>Background Image Type:</label>
          <select
            .value=${e.background_image_type||"none"}
            @change=${e=>{const t=e.target.value;this._updateModule({background_image_type:t})}}
            class="property-select"
          >
            <option value="none">None</option>
            <option value="upload">Upload Image</option>
            <option value="entity">Entity Image</option>
            <option value="url">Image URL</option>
          </select>
        </div>

        ${"upload"===e.background_image_type?n.qy`
              <div class="property-group">
                <label>Upload Background Image:</label>
                <div class="upload-container">
                  <div class="file-upload-row">
                    <label class="file-upload-button">
                      <div class="button-content">
                        <ha-icon icon="mdi:upload"></ha-icon>
                        <span class="button-label">Choose File</span>
                      </div>
                      <input
                        type="file"
                        accept="image/*"
                        @change=${this._handleBackgroundImageUpload}
                        style="display: none"
                      />
                    </label>
                    <div class="path-display">
                      ${e.background_image?n.qy`<span class="uploaded-path" title="${e.background_image}">
                            ${this._truncatePath(e.background_image)}
                          </span>`:n.qy`<span class="no-file">No file chosen</span>`}
                    </div>
                  </div>
                </div>
              </div>
            `:""}
        ${"entity"===e.background_image_type?n.qy`
              <div class="property-group">
                <label>Background Image Entity:</label>
                <ha-entity-picker
                  .hass=${this.hass}
                  .value=${e.background_image_entity||""}
                  @value-changed=${e=>{this._updateModule({background_image_entity:e.detail.value})}}
                  .label=${"Select entity with image attribute"}
                  allow-custom-entity
                ></ha-entity-picker>
              </div>
            `:""}
        ${"url"===e.background_image_type?n.qy`
              <div class="property-group">
                <label>Background Image URL:</label>
                <input
                  type="text"
                  .value=${e.background_image||""}
                  @input=${e=>{const t=e.target.value;this._updateModule({background_image:t})}}
                  placeholder="https://example.com/image.jpg"
                  class="property-input"
                />
              </div>
            `:""}
        ${e.background_image_type&&"none"!==e.background_image_type?n.qy`
              <div class="property-group">
                <label>Background Size:</label>
                <select
                  .value=${this._getBackgroundSizeDropdownValue(e.background_size)}
                  @change=${e=>{const t=e.target.value;this._updateModule({background_size:t})}}
                  class="property-select"
                >
                  <option value="cover">Cover</option>
                  <option value="contain">Contain</option>
                  <option value="auto">Auto</option>
                  <option value="custom">Custom</option>
                </select>
              </div>

              ${"custom"===this._getBackgroundSizeDropdownValue(e.background_size)?n.qy`
                    <div class="property-group">
                      <label>Custom Width:</label>
                      <input
                        type="text"
                        .value=${this._getCustomSizeValue(e.background_size,"width")}
                        @input=${t=>{const i=t.target.value,o=this._getCustomSizeValue(e.background_size,"height"),n=i&&o?`${i} ${o}`:i||o||"auto";this._updateModule({background_size:n})}}
                        placeholder="100px, 50%, auto"
                        class="property-input"
                      />
                    </div>
                    <div class="property-group">
                      <label>Custom Height:</label>
                      <input
                        type="text"
                        .value=${this._getCustomSizeValue(e.background_size,"height")}
                        @input=${t=>{const i=t.target.value,o=this._getCustomSizeValue(e.background_size,"width"),n=o&&i?`${o} ${i}`:o||i||"auto";this._updateModule({background_size:n})}}
                        placeholder="100px, 50%, auto"
                        class="property-input"
                      />
                    </div>
                  `:""}

              <div class="property-group">
                <label>Background Repeat:</label>
                <select
                  .value=${e.background_repeat||"no-repeat"}
                  @change=${e=>{const t=e.target.value;this._updateModule({background_repeat:t})}}
                  class="property-select"
                >
                  <option value="no-repeat">No Repeat</option>
                  <option value="repeat">Repeat</option>
                  <option value="repeat-x">Repeat X</option>
                  <option value="repeat-y">Repeat Y</option>
                </select>
              </div>

              <div class="property-group">
                <label>Background Position:</label>
                <select
                  .value=${e.background_position||"center center"}
                  @change=${e=>{const t=e.target.value;this._updateModule({background_position:t})}}
                  class="property-select"
                >
                  <option value="left top">Left Top</option>
                  <option value="left center">Left Center</option>
                  <option value="left bottom">Left Bottom</option>
                  <option value="center top">Center Top</option>
                  <option value="center center">Center</option>
                  <option value="center bottom">Center Bottom</option>
                  <option value="right top">Right Top</option>
                  <option value="right center">Right Center</option>
                  <option value="right bottom">Right Bottom</option>
                </select>
              </div>
            `:""}
      </div>
    `}_renderSpacingDesignTab(e){var t,i,o,a,r,s,l,d,c,p,u,h,g,m,f,_;return n.qy`
      <div class="spacing-grid">
        <div class="spacing-section">
          <h4>Margin</h4>
          <div class="spacing-cross">
            <input
              type="text"
              placeholder="Top"
              .value=${(null!==(i=null===(t=e.margin)||void 0===t?void 0:t.top)&&void 0!==i?i:"").toString()}
              @input=${t=>{const i=t.target.value,o=""===i?void 0:parseFloat(i);this._updateModule({margin:Object.assign(Object.assign({},e.margin),{top:o})})}}
            />
            <div class="spacing-row">
              <input
                type="text"
                placeholder="Left"
                .value=${(null!==(a=null===(o=e.margin)||void 0===o?void 0:o.left)&&void 0!==a?a:"").toString()}
                @input=${t=>this._updateModule({margin:Object.assign(Object.assign({},e.margin),{left:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
              <span class="spacing-center">M</span>
              <input
                type="text"
                placeholder="Right"
                .value=${(null!==(s=null===(r=e.margin)||void 0===r?void 0:r.right)&&void 0!==s?s:"").toString()}
                @input=${t=>this._updateModule({margin:Object.assign(Object.assign({},e.margin),{right:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
            </div>
            <input
              type="text"
              placeholder="Bottom"
              .value=${(null!==(d=null===(l=e.margin)||void 0===l?void 0:l.bottom)&&void 0!==d?d:"").toString()}
              @input=${t=>this._updateModule({margin:Object.assign(Object.assign({},e.margin),{bottom:""===t.target.value?void 0:parseFloat(t.target.value)})})}
            />
          </div>
        </div>

        <div class="spacing-section">
          <h4>Padding</h4>
          <div class="spacing-cross">
            <input
              type="text"
              placeholder="Top"
              .value=${(null!==(p=null===(c=e.padding)||void 0===c?void 0:c.top)&&void 0!==p?p:"").toString()}
              @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{top:""===t.target.value?void 0:parseFloat(t.target.value)})})}
            />
            <div class="spacing-row">
              <input
                type="text"
                placeholder="Left"
                .value=${(null!==(h=null===(u=e.padding)||void 0===u?void 0:u.left)&&void 0!==h?h:"").toString()}
                @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{left:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
              <span class="spacing-center">P</span>
              <input
                type="text"
                placeholder="Right"
                .value=${(null!==(m=null===(g=e.padding)||void 0===g?void 0:g.right)&&void 0!==m?m:"").toString()}
                @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{right:""===t.target.value?void 0:parseFloat(t.target.value)})})}
              />
            </div>
            <input
              type="text"
              placeholder="Bottom"
              .value=${(null!==(_=null===(f=e.padding)||void 0===f?void 0:f.bottom)&&void 0!==_?_:"").toString()}
              @input=${t=>this._updateModule({padding:Object.assign(Object.assign({},e.padding),{bottom:""===t.target.value?void 0:parseFloat(t.target.value)})})}
            />
          </div>
        </div>
      </div>
    `}firstUpdated(e){super.firstUpdated(e)}updated(e){if(super.updated(e),this._addFixedMenuPositionToSelects(),e.has("hass")&&this.hass&&k.ucDashboardScannerService.initialize(this.hass),e.has("_showModuleSelector")&&this._showModuleSelector&&setTimeout((()=>{var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#module-selector-popup");t&&this._initializePopupPosition(t)}),0),e.has("_selectedModule")&&this._selectedModule&&setTimeout((()=>{var e,t,i,o;const n=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(`#module-popup-${null===(t=this._selectedModule)||void 0===t?void 0:t.rowIndex}-${null===(i=this._selectedModule)||void 0===i?void 0:i.columnIndex}-${null===(o=this._selectedModule)||void 0===o?void 0:o.moduleIndex}`);n&&this._initializePopupPosition(n)}),0),e.has("_selectedLayoutChild")&&this._selectedLayoutChild&&setTimeout((()=>{var e,t,i,o,n;const a=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(`#child-popup-${null===(t=this._selectedLayoutChild)||void 0===t?void 0:t.parentRowIndex}-${null===(i=this._selectedLayoutChild)||void 0===i?void 0:i.parentColumnIndex}-${null===(o=this._selectedLayoutChild)||void 0===o?void 0:o.parentModuleIndex}-${null===(n=this._selectedLayoutChild)||void 0===n?void 0:n.childIndex}`);a&&this._initializePopupPosition(a)}),0),this._shouldRestoreScroll&&null!==this._savedScrollPosition){const e=this._savedScrollPosition,t=()=>{var t,i;const o=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".popup-body"),n=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector(".selector-body"),a=o||n;a&&null!==e&&(a.style.scrollBehavior="auto",a.scrollTop=e,setTimeout((()=>{a&&(a.style.scrollBehavior="")}),100))};t(),requestAnimationFrame((()=>{t(),setTimeout((()=>{t()}),50)})),this._shouldRestoreScroll=!1,this._savedScrollPosition=null}}_renderBorderDesignTab(e){var t,i;return n.qy`
      <div class="settings-section">
        <label>Border Radius (px):</label>
        <input
          type="text"
          .value=${(null!==(i=null===(t=e.border)||void 0===t?void 0:t.radius)&&void 0!==i?i:"").toString()}
          @input=${t=>this._updateModule({border:Object.assign(Object.assign({},e.border),{radius:""===t.target.value?void 0:parseFloat(t.target.value)})})}
        />
      </div>
    `}render(){var e,t;const i=this._ensureLayout(),o=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return n.qy`
      <div class="layout-builder">
        <div class="builder-header">
          <h3>${(0,u.kg)("editor.tabs.layout",o,"Layout Builder")}</h3>
          <div class="header-buttons">
            <button
              class="undo-btn"
              @click=${e=>{e.stopPropagation(),this._undo()}}
              ?disabled=${!this._canUndo()}
              title="${(0,u.kg)("editor.layout.undo_tooltip",o,"Undo last change (Ctrl+Z)")}"
            >
              <ha-icon icon="mdi:undo"></ha-icon>
              <span>${(0,u.kg)("editor.layout.undo",o,"Undo")}</span>
            </button>
            <button
              class="redo-btn"
              @click=${e=>{e.stopPropagation(),this._redo()}}
              ?disabled=${!this._canRedo()}
              title="${(0,u.kg)("editor.layout.redo_tooltip",o,"Redo last undone change (Ctrl+Y)")}"
            >
              <ha-icon icon="mdi:redo"></ha-icon>
              <span>${(0,u.kg)("editor.layout.redo",o,"Redo")}</span>
            </button>
            <button
              class="add-row-btn"
              @click=${e=>{e.stopPropagation(),this._addRow()}}
              title="${(0,u.kg)("editor.layout.add_row_tooltip",o,"Add a new row to your layout")}"
            >
              <ha-icon icon="mdi:plus"></ha-icon>
              ${(0,u.kg)("editor.layout.add_row",o,"Add Row")}
            </button>
          </div>
        </div>

        <div class="rows-container">
          ${i.rows.map(((e,t)=>{var i,o,a,r;return n.qy`
              <div
                class="row-builder"
                draggable="true"
                @dragstart=${e=>this._onDragStart(e,"row",t)}
                @dragend=${this._onDragEnd}
                @dragover=${this._onDragOver}
                @dragenter=${e=>this._onDragEnter(e,"row",t)}
                @dragleave=${this._onDragLeave}
                @drop=${e=>this._onDrop(e,"row",t)}
                class="${"row"===(null===(i=this._dropTarget)||void 0===i?void 0:i.type)&&(null===(o=this._dropTarget)||void 0===o?void 0:o.rowIndex)===t?"drop-target":""}"
              >
                <div class="row-header">
                  <div class="row-title">
                    <div class="row-title-left">
                      <div class="row-drag-handle" title="Drag to move row">
                        <ha-icon icon="mdi:drag"></ha-icon>
                      </div>
                      <span class="row-name-top"
                        >${e.row_name||`Row ${t+1}`}</span
                      >
                      <button
                        class="column-layout-btn"
                        @click=${e=>{e.stopPropagation(),this._openColumnLayoutSelector(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="Change Column Layout"
                      >
                        <span class="layout-icon">${this._getCurrentLayoutDisplay(e)}</span>
                      </button>
                      <span class="column-layout-text">${this._getCurrentLayoutText(e)}</span>
                    </div>
                    <div class="row-title-right">
                      <button
                        class="row-settings-btn"
                        @click=${e=>{e.stopPropagation(),this._openRowSettings(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="${(0,u.kg)("editor.layout.row_settings",(null===(r=null===(a=this.hass)||void 0===a?void 0:a.locale)||void 0===r?void 0:r.language)||"en","Row Settings")}"
                      >
                        <ha-icon icon="mdi:cog"></ha-icon>
                      </button>
                      <button
                        class="row-collapse-btn"
                        @click=${e=>this._toggleRowCollapsed(t,e)}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="${this._collapsedRows.has(t)?"Expand row":"Collapse row"}"
                      >
                        <ha-icon
                          icon="mdi:chevron-down"
                          style="transform: rotate(${this._collapsedRows.has(t)?"-90deg":"0deg"}); transition: transform 0.2s ease;"
                        ></ha-icon>
                      </button>
                    </div>
                  </div>
                  <div
                    class="row-bottom"
                    style="display: ${this._collapsedRows.has(t)?"none":"flex"};"
                  >
                    <div class="row-actions-left">
                      <button
                        class="row-add-column-btn"
                        @click=${e=>{e.stopPropagation(),this._addColumn(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="Add Column to Row"
                      >
                        <ha-icon icon="mdi:plus"></ha-icon>
                      </button>
                      <button
                        class="row-export-btn"
                        @click=${e=>{e.stopPropagation(),this._exportRow(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="Export row"
                      >
                        <ha-icon icon="mdi:export"></ha-icon>
                      </button>
                      <button
                        class="row-paste-btn"
                        @click=${e=>{e.stopPropagation(),this._pasteRowFromClipboard(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="Import from clipboard"
                      >
                        <ha-icon icon="mdi:clipboard-text"></ha-icon>
                      </button>
                    </div>
                    <div class="row-actions-right">
                      <button
                        class="row-favorite-btn"
                        @click=${e=>{e.stopPropagation(),this._saveRowAsFavorite(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="Save as favorite"
                      >
                        <ha-icon icon="mdi:heart"></ha-icon>
                      </button>
                      <button
                        class="row-duplicate-btn"
                        @click=${e=>{e.stopPropagation(),this._duplicateRow(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="Duplicate Row"
                      >
                        <ha-icon icon="mdi:content-copy"></ha-icon>
                      </button>
                      <button
                        class="delete-row-btn"
                        @click=${e=>{e.stopPropagation(),this._deleteRow(t)}}
                        @mousedown=${e=>e.stopPropagation()}
                        @dragstart=${e=>e.preventDefault()}
                        title="Delete Row"
                      >
                        <ha-icon icon="mdi:delete"></ha-icon>
                      </button>
                      <div class="row-more-container">
                        <button
                          class="row-more-btn"
                          @click=${e=>{e.stopPropagation(),this._toggleMoreMenu(t)}}
                          @mousedown=${e=>e.stopPropagation()}
                          @dragstart=${e=>e.preventDefault()}
                          title="More actions"
                        >
                          <ha-icon icon="mdi:dots-vertical"></ha-icon>
                        </button>
                        ${this._openMoreMenuRowIndex===t?n.qy`
                              <div
                                class="row-more-menu"
                                @click=${e=>e.stopPropagation()}
                              >
                                <button
                                  class="more-menu-item paste"
                                  @click=${()=>{this._pasteRowFromClipboard(t),this._openMoreMenuRowIndex=-1}}
                                >
                                  <ha-icon icon="mdi:clipboard-text"></ha-icon>
                                  <span>Paste from Clipboard</span>
                                </button>
                                <button
                                  class="more-menu-item favorite"
                                  @click=${()=>{this._saveRowAsFavorite(t),this._openMoreMenuRowIndex=-1}}
                                >
                                  <ha-icon icon="mdi:heart"></ha-icon>
                                  <span>Save as Favorite</span>
                                </button>
                                <button
                                  class="more-menu-item export"
                                  @click=${()=>{this._exportRow(t),this._openMoreMenuRowIndex=-1}}
                                >
                                  <ha-icon icon="mdi:export"></ha-icon>
                                  <span>Export Row</span>
                                </button>
                              </div>
                            `:""}
                      </div>
                    </div>
                  </div>
                </div>
                <div
                  class="columns-container"
                  data-layout="${e.column_layout||"1-2-1-2"}"
                  style="display: ${this._collapsedRows.has(t)?"none":"flex"};"
                >
                  ${e.columns&&e.columns.length>0?e.columns.map(((e,i)=>{var o,a,r,s,l,d,c,p;return n.qy`
                          <div
                            class="column-builder"
                            draggable="true"
                            @dragstart=${e=>this._onDragStart(e,"column",t,i)}
                            @dragend=${this._onDragEnd}
                            @dragover=${this._onDragOver}
                            @dragenter=${e=>this._onDragEnter(e,"column",t,i)}
                            @dragleave=${this._onDragLeave}
                            @drop=${e=>this._onDrop(e,"column",t,i)}
                            class="${"column"===(null===(o=this._dropTarget)||void 0===o?void 0:o.type)&&(null===(a=this._dropTarget)||void 0===a?void 0:a.rowIndex)===t&&(null===(r=this._dropTarget)||void 0===r?void 0:r.columnIndex)===i?"drop-target":""}"
                          >
                            <div class="column-header">
                              <div class="column-title">
                                <div class="column-drag-handle" title="Drag to move column">
                                  <ha-icon icon="mdi:drag"></ha-icon>
                                </div>
                                <button
                                  class="column-collapse-btn"
                                  @click=${e=>this._toggleColumnCollapsed(t,i,e)}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="${this._collapsedColumns.has(`${t}-${i}`)?"Expand column":"Collapse column"}"
                                >
                                  <ha-icon
                                    icon="mdi:chevron-down"
                                    style="transform: rotate(${this._collapsedColumns.has(`${t}-${i}`)?"-90deg":"0deg"}); transition: transform 0.2s ease;"
                                  ></ha-icon>
                                </button>
                                <span>Column ${i+1}</span>
                              </div>
                              <div class="column-actions">
                                <button
                                  class="column-add-module-btn"
                                  @click=${e=>{e.stopPropagation(),this._openModuleSelector(t,i)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="Add Module to Column"
                                >
                                  <ha-icon icon="mdi:plus"></ha-icon>
                                </button>
                                <button
                                  class="column-duplicate-btn"
                                  @click=${e=>{e.stopPropagation(),this._duplicateColumn(t,i)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="Duplicate Column"
                                >
                                  <ha-icon icon="mdi:content-copy"></ha-icon>
                                </button>
                                <button
                                  class="column-settings-btn"
                                  @click=${e=>{e.stopPropagation(),this._openColumnSettings(t,i)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="${(0,u.kg)("editor.layout.column_settings",(null===(l=null===(s=this.hass)||void 0===s?void 0:s.locale)||void 0===l?void 0:l.language)||"en","Column Settings")}"
                                >
                                  <ha-icon icon="mdi:cog"></ha-icon>
                                </button>
                                <button
                                  class="column-delete-btn"
                                  @click=${e=>{e.stopPropagation(),this._deleteColumn(t,i)}}
                                  @mousedown=${e=>e.stopPropagation()}
                                  @dragstart=${e=>e.preventDefault()}
                                  title="Delete Column"
                                >
                                  <ha-icon icon="mdi:delete"></ha-icon>
                                </button>
                              </div>
                            </div>
                            <div
                              class="modules-container ${"column"===(null===(d=this._dropTarget)||void 0===d?void 0:d.type)&&(null===(c=this._dropTarget)||void 0===c?void 0:c.rowIndex)===t&&(null===(p=this._dropTarget)||void 0===p?void 0:p.columnIndex)===i?"drop-target":""}"
                              @dragover=${this._onDragOver}
                              @dragenter=${e=>this._onDragEnter(e,"column",t,i)}
                              @dragleave=${this._onDragLeave}
                              @drop=${e=>this._onDrop(e,"column",t,i)}
                              style="display: ${this._collapsedColumns.has(`${t}-${i}`)?"none":"block"};"
                            >
                              ${e.modules.map(((e,o)=>{var a,r,s,l;return n.qy`
                                  <div
                                    class="module-item"
                                    draggable="true"
                                    @dragstart=${e=>this._onDragStart(e,"module",t,i,o)}
                                    @dragend=${this._onDragEnd}
                                    @dragover=${this._onDragOver}
                                    @dragenter=${e=>this._onDragEnter(e,"module",t,i,o)}
                                    @dragleave=${this._onDragLeave}
                                    @drop=${e=>this._onDrop(e,"module",t,i,o)}
                                    class="${"module"===(null===(a=this._dropTarget)||void 0===a?void 0:a.type)&&(null===(r=this._dropTarget)||void 0===r?void 0:r.rowIndex)===t&&(null===(s=this._dropTarget)||void 0===s?void 0:s.columnIndex)===i&&(null===(l=this._dropTarget)||void 0===l?void 0:l.moduleIndex)===o?"drop-target":""}"
                                  >
                                    <div
                                      class="module-content"
                                      @click=${()=>this._openModuleSettings(t,i,o)}
                                    >
                                      ${this._renderSingleModule(e,t,i,o)}
                                    </div>
                                  </div>
                                `}))}
                              <button
                                class="add-module-btn"
                                @click=${e=>{e.stopPropagation(),this._openModuleSelector(t,i)}}
                              >
                                <ha-icon icon="mdi:plus"></ha-icon>
                                Add Module
                              </button>
                            </div>
                          </div>
                        `})):n.qy`
                        <div class="empty-row-message">
                          <p>This row has no columns.</p>
                          <button
                            class="add-module-btn"
                            @click=${e=>{e.stopPropagation(),this._openModuleSelector(t,0)}}
                            style="margin-top: 8px;"
                          >
                            <ha-icon icon="mdi:plus"></ha-icon>
                            Add Module (will create column automatically)
                          </button>
                        </div>
                      `}
                  <div class="add-column-container">
                    <button
                      class="add-column-btn"
                      @click=${e=>{e.stopPropagation(),this._addColumn(t)}}
                      title="Add Column"
                    >
                      <ha-icon icon="mdi:plus"></ha-icon>
                      Add Column
                    </button>
                  </div>
                </div>
              </div>
            `}))}
        </div>

        ${this._showModuleSelector?this._renderModuleSelector():""}
        ${this._showModuleSettings?this._renderModuleSettings():""}
        ${this._showLayoutChildSettings?this._renderLayoutChildSettings():""}
        ${this._showRowSettings?this._renderRowSettings():""}
        ${this._showColumnSettings?this._renderColumnSettings():""}
        ${this._showColumnLayoutSelector?this._renderColumnLayoutSelector():""}
        ${this._renderFavoriteDialog()} ${this._renderImportDialog()}
      </div>
    `}_renderModuleSelector(){const e=(0,s.oD)().getAllModules().filter((e=>"external_card"!==e.metadata.type)),t=this._selectedLayoutModuleIndex>=0;return n.qy`
      <style>
        .module-category-tabs {
          display: flex;
          gap: 8px;
          margin-bottom: 16px;
          padding: 12px;
          background: var(--secondary-background-color);
          border-radius: 12px;
        }

        .category-tab {
          flex: 1;
          padding: 12px 16px;
          border: 2px solid transparent;
          border-radius: 8px;
          background: var(--card-background-color);
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          font-weight: 600;
          transition: all 0.3s;
          font-family: inherit;
        }

        .category-tab.active {
          border-color: var(--primary-color);
          background: linear-gradient(
            135deg,
            rgba(3, 169, 244, 0.1) 0%,
            rgba(3, 169, 244, 0.05) 100%
          );
        }

        .category-tab.pro-tab {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
        }

        .category-tab.pro-tab.active {
          background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
          border-color: rgba(255, 255, 255, 0.3);
          box-shadow: 0 4px 12px rgba(245, 87, 108, 0.3);
        }

        .pro-badge-mini {
          font-size: 12px;
        }

        .pro-upgrade-prompt {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          padding: 32px;
          border-radius: 16px;
          text-align: center;
        }

        .pro-upgrade-prompt .pro-icon {
          font-size: 64px;
          margin-bottom: 16px;
          animation: proPulse 2s ease-in-out infinite;
        }

        .pro-upgrade-prompt .pro-icon ha-icon {
          --mdc-icon-size: 64px;
        }

        @keyframes proPulse {
          0%,
          100% {
            transform: scale(1);
            opacity: 1;
          }
          50% {
            transform: scale(1.05);
            opacity: 0.9;
          }
        }

        .pro-upgrade-prompt h3 {
          font-size: 24px;
          margin: 0 0 12px 0;
          font-weight: 700;
        }

        .pro-upgrade-prompt p {
          opacity: 0.95;
          margin: 0 0 20px 0;
          font-size: 16px;
        }

        .pro-features {
          list-style: none;
          padding: 0;
          margin: 24px 0;
          display: grid;
          gap: 12px;
          text-align: left;
          max-width: 300px;
          margin: 24px auto;
        }

        .pro-features li {
          display: flex;
          align-items: center;
          gap: 10px;
          font-size: 15px;
          font-weight: 500;
        }

        .pro-features li ha-icon {
          --mdc-icon-size: 20px;
        }

        .upgrade-btn {
          padding: 14px 32px;
          background: rgba(255, 255, 255, 0.25);
          border: 2px solid rgba(255, 255, 255, 0.3);
          border-radius: 8px;
          color: white;
          font-weight: 700;
          font-size: 16px;
          cursor: pointer;
          backdrop-filter: blur(10px);
          transition: all 0.3s;
          font-family: inherit;
        }

        .upgrade-btn:hover {
          background: rgba(255, 255, 255, 0.35);
          transform: translateY(-2px);
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        }
      </style>
      <div class="module-selector-popup">
        <div
          class="popup-overlay"
          @click=${()=>{this._showModuleSelector=!1,this._selectedLayoutModuleIndex=-1,this._selectedNestedChildIndex=-1}}
        ></div>
        <div class="selector-content draggable-popup" id="module-selector-popup">
          <div
            class="selector-header"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupDrag(e,t)}}
          >
            <div class="selector-header-top">
              <h3>Add Module</h3>
              <button
                class="close-button"
                title="Close"
                @mousedown=${e=>e.stopPropagation()}
                @click=${()=>{this._showModuleSelector=!1,this._selectedLayoutModuleIndex=-1,this._selectedNestedChildIndex=-1}}
              >
                ×
              </button>
            </div>
            ${t?n.qy`<p class="selector-subtitle">
                  Adding to layout module (content modules and layout modules allowed up to 2 levels
                  deep)
                </p>`:""}
          </div>

          <!-- Tab Navigation -->
          <div class="module-selector-tabs">
            <button
              class="tab-button ${"modules"===this._activeModuleSelectorTab?"active":""}"
              @click=${()=>this._activeModuleSelectorTab="modules"}
            >
              <ha-icon icon="mdi:puzzle"></ha-icon>
              <span>Modules</span>
            </button>
            <button
              class="tab-button ${"3rdparty"===this._activeModuleSelectorTab?"active":""}"
              @click=${()=>this._activeModuleSelectorTab="3rdparty"}
            >
              <ha-icon icon="mdi:card-multiple"></ha-icon>
              <span>3rd Party</span>
            </button>
            <button
              class="tab-button ${"presets"===this._activeModuleSelectorTab?"active":""}"
              @click=${()=>{this._activeModuleSelectorTab="presets",_.O.refreshWordPressPresets()}}
            >
              <ha-icon icon="mdi:palette"></ha-icon>
              <span>Presets</span>
            </button>
            <button
              class="tab-button ${"favorites"===this._activeModuleSelectorTab?"active":""}"
              @click=${()=>this._activeModuleSelectorTab="favorites"}
            >
              <ha-icon icon="mdi:heart"></ha-icon>
              <span>Favorites</span>
            </button>
          </div>

          <div class="selector-body">
            ${"modules"===this._activeModuleSelectorTab?this._renderModulesTab(e,t):""}
            ${"3rdparty"===this._activeModuleSelectorTab?this._render3rdPartyTab():""}
            ${"presets"===this._activeModuleSelectorTab?this._renderPresetsTab():""}
            ${"favorites"===this._activeModuleSelectorTab?this._renderFavoritesTab():""}
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}_formatCategoryTitle(e){return e.charAt(0).toUpperCase()+e.slice(1)}_renderModulesTab(e,t){var i,o,a,r;const s=S.x.checkIntegrationAuth(this.hass),l="pro"===(null===(i=null==s?void 0:s.subscription)||void 0===i?void 0:i.tier)&&"active"===(null===(o=null==s?void 0:s.subscription)||void 0===o?void 0:o.status),d=!!s,c=e.filter((e=>{var t;return!(null===(t=e.metadata.tags)||void 0===t?void 0:t.includes("pro"))})),p=e.filter((e=>{var t;return null===(t=e.metadata.tags)||void 0===t?void 0:t.includes("pro")})),u="standard"===this._activeModuleCategoryTab?c:p,h=u.filter((e=>"layout"===e.metadata.category&&"pagebreak"!==e.metadata.type));let g=u.filter((e=>"layout"!==e.metadata.category)),m=null,f=0;if(t&&this._selectedLayoutModuleIndex>=0){let t=null===(r=null===(a=this.config.layout.rows[this._selectedRowIndex])||void 0===a?void 0:a.columns[this._selectedColumnIndex])||void 0===r?void 0:r.modules[this._selectedLayoutModuleIndex];if(this._selectedNestedChildIndex>=0){const e=t;e&&e.modules&&e.modules[this._selectedNestedChildIndex]&&(t=e.modules[this._selectedNestedChildIndex],f=2)}else f=1;if(m=(null==t?void 0:t.type)||null,t&&("horizontal"===t.type||"vertical"===t.type||"slider"===t.type)){const e=t;e.modules&&e.modules.length>0&&e.modules.some((e=>"horizontal"===e.type||"vertical"===e.type||"slider"===e.type))&&f>=2&&(f=3)}if("slider"===m){const t=e.find((e=>"pagebreak"===e.metadata.type));t&&(g=[t,...g])}}let _=[];return t&&m?f<2&&(_=h):t||(_=h),n.qy`
      <!-- PRO/Standard Tab Navigation -->
      <div class="module-category-tabs">
        <button
          class="category-tab ${"standard"===this._activeModuleCategoryTab?"active":""}"
          @click=${()=>this._activeModuleCategoryTab="standard"}
        >
          <ha-icon icon="mdi:puzzle"></ha-icon>
          <span>Standard</span>
        </button>
        <button
          class="category-tab pro-tab ${"pro"===this._activeModuleCategoryTab?"active":""}"
          @click=${()=>this._activeModuleCategoryTab="pro"}
        >
          <ha-icon icon="mdi:star-circle"></ha-icon>
          <span>PRO</span>
          <span class="pro-badge-mini">⭐</span>
        </button>
      </div>

      ${"pro"!==this._activeModuleCategoryTab||l?n.qy`
            ${_.length>0?n.qy`
                  <div class="module-category layout-containers">
                    <h4 class="category-title">Layout Containers</h4>
                    <p class="category-description">
                      ${t?f<2?`Add horizontal or vertical layout modules (${2-f} more level${2-f!=1?"s":""} allowed)`:"Maximum nesting depth reached - only content modules allowed":"Create containers to organize your modules"}
                    </p>
                    <div class="module-types layout-modules">
                      ${_.map((e=>{const t=e.metadata,i="horizontal"===t.type,o="vertical"===t.type;return n.qy`
                          <button
                            class="module-type-btn layout-module ${i?"horizontal-layout":""} ${o?"vertical-layout":""}"
                            @click=${()=>this._addModule(t.type)}
                            title="${t.description}"
                          >
                            <ha-icon icon="${t.icon}"></ha-icon>
                            <div class="module-info">
                              <span class="module-title">${t.title}</span>
                              <span class="module-description">${t.description}</span>
                            </div>
                          </button>
                        `}))}
                    </div>
                  </div>
                `:""}
            ${g.length>0?n.qy`
                  <div class="module-category">
                    <h4 class="category-title">Content Modules</h4>
                    <p class="category-description">Add content and interactive elements</p>
                    <div class="module-types content-modules">
                      ${g.map((e=>{const t=e.metadata;return n.qy`
                          <button
                            class="module-type-btn content-module"
                            @click=${()=>this._addModule(t.type)}
                            title="${t.description}"
                          >
                            <ha-icon icon="${t.icon}"></ha-icon>
                            <div class="module-info">
                              <span class="module-title">${t.title}</span>
                              <span class="module-description">${t.description}</span>
                            </div>
                          </button>
                        `}))}
                    </div>
                  </div>
                `:""}
          `:this._renderProUpgradePrompt(d)}
    `}_renderProUpgradePrompt(e){return n.qy`
      <div class="pro-upgrade-prompt">
        <div class="pro-icon">
          <ha-icon icon="mdi:star-circle"></ha-icon>
        </div>
        <h3>Ultra Card PRO</h3>
        <p>
          Access premium modules like Weather Forecast, advanced animations, and more exclusive
          features.
        </p>
        <ul class="pro-features">
          <li><ha-icon icon="mdi:check-circle"></ha-icon> Premium Modules</li>
          <li><ha-icon icon="mdi:check-circle"></ha-icon> Cloud Backups</li>
          <li><ha-icon icon="mdi:check-circle"></ha-icon> Auto Snapshots</li>
          <li><ha-icon icon="mdi:check-circle"></ha-icon> Priority Support</li>
        </ul>
        <button class="upgrade-btn" @click=${this._handleUpgradeClick}>
          ${e?"Upgrade to PRO":"Login or Upgrade"}
        </button>
      </div>
    `}_handleUpgradeClick(){this.dispatchEvent(new CustomEvent("switch-tab",{detail:{tab:"pro"},bubbles:!0,composed:!0}))}_renderPresetImages(e,t){const i=[];if(e.thumbnail&&i.push(e.thumbnail),t.gallery&&Array.isArray(t.gallery)&&t.gallery.length>0&&t.gallery.forEach((e=>{e&&!i.includes(e)&&i.push(e)})),0===i.length)return n.qy`
        <div class="preset-icon-large">
          <ha-icon icon="${e.icon}"></ha-icon>
        </div>
      `;if(1===i.length)return n.qy`
        <div class="preset-thumbnail">
          <img src="${i[0]}" alt="${e.name} preview" />
        </div>
      `;const o=`slider-${e.id}`;return n.qy`
      <div class="preset-image-slider" id="${o}">
        <div
          class="preset-slider-container"
          style="transform: translateX(0%)"
          @mousedown=${e=>this._handleSliderMouseDown(e,o,i.length)}
          @touchstart=${e=>this._handleSliderTouchStart(e,o,i.length)}
        >
          ${i.map(((t,i)=>n.qy`
              <div class="preset-slider-image">
                <img src="${t}" alt="${e.name} preview ${i+1}" />
              </div>
            `))}
        </div>

        <!-- Navigation arrows -->
        <button
          class="preset-slider-nav prev"
          @click=${e=>{e.stopPropagation(),this._navigateSlider(o,-1,i.length)}}
        >
          <ha-icon icon="mdi:chevron-left"></ha-icon>
        </button>
        <button
          class="preset-slider-nav next"
          @click=${e=>{e.stopPropagation(),this._navigateSlider(o,1,i.length)}}
        >
          <ha-icon icon="mdi:chevron-right"></ha-icon>
        </button>

        <!-- Dots indicator -->
        <div class="preset-slider-dots">
          ${i.map(((e,t)=>n.qy`
              <div
                class="preset-slider-dot ${0===t?"active":""}"
                @click=${e=>{e.stopPropagation(),this._goToSlide(o,t,i.length)}}
              ></div>
            `))}
        </div>
      </div>
    `}_navigateSlider(e,t,i){var o,n;const a=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector(`#${e}`);if(!a)return;const r=a.querySelector(".preset-slider-container"),s=a.querySelectorAll(".preset-slider-dot");if(!r||!s.length)return;const l=r.style.transform||"translateX(0%)";let d=Math.abs(parseInt((null===(n=l.match(/-?\d+/))||void 0===n?void 0:n[0])||"0")/100)+t;d<0&&(d=i-1),d>=i&&(d=0),r.style.transform=`translateX(-${100*d}%)`,s.forEach(((e,t)=>{e.classList.toggle("active",t===d)}))}_goToSlide(e,t,i){var o;const n=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector(`#${e}`);if(!n)return;const a=n.querySelector(".preset-slider-container"),r=n.querySelectorAll(".preset-slider-dot");a&&r.length&&(a.style.transform=`translateX(-${100*t}%)`,r.forEach(((e,i)=>{e.classList.toggle("active",i===t)})))}_handleSliderMouseDown(e,t,i){e.preventDefault();const o=e.clientX;let n=!1;const a=e=>{const t=e.clientX-o;Math.abs(t)>10&&(n=!0)},r=e=>{const s=e.clientX-o;if(n&&Math.abs(s)>50){const e=s>0?-1:1;this._navigateSlider(t,e,i)}document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)}_handleSliderTouchStart(e,t,i){const o=e.touches[0].clientX;let n=!1;const a=e=>{const t=e.touches[0].clientX-o;Math.abs(t)>10&&(n=!0,e.preventDefault())},r=e=>{const s=e.changedTouches[0].clientX-o;if(n&&Math.abs(s)>50){const e=s>0?-1:1;this._navigateSlider(t,e,i)}document.removeEventListener("touchmove",a),document.removeEventListener("touchend",r)};document.addEventListener("touchmove",a,{passive:!1}),document.addEventListener("touchend",r)}_renderPresetsTab(){const e=_.O.getPresetsByCategory(this._selectedPresetCategory),t=_.O.getWordPressStatus();return _.O.getWordPressPresetsCount(),n.qy`
      <div class="presets-container">
        <!-- Header with WordPress status -->
        <div class="presets-header">
          <div class="preset-categories">
            ${["all","badges","layouts","widgets","custom"].map((e=>n.qy`
                <button
                  class="category-btn ${this._selectedPresetCategory===e?"active":""}"
                  @click=${()=>this._selectedPresetCategory=e}
                >
                  <ha-icon
                    icon="${"all"===e?"mdi:view-grid":"badges"===e?"mdi:account-circle":"layouts"===e?"mdi:view-dashboard":"widgets"===e?"mdi:widgets":"mdi:puzzle"}"
                  ></ha-icon>
                  <span>${e.charAt(0).toUpperCase()+e.slice(1)}</span>
                </button>
              `))}
          </div>

          ${t.error?n.qy`
                <div class="wordpress-status">
                  <div class="status-item error">
                    <ha-icon icon="mdi:alert-circle"></ha-icon>
                    <span>Failed to load presets</span>
                    <button
                      class="retry-btn"
                      @click=${()=>_.O.refreshWordPressPresets()}
                      title="Retry loading presets"
                    >
                      <ha-icon icon="mdi:refresh"></ha-icon>
                    </button>
                  </div>
                </div>
              `:""}
        </div>

        <!-- Presets Grid -->
        <div class="presets-grid">
          ${e.length>0?e.map((e=>{var t,i;const o=e.id.startsWith("wp-"),a="WJD Designs"===e.author,r=o&&!a,s=o&&a,l=e;return n.qy`
                  <div
                    class="preset-card ${o?r?"community-preset":"default-preset":"builtin-preset"}"
                    @click=${()=>{this._addPreset(e),o&&_.O.trackPresetDownload(e.id)}}
                  >
                    <!-- Header with badge, title, and stats -->
                    <div class="preset-header">
                      <div class="preset-header-left">
                        <div
                          class="origin-badge ${r?"community":s?"default":"builtin"}"
                        >
                          ${r?"Community":s?"Default":"Built-in"}
                        </div>
                        <div class="preset-title-info">
                          <h4 class="preset-header-title">${e.name}</h4>
                          ${a?"":n.qy`<span class="preset-header-author">by ${e.author}</span>`}
                        </div>
                      </div>
                      <div class="preset-stats">
                        ${(null===(t=e.metadata)||void 0===t?void 0:t.downloads)?n.qy`<span class="stat"
                              ><ha-icon icon="mdi:download"></ha-icon>${e.metadata.downloads}</span
                            >`:""}
                        ${r&&(null===(i=e.metadata)||void 0===i?void 0:i.rating)&&e.metadata.rating>0?n.qy`<span class="stat"
                              ><ha-icon icon="mdi:star"></ha-icon>${e.metadata.rating.toFixed(1)}${l.rating_count&&l.rating_count>1?` (${l.rating_count})`:""}</span
                            >`:""}
                      </div>
                    </div>

                    <!-- Large preview image or slider -->
                    <div class="preset-preview">${this._renderPresetImages(e,l)}</div>

                    <!-- Content section -->
                    <div class="preset-content">
                      <p class="preset-description">${e.description}</p>

                      <!-- Tags and integrations -->
                      ${e.tags.filter((e=>!["community","wordpress","standard"].includes(e))).length>0||Array.isArray(l.integrations)&&l.integrations.length>0?n.qy`
                            <div class="preset-tags">
                              ${e.tags.filter((e=>!["community","wordpress","standard"].includes(e))).slice(0,3).map((e=>n.qy`<span class="tag">${e}</span>`))}
                              ${Array.isArray(l.integrations)&&l.integrations.length?l.integrations.slice(0,2).map((e=>n.qy`<span class="integration-chip">${e}</span>`)):""}
                            </div>
                          `:""}
                    </div>

                    <!-- Action buttons at bottom -->
                    <div class="preset-actions">
                      <button
                        class="add-preset-btn primary"
                        @click=${t=>{t.stopPropagation(),this._addPreset(e),o&&_.O.trackPresetDownload(e.id)}}
                        title="Add this preset to your card"
                      >
                        <ha-icon icon="mdi:plus"></ha-icon>
                        <span>Add</span>
                      </button>

                      ${o?n.qy`
                            <button
                              class="read-more-btn secondary"
                              @click=${e=>{e.stopPropagation(),l.preset_url&&window.open(l.preset_url,"_blank")}}
                              title="View full preset details on ultracard.io"
                            >
                              <ha-icon icon="mdi:open-in-new"></ha-icon>
                              <span>Read More</span>
                            </button>
                          `:""}
                    </div>
                  </div>
                `})):n.qy`<div class="empty-state">
                <ha-icon icon="mdi:palette-outline"></ha-icon>
                <p>No presets available in this category</p>
                ${t.error?n.qy`<div class="error-details">
                      <p class="error-hint">
                        ${t.error.includes("CORS")||t.error.includes("Failed to fetch")?n.qy`
                              <strong>Connection Issue:</strong> Unable to load presets from
                              ultracard.io.<br />
                              This usually happens when accessing Home Assistant via IP address
                              instead of homeassistant.local.<br /><br />
                              <strong>Solutions:</strong><br />
                              • Access HA via <code>http://homeassistant.local:8123</code> instead
                              of IP address<br />
                              • Or wait for the server CORS configuration to be updated<br />
                              • Check your internet connection
                            `:n.qy`Error: ${t.error}<br />Check your internet connection and
                              try refreshing.`}
                      </p>
                    </div>`:""}
              </div>`}
        </div>

        <!-- Reload Button at Bottom -->
        <div class="preset-footer">
          <button
            class="reload-btn ${t.loading?"loading":""}"
            @click=${()=>_.O.refreshWordPressPresets()}
            title="Refresh presets from server"
            ?disabled=${t.loading}
          >
            <ha-icon icon="mdi:refresh" class="${t.loading?"spinning":""}"></ha-icon>
            <span>Reload</span>
          </button>
        </div>
      </div>
    `}_renderFavoritesTab(){const e=v.B.getFavorites();return n.qy`
      <div class="favorites-container">
        <div class="favorites-header">
          <h4>Saved Favorites</h4>
          <button class="import-btn" @click=${()=>this._showImportDialog=!0}>
            <ha-icon icon="mdi:import"></ha-icon>
            <span>Import</span>
          </button>
        </div>

        <div class="favorites-grid">
          ${e.length>0?e.map((e=>n.qy`
                  <div class="favorite-card">
                    <div class="favorite-header">
                      <h4>${e.name}</h4>
                      <div class="favorite-actions">
                        <button
                          class="action-btn"
                          @click=${()=>this._addFavorite(e)}
                          title="Add to layout"
                        >
                          <ha-icon icon="mdi:plus"></ha-icon>
                        </button>
                        <button
                          class="action-btn"
                          @click=${()=>this._exportFavorite(e)}
                          title="Export"
                        >
                          <ha-icon icon="mdi:export"></ha-icon>
                        </button>
                        <button
                          class="action-btn delete"
                          @click=${()=>this._deleteFavorite(e.id)}
                          title="Delete"
                        >
                          <ha-icon icon="mdi:delete"></ha-icon>
                        </button>
                      </div>
                    </div>
                    ${e.description?n.qy`<p class="favorite-description">${e.description}</p>`:""}
                    <div class="favorite-meta">
                      <span class="favorite-date">
                        ${new Date(e.created).toLocaleDateString()}
                      </span>
                      ${e.tags.length>0?n.qy`<div class="favorite-tags">
                            ${e.tags.slice(0,2).map((e=>n.qy`<span class="tag">${e}</span>`))}
                          </div>`:""}
                    </div>
                  </div>
                `)):n.qy`<div class="empty-state">
                <ha-icon icon="mdi:heart-outline"></ha-icon>
                <p>No favorites saved yet</p>
                <p class="empty-hint">Use the heart icon on any row to save it as a favorite</p>
              </div>`}
        </div>
      </div>
    `}_render3rdPartyTab(){var e,t,i,o;const a=S.x.checkIntegrationAuth(this.hass),r="pro"===(null===(e=null==a?void 0:a.subscription)||void 0===e?void 0:e.tier)&&"active"===(null===(t=null==a?void 0:a.subscription)||void 0===t?void 0:t.status),s=O.M.getAvailableCards(),l=O.M.getPopularCards();return null===(o=null===(i=this.hass)||void 0===i?void 0:i.locale)||void 0===o||o.language,this._refreshGlobalExternalCardCount(),n.qy`
      <div class="thirdparty-container">
        <div class="thirdparty-header">
          <h4>3rd Party Cards</h4>
          <button class="refresh-btn" @click=${()=>this._handleRefresh3rdPartyTab()}>
            <ha-icon icon="mdi:refresh"></ha-icon>
            <span>Refresh</span>
          </button>
        </div>

        ${r?n.qy`
              <div class="pro-indicator">
                <ha-icon icon="mdi:crown"></ha-icon>
                <span>Unlimited Cards</span>
              </div>
            `:n.qy`
              <div class="limit-indicator">
                <ha-icon icon="mdi:information-outline"></ha-icon>
                <span
                  >${Math.min(this._globalExternalCardCount,5)} / ${5} cards used across
                  dashboard</span
                >
                <div class="upgrade-section">
                  <span class="upgrade-text">Want Unlimited?</span>
                  <button class="get-pro-btn" @click=${this._openProPage}>Get Pro</button>
                </div>
              </div>
            `}
        ${s.length>0?n.qy`
              <div class="thirdparty-section">
                <h5 class="section-title">Installed Cards (${s.length})</h5>
                <div class="cards-grid">
                  ${s.map((e=>n.qy`
                      <div
                        class="card-item"
                        @click=${async()=>await this._addCardFromTab(e.type)}
                      >
                        <div class="card-icon">
                          <ha-icon icon="mdi:card-bulleted"></ha-icon>
                        </div>
                        <div class="card-info">
                          <div class="card-name">${e.name}</div>
                          <div class="card-type">${e.type}</div>
                          ${e.version?n.qy`<div class="card-version">v${e.version}</div>`:""}
                        </div>
                        <div class="card-add-hint">
                          <ha-icon icon="mdi:plus-circle"></ha-icon>
                        </div>
                      </div>
                    `))}
                </div>
              </div>
            `:""}
        ${l.length>0?n.qy`
              <div class="thirdparty-section popular-section">
                <h5 class="section-title">
                  ${s.length>0?"Popular Cards":"Popular Cards (Not Installed)"}
                </h5>
                <div class="popular-cards-list">
                  ${l.map((e=>{const t=O.M.isCardAvailable(e.type);return n.qy`
                      <div class="popular-card ${t?"installed":"not-installed"}">
                        <div class="popular-card-content">
                          <ha-icon
                            icon="${t?"mdi:check-circle":"mdi:information"}"
                            class="status-icon"
                          ></ha-icon>
                          <div class="popular-card-info">
                            <div class="popular-card-name">${e.name}</div>
                            <div class="popular-card-desc">${e.description}</div>
                          </div>
                        </div>
                        ${t?n.qy`<span class="installed-badge">Installed</span>`:n.qy`
                              <a
                                href="${O.M.getHACSUrl(e.type)||"#"}"
                                target="_blank"
                                class="install-link"
                              >
                                <ha-icon icon="mdi:open-in-new"></ha-icon>
                                View
                              </a>
                            `}
                      </div>
                    `}))}
                </div>
              </div>
            `:""}
        ${0===s.length&&0===l.length?n.qy`
              <div class="empty-state">
                <ha-icon icon="mdi:card-off"></ha-icon>
                <p>No 3rd party cards detected</p>
                <p class="empty-hint">Install custom cards via HACS to use them here</p>
              </div>
            `:""}

        <div class="thirdparty-info">
          <ha-icon icon="mdi:information"></ha-icon>
          <div class="info-content">
            <strong>How to use:</strong>
            <p>
              Click any installed card to add it to your selected column. When you click the pencil
              to edit, the card's native editor will open automatically.
            </p>
          </div>
        </div>
      </div>

      <style>
        .thirdparty-container {
          padding: 20px;
          /* Removed overflow-y: auto to prevent nested scrolling - let .selector-body handle scrolling */
        }

        .thirdparty-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
          padding-bottom: 12px;
          border-bottom: 2px solid var(--divider-color);
        }

        .thirdparty-header h4 {
          margin: 0;
          font-size: 18px;
          font-weight: 600;
        }

        .refresh-btn {
          padding: 8px 16px;
          background: var(--primary-color);
          color: white;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 6px;
          font-weight: 500;
          transition: background 0.2s;
        }

        .refresh-btn:hover {
          background: var(--primary-color-hover);
        }

        .limit-indicator {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          background: var(--warning-color, #ff9800);
          color: white;
          border-radius: 8px;
          margin-bottom: 16px;
          font-size: 14px;
        }

        .limit-indicator ha-icon {
          font-size: 20px;
          flex-shrink: 0;
        }

        .limit-indicator > span {
          flex: 1;
        }

        .upgrade-section {
          display: flex;
          align-items: center;
          gap: 8px;
          margin-left: auto;
        }

        .upgrade-text {
          opacity: 0.9;
          font-weight: 500;
          white-space: nowrap;
        }

        .get-pro-btn {
          background: rgba(255, 255, 255, 0.25);
          color: white;
          border: 2px solid rgba(255, 255, 255, 0.5);
          padding: 6px 16px;
          border-radius: 6px;
          font-weight: 600;
          font-size: 13px;
          cursor: pointer;
          transition: all 0.2s ease;
          white-space: nowrap;
        }

        .get-pro-btn:hover {
          background: rgba(255, 255, 255, 0.35);
          border-color: rgba(255, 255, 255, 0.8);
          transform: translateY(-1px);
        }

        .get-pro-btn:active {
          transform: translateY(0);
        }

        .upgrade-hint {
          margin-left: auto;
          opacity: 0.9;
          font-weight: 500;
        }

        .pro-indicator {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 12px 16px;
          background: var(--success-color, #4caf50);
          color: white;
          border-radius: 8px;
          margin-bottom: 16px;
          font-size: 14px;
          font-weight: 500;
        }

        .thirdparty-section {
          margin-bottom: 32px;
        }

        .section-title {
          margin: 0 0 12px 0;
          font-size: 14px;
          font-weight: 600;
          color: var(--secondary-text-color);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .cards-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 12px;
        }

        .card-item {
          padding: 16px;
          background: var(--card-background-color);
          border: 2px solid var(--divider-color);
          border-radius: 8px;
          cursor: pointer;
          transition: all 0.2s;
          display: flex;
          align-items: center;
          gap: 12px;
        }

        .card-item:hover {
          border-color: var(--primary-color);
          box-shadow: 0 4px 12px rgba(var(--rgb-primary-color), 0.2);
          transform: translateY(-2px);
        }

        .card-item:active {
          transform: translateY(0px);
        }

        .card-icon {
          width: 40px;
          height: 40px;
          display: flex;
          align-items: center;
          justify-content: center;
          background: rgba(var(--rgb-primary-color), 0.1);
          border-radius: 8px;
          flex-shrink: 0;
        }

        .card-icon ha-icon {
          --mdc-icon-size: 24px;
          color: var(--primary-color);
        }

        .card-info {
          flex: 1;
          min-width: 0;
        }

        .card-name {
          font-weight: 600;
          font-size: 14px;
          color: var(--primary-text-color);
          margin-bottom: 4px;
        }

        .card-type {
          font-size: 12px;
          color: var(--secondary-text-color);
          font-family: 'Courier New', monospace;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        .card-version {
          font-size: 11px;
          color: var(--secondary-text-color);
          margin-top: 2px;
        }

        .card-add-hint {
          opacity: 0.5;
          transition: opacity 0.2s;
          color: var(--primary-color);
        }

        .card-add-hint ha-icon {
          --mdc-icon-size: 24px;
        }

        .card-item:hover .card-add-hint {
          opacity: 1;
        }

        .popular-cards-list {
          display: grid;
          gap: 10px;
        }

        .popular-card {
          padding: 12px;
          background: var(--card-background-color);
          border: 1px solid var(--divider-color);
          border-radius: 6px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 12px;
        }

        .popular-card.not-installed {
          background: rgba(255, 152, 0, 0.05);
          border-color: rgba(255, 152, 0, 0.2);
        }

        .popular-card-content {
          display: flex;
          align-items: center;
          gap: 12px;
          flex: 1;
        }

        .status-icon {
          --mdc-icon-size: 20px;
          flex-shrink: 0;
        }

        .popular-card.installed .status-icon {
          color: #4caf50;
        }

        .popular-card.not-installed .status-icon {
          color: #ff9800;
        }

        .popular-card-info {
          flex: 1;
        }

        .popular-card-name {
          font-weight: 600;
          font-size: 13px;
          color: var(--primary-text-color);
        }

        .popular-card-desc {
          font-size: 12px;
          color: var(--secondary-text-color);
          margin-top: 2px;
        }

        .install-link {
          padding: 6px 12px;
          background: var(--primary-color);
          color: white;
          text-decoration: none;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 500;
          display: flex;
          align-items: center;
          gap: 4px;
          transition: background 0.2s;
          white-space: nowrap;
        }

        .install-link:hover {
          background: var(--primary-color-hover);
        }

        .installed-badge {
          padding: 6px 12px;
          background: rgba(76, 175, 80, 0.1);
          color: #4caf50;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 600;
        }

        .thirdparty-info {
          margin-top: 24px;
          padding: 16px;
          background: rgba(var(--rgb-primary-color), 0.05);
          border-radius: 8px;
          display: flex;
          gap: 12px;
          align-items: flex-start;
        }

        .thirdparty-info ha-icon {
          color: var(--primary-color);
          --mdc-icon-size: 20px;
          flex-shrink: 0;
          margin-top: 2px;
        }

        .info-content {
          flex: 1;
          font-size: 13px;
          line-height: 1.5;
        }

        .info-content strong {
          display: block;
          margin-bottom: 4px;
          color: var(--primary-text-color);
        }

        .info-content p {
          margin: 0;
          color: var(--secondary-text-color);
        }

        .empty-state {
          padding: 60px 20px;
          text-align: center;
          color: var(--secondary-text-color);
        }

        .empty-state ha-icon {
          --mdc-icon-size: 64px;
          opacity: 0.3;
          margin-bottom: 16px;
        }

        .empty-state p {
          margin: 8px 0;
        }

        .empty-hint {
          font-size: 13px;
          color: var(--secondary-text-color);
          opacity: 0.7;
        }

        /* Pro Access Overlay */
        .thirdparty-container.pro-locked {
          position: relative;
        }

        .thirdparty-container.pro-locked > :not(.pro-overlay) {
          filter: blur(8px);
          pointer-events: none;
          user-select: none;
        }

        .pro-overlay {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: ${h.Mu.EDITOR_CONTENT};
          background: rgba(0, 0, 0, 0.02);
        }

        .pro-overlay-content {
          background: var(--card-background-color);
          border-radius: 16px;
          padding: 48px 40px;
          max-width: 450px;
          text-align: center;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
          border: 2px solid var(--divider-color);
        }

        .pro-overlay-content ha-icon {
          --mdc-icon-size: 64px;
          color: var(--primary-color);
          opacity: 0.8;
          margin-bottom: 24px;
        }

        .pro-overlay-content h3 {
          margin: 0 0 16px 0;
          font-size: 24px;
          font-weight: 700;
          color: var(--primary-text-color);
        }

        .pro-overlay-content p {
          margin: 0 0 32px 0;
          font-size: 15px;
          line-height: 1.6;
          color: var(--secondary-text-color);
        }

        .upgrade-button,
        .signin-button {
          display: inline-flex;
          align-items: center;
          gap: 8px;
          padding: 14px 32px;
          border: none;
          border-radius: 8px;
          font-size: 16px;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          text-decoration: none;
          font-family: inherit;
        }

        .upgrade-button {
          background: linear-gradient(
            135deg,
            var(--primary-color) 0%,
            var(--accent-color, var(--primary-color)) 100%
          );
          color: white;
        }

        .upgrade-button:hover {
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(var(--rgb-primary-color), 0.4);
        }

        .signin-button {
          background: var(--primary-color);
          color: white;
        }

        .signin-button:hover {
          background: var(--primary-color-hover, var(--primary-color));
          transform: translateY(-2px);
          box-shadow: 0 8px 24px rgba(var(--rgb-primary-color), 0.4);
        }

        .upgrade-button ha-icon,
        .signin-button ha-icon {
          --mdc-icon-size: 20px;
          margin: 0;
          padding: 0;
          flex-shrink: 0;
        }
      </style>
    `}async _addCardFromTab(e){var t,i,o,n;if(-1===this._selectedRowIndex||-1===this._selectedColumnIndex){const e=(null===(i=null===(t=this.hass)||void 0===t?void 0:t.locale)||void 0===i?void 0:i.language)||"en";return void alert((0,u.kg)("editor.layout.select_column_first",e,'Please select a column first by clicking "Add Module" on the column where you want to add this card.'))}const a=S.x.checkIntegrationAuth(this.hass),r="pro"===(null===(o=null==a?void 0:a.subscription)||void 0===o?void 0:o.tier)&&"active"===(null===(n=null==a?void 0:a.subscription)||void 0===n?void 0:n.status),s=this._countExternalCardModules();if(!r&&s>=5)this._showToast("Free users are limited to 5 3rd party cards. Upgrade to Pro for unlimited cards!","error");else try{await this._add3rdPartyCard(e)}catch(e){console.error("[UC] Failed to add 3rd party card:",e),this._showToast(`Failed to add card: ${(null==e?void 0:e.message)||"Unknown error"}`,"error")}}_renderFavoriteDialog(){return this._showFavoriteDialog&&this._favoriteRowToSave?n.qy`
      <uc-favorite-dialog
        .row=${this._favoriteRowToSave}
        .open=${this._showFavoriteDialog}
        @close=${()=>{this._showFavoriteDialog=!1,this._favoriteRowToSave=null}}
        @saved=${e=>{this._showToast(`"${e.detail.name}" saved to favorites!`,"success")}}
      ></uc-favorite-dialog>
    `:n.qy``}_renderImportDialog(){return n.qy`
      <uc-import-dialog
        .open=${this._showImportDialog}
        @close=${()=>this._showImportDialog=!1}
        @import=${this._handleImport}
      ></uc-import-dialog>
    `}_handleImport(e){var t;const i=e.detail;if("ultra-card-row"===i.type){const e=this._ensureLayout(),t=i.data,o=this._selectedRowIndex>=0?this._selectedRowIndex+1:e.rows.length;e.rows.splice(o,0,t),this._updateLayout(e),this._showToast(`Row "${i.metadata.name}" imported successfully!`,"success")}else if("ultra-card-layout"===i.type){if(confirm("This will replace your entire layout. Are you sure?")){const e=i.data;this._updateLayout(e),this._showToast(`Layout "${i.metadata.name}" imported successfully!`,"success")}}else if("ultra-card-module"===i.type)if(this._selectedRowIndex>=0&&this._selectedColumnIndex>=0){const e=this._ensureLayout(),o=null===(t=e.rows[this._selectedRowIndex])||void 0===t?void 0:t.columns[this._selectedColumnIndex];if(o){const t=i.data;o.modules.push(t),this._updateLayout(e),this._showToast(`Module "${i.metadata.name}" imported successfully!`,"success")}}else this._showToast("Please select a column to add the module to","error")}async _getDefaultCardConfig(e,t){if(console.log(`[UC] Getting default config for card: ${e} (full: ${t})`),!e||""===e.trim())throw new Error("Card type is required");try{const i=await this._tryHACardHelper(t);if(i&&"object"==typeof i)return console.log(`[UC] Successfully got config from HA helper for ${e}:`,i),i}catch(t){console.log(`[UC] HA helper failed for ${e}:`,t)}try{const t=await this._tryGetStubConfig(e);if(t&&"object"==typeof t)return console.log(`[UC] Successfully got stub config for ${e}`),t}catch(t){console.log(`[UC] Could not get stub config for ${e}:`,t)}const i=this._getHardcodedDefault(t);return i?(console.log(`[UC] Using hardcoded default for ${e}`),i):(console.log(`[UC] Using minimal fallback config for ${e}`),{type:t})}async _tryHACardHelper(e){if(!this.hass)return null;try{const t=window.customCards;if(t&&"function"==typeof t.createCardElement){console.log(`[UC] Trying HA card helper for ${e}`);const i={type:e},o=await t.createCardElement(i);if(o&&"function"==typeof o.getStubConfig){const e=await o.getStubConfig();return console.log("[UC] HA helper provided config:",e),e}}const i=this.hass.lovelace;if(i&&i.config&&i.config.views){console.log("[UC] Checking lovelace config for similar cards");for(const t of i.config.views)if(t.cards)for(const i of t.cards)if(i.type===e){console.log(`[UC] Found existing ${e} in dashboard, using as template`);const t=Object.assign({},i);return delete t.entity,delete t.entities,t}}}catch(e){console.log("[UC] HA card helper error:",e)}return null}_getHardcodedDefault(e){return{"custom:apexcharts-card":{type:"custom:apexcharts-card",header:{show:!0,title:"ApexCharts Card",show_states:!0,colorize_states:!0},series:[{entity:"sensor.temperature",data_generator:"// REMOVE ME\nconst now = new Date();\nconst data = [];\nfor(let i = 0; i <= 24; i++) {\n  data.push([now.getTime() - i * 1000 * 60 * 60, Math.floor((Math.random() * 10) + 1)])\n}\nreturn data.reverse();"}],graph_span:"24h"},"custom:button-card":{type:"custom:button-card",entity:"light.example",name:"Example Light",icon:"mdi:lightbulb",tap_action:{action:"toggle"}},"custom:mini-graph-card":{type:"custom:mini-graph-card",entities:[{entity:"sensor.temperature"}],hours_to_show:24,points_per_hour:4,line_width:2,line_color:"var(--primary-color)"},"custom:weather-card":{type:"custom:weather-card",entity:"weather.home",name:"Weather"},"custom:vacuum-card":{type:"custom:vacuum-card",entity:"vacuum.robot",map:"camera.vacuum_map"},"custom:fold-entity-row":{type:"custom:fold-entity-row",head:{entity:"group.all_lights",name:"All Lights"},entities:[]}}[e]||null}async _tryGetStubConfig(e){const t=e.startsWith("custom:")?e.substring(7):e,i=customElements.get(t);if(!i)return console.log(`[UC] Card element ${t} not registered`),null;try{let o=null;if("function"==typeof i.getStubConfig){console.log(`[UC] Calling static getStubConfig for ${e}`),console.log("[UC] Hass available:",!!this.hass),console.log("[UC] Hass states count:",this.hass?Object.keys(this.hass.states||{}).length:0);try{const e=i.getStubConfig(this.hass);console.log("[UC] Static getStubConfig returned:",e),o=Promise.resolve(e)}catch(e){console.warn("[UC] Static getStubConfig threw error:",e);try{const e=i.getStubConfig();console.log("[UC] Static getStubConfig (no params) returned:",e),o=Promise.resolve(e)}catch(e){console.warn("[UC] Static getStubConfig (no params) also failed:",e),o=null}}o||console.log("[UC] Static method failed, trying instance method")}if(!o){console.log(`[UC] Trying instance getStubConfig for ${e}`);const i=document.createElement(t);if(this.hass&&(i.hass=this.hass),"function"!=typeof i.getStubConfig)return console.log(`[UC] No getStubConfig method found for ${e}`),null;console.log(`[UC] Found instance getStubConfig for ${e}`),o=Promise.resolve(i.getStubConfig())}if(o){const t=new Promise(((e,t)=>setTimeout((()=>t(new Error("Timeout"))),2e3))),i=await Promise.race([o,t]);return console.log(`[UC] Got stub config for ${e}:`,i),i}return console.log(`[UC] No stub config method worked for ${e}`),null}catch(t){return console.warn(`[UC] getStubConfig failed for ${e}:`,t),null}}async _add3rdPartyCard(e){var t,o;if(-1===this._selectedRowIndex||-1===this._selectedColumnIndex)return void console.error("No row or column selected");const n=S.x.checkIntegrationAuth(this.hass);if(("pro"!==(null===(t=null==n?void 0:n.subscription)||void 0===t?void 0:t.tier)||"active"!==(null===(o=null==n?void 0:n.subscription)||void 0===o?void 0:o.status))&&await this._countAllExternalCardModulesGlobally()>=5)return void this._showToast("You have reached the maximum of 5 external cards across your dashboard. Upgrade to Ultra Card Pro for unlimited external cards.","error");const a=this._ensureLayout(),r=a.rows[this._selectedRowIndex].columns[this._selectedColumnIndex];let s=e;e.startsWith("custom:")||e.startsWith("hui-")||(s=`custom:${e}`);const l=O.M.getCardInfo(e),d=l?l.name:e,c=await this._getDefaultCardConfig(e,s),p={id:`external-card-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,type:"external_card",name:d,card_type:e,card_config:c},u={rows:a.rows.map(((e,t)=>t===this._selectedRowIndex?Object.assign(Object.assign({},e),{columns:e.columns.map(((e,t)=>t===this._selectedColumnIndex?Object.assign(Object.assign({},e),{modules:[...e.modules||[],p]}):e))}):e))};this._updateLayout(u),this._showModuleSelector=!1,Promise.resolve().then(i.bind(i,1986)).then((({invalidateExternalCardCache:e})=>{e()})),await this._refreshGlobalExternalCardCount();const h=(r.modules||[]).length;this._selectedModule={rowIndex:this._selectedRowIndex,columnIndex:this._selectedColumnIndex,moduleIndex:h},this._showModuleSettings=!0;const g=`${e}-editor`,m=customElements.get(g),f=void 0!==m&&!(m.prototype instanceof HTMLUnknownElement);this._activeModuleTab=f?"general":"yaml"}_isLayoutModule(e){return["horizontal","vertical","slider"].includes(e)}_shouldAutoOpenSettings(e){return!this._isLayoutModule(e)}_getLayoutModuleColor(e){return this._isLayoutModule(e)?"var(--success-color, #4caf50)":"var(--accent-color, var(--orange-color, #ff9800))"}_renderColumnLayoutSelector(){const e=this._ensureLayout().rows[this._selectedRowForLayout],t=e?e.columns.length:1,i=(null==e?void 0:e.column_layout)||"1-col",o=this._migrateLegacyLayoutId(i),a=this._getLayoutsForColumnCount(t);return n.qy`
      <div class="column-layout-selector-popup">
        <div class="popup-overlay" @click=${()=>this._showColumnLayoutSelector=!1}></div>
        <div class="selector-content draggable-popup" id="column-layout-selector-popup">
          <div
            class="selector-header"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupDrag(e,t)}}
          >
            <h3>Choose Column Layout</h3>
            <p>
              Select any layout for ${t}
              column${1!==t?"s":""} (Currently: ${t}
              column${1!==t?"s":""})
            </p>
          </div>

          <div class="selector-body">
            <div class="layout-options">
              ${a.map((e=>n.qy`
                  <button
                    class="layout-option-btn ${e.id===i||e.id===o?"current":""}"
                    @click=${()=>this._changeColumnLayout(e.id)}
                    title="${e.name}"
                  >
                    <div class="layout-visual">
                      <div class="layout-icon-large">
                        ${(0,r._)(this._createColumnIconHTML(e.proportions))}
                      </div>
                    </div>
                    <div class="layout-name">${e.name}</div>
                    ${e.id===i||e.id===o?n.qy`<div class="current-badge">Current</div>`:""}
                  </button>
                `))}
            </div>
          </div>

          <!-- Resize handle -->
          <div
            class="resize-handle"
            @mousedown=${e=>{const t=e.target.closest(".selector-content");t&&this._startPopupResize(e,t)}}
            title="Drag to resize"
          >
            <ha-icon icon="mdi:resize-bottom-right"></ha-icon>
          </div>
        </div>
      </div>
    `}static get styles(){return n.AH`
      :host {
        --accent-color: var(--orange-color, #ff9800);
        --orange-color: #ff9800;
        --secondary-color: var(--orange-color, #ff9800);
      }

      .layout-builder {
        padding: 12px;
        background: var(--card-background-color);
        border-radius: 8px;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .builder-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--divider-color);
        flex-wrap: wrap;
        gap: 8px;
        flex-shrink: 0;
      }

      .builder-header h3 {
        margin: 0;
        flex: 1;
        min-width: 120px;
        font-size: 18px;
      }

      .header-buttons {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-wrap: wrap;
      }

      .undo-btn,
      .redo-btn,
      .add-row-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        white-space: nowrap;
        font-weight: 500;
        transition: all 0.2s ease;
        min-height: 40px;
      }

      /* Mobile optimization for undo/redo buttons */
      @media (max-width: 768px) {
        .header-buttons {
          gap: 6px;
        }

        .undo-btn,
        .redo-btn {
          padding: 10px 12px;
          gap: 6px;
        }

        /* Hide text labels on mobile for undo/redo buttons to save space */
        .undo-btn span,
        .redo-btn span {
          display: none;
        }

        /* Ensure disabled buttons are visible on mobile with proper contrast */
        .undo-btn:disabled,
        .redo-btn:disabled {
          background: var(--disabled-color, #ccc) !important;
          color: var(--text-color, #999) !important;
          cursor: not-allowed !important;
          transform: none !important;
          box-shadow: none !important;
          opacity: 1 !important;
          display: flex !important;
        }

        .undo-btn:disabled ha-icon,
        .redo-btn:disabled ha-icon {
          opacity: 1 !important;
          --mdc-icon-size: 20px;
          color: var(--text-color, #999) !important;
        }

        /* Keep add row button text visible as it's the primary action */
        .add-row-btn {
          padding: 10px 16px;
        }
      }

      .undo-btn:hover,
      .redo-btn:hover,
      .add-row-btn:hover {
        background: var(--primary-color-dark, var(--primary-color));
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      }

      .undo-btn:disabled,
      .redo-btn:disabled {
        background: var(--disabled-color, #ccc);
        color: var(--text-color, #999);
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
        opacity: 1;
      }

      .undo-btn:disabled:hover,
      .redo-btn:disabled:hover {
        background: var(--disabled-color, #ccc);
        transform: none;
        box-shadow: none;
      }

      .row-builder {
        margin-bottom: 16px;
        border: 2px solid var(--primary-color);
        border-radius: 8px;
        background: var(--card-background-color);
        width: 100%;
        box-sizing: border-box;
        position: static;
        transition: all 0.2s ease;
        overflow: visible;
      }

      .row-builder:last-child {
        margin-bottom: 0;
      }

      .row-header {
        display: flex;
        flex-direction: column;
        gap: 6px;
        padding: 8px 12px;
        background: var(--primary-color);
        color: white;
        font-weight: 500;
        border-bottom: 2px solid var(--primary-color);
        position: relative;
        z-index: ${h.Mu.CARD_BACKGROUND};
        border-radius: 8px 8px 0px 0px;
      }

      .row-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
      }

      .row-title-left {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .row-title-right {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .column-layout-text {
        color: rgba(255, 255, 255, 0.9);
        font-size: 13px;
        font-weight: 500;
        white-space: nowrap;
      }

      .row-bottom {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
      }

      .row-actions-left {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .row-actions-right {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      /* Icon sizes for both action groups */
      .row-actions-left button ha-icon,
      .row-actions-right button ha-icon {
        width: 22px;
        height: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .row-name-top {
        color: rgba(255, 255, 255, 0.9);
        font-size: 14px;
        font-weight: 500;
        max-width: 20ch;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .row-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        color: rgba(255, 255, 255, 0.7);
        cursor: grab;
        opacity: 0.8;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 16px;
      }

      .row-drag-handle:hover {
        opacity: 1;
      }

      .row-drag-handle:active {
        cursor: grabbing;
      }

      .column-layout-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-radius: 4px;
        padding: 4px 8px;
        cursor: pointer;
        color: white;
        font-size: 14px;
        transition: all 0.2s ease;
        min-width: 32px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .column-layout-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.5);
      }

      .layout-icon {
        font-family: monospace;
        font-weight: bold;
        letter-spacing: 1px;
      }

      .row-actions {
        display: flex;
        gap: 8px;
        align-items: center;
        justify-content: flex-end;
      }

      /* Reduce icon sizes in row actions for better spacing */
      .row-actions button ha-icon {
        width: 18px;
        height: 18px;
      }

      /* Collapse button styles for rows */
      .row-collapse-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
        padding: 3px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        border-radius: 4px;
        width: 24px;
        height: 24px;
      }

      .row-collapse-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .row-collapse-btn ha-icon {
        transition: transform 0.2s ease;
        width: 18px;
        height: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .row-duplicate-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 0;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }

      .row-duplicate-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .row-add-column-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 0;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }

      .row-add-column-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .row-settings-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 0;
        border-radius: 4px;
        transition: background-color 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }

      .row-settings-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .delete-row-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 0;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }

      .delete-row-btn:hover {
        background: rgba(255, 100, 100, 0.8);
        color: white;
      }

      .rows-container {
        flex: 1;
        min-height: 0;
        width: 100%;
        box-sizing: border-box;
      }

      .columns-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
        padding: 12px;
        box-sizing: border-box;
        background: var(--card-background-color);
        border-top: 1px solid var(--primary-color);
      }

      /* Editor view: Force single column layout for better usability */
      .columns-container[data-layout='1-col'],
      .columns-container[data-layout='1-2-1-2'],
      .columns-container[data-layout='1-3-2-3'],
      .columns-container[data-layout='2-3-1-3'],
      .columns-container[data-layout='2-5-3-5'],
      .columns-container[data-layout='3-5-2-5'],
      .columns-container[data-layout='1-3-1-3-1-3'],
      .columns-container[data-layout='1-4-1-2-1-4'],
      .columns-container[data-layout='1-5-3-5-1-5'],
      .columns-container[data-layout='1-6-2-3-1-6'],
      .columns-container[data-layout='1-4-1-4-1-4-1-4'],
      .columns-container[data-layout='1-5-1-5-1-5-1-5'],
      .columns-container[data-layout='1-6-1-6-1-6-1-6'],
      .columns-container[data-layout='1-8-1-4-1-4-1-8'],
      .columns-container[data-layout='1-5-1-5-1-5-1-5'],
      .columns-container[data-layout='1-6-1-6-1-3-1-6-1-6'],
      .columns-container[data-layout='1-8-1-4-1-4-1-4-1-8'],
      .columns-container[data-layout='1-6-1-6-1-6-1-6-1-6-1-6'],
      /* Legacy support */
      .columns-container[data-layout='50-50'],
      .columns-container[data-layout='30-70'],
      .columns-container[data-layout='70-30'],
      .columns-container[data-layout='33-33-33'],
      .columns-container[data-layout='25-50-25'],
      .columns-container[data-layout='20-60-20'],
      .columns-container[data-layout='25-25-25-25'] {
        display: flex;
        flex-direction: column;
        gap: 8px;
        border: 1px solid var(--primary-color);
        margin-bottom: 16px;
        border-radius: 0px 0px 8px 8px;
      }

      .column-builder {
        border: 2px solid var(--accent-color, var(--orange-color, #ff9800));
        border-radius: 0px 0px 6px 6px;
        background: var(--card-background-color);
        width: 100%;
        box-sizing: border-box;
        overflow: visible;

        position: static;
      }

      .column-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        font-weight: 500;
        padding: 8px 12px;
        background: var(--accent-color, var(--orange-color, #ff9800));
        color: white;
        border-bottom: 2px solid var(--accent-color, var(--orange-color, #ff9800));
        position: relative;
        z-index: ${h.Mu.MODULE_DECORATIVE};
        border-radius: 6px 6px 0px 0px;
      }

      .column-actions {
        display: flex;
        gap: 4px;
        align-items: center;
      }

      /* Reduce icon sizes in column actions for better spacing */
      .column-actions button ha-icon {
        width: 20px;
        height: 20px;
      }

      /* Collapse button styles for columns */
      .column-collapse-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
        padding: 4px;
        display: flex;
        align-items: center;
        transition: all 0.2s ease;
        border-radius: 4px;
      }

      .column-collapse-btn:hover {
        background: rgba(255, 255, 255, 0.2);
      }

      .column-collapse-btn ha-icon {
        transition: transform 0.2s ease;
        width: 20px;
        height: 20px;
      }

      .column-add-module-btn,
      .column-duplicate-btn,
      .column-settings-btn,
      .column-delete-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
        padding: 6px 8px;
        border-radius: 4px;
        transition: all 0.2s ease;
        font-size: 12px;
        min-width: 28px;
        min-height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }

      .column-add-module-btn:hover,
      .column-duplicate-btn:hover,
      .column-settings-btn:hover {
        background: rgba(255, 255, 255, 0.25);
        color: white;
        transform: scale(1.05);
      }

      .column-delete-btn:hover:not([disabled]) {
        background: rgba(255, 100, 100, 0.9);
        color: white;
        transform: scale(1.05);
      }

      .column-delete-btn[disabled] {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
      }

      .column-delete-btn[disabled]:hover {
        background: none;
        transform: none;
      }

      .column-actions ha-icon {
        --mdc-icon-size: 16px;
      }

      .column-title {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .column-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 18px;
        height: 18px;
        color: rgba(255, 255, 255, 0.7);
        cursor: grab;
        opacity: 0.8;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 14px;
      }

      .column-drag-handle:hover {
        opacity: 1;
      }

      .column-drag-handle:active {
        cursor: grabbing;
      }

      .modules-container {
        display: flex;
        flex-direction: column;
        gap: 6px;
        width: 100%;
        box-sizing: border-box;
        padding: 12px;
        background: var(--card-background-color);
        border: 1px solid var(--secondary-color, var(--accent-color, #ff9800));
        border-top: none;
        border-radius: 0px 0px 6px 6px;
        margin-top: 0;

        position: static;
        overflow: visible;
      }

      .module-item {
        position: relative;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        margin-bottom: 8px;
        width: 100%;
        min-height: 60px;
        transition: border-color 0.2s ease;
        box-sizing: border-box;
        overflow: visible;
      }

      .module-item:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 12px rgba(var(--rgb-primary-color), 0.2);
        transform: translateY(-1px);
      }

      .module-content {
        padding: 8px;
        cursor: pointer;
        width: 100%;
        box-sizing: border-box;
        overflow: hidden;
        word-wrap: break-word;
        word-break: break-word;
        pointer-events: auto;
        position: relative;
        z-index: ${h.Mu.MODULE_CONTENT};

        /* Ensure content doesn't interfere with hover actions positioning */
        contain: layout style;
      }

      /* Simplified Module Styles */
      .simplified-module {
        padding: 12px;
        border-radius: 6px;
        background: var(--card-background-color, #fff);
        border: 1px solid var(--divider-color, #e0e0e0);
        width: 100%;
        box-sizing: border-box;
      }

      .simplified-module-header {
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
      }

      .simplified-module-drag-handle {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--secondary-text-color, #757575);
        cursor: grab;
        opacity: 0.6;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 16px;
      }

      .simplified-module:hover .simplified-module-drag-handle {
        opacity: 1;
      }

      .simplified-module-drag-handle:active {
        cursor: grabbing;
      }

      .simplified-module-icon {
        flex-shrink: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--primary-color, #2196f3);
        color: white;
        border-radius: 6px;
        --mdc-icon-size: 20px;
      }

      .simplified-module-content {
        flex: 1;
        min-width: 0;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .simplified-module-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--primary-text-color, #212121);
        line-height: 1.3;
        margin: 0;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      .simplified-module-info {
        font-size: 12px;
        color: var(--secondary-text-color, #757575);
        line-height: 1.2;
        margin: 0;
        opacity: 0.8;
        word-wrap: break-word;
        overflow-wrap: break-word;
      }

      .simplified-module-actions {
        display: flex;
        gap: 4px;
        align-items: center;
        flex-shrink: 0;
      }

      .simplified-action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 24px;
        height: 24px;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color, #e0e0e0);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        padding: 0;
      }

      .simplified-action-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .simplified-action-btn.edit-btn {
        color: var(--primary-color, #2196f3);
        border-color: var(--primary-color, #2196f3);
      }

      .simplified-action-btn.edit-btn:hover {
        background: var(--primary-color, #2196f3);
        color: white;
      }

      .simplified-action-btn.duplicate-btn {
        color: var(--info-color, #2196f3);
        border-color: var(--info-color, #2196f3);
      }

      .simplified-action-btn.duplicate-btn:hover {
        background: var(--info-color, #2196f3);
        color: white;
      }

      .simplified-action-btn.delete-btn {
        color: var(--error-color, #f44336);
        border-color: var(--error-color, #f44336);
      }

      .simplified-action-btn.delete-btn:hover {
        background: var(--error-color, #f44336);
        color: white;
      }

      .simplified-action-btn ha-icon {
        --mdc-icon-size: 14px;
      }

      /* Disable animations within layout builder modules */
      .module-content * {
        max-width: 100%;
        box-sizing: border-box;
        animation: none !important;
        transition: none !important;
      }

      .module-content *:hover {
        transform: none !important;
        animation: none !important;
        transition: none !important;
      }

      .module-content img {
        max-width: 100%;
        height: auto;
        display: block;
      }

      .add-module-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 10px;
        border: 2px dashed var(--divider-color);
        border-radius: 4px;
        background: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
        box-sizing: border-box;
        font-size: 13px;
        min-height: 36px;
      }

      .add-module-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .add-column-container {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 12px 12px 12px;
        width: 100%;
        box-sizing: border-box;
      }

      .add-column-btn {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: center;
        gap: 6px;
        padding: 10px 12px;
        border: 2px dashed var(--secondary-text-color);
        border-radius: 6px;
        background: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 13px;
        width: 100%;
        min-height: 40px;
        box-sizing: border-box;
      }

      .add-column-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.05));
      }

      .add-column-btn ha-icon {
        --mdc-icon-size: 20px;
      }

      /* Empty Row Message */
      .empty-row-message {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 32px 16px;
        border: 2px dashed var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        color: var(--secondary-text-color);
        text-align: center;
        min-height: 120px;
      }

      .empty-row-message p {
        margin: 0 0 8px 0;
        font-size: 14px;
        opacity: 0.8;
      }

      /* Module Selector Popup */
      .module-selector-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: ${h.Mu.MODULE_POPUP_OVERLAY};
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .popup-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
      }

      .selector-content {
        position: relative;
        background: var(--card-background-color);
        border-radius: 8px;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow: visible; /* allow resize handle to be positioned relative to this container */
        display: flex;
        flex-direction: column;
      }

      .selector-body {
        overflow-x: hidden; /* prevent bleed */
        overflow-y: auto; /* allow vertical scrolling when content exceeds height */
        max-height: inherit;
        padding: 0 24px 28px 24px; /* consistent horizontal padding, leave room for resize handle */
        flex: 1; /* take up remaining space */
        border-radius: 0 0 8px 8px; /* maintain bottom border radius */
        /* Ensure content doesn't hide under header */
        position: relative;
        z-index: ${h.Mu.MODULE_CONTENT};
      }

      /* Improve mobile scrolling behavior */
      @media (max-width: 768px) {
        .selector-body {
          padding: 0 16px 20px 16px; /* Reduce padding on mobile */
          /* Ensure proper scrolling on mobile */
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
        }
      }

      .selector-content.draggable-popup {
        position: fixed; /* Use fixed positioning for better control */
        width: min(700px, 95vw);
        height: min(750px, 90vh);
        /* Use transform for better centering on all devices */
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: ${h.Mu.SELECTOR_POPUP};
        max-width: calc(100vw - 40px); /* Ensure 20px padding on each side */
        max-height: calc(100vh - 40px); /* Ensure 20px padding on top/bottom */
      }

      /* Mobile optimization for selector popup */
      @media (max-width: 768px), (max-height: 768px) {
        .selector-content.draggable-popup {
          width: calc(100vw - 20px) !important; /* Full width with 10px padding each side */
          height: calc(100vh - 40px) !important; /* Full height with 20px padding top/bottom */
          max-width: none !important; /* Remove max-width constraint on mobile */
          max-height: none !important; /* Remove max-height constraint on mobile */
          /* Ensure proper centering on mobile */
          position: fixed !important;
          top: 50% !important;
          left: 50% !important;
          transform: translate(-50%, -50%) !important;
          margin: 0 !important;
        }

        /* Ensure header content stays properly aligned on mobile */
        .selector-header-top {
          flex-wrap: nowrap;
          align-items: center;
          justify-content: space-between;
        }

        .selector-header h3 {
          flex: 1;
          min-width: 0; /* Allow text to truncate if needed */
          margin-right: 12px;
        }

        .selector-header .close-button {
          flex-shrink: 0; /* Prevent close button from shrinking */
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-left: 0; /* Remove auto margin on mobile */
        }
      }

      .selector-header {
        position: sticky; /* keep header visible while scrolling */
        top: 0;
        z-index: ${h.Mu.POPUP_STICKY_ELEMENTS};
        background: var(--card-background-color);
        padding: 20px 24px 16px; /* add horizontal padding to match container */
        border-bottom: 1px solid var(--divider-color);
        margin-bottom: 16px;
        cursor: move;
        user-select: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
        border-radius: 8px 8px 0 0; /* maintain top border radius */
      }

      .selector-header-top {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
        white-space: nowrap;
      }

      .selector-header h3 {
        margin: 0; /* align vertically with X */
        flex: 1; /* push the X to the far right */
      }

      .selector-header .close-button {
        margin-left: auto; /* ensure it sits on the same row to the right */
        background: none;
        border: none;
        font-size: 24px;
        line-height: 1;
        cursor: pointer;
        color: var(--secondary-text-color);
      }

      .selector-header .close-button:hover {
        color: var(--primary-color);
      }

      .module-stats {
        font-size: 12px;
        color: var(--secondary-text-color);
      }

      .category-title {
        font-size: 14px;
        font-weight: 600;
        margin: 0 0 8px 0;
        color: var(--primary-text-color);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .module-types {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }

      .module-type-btn {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 16px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: left;
        width: 100%;
        min-height: 60px;
      }

      .module-type-btn:hover {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      /* Ensure text elements are white on hover */
      .module-type-btn:hover .module-title,
      .module-type-btn:hover .module-description {
        color: white !important;
      }

      .module-type-btn ha-icon {
        font-size: 32px;
        flex-shrink: 0;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--primary-color);
        color: white;
        border-radius: 8px;
      }

      .module-type-btn:hover ha-icon {
        background: white;
        color: var(--primary-color);
      }

      .module-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 0;
        flex: 1;
      }

      .module-title {
        font-weight: 500;
        font-size: 16px;
        color: var(--primary-text-color);
      }

      .module-description {
        font-size: 14px;
        color: var(--secondary-text-color);
        line-height: 1.3;
      }

      .module-author,
      .module-version {
        display: none; /* Hide for cleaner look */
      }

      /* Module Category Styles */
      .module-category {
        margin-bottom: 24px;
      }

      .category-title {
        font-size: 16px;
        font-weight: 600;
        margin: 0 0 8px 0;
        color: var(--primary-text-color);
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .category-description {
        font-size: 14px;
        color: var(--secondary-text-color);
        margin: 0 0 16px 0;
        line-height: 1.4;
      }

      /* Layout Module Specific Styles */
      .layout-modules .module-type-btn.layout-module {
        position: relative;
        border: 2px solid var(--success-color, #4caf50);
        background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.1));
      }

      .layout-modules .module-type-btn.horizontal-layout {
        border-color: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout {
        border-color: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.layout-module:hover {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      .layout-modules .module-type-btn.horizontal-layout:hover {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      .layout-modules .module-type-btn.vertical-layout:hover {
        border-color: var(--success-color, #4caf50);
        background: var(--success-color, #4caf50);
        color: white;
        box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
      }

      /* Ensure layout module text is white on hover */
      .layout-modules .module-type-btn.layout-module:hover .module-title,
      .layout-modules .module-type-btn.layout-module:hover .module-description,
      .layout-modules .module-type-btn.horizontal-layout:hover .module-title,
      .layout-modules .module-type-btn.horizontal-layout:hover .module-description,
      .layout-modules .module-type-btn.vertical-layout:hover .module-title,
      .layout-modules .module-type-btn.vertical-layout:hover .module-description {
        color: white !important;
      }

      .layout-modules .module-type-btn.layout-module ha-icon {
        background: var(--success-color, #4caf50);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.2);
      }

      .layout-modules .module-type-btn.horizontal-layout ha-icon {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout ha-icon {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.layout-module:hover ha-icon {
        background: white;
        color: var(--success-color, #4caf50);
        border-color: rgba(0, 0, 0, 0.1);
      }

      .layout-modules .module-type-btn.horizontal-layout:hover ha-icon {
        color: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout:hover ha-icon {
        color: var(--success-color, #4caf50);
      }

      .layout-badge {
        position: absolute;
        top: 8px;
        right: 8px;
        background: var(--success-color, #4caf50);
        color: white;
        font-size: 9px;
        font-weight: 600;
        padding: 2px 6px;
        border-radius: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.9;
      }

      .layout-modules .module-type-btn.horizontal-layout .layout-badge {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.vertical-layout .layout-badge {
        background: var(--success-color, #4caf50);
      }

      .layout-modules .module-type-btn.layout-module:hover .layout-badge {
        background: rgba(255, 255, 255, 0.2);
        opacity: 1;
      }

      /* Content Module Styles */
      .content-modules .module-type-btn.content-module {
        border: 1px solid var(--divider-color);
      }

      .content-modules .module-type-btn.content-module:hover {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      /* Ensure content module text is white on hover */
      .content-modules .module-type-btn.content-module:hover .module-title,
      .content-modules .module-type-btn.content-module:hover .module-description {
        color: white !important;
      }

      /* Column Layout Selector Popup */
      .column-layout-selector-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: ${h.Mu.MODULE_POPUP_CONTENT};
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layout-options {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
        margin-top: 16px;
      }

      .layout-option-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 16px 12px;
        border: 2px solid var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
        min-height: 80px;
        gap: 8px;
      }

      .layout-option-btn:hover {
        border-color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.1));
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .layout-option-btn.current {
        border-color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.1));
        position: relative;
      }

      .layout-option-btn.current .layout-icon-large {
        color: var(--primary-color);
      }

      .current-badge {
        position: absolute;
        top: 4px;
        right: 4px;
        background: var(--primary-color);
        color: white;
        font-size: 8px;
        font-weight: 600;
        padding: 2px 6px;
        border-radius: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .layout-visual {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 32px;
      }

      .layout-icon-large {
        font-family: monospace;
        font-weight: bold;
        font-size: 20px;
        letter-spacing: 2px;
        color: var(--primary-color);
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layout-name {
        font-size: 12px;
        font-weight: 500;
        color: var(--primary-text-color);
        line-height: 1.2;
      }

      .module-placeholder {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 16px;
        border: 1px dashed var(--divider-color);
        border-radius: 4px;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      .error-message {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 12px;
        background: var(--error-color);
        color: white;
        border-radius: 4px;
        font-size: 14px;
      }

      /* General Settings Popup Styles */
      .settings-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: ${h.Mu.LAYOUT_CHILD_POPUP};
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 20px;
        overflow-y: hidden; /* scrolling handled inside content to support sticky header */
        overflow-x: visible;
      }

      .settings-tabs {
        display: flex;
        border-bottom: 1px solid var(--divider-color);
        position: sticky;
        top: 0;
        z-index: ${h.Mu.POPUP_TABS};
        background: var(--card-background-color);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
        /* Don't use isolation: isolate - it prevents fixed dropdowns from escaping */
      }

      .settings-tab {
        flex: 1;
        padding: 12px 16px;
        background: none;
        border: none;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 14px;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
      }

      .settings-tab:hover {
        color: var(--primary-color);
      }

      .settings-tab.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

      .settings-tab-content {
        padding: 24px;
        flex: 1 1 auto;
        min-height: 0; /* allow parent to control height */
        overflow-y: auto;
        overflow-x: visible; /* allow dropdowns to render outside */
        /* Keep content BELOW sticky tabs */
        position: relative;
        z-index: 1;
      }

      /* Module Settings Popup */
      .module-settings-popup {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: ${h.Mu.MODULE_POPUP_CONTENT};
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 20px;
        overflow-y: hidden; /* scrolling handled inside popup-content for sticky header */
        overflow-x: visible;
      }

      .popup-content {
        position: relative;
        background: var(--card-background-color);
        border-radius: 8px;
        width: 720px;
        min-height: 480px;
        max-width: 98vw;
        max-height: 98vh;
        overflow: visible; /* allow resize handle to be positioned relative to this container */
        display: flex;
        flex-direction: column;
      }

      .popup-body {
        overflow-y: auto; /* scrolling handled by popup body, not the main container */
        overflow-x: visible; /* allow dropdowns to render outside horizontally */
        flex: 1;
        padding-bottom: 28px; /* leave room so content doesn't sit under the resize handle */
      }

      /* Dropdown positioning fixes for popup context -
         ensure menus anchor to fields inside transformed draggable popups */
      .popup-content ha-select,
      .selector-content ha-select,
      .popup-content mwc-select,
      .popup-content ha-combo-box {
        position: relative !important;
        overflow: visible !important;
        z-index: ${h.Mu.DROPDOWN_SELECT} !important;
      }

      .popup-content ha-select .mdc-select__menu,
      .popup-content ha-select mwc-menu,
      .popup-content ha-select .mdc-menu,
      .popup-content ha-select ha-menu,
      .popup-content mwc-menu,
      .popup-content ha-menu,
      .popup-content .mdc-menu-surface,
      .selector-content ha-select .mdc-select__menu,
      .selector-content ha-select mwc-menu,
      .selector-content ha-select .mdc-menu,
      .selector-content ha-select ha-menu {
        /* Let HA position menus; we only ensure visibility */
        z-index: ${h.Mu.DROPDOWN_MENU} !important;
        max-height: 300px !important;
        overflow-y: auto !important;
        max-width: min(360px, 95vw) !important;
      }

      /* Ensure native editor dropdowns appear above module popup tabs */
      /* CRITICAL: Use fixed menu positioning like HA does in tile-card */
      .module-tab-content ha-select,
      .settings-tab-content ha-select,
      .module-tab-content mwc-select,
      .module-tab-content ha-combo-box,
      .module-tab-content mwc-menu-surface {
        position: relative !important;
        z-index: ${h.Mu.DROPDOWN_SELECT} !important;
      }

      /* Add fixed menu positioning attribute behavior */
      .module-tab-content ha-select[fixedmenuposition],
      .settings-tab-content ha-select[fixedmenuposition] {
        --mdc-menu-max-height: 400px;
      }

      /* Force ALL dropdown menus to appear above everything - ultra aggressive targeting */
      .module-tab-content ha-select::part(menu),
      .module-tab-content mwc-select::part(menu),
      .module-tab-content ha-select .mdc-menu-surface,
      .module-tab-content mwc-menu-surface,
      .module-tab-content ha-select mwc-menu,
      .module-tab-content ha-select ha-menu,
      .module-tab-content ha-list-item,
      .settings-tab-content ha-select::part(menu),
      .settings-tab-content mwc-select::part(menu),
      .settings-tab-content ha-select .mdc-menu-surface,
      .settings-tab-content mwc-menu-surface,
      .settings-tab-content ha-select mwc-menu,
      .settings-tab-content ha-select ha-menu,
      .settings-tab-content ha-list-item {
        z-index: 99999 !important;
        position: fixed !important;
      }

      /* Target the actual menu that renders in shadow DOM */
      .module-tab-content ha-select,
      .settings-tab-content ha-select {
        --mdc-menu-z-index: 99999 !important;
        --ha-select-menu-z-index: 99999 !important;
      }

      /* Global dropdown override - ensures any HA dropdown appears above popup tabs */
      ha-menu,
      mwc-menu,
      mwc-menu-surface,
      .mdc-menu-surface {
        z-index: 99999 !important;
      }

      /* Allow dropdown overflow; keep inner content scrollable */
      .popup-content {
        /* Allow dropdowns to overflow the scrolling container */
        overflow: visible !important;
      }

      .popup-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 24px;
        border-bottom: 1px solid var(--divider-color);
        position: sticky; /* keep header visible while scrolling */
        top: 0;
        z-index: 0;
        background: var(--card-background-color);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
      }

      .close-button {
        background: none;
        border: none;
        font-size: 32px;
        cursor: pointer;
        color: var(--secondary-text-color);
        padding: 0;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }

      .close-button:hover {
        color: var(--primary-color);
      }

      .action-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 8px;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .action-button ha-icon {
        --mdc-icon-size: 20px;
      }

      .duplicate-button {
        color: var(--primary-color);
      }

      .duplicate-button:hover {
        background: var(--primary-color);
        color: white;
      }

      .delete-button {
        color: var(--error-color);
      }

      .delete-button:hover {
        background: var(--error-color);
        color: white;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      /* Drag and Resize Functionality */
      .draggable-popup {
        position: absolute;
        /* Avoid transforms so fixed-position menus anchor to viewport correctly */
        transform: none !important;
        max-width: none;
        max-height: none;
        width: min(700px, 95vw);
        height: min(750px, 90vh);
        /* Center the popup initially */
        /* Use margins for centering instead of transforms to not create a containing block */
        top: 50%;
        left: 50%;
        margin-left: -350px; /* half of width when 700px; will be clamped by max-width */
        margin-top: -375px; /* half of height when 750px; responsive will adjust */
        /* Reset translate centering */
        /* transform already set to none above */
        z-index: ${h.Mu.MODULE_POPUP_OVERLAY};
      }

      /* During drag/resize, remove centering transform and use absolute positioning */
      .draggable-popup.popup-dragging,
      .draggable-popup.popup-resizing {
        position: absolute;
        transform: none;
        /* left and top will be set by JavaScript during drag */
      }

      /* Selector popup drag positioning */
      .selector-content.popup-dragging {
        position: absolute;
        transform: none;
        /* left and top will be set by JavaScript during drag */
      }

      /* Mobile optimization for module popups */
      @media (max-width: 768px), (max-height: 768px) {
        .draggable-popup {
          /* Use transform-based centering for better mobile compatibility */
          position: fixed !important;
          top: 50% !important;
          left: 50% !important;
          transform: translate(-50%, -50%) !important;
          width: calc(100vw - 20px) !important;
          height: calc(100vh - 40px) !important;
          margin: 0 !important;
          max-width: none !important;
          max-height: none !important;
        }
        /* Remove move affordance on mobile */
        .popup-header {
          cursor: default;
        }
        /* Hide resize handle on mobile */
        .draggable-popup .resize-handle {
          display: none;
        }
      }

      .popup-header {
        cursor: move;
        user-select: none;
      }

      .resize-handle {
        position: absolute;
        bottom: 0px;
        right: 0px;
        width: 20px;
        height: 20px;
        cursor: se-resize;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--secondary-text-color);
        background: var(--card-background-color);
        border-radius: 8px 0 8px 0;
        transition: all 0.2s ease;
        z-index: ${h.Mu.RESIZE_HANDLE}; /* ensure it stays above all content including scrollable areas */
        pointer-events: auto; /* ensure it's always clickable */
      }

      /* Keep sticky behavior even during drag/resize */
      .draggable-popup .resize-handle {
        transform: none !important;
      }

      .resize-handle:hover {
        color: var(--primary-color);
        background: var(--divider-color);
      }

      .resize-handle ha-icon {
        --mdc-icon-size: 16px;
      }

      .popup-dragging {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
        z-index: ${h.Mu.POPUP_TABS} !important;
      }

      .popup-resizing {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
        transition: none !important;
      }

      .popup-resizing * {
        transition: none !important;
      }

      /* Override any conflicting styles for resizable elements */
      .draggable-popup.popup-resizing {
        max-width: none !important;
        max-height: none !important;
        width: auto !important;
        height: auto !important;
      }

      .popup-dragging .popup-header,
      .popup-resizing .popup-header {
        cursor: move;
      }

      .popup-dragging .resize-handle,
      .popup-resizing .resize-handle {
        pointer-events: none;
      }

      /* Selector popup drag behavior - above popup tabs when dragging */
      .selector-content.popup-dragging {
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
        z-index: ${h.Mu.POPUP_TABS+10} !important;
      }

      .selector-content.popup-dragging .selector-header {
        cursor: move;
      }

      .selector-content.popup-dragging .resize-handle {
        pointer-events: none;
      }

      /* Module Preview */
      .module-preview {
        margin: 16px 24px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        overflow: hidden; /* prevent content from overflowing the preview container */
        max-width: 100%;
        transition: all 0.3s ease;
      }

      /* Pinned preview - sticky positioning */
      .module-preview.pinned {
        position: sticky;
        top: 16px;
        z-index: 1;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        border-color: var(--primary-color);
        background: var(--card-background-color);
      }

      /* Ensure pinned preview header also has solid background */
      .module-preview.pinned .preview-header {
        background: var(--secondary-background-color);
      }

      /* Ensure pinned preview content has solid background */
      .module-preview.pinned .preview-content {
        background: var(
          --view-background,
          var(--lovelace-background, var(--primary-background-color))
        );
      }

      .preview-header {
        padding: 12px 16px;
        background: var(--secondary-background-color);
        font-weight: 500;
        font-size: 14px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .preview-pin-icon {
        --mdc-icon-size: 18px;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .preview-pin-icon:hover {
        color: var(--primary-color);
        transform: scale(1.15);
      }

      .preview-pin-icon.pinned {
        color: var(--primary-color);
        transform: rotate(45deg);
      }

      .preview-pin-icon.pinned:hover {
        transform: rotate(45deg) scale(1.15);
      }

      .preview-caret {
        --mdc-icon-size: 20px;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .preview-caret:hover {
        color: var(--primary-color);
      }

      .preview-content {
        padding: 16px;
        min-height: 60px;
        display: block;
        max-width: 100%;
        overflow: hidden; /* ensure preview content doesn't overflow */
        background: var(
          --view-background,
          var(--lovelace-background, var(--primary-background-color))
        );
      }

      /* Module Tabs - sticky at top, above scrolling content */
      .module-tabs {
        display: flex;
        border-bottom: 1px solid var(--divider-color);
        z-index: ${h.Mu.BASE_CONTENT};
        background: var(--card-background-color);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
        /* Don't use isolation: isolate - it prevents fixed dropdowns from escaping */
      }

      .module-tab {
        flex: 1;
        padding: 12px 16px;
        background: none;
        border: none;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 14px;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
      }

      .module-tab:hover {
        color: var(--primary-color);
      }

      .module-tab.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

      .module-tab-content {
        padding: 24px;
        flex: 1;
        overflow-y: auto; /* body scrolls */
        overflow-x: visible; /* allow dropdown menus to render outside content column */
        width: 100%;
        box-sizing: border-box;
        min-height: 0; /* Allow flex child to shrink below content size */
        /* Keep content BELOW sticky tabs */
        position: relative;
        z-index: 0;
      }

      /* Design Subtabs */
      .design-subtabs {
        display: flex;
        margin-bottom: 16px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        overflow: hidden;
      }

      .design-subtab {
        flex: 1;
        padding: 8px 12px;
        background: var(--secondary-background-color);
        border: none;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 12px;
        transition: all 0.2s ease;
      }

      .design-subtab:hover {
        color: var(--primary-color);
      }

      .design-subtab.active {
        background: var(--primary-color);
        color: white;
      }

      /* Settings Sections */
      .settings-section {
        margin-bottom: 20px;
        width: 100%;
        box-sizing: border-box;
      }

      .settings-section label {
        display: block;
        font-weight: 500;
        margin-bottom: 8px;
        font-size: 14px;
        color: var(--primary-text-color);
        width: 100%;
        box-sizing: border-box;
      }

      /* Color Section Styling */
      .color-section {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .color-picker-wrapper {
        display: flex;
        align-items: center;
      }

      .color-picker-wrapper ultra-color-picker {
        width: 100%;
        max-width: 300px;
      }

      /* Font Dropdown Styling */
      .font-dropdown {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        font-family: inherit;
      }

      .font-dropdown:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .font-dropdown optgroup {
        font-weight: 600;
        color: var(--secondary-text-color);
        background: var(--card-background-color);
        padding: 4px 0;
      }

      .font-dropdown option {
        padding: 4px 8px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
      }

      /* Font Size Input Styling */
      .font-size-input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
      }

      .font-size-input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      /* Enhanced Alignment Buttons */
      .alignment-buttons {
        display: flex;
        gap: 6px;
        margin-top: 4px;
      }

      .alignment-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        padding: 0;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .alignment-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .alignment-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .alignment-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .settings-section input,
      .settings-section select,
      .settings-section textarea {
        width: 100%;
        max-width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        box-sizing: border-box;
      }

      .settings-section textarea {
        min-height: 60px;
        resize: vertical;
      }

      /* Gap control container styles */
      .gap-control-container {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
      }

      .gap-slider {
        flex: 1;
        min-width: 0;
        -webkit-appearance: none;
        appearance: none;
        height: 6px;
        border-radius: 3px;
        background: var(--divider-color);
        outline: none;
        opacity: 0.7;
        transition: opacity 0.2s;
      }

      .gap-slider:hover {
        opacity: 1;
      }

      .gap-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--primary-color);
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .gap-slider::-webkit-slider-thumb:hover {
        transform: scale(1.1);
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
      }

      .gap-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--primary-color);
        cursor: pointer;
        border: none;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: all 0.2s ease;
      }

      .gap-slider::-moz-range-thumb:hover {
        transform: scale(1.1);
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
      }

      .gap-slider::-moz-range-track {
        height: 6px;
        border-radius: 3px;
        background: var(--divider-color);
        border: none;
      }

      .gap-input {
        flex: 0 0 60px;
        min-width: 60px;
        max-width: 60px;
        text-align: center;
        padding: 6px 8px !important;
      }

      /* Ensure form elements fit properly */
      .settings-section ha-form {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }

      /* Ensure color pickers fit properly */
      .settings-section ultra-color-picker {
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
      }

      /* Consistent styling for all module settings */
      .module-tab-content .settings-section,
      .settings-tab-content .settings-section {
        border-radius: 8px;
        padding: 16px;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        margin-bottom: 16px;
      }

      .module-tab-content .settings-section:last-child,
      .settings-tab-content .settings-section:last-child {
        margin-bottom: 0;
      }

      /* Enhanced input field styling for consistency */
      .module-tab-content input[type='number'],
      .module-tab-content input[type='text'],
      .module-tab-content input[type='color'],
      .module-tab-content select,
      .module-tab-content textarea,
      .settings-tab-content input[type='number'],
      .settings-tab-content input[type='text'],
      .settings-tab-content input[type='color'],
      .settings-tab-content select,
      .settings-tab-content textarea {
        width: 100%;
        max-width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        font-family: inherit;
        box-sizing: border-box;
        transition: border-color 0.2s ease;
      }

      .module-tab-content input:focus,
      .module-tab-content select:focus,
      .module-tab-content textarea:focus,
      .settings-tab-content input:focus,
      .settings-tab-content select:focus,
      .settings-tab-content textarea:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      /* Range sliders consistent styling */
      .module-tab-content input[type='range'],
      .settings-tab-content input[type='range'] {
        width: 100%;
        height: 6px;
        border-radius: 3px;
        background: var(--divider-color);
        outline: none;
        -webkit-appearance: none;
      }

      .module-tab-content input[type='range']::-webkit-slider-thumb,
      .settings-tab-content input[type='range']::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: var(--primary-color);
        cursor: pointer;
      }

      /* Checkbox and radio button styling */
      .module-tab-content input[type='checkbox'],
      .module-tab-content input[type='radio'],
      .settings-tab-content input[type='checkbox'],
      .settings-tab-content input[type='radio'] {
        width: auto;
        margin-right: 8px;
        accent-color: var(--primary-color);
      }

      /* Label styling for form elements */
      .module-tab-content label,
      .settings-tab-content label {
        display: block;
        font-weight: 500;
        margin-bottom: 8px;
        font-size: 14px;
        color: var(--primary-text-color);
        line-height: 1.4;
      }

      /* Field groups */
      .module-tab-content .field-group,
      .settings-tab-content .field-group {
        gap: 12px;
        align-items: flex-end;
      }

      .module-tab-content .field-group > div,
      .settings-tab-content .field-group > div {
        flex: 1;
      }

      /* Button Groups */
      .alignment-buttons,
      .format-buttons {
        display: flex;
        gap: 4px;
      }

      .alignment-btn,
      .format-btn {
        padding: 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .alignment-btn:hover,
      .format-btn:hover {
        border-color: var(--primary-color);
      }

      .alignment-btn.active,
      .format-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      /* Value Position Buttons for Bar Module */
      .value-position-buttons {
        display: flex;
        gap: 8px;
      }

      .position-btn {
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        font-size: 12px;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .position-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      .position-btn.active {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      /* Spacing Grid */
      .spacing-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 24px;
      }

      .spacing-section h4 {
        margin: 0 0 12px 0;
        font-size: 14px;
        font-weight: 500;
      }

      .spacing-cross {
        display: grid;
        grid-template-columns: 1fr;
        gap: 8px;
        align-items: center;
        max-width: 120px;
        margin: 0 auto;
      }

      .spacing-row {
        display: grid;
        grid-template-columns: 1fr auto 1fr;
        gap: 8px;
        align-items: center;
      }

      .spacing-center {
        width: 32px;
        height: 32px;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 4px;
        font-weight: bold;
        font-size: 12px;
      }

      .spacing-cross input {
        width: 60px;
        text-align: center;
        padding: 4px 8px;
        font-size: 12px;
      }

      /* Module Rendering */
      .text-module {
        word-wrap: break-word;
      }

      .separator-module {
        width: 100%;
      }

      .image-module {
        text-align: center;
      }

      .image-placeholder {
        padding: 20px;
        border: 2px dashed var(--divider-color);
        border-radius: 4px;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      .module-placeholder {
        padding: 20px;
        text-align: center;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      /* Logic Tab Styles */
      .logic-tab-content {
        display: flex;
        flex-direction: column;
        gap: 24px;
        padding: 16px;
      }

      .logic-section {
        background: var(--card-background-color);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid var(--divider-color);
      }

      .section-header h3 {
        margin: 0 0 16px 0;
        color: var(--primary-text-color);
        font-size: 18px;
        font-weight: 600;
      }

      .display-mode-dropdown {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        min-height: 48px;
      }

      /* Conditions Section */
      .conditions-section {
        background: var(--card-background-color);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid var(--divider-color);
      }

      .conditions-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .conditions-header h4 {
        margin: 0;
        color: var(--primary-text-color);
        font-size: 16px;
        font-weight: 600;
      }

      .add-condition-btn {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .add-condition-btn:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .add-condition-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .conditions-list {
        display: flex;
        flex-direction: column;
        gap: 14px; /* slightly larger separation between condition cards */
      }

      .no-conditions {
        text-align: center;
        padding: 32px;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      /* Individual Condition Item */
      .condition-item {
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        padding: 0;
        transition: all 0.2s ease;
      }

      .condition-item.disabled {
        opacity: 0.6;
      }

      .condition-item:hover {
        border-color: var(--primary-color);
      }

      .condition-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        background: var(--card-background-color);
        border-radius: 8px 8px 0 0;
        border-bottom: 1px solid var(--divider-color);
      }

      .condition-header-left {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .condition-toggle {
        background: none;
        border: none;
        color: var(--primary-text-color);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: background 0.2s ease;
      }

      .condition-toggle:hover {
        background: var(--secondary-background-color);
      }

      .condition-toggle ha-icon {
        --mdc-icon-size: 18px;
        transition: transform 0.2s ease;
      }

      .condition-toggle.expanded ha-icon {
        transform: rotate(0deg);
      }

      .condition-label {
        font-weight: 500;
        color: var(--primary-text-color);
        font-size: 14px;
      }

      .condition-actions {
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .condition-action-btn {
        background: none;
        border: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        padding: 6px;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .condition-action-btn:hover {
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
      }

      .condition-action-btn.delete:hover {
        background: var(--error-color);
        color: white;
      }

      .condition-action-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .condition-drag-handle {
        background: none;
        border: none;
        color: var(--secondary-text-color);
        cursor: grab;
        padding: 6px;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .condition-drag-handle:hover {
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
      }

      .condition-drag-handle:active {
        cursor: grabbing;
      }

      /* Condition Content */
      .condition-content {
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .condition-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-bottom: 8px; /* add breathing room between stacked fields */
      }

      .condition-field label {
        font-weight: 500;
        color: var(--primary-text-color);
        font-size: 14px;
        display: block;
        margin: 0 0 8px 0;
        text-transform: capitalize;
      }

      .condition-field select,
      .condition-field input,
      .condition-field textarea {
        padding: 10px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        transition: border-color 0.2s ease;
      }

      .condition-field select:focus,
      .condition-field input:focus,
      .condition-field textarea:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .condition-enable-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: normal !important;
        cursor: pointer;
      }

      /* Condition Type Specific Styles */
      .entity-condition-fields,
      .time-condition-fields,
      .custom-field-condition,
      .template-condition {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .time-inputs {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .condition-info {
        margin: 0;
        padding: 8px 12px;
        background: var(--info-color, #2196f3);
        color: white;
        border-radius: 6px;
        font-size: 12px;
        text-align: center;
      }

      .template-help {
        font-size: 12px;
        color: var(--secondary-text-color);
        font-style: italic;
        margin-top: 4px;
      }

      /* Template Section */
      .template-section {
        background: var(--card-background-color);
        border-radius: 8px;
        padding: 16px;
        border: 1px solid var(--divider-color);
      }

      .template-header {
        margin-bottom: 16px;
      }

      .template-toggle {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        color: var(--primary-text-color);
        cursor: pointer;
      }

      .template-content {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .template-editor {
        min-height: 120px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
        line-height: 1.4;
        resize: vertical;
      }

      @media (max-width: 768px) {
        .columns-container {
          flex-direction: column;
        }

        .column-builder {
          border-right: none;
          border-bottom: 1px solid var(--divider-color);
        }

        .column-builder:last-child {
          border-bottom: none;
        }

        /* Single column module grid on mobile */
        .module-types {
          grid-template-columns: 1fr;
        }

        /* Hide green layout badge on mobile to avoid conflict with title */
        .layout-badge {
          display: none !important;
        }

        .spacing-grid {
          grid-template-columns: 1fr;
        }

        .time-inputs {
          grid-template-columns: 1fr;
        }
      }

      /* Logic Module Dimming */
      .module-with-logic {
        position: relative;
      }

      .module-with-logic.logic-hidden {
        opacity: 0.4;
        filter: grayscale(50%);
      }

      .logic-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.6);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 12px;
        font-weight: 500;
        border-radius: 4px;
        pointer-events: none;
        z-index: ${h.Mu.CARD_BACKGROUND};
      }

      .logic-overlay ha-icon {
        --mdc-icon-size: 20px;
        margin-bottom: 4px;
      }

      .logic-overlay span {
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
      }

      /* Toggle Switch Styles */
      .switch-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 8px;
      }

      .switch-label {
        font-weight: 600;
        color: var(--primary-text-color);
        font-size: 16px;
      }

      .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--switch-unchecked-color, #ccc);
        transition: 0.3s;
        border-radius: 24px;
      }

      .slider:before {
        position: absolute;
        content: '';
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.3s;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      input:checked + .slider {
        background-color: var(--primary-color);
      }

      input:focus + .slider {
        box-shadow: 0 0 1px var(--primary-color);
      }

      input:checked + .slider:before {
        transform: translateX(26px);
      }

      .slider.round {
        border-radius: 24px;
      }

      .slider.round:before {
        border-radius: 50%;
      }

      /* Disabled state for conditions */
      .disabled-note {
        font-size: 12px;
        color: var(--warning-color, #ff9800);
        font-style: italic;
        font-weight: normal;
      }

      .template-description {
        font-size: 14px;
        color: var(--secondary-text-color);
        line-height: 1.4;
        margin: 4px 0 12px 0;
      }

      /* Animation keyframes and classes for preview windows */
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes vibrate {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-2px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(2px);
        }
      }

      @keyframes rotate-left {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(-360deg);
        }
      }

      @keyframes rotate-right {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes hover {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes fade {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      @keyframes scale {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-10px);
        }
        60% {
          transform: translateY(-5px);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }

      @keyframes tada {
        0% {
          transform: scale(1);
        }
        10%,
        20% {
          transform: scale(0.9) rotate(-3deg);
        }
        30%,
        50%,
        70%,
        90% {
          transform: scale(1.1) rotate(3deg);
        }
        40%,
        60%,
        80% {
          transform: scale(1.1) rotate(-3deg);
        }
        100% {
          transform: scale(1) rotate(0);
        }
      }

      .animation-pulse {
        animation-name: pulse;
        animation-iteration-count: infinite;
      }

      .animation-vibrate {
        animation-name: vibrate;
        animation-iteration-count: infinite;
      }

      .animation-rotate-left {
        animation-name: rotate-left;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
      }

      .animation-rotate-right {
        animation-name: rotate-right;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
      }

      .animation-hover {
        animation-name: hover;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
      }

      .animation-fade {
        animation-name: fade;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
      }

      .animation-scale {
        animation-name: scale;
        animation-timing-function: ease-in-out;
        animation-iteration-count: infinite;
      }

      .animation-bounce {
        animation-name: bounce;
        animation-iteration-count: infinite;
      }

      .animation-shake {
        animation-name: shake;
        animation-timing-function: cubic-bezier(0.36, 0.07, 0.19, 0.97);
        animation-iteration-count: infinite;
      }

      .animation-tada {
        animation-name: tada;
        animation-iteration-count: infinite;
      }

      /* Row and Column Preview Styles */
      .row-preview-content {
        display: flex;
        padding: 16px;
        border-radius: 8px;
        border: 1px solid var(--divider-color);
        min-height: 60px;
        align-items: center;
        justify-content: space-around;
      }

      .column-preview {
        flex: 1;
        padding: 12px;
        margin: 0 4px;
        background: var(--accent-color);
        color: white;
        border-radius: 4px;
        text-align: center;
        font-size: 14px;
        font-weight: 500;
      }

      .column-preview-content {
        padding: 16px;
        border-radius: 8px;
        border: 1px solid var(--divider-color);
        text-align: center;
        background: var(--secondary-background-color);
        min-height: 60px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .column-preview-content p {
        margin: 0 0 8px 0;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      /* Background filter support for previews - use pseudo-element to avoid blurring content */
      .row-preview-content.has-background-filter,
      .column-preview-content.has-background-filter {
        position: relative;
        isolation: isolate;
      }

      .row-preview-content.has-background-filter::before,
      .column-preview-content.has-background-filter::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: inherit;
        background-image: var(--bg-image);
        background-size: var(--bg-size);
        background-position: var(--bg-position);
        background-repeat: var(--bg-repeat);
        filter: var(--bg-filter);
        border-radius: inherit;
        z-index: -1;
        pointer-events: none;
      }

      .module-count {
        font-size: 12px;
        color: var(--secondary-text-color);
      }

      /* Drag and Drop Styles */
      .row-builder[draggable='true'],
      .column-builder[draggable='true'],
      .module-item[draggable='true'] {
        cursor: grab;
      }

      .row-builder[draggable='true']:hover,
      .column-builder[draggable='true']:hover,
      .module-item[draggable='true']:hover {
        cursor: grab;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .row-builder[draggable='true']:active,
      .column-builder[draggable='true']:active,
      .module-item[draggable='true']:active {
        cursor: grabbing;
        transform: scale(0.98);
      }

      /* Invalid drop target indication */
      :host([dragging-column]) .module-item,
      :host([dragging-row]) .module-item,
      :host([dragging-row]) .column-builder {
        cursor: not-allowed !important;
        opacity: 0.5;
        pointer-events: auto;
      }

      .drop-target {
        box-shadow: 0 0 20px rgba(var(--rgb-primary-color), 0.6) !important;
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        transform: scale(1.02) !important;
        transition: all 0.2s ease !important;
      }

      .drop-target.row-builder {
        border-color: var(--primary-color) !important;
        border-width: 3px !important;
        border-style: dashed !important;
      }

      .drop-target.column-builder {
        border-color: var(--primary-color) !important;
        border-width: 3px !important;
        border-style: dashed !important;
      }

      .drop-target.module-item {
        border-color: var(--primary-color) !important;
        border-width: 2px !important;
        border-style: dashed !important;
      }

      /* Drag handle indicators (disabled) */
      /* We now render explicit drag handles inside headers. The legacy
         pseudo-element indicators caused duplicate icons on mobile. */
      .row-header::before,
      .column-header::before,
      .module-content::before {
        content: none !important; /* hide legacy indicators */
      }

      /* Module item hover effect - consolidated with action display */
      .module-item:hover {
        border-color: var(--primary-color) !important;
      }

      .row-header {
        position: relative;
      }

      .column-header {
        position: relative;
      }

      .module-content {
        position: relative;
      }

      /* Visual feedback during drag */
      .row-builder[draggable='true'][style*='opacity: 0.5'] {
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        border: 2px dashed var(--primary-color) !important;
      }

      .column-builder[draggable='true'][style*='opacity: 0.5'] {
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        border: 2px dashed var(--primary-color) !important;
      }

      .module-item[draggable='true'][style*='opacity: 0.5'] {
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        border: 2px dashed var(--primary-color) !important;
      }

      /* Enhanced modules container styling */
      .modules-container {
        min-height: 80px;
        position: relative;
        transition: all 0.2s ease;
      }

      /* Module Name Field Styling */
      .module-name-input {
        width: 100%;
        max-width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--secondary-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        font-family: inherit;
        box-sizing: border-box;
      }

      .module-name-input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 1px var(--primary-color);
      }

      .field-help {
        font-size: 12px;
        color: var(--secondary-text-color);
        line-height: 1.4;
        margin-top: 4px;
        font-style: italic;
      }

      /* Note: Image module still shows "Image Name" field from the registry.
         This will need to be addressed in the image module itself to remove
         the duplicate field since we now have universal "Module Name" above. */

      .modules-container:empty {
        border: 2px dashed var(--divider-color);
        background: var(--secondary-background-color);
      }

      .modules-container:empty::before {
        content: 'Drop modules here or click Add Module';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: var(--secondary-text-color);
        font-style: italic;
        font-size: 13px;
        pointer-events: none;
        text-align: center;
      }

      .modules-container::after {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        border: 2px dashed transparent;
        border-radius: 6px;
        pointer-events: none;
        transition: all 0.2s ease;
        z-index: 1;
      }

      .column-builder.drop-target .modules-container::after {
        border-color: var(--primary-color);
        background: rgba(var(--rgb-primary-color), 0.1);
      }

      /* Layout Module Styles - Column-like appearance */
      .layout-module-container {
        border: 2px solid var(--success-color, #4caf50);
        border-radius: 6px;
        background: var(--card-background-color);
        width: 100%;
        box-sizing: border-box;
        overflow: visible;
        margin-bottom: 8px;
      }

      .layout-module-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        font-weight: 500;
        padding: 8px 12px;
        background: var(--success-color, #4caf50);
        color: white;
        border-bottom: 2px solid var(--success-color, #4caf50);
        border-radius: 0px;
      }

      .layout-module-title {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .layout-module-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 18px;
        height: 18px;
        color: rgba(255, 255, 255, 0.7);
        cursor: grab;
        opacity: 0.8;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 14px;
      }

      .layout-module-drag-handle:hover {
        opacity: 1;
      }

      .layout-module-drag-handle:active {
        cursor: grabbing;
      }

      .layout-module-actions {
        display: flex;
        gap: 4px;
        align-items: center;
      }

      .layout-module-add-btn,
      .layout-module-settings-btn,
      .layout-module-duplicate-btn,
      .layout-module-delete-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
        --mdc-icon-size: 16px;
      }

      .layout-module-add-btn:hover,
      .layout-module-settings-btn:hover,
      .layout-module-duplicate-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      .layout-module-delete-btn:hover {
        background: rgba(255, 100, 100, 0.8);
        color: white;
      }

      .layout-modules-container {
        background: var(--card-background-color);
        border: 2px dashed var(--divider-color);
        border-radius: 4px;
        margin: 8px;
        transition: all 0.2s ease;
        position: relative;
      }

      .layout-modules-container:hover {
        border-color: var(--success-color, #4caf50);
        background: rgba(76, 175, 80, 0.05);
      }

      .layout-modules-container.layout-drop-target {
        border-color: var(--primary-color) !important;
        border-width: 3px !important;
        border-style: dashed !important;
        background: rgba(var(--rgb-primary-color), 0.1) !important;
        box-shadow: 0 0 20px rgba(var(--rgb-primary-color), 0.3) !important;
      }

      .layout-module-empty {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 8px;
        color: var(--secondary-text-color);
        font-style: italic;
        text-align: center;
        padding: 24px;
        width: 100%;
        cursor: pointer;
        user-select: none;
        transition:
          color 0.2s ease,
          opacity 0.2s ease;
      }

      .layout-module-empty ha-icon {
        --mdc-icon-size: 32px;
        opacity: 0.7;
      }

      .layout-module-empty:hover ha-icon {
        opacity: 1;
      }

      .layout-child-module-wrapper {
        width: 100%;
        box-sizing: border-box;
        cursor: grab;
      }

      .layout-child-module-wrapper:active {
        cursor: grabbing;
      }

      /* Simplified layout child module styling */
      .layout-child-simplified-module {
        width: 100%;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        transition: all 0.2s ease;
        cursor: pointer;
        box-sizing: border-box;
        margin-bottom: 8px;
      }

      .layout-child-simplified-module:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      .layout-child-simplified-module:hover .layout-child-content {
        color: var(--primary-text-color);
      }

      .layout-child-simplified-module:active {
        cursor: grabbing;
        transform: scale(0.98);
      }

      .layout-child-module-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        min-height: 40px;
        box-sizing: border-box;
      }

      .layout-child-icon {
        --mdc-icon-size: 20px;
        color: var(--primary-color);
        flex-shrink: 0;
      }

      .layout-child-content {
        flex: 1;
        min-width: 0;
      }

      .layout-child-title {
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
        margin-bottom: 2px;
      }

      .layout-child-info {
        font-size: 12px;
        color: var(--secondary-text-color);
        line-height: 1.3;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .layout-child-drag-handle {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        color: var(--secondary-text-color);
        cursor: grab;
        opacity: 0.6;
        transition: opacity 0.2s ease;
        --mdc-icon-size: 14px;
      }

      .layout-child-drag-handle:hover {
        opacity: 1;
        color: var(--primary-color);
      }

      .layout-child-drag-handle:active {
        cursor: grabbing;
      }

      .layout-child-actions {
        display: flex;
        gap: 4px;
        align-items: center;
      }

      .layout-child-action-btn {
        background: none;
        border: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
        --mdc-icon-size: 14px;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .layout-child-action-btn.edit-btn:hover {
        background: var(--primary-color);
        color: white;
      }

      .layout-child-action-btn.delete-btn:hover {
        background: var(--error-color);
        color: white;
      }

      /* Drag handle for touch devices */
      @media (hover: none) {
        /* On touch devices, show action buttons on tap/focus */
        .module-item:active .module-hover-overlay,
        .module-item:focus-within .module-hover-overlay {
          opacity: 1;
          visibility: visible;
        }

        .module-action-btn {
          width: 36px;
          height: 36px;
        }

        .module-action-btn ha-icon {
          --mdc-icon-size: 20px;
        }
      }

      /* Module Selector Tabs */
      .module-selector-tabs {
        display: flex;
        border-bottom: 1px solid var(--divider-color);
        background: var(--secondary-background-color);
        margin-bottom: 16px;
        /* Ensure tabs don't overflow on mobile */
        overflow-x: auto;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
      }

      .module-selector-tabs::-webkit-scrollbar {
        display: none; /* Chrome/Safari */
      }

      .tab-button {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 12px 16px;
        background: none;
        border: none;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        border-bottom: 2px solid transparent;
      }

      .tab-button:hover {
        color: var(--primary-color);
        background: var(--primary-color-10);
      }

      .tab-button.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
        background: var(--primary-color-10);
      }

      .tab-button ha-icon {
        --mdc-icon-size: 18px;
      }

      /* Layout Containers spacing */
      .module-category.layout-containers {
        margin-top: 20px;
      }

      /* Presets Tab */
      .presets-container {
        padding: 16px;
      }

      .preset-categories {
        display: flex;
        gap: 8px;
        margin-bottom: 20px;
        flex-wrap: wrap;
        justify-content: center;
      }

      .category-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 16px;
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 20px;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 12px;
      }

      .category-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .category-btn.active {
        background: var(--primary-color);
        border-color: var(--primary-color);
        color: white;
      }

      .category-btn ha-icon {
        --mdc-icon-size: 14px;
      }

      .presets-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 20px;
      }

      .preset-card {
        display: flex;
        flex-direction: column;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .preset-card:hover {
        border-color: var(--primary-color);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transform: translateY(-1px);
      }

      /* WordPress preset specific styles */
      .presets-header {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 24px;
        align-items: center;
      }

      .preset-footer {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 16px 0;
        border-top: 1px solid var(--divider-color);
        margin-top: 16px;
      }

      .reload-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 16px;
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 20px;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 12px;
        font-weight: 500;
      }

      .reload-btn:hover:not(:disabled) {
        border-color: var(--primary-color);
        color: var(--primary-color);
        background: var(--card-background-color);
      }

      .reload-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .reload-btn ha-icon {
        --mdc-icon-size: 14px;
        transition: transform 0.6s ease;
      }

      .reload-btn ha-icon.spinning {
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .wordpress-status {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .status-item {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 500;
        background: var(--secondary-background-color);
        color: var(--secondary-text-color);
      }

      .status-item.loading {
        background: rgba(var(--rgb-primary-color), 0.1);
        color: var(--primary-color);
      }

      .status-item.error {
        background: rgba(var(--rgb-error-color, 244, 67, 54), 0.1);
        color: var(--error-color, #f44336);
      }

      .status-item.success {
        background: rgba(var(--rgb-success-color, 76, 175, 80), 0.1);
        color: var(--success-color, #4caf50);
      }

      .status-item ha-icon {
        --mdc-icon-size: 16px;
      }

      .spinning {
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .retry-btn,
      .refresh-btn {
        background: none;
        border: none;
        color: inherit;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        margin-left: 8px;
      }

      .retry-btn:hover,
      .refresh-btn:hover {
        background: rgba(0, 0, 0, 0.1);
        transform: scale(1.1);
      }

      .retry-btn ha-icon,
      .refresh-btn ha-icon {
        --mdc-icon-size: 14px;
      }

      /* Preset header with badge, title, and stats */
      .preset-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        background: rgba(var(--rgb-primary-color), 0.02);
        border-bottom: 1px solid var(--divider-color);
        gap: 12px;
      }

      .preset-header-left {
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
        min-width: 0;
      }

      .preset-title-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
        flex: 1;
        min-width: 0;
      }

      .preset-header-title {
        margin: 0;
        font-size: 15px;
        font-weight: 600;
        color: var(--primary-text-color);
        line-height: 1.3;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .preset-header-author {
        font-size: 11px;
        color: var(--secondary-text-color);
        font-style: italic;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      /* Origin badge styles */
      .preset-header .origin-badge {
        padding: 4px 10px;
        border-radius: 8px;
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        flex-shrink: 0;
      }

      /* Different styles for different badge types */
      .preset-header .origin-badge.community {
        background: rgba(var(--rgb-secondary-color, 255, 152, 0), 0.9);
        color: white;
        border: 1px solid rgba(var(--rgb-secondary-color, 255, 152, 0), 1);
      }

      .preset-header .origin-badge.default {
        background: rgba(var(--rgb-primary-color), 0.9);
        color: white;
        border: 1px solid rgba(var(--rgb-primary-color), 1);
      }

      .preset-header .origin-badge.builtin {
        background: rgba(var(--rgb-secondary-text-color), 0.8);
        color: white;
        border: 1px solid rgba(var(--rgb-secondary-text-color), 0.9);
      }

      /* Large preview section */
      .preset-preview {
        position: relative;
        width: 100%;
        height: 200px;
        background: var(--secondary-background-color);
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        padding: 8px;
        box-sizing: border-box;
      }

      .preset-thumbnail {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        overflow: hidden;
        position: relative;
      }

      .preset-thumbnail img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: transform 0.3s ease;
      }

      .preset-card:hover .preset-thumbnail img {
        transform: scale(1.05);
      }

      /* Image slider styles */
      .preset-image-slider {
        width: 100%;
        height: 100%;
        position: relative;
        overflow: hidden;
        border-radius: 8px;
      }

      .preset-slider-container {
        display: flex;
        width: 100%;
        height: 100%;
        transition: transform 0.3s ease;
        cursor: grab;
      }

      .preset-slider-container:active {
        cursor: grabbing;
      }

      .preset-slider-image {
        flex: 0 0 100%;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .preset-slider-image img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: transform 0.3s ease;
      }

      .preset-card:hover .preset-slider-image img {
        transform: scale(1.05);
      }

      /* Slider navigation dots */
      .preset-slider-dots {
        position: absolute;
        bottom: 8px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 6px;
        z-index: 2;
      }

      .preset-slider-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: all 0.2s ease;
        border: 1px solid rgba(0, 0, 0, 0.2);
      }

      .preset-slider-dot.active {
        background: rgba(255, 255, 255, 0.9);
        transform: scale(1.2);
      }

      .preset-slider-dot:hover {
        background: rgba(255, 255, 255, 0.8);
      }

      /* Slider navigation arrows */
      .preset-slider-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(0, 0, 0, 0.5);
        color: white;
        border: none;
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        opacity: 0;
        transition: all 0.2s ease;
        z-index: 2;
      }

      .preset-image-slider:hover .preset-slider-nav {
        opacity: 1;
      }

      .preset-slider-nav:hover {
        background: rgba(0, 0, 0, 0.7);
        transform: translateY(-50%) scale(1.1);
      }

      .preset-slider-nav.prev {
        left: 8px;
      }

      .preset-slider-nav.next {
        right: 8px;
      }

      .preset-slider-nav ha-icon {
        font-size: 16px;
      }

      .preset-icon-large {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 80px;
        height: 80px;
        background: rgba(var(--rgb-primary-color), 0.1);
        border-radius: 50%;
        color: var(--primary-color);
      }

      .preset-icon-large ha-icon {
        font-size: 40px;
      }

      /* Content section */
      .preset-content {
        padding: 16px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .preset-description {
        margin: 0;
        font-size: 13px;
        line-height: 1.4;
        color: var(--secondary-text-color);
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      /* Action buttons at bottom */
      .preset-actions {
        display: flex;
        gap: 8px;
        padding: 12px 16px;
        border-top: 1px solid var(--divider-color);
        background: var(--card-background-color);
      }

      .preset-actions button {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 10px 16px;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        flex: 1;
        justify-content: center;
        min-height: 40px;
      }

      .preset-actions button ha-icon {
        font-size: 16px;
      }

      /* Primary button (Add) */
      .add-preset-btn.primary {
        background: var(--primary-color);
        color: white;
        border: none;
      }

      .add-preset-btn.primary:hover {
        background: var(--primary-color);
        opacity: 0.9;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(var(--rgb-primary-color), 0.3);
      }

      /* Secondary button (Read More) */
      .read-more-btn.secondary {
        background: transparent;
        color: var(--primary-color);
        border: 1px solid var(--primary-color);
      }

      .read-more-btn.secondary:hover {
        background: var(--primary-color);
        color: white;
        transform: translateY(-1px);
      }

      /* Enhanced preset cards for community presets */
      .preset-card.community-preset {
        border-left: 3px solid rgba(var(--rgb-secondary-color, 255, 152, 0), 1);
      }

      .preset-card.community-preset:hover {
        border-left-color: rgba(var(--rgb-secondary-color, 255, 152, 0), 1);
        box-shadow: 0 4px 16px rgba(var(--rgb-secondary-color, 255, 152, 0), 0.2);
      }

      /* Enhanced preset cards for default presets */
      .preset-card.default-preset {
        border-left: 3px solid var(--primary-color);
      }

      .preset-card.default-preset:hover {
        border-left-color: var(--primary-color);
        box-shadow: 0 4px 16px rgba(var(--rgb-primary-color), 0.2);
      }

      .preset-card.builtin-preset {
        border-left: 3px solid var(--divider-color);
      }

      /* Preset stats (downloads, ratings) */
      .preset-stats {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .preset-stats .stat {
        display: flex;
        align-items: center;
        gap: 4px;
        font-size: 11px;
        color: var(--secondary-text-color);
        background: rgba(var(--rgb-secondary-text-color), 0.1);
        padding: 3px 8px;
        border-radius: 6px;
        font-weight: 500;
      }

      .preset-stats .stat ha-icon {
        --mdc-icon-size: 12px;
      }

      /* Error hint for empty states */
      .error-hint {
        font-size: 12px;
        color: var(--error-color, #f44336);
        text-align: center;
        margin-top: 8px;
        font-style: italic;
      }

      /* Preset description and actions */
      .preset-description {
        margin: 8px 0;
        line-height: 1.4;
        color: var(--secondary-text-color);
        font-size: 13px;
      }

      .preset-author {
        font-size: 11px;
        color: var(--secondary-text-color);
      }

      .preset-tags {
        display: flex;
        gap: 4px;
      }

      .tag {
        padding: 2px 6px;
        background: var(--secondary-background-color);
        border-radius: 10px;
        font-size: 10px;
        color: var(--secondary-text-color);
      }

      /* Integrations chips */
      .preset-integrations {
        margin-top: 6px;
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
      }

      .integration-chip {
        display: inline-flex;
        align-items: center;
        padding: 2px 6px;
        font-size: 10px;
        border-radius: 12px;
        background: var(--primary-color-10);
        color: var(--primary-color);
        border: 1px solid rgba(var(--rgb-primary-color), 0.2);
      }

      /* Favorites Tab */
      .favorites-container {
        padding: 16px;
      }

      .favorites-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .favorites-header h4 {
        margin: 0;
        color: var(--primary-text-color);
      }

      .import-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 16px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 12px;
        transition: all 0.2s ease;
      }

      .import-btn:hover {
        background: var(--primary-color-dark);
      }

      .import-btn ha-icon {
        --mdc-icon-size: 14px;
      }

      .favorites-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 16px;
      }

      .favorite-card {
        padding: 16px;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 12px;
      }

      .favorite-header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .favorite-header h4 {
        margin: 0;
        font-size: 14px;
        font-weight: 600;
        color: var(--primary-text-color);
      }

      .favorite-actions {
        display: flex;
        gap: 4px;
      }

      .action-btn {
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        color: var(--secondary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .action-btn:hover {
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .action-btn.delete:hover {
        border-color: var(--error-color);
        color: var(--error-color);
      }

      .action-btn ha-icon {
        --mdc-icon-size: 14px;
      }

      .favorite-description {
        margin: 0 0 8px 0;
        font-size: 12px;
        color: var(--secondary-text-color);
        line-height: 1.4;
      }

      .favorite-meta {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
      }

      .favorite-date {
        font-size: 11px;
        color: var(--secondary-text-color);
      }

      .favorite-tags {
        display: flex;
        gap: 4px;
      }

      /* Empty States */
      .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
        text-align: center;
        color: var(--secondary-text-color);
      }

      .empty-state ha-icon {
        --mdc-icon-size: 48px;
        margin-bottom: 16px;
        opacity: 0.6;
      }

      .empty-state p {
        margin: 0 0 8px 0;
        font-size: 14px;
      }

      .empty-hint {
        font-size: 12px;
        opacity: 0.8;
      }

      .error-details {
        margin-top: 16px;
        padding: 16px;
        background: var(--error-color);
        color: white;
        border-radius: 8px;
        text-align: left;
        max-width: 500px;
      }

      .error-hint {
        margin: 0 !important;
        font-size: 13px !important;
        line-height: 1.4;
      }

      .error-hint code {
        background: rgba(255, 255, 255, 0.2);
        padding: 2px 6px;
        border-radius: 4px;
        font-family: monospace;
        font-size: 12px;
      }

      .error-hint strong {
        font-weight: 600;
      }

      /* Row Action Buttons */
      .row-paste-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 0;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }

      .row-paste-btn:hover {
        background: rgba(100, 150, 255, 0.8);
        color: white;
      }

      .row-favorite-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 0;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }

      .row-favorite-btn:hover {
        background: rgba(255, 100, 150, 0.8);
        color: white;
      }

      .row-export-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 0;
        border-radius: 4px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
      }

      .row-export-btn:hover {
        background: rgba(100, 150, 255, 0.8);
        color: white;
      }

      /* More actions button - hidden on desktop, shown on mobile */
      .row-more-container {
        position: relative;
        display: none; /* Hidden on desktop */
        z-index: 100;
      }

      .row-more-btn {
        background: none;
        border: none;
        color: rgba(255, 255, 255, 0.8);
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .row-more-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      /* Ensure menu appears above everything */
      .row-more-menu {
        position: absolute;
        top: 100%;
        right: 0;
        background: var(--card-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
        z-index: ${h.Mu.CONTEXT_MENU};
        min-width: 180px;
        overflow: hidden;
        margin-top: 4px;
      }

      .more-menu-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 14px 16px;
        background: none;
        border: none;
        width: 100%;
        text-align: left;
        color: var(--primary-text-color);
        cursor: pointer;
        transition: background-color 0.2s ease;
        font-size: 14px;
        font-weight: 500;
        min-height: 48px;
        box-sizing: border-box;
      }

      .more-menu-item:hover {
        background: var(--secondary-background-color);
      }

      .more-menu-item:active {
        background: var(--divider-color);
      }

      .more-menu-item.favorite {
        color: var(--pink-color, #e91e63);
      }

      .more-menu-item.export {
        color: var(--blue-color, #2196f3);
      }

      .more-menu-item ha-icon {
        --mdc-icon-size: 20px;
        flex-shrink: 0;
      }

      .more-menu-item span {
        flex: 1;
        white-space: nowrap;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .presets-grid,
        .favorites-grid {
          grid-template-columns: 1fr;
          gap: 16px;
        }

        /* Improve tab visibility on mobile */
        .module-selector-tabs {
          position: sticky;
          top: 0;
          z-index: ${h.Mu.POPUP_TABS};
          background: var(--secondary-background-color);
          border-bottom: 2px solid var(--divider-color);
          gap: 0; /* Remove gap on mobile for better fit */
        }

        .tab-button {
          flex-direction: row;
          gap: 6px;
          min-width: 0; /* Allow buttons to shrink */
          white-space: nowrap;
          padding: 14px 8px;
          min-height: 48px;
          font-size: 13px;
          font-weight: 500;
        }

        .tab-button ha-icon {
          --mdc-icon-size: 20px;
        }

        .tab-button span {
          font-size: 13px;
          font-weight: 500;
        }

        .preset-categories {
          justify-content: center;
          gap: 6px;
        }

        .category-btn {
          padding: 10px 12px;
          font-size: 13px;
        }

        .reload-btn {
          padding: 10px 12px;
          font-size: 13px;
        }

        /* Make module selector popup larger on mobile */
        .selector-content {
          width: 95vw !important;
          max-width: 95vw !important;
          height: 85vh !important;
          max-height: 85vh !important;
        }

        .selector-body {
          padding: 12px;
          overflow-y: auto;
        }

        /* Improve module cards on mobile */
        .module-types {
          grid-template-columns: 1fr;
          gap: 12px;
        }

        .module-type-btn {
          padding: 16px;
          text-align: left;
        }

        .preset-preview {
          height: 160px;
          padding: 6px;
        }

        .preset-header {
          padding: 10px 12px;
        }

        .preset-header-title {
          font-size: 14px;
        }

        .preset-content {
          padding: 12px;
        }

        .preset-actions {
          padding: 10px 12px;
        }

        .preset-actions button {
          padding: 8px 12px;
          font-size: 12px;
        }

        /* Mobile slider improvements */
        .preset-slider-nav {
          width: 28px;
          height: 28px;
        }

        .preset-slider-nav ha-icon {
          font-size: 14px;
        }

        .preset-slider-dots {
          bottom: 6px;
        }

        .preset-slider-dot {
          width: 6px;
          height: 6px;
        }

        .favorite-card {
          padding: 12px;
        }

        /* Hide column layout text on mobile to save space */
        .column-layout-text {
          display: none;
        }

        /* Show all action icons on mobile (no more overflow menu needed) */
        .row-paste-btn,
        .row-favorite-btn,
        .row-export-btn {
          display: flex;
        }

        /* Keep overflow menu hidden on mobile */
        .row-more-container {
          display: none;
        }

        /* Increase gap between action icons on mobile for better spacing */
        .row-actions-left,
        .row-actions-right {
          gap: 10px;
        }

        /* Adjust button and icon sizes on mobile */
        .row-actions-left button,
        .row-actions-right button {
          width: 36px;
          height: 36px;
        }

        .row-actions-left button ha-icon,
        .row-actions-right button ha-icon {
          width: 22px;
          height: 22px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
      }
    `}async _handleBackgroundImageUpload(e){var t;const i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i&&this.hass)try{const e=await(0,p.m)(this.hass,i);this._updateModule({background_image:e,background_image_type:"upload"})}catch(e){console.error("Background image upload failed:",e),alert(`Upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}}_truncatePath(e){return e?e.length<=30?e:"..."+e.slice(-27):""}_getBackgroundSizeDropdownValue(e){return e?["cover","contain","auto"].includes(e)?e:"custom":"cover"}_getCustomSizeValue(e,t){if(!e||["cover","contain","auto"].includes(e))return"";if("custom"===e)return"";const i=e.split(" ");return"width"===t?i[0]||"":"height"===t&&(i[1]||i[0])||""}_collectHoverEffectConfigs(){var e,t;const i=[];return this.config?(null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows)||void 0===t||t.forEach((e=>{var t,o;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect),null===(o=e.columns)||void 0===o||o.forEach((e=>{var t,o;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect),null===(o=e.modules)||void 0===o||o.forEach((e=>{var t;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect)}))}))})),i):i}_updateHoverEffectStyles(){if(!this.shadowRoot)return;const e=this._collectHoverEffectConfigs();e.length>0&&c.k.updateHoverEffectStyles(this.shadowRoot,e)}};A([(0,a.MZ)({attribute:!1})],z.prototype,"hass",void 0),A([(0,a.MZ)({attribute:!1})],z.prototype,"config",void 0),A([(0,a.MZ)({attribute:!1})],z.prototype,"cloudUser",void 0),A([(0,a.wk)()],z.prototype,"_showModuleSelector",void 0),A([(0,a.wk)()],z.prototype,"_selectedRowIndex",void 0),A([(0,a.wk)()],z.prototype,"_selectedColumnIndex",void 0),A([(0,a.wk)()],z.prototype,"_showModuleSettings",void 0),A([(0,a.wk)()],z.prototype,"_selectedModule",void 0),A([(0,a.wk)()],z.prototype,"_activeModuleTab",void 0),A([(0,a.wk)()],z.prototype,"_activeDesignSubtab",void 0),A([(0,a.wk)()],z.prototype,"_showRowSettings",void 0),A([(0,a.wk)()],z.prototype,"_selectedRowForSettings",void 0),A([(0,a.wk)()],z.prototype,"_activeRowTab",void 0),A([(0,a.wk)()],z.prototype,"_showColumnSettings",void 0),A([(0,a.wk)()],z.prototype,"_selectedColumnForSettings",void 0),A([(0,a.wk)()],z.prototype,"_activeColumnTab",void 0),A([(0,a.wk)()],z.prototype,"_showColumnLayoutSelector",void 0),A([(0,a.wk)()],z.prototype,"_selectedRowForLayout",void 0),A([(0,a.wk)()],z.prototype,"_collapsedPreviewModules",void 0),A([(0,a.wk)()],z.prototype,"_isRowColumnPreviewCollapsed",void 0),A([(0,a.wk)()],z.prototype,"_collapsedConditionIds",void 0),A([(0,a.wk)()],z.prototype,"_collapsedRows",void 0),A([(0,a.wk)()],z.prototype,"_collapsedColumns",void 0),A([(0,a.wk)()],z.prototype,"_isPreviewPinned",void 0),A([(0,a.wk)()],z.prototype,"_draggingCondition",void 0),A([(0,a.wk)()],z.prototype,"_globalExternalCardCount",void 0),A([(0,a.wk)()],z.prototype,"_activeModuleSelectorTab",void 0),A([(0,a.wk)()],z.prototype,"_activeModuleCategoryTab",void 0),A([(0,a.wk)()],z.prototype,"_selectedPresetCategory",void 0),A([(0,a.wk)()],z.prototype,"_showFavoriteDialog",void 0),A([(0,a.wk)()],z.prototype,"_favoriteRowToSave",void 0),A([(0,a.wk)()],z.prototype,"_showImportDialog",void 0),A([(0,a.wk)()],z.prototype,"_openMoreMenuRowIndex",void 0),A([(0,a.wk)()],z.prototype,"_undoStack",void 0),A([(0,a.wk)()],z.prototype,"_redoStack",void 0),A([(0,a.wk)()],z.prototype,"_draggedItem",void 0),A([(0,a.wk)()],z.prototype,"_dropTarget",void 0),A([(0,a.wk)()],z.prototype,"_selectedLayoutModuleIndex",void 0),A([(0,a.wk)()],z.prototype,"_selectedNestedChildIndex",void 0),A([(0,a.wk)()],z.prototype,"_showLayoutChildSettings",void 0),A([(0,a.wk)()],z.prototype,"_selectedLayoutChild",void 0),A([(0,a.wk)()],z.prototype,"_popupDragState",void 0),A([(0,a.wk)()],z.prototype,"_popupResizeState",void 0),z=A([(0,a.EM)("ultra-layout-tab")],z)},6768:(e,t,i)=>{var o=i(5183),n=i(4276),a=i(4513),r=i(2314),s=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};const l=["transparent","#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#FF0000","#FF3333","#FF6666","#FF9999","#FFCCCC","#FF6600","#FF8833","#FFAA66","#FFCC99","#FFE6CC","#FFFF00","#FFFF33","#FFFF66","#FFFF99","#FFFFCC","#00FF00","#33FF33","#66FF66","#99FF99","#CCFFCC","#0000FF","#3333FF","#6666FF","#9999FF","#CCCCFF","#9900FF","#AA33FF","#BB66FF","#CC99FF","#DDCCFF","var(--primary-color)","var(--accent-color)","var(--error-color)","var(--warning-color)","var(--success-color)","var(--info-color)","var(--primary-text-color)","var(--secondary-text-color)","var(--disabled-text-color)","var(--divider-color)"];let d=class extends o.WF{constructor(){super(...arguments),this.disabled=!1,this._showPalette=!1,this._favoriteColors=[],this._showAddToFavorites=!1,this._transparency=100}firstUpdated(){this._currentValue=this.value,this._textInputValue=this.value,this._transparency=this._extractTransparency(this.value),this._documentClickHandler=this._handleDocumentClick.bind(this),document.addEventListener("click",this._documentClickHandler,!0),this._favoritesUnsubscribe=a.m.subscribe((e=>{this._favoriteColors=e,this.requestUpdate()}))}disconnectedCallback(){super.disconnectedCallback(),this._documentClickHandler&&(document.removeEventListener("click",this._documentClickHandler,!0),this._documentClickHandler=void 0),this._favoritesUnsubscribe&&(this._favoritesUnsubscribe(),this._favoritesUnsubscribe=void 0)}_handleDocumentClick(e){var t,i,o;if(!this._showPalette)return;if(this._showAddToFavorites)return;const n=null===(i=(t=e).composedPath)||void 0===i?void 0:i.call(t);if(n&&n.includes(this))return;const a=e.target;(null===(o=this.shadowRoot)||void 0===o?void 0:o.contains(a))||a instanceof HTMLInputElement&&"color"===a.type||a instanceof HTMLElement&&a.closest('[role="dialog"], .prompt, .modal')||(this._showPalette=!1)}updated(e){e.has("value")&&(this._currentValue=this.value,this._textInputValue=this.value,this._transparency=this._extractTransparency(this.value))}_togglePalette(e){e.stopPropagation(),this.disabled||(this._showPalette||(this._currentValue=this.value,this._textInputValue=this.value,this._transparency=this._extractTransparency(this.value)),this._showPalette=!this._showPalette)}_selectColor(e,t){t.stopPropagation();const i=this._applyTransparency(e,this._transparency);this._currentValue=i,this._textInputValue=i,this.value=i;const o=new CustomEvent("value-changed",{detail:{value:i},bubbles:!0,composed:!0});this.dispatchEvent(o),this.requestUpdate()}_applyColorSelection(){this.value=this._currentValue,this._showPalette=!1;const e=new CustomEvent("value-changed",{detail:{value:this._currentValue},bubbles:!0,composed:!0});this.dispatchEvent(e),this.requestUpdate()}_handleNativeColorChange(e){e.stopPropagation();const t=e.target.value,i=this._applyTransparency(t,this._transparency);this._currentValue=i,this._textInputValue=i,this.value=i;const o=new CustomEvent("value-changed",{detail:{value:i},bubbles:!0,composed:!0});this.dispatchEvent(o),this.requestUpdate()}_handleTextInputChange(e){const t=e.target;this._textInputValue=t.value}_handleTextInputKeyDown(e){"Enter"===e.key?(e.preventDefault(),this._applyTextInputValue()):"Escape"===e.key&&(e.preventDefault(),this._textInputValue=this._currentValue,this._showPalette=!1)}_applyTextInputValue(){if(void 0!==this._textInputValue&&this._isValidColor(this._textInputValue)){this._currentValue=this._textInputValue,this.value=this._textInputValue,this._transparency=this._extractTransparency(this._textInputValue);const e=new CustomEvent("value-changed",{detail:{value:this._textInputValue},bubbles:!0,composed:!0});this.dispatchEvent(e),this._showPalette=!1,this.requestUpdate()}}_isValidColor(e){return!!e&&(e.toLowerCase().includes("gradient")?/^(linear-gradient|radial-gradient|conic-gradient|repeating-linear-gradient|repeating-radial-gradient)\(.*\)$/i.test(e.trim()):[/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)$/,/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*[\d.]+\s*\)$/,/^hsl\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*\)$/,/^hsla\(\s*\d+\s*,\s*\d+%\s*,\s*\d+%\s*,\s*[\d.]+\s*\)$/,/^var\(--[\w-]+\)$/].some((t=>t.test(e)))||["transparent","red","blue","green","yellow","orange","purple","pink","brown","black","white","gray","grey"].includes(e.toLowerCase()))}_resetToDefault(){const e=this.defaultValue||"";this._currentValue=e;const t=new CustomEvent("value-changed",{detail:{value:e},bubbles:!0,composed:!0});this.dispatchEvent(t)}_addToFavorites(){const e=this._currentValue||this.value;if(!e||a.m.hasColor(e))return;const t=this._showPalette;setTimeout((()=>{const i=prompt("Enter a name for this color:",this._getColorDisplayName(e));i&&i.trim()?(a.m.addFavorite(i.trim(),e),this._showPalette=t,this._showAddToFavorites=!1,this.requestUpdate()):this._showPalette=t}),10)}_getColorDisplayName(e){var t;const i={"#ff0000":"Red","#00ff00":"Green","#0000ff":"Blue","#ffff00":"Yellow","#ff00ff":"Magenta","#00ffff":"Cyan","#000000":"Black","#ffffff":"White","#808080":"Gray","#ffa500":"Orange","#800080":"Purple","#ffc0cb":"Pink"},o=e.toLowerCase();if(i[o])return i[o];if(e.startsWith("var(--")){const i=null===(t=e.match(/var\(--([^)]+)\)/))||void 0===t?void 0:t[1];if(i)return i.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}return e}_getDisplayValue(){return this._currentValue&&""!==this._currentValue?this._currentValue:this.defaultValue||""}_getColorForNativeInput(){const e=this._getDisplayValue();if("transparent"===e)return"#ffffff";if(e.toLowerCase().includes("gradient"))return"#000000";if(e.startsWith("var(--")){const t=document.createElement("div");t.style.color=e,document.body.appendChild(t);const i=getComputedStyle(t).color;if(document.body.removeChild(t),i&&i.startsWith("rgb")){const e=i.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);if(e){const[t,i,o,n]=e,a=e=>e.toString(16).padStart(2,"0");return`#${a(parseInt(i))}${a(parseInt(o))}${a(parseInt(n))}`}}return e.includes("--primary-color")?"#03a9f4":e.includes("--primary-text-color")?"#ffffff":"#000000"}return e.startsWith("#")?e:"#000000"}_isDefaultValue(){return!this._currentValue||""===this._currentValue||this._currentValue===this.defaultValue}_getContrastColor(e){if("transparent"===e)return"var(--primary-text-color)";if(!e||e.startsWith("var(")||e.includes("gradient"))return"var(--primary-text-color)";if(e.startsWith("#")){const t=e.replace("#","");return(.299*parseInt(t.substr(0,2),16)+.587*parseInt(t.substr(2,2),16)+.114*parseInt(t.substr(4,2),16))/255>.5?"#000000":"#ffffff"}return"var(--primary-text-color)"}_extractTransparency(e){if(!e)return 100;if(e.toLowerCase().includes("gradient"))return 100;const t=e.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/);if(t){const e=parseFloat(t[4]);return Math.round(100*e)}if(e.match(/^#[0-9A-Fa-f]{8}$/)){const t=parseInt(e.substring(7,9),16)/255;return Math.round(100*t)}const i=e.match(/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*,\s*([\d.]+)\s*\)/);if(i){const e=parseFloat(i[4]);return Math.round(100*e)}return"transparent"===e?0:100}_hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}_getBaseColor(e){if(!e)return"#000000";if(e.toLowerCase().includes("gradient"))return e;const t=e.match(/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*[\d.]+)?\s*\)/);if(t){const[e,i,o,n]=t,a=e=>parseInt(e).toString(16).padStart(2,"0");return`#${a(i)}${a(o)}${a(n)}`}if(e.match(/^#[0-9A-Fa-f]{8}$/))return e.substring(0,7);const i=e.match(/hsla?\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(?:,\s*[\d.]+)?\s*\)/);if(i){const[e,t,o,n]=i;return`hsl(${t}, ${o}%, ${n}%)`}return"transparent"===e?"#FFFFFF":e}_applyTransparency(e,t){if(e.toLowerCase().includes("gradient"))return e;if(100===t)return e;if(0===t)return"transparent";const i=(t/100).toFixed(2);if(e.startsWith("var(--"))return`rgba(${e}, ${i})`;if(e.startsWith("#")){const t=this._hexToRgb(e);if(t)return`rgba(${t.r}, ${t.g}, ${t.b}, ${i})`}const o=e.match(/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/);if(o){const[e,t,n,a]=o;return`rgba(${t}, ${n}, ${a}, ${i})`}const n=e.match(/hsl\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)/);if(n){const[e,t,o,a]=n;return`hsla(${t}, ${o}%, ${a}%, ${i})`}return e}_handleTransparencyChange(e){const t=e.target,i=parseInt(t.value,10);this._transparency=i;const o=this._getBaseColor(this._currentValue),n=this._applyTransparency(o,i);this._currentValue=n,this._textInputValue=n,this.value=n;const a=new CustomEvent("value-changed",{detail:{value:n},bubbles:!0,composed:!0});this.dispatchEvent(a),this.requestUpdate()}render(){const e=this._getDisplayValue(),t=this._getColorForNativeInput();return o.qy`
      <div class="ultra-color-picker-container">
        ${this.label?o.qy`<label class="color-label">${this.label}</label>`:""}

        <div class="color-picker-wrapper">
          <!-- Main trigger input field -->
          <div
            class="color-input-field ${this.disabled?"disabled":""}"
            style="background-color: ${e}; color: ${this._getContrastColor(e)};"
            @click=${this._togglePalette}
            tabindex="0"
            role="button"
            aria-label="Open color palette"
            @keydown=${e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this._togglePalette(e))}}
          >
            <span class="color-value">${e}</span>
            <ha-icon
              icon="mdi:chevron-${this._showPalette?"up":"down"}"
              class="dropdown-icon"
            ></ha-icon>
          </div>

          <!-- Reset button -->
          <ha-icon-button
            class="reset-button ${this._isDefaultValue()?"disabled":""}"
            .disabled=${this._isDefaultValue()}
            @click=${this._resetToDefault}
            .title=${"Reset to default"}
          >
            <ha-icon icon="mdi:refresh"></ha-icon>
          </ha-icon-button>
        </div>

        <!-- Accordion-style palette -->
        ${this._showPalette?o.qy`
              <div class="color-palette-accordion">
                <!-- Text Input Section -->
                <div class="text-input-section">
                  <div class="input-header">
                    <label class="input-label">Type color value:</label>
                    <div class="native-picker-wrapper">
                      <button
                        class="native-picker-btn"
                        type="button"
                        title="Open native color picker"
                      >
                        <ha-icon icon="mdi:eyedropper"></ha-icon>
                      </button>
                      <input
                        id="native-color-input"
                        type="color"
                        .value=${t}
                        @change=${this._handleNativeColorChange}
                        @click=${e=>e.stopPropagation()}
                        @focus=${e=>e.stopPropagation()}
                        @blur=${e=>e.stopPropagation()}
                        class="native-color-overlay"
                        title="Open native color picker"
                      />
                    </div>
                  </div>

                  <div class="text-input-wrapper">
                    <input
                      type="text"
                      class="color-text-input ${this._isValidColor(this._textInputValue||"")?"valid":"invalid"}"
                      .value=${this._textInputValue||""}
                      @input=${this._handleTextInputChange}
                      @keydown=${this._handleTextInputKeyDown}
                      @click=${e=>e.stopPropagation()}
                      @focus=${e=>e.stopPropagation()}
                      placeholder="e.g. #ff0000, rgb(255,0,0), linear-gradient(...), var(--primary-color)"
                      spellcheck="false"
                    />
                    <button
                      class="apply-text-btn ${this._isValidColor(this._textInputValue||"")?"":"disabled"}"
                      @click=${e=>{e.stopPropagation(),this._applyTextInputValue()}}
                      .disabled=${!this._isValidColor(this._textInputValue||"")}
                      type="button"
                      title="Apply color"
                    >
                      <ha-icon icon="mdi:check"></ha-icon>
                    </button>
                  </div>
                </div>

                <!-- Transparency Slider Section -->
                <div class="transparency-section">
                  <div class="transparency-header">
                    <label class="transparency-label">Transparency:</label>
                    <span class="transparency-value">${this._transparency}%</span>
                  </div>
                  <div class="transparency-slider-wrapper">
                    <input
                      type="range"
                      class="transparency-slider"
                      min="0"
                      max="100"
                      step="1"
                      .value=${this._transparency.toString()}
                      @input=${this._handleTransparencyChange}
                      @click=${e=>e.stopPropagation()}
                      title="Adjust transparency (100% = fully opaque, 0% = fully transparent)"
                    />
                    <div class="transparency-track">
                      <div
                        class="transparency-preview"
                        style="background: linear-gradient(to right, 
                          transparent 0%, 
                          ${this._getBaseColor(this._currentValue)} 100%
                        );"
                      ></div>
                    </div>
                  </div>
                </div>

                <!-- Color Palette Grid -->
                <div class="palette-grid">
                  ${l.map((e=>o.qy`
                      <div
                        class="color-swatch ${this._currentValue===e?"selected":""}"
                        style="background-color: ${e}"
                        @click=${t=>this._selectColor(e,t)}
                        title="${e}"
                      ></div>
                    `))}
                </div>

                <!-- Favorites Section -->
                ${this._favoriteColors.length>0||this._showAddToFavorites?o.qy`
                      <div class="favorites-section">
                        <div class="favorites-header">
                          <label class="favorites-label">Favorite Colors</label>
                          ${this._currentValue&&!a.m.hasColor(this._currentValue)?o.qy`
                                <button
                                  class="add-favorite-btn"
                                  @click=${this._addToFavorites}
                                  title="Add current color to favorites"
                                  type="button"
                                >
                                  <ha-icon icon="mdi:heart-plus"></ha-icon>
                                </button>
                              `:""}
                        </div>

                        ${this._favoriteColors.length>0?o.qy`
                              <div class="favorites-grid">
                                ${this._favoriteColors.map((e=>o.qy`
                                    <div
                                      class="favorite-swatch ${this._currentValue===e.color?"selected":""}"
                                      style="background-color: ${e.color}"
                                      @click=${t=>this._selectColor(e.color,t)}
                                      title="${e.name} (${e.color})"
                                    >
                                      <span class="favorite-tooltip">${e.name}</span>
                                    </div>
                                  `))}
                              </div>
                            `:o.qy`
                              <div class="no-favorites">
                                <span>No favorite colors yet</span>
                                <small>Select a color and click the heart to add it</small>
                              </div>
                            `}
                      </div>
                    `:""}
              </div>
            `:""}
      </div>
    `}static get styles(){return o.AH`
      .ultra-color-picker-container {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
        position: relative;
        box-sizing: border-box;
        z-index: ${r.Mu.COLOR_PICKER_CONTAINER};
      }

      .color-label {
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
        margin-bottom: 4px;
      }

      .color-picker-wrapper {
        display: flex;
        align-items: center;
        gap: 12px;
        position: relative;
        /* Ensure palette can overflow this container */
        overflow: visible;
        z-index: ${r.Mu.MODULE_CONTENT};
      }

      .color-input-field {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color, #fff);
        color: var(--primary-text-color);
        font-family: var(--code-font-family, monospace);
        font-size: 14px;
        cursor: pointer;
        user-select: none;
        transition: all 0.2s ease;
        min-height: 36px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: relative;
      }

      .color-input-field:hover:not(.disabled) {
        border-color: var(--primary-color);
        background: var(--primary-color-light, rgba(33, 150, 243, 0.1));
      }

      .color-input-field:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.2);
      }

      .color-input-field.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: var(--disabled-color, #f5f5f5);
        color: var(--disabled-text-color);
      }

      .color-value {
        flex: 1;
        color: var(--primary-text-color);
        font-family: var(--code-font-family, monospace);
        font-size: 14px;
      }

      .dropdown-icon {
        --mdc-icon-size: 20px;
        color: var(--secondary-text-color);
        transition: transform 0.2s ease;
        margin-left: 8px;
      }

      .reset-button {
        --mdc-icon-button-size: 40px;
        --mdc-icon-size: 20px;
        --mdc-theme-primary: var(--primary-color);
        border-radius: 6px;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .reset-button:not(.disabled):hover {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
        transform: rotate(180deg);
        transform-origin: center center;
      }

      .reset-button ha-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        transform-origin: center center;
      }

      .reset-button.disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .reset-button.disabled ha-icon {
        color: var(--disabled-text-color);
      }

      .color-palette-accordion {
        margin-top: 12px;
        background: var(--card-background-color, white);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        padding: 16px;
        width: 100%;
        box-sizing: border-box;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        animation: expandDown 0.2s ease-out;
        position: relative;
        z-index: ${r.Mu.COLOR_PICKER_PALETTE};
      }

      @keyframes expandDown {
        from {
          opacity: 0;
          transform: scaleY(0.8);
          transform-origin: top;
        }
        to {
          opacity: 1;
          transform: scaleY(1);
          transform-origin: top;
        }
      }

      .text-input-section {
        margin-bottom: 16px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--divider-color);
        width: 100%;
        box-sizing: border-box;
      }

      .input-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .input-label {
        display: block;
        font-size: 12px;
        font-weight: 500;
        color: var(--secondary-text-color);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .text-input-wrapper {
        display: flex;
        gap: 8px;
        align-items: stretch;
        width: 100%;
        box-sizing: border-box;
      }

      .color-text-input {
        flex: 1;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-family: var(--code-font-family, 'Courier New', monospace);
        font-size: 14px;
        transition: all 0.2s ease;
        outline: none;
        box-sizing: border-box;
        min-width: 0;
        width: 100%;
      }

      .color-text-input:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.2);
      }

      .color-text-input.valid {
        border-color: var(--success-color, #4caf50);
      }

      .color-text-input.invalid {
        border-color: var(--error-color, #f44336);
      }

      .apply-text-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 12px;
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 44px;
      }

      .apply-text-btn:hover:not(.disabled) {
        background: var(--primary-color-dark, var(--primary-color));
        transform: scale(1.05);
      }

      .apply-text-btn.disabled {
        background: var(--disabled-color, #cccccc);
        color: var(--disabled-text-color);
        cursor: not-allowed;
        opacity: 0.6;
      }

      .apply-text-btn ha-icon {
        --mdc-icon-size: 18px;
      }

      /* Transparency Slider Section */
      .transparency-section {
        margin-bottom: 16px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--divider-color);
      }

      .transparency-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 12px;
      }

      .transparency-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--secondary-text-color);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .transparency-value {
        font-size: 14px;
        font-weight: 600;
        color: var(--primary-color);
        font-family: var(--code-font-family, monospace);
      }

      .transparency-slider-wrapper {
        position: relative;
        width: 100%;
        height: 32px;
        margin-bottom: 8px;
      }

      .transparency-track {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 8px;
        transform: translateY(-50%);
        border-radius: 4px;
        overflow: hidden;
        pointer-events: none;
        border: 1px solid var(--divider-color);
        background:
          linear-gradient(45deg, #ccc 25%, transparent 25%),
          linear-gradient(-45deg, #ccc 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #ccc 75%),
          linear-gradient(-45deg, transparent 75%, #ccc 75%);
        background-size: 8px 8px;
        background-position:
          0 0,
          0 4px,
          4px -4px,
          -4px 0px;
      }

      .transparency-preview {
        width: 100%;
        height: 100%;
        border-radius: inherit;
      }

      .transparency-slider {
        position: relative;
        width: 100%;
        height: 8px;
        -webkit-appearance: none;
        appearance: none;
        background: transparent;
        outline: none;
        cursor: pointer;
        z-index: ${r.Mu.MODULE_CONTENT};
        margin: 0;
        padding: 12px 0;
      }

      /* Webkit/Chrome slider thumb */
      .transparency-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--primary-color);
        border: 3px solid white;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .transparency-slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
      }

      .transparency-slider::-webkit-slider-thumb:active {
        transform: scale(1.1);
        background: var(--primary-color-dark, var(--primary-color));
      }

      /* Firefox slider thumb */
      .transparency-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--primary-color);
        border: 3px solid white;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .transparency-slider::-moz-range-thumb:hover {
        transform: scale(1.2);
        box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
      }

      .transparency-slider::-moz-range-thumb:active {
        transform: scale(1.1);
        background: var(--primary-color-dark, var(--primary-color));
      }

      /* Firefox track (hide default track) */
      .transparency-slider::-moz-range-track {
        background: transparent;
        border: none;
      }

      .palette-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(32px, 1fr));
        gap: 8px;
        margin-bottom: 0;
        width: 100%;
        box-sizing: border-box;
        overflow: hidden;
      }

      .color-swatch {
        width: 28px;
        height: 28px;
        border-radius: 4px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s ease;
        position: relative;
      }

      .color-swatch:hover {
        transform: scale(1.1);
        border-color: var(--primary-color);
      }

      .color-swatch.selected {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.3);
      }

      .color-swatch[style*='var(--'] {
        position: relative;
      }

      .color-swatch[style*='var(--']:after {
        content: 'T';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 12px;
        font-weight: bold;
        color: var(--primary-text-color);
        text-shadow: 0 0 2px rgba(255, 255, 255, 0.8);
      }

      /* Transparent swatch styling */
      .color-swatch[style*='transparent'] {
        background:
          linear-gradient(45deg, #ccc 25%, transparent 25%),
          linear-gradient(-45deg, #ccc 25%, transparent 25%),
          linear-gradient(45deg, transparent 75%, #ccc 75%),
          linear-gradient(-45deg, transparent 75%, #ccc 75%);
        background-size: 8px 8px;
        background-position:
          0 0,
          0 4px,
          4px -4px,
          -4px 0px;
        position: relative;
      }

      .color-swatch[style*='transparent']:after {
        content: '∅';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 14px;
        font-weight: bold;
        color: var(--primary-text-color);
        text-shadow: 0 0 2px rgba(255, 255, 255, 0.8);
      }

      .native-picker-wrapper {
        position: relative;
        display: inline-block;
      }

      .native-picker-btn {
        background: none;
        border: none;
        padding: 8px;
        border-radius: 6px;
        cursor: pointer;
        color: var(--primary-color);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 36px;
        height: 36px;
        pointer-events: none; /* Let clicks pass through to the overlay */
      }

      .native-picker-btn:hover {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
        transform: scale(1.1);
      }

      .native-picker-btn ha-icon {
        --mdc-icon-size: 18px;
        transition: transform 0.2s ease;
      }

      .native-color-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: pointer;
        border: none;
        background: transparent;
        z-index: ${r.Mu.MODULE_CONTENT};
        border-radius: 6px;
      }

      .native-color-overlay::-webkit-color-swatch-wrapper {
        padding: 0;
        border: none;
        border-radius: 6px;
      }

      .native-color-overlay::-webkit-color-swatch {
        border: none;
        border-radius: 6px;
      }

      .native-picker-wrapper:hover .native-picker-btn {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
        transform: scale(1.1);
      }

      /* Favorites Section */
      .favorites-section {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid var(--divider-color);
      }

      .favorites-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }

      .favorites-label {
        font-size: 12px;
        font-weight: 500;
        color: var(--secondary-text-color);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .add-favorite-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 4px;
        background: none;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        color: var(--primary-color);
        transition: all 0.2s ease;
      }

      .add-favorite-btn:hover {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
        transform: scale(1.1);
      }

      .add-favorite-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .favorites-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(32px, 1fr));
        gap: 8px;
        margin-bottom: 0;
        width: 100%;
        box-sizing: border-box;
      }

      .favorite-swatch {
        width: 28px;
        height: 28px;
        border-radius: 4px;
        cursor: pointer;
        border: 2px solid transparent;
        transition: all 0.2s ease;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .favorite-swatch:hover {
        transform: scale(1.1);
        border-color: var(--primary-color);
      }

      .favorite-swatch.selected {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.3);
      }

      .favorite-swatch .favorite-tooltip {
        position: absolute;
        bottom: -30px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
        z-index: ${r.Mu.CARD_TOOLTIP};
      }

      .favorite-swatch:hover .favorite-tooltip {
        opacity: 1;
      }

      .no-favorites {
        text-align: center;
        padding: 16px;
        color: var(--secondary-text-color);
      }

      .no-favorites span {
        display: block;
        font-size: 14px;
        margin-bottom: 4px;
      }

      .no-favorites small {
        font-size: 12px;
        opacity: 0.7;
      }

      @media (max-width: 768px) {
        .color-picker-wrapper {
          gap: 8px;
        }

        .color-input-field {
          font-size: 13px;
          padding: 6px 10px;
        }

        .color-palette-accordion {
          padding: 12px;
        }

        .palette-grid {
          grid-template-columns: repeat(auto-fit, minmax(28px, 1fr));
          gap: 6px;
        }

        .color-swatch {
          width: 28px;
          height: 28px;
        }

        .input-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .text-input-wrapper {
          flex-direction: column;
          gap: 8px;
        }

        .color-text-input {
          font-size: 13px;
          padding: 8px 10px;
        }

        .apply-text-btn {
          width: 100%;
          justify-content: center;
        }
      }

      /* Extra small screens - further optimize text input */
      @media (max-width: 480px) {
        .color-text-input {
          font-size: 12px;
          padding: 6px 8px;
        }

        .color-text-input::placeholder {
          font-size: 11px;
        }
      }
    `}};s([(0,n.MZ)({attribute:!1})],d.prototype,"hass",void 0),s([(0,n.MZ)()],d.prototype,"value",void 0),s([(0,n.MZ)()],d.prototype,"label",void 0),s([(0,n.MZ)()],d.prototype,"defaultValue",void 0),s([(0,n.MZ)({type:Boolean})],d.prototype,"disabled",void 0),s([(0,n.wk)()],d.prototype,"_currentValue",void 0),s([(0,n.wk)()],d.prototype,"_showPalette",void 0),s([(0,n.wk)()],d.prototype,"_textInputValue",void 0),s([(0,n.wk)()],d.prototype,"_favoriteColors",void 0),s([(0,n.wk)()],d.prototype,"_showAddToFavorites",void 0),s([(0,n.wk)()],d.prototype,"_transparency",void 0),d=s([(0,n.EM)("ultra-color-picker")],d)},7073:(e,t,i)=>{i.d(t,{E:()=>l});var o=i(5183),n=i(4002),a=i(1397),r=i(7987),s=i(456);const l=new class{renderModuleInCard(e,t,i,n){var r,l,d,c,p,u;const h=null===(r=null==n?void 0:n.showLogicOverlay)||void 0===r||r;a.S.setHass(t);const g=a.S.evaluateModuleVisibility(e),m=e,f=a.S.evaluateLogicProperties({logic_entity:null===(l=m.design)||void 0===l?void 0:l.logic_entity,logic_attribute:null===(d=m.design)||void 0===d?void 0:d.logic_attribute,logic_operator:null===(c=m.design)||void 0===c?void 0:c.logic_operator,logic_value:null===(p=m.design)||void 0===p?void 0:p.logic_value}),_=!g||!f,v=this._getModuleContent(e,t,i,!0),b=this._getPreviewAnimationData(m),y=this._getCardContainerStyle(i);return o.qy`
      <div class="module-with-logic ${_?"logic-hidden":""}">
        <div class="card-container" style="${y}">
          <div
            class="card-row"
            style="display: grid; grid-template-columns: 1fr; gap: 16px; background: transparent; background-image: none; border: none; border-radius: 0; position: inherit; top: auto; bottom: auto; left: auto; right: auto; z-index: auto; width: 100%; height: auto; max-width: none; max-height: none; min-width: none; min-height: auto; overflow: visible; clip-path: none; backdrop-filter: none; box-shadow: none; box-sizing: border-box"
          >
            <div
              class="card-column"
              style="display: flex; flex-direction: column; background: transparent; background-image: none; border: none; border-radius: 0; position: inherit; top: auto; bottom: auto; left: auto; right: auto; z-index: auto; width: 100%; height: auto; max-width: none; max-height: none; min-width: none; min-height: auto; overflow: visible; clip-path: none; backdrop-filter: none; box-shadow: none; box-sizing: border-box"
            >
              ${b.class?o.qy`
                    <div
                      class="${b.class}"
                      style="display: inherit; width: inherit; height: inherit; flex: inherit; animation-duration: ${b.duration};"
                    >
                      ${v}
                    </div>
                  `:v}
            </div>
          </div>
        </div>
        ${h&&_?o.qy`
              <div class="logic-overlay">
                <ha-icon icon="mdi:eye-off-outline"></ha-icon>
                <span
                  >${(0,s.kg)("editor.layout.hidden_by_logic",(null===(u=null==t?void 0:t.locale)||void 0===u?void 0:u.language)||"en","Hidden by Logic")}</span
                >
              </div>
            `:""}
      </div>
    `}renderModuleContent(e,t,i,n){var a;const s=e,l=this._isEditorContext(t),d=this._getModuleContent(e,t,i,l),c=null===(a=s.design)||void 0===a?void 0:a.hover_effect,p=r.k.getHoverEffectClass(c),u=(null==n?void 0:n.animationClass)||"",h=(null==n?void 0:n.animationDuration)||"2s",g=(null==n?void 0:n.animationDelay)||"0s",m=(null==n?void 0:n.animationTiming)||"ease",f=(null==n?void 0:n.introAnimation)||"none",_=(null==n?void 0:n.outroAnimation)||"none",v=(null==n?void 0:n.shouldTriggerStateAnimation)||!1;return u||"none"!==f||"none"!==_||v?o.qy`
        <div
          class="module-animation-wrapper ${u} ${p}"
          style="
            --animation-duration: ${h};
            --animation-delay: ${g};
            --animation-timing: ${m};
          "
        >
          ${d}
        </div>
      `:p?o.qy` <div class="module-hover-wrapper ${p}">${d}</div> `:d}_getModuleContent(e,t,i,a){const r=(0,n.oD)().getModule(e.type);return r?r.renderPreview(e,t,i,a):o.qy`
      <div class="unknown-module">
        <span>Unknown Module: ${e.type}</span>
      </div>
    `}_getCardContainerStyle(e){var t,i,o,n;const a=[];if(e.card_background?a.push(`background: ${e.card_background}`):a.push("background: var(--card-background-color, var(--ha-card-background, white))"),void 0!==e.card_border_radius?a.push(`border-radius: ${e.card_border_radius}px`):a.push("border-radius: 12px"),e.card_border_color||void 0!==e.card_border_width){const t=void 0!==e.card_border_width?e.card_border_width:0,i=e.card_border_color||"transparent";t>0&&a.push(`border: ${t}px solid ${i}`)}if(void 0!==e.card_padding?a.push(`padding: ${e.card_padding}px`):a.push("padding: 16px"),void 0!==e.card_margin&&a.push(`margin: ${e.card_margin}px`),e.card_shadow_enabled){const r=e.card_shadow_color||"rgba(0, 0, 0, 0.15)",s=null!==(t=e.card_shadow_horizontal)&&void 0!==t?t:0,l=null!==(i=e.card_shadow_vertical)&&void 0!==i?i:2,d=null!==(o=e.card_shadow_blur)&&void 0!==o?o:8,c=null!==(n=e.card_shadow_spread)&&void 0!==n?n:0;a.push(`box-shadow: ${s}px ${l}px ${d}px ${c}px ${r}`)}return a.join("; ")}_getPreviewAnimationData(e){var t,i,o;const n=e.animation_type||(null===(t=e.design)||void 0===t?void 0:t.animation_type);if(!n||"none"===n)return{class:"",duration:"2s"};const a=e.animation_duration||(null===(i=e.design)||void 0===i?void 0:i.animation_duration)||"2s";return e.animation_entity||(null===(o=e.design)||void 0===o?void 0:o.animation_entity)?{class:"",duration:a}:{class:`animation-${n}`,duration:a}}_isEditorContext(e){try{if(null==e?void 0:e.editMode)return!0;const t=e=>{var t;const i=null===(t=e.getClientRects)||void 0===t?void 0:t.call(e);return!!i&&i.length>0&&i[0].width>0&&i[0].height>0},i=[...Array.from(document.querySelectorAll("hui-dialog-edit-card")),...Array.from(document.querySelectorAll("hui-card-preview"))];for(const e of i){if(t(e))return!0;const i=e.closest("ha-dialog, mwc-dialog");if(i&&t(i))return!0}}catch(e){}return!1}}},7487:(e,t,i)=>{var o=i(5183),n=i(4276);let a=[],r=[];function s(e){if(e<768)return!1;for(let t=0,i=a.length;;){let o=t+i>>1;if(e<a[o])i=o;else{if(!(e>=r[o]))return!0;t=o+1}if(t==i)return!1}}function l(e){return e>=127462&&e<=127487}function d(e,t,i=!0,o=!0){return(i?c:p)(e,t,o)}function c(e,t,i){if(t==e.length)return t;t&&h(e.charCodeAt(t))&&g(e.charCodeAt(t-1))&&t--;let o=u(e,t);for(t+=m(o);t<e.length;){let n=u(e,t);if(8205==o||8205==n||i&&s(n))t+=m(n),o=n;else{if(!l(n))break;{let i=0,o=t-2;for(;o>=0&&l(u(e,o));)i++,o-=2;if(i%2==0)break;t+=2}}}return t}function p(e,t,i){for(;t>0;){let o=c(e,t-2,i);if(o<t)return o;t--}return 0}function u(e,t){let i=e.charCodeAt(t);if(!g(i)||t+1==e.length)return i;let o=e.charCodeAt(t+1);return h(o)?o-56320+(i-55296<<10)+65536:i}function h(e){return e>=56320&&e<57344}function g(e){return e>=55296&&e<56320}function m(e){return e<65536?1:2}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let t=0,i=0;t<e.length;t++)(t%2?r:a).push(i+=e[t])})();class f{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=O(this,e,t);let o=[];return this.decompose(0,e,o,2),i.length&&i.decompose(0,i.length,o,3),this.decompose(t,this.length,o,1),v.from(o,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=O(this,e,t);let i=[];return this.decompose(e,t,i,0),v.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),o=new x(this),n=new x(e);for(let e=t,a=t;;){if(o.next(e),n.next(e),e=0,o.lineBreak!=n.lineBreak||o.done!=n.done||o.value!=n.value)return!1;if(a+=o.value.length,o.done||a>=i)return!0}}iter(e=1){return new x(this,e)}iterRange(e,t=this.length){return new k(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let o=this.line(e).from;i=this.iterRange(o,Math.max(o,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new w(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new _(e):v.from(_.split(e,[])):f.empty}}class _ extends f{constructor(e,t=function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,o){for(let n=0;;n++){let a=this.text[n],r=o+a.length;if((t?i:r)>=e)return new S(o,r,i,a);o=r+1,i++}}decompose(e,t,i,o){let n=e<=0&&t>=this.length?this:new _(y(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&o){let e=i.pop(),t=b(n.text,e.text.slice(),0,n.length);if(t.length<=32)i.push(new _(t,e.length+n.length));else{let e=t.length>>1;i.push(new _(t.slice(0,e)),new _(t.slice(e)))}}else i.push(n)}replace(e,t,i){if(!(i instanceof _))return super.replace(e,t,i);[e,t]=O(this,e,t);let o=b(this.text,b(i.text,y(this.text,0,e)),t),n=this.length+i.length-(t-e);return o.length<=32?new _(o,n):v.from(_.split(o,[]),n)}sliceString(e,t=this.length,i="\n"){[e,t]=O(this,e,t);let o="";for(let n=0,a=0;n<=t&&a<this.text.length;a++){let r=this.text[a],s=n+r.length;n>e&&a&&(o+=i),e<s&&t>n&&(o+=r.slice(Math.max(0,e-n),t-n)),n=s+1}return o}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],o=-1;for(let n of e)i.push(n),o+=n.length+1,32==i.length&&(t.push(new _(i,o)),i=[],o=-1);return o>-1&&t.push(new _(i,o)),t}}class v extends f{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,i,o){for(let n=0;;n++){let a=this.children[n],r=o+a.length,s=i+a.lines-1;if((t?s:r)>=e)return a.lineInner(e,t,i,o);o=r+1,i=s+1}}decompose(e,t,i,o){for(let n=0,a=0;a<=t&&n<this.children.length;n++){let r=this.children[n],s=a+r.length;if(e<=s&&t>=a){let n=o&((a<=e?1:0)|(s>=t?2:0));a>=e&&s<=t&&!n?i.push(r):r.decompose(e-a,t-a,i,n)}a=s+1}}replace(e,t,i){if([e,t]=O(this,e,t),i.lines<this.lines)for(let o=0,n=0;o<this.children.length;o++){let a=this.children[o],r=n+a.length;if(e>=n&&t<=r){let s=a.replace(e-n,t-n,i),l=this.lines-a.lines+s.lines;if(s.lines<l>>4&&s.lines>l>>6){let n=this.children.slice();return n[o]=s,new v(n,this.length-(t-e)+i.length)}return super.replace(n,r,s)}n=r+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){[e,t]=O(this,e,t);let o="";for(let n=0,a=0;n<this.children.length&&a<=t;n++){let r=this.children[n],s=a+r.length;a>e&&n&&(o+=i),e<s&&t>a&&(o+=r.sliceString(e-a,t-a,i)),a=s+1}return o}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof v))return 0;let i=0,[o,n,a,r]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;o+=t,n+=t){if(o==a||n==r)return i;let s=this.children[o],l=e.children[n];if(s!=l)return i+s.scanIdentical(l,t);i+=s.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let i=0;for(let t of e)i+=t.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new _(i,t)}let o=Math.max(32,i>>5),n=o<<1,a=o>>1,r=[],s=0,l=-1,d=[];function c(e){let t;if(e.lines>n&&e instanceof v)for(let t of e.children)c(t);else e.lines>a&&(s>a||!s)?(p(),r.push(e)):e instanceof _&&s&&(t=d[d.length-1])instanceof _&&e.lines+t.lines<=32?(s+=e.lines,l+=e.length+1,d[d.length-1]=new _(t.text.concat(e.text),t.length+1+e.length)):(s+e.lines>o&&p(),s+=e.lines,l+=e.length+1,d.push(e))}function p(){0!=s&&(r.push(1==d.length?d[0]:v.from(d,l)),l=-1,s=d.length=0)}for(let t of e)c(t);return p(),1==r.length?r[0]:new v(r,t)}}function b(e,t,i=0,o=1e9){for(let n=0,a=0,r=!0;a<e.length&&n<=o;a++){let s=e[a],l=n+s.length;l>=i&&(l>o&&(s=s.slice(0,o-n)),n<i&&(s=s.slice(i-n)),r?(t[t.length-1]+=s,r=!1):t.push(s)),n=l+1}return t}function y(e,t,i){return b(e,[""],t,i)}f.empty=new _([""],0);class x{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof _?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,o=this.nodes[i],n=this.offsets[i],a=n>>1,r=o instanceof _?o.text.length:o.children.length;if(a==(t>0?r:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&n)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(o instanceof _){let n=o.text[a+(t<0?-1:0)];if(this.offsets[i]+=t,n.length>Math.max(0,e))return this.value=0==e?n:t>0?n.slice(e):n.slice(0,n.length-e),this;e-=n.length}else{let n=o.children[a+(t<0?-1:0)];e>n.length?(e-=n.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(n),this.offsets.push(t>0?1:(n instanceof _?n.text.length:n.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class k{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new x(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:o}=this.cursor.next(e);return this.pos+=(o.length+e)*t,this.value=o.length<=i?o:t<0?o.slice(o.length-i):o.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class w{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:o}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(f.prototype[Symbol.iterator]=function(){return this.iter()},x.prototype[Symbol.iterator]=k.prototype[Symbol.iterator]=w.prototype[Symbol.iterator]=function(){return this});class S{constructor(e,t,i,o){this.from=e,this.to=t,this.number=i,this.text=o}get length(){return this.to-this.from}}function O(e,t,i){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,i))]}function A(e,t,i=!0,o=!0){return d(e,t,i,o)}function C(e,t){let i=e.charCodeAt(t);if(!((o=i)>=55296&&o<56320&&t+1!=e.length))return i;var o;let n=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(n)?n-56320+(i-55296<<10)+65536:i}function $(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function T(e){return e<65536?1:2}const z=/\r\n?|\n/;var P=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(P||(P={}));class E{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,o=0;t<this.sections.length;){let n=this.sections[t++],a=this.sections[t++];a<0?(e(i,o,n),o+=n):o+=a,i+=n}}iterChangedRanges(e,t=!1){D(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?e.push(i,o):e.push(o,i)}return new E(e)}composeDesc(e){return this.empty?e:e.empty?this:R(this,e)}mapDesc(e,t=!1){return e.empty?this:B(this,e,t)}mapPos(e,t=-1,i=P.Simple){let o=0,n=0;for(let a=0;a<this.sections.length;){let r=this.sections[a++],s=this.sections[a++],l=o+r;if(s<0){if(l>e)return n+(e-o);n+=r}else{if(i!=P.Simple&&l>=e&&(i==P.TrackDel&&o<e&&l>e||i==P.TrackBefore&&o<e||i==P.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!r)return e==o||t<0?n:n+s;n+=s}o=l}if(e>o)throw new RangeError(`Position ${e} is out of range for changeset of length ${o}`);return n}touchesRange(e,t=e){for(let i=0,o=0;i<this.sections.length&&o<=t;){let n=o+this.sections[i++];if(this.sections[i++]>=0&&o<=t&&n>=e)return!(o<e&&n>t)||"cover";o=n}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];e+=(e?" ":"")+i+(o>=0?":"+o:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new E(e)}static create(e){return new E(e)}}class I extends E{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return D(this,((t,i,o,n,a)=>e=e.replace(o,o+(i-t),a)),!1),e}mapDesc(e,t=!1){return B(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let o=0,n=0;o<t.length;o+=2){let a=t[o],r=t[o+1];if(r>=0){t[o]=r,t[o+1]=a;let s=o>>1;for(;i.length<s;)i.push(f.empty);i.push(a?e.slice(n,n+a):f.empty)}n+=a}return new I(t,i)}compose(e){return this.empty?e:e.empty?this:R(this,e,!0)}map(e,t=!1){return e.empty?this:B(this,e,t,!0)}iterChanges(e,t=!1){D(this,e,t)}get desc(){return E.create(this.sections)}filter(e){let t=[],i=[],o=[],n=new U(this);e:for(let a=0,r=0;;){let s=a==e.length?1e9:e[a++];for(;r<s||r==s&&0==n.len;){if(n.done)break e;let e=Math.min(n.len,s-r);j(o,e,-1);let a=-1==n.ins?-1:0==n.off?n.ins:0;j(t,e,a),a>0&&M(i,t,n.text),n.forward(e),r+=e}let l=e[a++];for(;r<l;){if(n.done)break e;let e=Math.min(n.len,l-r);j(t,e,-1),j(o,e,-1==n.ins?-1:0==n.off?n.ins:0),n.forward(e),r+=e}}return{changes:new I(t,i),filtered:E.create(o)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],o=this.sections[t+1];o<0?e.push(i):0==o?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let o=[],n=[],a=0,r=null;function s(e=!1){if(!e&&!o.length)return;a<t&&j(o,t-a,-1);let i=new I(o,n);r=r?r.compose(i.map(r)):i,o=[],n=[],a=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof I){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);s(),r=r?r.compose(l.map(r)):l}else{let{from:e,to:r=e,insert:d}=l;if(e>r||e<0||r>t)throw new RangeError(`Invalid change range ${e} to ${r} (in doc of length ${t})`);let c=d?"string"==typeof d?f.of(d.split(i||z)):d:f.empty,p=c.length;if(e==r&&0==p)return;e<a&&s(),e>a&&j(o,e-a,-1),j(o,r-e,p),M(n,o,c),a=r}}(e),s(!r),r}static empty(e){return new I(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let o=0;o<e.length;o++){let n=e[o];if("number"==typeof n)t.push(n,-1);else{if(!Array.isArray(n)||"number"!=typeof n[0]||n.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==n.length)t.push(n[0],0);else{for(;i.length<o;)i.push(f.empty);i[o]=f.of(n.slice(1)),t.push(n[0],i[o].length)}}}return new I(t,i)}static createSet(e,t){return new I(e,t)}}function j(e,t,i,o=!1){if(0==t&&i<=0)return;let n=e.length-2;n>=0&&i<=0&&i==e[n+1]?e[n]+=t:n>=0&&0==t&&0==e[n]?e[n+1]+=i:o?(e[n]+=t,e[n+1]+=i):e.push(t,i)}function M(e,t,i){if(0==i.length)return;let o=t.length-2>>1;if(o<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<o;)e.push(f.empty);e.push(i)}}function D(e,t,i){let o=e.inserted;for(let n=0,a=0,r=0;r<e.sections.length;){let s=e.sections[r++],l=e.sections[r++];if(l<0)n+=s,a+=s;else{let d=n,c=a,p=f.empty;for(;d+=s,c+=l,l&&o&&(p=p.append(o[r-2>>1])),!(i||r==e.sections.length||e.sections[r+1]<0);)s=e.sections[r++],l=e.sections[r++];t(n,d,a,c,p),n=d,a=c}}}function B(e,t,i,o=!1){let n=[],a=o?[]:null,r=new U(e),s=new U(t);for(let e=-1;;){if(r.done&&s.len||s.done&&r.len)throw new Error("Mismatched change set lengths");if(-1==r.ins&&-1==s.ins){let e=Math.min(r.len,s.len);j(n,e,-1),r.forward(e),s.forward(e)}else if(s.ins>=0&&(r.ins<0||e==r.i||0==r.off&&(s.len<r.len||s.len==r.len&&!i))){let t=s.len;for(j(n,s.ins,-1);t;){let i=Math.min(r.len,t);r.ins>=0&&e<r.i&&r.len<=i&&(j(n,0,r.ins),a&&M(a,n,r.text),e=r.i),r.forward(i),t-=i}s.next()}else{if(!(r.ins>=0)){if(r.done&&s.done)return a?I.createSet(n,a):E.create(n);throw new Error("Mismatched change set lengths")}{let t=0,i=r.len;for(;i;)if(-1==s.ins){let e=Math.min(i,s.len);t+=e,i-=e,s.forward(e)}else{if(!(0==s.ins&&s.len<i))break;i-=s.len,s.next()}j(n,t,e<r.i?r.ins:0),a&&e<r.i&&M(a,n,r.text),e=r.i,r.forward(r.len-i)}}}}function R(e,t,i=!1){let o=[],n=i?[]:null,a=new U(e),r=new U(t);for(let e=!1;;){if(a.done&&r.done)return n?I.createSet(o,n):E.create(o);if(0==a.ins)j(o,a.len,0,e),a.next();else if(0!=r.len||r.done){if(a.done||r.done)throw new Error("Mismatched change set lengths");{let t=Math.min(a.len2,r.len),i=o.length;if(-1==a.ins){let i=-1==r.ins?-1:r.off?0:r.ins;j(o,t,i,e),n&&i&&M(n,o,r.text)}else-1==r.ins?(j(o,a.off?0:a.len,t,e),n&&M(n,o,a.textBit(t))):(j(o,a.off?0:a.len,r.off?0:r.ins,e),n&&!r.off&&M(n,o,r.text));e=(a.ins>t||r.ins>=0&&r.len>t)&&(e||o.length>i),a.forward2(t),r.forward(t)}}else j(o,0,r.ins,e),n&&M(n,o,r.text),r.next()}}class U{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?f.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?f.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class H{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let i,o;return this.empty?i=o=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),o=e.mapPos(this.to,-1)),i==this.from&&o==this.to?this:new H(i,o,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return J.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return J.range(this.anchor,i)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return J.range(e.anchor,e.head)}static create(e,t,i){return new H(e,t,i)}}class J{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:J.create(this.ranges.map((i=>i.map(e,t))),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new J([this.main],0)}addRange(e,t=!0){return J.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,J.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new J(e.ranges.map((e=>H.fromJSON(e))),e.main)}static single(e,t=e){return new J([J.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,o=0;o<e.length;o++){let n=e[o];if(n.empty?n.from<=i:n.from<i)return J.normalized(e.slice(),t);i=n.to}return new J(e,t)}static cursor(e,t=0,i,o){return H.create(e,e,(0==t?0:t<0?8:16)|(null==i?7:Math.min(6,i))|(null!=o?o:16777215)<<6)}static range(e,t,i,o){let n=(null!=i?i:16777215)<<6|(null==o?7:Math.min(6,o));return t<e?H.create(t,e,48|n):H.create(e,t,(t>e?8:0)|n)}static normalized(e,t=0){let i=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(i);for(let i=1;i<e.length;i++){let o=e[i],n=e[i-1];if(o.empty?o.from<=n.to:o.from<n.to){let a=n.from,r=Math.max(o.to,n.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?J.range(r,a):J.range(a,r))}}return new J(e,t)}}function Q(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let N=0;class L{constructor(e,t,i,o,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=o,this.id=N++,this.default=e([]),this.extensions="function"==typeof n?n(this):n}get reader(){return this}static define(e={}){return new L(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:F),!!e.static,e.enables)}of(e){return new q([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new q(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new q(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(i=>t(i.field(e))))}}function F(e,t){return e==t||e.length==t.length&&e.every(((e,i)=>e===t[i]))}class q{constructor(e,t,i,o){this.dependencies=e,this.facet=t,this.type=i,this.value=o,this.id=N++}dynamicSlot(e){var t;let i=this.value,o=this.facet.compareInput,n=this.id,a=e[n]>>1,r=2==this.type,s=!1,l=!1,d=[];for(let i of this.dependencies)"doc"==i?s=!0:"selection"==i?l=!0:1&(null!==(t=e[i.id])&&void 0!==t?t:1)||d.push(e[i.id]);return{create:e=>(e.values[a]=i(e),1),update(e,t){if(s&&t.docChanged||l&&(t.docChanged||t.selection)||K(e,d)){let t=i(e);if(r?!V(t,e.values[a],o):!o(t,e.values[a]))return e.values[a]=t,1}return 0},reconfigure:(e,t)=>{let s,l=t.config.address[n];if(null!=l){let n=ae(t,l);if(this.dependencies.every((i=>i instanceof L?t.facet(i)===e.facet(i):!(i instanceof Y)||t.field(i,!1)==e.field(i,!1)))||(r?V(s=i(e),n,o):o(s=i(e),n)))return e.values[a]=n,0}else s=i(e);return e.values[a]=s,1}}}}function V(e,t,i){if(e.length!=t.length)return!1;for(let o=0;o<e.length;o++)if(!i(e[o],t[o]))return!1;return!0}function K(e,t){let i=!1;for(let o of t)1&ne(e,o)&&(i=!0);return i}function G(e,t,i){let o=i.map((t=>e[t.id])),n=i.map((e=>e.type)),a=o.filter((e=>!(1&e))),r=e[t.id]>>1;function s(e){let i=[];for(let t=0;t<o.length;t++){let a=ae(e,o[t]);if(2==n[t])for(let e of a)i.push(e);else i.push(a)}return t.combine(i)}return{create(e){for(let t of o)ne(e,t);return e.values[r]=s(e),1},update(e,i){if(!K(e,a))return 0;let o=s(e);return t.compare(o,e.values[r])?0:(e.values[r]=o,1)},reconfigure(e,n){let a=K(e,o),l=n.config.facets[t.id],d=n.facet(t);if(l&&!a&&F(i,l))return e.values[r]=d,0;let c=s(e);return t.compare(c,d)?(e.values[r]=d,0):(e.values[r]=c,1)}}}const Z=L.define({static:!0});class Y{constructor(e,t,i,o,n){this.id=e,this.createF=t,this.updateF=i,this.compareF=o,this.spec=n,this.provides=void 0}static define(e){let t=new Y(N++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Z).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let o=e.values[t],n=this.updateF(o,i);return this.compareF(o,n)?0:(e.values[t]=n,1)},reconfigure:(e,i)=>{let o,n=e.facet(Z),a=i.facet(Z);return(o=n.find((e=>e.field==this)))&&o!=a.find((e=>e.field==this))?(e.values[t]=o.create(e),1):null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}}init(e){return[this,Z.of({field:this,create:e})]}get extension(){return this}}function W(e){return t=>new ee(t,e)}const X={highest:W(0),high:W(1),default:W(2),low:W(3),lowest:W(4)};class ee{constructor(e,t){this.inner=e,this.prec=t}}class te{of(e){return new ie(this,e)}reconfigure(e){return te.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ie{constructor(e,t){this.compartment=e,this.inner=t}}class oe{constructor(e,t,i,o,n,a){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=o,this.staticValues=n,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let o=[],n=Object.create(null),a=new Map;for(let i of function(e,t,i){let o=[[],[],[],[],[]],n=new Map;return function e(a,r){let s=n.get(a);if(null!=s){if(s<=r)return;let e=o[s].indexOf(a);e>-1&&o[s].splice(e,1),a instanceof ie&&i.delete(a.compartment)}if(n.set(a,r),Array.isArray(a))for(let t of a)e(t,r);else if(a instanceof ie){if(i.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let o=t.get(a.compartment)||a.inner;i.set(a.compartment,o),e(o,r)}else if(a instanceof ee)e(a.inner,a.prec);else if(a instanceof Y)o[r].push(a),a.provides&&e(a.provides,r);else if(a instanceof q)o[r].push(a),a.facet.extensions&&e(a.facet.extensions,2);else{let t=a.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,r)}}(e,2),o.reduce(((e,t)=>e.concat(t)))}(e,t,a))i instanceof Y?o.push(i):(n[i.facet.id]||(n[i.facet.id]=[])).push(i);let r=Object.create(null),s=[],l=[];for(let e of o)r[e.id]=l.length<<1,l.push((t=>e.slot(t)));let d=null==i?void 0:i.config.facets;for(let e in n){let t=n[e],o=t[0].facet,a=d&&d[e]||[];if(t.every((e=>0==e.type)))if(r[o.id]=s.length<<1|1,F(a,t))s.push(i.facet(o));else{let e=o.combine(t.map((e=>e.value)));s.push(i&&o.compare(e,i.facet(o))?i.facet(o):e)}else{for(let e of t)0==e.type?(r[e.id]=s.length<<1|1,s.push(e.value)):(r[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));r[o.id]=l.length<<1,l.push((e=>G(e,o,t)))}}let c=l.map((e=>e(r)));return new oe(e,a,c,r,s,n)}}function ne(e,t){if(1&t)return 2;let i=t>>1,o=e.status[i];if(4==o)throw new Error("Cyclic dependency between fields and/or facets");if(2&o)return o;e.status[i]=4;let n=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|n}function ae(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const re=L.define(),se=L.define({combine:e=>e.some((e=>e)),static:!0}),le=L.define({combine:e=>e.length?e[0]:void 0,static:!0}),de=L.define(),ce=L.define(),pe=L.define(),ue=L.define({combine:e=>!!e.length&&e[0]});class he{constructor(e,t){this.type=e,this.value=t}static define(){return new ge}}class ge{of(e){return new he(this,e)}}class me{constructor(e){this.map=e}of(e){return new fe(this,e)}}class fe{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new fe(this.type,t)}is(e){return this.type==e}static define(e={}){return new me(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let o of e){let e=o.map(t);e&&i.push(e)}return i}}fe.reconfigure=fe.define(),fe.appendConfig=fe.define();class _e{constructor(e,t,i,o,n,a){this.startState=e,this.changes=t,this.selection=i,this.effects=o,this.annotations=n,this.scrollIntoView=a,this._doc=null,this._state=null,i&&Q(i,t.newLength),n.some((e=>e.type==_e.time))||(this.annotations=n.concat(_e.time.of(Date.now())))}static create(e,t,i,o,n,a){return new _e(e,t,i,o,n,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(_e.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function ve(e,t){let i=[];for(let o=0,n=0;;){let a,r;if(o<e.length&&(n==t.length||t[n]>=e[o]))a=e[o++],r=e[o++];else{if(!(n<t.length))return i;a=t[n++],r=t[n++]}!i.length||i[i.length-1]<a?i.push(a,r):i[i.length-1]<r&&(i[i.length-1]=r)}}function be(e,t,i){var o;let n,a,r;return i?(n=t.changes,a=I.empty(t.changes.length),r=e.changes.compose(t.changes)):(n=t.changes.map(e.changes),a=e.changes.mapDesc(t.changes,!0),r=e.changes.compose(n)),{changes:r,selection:t.selection?t.selection.map(a):null===(o=e.selection)||void 0===o?void 0:o.map(n),effects:fe.mapEffects(e.effects,n).concat(fe.mapEffects(t.effects,a)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function ye(e,t,i){let o=t.selection,n=we(t.annotations);return t.userEvent&&(n=n.concat(_e.userEvent.of(t.userEvent))),{changes:t.changes instanceof I?t.changes:I.of(t.changes||[],i,e.facet(le)),selection:o&&(o instanceof J?o:J.single(o.anchor,o.head)),effects:we(t.effects),annotations:n,scrollIntoView:!!t.scrollIntoView}}function xe(e,t,i){let o=ye(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(i=!1);for(let n=1;n<t.length;n++){!1===t[n].filter&&(i=!1);let a=!!t[n].sequential;o=be(o,ye(e,t[n],a?o.changes.newLength:e.doc.length),a)}let n=_e.create(e,o.changes,o.selection,o.effects,o.annotations,o.scrollIntoView);return function(e){let t=e.startState,i=t.facet(pe),o=e;for(let n=i.length-1;n>=0;n--){let a=i[n](e);a&&Object.keys(a).length&&(o=be(o,ye(t,a,e.changes.newLength),!0))}return o==e?e:_e.create(t,e.changes,e.selection,o.effects,o.annotations,o.scrollIntoView)}(i?function(e){let t=e.startState,i=!0;for(let o of t.facet(de)){let t=o(e);if(!1===t){i=!1;break}Array.isArray(t)&&(i=!0===i?t:ve(i,t))}if(!0!==i){let o,n;if(!1===i)n=e.changes.invertedDesc,o=I.empty(t.doc.length);else{let t=e.changes.filter(i);o=t.changes,n=t.filtered.mapDesc(t.changes).invertedDesc}e=_e.create(t,o,e.selection&&e.selection.map(n),fe.mapEffects(e.effects,n),e.annotations,e.scrollIntoView)}let o=t.facet(ce);for(let i=o.length-1;i>=0;i--){let n=o[i](e);e=n instanceof _e?n:Array.isArray(n)&&1==n.length&&n[0]instanceof _e?n[0]:xe(t,we(n),!1)}return e}(n):n)}_e.time=he.define(),_e.userEvent=he.define(),_e.addToHistory=he.define(),_e.remote=he.define();const ke=[];function we(e){return null==e?ke:Array.isArray(e)?e:[e]}var Se=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Se||(Se={}));const Oe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ae;try{Ae=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class Ce{constructor(e,t,i,o,n,a){this.config=e,this.doc=t,this.selection=i,this.values=o,this.status=e.statusTemplate.slice(),this.computeSlot=n,a&&(a._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)ne(this,e<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(null!=i)return ne(this,i),ae(this,i);if(t)throw new RangeError("Field is not present in this state")}update(...e){return xe(this,e,!0)}applyTransaction(e){let t,i=this.config,{base:o,compartments:n}=i;for(let t of e.effects)t.is(te.reconfigure)?(i&&(n=new Map,i.compartments.forEach(((e,t)=>n.set(t,e))),i=null),n.set(t.value.compartment,t.value.extension)):t.is(fe.reconfigure)?(i=null,o=t.value):t.is(fe.appendConfig)&&(i=null,o=we(o).concat(t.value));i?t=e.startState.values.slice():(i=oe.resolve(o,n,this),t=new Ce(i,this.doc,this.selection,i.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values);let a=e.startState.facet(se)?e.newSelection:e.newSelection.asSingle();new Ce(i,e.newDoc,a,t,((t,i)=>i.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:J.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),o=this.changes(i.changes),n=[i.range],a=we(i.effects);for(let i=1;i<t.ranges.length;i++){let r=e(t.ranges[i]),s=this.changes(r.changes),l=s.map(o);for(let e=0;e<i;e++)n[e]=n[e].map(l);let d=o.mapDesc(s,!0);n.push(r.range.map(d)),o=o.compose(l),a=fe.mapEffects(a,l).concat(fe.mapEffects(we(r.effects),d))}return{changes:o,selection:J.create(n,t.mainIndex),effects:a}}changes(e=[]){return e instanceof I?e:I.of(e,this.doc.length,this.facet(Ce.lineSeparator))}toText(e){return f.of(e.split(this.facet(Ce.lineSeparator)||z))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(ne(this,t),ae(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let o=e[i];o instanceof Y&&null!=this.config.address[o.id]&&(t[i]=o.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(i)for(let t in i)if(Object.prototype.hasOwnProperty.call(e,t)){let n=i[t],a=e[t];o.push(n.init((e=>n.spec.fromJSON(a,e))))}return Ce.create({doc:e.doc,selection:J.fromJSON(e.selection),extensions:t.extensions?o.concat([t.extensions]):o})}static create(e={}){let t=oe.resolve(e.extensions||[],new Map),i=e.doc instanceof f?e.doc:f.of((e.doc||"").split(t.staticFacet(Ce.lineSeparator)||z)),o=e.selection?e.selection instanceof J?e.selection:J.single(e.selection.anchor,e.selection.head):J.single(0);return Q(o,i.length),t.staticFacet(se)||(o=o.asSingle()),new Ce(t,i,o,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Ce.tabSize)}get lineBreak(){return this.facet(Ce.lineSeparator)||"\n"}get readOnly(){return this.facet(ue)}phrase(e,...t){for(let t of this.facet(Ce.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,i)=>{if("$"==i)return"$";let o=+(i||1);return!o||o>t.length?e:t[o-1]}))),e}languageDataAt(e,t,i=-1){let o=[];for(let n of this.facet(re))for(let a of n(this,t,i))Object.prototype.hasOwnProperty.call(a,e)&&o.push(a[e]);return o}charCategorizer(e){return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return Se.Space;if(function(e){if(Ae)return Ae.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||Oe.test(i)))return!0}return!1}(e))return Se.Word;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return Se.Word;return Se.Other};var t}wordAt(e){let{text:t,from:i,length:o}=this.doc.lineAt(e),n=this.charCategorizer(e),a=e-i,r=e-i;for(;a>0;){let e=A(t,a,!1);if(n(t.slice(e,a))!=Se.Word)break;a=e}for(;r<o;){let e=A(t,r);if(n(t.slice(r,e))!=Se.Word)break;r=e}return a==r?null:J.range(a+i,r+i)}}Ce.allowMultipleSelections=se,Ce.tabSize=L.define({combine:e=>e.length?e[0]:4}),Ce.lineSeparator=le,Ce.readOnly=ue,Ce.phrases=L.define({compare(e,t){let i=Object.keys(e),o=Object.keys(t);return i.length==o.length&&i.every((i=>e[i]==t[i]))}}),Ce.languageData=re,Ce.changeFilter=de,Ce.transactionFilter=ce,Ce.transactionExtender=pe,te.reconfigure=fe.define();class $e{eq(e){return this==e}range(e,t=e){return Te.create(e,t,this)}}$e.prototype.startSide=$e.prototype.endSide=0,$e.prototype.point=!1,$e.prototype.mapMode=P.TrackDel;class Te{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Te(e,t,i)}}function ze(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Pe{constructor(e,t,i,o){this.from=e,this.to=t,this.value=i,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,o=0){let n=i?this.to:this.from;for(let a=o,r=n.length;;){if(a==r)return a;let o=a+r>>1,s=n[o]-e||(i?this.value[o].endSide:this.value[o].startSide)-t;if(o==a)return s>=0?a:r;s>=0?r=o:a=o+1}}between(e,t,i,o){for(let n=this.findIndex(t,-1e9,!0),a=this.findIndex(i,1e9,!1,n);n<a;n++)if(!1===o(this.from[n]+e,this.to[n]+e,this.value[n]))return!1}map(e,t){let i=[],o=[],n=[],a=-1,r=-1;for(let s=0;s<this.value.length;s++){let l,d,c=this.value[s],p=this.from[s]+e,u=this.to[s]+e;if(p==u){let e=t.mapPos(p,c.startSide,c.mapMode);if(null==e)continue;if(l=d=e,c.startSide!=c.endSide&&(d=t.mapPos(p,c.endSide),d<l))continue}else if(l=t.mapPos(p,c.startSide),d=t.mapPos(u,c.endSide),l>d||l==d&&c.startSide>0&&c.endSide<=0)continue;(d-l||c.endSide-c.startSide)<0||(a<0&&(a=l),c.point&&(r=Math.max(r,d-l)),i.push(c),o.push(l-a),n.push(d-a))}return{mapped:i.length?new Pe(o,n,i,r):null,pos:a}}}class Ee{constructor(e,t,i,o){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=o}static create(e,t,i,o){return new Ee(e,t,i,o)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:o=0,filterTo:n=this.length}=e,a=e.filter;if(0==t.length&&!a)return this;if(i&&(t=t.slice().sort(ze)),this.isEmpty)return t.length?Ee.of(t):this;let r=new Me(this,null,-1).goto(0),s=0,l=[],d=new Ie;for(;r.value||s<t.length;)if(s<t.length&&(r.from-t[s].from||r.startSide-t[s].value.startSide)>=0){let e=t[s++];d.addInner(e.from,e.to,e.value)||l.push(e)}else 1==r.rangeIndex&&r.chunkIndex<this.chunk.length&&(s==t.length||this.chunkEnd(r.chunkIndex)<t[s].from)&&(!a||o>this.chunkEnd(r.chunkIndex)||n<this.chunkPos[r.chunkIndex])&&d.addChunk(this.chunkPos[r.chunkIndex],this.chunk[r.chunkIndex])?r.nextChunk():((!a||o>r.to||n<r.from||a(r.from,r.to,r.value))&&(d.addInner(r.from,r.to,r.value)||l.push(Te.create(r.from,r.to,r.value))),r.next());return d.finishInner(this.nextLayer.isEmpty&&!l.length?Ee.empty:this.nextLayer.update({add:l,filter:a,filterFrom:o,filterTo:n}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],o=-1;for(let n=0;n<this.chunk.length;n++){let a=this.chunkPos[n],r=this.chunk[n],s=e.touchesRange(a,a+r.length);if(!1===s)o=Math.max(o,r.maxPoint),t.push(r),i.push(e.mapPos(a));else if(!0===s){let{mapped:n,pos:s}=r.map(a,e);n&&(o=Math.max(o,n.maxPoint),t.push(n),i.push(s))}}let n=this.nextLayer.map(e);return 0==t.length?n:new Ee(i,t,n||Ee.empty,o)}between(e,t,i){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let n=this.chunkPos[o],a=this.chunk[o];if(t>=n&&e<=n+a.length&&!1===a.between(n,e-n,t-n,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return De.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return De.from(e).goto(t)}static compare(e,t,i,o,n=-1){let a=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n)),r=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=n)),s=je(a,r,i),l=new Re(a,s,n),d=new Re(r,s,n);i.iterGaps(((e,t,i)=>Ue(l,e,d,t,i,o))),i.empty&&0==i.length&&Ue(l,0,d,0,0,o)}static eq(e,t,i=0,o){null==o&&(o=999999999);let n=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),a=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(n.length!=a.length)return!1;if(!n.length)return!0;let r=je(n,a),s=new Re(n,r,0).goto(i),l=new Re(a,r,0).goto(i);for(;;){if(s.to!=l.to||!He(s.active,l.active)||s.point&&(!l.point||!s.point.eq(l.point)))return!1;if(s.to>o)return!0;s.next(),l.next()}}static spans(e,t,i,o,n=-1){let a=new Re(e,null,n).goto(t),r=t,s=a.openStart;for(;;){let e=Math.min(a.to,i);if(a.point){let i=a.activeForPoint(a.to),n=a.pointFrom<t?i.length+1:a.point.startSide<0?i.length:Math.min(i.length,s);o.point(r,e,a.point,i,n,a.pointRank),s=Math.min(a.openEnd(e),i.length)}else e>r&&(o.span(r,e,a.active,s),s=a.openEnd(e));if(a.to>i)return s+(a.point&&a.to>i?1:0);r=a.to,a.next()}}static of(e,t=!1){let i=new Ie;for(let o of e instanceof Te?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let o=e[i];if(ze(t,o)>0)return e.slice().sort(ze);t=o}return e}(e):e)i.add(o.from,o.to,o.value);return i.finish()}static join(e){if(!e.length)return Ee.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let o=e[i];o!=Ee.empty;o=o.nextLayer)t=new Ee(o.chunkPos,o.chunk,t,Math.max(o.maxPoint,t.maxPoint));return t}}Ee.empty=new Ee([],[],null,-1),Ee.empty.nextLayer=Ee.empty;class Ie{finishChunk(e){this.chunks.push(new Pe(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new Ie)).add(e,t,i)}addInner(e,t,i){let o=e-this.lastTo||i.startSide-this.last.endSide;if(o<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(o<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ee.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Ee.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function je(e,t,i){let o=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&o.set(t.chunk[e],t.chunkPos[e]);let n=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let a=o.get(e.chunk[t]);null==a||(i?i.mapPos(a):a)!=e.chunkPos[t]||(null==i?void 0:i.touchesRange(a,a+e.chunk[t].length))||n.add(e.chunk[t])}return n}class Me{constructor(e,t,i,o=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class De{constructor(e){this.heap=e}static from(e,t=null,i=-1){let o=[];for(let n=0;n<e.length;n++)for(let a=e[n];!a.isEmpty;a=a.nextLayer)a.maxPoint>=i&&o.push(new Me(a,t,i,n));return 1==o.length?o[0]:new De(o)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Be(this.heap,e);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Be(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Be(this.heap,0)}}}function Be(e,t){for(let i=e[t];;){let o=1+(t<<1);if(o>=e.length)break;let n=e[o];if(o+1<e.length&&n.compare(e[o+1])>=0&&(n=e[o+1],o++),i.compare(n)<0)break;e[o]=i,e[t]=n,t=o}}class Re{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=De.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Je(this.active,e),Je(this.activeTo,e),Je(this.activeRank,e),this.minActive=Ne(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:o,rank:n}=this.cursor;for(;t<this.activeRank.length&&(n-this.activeRank[t]||o-this.activeTo[t])>0;)t++;Qe(this.active,t,i),Qe(this.activeTo,t,o),Qe(this.activeRank,t,n),e&&Qe(e,t,this.cursor.from),this.minActive=Ne(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),i&&Je(i,o)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){this.openStart=0;for(let t=i.length-1;t>=0&&i[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Ue(e,t,i,o,n,a){e.goto(t),i.goto(o);let r=o+n,s=o,l=o-t;for(;;){let t=e.to+l-i.to,o=t||e.endSide-i.endSide,n=o<0?e.to+l:i.to,d=Math.min(n,r);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&He(e.activeForPoint(e.to),i.activeForPoint(i.to))||a.comparePoint(s,d,e.point,i.point):d>s&&!He(e.active,i.active)&&a.compareRange(s,d,e.active,i.active),n>r)break;(t||e.openEnd!=i.openEnd)&&a.boundChange&&a.boundChange(n),s=n,o<=0&&e.next(),o>=0&&i.next()}}function He(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function Je(e,t){for(let i=t,o=e.length-1;i<o;i++)e[i]=e[i+1];e.pop()}function Qe(e,t,i){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=i}function Ne(e,t){let i=-1,o=1e9;for(let n=0;n<t.length;n++)(t[n]-o||e[n].endSide-e[i].endSide)<0&&(i=n,o=t[n]);return i}function Le(e,t,i=e.length){let o=0;for(let n=0;n<i&&n<e.length;)9==e.charCodeAt(n)?(o+=t-o%t,n++):(o++,n=A(e,n));return o}const Fe="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),qe="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Ke{constructor(e,t){this.rules=[];let{finish:i}=t||{};function o(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function n(e,t,a,r){let s=[],l=/^@(\w+)\b/.exec(e[0]),d=l&&"keyframes"==l[1];if(l&&null==t)return a.push(e[0]+";");for(let i in t){let r=t[i];if(/&/.test(i))n(i.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),r,a);else if(r&&"object"==typeof r){if(!l)throw new RangeError("The value of a property ("+i+") should be a primitive value.");n(o(i),r,s,d)}else null!=r&&s.push(i.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+r+";")}(s.length||d)&&a.push((!i||l||r?e:e.map(i)).join(", ")+" {"+s.join(" ")+"}")}for(let t in e)n(o(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Ve[Fe]||1;return Ve[Fe]=e+1,"ͼ"+e.toString(36)}static mount(e,t,i){let o=e[qe],n=i&&i.nonce;o?n&&o.setNonce(n):o=new Ze(e,n),o.mount(Array.isArray(t)?t:[t],e)}}let Ge=new Map;class Ze{constructor(e,t){let i=e.ownerDocument||e,o=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&o.CSSStyleSheet){let t=Ge.get(i);if(t)return e[qe]=t;this.sheet=new o.CSSStyleSheet,Ge.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[qe]=this}mount(e,t){let i=this.sheet,o=0,n=0;for(let t=0;t<e.length;t++){let a=e[t],r=this.modules.indexOf(a);if(r<n&&r>-1&&(this.modules.splice(r,1),n--,r=-1),-1==r){if(this.modules.splice(n++,0,a),i)for(let e=0;e<a.rules.length;e++)i.insertRule(a.rules[e],o++)}else{for(;n<r;)o+=this.modules[n++].rules.length;o+=a.rules.length,n++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let i=t.head||t;this.styleTag.parentNode!=i&&i.insertBefore(this.styleTag,i.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var Ye={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},We={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Xe="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),et="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),tt=0;tt<10;tt++)Ye[48+tt]=Ye[96+tt]=String(tt);for(tt=1;tt<=24;tt++)Ye[tt+111]="F"+tt;for(tt=65;tt<=90;tt++)Ye[tt]=String.fromCharCode(tt+32),We[tt]=String.fromCharCode(tt);for(var it in Ye)We.hasOwnProperty(it)||(We[it]=Ye[it]);let ot="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},nt="undefined"!=typeof document?document:{documentElement:{style:{}}};const at=/Edge\/(\d+)/.exec(ot.userAgent),rt=/MSIE \d/.test(ot.userAgent),st=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ot.userAgent),lt=!!(rt||st||at),dt=!lt&&/gecko\/(\d+)/i.test(ot.userAgent),ct=!lt&&/Chrome\/(\d+)/.exec(ot.userAgent),pt="webkitFontSmoothing"in nt.documentElement.style,ut=!lt&&/Apple Computer/.test(ot.vendor),ht=ut&&(/Mobile\/\w+/.test(ot.userAgent)||ot.maxTouchPoints>2);var gt={mac:ht||/Mac/.test(ot.platform),windows:/Win/.test(ot.platform),linux:/Linux|X11/.test(ot.platform),ie:lt,ie_version:rt?nt.documentMode||6:st?+st[1]:at?+at[1]:0,gecko:dt,gecko_version:dt?+(/Firefox\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,chrome:!!ct,chrome_version:ct?+ct[1]:0,ios:ht,android:/Android\b/.test(ot.userAgent),webkit:pt,webkit_version:pt?+(/\bAppleWebKit\/(\d+)/.exec(ot.userAgent)||[0,0])[1]:0,safari:ut,safari_version:ut?+(/\bVersion\/(\d+(\.\d+)?)/.exec(ot.userAgent)||[0,0])[1]:0,tabSize:null!=nt.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function mt(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function ft(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function _t(e,t){if(!t.anchorNode)return!1;try{return ft(e,t.anchorNode)}catch(e){return!1}}function vt(e){return 3==e.nodeType?Pt(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function bt(e,t,i,o){return!!i&&(kt(e,t,i,o,-1)||kt(e,t,i,o,1))}function yt(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function xt(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function kt(e,t,i,o,n){for(;;){if(e==i&&t==o)return!0;if(t==(n<0?0:wt(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=yt(e)+(n<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(n<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=n<0?wt(e):0}}}function wt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function St(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function Ot(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function At(e,t){let i=t.width/e.offsetWidth,o=t.height/e.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.width-e.offsetWidth)<1)&&(i=1),(o>.995&&o<1.005||!isFinite(o)||Math.abs(t.height-e.offsetHeight)<1)&&(o=1),{scaleX:i,scaleY:o}}class Ct{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?wt(t):0),i,Math.min(e.focusOffset,i?wt(i):0))}set(e,t,i,o){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=o}}let $t,Tt=null;function zt(e){if(e.setActive)return e.setActive();if(Tt)return e.focus(Tt);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==Tt?{get preventScroll(){return Tt={preventScroll:!0},!0}}:void 0),!Tt){Tt=!1;for(let e=0;e<t.length;){let i=t[e++],o=t[e++],n=t[e++];i.scrollTop!=o&&(i.scrollTop=o),i.scrollLeft!=n&&(i.scrollLeft=n)}}}function Pt(e,t,i=t){let o=$t||($t=document.createRange());return o.setEnd(e,i),o.setStart(e,t),o}function Et(e,t,i,o){let n={key:t,code:t,keyCode:i,which:i,cancelable:!0};o&&({altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey}=o);let a=new KeyboardEvent("keydown",n);a.synthetic=!0,e.dispatchEvent(a);let r=new KeyboardEvent("keyup",n);return r.synthetic=!0,e.dispatchEvent(r),a.defaultPrevented||r.defaultPrevented}function It(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function jt(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function Mt(e,t){for(let i=e,o=t;;){if(3==i.nodeType&&o>0)return{node:i,offset:o};if(1==i.nodeType&&o>0){if("false"==i.contentEditable)return null;i=i.childNodes[o-1],o=wt(i)}else{if(!i.parentNode||xt(i))return null;o=yt(i),i=i.parentNode}}}function Dt(e,t){for(let i=e,o=t;;){if(3==i.nodeType&&o<i.nodeValue.length)return{node:i,offset:o};if(1==i.nodeType&&o<i.childNodes.length){if("false"==i.contentEditable)return null;i=i.childNodes[o],o=0}else{if(!i.parentNode||xt(i))return null;o=yt(i)+1,i=i.parentNode}}}gt.safari&&gt.safari_version>=26&&(Tt=!1);class Bt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Bt(e.parentNode,yt(e),t)}static after(e,t){return new Bt(e.parentNode,yt(e)+1,t)}}const Rt=[];class Ut{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let i,o=this.dom,n=null;for(let a of this.children){if(7&a.flags){if(!a.dom&&(i=n?n.nextSibling:o.firstChild)){let e=Ut.get(i);(!e||!e.parent&&e.canReuseDOM(a))&&a.reuseDOM(i)}a.sync(e,t),a.flags&=-8}if(i=n?n.nextSibling:o.firstChild,t&&!t.written&&t.node==o&&i!=a.dom&&(t.written=!0),a.dom.parentNode==o)for(;i&&i!=a.dom;)i=Ht(i);else o.insertBefore(a.dom,i);n=a.dom}for(i=n?n.nextSibling:o.firstChild,i&&t&&t.node==o&&(t.written=!0);i;)i=Ht(i)}else if(1&this.flags)for(let i of this.children)7&i.flags&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let o=0==wt(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==o&&t.firstChild!=t.lastChild&&(o=e==t.firstChild?-1:1),e=t}i=o<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ut.get(i);)i=i.nextSibling;if(!i)return this.length;for(let e=0,t=0;;e++){let o=this.children[e];if(o.dom==i)return t;t+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let o=-1,n=-1,a=-1,r=-1;for(let s=0,l=i,d=i;s<this.children.length;s++){let i=this.children[s],c=l+i.length;if(l<e&&c>t)return i.domBoundsAround(e,t,l);if(c>=e&&-1==o&&(o=s,n=l),l>t&&i.dom.parentNode==this.dom){a=s,r=d;break}d=c,l=c+i.breakAfter}return{from:n,to:r<0?i+this.length:r,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Rt){this.markDirty();for(let o=e;o<t;o++){let e=this.children[o];e.parent==this&&i.indexOf(e)<0&&e.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let e=0;e<i.length;e++)i[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Jt(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,o,n,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function Ht(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}Ut.prototype.breakAfter=0;class Jt{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Qt(e,t,i,o,n,a,r,s,l){let{children:d}=e,c=d.length?d[t]:null,p=a.length?a[a.length-1]:null,u=p?p.breakAfter:r;if(!(t==o&&c&&!r&&!u&&a.length<2&&c.merge(i,n,a.length?p:null,0==i,s,l))){if(o<d.length){let e=d[o];e&&(n<e.length||e.breakAfter&&(null==p?void 0:p.breakAfter))?(t==o&&(e=e.split(n),n=0),!u&&p&&e.merge(0,n,p,!0,0,l)?a[a.length-1]=e:((n||e.children.length&&!e.children[0].length)&&e.merge(0,n,null,!1,0,l),a.push(e))):(null==e?void 0:e.breakAfter)&&(p?p.breakAfter=1:r=1),o++}for(c&&(c.breakAfter=r,i>0&&(!r&&a.length&&c.merge(i,c.length,a[0],!1,s,0)?c.breakAfter=a.shift().breakAfter:(i<c.length||c.children.length&&0==c.children[c.children.length-1].length)&&c.merge(i,c.length,null,!1,s,0),t++));t<o&&a.length;)if(d[o-1].become(a[a.length-1]))o--,a.pop(),l=a.length?0:s;else{if(!d[t].become(a[0]))break;t++,a.shift(),s=a.length?0:l}!a.length&&t&&o<d.length&&!d[t-1].breakAfter&&d[o].merge(0,0,d[t-1],!1,s,l)&&t--,(t<o||a.length)&&e.replaceChildren(t,o,a)}}function Nt(e,t,i,o,n,a){let r=e.childCursor(),{i:s,off:l}=r.findPos(i,1),{i:d,off:c}=r.findPos(t,-1),p=t-i;for(let e of o)p+=e.length;e.length+=p,Qt(e,d,c,s,l,o,0,n,a)}class Lt extends Ut{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return!(8&this.flags||i&&(!(i instanceof Lt)||this.length-(t-e)+i.length>256||8&i.flags)||(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),0))}split(e){let t=new Lt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Bt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,i){let o=e.nodeValue.length;t>o&&(t=o);let n=t,a=t,r=0;0==t&&i<0||t==o&&i>=0?gt.chrome||gt.gecko||(t?(n--,r=1):a<o&&(a++,r=-1)):i<0?n--:a<o&&a++;let s=Pt(e,n,a).getClientRects();if(!s.length)return null;let l=s[(r?r<0:i>=0)?0:s.length-1];return gt.safari&&!r&&0==l.width&&(l=Array.prototype.find.call(s,(e=>e.width))||l),r?St(l,r<0):l||null}(this.dom,e,t)}}class Ft extends Ut{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let e of t)e.setParent(this)}setAttrs(e){if(It(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,o,n,a){return!(i&&(!(i instanceof Ft&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&a<=0)||(Nt(this,e,t,i?i.children.slice():[],n-1,a-1),this.markDirty(),0))}split(e){let t=[],i=0,o=-1,n=0;for(let a of this.children){let r=i+a.length;r>e&&t.push(i<e?a.split(e-i):a),o<0&&i>=e&&(o=n),i=r,n++}let a=this.length-e;return this.length=e,o>-1&&(this.children.length=o,this.markDirty()),new Ft(this.mark,t,a)}domAtPos(e){return Kt(this,e)}coordsAt(e,t){return Zt(this,e,t)}}class qt extends Ut{static create(e,t,i){return new qt(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=qt.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,o,n,a){return!(i&&(!(i instanceof qt&&this.widget.compare(i.widget))||e>0&&n<=0||t<this.length&&a<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}become(e){return e instanceof qt&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return f.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,o=this.posAtStart;return i?i.slice(o,o+this.length):f.empty}domAtPos(e){return(this.length?0==e:this.side>0)?Bt.before(this.dom):Bt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let o=this.dom.getClientRects(),n=null;if(!o.length)return null;let a=this.side?this.side<0:e>0;for(let t=a?o.length-1:0;n=o[t],!(e>0?0==t:t==o.length-1||n.top<n.bottom);t+=a?-1:1);return St(n,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Vt extends Ut{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Vt&&e.side==this.side}split(){return new Vt(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Bt.before(this.dom):Bt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return f.empty}get isHidden(){return!0}}function Kt(e,t){let i=e.dom,{children:o}=e,n=0;for(let e=0;n<o.length;n++){let a=o[n],r=e+a.length;if(!(r==e&&a.getSide()<=0)){if(t>e&&t<r&&a.dom.parentNode==i)return a.domAtPos(t-e);if(t<=e)break;e=r}}for(let e=n;e>0;e--){let t=o[e-1];if(t.dom.parentNode==i)return t.domAtPos(t.length)}for(let e=n;e<o.length;e++){let t=o[e];if(t.dom.parentNode==i)return t.domAtPos(0)}return new Bt(i,0)}function Gt(e,t,i){let o,{children:n}=e;i>0&&t instanceof Ft&&n.length&&(o=n[n.length-1])instanceof Ft&&o.mark.eq(t.mark)?Gt(o,t.children[0],i-1):(n.push(t),t.setParent(e)),e.length+=t.length}function Zt(e,t,i){let o=null,n=-1,a=null,r=-1;!function e(t,s){for(let l=0,d=0;l<t.children.length&&d<=s;l++){let c=t.children[l],p=d+c.length;p>=s&&(c.children.length?e(c,s-d):(!a||a.isHidden&&(i>0||Yt(a,c)))&&(p>s||d==p&&c.getSide()>0)?(a=c,r=s-d):(d<s||d==p&&c.getSide()<0&&!c.isHidden)&&(o=c,n=s-d)),d=p}}(e,t);let s=(i<0?o:a)||o||a;return s?s.coordsAt(Math.max(0,s==o?n:r),i):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=vt(t);return i[i.length-1]||null}(e)}function Yt(e,t){let i=e.coordsAt(0,1),o=t.coordsAt(0,1);return i&&o&&o.top<i.bottom}function Wt(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}Lt.prototype.children=qt.prototype.children=Vt.prototype.children=Rt;const Xt=Object.create(null);function ei(e,t,i){if(e==t)return!0;e||(e=Xt),t||(t=Xt);let o=Object.keys(e),n=Object.keys(t);if(o.length-(i&&o.indexOf(i)>-1?1:0)!=n.length-(i&&n.indexOf(i)>-1?1:0))return!1;for(let a of o)if(a!=i&&(-1==n.indexOf(a)||e[a]!==t[a]))return!1;return!0}function ti(e,t,i){let o=!1;if(t)for(let n in t)i&&n in i||(o=!0,"style"==n?e.style.cssText="":e.removeAttribute(n));if(i)for(let n in i)t&&t[n]==i[n]||(o=!0,"style"==n?e.style.cssText=i[n]:e.setAttribute(n,i[n]));return o}function ii(e){let t=Object.create(null);for(let i=0;i<e.attributes.length;i++){let o=e.attributes[i];t[o.name]=o.value}return t}class oi{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ni=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(ni||(ni={}));class ai extends $e{constructor(e,t,i,o){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=o}get heightRelevant(){return!1}static mark(e){return new ri(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new li(e,t,t,i,e.widget||null,!1)}static replace(e){let t,i,o=!!e.block;if(e.isBlockGap)t=-5e8,i=4e8;else{let{start:n,end:a}=di(e,o);t=(n?o?-3e8:-1:5e8)-1,i=1+(a?o?2e8:1:-6e8)}return new li(e,t,i,o,e.widget||null,!0)}static line(e){return new si(e)}static set(e,t=!1){return Ee.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ai.none=Ee.empty;class ri extends ai{constructor(e){let{start:t,end:i}=di(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof ri&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(i=e.attrs)||void 0===i?void 0:i.class))&&ei(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ri.prototype.point=!1;class si extends ai{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof si&&this.spec.class==e.spec.class&&ei(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}si.prototype.mapMode=P.TrackBefore,si.prototype.point=!0;class li extends ai{constructor(e,t,i,o,n,a){super(t,i,n,e),this.block=o,this.isReplace=a,this.mapMode=o?t<=0?P.TrackBefore:P.TrackAfter:P.TrackDel}get type(){return this.startSide!=this.endSide?ni.WidgetRange:this.startSide<=0?ni.WidgetBefore:ni.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof li&&((t=this.widget)==(i=e.widget)||!!(t&&i&&t.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,i}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function di(e,t=!1){let{inclusiveStart:i,inclusiveEnd:o}=e;return null==i&&(i=e.inclusive),null==o&&(o=e.inclusive),{start:null!=i?i:t,end:null!=o?o:t}}function ci(e,t,i,o=0){let n=i.length-1;n>=0&&i[n]+o>=e?i[n]=Math.max(i[n],t):i.push(e,t)}li.prototype.point=!0;class pi extends Ut{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,o,n,a){if(i){if(!(i instanceof pi))return!1;this.dom||i.transferDOM(this)}return o&&this.setDeco(i?i.attrs:null),Nt(this,e,t,i?i.children.slice():[],n,a),!0}split(e){let t=new pi;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i,off:o}=this.childPos(e);o&&(t.append(this.children[i].split(o),0),this.children[i].merge(o,this.children[i].length,null,!1,0,0),i++);for(let e=i;e<this.children.length;e++)t.append(this.children[e],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ei(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Gt(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Wt(t,this.attrs||{})),i&&(this.attrs=Wt({class:i},this.attrs||{}))}domAtPos(e){return Kt(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?4&this.flags&&(It(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(ti(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let o=this.dom.lastChild;for(;o&&Ut.get(o)instanceof Ft;)o=o.lastChild;if(!(o&&this.length&&("BR"==o.nodeName||0!=(null===(i=Ut.get(o))||void 0===i?void 0:i.isEditable)||gt.ios&&this.children.some((e=>e instanceof Lt))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let i of this.children){if(!(i instanceof Lt)||/[^ -~]/.test(i.text))return null;let o=vt(i.dom);if(1!=o.length)return null;t+=o[0].width,e=o[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let i=Zt(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=i.bottom-i.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let o=(t-e.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof pi&&0==this.children.length&&0==e.children.length&&ei(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,o=0;i<e.children.length;i++){let n=e.children[i],a=o+n.length;if(a>=t){if(n instanceof pi)return n;if(a>t)break}o=a+n.breakAfter}return null}}class ui extends Ut{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,o,n,a){return!(i&&(!(i instanceof ui&&this.widget.compare(i.widget))||e>0&&n<=0||t<this.length&&a<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?Bt.before(this.dom):Bt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new ui(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Rt}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):f.empty}domBoundsAround(){return null}become(e){return e instanceof ui&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof hi?null:St(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t!=i&&(e<0?t<0:i>0)}}class hi extends oi{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class gi{constructor(e,t,i,o){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ui&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new pi),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(mi(new Vt(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof ui||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let o=Math.min(this.text.length-this.textOff,e),n=Math.min(o,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(mi(new Lt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=o<=n?0:t.length}}span(e,t,i,o){this.buildText(t-e,i,o),this.pos=t,this.openStart<0&&(this.openStart=o)}point(e,t,i,o,n,a){if(this.disallowBlockEffectsFor[a]&&i instanceof li){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let r=t-e;if(i instanceof li)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ui(i.widget||fi.block,r,i));else{let a=qt.create(i.widget||fi.inline,r,r?0:i.startSide),s=this.atCursorPos&&!a.isEditable&&n<=o.length&&(e<t||i.startSide>0),l=!a.isEditable&&(e<t||n>o.length||i.startSide<=0),d=this.getLine();2!=this.pendingBuffer||s||a.isEditable||(this.pendingBuffer=0),this.flushBuffer(o),s&&(d.append(mi(new Vt(1),o),n),n=o.length+Math.max(0,n-o.length)),d.append(mi(a,o),n),this.atCursorPos=l,this.pendingBuffer=l?e<t||n>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);r&&(this.textOff+r<=this.text.length?this.textOff+=r:(this.skip+=r-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=n)}static build(e,t,i,o,n){let a=new gi(e,t,i,n);return a.openEnd=Ee.spans(o,t,i,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function mi(e,t){for(let i of t)e=new Ft(i,[e],e.length);return e}class fi extends oi{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}fi.inline=new fi("span"),fi.block=new fi("div");var _i=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(_i||(_i={}));const vi=_i.LTR,bi=_i.RTL;function yi(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const xi=yi("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ki=yi("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),wi=Object.create(null),Si=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);wi[t]=i,wi[i]=-t}function Oi(e){return e<=247?xi[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?ki[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const Ai=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Ci{get dir(){return this.level%2?bi:vi}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,o){let n=-1;for(let a=0;a<e.length;a++){let r=e[a];if(r.from<=t&&r.to>=t){if(r.level==i)return a;(n<0||(0!=o?o<0?r.from<t:r.to>t:e[n].level>r.level))&&(n=a)}}if(n<0)throw new RangeError("Index out of range");return n}}function $i(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],n=t[i];if(o.from!=n.from||o.to!=n.to||o.direction!=n.direction||!$i(o.inner,n.inner))return!1}return!0}const Ti=[];function zi(e,t,i,o,n,a,r){let s=o%2?2:1;if(o%2==n%2)for(let l=t,d=0;l<i;){let t=!0,c=!1;if(d==a.length||l<a[d].from){let e=Ti[l];e!=s&&(t=!1,c=16==e)}let p=t||1!=s?null:[],u=t?o:o+1,h=l;e:for(;;)if(d<a.length&&h==a[d].from){if(c)break e;let g=a[d];if(!t)for(let e=g.to,t=d+1;;){if(e==i)break e;if(!(t<a.length&&a[t].from==e)){if(Ti[e]==s)break e;break}e=a[t++].to}d++,p?p.push(g):(g.from>l&&r.push(new Ci(l,g.from,u)),Pi(e,g.direction==vi!=!(u%2)?o+1:o,n,g.inner,g.from,g.to,r),l=g.to),h=g.to}else{if(h==i||(t?Ti[h]!=s:Ti[h]==s))break;h++}p?zi(e,l,h,o+1,n,p,r):l<h&&r.push(new Ci(l,h,u)),l=h}else for(let l=i,d=a.length;l>t;){let i=!0,c=!1;if(!d||l>a[d-1].to){let e=Ti[l-1];e!=s&&(i=!1,c=16==e)}let p=i||1!=s?null:[],u=i?o:o+1,h=l;e:for(;;)if(d&&h==a[d-1].to){if(c)break e;let g=a[--d];if(!i)for(let e=g.from,i=d;;){if(e==t)break e;if(!i||a[i-1].to!=e){if(Ti[e-1]==s)break e;break}e=a[--i].from}p?p.push(g):(g.to<l&&r.push(new Ci(g.to,l,u)),Pi(e,g.direction==vi!=!(u%2)?o+1:o,n,g.inner,g.from,g.to,r),l=g.from),h=g.from}else{if(h==t||(i?Ti[h-1]!=s:Ti[h-1]==s))break;h--}p?zi(e,h,l,o+1,n,p,r):h<l&&r.push(new Ci(h,l,u)),l=h}}function Pi(e,t,i,o,n,a,r){let s=t%2?2:1;!function(e,t,i,o,n){for(let a=0;a<=o.length;a++){let r=a?o[a-1].to:t,s=a<o.length?o[a].from:i,l=a?256:n;for(let t=r,i=l,o=l;t<s;t++){let n=Oi(e.charCodeAt(t));512==n?n=i:8==n&&4==o&&(n=16),Ti[t]=4==n?2:n,7&n&&(o=n),i=n}for(let e=r,t=l,o=l;e<s;e++){let n=Ti[e];if(128==n)e<s-1&&t==Ti[e+1]&&24&t?n=Ti[e]=t:Ti[e]=256;else if(64==n){let n=e+1;for(;n<s&&64==Ti[n];)n++;let a=e&&8==t||n<i&&8==Ti[n]?1==o?1:8:256;for(let t=e;t<n;t++)Ti[t]=a;e=n-1}else 8==n&&1==o&&(Ti[e]=1);t=n,7&n&&(o=n)}}}(e,n,a,o,s),function(e,t,i,o,n){let a=1==n?2:1;for(let r=0,s=0,l=0;r<=o.length;r++){let d=r?o[r-1].to:t,c=r<o.length?o[r].from:i;for(let t,i,o,r=d;r<c;r++)if(i=wi[t=e.charCodeAt(r)])if(i<0){for(let e=s-3;e>=0;e-=3)if(Si[e+1]==-i){let t=Si[e+2],i=2&t?n:4&t?1&t?a:n:0;i&&(Ti[r]=Ti[Si[e]]=i),s=e;break}}else{if(189==Si.length)break;Si[s++]=r,Si[s++]=t,Si[s++]=l}else if(2==(o=Ti[r])||1==o){let e=o==n;l=e?0:1;for(let t=s-3;t>=0;t-=3){let i=Si[t+2];if(2&i)break;if(e)Si[t+2]|=2;else{if(4&i)break;Si[t+2]|=4}}}}}(e,n,a,o,s),function(e,t,i,o){for(let n=0,a=o;n<=i.length;n++){let r=n?i[n-1].to:e,s=n<i.length?i[n].from:t;for(let l=r;l<s;){let r=Ti[l];if(256==r){let r=l+1;for(;;)if(r==s){if(n==i.length)break;r=i[n++].to,s=n<i.length?i[n].from:t}else{if(256!=Ti[r])break;r++}let d=1==a,c=d==(1==(r<t?Ti[r]:o))?d?1:2:o;for(let t=r,o=n,a=o?i[o-1].to:e;t>l;)t==a&&(t=i[--o].from,a=o?i[o-1].to:e),Ti[--t]=c;l=r}else a=r,l++}}}(n,a,o,s),zi(e,n,a,t,i,o,r)}function Ei(e){return[new Ci(0,e,0)]}let Ii="";function ji(e,t,i,o,n){var a;let r=o.head-e.from,s=Ci.find(t,r,null!==(a=o.bidiLevel)&&void 0!==a?a:-1,o.assoc),l=t[s],d=l.side(n,i);if(r==d){let e=s+=n?1:-1;if(e<0||e>=t.length)return null;l=t[s=e],r=l.side(!n,i),d=l.side(n,i)}let c=A(e.text,r,l.forward(n,i));(c<l.from||c>l.to)&&(c=d),Ii=e.text.slice(Math.min(r,c),Math.max(r,c));let p=s==(n?t.length-1:0)?null:t[s+(n?1:-1)];return p&&c==d&&p.level+(n?0:1)<l.level?J.cursor(p.side(!n,i)+e.from,p.forward(n,i)?1:-1,p.level):J.cursor(c+e.from,l.forward(n,i)?-1:1,l.level)}function Mi(e,t,i){for(let o=t;o<i;o++){let t=Oi(e.charCodeAt(o));if(1==t)return vi;if(2==t||4==t)return bi}return vi}const Di=L.define(),Bi=L.define(),Ri=L.define(),Ui=L.define(),Hi=L.define(),Ji=L.define(),Qi=L.define(),Ni=L.define(),Li=L.define(),Fi=L.define({combine:e=>e.some((e=>e))}),qi=L.define({combine:e=>e.some((e=>e))}),Vi=L.define();class Ki{constructor(e,t="nearest",i="nearest",o=5,n=5,a=!1){this.range=e,this.y=t,this.x=i,this.yMargin=o,this.xMargin=n,this.isSnapshot=a}map(e){return e.empty?this:new Ki(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ki(J.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Gi=fe.define({map:(e,t)=>e.map(t)}),Zi=fe.define();function Yi(e,t,i){let o=e.facet(Ui);o.length?o[0](t):window.onerror&&window.onerror(String(t),i,void 0,void 0,t)||(i?console.error(i+":",t):console.error(t))}const Wi=L.define({combine:e=>!e.length||e[0]});let Xi=0;const eo=L.define({combine:e=>e.filter(((t,i)=>{for(let o=0;o<i;o++)if(e[o].plugin==t.plugin)return!1;return!0}))});class to{constructor(e,t,i,o,n){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=o,this.baseExtensions=n(this),this.extension=this.baseExtensions.concat(eo.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(eo.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:i,eventObservers:o,provide:n,decorations:a}=t||{};return new to(Xi++,e,i,o,(e=>{let t=[];return a&&t.push(ao.of((t=>{let i=t.plugin(e);return i?a(i):ai.none}))),n&&t.push(n(e)),t}))}static fromClass(e,t){return to.define(((t,i)=>new e(t,i)),t)}}class io{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Yi(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Yi(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){Yi(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const oo=L.define(),no=L.define(),ao=L.define(),ro=L.define(),so=L.define(),lo=L.define();function co(e,t){let i=e.state.facet(lo);if(!i.length)return i;let o=i.map((t=>t instanceof Function?t(e):t)),n=[];return Ee.spans(o,t.from,t.to,{point(){},span(e,i,o,a){let r=e-t.from,s=i-t.from,l=n;for(let e=o.length-1;e>=0;e--,a--){let i,n=o[e].spec.bidiIsolate;if(null==n&&(n=Mi(t.text,r,s)),a>0&&l.length&&(i=l[l.length-1]).to==r&&i.direction==n)i.to=s,l=i.inner;else{let e={from:r,to:s,direction:n,inner:[]};l.push(e),l=e.inner}}}}),n}const po=L.define();function uo(e){let t=0,i=0,o=0,n=0;for(let a of e.state.facet(po)){let r=a(e);r&&(null!=r.left&&(t=Math.max(t,r.left)),null!=r.right&&(i=Math.max(i,r.right)),null!=r.top&&(o=Math.max(o,r.top)),null!=r.bottom&&(n=Math.max(n,r.bottom)))}return{left:t,right:i,top:o,bottom:n}}const ho=L.define();class go{constructor(e,t,i,o){this.fromA=e,this.toA=t,this.fromB=i,this.toB=o}join(e){return new go(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let o=e[t-1];if(!(o.fromA>i.toA)){if(o.toA<i.fromA)break;i=i.join(o),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let o=0,n=0,a=0,r=0;;o++){let s=o==e.length?null:e[o],l=a-r,d=s?s.fromB:1e9;for(;n<t.length&&t[n]<d;){let e=t[n],o=t[n+1],a=Math.max(r,e),s=Math.min(d,o);if(a<=s&&new go(a+l,s+l,a,s).addToSet(i),o>d)break;n+=2}if(!s)return i;new go(s.fromA,s.toA,s.fromB,s.toB).addToSet(i),a=s.toA,r=s.toB}}}class mo{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=I.empty(this.startState.doc.length);for(let e of i)this.changes=this.changes.compose(e.changes);let o=[];this.changes.iterChangedRanges(((e,t,i,n)=>o.push(new go(e,t,i,n)))),this.changedRanges=o}static create(e,t,i){return new mo(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class fo extends Ut{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ai.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new pi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new go(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let o=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?o=this.domChanged.newSel.head:function(e,t){let i=!1;return t&&e.iterChangedRanges(((e,o)=>{e<t.to&&o>t.from&&(i=!0)})),i}(e.changes,this.hasComposition)||e.selectionSet||(o=e.state.selection.main.head));let n=o>-1?function(e,t,i){let o=_o(e,i);if(!o)return null;let{node:n,from:a,to:r}=o,s=n.nodeValue;if(/[\n\r]/.test(s))return null;if(e.state.doc.sliceString(o.from,o.to)!=s)return null;let l=t.invertedDesc,d=new go(l.mapPos(a),l.mapPos(r),a,r),c=[];for(let t=n.parentNode;;t=t.parentNode){let i=Ut.get(t);if(i instanceof Ft)c.push({node:t,deco:i.mark});else{if(i instanceof pi||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:d,text:n,marks:c,line:t};if(t==e.contentDOM)return null;c.push({node:t,deco:new ri({inclusive:!0,attributes:ii(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:o}=this.hasComposition;i=new go(t,o,e.changes.mapPos(t,-1),e.changes.mapPos(o,1)).addToSet(i.slice())}this.hasComposition=n?{from:n.range.fromB,to:n.range.toB}:null,(gt.ie||gt.chrome)&&!n&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=function(e,t,i){let o=new vo;return Ee.compare(e,t,i,o),o.changes}(this.decorations,this.updateDeco(),e.changes);return i=go.extendWithRanges(i,a),!!(7&this.flags||0!=i.length)&&(this.updateInner(i,e.startState.doc.length,n),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:o}=this.view;o.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=gt.chrome||gt.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||o.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((e=>e.flags&=-9));let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof ui&&e.widget instanceof hi&&n.push(e.dom);o.updateGaps(n)}updateChildren(e,t,i){let o=i?i.range.addToSet(e.slice()):e,n=this.childCursor(t);for(let e=o.length-1;;e--){let t=e>=0?o[e]:null;if(!t)break;let a,r,s,l,{fromA:d,toA:c,fromB:p,toB:u}=t;if(i&&i.range.fromB<u&&i.range.toB>p){let e=gi.build(this.view.state.doc,p,i.range.fromB,this.decorations,this.dynamicDecorationMap),t=gi.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);r=e.breakAtStart,s=e.openStart,l=t.openEnd;let o=this.compositionView(i);t.breakAtStart?o.breakAfter=1:t.content.length&&o.merge(o.length,o.length,t.content[0],!1,t.openStart,0)&&(o.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&o.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),a=e.content.concat(o).concat(t.content)}else({content:a,breakAtStart:r,openStart:s,openEnd:l}=gi.build(this.view.state.doc,p,u,this.decorations,this.dynamicDecorationMap));let{i:h,off:g}=n.findPos(c,1),{i:m,off:f}=n.findPos(d,-1);Qt(this,m,f,h,g,a,r,s,l)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(Zi)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new Lt(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Ft(i,[t],t.length);let i=new pi;return i.append(t,0),i}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some((e=>7&e.flags))?1:0),this.markedForComposition.add(t);let i=Ut.get(e);i&&i!=t&&(i.dom=null),t.setDOM(e)},i=this.childPos(e.range.fromB,1),o=this.children[i.i];t(e.line,o);for(let n=e.marks.length-1;n>=-1;n--)i=o.childPos(i.off,1),o=o.children[i.i],t(n>=0?e.marks[n].node:e.text,o)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let i=this.view.root.activeElement,o=i==this.dom,n=!o&&!(this.view.state.facet(Wi)||this.dom.tabIndex>-1)&&_t(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(o||t||n))return;let a=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,s=this.moveToLine(this.domAtPos(r.anchor)),l=r.empty?s:this.moveToLine(this.domAtPos(r.head));if(gt.gecko&&r.empty&&!this.hasComposition&&1==(d=s).node.nodeType&&d.node.firstChild&&(0==d.offset||"false"==d.node.childNodes[d.offset-1].contentEditable)&&(d.offset==d.node.childNodes.length||"false"==d.node.childNodes[d.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore((()=>s.node.insertBefore(e,s.node.childNodes[s.offset]||null))),s=l=new Bt(e,0),a=!0}var d;let c=this.view.observer.selectionRange;!a&&c.focusNode&&(bt(s.node,s.offset,c.anchorNode,c.anchorOffset)&&bt(l.node,l.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,r))||(this.view.observer.ignore((()=>{gt.android&&gt.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=mt(this.view.root);if(e)if(r.empty){if(gt.gecko){let e=(t=s.node,o=s.offset,1!=t.nodeType?0:(o&&"false"==t.childNodes[o-1].contentEditable?1:0)|(o<t.childNodes.length&&"false"==t.childNodes[o].contentEditable?2:0));if(e&&3!=e){let t=(1==e?Mt:Dt)(s.node,s.offset);t&&(s=new Bt(t.node,t.offset))}}e.collapse(s.node,s.offset),null!=r.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=r.bidiLevel)}else if(e.extend){e.collapse(s.node,s.offset);try{e.extend(l.node,l.offset)}catch(e){}}else{let t=document.createRange();r.anchor>r.head&&([s,l]=[l,s]),t.setEnd(l.node,l.offset),t.setStart(s.node,s.offset),e.removeAllRanges(),e.addRange(t)}var t,o;n&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())})),this.view.observer.setSelectionRange(s,l)),this.impreciseAnchor=s.precise?null:new Bt(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new Bt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&bt(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=mt(e.root),{anchorNode:o,anchorOffset:n}=e.observer.selectionRange;if(!(i&&t.empty&&t.assoc&&i.modify))return;let a=pi.find(this,t.head);if(!a)return;let r=a.posAtStart;if(t.head==r||t.head==r+a.length)return;let s=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!s||!l||s.bottom>l.top)return;let d=this.domAtPos(t.head+t.assoc);i.collapse(d.node,d.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let c=e.observer.selectionRange;e.docView.posFromDOM(c.anchorNode,c.anchorOffset)!=t.from&&i.collapse(o,n)}moveToLine(e){let t,i=this.dom;if(e.node!=i)return e;for(let o=e.offset;!t&&o<i.childNodes.length;o++){let e=Ut.get(i.childNodes[o]);e instanceof pi&&(t=e.domAtPos(0))}for(let o=e.offset-1;!t&&o>=0;o--){let e=Ut.get(i.childNodes[o]);e instanceof pi&&(t=e.domAtPos(e.length))}return t?new Bt(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=Ut.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof pi)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,o=0;for(let n=this.length,a=this.children.length-1;a>=0;a--){let r=this.children[a],s=n-r.breakAfter,l=s-r.length;if(s<e)break;if(l<=e&&(l<e||r.covers(-1))&&(s>e||r.covers(1))&&(!i||r instanceof pi&&!(i instanceof pi&&t>=0)))i=r,o=l;else if(i&&l==e&&s==e&&r instanceof ui&&Math.abs(t)<2){if(r.deco.startSide<0)break;a&&(i=null)}n=l}return i?i.coordsAt(e-o,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),o=this.children[t];if(!(o instanceof pi))return null;for(;o.children.length;){let{i:e,off:t}=o.childPos(i,1);for(;;e++){if(e==o.children.length)return null;if((o=o.children[e]).length)break}i=t}if(!(o instanceof Lt))return null;let n=A(o.text,i);if(n==i)return null;let a=Pt(o.dom,i,n).getClientRects();for(let e=0;e<a.length;e++){let t=a[e];if(e==a.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:o}=e,n=this.view.contentDOM.clientWidth,a=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,r=-1,s=this.view.textDirection==_i.LTR;for(let e=0,l=0;l<this.children.length;l++){let d=this.children[l],c=e+d.length;if(c>o)break;if(e>=i){let i=d.dom.getBoundingClientRect();if(t.push(i.height),a){let t=d.dom.lastChild,o=t?vt(t):[];if(o.length){let t=o[o.length-1],a=s?t.right-i.left:i.right-t.left;a>r&&(r=a,this.minWidth=n,this.minWidthFrom=e,this.minWidthTo=c)}}}e=c+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?_i.RTL:_i.LTR}measureTextSize(){for(let e of this.children)if(e instanceof pi){let t=e.measureTextSize();if(t)return t}let e,t,i,o=document.createElement("div");return o.className="cm-line",o.style.width="99999px",o.style.position="absolute",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(o);let n=vt(o.firstChild)[0];e=o.getBoundingClientRect().height,t=n?n.width/27:7,i=n?n.height:e,o.remove()})),{lineHeight:e,charWidth:t,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Jt(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,o=0;;o++){let n=o==t.viewports.length?null:t.viewports[o],a=n?n.from-1:this.length;if(a>i){let o=(t.lineBlockAt(a).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(ai.replace({widget:new hi(o),block:!0,inclusive:!0,isBlockGap:!0}).range(i,a))}if(!n)break;i=n.to+1}return ai.set(e)}updateDeco(){let e=1,t=this.view.state.facet(ao).map((t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t)),i=!1,o=this.view.state.facet(ro).map(((e,t)=>{let o="function"==typeof e;return o&&(i=!0),o?e(this.view):e}));for(o.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ee.join(o))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let t of this.view.state.facet(Vi))try{if(t(this.view,e.range,e))return!0}catch(e){Yi(this.view.state,e,"scroll handler")}let t,{range:i}=e,o=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(!o)return;!i.empty&&(t=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(o={left:Math.min(o.left,t.left),top:Math.min(o.top,t.top),right:Math.max(o.right,t.right),bottom:Math.max(o.bottom,t.bottom)});let n=uo(this.view),a={left:o.left-n.left,top:o.top-n.top,right:o.right+n.right,bottom:o.bottom+n.bottom},{offsetWidth:r,offsetHeight:s}=this.view.scrollDOM;!function(e,t,i,o,n,a,r,s){let l=e.ownerDocument,d=l.defaultView||window;for(let c=e,p=!1;c&&!p;)if(1==c.nodeType){let e,u=c==l.body,h=1,g=1;if(u)e=Ot(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(p=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let t=c.getBoundingClientRect();({scaleX:h,scaleY:g}=At(c,t)),e={left:t.left,right:t.left+c.clientWidth*h,top:t.top,bottom:t.top+c.clientHeight*g}}let m=0,f=0;if("nearest"==n)t.top<e.top?(f=t.top-(e.top+r),i>0&&t.bottom>e.bottom+f&&(f=t.bottom-e.bottom+r)):t.bottom>e.bottom&&(f=t.bottom-e.bottom+r,i<0&&t.top-f<e.top&&(f=t.top-(e.top+r)));else{let o=t.bottom-t.top,a=e.bottom-e.top;f=("center"==n&&o<=a?t.top+o/2-a/2:"start"==n||"center"==n&&i<0?t.top-r:t.bottom-a+r)-e.top}if("nearest"==o?t.left<e.left?(m=t.left-(e.left+a),i>0&&t.right>e.right+m&&(m=t.right-e.right+a)):t.right>e.right&&(m=t.right-e.right+a,i<0&&t.left<e.left+m&&(m=t.left-(e.left+a))):m=("center"==o?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==o==s?t.left-a:t.right-(e.right-e.left)+a)-e.left,m||f)if(u)d.scrollBy(m,f);else{let e=0,i=0;if(f){let e=c.scrollTop;c.scrollTop+=f/g,i=(c.scrollTop-e)*g}if(m){let t=c.scrollLeft;c.scrollLeft+=m/h,e=(c.scrollLeft-t)*h}t={left:t.left-e,top:t.top-i,right:t.right-e,bottom:t.bottom-i},e&&Math.abs(e-m)<1&&(o="nearest"),i&&Math.abs(i-f)<1&&(n="nearest")}if(u)break;(t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)&&(t={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)}),c=c.assignedSlot||c.parentNode}else{if(11!=c.nodeType)break;c=c.host}}(this.view.scrollDOM,a,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,r),-r),Math.max(Math.min(e.yMargin,s),-s),this.view.textDirection==_i.LTR)}}function _o(e,t){let i=e.observer.selectionRange;if(!i.focusNode)return null;let o=Mt(i.focusNode,i.focusOffset),n=Dt(i.focusNode,i.focusOffset),a=o||n;if(n&&o&&n.node!=o.node){let t=Ut.get(n.node);if(!t||t instanceof Lt&&t.text!=n.node.nodeValue)a=n;else if(e.docView.lastCompositionAfterCursor){let e=Ut.get(o.node);!e||e instanceof Lt&&e.text!=o.node.nodeValue||(a=n)}}if(e.docView.lastCompositionAfterCursor=a!=o,!a)return null;let r=t-a.offset;return{from:r,to:r+a.node.nodeValue.length,node:a.node}}let vo=class{constructor(){this.changes=[]}compareRange(e,t){ci(e,t,this.changes)}comparePoint(e,t){ci(e,t,this.changes)}boundChange(e){ci(e,e,this.changes)}};function bo(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function yo(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function xo(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function ko(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function wo(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function So(e,t,i){let o,n,a,r,s,l,d,c,p=!1;for(let u=e.firstChild;u;u=u.nextSibling){let e=vt(u);for(let h=0;h<e.length;h++){let g=e[h];n&&xo(n,g)&&(g=ko(wo(g,n.bottom),n.top));let m=bo(t,g),f=yo(i,g);if(0==m&&0==f)return 3==u.nodeType?Oo(u,t,i):So(u,t,i);(!o||r>f||r==f&&a>m)&&(o=u,n=g,a=m,r=f,p=!m||(t<g.left?h>0:h<e.length-1)),0==m?i>g.bottom&&(!d||d.bottom<g.bottom)?(s=u,d=g):i<g.top&&(!c||c.top>g.top)&&(l=u,c=g):d&&xo(d,g)?d=wo(d,g.bottom):c&&xo(c,g)&&(c=ko(c,g.top))}}if(d&&d.bottom>=i?(o=s,n=d):c&&c.top<=i&&(o=l,n=c),!o)return{node:e,offset:0};let u=Math.max(n.left,Math.min(n.right,t));return 3==o.nodeType?Oo(o,u,i):p&&"false"!=o.contentEditable?So(o,u,i):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,o)+(t>=(n.left+n.right)/2?1:0)}}function Oo(e,t,i){let o=e.nodeValue.length,n=-1,a=1e9,r=0;for(let s=0;s<o;s++){let o=Pt(e,s,s+1).getClientRects();for(let l=0;l<o.length;l++){let d=o[l];if(d.top==d.bottom)continue;r||(r=t-d.left);let c=(d.top>i?d.top-i:i-d.bottom)-1;if(d.left-1<=t&&d.right+1>=t&&c<a){let i=t>=(d.left+d.right)/2,o=i;if((gt.chrome||gt.gecko)&&Pt(e,s).getBoundingClientRect().left==d.right&&(o=!i),c<=0)return{node:e,offset:s+(o?1:0)};n=s+(o?1:0),a=c}}}return{node:e,offset:n>-1?n:r>0?e.nodeValue.length:0}}function Ao(e,t,i,o=-1){var n,a;let r,s=e.contentDOM.getBoundingClientRect(),l=s.top+e.viewState.paddingTop,{docHeight:d}=e.viewState,{x:c,y:p}=t,u=p-l;if(u<0)return 0;if(u>d)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,n=!1;r=e.elementAtHeight(u),r.type!=ni.Text;)for(;u=o>0?r.bottom+t:r.top-t,!(u>=0&&u<=d);){if(n)return i?null:0;n=!0,o=-o}p=l+u;let h=r.from;if(h<e.viewport.from)return 0==e.viewport.from?0:i?null:Co(e,s,r,c,p);if(h>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:i?null:Co(e,s,r,c,p);let g=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:g,f=m.elementFromPoint(c,p);f&&!e.contentDOM.contains(f)&&(f=null),f||(c=Math.max(s.left+1,Math.min(s.right-1,c)),f=m.elementFromPoint(c,p),f&&!e.contentDOM.contains(f)&&(f=null));let _,v=-1;if(f&&0!=(null===(n=e.docView.nearest(f))||void 0===n?void 0:n.isEditable)){if(g.caretPositionFromPoint){let e=g.caretPositionFromPoint(c,p);e&&({offsetNode:_,offset:v}=e)}else if(g.caretRangeFromPoint){let e=g.caretRangeFromPoint(c,p);e&&({startContainer:_,startOffset:v}=e)}_&&(!e.contentDOM.contains(_)||gt.safari&&function(e,t,i){return $o(e,t,i)}(_,v,c)||gt.chrome&&function(e,t,i){if(0!=t)return $o(e,t,i);for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return i-(1==e.nodeType?e.getBoundingClientRect():Pt(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(_,v,c))&&(_=void 0),_&&(v=Math.min(wt(_),v))}if(!_||!e.docView.dom.contains(_)){let t=pi.find(e.docView,h);if(!t)return u>r.top+r.height/2?r.to:r.from;({node:_,offset:v}=So(t.dom,c,p))}let b=e.docView.nearest(_);if(!b)return null;if(b.isWidget&&1==(null===(a=b.dom)||void 0===a?void 0:a.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(_,v)+b.posAtStart}function Co(e,t,i,o,n){let a=Math.round((o-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;a+=Math.floor((n-i.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let r=e.state.sliceDoc(i.from,i.to);return i.from+function(e,t,i){for(let o=0,n=0;;){if(n>=t)return o;if(o==e.length)break;n+=9==e.charCodeAt(o)?i-n%i:1,o=A(e,o)}return e.length}(r,a,e.state.tabSize)}function $o(e,t,i){let o,n=e;if(3!=e.nodeType||t!=(o=e.nodeValue.length))return!1;for(;;){let e=n.nextSibling;if(e){if("BR"==e.nodeName)break;return!1}{let e=n.parentNode;if(!e||"DIV"==e.nodeName)break;n=e}}return Pt(e,o-1,o).getBoundingClientRect().right>i}function To(e,t,i,o){let n=e.state.doc.lineAt(t.head),a=e.bidiSpans(n),r=e.textDirectionAt(n.from);for(let s=t,l=null;;){let t=ji(n,a,r,s,i),d=Ii;if(!t){if(n.number==(i?e.state.doc.lines:1))return s;d="\n",n=e.state.doc.line(n.number+(i?1:-1)),a=e.bidiSpans(n),t=e.visualLineSide(n,!i)}if(l){if(!l(d))return s}else{if(!o)return t;l=o(d)}s=t}}function zo(e,t,i){for(;;){let o=0;for(let n of e)n.between(t-1,t+1,((e,n,a)=>{if(t>e&&t<n){let a=o||i||(t-e<n-t?-1:1);t=a<0?e:n,o=a}}));if(!o)return t}}function Po(e,t){let i=null;for(let o=0;o<t.ranges.length;o++){let n=t.ranges[o],a=null;if(n.empty){let t=zo(e,n.from,0);t!=n.from&&(a=J.cursor(t,-1))}else{let t=zo(e,n.from,-1),i=zo(e,n.to,1);t==n.from&&i==n.to||(a=J.range(n.from==n.anchor?t:i,n.from==n.head?t:i))}a&&(i||(i=t.ranges.slice()),i[o]=a)}return i?J.create(i,t.mainIndex):t}function Eo(e,t,i){let o=zo(e.state.facet(so).map((t=>t(e))),i.from,t.head>i.from?-1:1);return o==i.from?i:J.cursor(o,o<i.from?1:-1)}const Io="￿";class jo{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ce.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Io}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let o=e;;){this.findPointBefore(i,o);let e=this.text.length;this.readNode(o);let n=o.nextSibling;if(n==t)break;let a=Ut.get(o),r=Ut.get(n);(a&&r?a.breakAfter:(a?a.breakAfter:xt(o))||xt(n)&&("BR"!=o.nodeName||o.cmIgnore)&&this.text.length>e)&&!Do(n,t)&&this.lineBreak(),o=n}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let n,a=-1,r=1;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,i),r=this.lineSeparator.length):(n=o.exec(t))&&(a=n.index,r=n[0].length),this.append(t.slice(i,a<0?t.length:a)),a<0)break;if(this.lineBreak(),r>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=r-1);i=a+r}}readNode(e){if(e.cmIgnore)return;let t=Ut.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Mo(e,i.node,i.offset)?t:0))}}function Mo(e,t,i){for(;;){if(!t||i<wt(t))return!1;if(t==e)return!0;i=yt(t)+1,t=t.parentNode}}function Do(e,t){let i;for(;e!=t&&e;e=e.nextSibling){let t=Ut.get(e);if(!(null==t?void 0:t.isWidget)&&!e.cmIgnore)return!1;t&&(i||(i=[])).push(t)}if(i)for(let e of i){let t=e.overrideDOMText;if(null==t?void 0:t.length)return!1}return!0}class Bo{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Ro{constructor(e,t,i,o){this.typeOver=o,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:n,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let t=n||a?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:o,focusNode:n,focusOffset:a}=e.observer.selectionRange;return i&&(t.push(new Bo(i,o)),n==i&&a==o||t.push(new Bo(n,a))),t}(e),i=new jo(t,e.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(e,t){if(0==e.length)return null;let i=e[0].pos,o=2==e.length?e[1].pos:i;return i>-1&&o>-1?J.single(i+t,o+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,i=n&&n.node==t.focusNode&&n.offset==t.focusOffset||!ft(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),o=a&&a.node==t.anchorNode&&a.offset==t.anchorOffset||!ft(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),r=e.viewport;if((gt.ios||gt.chrome)&&e.state.selection.main.empty&&i!=o&&(r.from>0||r.to<e.state.doc.length)){let t=Math.min(i,o),n=Math.max(i,o),a=r.from-t,s=r.to-n;0!=a&&1!=a&&0!=t||0!=s&&-1!=s&&n!=e.state.doc.length||(i=0,o=e.state.doc.length)}this.newSel=J.single(o,i)}}}function Uo(e,t){let i,{newSel:o}=t,n=e.state.selection.main,a=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:o,to:r}=t.bounds,s=n.from,l=null;(8===a||gt.android&&t.text.length<r-o)&&(s=n.to,l="end");let d=Jo(e.state.doc.sliceString(o,r,Io),t.text,s-o,l);d&&(gt.chrome&&13==a&&d.toB==d.from+2&&t.text.slice(d.from,d.toB)==Io+Io&&d.toB--,i={from:o+d.from,to:o+d.toA,insert:f.of(t.text.slice(d.from,d.toB).split(Io))})}else o&&(!e.hasFocus&&e.state.facet(Wi)||o.main.eq(n))&&(o=null);if(!i&&!o)return!1;if(!i&&t.typeOver&&!n.empty&&o&&o.main.empty?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,n.to)}:(gt.mac||gt.android)&&i&&i.from==i.to&&i.from==n.head-1&&/^\. ?$/.test(i.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(o&&2==i.insert.length&&(o=J.single(o.main.anchor-1,o.main.head-1)),i={from:i.from,to:i.to,insert:f.of([i.insert.toString().replace("."," ")])}):i&&i.from>=n.from&&i.to<=n.to&&(i.from!=n.from||i.to!=n.to)&&n.to-n.from-(i.to-i.from)<=4?i={from:n.from,to:n.to,insert:e.state.doc.slice(n.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,n.to))}:gt.chrome&&i&&i.from==i.to&&i.from==n.head&&"\n "==i.insert.toString()&&e.lineWrapping&&(o&&(o=J.single(o.main.anchor-1,o.main.head-1)),i={from:n.from,to:n.to,insert:f.of([" "])}),i)return Ho(e,i,o,a);if(o&&!o.main.eq(n)){let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),i=e.inputState.lastSelectionOrigin,"select.pointer"==i&&(o=Po(e.state.facet(so).map((t=>t(e))),o))),e.dispatch({selection:o,scrollIntoView:t,userEvent:i}),!0}return!1}function Ho(e,t,i,o=-1){if(gt.ios&&e.inputState.flushIOSKey(t))return!0;let n=e.state.selection.main;if(gt.android&&(t.to==n.to&&(t.from==n.from||t.from==n.from-1&&" "==e.state.sliceDoc(t.from,n.from))&&1==t.insert.length&&2==t.insert.lines&&Et(e.contentDOM,"Enter",13)||(t.from==n.from-1&&t.to==n.to&&0==t.insert.length||8==o&&t.insert.length<t.to-t.from&&t.to>n.head)&&Et(e.contentDOM,"Backspace",8)||t.from==n.from&&t.to==n.to+1&&0==t.insert.length&&Et(e.contentDOM,"Delete",46)))return!0;let a,r=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let s=()=>a||(a=function(e,t,i){let o,n=e.state,a=n.selection.main,r=-1;if(t.from==t.to&&t.from<a.from||t.from>a.to){let i=t.from<a.from?-1:1,o=i<0?a.from:a.to,s=zo(n.facet(so).map((t=>t(e))),o,i);t.from==s&&(r=s)}if(r>-1)o={changes:t,selection:J.cursor(t.from+t.insert.length,-1)};else if(t.from>=a.from&&t.to<=a.to&&t.to-t.from>=(a.to-a.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let i=a.from<t.from?n.sliceDoc(a.from,t.from):"",r=a.to>t.to?n.sliceDoc(t.to,a.to):"";o=n.replaceSelection(e.state.toText(i+t.insert.sliceString(0,void 0,e.state.lineBreak)+r))}else{let r=n.changes(t),s=i&&i.main.to<=r.newLength?i.main:void 0;if(n.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=a.to&&t.to>=a.to-10){let l,d=e.state.sliceDoc(t.from,t.to),c=i&&_o(e,i.main.head);if(c){let e=t.insert.length-(t.to-t.from);l={from:c.from,to:c.to-e}}else l=e.state.doc.lineAt(a.head);let p=a.to-t.to,u=a.to-a.from;o=n.changeByRange((i=>{if(i.from==a.from&&i.to==a.to)return{changes:r,range:s||i.map(r)};let o=i.to-p,c=o-d.length;if(i.to-i.from!=u||e.state.sliceDoc(c,o)!=d||i.to>=l.from&&i.from<=l.to)return{range:i};let h=n.changes({from:c,to:o,insert:t.insert}),g=i.to-a.to;return{changes:h,range:s?J.range(Math.max(0,s.anchor+g),Math.max(0,s.head+g)):i.map(h)}}))}else o={changes:r,selection:s&&n.selection.replaceRange(s)}}let s="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,s+=".compose",e.inputState.compositionFirstChange&&(s+=".start",e.inputState.compositionFirstChange=!1)),n.update(o,{userEvent:s,scrollIntoView:!0})}(e,t,i));return e.state.facet(Ji).some((i=>i(e,t.from,t.to,r,s)))||e.dispatch(s()),!0}function Jo(e,t,i,o){let n=Math.min(e.length,t.length),a=0;for(;a<n&&e.charCodeAt(a)==t.charCodeAt(a);)a++;if(a==n&&e.length==t.length)return null;let r=e.length,s=t.length;for(;r>0&&s>0&&e.charCodeAt(r-1)==t.charCodeAt(s-1);)r--,s--;return"end"==o&&(i-=r+Math.max(0,a-Math.min(r,s))-a),r<a&&e.length<t.length?(a-=i<=a&&i>=r?a-i:0,s=a+(s-r),r=a):s<a&&(a-=i<=a&&i>=s?a-i:0,r=a+(r-s),s=a),{from:a,toA:r,toB:s}}class Qo{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,gt.safari&&e.contentDOM.addEventListener("input",(()=>null)),gt.gecko&&function(e){fn.has(e)||(fn.add(e),e.addEventListener("copy",(()=>{})),e.addEventListener("cut",(()=>{})))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i,o=t.target;o!=e.contentDOM;o=o.parentNode)if(!o||11==o.nodeType||(i=Ut.get(o))&&i.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||(0!=this.view.updateState?Promise.resolve().then((()=>this.runHandlers(e.type,e))):this.runHandlers(e.type,e)))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let e of i.observers)e(this.view,t);for(let e of i.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Lo(e),i=this.handlers,o=this.view.contentDOM;for(let e in t)if("scroll"!=e){let n=!t[e].handlers.length,a=i[e];a&&n!=!a.handlers.length&&(o.removeEventListener(e,this.handleEvent),a=null),a||o.addEventListener(e,this.handleEvent,{passive:n})}for(let e in i)"scroll"==e||t[e]||o.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&Vo.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),gt.android&&gt.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!gt.ios||e.synthetic||e.altKey||e.metaKey||!((t=Fo.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||qo.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,Et(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!(!/^key/.test(e.type)||e.synthetic)&&(this.composing>0||!!(gt.safari&&!gt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function No(e,t){return(i,o)=>{try{return t.call(e,o,i)}catch(e){Yi(i.state,e)}}}function Lo(e){let t=Object.create(null);function i(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec,o=e&&e.plugin.domEventHandlers,n=e&&e.plugin.domEventObservers;if(o)for(let e in o){let n=o[e];n&&i(e).handlers.push(No(t.value,n))}if(n)for(let e in n){let o=n[e];o&&i(e).observers.push(No(t.value,o))}}for(let e in Zo)i(e).handlers.push(Zo[e]);for(let e in Yo)i(e).observers.push(Yo[e]);return t}const Fo=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],qo="dthko",Vo=[16,17,18,20,91,92,224,225];function Ko(e){return.7*Math.max(0,e)+8}class Go{constructor(e,t,i,o){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,i,o=e.ownerDocument;for(let n=e.parentNode;n&&!(n==o.body||t&&i);)if(1==n.nodeType)!i&&n.scrollHeight>n.clientHeight&&(i=n),!t&&n.scrollWidth>n.clientWidth&&(t=n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}return{x:t,y:i}}(e.contentDOM),this.atoms=e.state.facet(so).map((t=>t(e)));let n=e.contentDOM.ownerDocument;n.addEventListener("mousemove",this.move=this.move.bind(this)),n.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ce.allowMultipleSelections)&&function(e,t){let i=e.state.facet(Di);return i.length?i[0](t):gt.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let o=mt(e.root);if(!o||0==o.rangeCount)return!0;let n=o.getRangeAt(0).getClientRects();for(let e=0;e<n.length;e++){let i=n[e];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}(e,t)||1!=cn(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(t=this.startEvent,i=e,Math.max(Math.abs(t.clientX-i.clientX),Math.abs(t.clientY-i.clientY))<10))return;var t,i;this.select(this.lastEvent=e);let o=0,n=0,a=0,r=0,s=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:a,right:s}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:l}=this.scrollParents.y.getBoundingClientRect());let d=uo(this.view);e.clientX-d.left<=a+6?o=-Ko(a-e.clientX):e.clientX+d.right>=s-6&&(o=Ko(e.clientX-s)),e.clientY-d.top<=r+6?n=-Ko(r-e.clientY):e.clientY+d.bottom>=l-6&&(n=Ko(e.clientY-l)),this.setScrollSpeed(o,n)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}select(e){let{view:t}=this,i=Po(this.atoms,this.style.get(e,this.extend,this.multiple));!this.mustSelect&&i.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some((e=>e.isUserEvent("input.type")))?this.destroy():this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const Zo=Object.create(null),Yo=Object.create(null),Wo=gt.ie&&gt.ie_version<15||gt.ios&&gt.webkit_version<604;function Xo(e,t,i){for(let o of e.facet(t))i=o(i,e);return i}function en(e,t){t=Xo(e.state,Ni,t);let i,{state:o}=e,n=1,a=o.toText(t),r=a.lines==o.selection.ranges.length;if(null!=un&&o.selection.ranges.every((e=>e.empty))&&un==a.toString()){let e=-1;i=o.changeByRange((i=>{let s=o.doc.lineAt(i.from);if(s.from==e)return{range:i};e=s.from;let l=o.toText((r?a.line(n++).text:t)+o.lineBreak);return{changes:{from:s.from,insert:l},range:J.cursor(i.from+l.length)}}))}else i=r?o.changeByRange((e=>{let t=a.line(n++);return{changes:{from:e.from,to:e.to,insert:t.text},range:J.cursor(e.from+t.length)}})):o.replaceSelection(a);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function tn(e,t,i,o){if(1==o)return J.cursor(t,i);if(2==o)return function(e,t,i=1){let o=e.charCategorizer(t),n=e.doc.lineAt(t),a=t-n.from;if(0==n.length)return J.cursor(t);0==a?i=1:a==n.length&&(i=-1);let r=a,s=a;i<0?r=A(n.text,a,!1):s=A(n.text,a);let l=o(n.text.slice(r,s));for(;r>0;){let e=A(n.text,r,!1);if(o(n.text.slice(e,r))!=l)break;r=e}for(;s<n.length;){let e=A(n.text,s);if(o(n.text.slice(s,e))!=l)break;s=e}return J.range(r+n.from,s+n.from)}(e.state,t,i);{let i=pi.find(e.docView,t),o=e.state.doc.lineAt(i?i.posAtEnd:t),n=i?i.posAtStart:o.from,a=i?i.posAtEnd:o.to;return a<e.state.doc.length&&a==o.to&&a++,J.range(n,a)}}Yo.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},Zo.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),Yo.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Yo.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Zo.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let o of e.state.facet(Ri))if(i=o(e,t),i)break;if(i||0!=t.button||(i=function(e,t){let i=an(e,t),o=cn(t),n=e.state.selection;return{update(e){e.docChanged&&(i.pos=e.changes.mapPos(i.pos),n=n.map(e.changes))},get(t,a,r){let s,l=an(e,t),d=tn(e,l.pos,l.bias,o);if(i.pos!=l.pos&&!a){let t=tn(e,i.pos,i.bias,o),n=Math.min(t.from,d.from),a=Math.max(t.to,d.to);d=n<d.from?J.range(n,a):J.range(a,n)}return a?n.replaceRange(n.main.extend(d.from,d.to)):r&&1==o&&n.ranges.length>1&&(s=function(e,t){for(let i=0;i<e.ranges.length;i++){let{from:o,to:n}=e.ranges[i];if(o<=t&&n>=t)return J.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}return null}(n,l.pos))?s:r?n.addRange(d):J.create([d])}}}(e,t)),i){let o=!e.hasFocus;e.inputState.startMouseSelection(new Go(e,t,i,o)),o&&e.observer.ignore((()=>{zt(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()}));let n=e.inputState.mouseSelection;if(n)return n.start(t),!1===n.dragging}else e.inputState.setSelectionOrigin("select.pointer");return!1};let on=(e,t,i)=>t>=i.top&&t<=i.bottom&&e>=i.left&&e<=i.right;function nn(e,t,i,o){let n=pi.find(e.docView,t);if(!n)return 1;let a=t-n.posAtStart;if(0==a)return 1;if(a==n.length)return-1;let r=n.coordsAt(a,-1);if(r&&on(i,o,r))return-1;let s=n.coordsAt(a,1);return s&&on(i,o,s)?1:r&&r.bottom>=o?-1:1}function an(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:nn(e,i,t.clientX,t.clientY)}}const rn=gt.ie&&gt.ie_version<=11;let sn=null,ln=0,dn=0;function cn(e){if(!rn)return e.detail;let t=sn,i=dn;return sn=e,dn=Date.now(),ln=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(ln+1)%3:1}function pn(e,t,i,o){if(!(i=Xo(e.state,Ni,i)))return;let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:a}=e.inputState,r=o&&a&&function(e,t){let i=e.state.facet(Bi);return i.length?i[0](t):gt.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:a.from,to:a.to}:null,s={from:n,insert:i},l=e.state.changes(r?[r,s]:s);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(n,-1),head:l.mapPos(n,1)},userEvent:r?"move.drop":"input.drop"}),e.inputState.draggedContent=null}Zo.dragstart=(e,t)=>{let{selection:{main:i}}=e.state;if(t.target.draggable){let o=e.docView.nearest(t.target);if(o&&o.isWidget){let e=o.posAtStart,t=e+o.length;(e>=i.to||t<=i.from)&&(i=J.range(e,t))}}let{inputState:o}=e;return o.mouseSelection&&(o.mouseSelection.dragging=!0),o.draggedContent=i,t.dataTransfer&&(t.dataTransfer.setData("Text",Xo(e.state,Li,e.state.sliceDoc(i.from,i.to))),t.dataTransfer.effectAllowed="copyMove"),!1},Zo.dragend=e=>(e.inputState.draggedContent=null,!1),Zo.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let i=t.dataTransfer.files;if(i&&i.length){let o=Array(i.length),n=0,a=()=>{++n==i.length&&pn(e,t,o.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=a,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(o[e]=t.result),a()},t.readAsText(i[e])}return!0}{let i=t.dataTransfer.getData("Text");if(i)return pn(e,t,i,!0),!0}return!1},Zo.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let i=Wo?null:t.clipboardData;return i?(en(e,i.getData("text/plain")||i.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.remove(),en(e,i.value)}),50)}(e),!1)};let un=null;Zo.copy=Zo.cut=(e,t)=>{let{text:i,ranges:o,linewise:n}=function(e){let t=[],i=[],o=!1;for(let o of e.selection.ranges)o.empty||(t.push(e.sliceDoc(o.from,o.to)),i.push(o));if(!t.length){let n=-1;for(let{from:o}of e.selection.ranges){let a=e.doc.lineAt(o);a.number>n&&(t.push(a.text),i.push({from:a.from,to:Math.min(e.doc.length,a.to+1)})),n=a.number}o=!0}return{text:Xo(e,Li,t.join(e.lineBreak)),ranges:i,linewise:o}}(e.state);if(!i&&!n)return!1;un=n?i:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"});let a=Wo?null:t.clipboardData;return a?(a.clearData(),a.setData("text/plain",i),!0):(function(e,t){let i=e.dom.parentNode;if(!i)return;let o=i.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.value=t,o.focus(),o.selectionEnd=t.length,o.selectionStart=0,setTimeout((()=>{o.remove(),e.focus()}),50)}(e,i),!1)};const hn=he.define();function gn(e,t){let i=[];for(let o of e.facet(Qi)){let n=o(e,t);n&&i.push(n)}return i.length?e.update({effects:i,annotations:hn.of(!0)}):null}function mn(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let i=gn(e.state,t);i?e.dispatch(i):e.update([])}}),10)}Yo.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),mn(e)},Yo.blur=e=>{e.observer.clearSelectionRange(),mn(e)},Yo.compositionstart=Yo.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},Yo.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,gt.chrome&&gt.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50))},Yo.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Zo.beforeinput=(e,t)=>{var i,o;if("insertReplacementText"==t.inputType&&e.observer.editContext){let o=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData("text/plain"),n=t.getTargetRanges();if(o&&n.length){let t=n[0],i=e.posAtDOM(t.startContainer,t.startOffset),a=e.posAtDOM(t.endContainer,t.endOffset);return Ho(e,{from:i,to:a,insert:e.state.toText(o)},null),!0}}let n;if(gt.chrome&&gt.android&&(n=Fo.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(n.key,n.keyCode),"Backspace"==n.key||"Delete"==n.key)){let t=(null===(o=window.visualViewport)||void 0===o?void 0:o.height)||0;setTimeout((()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return gt.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),gt.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout((()=>Yo.compositionend(e,t)),20),!1};const fn=new Set,_n=["pre-wrap","normal","pre-line","break-spaces"];let vn=!1;function bn(){vn=!1}class yn{constructor(e){this.lineWrapping=e,this.doc=f.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return _n.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let o=e[i];o<0?i++:this.heightSamples[Math.floor(10*o)]||(t=!0,this.heightSamples[Math.floor(10*o)]=!0)}return t}refresh(e,t,i,o,n,a){let r=_n.indexOf(e)>-1,s=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=r;if(this.lineWrapping=r,this.lineHeight=t,this.charWidth=i,this.textHeight=o,this.lineLength=n,s){this.heightSamples={};for(let e=0;e<a.length;e++){let t=a[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return s}}class xn{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class kn{constructor(e,t,i,o,n){this.from=e,this.length=t,this.top=i,this.height=o,this._content=n}get type(){return"number"==typeof this._content?ni.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof li?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new kn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var wn=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(wn||(wn={}));const Sn=.001;class On{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Sn&&(vn=!0),this.height=e)}replace(e,t,i){return On.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,o){let n=this,a=i.doc;for(let r=o.length-1;r>=0;r--){let{fromA:s,toA:l,fromB:d,toB:c}=o[r],p=n.lineAt(s,wn.ByPosNoHeight,i.setDoc(t),0,0),u=p.to>=l?p:n.lineAt(l,wn.ByPosNoHeight,i,0,0);for(c+=u.to-l,l=u.to;r>0&&p.from<=o[r-1].toA;)s=o[r-1].fromA,d=o[r-1].fromB,r--,s<p.from&&(p=n.lineAt(s,wn.ByPosNoHeight,i,0,0));d+=p.from-s,s=p.from;let h=En.build(i.setDoc(a),e,d,c);n=An(n,n.replace(s,l,h))}return n.updateHeight(i,0)}static empty(){return new $n(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,o=0,n=0;for(;;)if(t==i)if(o>2*n){let n=e[t-1];n.break?e.splice(--t,1,n.left,null,n.right):e.splice(--t,1,n.left,n.right),i+=1+n.break,o-=n.size}else{if(!(n>2*o))break;{let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,n-=t.size}}else if(o<n){let i=e[t++];i&&(o+=i.size)}else{let t=e[--i];t&&(n+=t.size)}let a=0;return null==e[t-1]?(a=1,t--):null==e[t]&&(a=1,i++),new zn(On.of(e.slice(0,t)),a,On.of(e.slice(i)))}}function An(e,t){return e==t?e:(e.constructor!=t.constructor&&(vn=!0),t)}On.prototype.size=1;class Cn extends On{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,o){return new kn(o,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,o,n){return this.blockAt(0,i,o,n)}forEachLine(e,t,i,o,n,a){e<=n+this.length&&t>=n&&a(this.blockAt(0,i,o,n))}updateHeight(e,t=0,i=!1,o){return o&&o.from<=t&&o.more&&this.setHeight(o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class $n extends Cn{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,o){return new kn(o,this.length,i,this.height,this.breaks)}replace(e,t,i){let o=i[0];return 1==i.length&&(o instanceof $n||o instanceof Tn&&4&o.flags)&&Math.abs(this.length-o.length)<10?(o instanceof Tn?o=new $n(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):On.of(i)}updateHeight(e,t=0,i=!1,o){return o&&o.from<=t&&o.more?this.setHeight(o.heights[o.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Tn extends On{constructor(e){super(e,0)}heightMetrics(e,t){let i,o=e.doc.lineAt(t).number,n=e.doc.lineAt(t+this.length).number,a=n-o+1,r=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*a);i=t/a,this.length>a+1&&(r=(this.height-t)/(this.length-a-1))}else i=this.height/a;return{firstLine:o,lastLine:n,perLine:i,perChar:r}}blockAt(e,t,i,o){let{firstLine:n,lastLine:a,perLine:r,perChar:s}=this.heightMetrics(t,o);if(t.lineWrapping){let n=o+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),a=t.doc.lineAt(n),l=r+a.length*s,d=Math.max(i,e-l/2);return new kn(a.from,a.length,d,l,0)}{let o=Math.max(0,Math.min(a-n,Math.floor((e-i)/r))),{from:s,length:l}=t.doc.line(n+o);return new kn(s,l,i+r*o,r,0)}}lineAt(e,t,i,o,n){if(t==wn.ByHeight)return this.blockAt(e,i,o,n);if(t==wn.ByPosNoHeight){let{from:t,to:o}=i.doc.lineAt(e);return new kn(t,o-t,0,0,0)}let{firstLine:a,perLine:r,perChar:s}=this.heightMetrics(i,n),l=i.doc.lineAt(e),d=r+l.length*s,c=l.number-a,p=o+r*c+s*(l.from-n-c);return new kn(l.from,l.length,Math.max(o,Math.min(p,o+this.height-d)),d,0)}forEachLine(e,t,i,o,n,a){e=Math.max(e,n),t=Math.min(t,n+this.length);let{firstLine:r,perLine:s,perChar:l}=this.heightMetrics(i,n);for(let d=e,c=o;d<=t;){let t=i.doc.lineAt(d);if(d==e){let i=t.number-r;c+=s*i+l*(e-n-i)}let o=s+l*t.length;a(new kn(t.from,t.length,c,o,0)),c+=o,d=t.to+1}}replace(e,t,i){let o=this.length-t;if(o>0){let e=i[i.length-1];e instanceof Tn?i[i.length-1]=new Tn(e.length+o):i.push(null,new Tn(o-1))}if(e>0){let t=i[0];t instanceof Tn?i[0]=new Tn(e+t.length):i.unshift(new Tn(e-1),null)}return On.of(i)}decomposeLeft(e,t){t.push(new Tn(e-1),null)}decomposeRight(e,t){t.push(null,new Tn(this.length-e-1))}updateHeight(e,t=0,i=!1,o){let n=t+this.length;if(o&&o.from<=t+this.length&&o.more){let i=[],a=Math.max(t,o.from),r=-1;for(o.from>t&&i.push(new Tn(o.from-t-1).updateHeight(e,t));a<=n&&o.more;){let t=e.doc.lineAt(a).length;i.length&&i.push(null);let n=o.heights[o.index++];-1==r?r=n:Math.abs(n-r)>=Sn&&(r=-2);let s=new $n(t,n);s.outdated=!1,i.push(s),a+=t+1}a<=n&&i.push(null,new Tn(n-a).updateHeight(e,a));let s=On.of(i);return(r<0||Math.abs(s.height-this.height)>=Sn||Math.abs(r-this.heightMetrics(e,t).perLine)>=Sn)&&(vn=!0),An(this,s)}return(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class zn extends On{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,o){let n=i+this.left.height;return e<n?this.left.blockAt(e,t,i,o):this.right.blockAt(e,t,n,o+this.left.length+this.break)}lineAt(e,t,i,o,n){let a=o+this.left.height,r=n+this.left.length+this.break,s=t==wn.ByHeight?e<a:e<r,l=s?this.left.lineAt(e,t,i,o,n):this.right.lineAt(e,t,i,a,r);if(this.break||(s?l.to<r:l.from>r))return l;let d=t==wn.ByPosNoHeight?wn.ByPosNoHeight:wn.ByPos;return s?l.join(this.right.lineAt(r,d,i,a,r)):this.left.lineAt(r,d,i,o,n).join(l)}forEachLine(e,t,i,o,n,a){let r=o+this.left.height,s=n+this.left.length+this.break;if(this.break)e<s&&this.left.forEachLine(e,t,i,o,n,a),t>=s&&this.right.forEachLine(e,t,i,r,s,a);else{let l=this.lineAt(s,wn.ByPos,i,o,n);e<l.from&&this.left.forEachLine(e,l.from-1,i,o,n,a),l.to>=e&&l.from<=t&&a(l),t>l.to&&this.right.forEachLine(l.to+1,t,i,r,s,a)}}replace(e,t,i){let o=this.left.length+this.break;if(t<o)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-o,t-o,i));let n=[];e>0&&this.decomposeLeft(e,n);let a=n.length;for(let e of i)n.push(e);if(e>0&&Pn(n,a-1),t<this.length){let e=n.length;this.decomposeRight(t,n),Pn(n,e)}return On.of(n)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,o=i+this.break;if(e>=o)return this.right.decomposeRight(e-o,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<o&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?On.of(this.break?[e,null,t]:[e,t]):(this.left=An(this.left,e),this.right=An(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,o){let{left:n,right:a}=this,r=t+n.length+this.break,s=null;return o&&o.from<=t+n.length&&o.more?s=n=n.updateHeight(e,t,i,o):n.updateHeight(e,t,i),o&&o.from<=r+a.length&&o.more?s=a=a.updateHeight(e,r,i,o):a.updateHeight(e,r,i),s?this.balanced(n,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Pn(e,t){let i,o;null==e[t]&&(i=e[t-1])instanceof Tn&&(o=e[t+1])instanceof Tn&&e.splice(t-1,3,new Tn(i.length+1+o.length))}class En{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof $n?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new $n(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let o=i.widget?i.widget.estimatedHeight:0,n=i.widget?i.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let a=t-e;i.block?this.addBlock(new Cn(a,o,i)):(a||n||o>=5)&&this.addLineDeco(o,n,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new $n(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Tn(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof $n)return e;let t=new $n(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let o=this.ensureLine();o.length+=i,o.collapsed+=i,o.widgetHeight=Math.max(o.widgetHeight,e),o.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof $n||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new $n(0,-1));let i=e;for(let e of this.nodes)e instanceof $n&&e.updateHeight(this.oracle,i),i+=e?e.length:1;return this.nodes}static build(e,t,i,o){let n=new En(i,e);return Ee.spans(t,i,o,n,0),n.finish(i)}}class In{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,o){(e<t||i&&i.heightRelevant||o&&o.heightRelevant)&&ci(e,t,this.changes,5)}}function jn(e,t){let i=e.getBoundingClientRect(),o=e.ownerDocument,n=o.defaultView||window,a=Math.max(0,i.left),r=Math.min(n.innerWidth,i.right),s=Math.max(0,i.top),l=Math.min(n.innerHeight,i.bottom);for(let t=e.parentNode;t&&t!=o.body;)if(1==t.nodeType){let i=t,o=window.getComputedStyle(i);if((i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)&&"visible"!=o.overflow){let o=i.getBoundingClientRect();a=Math.max(a,o.left),r=Math.min(r,o.right),s=Math.max(s,o.top),l=Math.min(t==e.parentNode?n.innerHeight:l,o.bottom)}t="absolute"==o.position||"fixed"==o.position?i.offsetParent:i.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:a-i.left,right:Math.max(a,r)-i.left,top:s-(i.top+t),bottom:Math.max(s,l)-(i.top+t)}}function Mn(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class Dn{constructor(e,t,i,o){this.from=e,this.to=t,this.size=i,this.displaySize=o}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],n=t[i];if(o.from!=n.from||o.to!=n.to||o.size!=n.size)return!1}return!0}draw(e,t){return ai.replace({widget:new Bn(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Bn extends oi{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Rn{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Qn,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=_i.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(no).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new yn(t),this.stateDeco=e.facet(ao).filter((e=>"function"!=typeof e)),this.heightMap=On.empty().applyChanges(this.stateDeco,f.empty,this.heightOracle.setDoc(e.doc),[new go(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ai.set(this.lineGaps.map((e=>e.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let o=i?t.head:t.anchor;if(!e.some((({from:e,to:t})=>o>=e&&o<=t))){let{from:t,to:i}=this.lineBlockAt(o);e.push(new Un(t,i))}}return this.viewports=e.sort(((e,t)=>e.from-t.from)),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Qn:new Nn(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(Ln(e,this.scaler))}))}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(ao).filter((e=>"function"!=typeof e));let o=e.changedRanges,n=go.extendWithRanges(o,function(e,t,i){let o=new In;return Ee.compare(e,t,i,o,0),o.changes}(i,this.stateDeco,e?e.changes:I.empty(this.state.doc.length))),a=this.heightMap.height,r=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);bn(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),n),(this.heightMap.height!=a||vn)&&(e.flags|=2),r?(this.scrollAnchorPos=e.changes.mapPos(r.from,-1),this.scrollAnchorHeight=r.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let s=n.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<s.from||t.range.head>s.to)||!this.viewportIsAppropriate(s))&&(s=this.getViewport(0,t));let l=s.from!=this.viewport.from||s.to!=this.viewport.to;this.viewport=s,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(qi)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),o=this.heightOracle,n=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?_i.RTL:_i.LTR;let a=this.heightOracle.mustRefreshForWrapping(n),r=t.getBoundingClientRect(),s=a||this.mustMeasureContent||this.contentDOMHeight!=r.height;this.contentDOMHeight=r.height,this.mustMeasureContent=!1;let l=0,d=0;if(r.width&&r.height){let{scaleX:e,scaleY:i}=At(t,r);(e>.005&&Math.abs(this.scaleX-e)>.005||i>.005&&Math.abs(this.scaleY-i)>.005)&&(this.scaleX=e,this.scaleY=i,l|=16,a=s=!0)}let c=(parseInt(i.paddingTop)||0)*this.scaleY,p=(parseInt(i.paddingBottom)||0)*this.scaleY;this.paddingTop==c&&this.paddingBottom==p||(this.paddingTop=c,this.paddingBottom=p,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(o.lineWrapping&&(s=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);let u=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=u&&(this.scrollAnchorHeight=-1,this.scrollTop=u),this.scrolledToBottom=jt(e.scrollDOM);let h=(this.printing?Mn:jn)(t,this.paddingTop),g=h.top-this.pixelViewport.top,m=h.bottom-this.pixelViewport.bottom;this.pixelViewport=h;let _=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(_!=this.inView&&(this.inView=_,_&&(s=!0)),!this.inView&&!this.scrollTarget&&!function(e){let t=e.getBoundingClientRect(),i=e.ownerDocument.defaultView||window;return t.left<i.innerWidth&&t.right>0&&t.top<i.innerHeight&&t.bottom>0}(e.dom))return 0;let v=r.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=r.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),s){let t=e.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(t)&&(a=!0),a||o.lineWrapping&&Math.abs(v-this.contentDOMWidth)>o.charWidth){let{lineHeight:i,charWidth:r,textHeight:s}=e.docView.measureTextSize();a=i>0&&o.refresh(n,i,r,s,Math.max(5,v/r),t),a&&(e.docView.minWidth=0,l|=16)}g>0&&m>0?d=Math.max(g,m):g<0&&m<0&&(d=Math.min(g,m)),bn();for(let i of this.viewports){let n=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=(a?On.empty().applyChanges(this.stateDeco,f.empty,this.heightOracle,[new go(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(o,0,a,new xn(i.from,n))}vn&&(l|=2)}let b=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return b&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),l|=this.updateForViewport()),(2&l||b)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),o=this.heightMap,n=this.heightOracle,{visibleTop:a,visibleBottom:r}=this,s=new Un(o.lineAt(a-1e3*i,wn.ByHeight,n,0,0).from,o.lineAt(r+1e3*(1-i),wn.ByHeight,n,0,0).to);if(t){let{head:e}=t.range;if(e<s.from||e>s.to){let i,a=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),r=o.lineAt(e,wn.ByPos,n,0,0);i="center"==t.y?(r.top+r.bottom)/2-a/2:"start"==t.y||"nearest"==t.y&&e<s.from?r.top:r.bottom-a,s=new Un(o.lineAt(i-500,wn.ByHeight,n,0,0).from,o.lineAt(i+a+500,wn.ByHeight,n,0,0).to)}}return s}mapViewport(e,t){let i=t.mapPos(e.from,-1),o=t.mapPos(e.to,1);return new Un(this.heightMap.lineAt(i,wn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,wn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(e,wn.ByPos,this.heightOracle,0,0),{bottom:n}=this.heightMap.lineAt(t,wn.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:r}=this;return(0==e||o<=a-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||n>=r+Math.max(10,Math.min(i,250)))&&o>a-2e3&&n<r+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let o of e)t.touchesRange(o.from,o.to)||i.push(new Dn(t.mapPos(o.from),t.mapPos(o.to),o.size,o.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,o=i?1e4:2e3,n=o>>1,a=o<<1;if(this.defaultTextDirection!=_i.LTR&&!i)return[];let r=[],s=(o,a,l,d)=>{if(a-o<n)return;let c=this.state.selection.main,p=[c.from];c.empty||p.push(c.to);for(let e of p)if(e>o&&e<a)return s(o,e-10,l,d),void s(e+10,a,l,d);let u=function(e,t){for(let i of e)if(t(i))return i}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-o)<n&&Math.abs(e.to-a)<n&&!p.some((t=>e.from<t&&e.to>t))));if(!u){if(a<l.to&&t&&i&&t.visibleRanges.some((e=>e.from<=a&&e.to>=a))){let e=t.moveToLineBoundary(J.cursor(a),!1,!0).head;e>o&&(a=e)}let e=this.gapSize(l,o,a,d);u=new Dn(o,a,e,i||e<2e6?e:2e6)}r.push(u)},l=t=>{if(t.length<a||t.type!=ni.Text)return;let n=function(e,t,i){let o=[],n=e,a=0;return Ee.spans(i,e,t,{span(){},point(e,t){e>n&&(o.push({from:n,to:e}),a+=e-n),n=t}},20),n<t&&(o.push({from:n,to:t}),a+=t-n),{total:a,ranges:o}}(t.from,t.to,this.stateDeco);if(n.total<a)return;let r,l,d=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let e,i,a=o/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=d){let o=Jn(n,d),r=((this.visibleBottom-this.visibleTop)/2+a)/t.height;e=o-r,i=o+r}else e=(this.visibleTop-t.top-a)/t.height,i=(this.visibleBottom-t.top+a)/t.height;r=Hn(n,e),l=Hn(n,i)}else{let i=n.total*this.heightOracle.charWidth,a=o*this.heightOracle.charWidth,s=0;if(i>2e6)for(let i of e)i.from>=t.from&&i.from<t.to&&i.size!=i.displaySize&&i.from*this.heightOracle.charWidth+s<this.pixelViewport.left&&(s=i.size-i.displaySize);let c,p,u=this.pixelViewport.left+s,h=this.pixelViewport.right+s;if(null!=d){let e=Jn(n,d),t=((h-u)/2+a)/i;c=e-t,p=e+t}else c=(u-a)/i,p=(h+a)/i;r=Hn(n,c),l=Hn(n,p)}r>t.from&&s(t.from,r,t,n),l<t.to&&s(l,t.to,t,n)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return r}gapSize(e,t,i,o){let n=Jn(o,i)-Jn(o,t);return this.heightOracle.lineWrapping?e.height*n:o.total*this.heightOracle.charWidth*n}updateLineGaps(e){Dn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ai.set(e.map((e=>e.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Ee.spans(t,this.viewport.from,this.viewport.to,{span(e,t){i.push({from:e,to:t})},point(){}},20);let o=0;if(i.length!=this.visibleRanges.length)o=12;else for(let t=0;t<i.length&&!(8&o);t++){let n=this.visibleRanges[t],a=i[t];n.from==a.from&&n.to==a.to||(o|=4,e&&e.mapPos(n.from,-1)==a.from&&e.mapPos(n.to,1)==a.to||(o|=8))}return this.visibleRanges=i,o}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Ln(this.heightMap.lineAt(e,wn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((t=>t.top<=e&&t.bottom>=e))||Ln(this.heightMap.lineAt(this.scaler.fromDOM(e),wn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ln(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Un{constructor(e,t){this.from=e,this.to=t}}function Hn({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let o=Math.floor(e*i);for(let e=0;;e++){let{from:i,to:n}=t[e],a=n-i;if(o<=a)return i+o;o-=a}}function Jn(e,t){let i=0;for(let{from:o,to:n}of e.ranges){if(t<=n){i+=t-o;break}i+=n-o}return i/e.total}const Qn={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class Nn{constructor(e,t,i){let o=0,n=0,a=0;this.viewports=i.map((({from:i,to:n})=>{let a=t.lineAt(i,wn.ByPos,e,0,0).top,r=t.lineAt(n,wn.ByPos,e,0,0).bottom;return o+=r-a,{from:i,to:n,top:a,bottom:r,domTop:0,domBottom:0}})),this.scale=(7e6-o)/(t.height-o);for(let e of this.viewports)e.domTop=a+(e.top-n)*this.scale,a=e.domBottom=e.domTop+(e.bottom-e.top),n=e.bottom}toDOM(e){for(let t=0,i=0,o=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.top)return o+(e-i)*this.scale;if(e<=n.bottom)return n.domTop+(e-n.top);i=n.bottom,o=n.domBottom}}fromDOM(e){for(let t=0,i=0,o=0;;t++){let n=t<this.viewports.length?this.viewports[t]:null;if(!n||e<n.domTop)return i+(e-o)/this.scale;if(e<=n.domBottom)return n.top+(e-n.domTop);i=n.bottom,o=n.domBottom}}eq(e){return e instanceof Nn&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every(((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to))}}function Ln(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),o=t.toDOM(e.bottom);return new kn(e.from,e.length,i,o-i,Array.isArray(e._content)?e._content.map((e=>Ln(e,t))):e._content)}const Fn=L.define({combine:e=>e.join(" ")}),qn=L.define({combine:e=>e.indexOf(!0)>-1}),Vn=Ke.newName(),Kn=Ke.newName(),Gn=Ke.newName(),Zn={"&light":"."+Kn,"&dark":"."+Gn};function Yn(e,t,i){return new Ke(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!i||!i[t])throw new RangeError(`Unsupported selector: ${t}`);return i[t]})):e+" "+t})}const Wn=Yn("."+Vn,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Zn),Xn={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ea=gt.ie&&gt.ie_version<=11;class ta{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Ct,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(gt.ie&&gt.ie_version<=11||gt.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!gt.android||!1===e.constructor.EDIT_CONTEXT||gt.chrome&&gt.chrome_version<126||(this.editContext=new na(e),e.state.facet(Wi)&&(e.contentDOM.editContext=this.editContext.editContext)),ea&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,i)=>t!=e[i])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,o=this.selectionRange;if(i.state.facet(Wi)?i.root.activeElement!=this.dom:!_t(this.dom,o))return;let n=o.anchorNode&&i.docView.nearest(o.anchorNode);n&&n.ignoreEvent(e)?t||(this.selectionChanged=!1):(gt.ie&&gt.ie_version<=11||gt.android&&gt.chrome)&&!i.state.selection.main.empty&&o.focusNode&&bt(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=mt(e.root);if(!t)return!1;let i=gt.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return oa(e,i)}let i=null;function o(e){e.preventDefault(),e.stopImmediatePropagation(),i=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",o,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",o,!0),i?oa(e,i):null}(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let o=_t(this.dom,i);return o&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let i=t.focusNode,o=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=o)return!1;for(o=Math.min(o,wt(i));;)if(o){if(1!=i.nodeType)return!1;let e=i.childNodes[o-1];"false"==e.contentEditable?o--:(i=e,o=wt(i))}else{if(i==e)return!0;o=yt(i),i=i.parentNode}}(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),o&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Xn),ea&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ea&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&Et(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(i=this.delayedAndroidKey)||void 0===i?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,o=!1;for(let n of e){let e=this.readMutation(n);e&&(e.typeOver&&(o=!0),-1==t?({from:t,to:i}=e):(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:o}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),o=this.selectionChanged&&_t(this.dom,this.selectionRange);if(e<0&&!o)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let n=new Ro(this.view,e,t,i);return this.view.docView.domChanged={newSel:n.newSel?n.newSel.main:null},n}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,o=Uo(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),o}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let i=ia(t,e.previousSibling||e.target.previousSibling,-1),o=ia(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:o?t.posBefore(o):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Wi)!=e.state.facet(Wi)&&(e.view.contentDOM.editContext=e.state.facet(Wi)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resizeScroll)||void 0===i||i.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ia(e,t,i){for(;t;){let o=Ut.get(t);if(o&&o.parent==e)return o;let n=t.parentNode;t=n!=e.dom?n:i>0?t.nextSibling:t.previousSibling}return null}function oa(e,t){let i=t.startContainer,o=t.startOffset,n=t.endContainer,a=t.endOffset,r=e.docView.domAtPos(e.state.selection.main.anchor);return bt(r.node,r.offset,n,a)&&([i,o,n,a]=[n,a,i,o]),{anchorNode:i,anchorOffset:o,focusNode:n,focusOffset:a}}class na{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let o=e.state.selection.main,{anchor:n,head:a}=o,r=this.toEditorPos(i.updateRangeStart),s=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:r,drifted:!1});let l=s-r>i.text.length;r==this.from&&n<this.from?r=n:s==this.to&&n>this.to&&(s=n);let d=Jo(e.state.sliceDoc(r,s),i.text,(l?o.from:o.to)-r,l?"end":null);if(!d){let t=J.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));return void(t.main.eq(o)||e.dispatch({selection:t,userEvent:"select"}))}let c={from:d.from+r,to:d.toA+r,insert:f.of(i.text.slice(d.from,d.toB).split("\n"))};if((gt.mac||gt.android)&&c.from==a-1&&/^\. ?$/.test(i.text)&&"off"==e.contentDOM.getAttribute("autocorrect")&&(c={from:r,to:s,insert:f.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let t=this.to-this.from+(c.to-c.from+c.insert.length);Ho(e,c,J.single(this.toEditorPos(i.selectionStart,t),this.toEditorPos(i.selectionEnd,t)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),c.from<c.to&&!c.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(t.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let o=[],n=null;for(let t=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);t<a;t++){let i=e.coordsForChar(t);n=i&&new DOMRect(i.left,i.top,i.right-i.left,i.bottom-i.top)||n||new DOMRect,o.push(n)}t.updateCharacterBounds(i.rangeStart,o)},this.handlers.textformatupdate=t=>{let i=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,o=e.underlineThickness;if(!/none/i.test(t)&&!/none/i.test(o)){let n=this.toEditorPos(e.rangeStart),a=this.toEditorPos(e.rangeEnd);if(n<a){let e=`text-decoration: underline ${/^[a-z]/.test(t)?t+" ":"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${/thin/i.test(o)?1:2}px`;i.push(ai.mark({attributes:{style:e}}).range(n,a))}}}e.dispatch({effects:Zi.of(ai.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let e in this.handlers)t.addEventListener(e,this.handlers[e]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=mt(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,o=this.pendingContextChange;return e.changes.iterChanges(((n,a,r,s,l)=>{if(i)return;let d=l.length-(a-n);if(o&&a>=o.to){if(o.from==n&&o.to==a&&o.insert.eq(l))return o=this.pendingContextChange=null,t+=d,void(this.to+=d);o=null,this.revertPending(e.state)}if(n+=t,(a+=t)<=this.from)this.from+=d,this.to+=d;else if(n<this.to){if(n<this.from||a>this.to||this.to-this.from+l.length>3e4)return void(i=!0);this.editContext.updateText(this.toContextPos(n),this.toContextPos(a),l.toString()),this.to+=d}t+=d})),o&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some((e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),o=this.toContextPos(t.head);this.editContext.selectionStart==i&&this.editContext.selectionEnd==o||this.editContext.updateSelection(i,o)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class aa{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(e=>e.forEach((e=>i(e,this))))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Rn(e.state||Ce.create(e)),e.scrollTo&&e.scrollTo.is(Gi)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(eo).map((e=>new io(e)));for(let e of this.plugins)e.update(this);this.observer=new ta(this),this.inputState=new Qo(this),this.inputState.ensureHandlers(this.plugins),this.docView=new fo(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...e){let t=1==e.length&&e[0]instanceof _e?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,i=!1,o=!1,n=this.state;for(let t of e){if(t.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=t.state}if(this.destroyed)return void(this.viewState.state=n);let a=this.hasFocus,r=0,s=null;e.some((e=>e.annotation(hn)))?(this.inputState.notifiedFocused=a,r=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,s=gn(n,a),s||(r=1));let l=this.observer.delayedAndroidKey,d=null;if(l?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(n.doc)||!this.state.selection.eq(n.selection))&&(d=null)):this.observer.clear(),n.facet(Ce.phrases)!=this.state.facet(Ce.phrases))return this.setState(n);t=mo.create(this,n,e),t.flags|=r;let c=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(c&&(c=c.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;c=new Ki(e.empty?e:J.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Gi)&&(c=e.value.clip(this.state))}this.viewState.update(t,c),this.bidiCache=la.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),i=this.docView.update(t),this.state.facet(ho)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Fn)!=t.state.facet(Fn)&&(this.viewState.mustMeasureContent=!0),(i||o||c||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!t.empty)for(let e of this.state.facet(Hi))try{e(t)}catch(e){Yi(this.state,e,"update listener")}(s||d)&&Promise.resolve().then((()=>{s&&this.state==s.startState&&this.dispatch(s),d&&!Uo(this,d)&&l.force&&Et(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Rn(e),this.plugins=e.facet(eo).map((e=>new io(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new fo(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(eo),i=e.state.facet(eo);if(t!=i){let o=[];for(let n of i){let i=t.indexOf(n);if(i<0)o.push(new io(n));else{let t=this.plugins[i];t.mustUpdate=e,o.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){Yi(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,o=i.scrollTop*this.scaleY,{scrollAnchorPos:n,scrollAnchorHeight:a}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(a<0)if(jt(i))n=-1,a=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(o);n=e.from,a=e.top}this.updateState=1;let r=this.viewState.measure(this);if(!r&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let s=[];4&r||([this.measureRequests,s]=[s,this.measureRequests]);let l=s.map((e=>{try{return e.read(this)}catch(e){return Yi(this.state,e),sa}})),d=mo.create(this,this.state,[]),c=!1;d.flags|=r,t?t.flags|=r:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),c=this.docView.update(d),c&&this.docViewUpdate());for(let e=0;e<s.length;e++)if(l[e]!=sa)try{let t=s[e];t.write&&t.write(l[e],this)}catch(e){Yi(this.state,e)}if(c&&this.docView.updateSelection(!0),!d.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}{let e=(n<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(n).top)-a;if(e>1||e<-1){o+=e,i.scrollTop=o/this.scaleY,a=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(Hi))e(t)}get themeClasses(){return Vn+" "+(this.state.facet(qn)?Gn:Kn)+" "+this.state.facet(Fn)}updateAttrs(){let e=da(this,oo,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Wi)?"true":"false",class:"cm-content",style:`${gt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),da(this,no,t);let i=this.observer.ignore((()=>{let i=ti(this.contentDOM,this.contentAttrs,t),o=ti(this.dom,this.editorAttrs,e);return i||o}));return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)e.is(aa.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(ho);let e=this.state.facet(aa.cspNonce);Ke.mount(this.root,this.styleModules.concat(Wn).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.plugin==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Eo(this,e,To(this,e,t,i))}moveByGroup(e,t){return Eo(this,e,To(this,e,t,(t=>function(e,t,i){let o=e.state.charCategorizer(t),n=o(i);return e=>{let t=o(e);return n==Se.Space&&(n=t),n==t}}(this,e.head,t))))}visualLineSide(e,t){let i=this.bidiSpans(e),o=this.textDirectionAt(e.from),n=i[t?i.length-1:0];return J.cursor(n.side(t,o)+e.from,n.forward(!t,o)?1:-1)}moveToLineBoundary(e,t,i=!0){return function(e,t,i,o){let n=function(e,t,i){let o=e.lineBlockAt(t);if(Array.isArray(o.type)){let e;for(let n of o.type){if(n.from>t)break;if(!(n.to<t)){if(n.from<t&&n.to>t)return n;e&&(n.type!=ni.Text||e.type==n.type&&!(i<0?n.from<t:n.to>t))||(e=n)}}return e||o}return o}(e,t.head,t.assoc||-1),a=o&&n.type==ni.Text&&(e.lineWrapping||n.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>n.from?t.head-1:t.head):null;if(a){let t=e.dom.getBoundingClientRect(),o=e.textDirectionAt(n.from),r=e.posAtCoords({x:i==(o==_i.LTR)?t.right-1:t.left+1,y:(a.top+a.bottom)/2});if(null!=r)return J.cursor(r,i?-1:1)}return J.cursor(i?n.to:n.from,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return Eo(this,e,function(e,t,i,o){let n=t.head,a=i?1:-1;if(n==(i?e.state.doc.length:0))return J.cursor(n,t.assoc);let r,s=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),d=e.coordsAtPos(n,t.assoc||-1),c=e.documentTop;if(d)null==s&&(s=d.left-l.left),r=a<0?d.top:d.bottom;else{let t=e.viewState.lineBlockAt(n);null==s&&(s=Math.min(l.right-l.left,e.defaultCharacterWidth*(n-t.from))),r=(a<0?t.top:t.bottom)+c}let p=l.left+s,u=null!=o?o:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let i=r+(u+t)*a,o=Ao(e,{x:p,y:i},!1,a);if(i<l.top||i>l.bottom||(a<0?o<n:o>n)){let t=e.docView.coordsForChar(o),n=!t||i<t.top?-1:1;return J.cursor(o,n,void 0,s)}}}(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Ao(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let o=this.state.doc.lineAt(e),n=this.bidiSpans(o);return St(i,n[Ci.find(n,e-o.from,-1,t)].dir==_i.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Fi)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ra)return Ei(e.length);let t,i=this.textDirectionAt(e.from);for(let o of this.bidiCache)if(o.from==e.from&&o.dir==i&&(o.fresh||$i(o.isolates,t=co(this,e))))return o.order;t||(t=co(this,e));let o=function(e,t,i){if(!e)return[new Ci(0,0,t==bi?1:0)];if(t==vi&&!i.length&&!Ai.test(e))return Ei(e.length);if(i.length)for(;e.length>Ti.length;)Ti[Ti.length]=256;let o=[],n=t==vi?0:1;return Pi(e,n,n,i,0,e.length,o),o}(e.text,i,t);return this.bidiCache.push(new la(e.from,e.to,i,t,!0,o)),o}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||gt.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{zt(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Gi.of(new Ki("number"==typeof e?J.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Gi.of(new Ki(J.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return to.define((()=>({})),{eventHandlers:e})}static domEventObservers(e){return to.define((()=>({})),{eventObservers:e})}static theme(e,t){let i=Ke.newName(),o=[Fn.of(i),ho.of(Yn(`.${i}`,e))];return t&&t.dark&&o.push(qn.of(!0)),o}static baseTheme(e){return X.lowest(ho.of(Yn("."+Vn,e,Zn)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),o=i&&Ut.get(i)||Ut.get(e);return(null===(t=null==o?void 0:o.rootView)||void 0===t?void 0:t.view)||null}}aa.styleModule=ho,aa.inputHandler=Ji,aa.clipboardInputFilter=Ni,aa.clipboardOutputFilter=Li,aa.scrollHandler=Vi,aa.focusChangeEffect=Qi,aa.perLineTextDirection=Fi,aa.exceptionSink=Ui,aa.updateListener=Hi,aa.editable=Wi,aa.mouseSelectionStyle=Ri,aa.dragMovesSelection=Bi,aa.clickAddsSelectionRange=Di,aa.decorations=ao,aa.outerDecorations=ro,aa.atomicRanges=so,aa.bidiIsolatedRanges=lo,aa.scrollMargins=po,aa.darkTheme=qn,aa.cspNonce=L.define({combine:e=>e.length?e[0]:""}),aa.contentAttributes=no,aa.editorAttributes=oo,aa.lineWrapping=aa.contentAttributes.of({class:"cm-lineWrapping"}),aa.announce=fe.define();const ra=4096,sa={};class la{constructor(e,t,i,o,n,a){this.from=e,this.to=t,this.dir=i,this.isolates=o,this.fresh=n,this.order=a}static update(e,t){if(t.empty&&!e.some((e=>e.fresh)))return e;let i=[],o=e.length?e[e.length-1].dir:_i.LTR;for(let n=Math.max(0,e.length-10);n<e.length;n++){let a=e[n];a.dir!=o||t.touchesRange(a.from,a.to)||i.push(new la(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return i}}function da(e,t,i){for(let o=e.state.facet(t),n=o.length-1;n>=0;n--){let t=o[n],a="function"==typeof t?t(e):t;a&&Wt(a,i)}return i}const ca=gt.mac?"mac":gt.windows?"win":gt.linux?"linux":"key";function pa(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}const ua=X.default(aa.domEventHandlers({keydown:(e,t)=>function(e,t,i,o){_a=t;let n=function(e){var t=!(Xe&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||et&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?We:Ye)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),a=T(C(n,0))==n.length&&" "!=n,r="",s=!1,l=!1,d=!1;ma&&ma.view==i&&ma.scope==o&&(r=ma.prefix+" ",Vo.indexOf(t.keyCode)<0&&(l=!0,ma=null));let c,p,u=new Set,h=e=>{if(e){for(let t of e.run)if(!u.has(t)&&(u.add(t),t(i)))return e.stopPropagation&&(d=!0),!0;e.preventDefault&&(e.stopPropagation&&(d=!0),l=!0)}return!1},g=e[o];return g&&(h(g[r+pa(n,t,!a)])?s=!0:!a||!(t.altKey||t.metaKey||t.ctrlKey)||gt.windows&&t.ctrlKey&&t.altKey||gt.mac&&t.altKey&&!t.ctrlKey&&!t.metaKey||!(c=Ye[t.keyCode])||c==n?a&&t.shiftKey&&h(g[r+pa(n,t,!0)])&&(s=!0):(h(g[r+pa(c,t,!0)])||t.shiftKey&&(p=We[t.keyCode])!=n&&p!=c&&h(g[r+pa(p,t,!1)]))&&(s=!0),!s&&h(g._any)&&(s=!0)),l&&(s=!0),s&&d&&t.stopPropagation(),_a=null,s}(function(e){let t=e.facet(ha),i=ga.get(t);return i||ga.set(t,i=function(e,t=ca){let i=Object.create(null),o=Object.create(null),n=(e,t)=>{let i=o[e];if(null==i)o[e]=t;else if(i!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},a=(e,o,a,r,s)=>{var l,d;let c=i[e]||(i[e]=Object.create(null)),p=o.split(/ (?!$)/).map((e=>function(e,t){const i=e.split(/-(?!$)/);let o,n,a,r,s=i[i.length-1];"Space"==s&&(s=" ");for(let e=0;e<i.length-1;++e){const s=i[e];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))o=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))a=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);"mac"==t?r=!0:n=!0}}return o&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),a&&(s="Shift-"+s),s}(e,t)));for(let t=1;t<p.length;t++){let i=p.slice(0,t).join(" ");n(i,!0),c[i]||(c[i]={preventDefault:!0,stopPropagation:!1,run:[t=>{let o=ma={view:t,prefix:i,scope:e};return setTimeout((()=>{ma==o&&(ma=null)}),fa),!0}]})}let u=p.join(" ");n(u,!1);let h=c[u]||(c[u]={preventDefault:!1,stopPropagation:!1,run:(null===(d=null===(l=c._any)||void 0===l?void 0:l.run)||void 0===d?void 0:d.slice())||[]});a&&h.run.push(a),r&&(h.preventDefault=!0),s&&(h.stopPropagation=!0)};for(let o of e){let e=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let t of e){let e=i[t]||(i[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:n}=o;for(let t in e)e[t].run.push((e=>n(e,_a)))}let n=o[t]||o.key;if(n)for(let t of e)a(t,n,o.run,o.preventDefault,o.stopPropagation),o.shift&&a(t,"Shift-"+n,o.shift,o.preventDefault,o.stopPropagation)}return i}(t.reduce(((e,t)=>e.concat(t)),[]))),i}(t.state),e,t,"editor")})),ha=L.define({enables:ua}),ga=new WeakMap;let ma=null;const fa=4e3;let _a=null;const va="-10000px";class ba{constructor(e,t,i,o){this.facet=t,this.createTooltipView=i,this.removeTooltipView=o,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e));let n=null;this.tooltipViews=this.tooltips.map((e=>n=i(e,n)))}update(e,t){var i;let o=e.state.facet(this.facet),n=o.filter((e=>e));if(o===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let a=[],r=t?[]:null;for(let i=0;i<n.length;i++){let o=n[i],s=-1;if(o){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==o.create&&(s=e)}if(s<0)a[i]=this.createTooltipView(o,i?a[i-1]:null),r&&(r[i]=!!o.above);else{let o=a[i]=this.tooltipViews[s];r&&(r[i]=t[s]),o.update&&o.update(e)}}}for(let e of this.tooltipViews)a.indexOf(e)<0&&(this.removeTooltipView(e),null===(i=e.destroy)||void 0===i||i.call(e));return t&&(r.forEach(((e,i)=>t[i]=e)),t.length=r.length),this.input=o,this.tooltips=n,this.tooltipViews=a,!0}}function ya(e){let t=e.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:t.clientHeight,right:t.clientWidth}}const xa=L.define({combine:e=>{var t,i,o;return{position:gt.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(i=e.find((e=>e.parent)))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(o=e.find((e=>e.tooltipSpace)))||void 0===o?void 0:o.tooltipSpace)||ya}}}),ka=new WeakMap,wa=to.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(xa);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new ba(e,Ca,((e,t)=>this.createTooltip(e,t)),(e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()})),this.above=this.manager.tooltips.map((e=>!!e.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let i=t||e.geometryChanged,o=e.state.facet(xa);if(o.position!=this.position&&!this.madeAbsolute){this.position=o.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;i=!0}if(o.parent!=this.parent){this.parent&&this.container.remove(),this.parent=o.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e,t){let i=e.create(this.view),o=t?t.dom:null;if(i.dom.classList.add("cm-tooltip"),e.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",i.dom.appendChild(e)}return i.dom.style.position=this.position,i.dom.style.top=va,i.dom.style.left="0px",this.container.insertBefore(i.dom,o),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var e,t,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(i=this.intersectionObserver)||void 0===i||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,i=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(gt.gecko)i=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==va&&"0px"==e.style.left){let t=e.getBoundingClientRect();i=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(i||"absolute"==this.position)if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let o=this.view.scrollDOM.getBoundingClientRect(),n=uo(this.view);return{visible:{left:o.left+n.left,top:o.top+n.top,right:o.right-n.right,bottom:o.bottom-n.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map(((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(xa).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{visible:i,space:o,scaleX:n,scaleY:a}=e,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let l=this.manager.tooltips[s],d=this.manager.tooltipViews[s],{dom:c}=d,p=e.pos[s],u=e.size[s];if(!p||!1!==l.clip&&(p.bottom<=Math.max(i.top,o.top)||p.top>=Math.min(i.bottom,o.bottom)||p.right<Math.max(i.left,o.left)-.1||p.left>Math.min(i.right,o.right)+.1)){c.style.top=va;continue}let h=l.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,g=h?7:0,m=u.right-u.left,f=null!==(t=ka.get(d))&&void 0!==t?t:u.bottom-u.top,_=d.offset||Aa,v=this.view.textDirection==_i.LTR,b=u.width>o.right-o.left?v?o.left:o.right-u.width:v?Math.max(o.left,Math.min(p.left-(h?14:0)+_.x,o.right-m)):Math.min(Math.max(o.left,p.left-m+(h?14:0)-_.x),o.right-m),y=this.above[s];!l.strictSide&&(y?p.top-f-g-_.y<o.top:p.bottom+f+g+_.y>o.bottom)&&y==o.bottom-p.bottom>p.top-o.top&&(y=this.above[s]=!y);let x=(y?p.top-o.top:o.bottom-p.bottom)-g;if(x<f&&!1!==d.resize){if(x<this.view.defaultLineHeight){c.style.top=va;continue}ka.set(d,f),c.style.height=(f=x)/a+"px"}else c.style.height&&(c.style.height="");let k=y?p.top-f-g-_.y:p.bottom+g+_.y,w=b+m;if(!0!==d.overlap)for(let e of r)e.left<w&&e.right>b&&e.top<k+f&&e.bottom>k&&(k=y?e.top-f-2-g:e.bottom+g+2);if("absolute"==this.position?(c.style.top=(k-e.parent.top)/a+"px",Sa(c,(b-e.parent.left)/n)):(c.style.top=k/a+"px",Sa(c,b/n)),h){let e=p.left+(v?_.x:-_.x)-(b+14-7);h.style.left=e/n+"px"}!0!==d.overlap&&r.push({left:b,top:k,right:w,bottom:k+f}),c.classList.toggle("cm-tooltip-above",y),c.classList.toggle("cm-tooltip-below",!y),d.positioned&&d.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=va}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Sa(e,t){let i=parseInt(e.style.left,10);(isNaN(i)||Math.abs(t-i)>1)&&(e.style.left=t+"px")}const Oa=aa.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Aa={x:0,y:0},Ca=L.define({enables:[wa,Oa]});function $a(e,t){let i=e.plugin(wa);if(!i)return null;let o=i.manager.tooltips.indexOf(t);return o<0?null:i.manager.tooltipViews[o]}class Ta extends $e{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ta.prototype.elementClass="",Ta.prototype.toDOM=void 0,Ta.prototype.mapMode=P.TrackBefore,Ta.prototype.startSide=Ta.prototype.endSide=-1,Ta.prototype.point=!0;const za=1024;let Pa=0;class Ea{constructor(e,t){this.from=e,this.to=t}}class Ia{constructor(e={}){this.id=Pa++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Da.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}Ia.closedBy=new Ia({deserialize:e=>e.split(" ")}),Ia.openedBy=new Ia({deserialize:e=>e.split(" ")}),Ia.group=new Ia({deserialize:e=>e.split(" ")}),Ia.isolate=new Ia({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),Ia.contextHash=new Ia({perNode:!0}),Ia.lookAhead=new Ia({perNode:!0}),Ia.mounted=new Ia({perNode:!0});class ja{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[Ia.mounted.id]}}const Ma=Object.create(null);class Da{constructor(e,t,i,o=0){this.name=e,this.props=t,this.id=i,this.flags=o}static define(e){let t=e.props&&e.props.length?Object.create(null):Ma,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),o=new Da(e.name||"",t,e.id,i);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(o)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return o}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Ia.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let o of i.split(" "))t[o]=e[i];return e=>{for(let i=e.prop(Ia.group),o=-1;o<(i?i.length:0);o++){let n=t[o<0?e.name:i[o]];if(n)return n}}}}Da.none=new Da("",Object.create(null),0,8);class Ba{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let o=null;for(let t of e){let e=t(i);e&&(o||(o=Object.assign({},i.props)),o[e[0].id]=e[1])}t.push(o?new Da(i.name,o,i.id,i.flags):i)}return new Ba(t)}}const Ra=new WeakMap,Ua=new WeakMap;var Ha;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(Ha||(Ha={}));class Ja{constructor(e,t,i,o,n){if(this.type=e,this.children=t,this.positions=i,this.length=o,this.props=null,n&&n.length){this.props=Object.create(null);for(let[e,t]of n)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=ja.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let i=e.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new er(this.topNode,e)}cursorAt(e,t=0,i=0){let o=Ra.get(this)||this.topNode,n=new er(o);return n.moveTo(e,t),Ra.set(this,n._tree),n}get topNode(){return new Va(this,0,0,null)}resolve(e,t=0){let i=Fa(Ra.get(this)||this.topNode,e,t,!1);return Ra.set(this,i),i}resolveInner(e,t=0){let i=Fa(Ua.get(this)||this.topNode,e,t,!0);return Ua.set(this,i),i}resolveStack(e,t=0){return function(e,t,i){let o=e.resolveInner(t,i),n=null;for(let e=o instanceof Va?o:o.context.parent;e;e=e.parent)if(e.index<0){let a=e.parent;(n||(n=[o])).push(a.resolve(t,i)),e=a}else{let a=ja.get(e.tree);if(a&&a.overlay&&a.overlay[0].from<=t&&a.overlay[a.overlay.length-1].to>=t){let r=new Va(a.tree,a.overlay[0].from+e.from,-1,e);(n||(n=[o])).push(Fa(r,t,i,!1))}}return n?Wa(n):o}(this,e,t)}iterate(e){let{enter:t,leave:i,from:o=0,to:n=this.length}=e,a=e.mode||0,r=(a&Ha.IncludeAnonymous)>0;for(let e=this.cursor(a|Ha.IncludeAnonymous);;){let a=!1;if(e.from<=n&&e.to>=o&&(!r&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;a=!0}for(;a&&i&&(r||!e.type.isAnonymous)&&i(e),!e.nextSibling();){if(!e.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:nr(Da.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,i)=>new Ja(this.type,e,t,i,this.propValues)),e.makeTree||((e,t,i)=>new Ja(Da.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:o,maxBufferLength:n=za,reused:a=[],minRepeatType:r=o.types.length}=e,s=Array.isArray(i)?new Qa(i,i.length):i,l=o.types,d=0,c=0;function p(e,t,i,f,_,v){let{id:b,start:y,end:x,size:k}=s,w=c,S=d;for(;k<0;){if(s.next(),-1==k){let t=a[b];return i.push(t),void f.push(y-e)}if(-3==k)return void(d=b);if(-4==k)return void(c=b);throw new RangeError(`Unrecognized record size: ${k}`)}let O,A,C=l[b],$=y-e;if(x-y<=n&&(A=function(e,t){let i=s.fork(),o=0,a=0,l=0,d=i.end-n,c={size:0,start:0,skip:0};e:for(let n=i.pos-e;i.pos>n;){let e=i.size;if(i.id==t&&e>=0){c.size=o,c.start=a,c.skip=l,l+=4,o+=4,i.next();continue}let s=i.pos-e;if(e<0||s<n||i.start<d)break;let p=i.id>=r?4:0,u=i.start;for(i.next();i.pos>s;){if(i.size<0){if(-3!=i.size)break e;p+=4}else i.id>=r&&(p+=4);i.next()}a=u,o+=e,l+=p}return(t<0||o==e)&&(c.size=o,c.start=a,c.skip=l),c.size>4?c:void 0}(s.pos-t,_))){let t=new Uint16Array(A.size-A.skip),i=s.pos-A.size,n=t.length;for(;s.pos>i;)n=m(A.start,t,n);O=new Na(t,x-A.start,o),$=A.start-e}else{let e=s.pos-k;s.next();let t=[],i=[],o=b>=r?b:-1,a=0,l=x;for(;s.pos>e;)o>=0&&s.id==o&&s.size>=0?(s.end<=l-n&&(h(t,i,y,a,s.end,l,o,w,S),a=t.length,l=s.end),s.next()):v>2500?u(y,e,t,i):p(y,e,t,i,o,v+1);if(o>=0&&a>0&&a<t.length&&h(t,i,y,a,y,l,o,w,S),t.reverse(),i.reverse(),o>-1&&a>0){let e=function(e,t){return(i,o,n)=>{let a,r,s=0,l=i.length-1;if(l>=0&&(a=i[l])instanceof Ja){if(!l&&a.type==e&&a.length==n)return a;(r=a.prop(Ia.lookAhead))&&(s=o[l]+a.length+r)}return g(e,i,o,n,s,t)}}(C,S);O=nr(C,t,i,0,t.length,0,x-y,e,e)}else O=g(C,t,i,x-y,w-x,S)}i.push(O),f.push($)}function u(e,t,i,a){let r=[],l=0,d=-1;for(;s.pos>t;){let{id:e,start:t,end:i,size:o}=s;if(o>4)s.next();else{if(d>-1&&t<d)break;d<0&&(d=i-n),r.push(e,t,i),l++,s.next()}}if(l){let t=new Uint16Array(4*l),n=r[r.length-2];for(let e=r.length-3,i=0;e>=0;e-=3)t[i++]=r[e],t[i++]=r[e+1]-n,t[i++]=r[e+2]-n,t[i++]=i;i.push(new Na(t,r[2]-n,o)),a.push(n-e)}}function h(e,t,i,n,a,r,s,l,d){let c=[],p=[];for(;e.length>n;)c.push(e.pop()),p.push(t.pop()+i-a);e.push(g(o.types[s],c,p,r-a,l-r,d)),t.push(a-i)}function g(e,t,i,o,n,a,r){if(a){let e=[Ia.contextHash,a];r=r?[e].concat(r):[e]}if(n>25){let e=[Ia.lookAhead,n];r=r?[e].concat(r):[e]}return new Ja(e,t,i,o,r)}function m(e,t,i){let{id:o,start:n,end:a,size:l}=s;if(s.next(),l>=0&&o<r){let r=i;if(l>4){let o=s.pos-(l-4);for(;s.pos>o;)i=m(e,t,i)}t[--i]=r,t[--i]=a-e,t[--i]=n-e,t[--i]=o}else-3==l?d=o:-4==l&&(c=o);return i}let f=[],_=[];for(;s.pos>0;)p(e.start||0,e.bufferStart||0,f,_,-1,0);let v=null!==(t=e.length)&&void 0!==t?t:f.length?_[0]+f[0].length:0;return new Ja(l[e.topID],f.reverse(),_.reverse(),v)}(e)}}Ja.empty=new Ja(Da.none,[],[],0);class Qa{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Qa(this.buffer,this.index)}}class Na{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Da.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],o=this.set.types[t],n=o.name;if(/\W/.test(n)&&!o.isError&&(n=JSON.stringify(n)),i==(e+=4))return n;let a=[];for(;e<i;)a.push(this.childString(e)),e=this.buffer[e+3];return n+"("+a.join(",")+")"}findChild(e,t,i,o,n){let{buffer:a}=this,r=-1;for(let s=e;s!=t&&!(La(n,o,a[s+1],a[s+2])&&(r=s,i>0));s=a[s+3]);return r}slice(e,t,i){let o=this.buffer,n=new Uint16Array(t-e),a=0;for(let r=e,s=0;r<t;){n[s++]=o[r++],n[s++]=o[r++]-i;let t=n[s++]=o[r++]-i;n[s++]=o[r++]-e,a=Math.max(a,t)}return new Na(n,a,this.set)}}function La(e,t,i,o){switch(e){case-2:return i<t;case-1:return o>=t&&i<t;case 0:return i<t&&o>t;case 1:return i<=t&&o>t;case 2:return o>t;case 4:return!0}}function Fa(e,t,i,o){for(var n;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!o&&e instanceof Va&&e.index<0?null:e.parent;if(!t)return e;e=t}let a=o?0:Ha.IgnoreOverlays;if(o)for(let o=e,r=o.parent;r;o=r,r=o.parent)o instanceof Va&&o.index<0&&(null===(n=r.enter(t,i,a))||void 0===n?void 0:n.from)!=o.from&&(e=r);for(;;){let o=e.enter(t,i,a);if(!o)return e;e=o}}class qa{cursor(e=0){return new er(this,e)}getChild(e,t=null,i=null){let o=Ka(this,e,t,i);return o.length?o[0]:null}getChildren(e,t=null,i=null){return Ka(this,e,t,i)}resolve(e,t=0){return Fa(this,e,t,!1)}resolveInner(e,t=0){return Fa(this,e,t,!0)}matchContext(e){return Ga(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(i=t,t=e.prevSibling):t=e}return i}get node(){return this}get next(){return this.parent}}class Va extends qa{constructor(e,t,i,o){super(),this._tree=e,this.from=t,this.index=i,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,o,n=0){for(let a=this;;){for(let{children:r,positions:s}=a._tree,l=t>0?r.length:-1;e!=l;e+=t){let l=r[e],d=s[e]+a.from;if(La(o,i,d,d+l.length))if(l instanceof Na){if(n&Ha.ExcludeBuffers)continue;let r=l.findChild(0,l.buffer.length,t,i-d,o);if(r>-1)return new Ya(new Za(a,l,e,d),null,r)}else if(n&Ha.IncludeAnonymous||!l.type.isAnonymous||tr(l)){let r;if(!(n&Ha.IgnoreMounts)&&(r=ja.get(l))&&!r.overlay)return new Va(r.tree,d,e,a);let s=new Va(l,d,e,a);return n&Ha.IncludeAnonymous||!s.type.isAnonymous?s:s.nextChild(t<0?l.children.length-1:0,t,i,o)}}if(n&Ha.IncludeAnonymous||!a.type.isAnonymous)return null;if(e=a.index>=0?a.index+t:t<0?-1:a._parent._tree.children.length,a=a._parent,!a)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let o;if(!(i&Ha.IgnoreOverlays)&&(o=ja.get(this._tree))&&o.overlay){let i=e-this.from;for(let{from:e,to:n}of o.overlay)if((t>0?e<=i:e<i)&&(t<0?n>=i:n>i))return new Va(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ka(e,t,i,o){let n=e.cursor(),a=[];if(!n.firstChild())return a;if(null!=i)for(let e=!1;!e;)if(e=n.type.is(i),!n.nextSibling())return a;for(;;){if(null!=o&&n.type.is(o))return a;if(n.type.is(t)&&a.push(n.node),!n.nextSibling())return null==o?a:[]}}function Ga(e,t,i=t.length-1){for(let o=e;i>=0;o=o.parent){if(!o)return!1;if(!o.type.isAnonymous){if(t[i]&&t[i]!=o.name)return!1;i--}}return!0}class Za{constructor(e,t,i,o){this.parent=e,this.buffer=t,this.index=i,this.start=o}}class Ya extends qa{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:o}=this.context,n=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.context.start,i);return n<0?null:new Ya(this.context,this,n)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Ha.ExcludeBuffers)return null;let{buffer:o}=this.context,n=o.findChild(this.index+4,o.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return n<0?null:new Ya(this.context,this,n)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ya(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Ya(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,o=this.index+4,n=i.buffer[this.index+3];if(n>o){let a=i.buffer[this.index+1];e.push(i.slice(o,n,a)),t.push(0)}return new Ja(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Wa(e){if(!e.length)return null;let t=0,i=e[0];for(let o=1;o<e.length;o++){let n=e[o];(n.from>i.from||n.to<i.to)&&(i=n,t=o)}let o=i instanceof Va&&i.index<0?null:i.parent,n=e.slice();return o?n[t]=o:n.splice(t,1),new Xa(n,i)}class Xa{constructor(e,t){this.heads=e,this.node=t}get next(){return Wa(this.heads)}}class er{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Va)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:o}=this.buffer;return this.type=t||o.set.types[o.buffer[e]],this.from=i+o.buffer[e+1],this.to=i+o.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Va?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:o}=this.buffer,n=o.findChild(this.index+4,o.buffer[this.index+3],e,t-this.buffer.start,i);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&Ha.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Ha.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Ha.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:o}=this;if(o){if(e>0){if(this.index<o.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(o.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=o)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let o=t+e,n=e<0?-1:i._tree.children.length;o!=n;o+=e){let e=i._tree.children[o];if(this.mode&Ha.IncludeAnonymous||e instanceof Na||!e.type.isAnonymous||tr(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let o=this.index,n=this.stack.length;n>=0;){for(let a=e;a;a=a._parent)if(a.index==o){if(o==this.index)return a;t=a,i=n+1;break e}o=this.stack[--n]}for(let e=i;e<this.stack.length;e++)t=new Ya(this.buffer,t,this.stack[e]);return this.bufferNode=new Ya(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let o=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(o=!0)}for(;;){if(o&&t&&t(this),o=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,o=!0}}}matchContext(e){if(!this.buffer)return Ga(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let o=e.length-1,n=this.stack.length-1;o>=0;n--){if(n<0)return Ga(this._tree,e,o);let a=i[t.buffer[this.stack[n]]];if(!a.isAnonymous){if(e[o]&&e[o]!=a.name)return!1;o--}}return!0}}function tr(e){return e.children.some((e=>e instanceof Na||!e.type.isAnonymous||tr(e)))}const ir=new WeakMap;function or(e,t){if(!e.isAnonymous||t instanceof Na||t.type!=e)return 1;let i=ir.get(t);if(null==i){i=1;for(let o of t.children){if(o.type!=e||!(o instanceof Ja)){i=1;break}i+=or(e,o)}ir.set(t,i)}return i}function nr(e,t,i,o,n,a,r,s,l){let d=0;for(let i=o;i<n;i++)d+=or(e,t[i]);let c=Math.ceil(1.5*d/8),p=[],u=[];return function t(i,o,n,r,s){for(let d=n;d<r;){let n=d,h=o[d],g=or(e,i[d]);for(d++;d<r;d++){let t=or(e,i[d]);if(g+t>=c)break;g+=t}if(d==n+1){if(g>c){let e=i[n];t(e.children,e.positions,0,e.children.length,o[n]+s);continue}p.push(i[n])}else{let t=o[d-1]+i[d-1].length-h;p.push(nr(e,i,o,n,d,h,t,null,l))}u.push(h+s-a)}}(t,i,o,n,0),(s||l)(p,u,r)}class ar{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let o=this.map.get(e);o||this.map.set(e,o=new Map),o.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof Ya?this.setBuffer(e.context.buffer,e.index,t):e instanceof Va&&this.map.set(e.tree,t)}get(e){return e instanceof Ya?this.getBuffer(e.context.buffer,e.index):e instanceof Va?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class rr{constructor(e,t,i,o,n=!1,a=!1){this.from=e,this.to=t,this.tree=i,this.offset=o,this.open=(n?1:0)|(a?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],i=!1){let o=[new rr(0,e.length,e,0,!1,i)];for(let i of t)i.to>e.length&&o.push(i);return o}static applyChanges(e,t,i=128){if(!t.length)return e;let o=[],n=1,a=e.length?e[0]:null;for(let r=0,s=0,l=0;;r++){let d=r<t.length?t[r]:null,c=d?d.fromA:1e9;if(c-s>=i)for(;a&&a.from<c;){let t=a;if(s>=t.from||c<=t.to||l){let e=Math.max(t.from,s)-l,i=Math.min(t.to,c)-l;t=e>=i?null:new rr(e,i,t.tree,t.offset+l,r>0,!!d)}if(t&&o.push(t),a.to>c)break;a=n<e.length?e[n++]:null}if(!d)break;s=d.toA,l=d.toA-d.toB}return o}}class sr{startParse(e,t,i){return"string"==typeof e&&(e=new lr(e)),i=i?i.length?i.map((e=>new Ea(e.from,e.to))):[new Ea(0,0)]:[new Ea(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let o=this.startParse(e,t,i);for(;;){let e=o.advance();if(e)return e}}}class lr{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ia({perNode:!0});let dr=0;class cr{constructor(e,t,i,o){this.name=e,this.set=t,this.base=i,this.modified=o,this.id=dr++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i="string"==typeof e?e:"?";if(e instanceof cr&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let o=new cr(i,[],null,[]);if(o.set.push(o),t)for(let e of t.set)o.set.push(e);return o}static defineModifier(e){let t=new ur(e);return e=>e.modified.indexOf(t)>-1?e:ur.get(e.base||e,e.modified.concat(t).sort(((e,t)=>e.id-t.id)))}}let pr=0;class ur{constructor(e){this.name=e,this.instances=[],this.id=pr++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find((i=>{return i.base==e&&(o=t,n=i.modified,o.length==n.length&&o.every(((e,t)=>e==n[t])));var o,n}));if(i)return i;let o=[],n=new cr(e.name,o,e,t);for(let e of t)e.instances.push(n);let a=function(e){let t=[[]];for(let i=0;i<e.length;i++)for(let o=0,n=t.length;o<n;o++)t.push(t[o].concat(e[i]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of a)o.push(ur.get(t,e));return n}}function hr(e){let t=Object.create(null);for(let i in e){let o=e[i];Array.isArray(o)||(o=[o]);for(let e of i.split(" "))if(e){let i=[],n=2,a=e;for(let t=0;;){if("..."==a&&t>0&&t+3==e.length){n=1;break}let o=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!o)throw new RangeError("Invalid path: "+e);if(i.push("*"==o[0]?"":'"'==o[0][0]?JSON.parse(o[0]):o[0]),t+=o[0].length,t==e.length)break;let r=e[t++];if(t==e.length&&"!"==r){n=0;break}if("/"!=r)throw new RangeError("Invalid path: "+e);a=e.slice(t)}let r=i.length-1,s=i[r];if(!s)throw new RangeError("Invalid path: "+e);let l=new mr(o,n,r>0?i.slice(0,r):null);t[s]=l.sort(t[s])}}return gr.add(t)}const gr=new Ia;class mr{constructor(e,t,i,o){this.tags=e,this.mode=t,this.context=i,this.next=o}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function fr(e,t){let i=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)i[e.id]=t.class;else i[t.tag.id]=t.class;let{scope:o,all:n=null}=t||{};return{style:e=>{let t=n;for(let o of e)for(let e of o.set){let o=i[e.id];if(o){t=t?t+" "+o:o;break}}return t},scope:o}}mr.empty=new mr([],2,null);const _r=cr.define,vr=_r(),br=_r(),yr=_r(br),xr=_r(br),kr=_r(),wr=_r(kr),Sr=_r(kr),Or=_r(),Ar=_r(Or),Cr=_r(),$r=_r(),Tr=_r(),zr=_r(Tr),Pr=_r(),Er={comment:vr,lineComment:_r(vr),blockComment:_r(vr),docComment:_r(vr),name:br,variableName:_r(br),typeName:yr,tagName:_r(yr),propertyName:xr,attributeName:_r(xr),className:_r(br),labelName:_r(br),namespace:_r(br),macroName:_r(br),literal:kr,string:wr,docString:_r(wr),character:_r(wr),attributeValue:_r(wr),number:Sr,integer:_r(Sr),float:_r(Sr),bool:_r(kr),regexp:_r(kr),escape:_r(kr),color:_r(kr),url:_r(kr),keyword:Cr,self:_r(Cr),null:_r(Cr),atom:_r(Cr),unit:_r(Cr),modifier:_r(Cr),operatorKeyword:_r(Cr),controlKeyword:_r(Cr),definitionKeyword:_r(Cr),moduleKeyword:_r(Cr),operator:$r,derefOperator:_r($r),arithmeticOperator:_r($r),logicOperator:_r($r),bitwiseOperator:_r($r),compareOperator:_r($r),updateOperator:_r($r),definitionOperator:_r($r),typeOperator:_r($r),controlOperator:_r($r),punctuation:Tr,separator:_r(Tr),bracket:zr,angleBracket:_r(zr),squareBracket:_r(zr),paren:_r(zr),brace:_r(zr),content:Or,heading:Ar,heading1:_r(Ar),heading2:_r(Ar),heading3:_r(Ar),heading4:_r(Ar),heading5:_r(Ar),heading6:_r(Ar),contentSeparator:_r(Or),list:_r(Or),quote:_r(Or),emphasis:_r(Or),strong:_r(Or),link:_r(Or),monospace:_r(Or),strikethrough:_r(Or),inserted:_r(),deleted:_r(),changed:_r(),invalid:_r(),meta:Pr,documentMeta:_r(Pr),annotation:_r(Pr),processingInstruction:_r(Pr),definition:cr.defineModifier("definition"),constant:cr.defineModifier("constant"),function:cr.defineModifier("function"),standard:cr.defineModifier("standard"),local:cr.defineModifier("local"),special:cr.defineModifier("special")};for(let e in Er){let t=Er[e];t instanceof cr&&(t.name=e)}var Ir;fr([{tag:Er.link,class:"tok-link"},{tag:Er.heading,class:"tok-heading"},{tag:Er.emphasis,class:"tok-emphasis"},{tag:Er.strong,class:"tok-strong"},{tag:Er.keyword,class:"tok-keyword"},{tag:Er.atom,class:"tok-atom"},{tag:Er.bool,class:"tok-bool"},{tag:Er.url,class:"tok-url"},{tag:Er.labelName,class:"tok-labelName"},{tag:Er.inserted,class:"tok-inserted"},{tag:Er.deleted,class:"tok-deleted"},{tag:Er.literal,class:"tok-literal"},{tag:Er.string,class:"tok-string"},{tag:Er.number,class:"tok-number"},{tag:[Er.regexp,Er.escape,Er.special(Er.string)],class:"tok-string2"},{tag:Er.variableName,class:"tok-variableName"},{tag:Er.local(Er.variableName),class:"tok-variableName tok-local"},{tag:Er.definition(Er.variableName),class:"tok-variableName tok-definition"},{tag:Er.special(Er.variableName),class:"tok-variableName2"},{tag:Er.definition(Er.propertyName),class:"tok-propertyName tok-definition"},{tag:Er.typeName,class:"tok-typeName"},{tag:Er.namespace,class:"tok-namespace"},{tag:Er.className,class:"tok-className"},{tag:Er.macroName,class:"tok-macroName"},{tag:Er.propertyName,class:"tok-propertyName"},{tag:Er.operator,class:"tok-operator"},{tag:Er.comment,class:"tok-comment"},{tag:Er.meta,class:"tok-meta"},{tag:Er.invalid,class:"tok-invalid"},{tag:Er.punctuation,class:"tok-punctuation"}]);const jr=new Ia;function Mr(e){return L.define({combine:e?t=>t.concat(e):void 0})}const Dr=new Ia;class Br{constructor(e,t,i=[],o=""){this.data=e,this.name=o,Ce.prototype.hasOwnProperty("tree")||Object.defineProperty(Ce.prototype,"tree",{get(){return Hr(this)}}),this.parser=t,this.extension=[Gr.of(this),Ce.languageData.of(((e,t,i)=>{let o=Rr(e,t,i),n=o.type.prop(jr);if(!n)return[];let a=e.facet(n),r=o.type.prop(Dr);if(r){let n=o.resolve(t-o.from,i);for(let t of r)if(t.test(n,e)){let i=e.facet(t.facet);return"replace"==t.type?i:i.concat(a)}}return a}))].concat(i)}isActiveAt(e,t,i=-1){return Rr(e,t,i).type.prop(jr)==this.data}findRegions(e){let t=e.facet(Gr);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],o=(e,t)=>{if(e.prop(jr)==this.data)return void i.push({from:t,to:t+e.length});let n=e.prop(Ia.mounted);if(n){if(n.tree.prop(jr)==this.data){if(n.overlay)for(let e of n.overlay)i.push({from:e.from+t,to:e.to+t});else i.push({from:t,to:t+e.length});return}if(n.overlay){let e=i.length;if(o(n.tree,n.overlay[0].from+t),i.length>e)return}}for(let i=0;i<e.children.length;i++){let n=e.children[i];n instanceof Ja&&o(n,e.positions[i]+t)}};return o(Hr(e),0),i}get allowsNesting(){return!0}}function Rr(e,t,i){let o=e.facet(Gr),n=Hr(e).topNode;if(!o||o.allowsNesting)for(let e=n;e;e=e.enter(t,i,Ha.ExcludeBuffers))e.type.isTop&&(n=e);return n}Br.setState=fe.define();class Ur extends Br{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=Mr(e.languageData);return new Ur(t,e.parser.configure({props:[jr.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new Ur(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Hr(e){let t=e.field(Br.state,!1);return t?t.tree:Ja.empty}class Jr{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Qr=null;class Nr{constructor(e,t,i=[],o,n,a,r,s){this.parser=e,this.state=t,this.fragments=i,this.tree=o,this.treeLen=n,this.viewport=a,this.skipped=r,this.scheduleOn=s,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Nr(e,t,[],Ja.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Jr(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ja.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var i;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let o=this.parse.advance();if(o){if(this.fragments=this.withoutTempSkipped(rr.addTree(o,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=o,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(rr.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Qr;Qr=this;try{return e()}finally{Qr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Lr(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:o,treeLen:n,viewport:a,skipped:r}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,i,o,n)=>t.push({fromA:e,toA:i,fromB:o,toB:n}))),i=rr.applyChanges(i,t),o=Ja.empty,n=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){r=[];for(let t of this.skipped){let i=e.mapPos(t.from,1),o=e.mapPos(t.to,-1);i<o&&r.push({from:i,to:o})}}}return new Nr(this.parser,t,i,o,n,a,r,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:i,to:o}=this.skipped[t];i<e.to&&o>e.from&&(this.fragments=Lr(this.fragments,i,o),this.skipped.splice(t--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends sr{createParse(t,i,o){let n=o[0].from,a=o[o.length-1].to;return{parsedPos:n,advance(){let t=Qr;if(t){for(let e of o)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=a,new Ja(Da.none,[],[],a-n)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Qr}}function Lr(e,t,i){return rr.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class Fr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Fr(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Nr.create(e.facet(Gr).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Fr(i)}}Br.state=Y.define({create:Fr.init,update(e,t){for(let e of t.effects)if(e.is(Br.setState))return e.value;return t.startState.facet(Gr)!=t.state.facet(Gr)?Fr.init(t.state):e.apply(t)}});let qr=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(qr=e=>{let t=-1,i=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const Vr="undefined"!=typeof navigator&&(null===(Ir=navigator.scheduling)||void 0===Ir?void 0:Ir.isInputPending)?()=>navigator.scheduling.isInputPending():null,Kr=to.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Br.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Br.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=qr(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:o}}=this.view,n=i.field(Br.state);if(n.tree==n.context.tree&&n.context.isDone(o+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Vr?Math.max(25,e.timeRemaining()-5):1e9),r=n.context.treeLen<o&&i.doc.length>o+1e3,s=n.context.work((()=>Vr&&Vr()||Date.now()>a),o+(r?0:1e5));this.chunkBudget-=Date.now()-t,(s||this.chunkBudget<=0)&&(n.context.takeTree(),this.view.dispatch({effects:Br.setState.of(new Fr(n.context))})),this.chunkBudget>0&&(!s||r)&&this.scheduleWork(),this.checkAsyncSchedule(n.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Yi(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Gr=L.define({combine:e=>e.length?e[0]:null,enables:e=>[Br.state,Kr,aa.contentAttributes.compute([e],(t=>{let i=t.facet(e);return i&&i.name?{"data-language":i.name}:{}}))]});class Zr{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Yr=L.define(),Wr=L.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function Xr(e){let t=e.facet(Wr);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function es(e,t){let i="",o=e.tabSize,n=e.facet(Wr)[0];if("\t"==n){for(;t>=o;)i+="\t",t-=o;n=" "}for(let e=0;e<t;e++)i+=n;return i}function ts(e,t){e instanceof Ce&&(e=new is(e));for(let i of e.state.facet(Yr)){let o=i(e,t);if(void 0!==o)return o}let i=Hr(e.state);return i.length>=t?function(e,t,i){let o=t.resolveStack(i),n=t.resolveInner(i,-1).resolve(i,0).enterUnfinishedNodesBefore(i);if(n!=o.node){let e=[];for(let t=n;t&&!(t.from<o.node.from||t.to>o.node.to||t.from==o.node.from&&t.type==o.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)o={node:e[t],next:o}}return ns(o,e,i)}(e,i,t):null}class is{constructor(e,t={}){this.state=e,this.options=t,this.unit=Xr(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:o,simulateDoubleBreak:n}=this.options;return null!=o&&o>=i.from&&o<=i.to?n&&o==e?{text:"",from:e}:(t<0?o<e:o<=e)?{text:i.text.slice(o-i.from),from:o}:{text:i.text.slice(0,o-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:o}=this.lineAt(e,t);return i.slice(e-o,Math.min(i.length,e+100-o))}column(e,t=1){let{text:i,from:o}=this.lineAt(e,t),n=this.countColumn(i,e-o),a=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return a>-1&&(n+=a-this.countColumn(i,i.search(/\S|$/))),n}countColumn(e,t=e.length){return Le(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:o}=this.lineAt(e,t),n=this.options.overrideIndentation;if(n){let e=n(o);if(e>-1)return e}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const os=new Ia;function ns(e,t,i){for(let o=e;o;o=o.next){let e=as(o.node);if(e)return e(ss.create(t,i,o))}return 0}function as(e){let t=e.type.prop(os);if(t)return t;let i,o=e.firstChild;if(o&&(i=o.type.prop(Ia.closedBy))){let t=e.lastChild,o=t&&i.indexOf(t.name)>-1;return e=>cs(e,!0,1,void 0,o&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?rs:null}function rs(){return 0}class ss extends is{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new ss(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(ls(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return ns(this.context.next,this.base,this.pos)}}function ls(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function ds({closing:e,align:t=!0,units:i=1}){return o=>cs(o,t,i,e)}function cs(e,t,i,o,n){let a=e.textAfter,r=a.match(/^\s*/)[0].length,s=o&&a.slice(r,r+o.length)==o||n==e.pos+r,l=t?function(e){let t=e.node,i=t.childAfter(t.from),o=t.lastChild;if(!i)return null;let n=e.options.simulateBreak,a=e.state.doc.lineAt(i.from),r=null==n||n<=a.from?a.to:Math.min(a.to,n);for(let e=i.to;;){let n=t.childAfter(e);if(!n||n==o)return null;if(!n.type.isSkipped){if(n.from>=r)return null;let e=/^ */.exec(a.text.slice(i.to-a.from))[0].length;return{from:i.from,to:i.to+e}}e=n.to}}(e):null;return l?s?e.column(l.from):e.column(l.to):e.baseIndent+(s?0:e.unit*i)}function ps({except:e,units:t=1}={}){return i=>{let o=e&&e.test(i.textAfter);return i.baseIndent+(o?0:t*i.unit)}}const us=new Ia;Er.meta,Er.link,Er.heading,Er.emphasis,Er.strong,Er.strikethrough,Er.keyword,Er.atom,Er.bool,Er.url,Er.contentSeparator,Er.labelName,Er.literal,Er.inserted,Er.string,Er.deleted,Er.regexp,Er.escape,Er.string,Er.variableName,Er.variableName,Er.typeName,Er.namespace,Er.className,Er.variableName,Er.macroName,Er.propertyName,Er.comment,Er.invalid;const hs=new Ia;function gs(e,t,i){let o=e.prop(t<0?Ia.openedBy:Ia.closedBy);if(o)return o;if(1==e.name.length){let o=i.indexOf(e.name);if(o>-1&&o%2==(t<0?1:0))return[i[o+t]]}return null}function ms(e){let t=e.type.prop(hs);return t?t(e.node):e}function fs(e,t,i,o={}){let n=o.maxScanDistance||1e4,a=o.brackets||"()[]{}",r=Hr(e),s=r.resolveInner(t,i);for(let e=s;e;e=e.parent){let o=gs(e.type,i,a);if(o&&e.from<e.to){let n=ms(e);if(n&&(i>0?t>=n.from&&t<n.to:t>n.from&&t<=n.to))return _s(0,0,i,e,n,o,a)}}return function(e,t,i,o,n,a,r){let s=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=r.indexOf(s);if(l<0||l%2==0!=i>0)return null;let d={from:i<0?t-1:t,to:i>0?t+1:t},c=e.doc.iterRange(t,i>0?e.doc.length:0),p=0;for(let e=0;!c.next().done&&e<=a;){let a=c.value;i<0&&(e+=a.length);let s=t+e*i;for(let e=i>0?0:a.length-1,t=i>0?a.length:-1;e!=t;e+=i){let t=r.indexOf(a[e]);if(!(t<0||o.resolveInner(s+e,1).type!=n))if(t%2==0==i>0)p++;else{if(1==p)return{start:d,end:{from:s+e,to:s+e+1},matched:t>>1==l>>1};p--}}i>0&&(e+=a.length)}return c.done?{start:d,matched:!1}:null}(e,t,i,r,s.type,n,a)}function _s(e,t,i,o,n,a,r){let s=o.parent,l={from:n.from,to:n.to},d=0,c=null==s?void 0:s.cursor();if(c&&(i<0?c.childBefore(o.from):c.childAfter(o.to)))do{if(i<0?c.to<=o.from:c.from>=o.to){if(0==d&&a.indexOf(c.type.name)>-1&&c.from<c.to){let e=ms(c);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(gs(c.type,i,r))d++;else if(gs(c.type,-i,r)){if(0==d){let e=ms(c);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}d--}}}while(i<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function vs(e,t,i,o=0,n=0){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);let a=n;for(let n=o;n<t;n++)9==e.charCodeAt(n)?a+=i-a%i:a++;return a}class bs{constructor(e,t,i,o){this.string=e,this.tabSize=t,this.indentUnit=i,this.overrideIndent=o,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return 0==this.pos}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t,i=this.string.charAt(this.pos);if(t="string"==typeof e?i==e:i&&(e instanceof RegExp?e.test(i):e(i)),t)return++this.pos,i}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=vs(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return null!==(e=this.overrideIndent)&&void 0!==e?e:vs(this.string,null,this.tabSize)}match(e,t,i){if("string"==typeof e){let o=e=>i?e.toLowerCase():e;return o(this.string.substr(this.pos,e.length))==o(e)?(!1!==t&&(this.pos+=e.length),!0):null}{let i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}}current(){return this.string.slice(this.start,this.pos)}}function ys(e){if("object"!=typeof e)return e;let t={};for(let i in e){let o=e[i];t[i]=o instanceof Array?o.slice():o}return t}const xs=new WeakMap;class ks extends Br{constructor(e){let t,i=Mr(e.languageData),o={name:(n=e).name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||ys,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||Cs,mergeTokens:!1!==n.mergeTokens};var n;super(i,new class extends sr{createParse(e,i,o){return new Os(t,e,i,o)}},[],e.name),this.topNode=function(e,t){let i=Da.define({id:$s.length,name:"Document",props:[jr.add((()=>e)),os.add((()=>e=>t.getIndent(e)))],top:!0});return $s.push(i),i}(i,this),t=this,this.streamParser=o,this.stateAfter=new Ia({perNode:!0}),this.tokenTable=e.tokenTable?new Is(o.tokenTable):js}static define(e){return new ks(e)}getIndent(e){let t,{overrideIndentation:i}=e.options;i&&(t=xs.get(e.state),null!=t&&t<e.pos-1e4&&(t=void 0));let o,n,a=ws(this,e.node.tree,e.node.from,e.node.from,null!=t?t:e.pos);if(a?(n=a.state,o=a.pos+1):(n=this.streamParser.startState(e.unit),o=e.node.from),e.pos-o>1e4)return null;for(;o<e.pos;){let t=e.state.doc.lineAt(o),a=Math.min(e.pos,t.to);if(t.length){let o=i?i(t.from):-1,r=new bs(t.text,e.state.tabSize,e.unit,o<0?void 0:o);for(;r.pos<a-t.from;)As(this.streamParser.token,r,n)}else this.streamParser.blankLine(n,e.unit);if(a==e.pos)break;o=t.to+1}let r=e.lineAt(e.pos);return i&&null==t&&xs.set(e.state,r.from),this.streamParser.indent(n,/^\s*(.*)/.exec(r.text)[1],e)}get allowsNesting(){return!1}}function ws(e,t,i,o,n){let a=i>=o&&i+t.length<=n&&t.prop(e.stateAfter);if(a)return{state:e.streamParser.copyState(a),pos:i+t.length};for(let a=t.children.length-1;a>=0;a--){let r=t.children[a],s=i+t.positions[a],l=r instanceof Ja&&s<n&&ws(e,r,s,o,n);if(l)return l}return null}function Ss(e,t,i,o,n){if(n&&i<=0&&o>=t.length)return t;n||0!=i||t.type!=e.topNode||(n=!0);for(let a=t.children.length-1;a>=0;a--){let r,s=t.positions[a],l=t.children[a];if(s<o&&l instanceof Ja){if(!(r=Ss(e,l,i-s,o-s,n)))break;return n?new Ja(t.type,t.children.slice(0,a).concat(r),t.positions.slice(0,a+1),s+r.length):r}}return null}class Os{constructor(e,t,i,o){this.lang=e,this.input=t,this.fragments=i,this.ranges=o,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=o[o.length-1].to;let n=Nr.get(),a=o[0].from,{state:r,tree:s}=function(e,t,i,o,n){for(let n of t){let t,a=n.from+(n.openStart?25:0),r=n.to-(n.openEnd?25:0),s=a<=i&&r>i&&ws(e,n.tree,0-n.offset,i,r);if(s&&s.pos<=o&&(t=Ss(e,n.tree,i+n.offset,s.pos+n.offset,!1)))return{state:s.state,tree:t}}return{state:e.streamParser.startState(n?Xr(n):4),tree:Ja.empty}}(e,i,a,this.to,null==n?void 0:n.state);this.state=r,this.parsedPos=this.chunkStart=a+s.length;for(let e=0;e<s.children.length;e++)this.chunks.push(s.children[e]),this.chunkPos.push(s.positions[e]);n&&this.parsedPos<n.viewport.from-1e5&&o.some((e=>e.from<=n.viewport.from&&e.to>=n.viewport.from))&&(this.state=this.lang.streamParser.startState(Xr(n.state)),n.skipUntilInView(this.parsedPos,n.viewport.from),this.parsedPos=n.viewport.from),this.moveRangeIndex()}advance(){let e=Nr.get(),t=null==this.stoppedAt?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(t,this.chunkStart+512);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)"\n"==t&&(t="");else{let e=t.indexOf("\n");e>-1&&(t=t.slice(0,e))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),i=e+t.length;for(let e=this.rangeIndex;;){let o=this.ranges[e].to;if(o>=i)break;if(t=t.slice(0,o-(i-t.length)),e++,e==this.ranges.length)break;let n=this.ranges[e].from,a=this.lineAfter(n);t+=a,i=n+a.length}return{line:t,end:i}}skipGapsTo(e,t,i){for(;;){let o=this.ranges[this.rangeIndex].to,n=e+t;if(i>0?o>n:o>=n)break;t+=this.ranges[++this.rangeIndex].from-o}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,i,o){let n=4;if(this.ranges.length>1){t+=o=this.skipGapsTo(t,o,1);let e=this.chunk.length;i+=o=this.skipGapsTo(i,o,-1),n+=this.chunk.length-e}let a=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&4==n&&a>=0&&this.chunk[a]==e&&this.chunk[a+2]==t?this.chunk[a+2]=i:this.chunk.push(e,t,i,n),o}parseLine(e){let{line:t,end:i}=this.nextLine(),o=0,{streamParser:n}=this.lang,a=new bs(t,e?e.state.tabSize:4,e?Xr(e.state):2);if(a.eol())n.blankLine(this.state,a.indentUnit);else for(;!a.eol();){let e=As(n.token,a,this.state);if(e&&(o=this.emitToken(this.lang.tokenTable.resolve(e),this.parsedPos+a.start,this.parsedPos+a.pos,o)),a.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Ja.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Ts,topID:0,maxBufferLength:512,reused:this.chunkReused});e=new Ja(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Ja(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function As(e,t,i){t.start=t.pos;for(let o=0;o<10;o++){let o=e(t,i);if(t.pos>t.start)return o}throw new Error("Stream parser failed to advance stream.")}const Cs=Object.create(null),$s=[Da.none],Ts=new Ba($s),zs=[],Ps=Object.create(null),Es=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Es[e]=Ds(Cs,t);class Is{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),Es)}resolve(e){return e?this.table[e]||(this.table[e]=Ds(this.extra,e)):0}}const js=new Is(Cs);function Ms(e,t){zs.indexOf(e)>-1||(zs.push(e),console.warn(t))}function Ds(e,t){let i=[];for(let o of t.split(" ")){let t=[];for(let i of o.split(".")){let o=e[i]||Er[i];o?"function"==typeof o?t.length?t=t.map(o):Ms(i,`Modifier ${i} used at start of tag`):t.length?Ms(i,`Tag ${i} used as modifier`):t=Array.isArray(o)?o:[o]:Ms(i,`Unknown highlighting tag ${i}`)}for(let e of t)i.push(e)}if(!i.length)return 0;let o=t.replace(/ /g,"_"),n=o+" "+i.map((e=>e.id)),a=Ps[n];if(a)return a.id;let r=Ps[n]=Da.define({id:$s.length,name:o,props:[hr({[o]:i})]});return $s.push(r),r.id}function Bs(e,t){return({state:i,dispatch:o})=>{if(i.readOnly)return!1;let n=e(t,i);return!!n&&(o(i.update(n)),!0)}}_i.RTL,_i.LTR;const Rs=Bs(Ls,0),Us=Bs(Ns,0),Hs=Bs(((e,t)=>Ns(e,t,function(e){let t=[];for(let i of e.selection.ranges){let o=e.doc.lineAt(i.from),n=i.to<=o.to?o:e.doc.lineAt(i.to);n.from>o.from&&n.from==i.to&&(n=i.to==o.to+1?o:e.doc.lineAt(i.to-1));let a=t.length-1;a>=0&&t[a].to>o.from?t[a].to=n.to:t.push({from:o.from+/^\s*/.exec(o.text)[0].length,to:n.to})}return t}(t))),0);function Js(e,t){let i=e.languageDataAt("commentTokens",t,1);return i.length?i[0]:{}}const Qs=50;function Ns(e,t,i=t.selection.ranges){let o=i.map((e=>Js(t,e.from).block));if(!o.every((e=>e)))return null;let n=i.map(((e,i)=>function(e,{open:t,close:i},o,n){let a,r,s=e.sliceDoc(o-Qs,o),l=e.sliceDoc(n,n+Qs),d=/\s*$/.exec(s)[0].length,c=/^\s*/.exec(l)[0].length,p=s.length-d;if(s.slice(p-t.length,p)==t&&l.slice(c,c+i.length)==i)return{open:{pos:o-d,margin:d&&1},close:{pos:n+c,margin:c&&1}};n-o<=2*Qs?a=r=e.sliceDoc(o,n):(a=e.sliceDoc(o,o+Qs),r=e.sliceDoc(n-Qs,n));let u=/^\s*/.exec(a)[0].length,h=/\s*$/.exec(r)[0].length,g=r.length-h-i.length;return a.slice(u,u+t.length)==t&&r.slice(g,g+i.length)==i?{open:{pos:o+u+t.length,margin:/\s/.test(a.charAt(u+t.length))?1:0},close:{pos:n-h-i.length,margin:/\s/.test(r.charAt(g-1))?1:0}}:null}(t,o[i],e.from,e.to)));if(2!=e&&!n.every((e=>e)))return{changes:t.changes(i.map(((e,t)=>n[t]?[]:[{from:e.from,insert:o[t].open+" "},{from:e.to,insert:" "+o[t].close}])))};if(1!=e&&n.some((e=>e))){let e=[];for(let t,i=0;i<n.length;i++)if(t=n[i]){let n=o[i],{open:a,close:r}=t;e.push({from:a.pos-n.open.length,to:a.pos+a.margin},{from:r.pos-r.margin,to:r.pos+n.close.length})}return{changes:e}}return null}function Ls(e,t,i=t.selection.ranges){let o=[],n=-1;for(let{from:e,to:a}of i){let i=o.length,r=1e9,s=Js(t,e).line;if(s){for(let i=e;i<=a;){let l=t.doc.lineAt(i);if(l.from>n&&(e==a||a>l.from)){n=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,i=l.text.slice(e,e+s.length)==s?e:-1;e<l.text.length&&e<r&&(r=e),o.push({line:l,comment:i,token:s,indent:e,empty:t,single:!1})}i=l.to+1}if(r<1e9)for(let e=i;e<o.length;e++)o[e].indent<o[e].line.text.length&&(o[e].indent=r);o.length==i+1&&(o[i].single=!0)}}if(2!=e&&o.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:i,indent:n,empty:a,single:r}of o)!r&&a||e.push({from:t.from+n,insert:i+" "});let i=t.changes(e);return{changes:i,selection:t.selection.map(i,1)}}if(1!=e&&o.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:i,token:n}of o)if(i>=0){let o=t.from+i,a=o+n.length;" "==t.text[a-t.from]&&a++,e.push({from:o,to:a})}return{changes:e}}return null}const Fs=he.define(),qs=L.define();class Vs{constructor(e,t,i,o,n){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=o,this.selectionsAfter=n}setSelAfter(e){return new Vs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(i=this.startSelection)||void 0===i?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Vs(e.changes&&I.fromJSON(e.changes),[],e.mapped&&E.fromJSON(e.mapped),e.startSelection&&J.fromJSON(e.startSelection),e.selectionsAfter.map(J.fromJSON))}static fromTransaction(e,t){let i=Zs;for(let t of e.startState.facet(qs)){let o=t(e);o.length&&(i=i.concat(o))}return!i.length&&e.changes.empty?null:new Vs(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Zs)}static selection(e){return new Vs(void 0,Zs,void 0,void 0,e)}}function Ks(e,t,i,o){let n=t+1>i+20?t-i-1:0,a=e.slice(n,t);return a.push(o),a}function Gs(e,t){return e.length?t.length?e.concat(t):e:t}const Zs=[];function Ys(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function Ws(e,t){if(!e.length)return e;let i=e.length,o=Zs;for(;i;){let n=Xs(e[i-1],t,o);if(n.changes&&!n.changes.empty||n.effects.length){let t=e.slice(0,i);return t[i-1]=n,t}t=n.mapped,i--,o=n.selectionsAfter}return o.length?[Vs.selection(o)]:Zs}function Xs(e,t,i){let o=Gs(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):Zs,i);if(!e.changes)return Vs.selection(o);let n=e.changes.map(t),a=t.mapDesc(e.changes,!0),r=e.mapped?e.mapped.composeDesc(a):a;return new Vs(n,fe.mapEffects(e.effects,t),r,e.startSelection.map(a),o)}const el=/^(input\.type|delete)($|\.)/;class tl{constructor(e,t,i=0,o=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=o}isolate(){return this.prevTime?new tl(this.done,this.undone):this}addChanges(e,t,i,o,n){let a=this.done,r=a[a.length-1];return a=r&&r.changes&&!r.changes.empty&&e.changes&&(!i||el.test(i))&&(!r.selectionsAfter.length&&t-this.prevTime<o.newGroupDelay&&o.joinToEvent(n,function(e,t){let i=[],o=!1;return e.iterChangedRanges(((e,t)=>i.push(e,t))),t.iterChangedRanges(((e,t,n,a)=>{for(let e=0;e<i.length;){let t=i[e++],r=i[e++];a>=t&&n<=r&&(o=!0)}})),o}(r.changes,e.changes))||"input.type.compose"==i)?Ks(a,a.length-1,o.minDepth,new Vs(e.changes.compose(r.changes),Gs(fe.mapEffects(e.effects,r.changes),r.effects),r.mapped,r.startSelection,Zs)):Ks(a,a.length,o.minDepth,e),new tl(a,Zs,t,i)}addSelection(e,t,i,o){let n=this.done.length?this.done[this.done.length-1].selectionsAfter:Zs;return n.length>0&&t-this.prevTime<o&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(a=n[n.length-1],r=e,a.ranges.length==r.ranges.length&&0===a.ranges.filter(((e,t)=>e.empty!=r.ranges[t].empty)).length)?this:new tl(function(e,t){if(e.length){let i=e[e.length-1],o=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-200));return o.length&&o[o.length-1].eq(t)?e:(o.push(t),Ks(e,e.length-1,1e9,i.setSelAfter(o)))}return[Vs.selection([t])]}(this.done,e),this.undone,t,i);var a,r}addMapping(e){return new tl(Ws(this.done,e),Ws(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let o=0==e?this.done:this.undone;if(0==o.length)return null;let n=o[o.length-1],a=n.selectionsAfter[0]||t.selection;if(i&&n.selectionsAfter.length)return t.update({selection:n.selectionsAfter[n.selectionsAfter.length-1],annotations:Fs.of({side:e,rest:Ys(o),selection:a}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(n.changes){let i=1==o.length?Zs:o.slice(0,o.length-1);return n.mapped&&(i=Ws(i,n.mapped)),t.update({changes:n.changes,selection:n.startSelection,effects:n.effects,annotations:Fs.of({side:e,rest:i,selection:a}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}function il(e,t){return J.create(e.ranges.map(t),e.mainIndex)}function ol(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function nl({state:e,dispatch:t},i){let o=il(e.selection,i);return!o.eq(e.selection,!0)&&(t(ol(e,o)),!0)}function al(e,t){return J.cursor(t?e.to:e.from)}function rl(e,t){return nl(e,(i=>i.empty?e.moveByChar(i,t):al(i,t)))}function sl(e){return e.textDirectionAt(e.state.selection.main.head)==_i.LTR}tl.empty=new tl(Zs,Zs);const ll=e=>rl(e,!sl(e)),dl=e=>rl(e,sl(e));function cl(e,t){return nl(e,(i=>i.empty?e.moveByGroup(i,t):al(i,t)))}function pl(e,t,i){if(t.type.prop(i))return!0;let o=t.to-t.from;return o&&(o>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function ul(e,t,i){let o,n,a=Hr(e).resolveInner(t.head),r=i?Ia.closedBy:Ia.openedBy;for(let o=t.head;;){let t=i?a.childAfter(o):a.childBefore(o);if(!t)break;pl(e,t,r)?a=t:o=i?t.to:t.from}return n=a.type.prop(r)&&(o=i?fs(e,a.from,1):fs(e,a.to,-1))&&o.matched?i?o.end.to:o.end.from:i?a.to:a.from,J.cursor(n,i?-1:1)}function hl(e,t){return nl(e,(i=>{if(!i.empty)return al(i,t);let o=e.moveVertically(i,t);return o.head!=i.head?o:e.moveToLineBoundary(i,t)}))}"undefined"!=typeof Intl&&Intl.Segmenter;const gl=e=>hl(e,!1),ml=e=>hl(e,!0);function fl(e){let t,i=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,o=0,n=0;if(i){for(let t of e.state.facet(aa.scrollMargins)){let i=t(e);(null==i?void 0:i.top)&&(o=Math.max(null==i?void 0:i.top,o)),(null==i?void 0:i.bottom)&&(n=Math.max(null==i?void 0:i.bottom,n))}t=e.scrollDOM.clientHeight-o-n}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:n,selfScroll:i,height:Math.max(e.defaultLineHeight,t-5)}}function _l(e,t){let i,o=fl(e),{state:n}=e,a=il(n.selection,(i=>i.empty?e.moveVertically(i,t,o.height):al(i,t)));if(a.eq(n.selection))return!1;if(o.selfScroll){let t=e.coordsAtPos(n.selection.main.head),r=e.scrollDOM.getBoundingClientRect(),s=r.top+o.marginTop,l=r.bottom-o.marginBottom;t&&t.top>s&&t.bottom<l&&(i=aa.scrollIntoView(a.main.head,{y:"start",yMargin:t.top-s}))}return e.dispatch(ol(n,a),{effects:i}),!0}const vl=e=>_l(e,!1),bl=e=>_l(e,!0);function yl(e,t,i){let o=e.lineBlockAt(t.head),n=e.moveToLineBoundary(t,i);if(n.head==t.head&&n.head!=(i?o.to:o.from)&&(n=e.moveToLineBoundary(t,i,!1)),!i&&n.head==o.from&&o.length){let i=/^\s*/.exec(e.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;i&&t.head!=o.from+i&&(n=J.cursor(o.from+i))}return n}function xl(e,t){let i=il(e.state.selection,(e=>{let i=t(e);return J.range(e.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)}));return!i.eq(e.state.selection)&&(e.dispatch(ol(e.state,i)),!0)}function kl(e,t){return xl(e,(i=>e.moveByChar(i,t)))}const wl=e=>kl(e,!sl(e)),Sl=e=>kl(e,sl(e));function Ol(e,t){return xl(e,(i=>e.moveByGroup(i,t)))}function Al(e,t){return xl(e,(i=>e.moveVertically(i,t)))}const Cl=e=>Al(e,!1),$l=e=>Al(e,!0);function Tl(e,t){return xl(e,(i=>e.moveVertically(i,t,fl(e).height)))}const zl=e=>Tl(e,!1),Pl=e=>Tl(e,!0),El=({state:e,dispatch:t})=>(t(ol(e,{anchor:0})),!0),Il=({state:e,dispatch:t})=>(t(ol(e,{anchor:e.doc.length})),!0),jl=({state:e,dispatch:t})=>(t(ol(e,{anchor:e.selection.main.anchor,head:0})),!0),Ml=({state:e,dispatch:t})=>(t(ol(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Dl(e,t){let{state:i}=e,o=i.selection,n=i.selection.ranges.slice();for(let o of i.selection.ranges){let a=i.doc.lineAt(o.head);if(t?a.to<e.state.doc.length:a.from>0)for(let i=o;;){let o=e.moveVertically(i,t);if(o.head<a.from||o.head>a.to){n.some((e=>e.head==o.head))||n.push(o);break}if(o.head==i.head)break;i=o}}return n.length!=o.ranges.length&&(e.dispatch(ol(i,J.create(n,n.length-1))),!0)}function Bl(e,t){if(e.state.readOnly)return!1;let i="delete.selection",{state:o}=e,n=o.changeByRange((o=>{let{from:n,to:a}=o;if(n==a){let r=t(o);r<n?(i="delete.backward",r=Rl(e,r,!1)):r>n&&(i="delete.forward",r=Rl(e,r,!0)),n=Math.min(n,r),a=Math.max(a,r)}else n=Rl(e,n,!1),a=Rl(e,a,!0);return n==a?{range:o}:{changes:{from:n,to:a},range:J.cursor(n,n<o.head?-1:1)}}));return!n.changes.empty&&(e.dispatch(o.update(n,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?aa.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function Rl(e,t,i){if(e instanceof aa)for(let o of e.state.facet(aa.atomicRanges).map((t=>t(e))))o.between(t,t,((e,o)=>{e<t&&o>t&&(t=i?o:e)}));return t}const Ul=(e,t,i)=>Bl(e,(o=>{let n,a,r=o.from,{state:s}=e,l=s.doc.lineAt(r);if(i&&!t&&r>l.from&&r<l.from+200&&!/[^ \t]/.test(n=l.text.slice(0,r-l.from))){if("\t"==n[n.length-1])return r-1;let e=Le(n,s.tabSize)%Xr(s)||Xr(s);for(let t=0;t<e&&" "==n[n.length-1-t];t++)r--;a=r}else a=A(l.text,r-l.from,t,t)+l.from,a==r&&l.number!=(t?s.doc.lines:1)?a+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(a-l.from,r-l.from))&&(a=A(l.text,a-l.from,!1,!1)+l.from);return a})),Hl=e=>Ul(e,!1,!0),Jl=e=>Ul(e,!0,!1),Ql=(e,t)=>Bl(e,(i=>{let o=i.head,{state:n}=e,a=n.doc.lineAt(o),r=n.charCategorizer(o);for(let e=null;;){if(o==(t?a.to:a.from)){o==i.head&&a.number!=(t?n.doc.lines:1)&&(o+=t?1:-1);break}let s=A(a.text,o-a.from,t)+a.from,l=a.text.slice(Math.min(o,s)-a.from,Math.max(o,s)-a.from),d=r(l);if(null!=e&&d!=e)break;" "==l&&o==i.head||(e=d),o=s}return o})),Nl=e=>Ql(e,!1);function Ll(e){let t=[],i=-1;for(let o of e.selection.ranges){let n=e.doc.lineAt(o.from),a=e.doc.lineAt(o.to);if(o.empty||o.to!=a.from||(a=e.doc.lineAt(o.to-1)),i>=n.number){let e=t[t.length-1];e.to=a.to,e.ranges.push(o)}else t.push({from:n.from,to:a.to,ranges:[o]});i=a.number+1}return t}function Fl(e,t,i){if(e.readOnly)return!1;let o=[],n=[];for(let t of Ll(e)){if(i?t.to==e.doc.length:0==t.from)continue;let a=e.doc.lineAt(i?t.to+1:t.from-1),r=a.length+1;if(i){o.push({from:t.to,to:a.to},{from:t.from,insert:a.text+e.lineBreak});for(let i of t.ranges)n.push(J.range(Math.min(e.doc.length,i.anchor+r),Math.min(e.doc.length,i.head+r)))}else{o.push({from:a.from,to:t.from},{from:t.to,insert:e.lineBreak+a.text});for(let e of t.ranges)n.push(J.range(e.anchor-r,e.head-r))}}return!!o.length&&(t(e.update({changes:o,scrollIntoView:!0,selection:J.create(n,e.selection.mainIndex),userEvent:"move.line"})),!0)}function ql(e,t,i){if(e.readOnly)return!1;let o=[];for(let t of Ll(e))i?o.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):o.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:o,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Vl=Kl(!1);function Kl(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let o=t.changeByRange((i=>{let{from:o,to:n}=i,a=t.doc.lineAt(o),r=!e&&o==n&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i,o=Hr(e).resolveInner(t),n=o.childBefore(t),a=o.childAfter(t);return n&&a&&n.to<=t&&a.from>=t&&(i=n.type.prop(Ia.closedBy))&&i.indexOf(a.name)>-1&&e.doc.lineAt(n.to).from==e.doc.lineAt(a.from).from&&!/\S/.test(e.sliceDoc(n.to,a.from))?{from:n.to,to:a.from}:null}(t,o);e&&(o=n=(n<=a.to?a:t.doc.lineAt(n)).to);let s=new is(t,{simulateBreak:o,simulateDoubleBreak:!!r}),l=ts(s,o);for(null==l&&(l=Le(/^\s*/.exec(t.doc.lineAt(o).text)[0],t.tabSize));n<a.to&&/\s/.test(a.text[n-a.from]);)n++;r?({from:o,to:n}=r):o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let d=["",es(t,l)];return r&&d.push(es(t,s.lineIndent(a.from,-1))),{changes:{from:o,to:n,insert:f.of(d)},range:J.cursor(o+1+d[1].length)}}));return i(t.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}}function Gl(e,t){let i=-1;return e.changeByRange((o=>{let n=[];for(let a=o.from;a<=o.to;){let r=e.doc.lineAt(a);r.number>i&&(o.empty||o.to>r.from)&&(t(r,n,o),i=r.number),a=r.to+1}let a=e.changes(n);return{changes:n,range:J.range(a.mapPos(o.anchor,1),a.mapPos(o.head,1))}}))}const Zl=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Gl(e,((t,i)=>{i.push({from:t.from,insert:e.facet(Wr)})})),{userEvent:"input.indent"})),!0),Yl=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Gl(e,((t,i)=>{let o=/^\s*/.exec(t.text)[0];if(!o)return;let n=Le(o,e.tabSize),a=0,r=es(e,Math.max(0,n-Xr(e)));for(;a<o.length&&a<r.length&&o.charCodeAt(a)==r.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+o.length,insert:r.slice(a)})})),{userEvent:"delete.dedent"})),!0),Wl=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>nl(e,(t=>ul(e.state,t,!sl(e)))),shift:e=>xl(e,(t=>ul(e.state,t,!sl(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>nl(e,(t=>ul(e.state,t,sl(e)))),shift:e=>xl(e,(t=>ul(e.state,t,sl(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Fl(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>ql(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Fl(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>ql(e,t,!0)},{key:"Mod-Alt-ArrowUp",run:e=>Dl(e,!1)},{key:"Mod-Alt-ArrowDown",run:e=>Dl(e,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let i=e.selection,o=null;return i.ranges.length>1?o=J.create([i.main]):i.main.empty||(o=J.create([J.cursor(i.main.head)])),!!o&&(t(ol(e,o)),!0)}},{key:"Mod-Enter",run:Kl(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let i=Ll(e).map((({from:t,to:i})=>J.range(t,Math.min(i+1,e.doc.length))));return t(e.update({selection:J.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let i=il(e.selection,(t=>{let i=Hr(e),o=i.resolveStack(t.from,1);if(t.empty){let e=i.resolveStack(t.from,-1);e.node.from>=o.node.from&&e.node.to<=o.node.to&&(o=e)}for(let e=o;e;e=e.next){let{node:i}=e;if((i.from<t.from&&i.to>=t.to||i.to>t.to&&i.from<=t.from)&&e.next)return J.range(i.to,i.from)}return t}));return!i.eq(e.selection)&&(t(ol(e,i)),!0)},preventDefault:!0},{key:"Mod-[",run:Yl},{key:"Mod-]",run:Zl},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),o=new is(e,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),n=Gl(e,((t,n,a)=>{let r=ts(o,t.from);if(null==r)return;/\S/.test(t.text)||(r=0);let s=/^\s*/.exec(t.text)[0],l=es(e,r);(s!=l||a.from<t.from+s.length)&&(i[t.from]=r,n.push({from:t.from,to:t.from+s.length,insert:l}))}));return n.changes.empty||t(e.update(n,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(Ll(t).map((({from:e,to:i})=>(e>0?e--:i<t.doc.length&&i++,{from:e,to:i})))),o=il(t.selection,(t=>{let i;if(e.lineWrapping){let o=e.lineBlockAt(t.head),n=e.coordsAtPos(t.head,t.assoc||1);n&&(i=o.bottom+e.documentTop-n.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,i)})).map(i);return e.dispatch({changes:i,selection:o,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,i){let o=!1,n=il(e.selection,(t=>{let n=fs(e,t.head,-1)||fs(e,t.head,1)||t.head>0&&fs(e,t.head-1,1)||t.head<e.doc.length&&fs(e,t.head+1,-1);if(!n||!n.end)return t;o=!0;let a=n.start.from==t.head?n.end.to:n.end.from;return i?J.range(t.anchor,a):J.cursor(a)}));return!!o&&(t(ol(e,n)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,i=t.doc.lineAt(t.selection.main.from),o=Js(e.state,i.from);return o.line?Rs(e):!!o.block&&Hs(e)}},{key:"Alt-A",run:Us},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:ll,shift:wl,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>cl(e,!sl(e)),shift:e=>Ol(e,!sl(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>nl(e,(t=>yl(e,t,!sl(e)))),shift:e=>xl(e,(t=>yl(e,t,!sl(e)))),preventDefault:!0},{key:"ArrowRight",run:dl,shift:Sl,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>cl(e,sl(e)),shift:e=>Ol(e,sl(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>nl(e,(t=>yl(e,t,sl(e)))),shift:e=>xl(e,(t=>yl(e,t,sl(e)))),preventDefault:!0},{key:"ArrowUp",run:gl,shift:Cl,preventDefault:!0},{mac:"Cmd-ArrowUp",run:El,shift:jl},{mac:"Ctrl-ArrowUp",run:vl,shift:zl},{key:"ArrowDown",run:ml,shift:$l,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Il,shift:Ml},{mac:"Ctrl-ArrowDown",run:bl,shift:Pl},{key:"PageUp",run:vl,shift:zl},{key:"PageDown",run:bl,shift:Pl},{key:"Home",run:e=>nl(e,(t=>yl(e,t,!1))),shift:e=>xl(e,(t=>yl(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:El,shift:jl},{key:"End",run:e=>nl(e,(t=>yl(e,t,!0))),shift:e=>xl(e,(t=>yl(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:Il,shift:Ml},{key:"Enter",run:Vl,shift:Vl},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Hl,shift:Hl,preventDefault:!0},{key:"Delete",run:Jl,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Nl,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Ql(e,!0),preventDefault:!0},{mac:"Mod-Backspace",run:e=>Bl(e,(t=>{let i=e.moveToLineBoundary(t,!1).head;return t.head>i?i:Math.max(0,t.head-1)})),preventDefault:!0},{mac:"Mod-Delete",run:e=>Bl(e,(t=>{let i=e.moveToLineBoundary(t,!0).head;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)})),preventDefault:!0}].concat([{key:"Ctrl-b",run:ll,shift:wl,preventDefault:!0},{key:"Ctrl-f",run:dl,shift:Sl},{key:"Ctrl-p",run:gl,shift:Cl},{key:"Ctrl-n",run:ml,shift:$l},{key:"Ctrl-a",run:e=>nl(e,(t=>J.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>xl(e,(t=>J.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>nl(e,(t=>J.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>xl(e,(t=>J.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Jl},{key:"Ctrl-h",run:Hl},{key:"Ctrl-k",run:e=>Bl(e,(t=>{let i=e.lineBlockAt(t.head).to;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)}))},{key:"Ctrl-Alt-h",run:Nl},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:f.of(["",""])},range:J.cursor(e.from)})));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,o=e.doc.lineAt(i),n=i==o.from?i-1:A(o.text,i-o.from,!1)+o.from,a=i==o.to?i+1:A(o.text,i-o.from,!0)+o.from;return{changes:{from:n,to:a,insert:e.doc.slice(i,a).append(e.doc.slice(n,i))},range:J.cursor(a)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:bl}].map((e=>({mac:e.key,run:e.run,shift:e.shift}))))),Xl={key:"Tab",run:Zl,shift:Yl};class ed{constructor(e,t,i,o){this.state=e,this.pos=t,this.explicit=i,this.view=o,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Hr(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),o=t.text.slice(i-t.from,this.pos-t.from),n=o.search(ad(e,!1));return n<0?null:{from:i+n,to:this.pos,text:o.slice(n)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,i){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function td(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function id(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[i,o]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),i=Object.create(null);for(let{label:o}of e){t[o[0]]=!0;for(let e=1;e<o.length;e++)i[o[e]]=!0}let o=td(t)+td(i)+"*$";return[new RegExp("^"+o),new RegExp(o)]}(t);return e=>{let n=e.matchBefore(o);return n||e.explicit?{from:n?n.from:e.pos,options:t,validFor:i}:null}}class od{constructor(e,t,i,o){this.completion=e,this.source=t,this.match=i,this.score=o}}function nd(e){return e.selection.main.from}function ad(e,t){var i;let{source:o}=e,n=t&&"^"!=o[0],a="$"!=o[o.length-1];return n||a?new RegExp(`${n?"^":""}(?:${o})${a?"$":""}`,null!==(i=e.flags)&&void 0!==i?i:e.ignoreCase?"i":""):e}const rd=he.define();function sd(e,t,i,o){let{main:n}=e.selection,a=i-n.from,r=o-n.from;return{...e.changeByRange((s=>{if(s!=n&&i!=o&&e.sliceDoc(s.from+a,s.from+r)!=e.sliceDoc(i,o))return{range:s};let l=e.toText(t);return{changes:{from:s.from+a,to:o==n.from?s.to:s.from+r,insert:l},range:J.cursor(s.from+a+l.length)}})),scrollIntoView:!0,userEvent:"input.complete"}}const ld=new WeakMap;function dd(e){if(!Array.isArray(e))return e;let t=ld.get(e);return t||ld.set(e,t=id(e)),t}const cd=fe.define(),pd=fe.define();class ud{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=C(e,t),o=T(i);this.chars.push(i);let n=e.slice(t,t+o),a=n.toUpperCase();this.folded.push(C(a==n?n.toLowerCase():a,0)),t+=o}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:o,precise:n,byWord:a}=this;if(1==t.length){let o=C(e,0),n=T(o),a=n==e.length?0:-100;if(o==t[0]);else{if(o!=i[0])return null;a+=-200}return this.ret(a,[0,n])}let r=e.indexOf(this.pattern);if(0==r)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let s=t.length,l=0;if(r<0){for(let n=0,a=Math.min(e.length,200);n<a&&l<s;){let a=C(e,n);a!=t[l]&&a!=i[l]||(o[l++]=n),n+=T(a)}if(l<s)return null}let d=0,c=0,p=!1,u=0,h=-1,g=-1,m=/[a-z]/.test(e),f=!0;for(let o=0,l=Math.min(e.length,200),_=0;o<l&&c<s;){let l=C(e,o);r<0&&(d<s&&l==t[d]&&(n[d++]=o),u<s&&(l==t[u]||l==i[u]?(0==u&&(h=o),g=o+1,u++):u=0));let v,b=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(v=$(l))!=v.toLowerCase()?1:v!=v.toUpperCase()?2:0;(!o||1==b&&m||0==_&&0!=b)&&(t[c]==l||i[c]==l&&(p=!0)?a[c++]=o:a.length&&(f=!1)),_=b,o+=T(l)}return c==s&&0==a[0]&&f?this.result((p?-200:0)-100,a,e):u==s&&0==h?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):r>-1?this.ret(-700-e.length,[r,r+this.pattern.length]):u==s?this.ret(-900-e.length,[h,g]):c==s?this.result((p?-200:0)-100-700+(f?0:-1100),a,e):2==t.length?null:this.result((o[0]?-700:0)-200-1100,o,e)}result(e,t,i){let o=[],n=0;for(let e of t){let t=e+(this.astral?T(C(i,e)):1);n&&o[n-1]==e?o[n-1]=t:(o[n++]=e,o[n++]=t)}return this.ret(e-i.length,o)}}class hd{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==i?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const gd=L.define({combine:e=>function(e,t,i={}){let o={};for(let t of e)for(let e of Object.keys(t)){let n=t[e],a=o[e];if(void 0===a)o[e]=n;else if(a===n||void 0===n);else{if(!Object.hasOwnProperty.call(i,e))throw new Error("Config merge conflict for field "+e);o[e]=i[e](a,n)}}for(let e in t)void 0===o[e]&&(o[e]=t[e]);return o}(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:fd,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>md(e(i),t(i)),optionClass:(e,t)=>i=>md(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function md(e,t){return e?t?e+" "+t:e:t}function fd(e,t,i,o,n,a){let r,s,l=e.textDirection==_i.RTL,d=l,c=!1,p="top",u=t.left-n.left,h=n.right-t.right,g=o.right-o.left,m=o.bottom-o.top;if(d&&u<Math.min(g,h)?d=!1:!d&&h<Math.min(g,u)&&(d=!0),g<=(d?u:h))r=Math.max(n.top,Math.min(i.top,n.bottom-m))-t.top,s=Math.min(400,d?u:h);else{c=!0,s=Math.min(400,(l?t.right:n.right-t.left)-30);let e=n.bottom-t.bottom;e>=m||e>t.top?r=i.bottom-t.top:(p="bottom",r=t.bottom-i.top)}return{style:`${p}: ${r/((t.bottom-t.top)/a.offsetHeight)}px; max-width: ${s/((t.right-t.left)/a.offsetWidth)}px`,class:"cm-completionInfo-"+(c?l?"left-narrow":"right-narrow":d?"left":"right")}}function _d(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let o=Math.floor((e-t)/i);return{from:e-(o+1)*i,to:e-o*i}}class vd{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let o=e.state.field(t),{options:n,selected:a}=o.open,r=e.state.facet(gd);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,i,o){let n=document.createElement("span");n.className="cm-completionLabel";let a=e.displayLabel||e.label,r=0;for(let e=0;e<o.length;){let t=o[e++],i=o[e++];t>r&&n.appendChild(document.createTextNode(a.slice(r,t)));let s=n.appendChild(document.createElement("span"));s.appendChild(document.createTextNode(a.slice(t,i))),s.className="cm-completionMatchedText",r=i}return r<a.length&&n.appendChild(document.createTextNode(a.slice(r))),n},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(r),this.optionClass=r.optionClass,this.tooltipClass=r.tooltipClass,this.range=_d(n.length,a,r.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(i=>{let{options:o}=e.state.field(t).open;for(let t,n=i.target;n&&n!=this.dom;n=n.parentNode)if("LI"==n.nodeName&&(t=/-(\d+)$/.exec(n.id))&&+t[1]<o.length)return this.applyCompletion(e,o[+t[1]]),void i.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let i=e.state.field(this.stateField,!1);i&&i.tooltip&&e.state.facet(gd).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:pd.of(null)})})),this.showOptions(n,o.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(e){var t;let i=e.state.field(this.stateField),o=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=o){let{options:n,selected:a,disabled:r}=i.open;o.open&&o.open.options==n||(this.range=_d(n.length,a,e.state.facet(gd).maxRenderedOptions),this.showOptions(n,i.id)),this.updateSel(),r!=(null===(t=o.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!r)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=_d(t.options.length,t.selected,this.view.state.facet(gd).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:o}=i;if(!o)return;let n="string"==typeof o?document.createTextNode(o):o(i);if(!n)return;"then"in n?n.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,i)})).catch((e=>Yi(this.view.state,e,"completion info"))):this.addInfoPane(n,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",null!=e.nodeType)i.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:o}=e;i.appendChild(t),this.infoDestroy=o||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,o=this.range.from;i;i=i.nextSibling,o++)"LI"==i.nodeName&&i.id?o==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected"):o--;return t&&function(e,t){let i=e.getBoundingClientRect(),o=t.getBoundingClientRect(),n=i.height/e.offsetHeight;o.top<i.top?e.scrollTop-=(i.top-o.top)/n:o.bottom>i.bottom&&(e.scrollTop+=(o.bottom-i.bottom)/n)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),o=e.getBoundingClientRect(),n=this.space;if(!n){let e=this.dom.ownerDocument.documentElement;n={left:0,top:0,right:e.clientWidth,bottom:e.clientHeight}}return o.top>Math.min(n.bottom,t.bottom)-10||o.bottom<Math.max(n.top,t.top)+10?null:this.view.state.facet(gd).positionInfo(this.view,t,o,i,n,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const o=document.createElement("ul");o.id=t,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions")),o.addEventListener("mousedown",(e=>{e.target==o&&e.preventDefault()}));let n=null;for(let a=i.from;a<i.to;a++){let{completion:r,match:s}=e[a],{section:l}=r;if(l){let e="string"==typeof l?l:l.name;e!=n&&(a>i.from||0==i.from)&&(n=e,"string"!=typeof l&&l.header?o.appendChild(l.header(l)):o.appendChild(document.createElement("completion-section")).textContent=e)}const d=o.appendChild(document.createElement("li"));d.id=t+"-"+a,d.setAttribute("role","option");let c=this.optionClass(r);c&&(d.className=c);for(let e of this.optionContent){let t=e(r,this.view.state,this.view,s);t&&d.appendChild(t)}}return i.from&&o.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function bd(e,t){return i=>new vd(i,e,t)}function yd(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class xd{constructor(e,t,i,o,n,a){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=o,this.selected=n,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new xd(this.options,Od(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,o,n,a){if(o&&!a&&e.some((e=>e.isPending)))return o.setDisabled();let r=function(e,t){let i=[],o=null,n=null,a=e=>{i.push(e);let{section:t}=e.completion;if(t){o||(o=[]);let e="string"==typeof t?t:t.name;o.some((t=>t.name==e))||o.push("string"==typeof t?{name:e}:t)}},r=t.facet(gd);for(let o of e)if(o.hasResult()){let e=o.result.getMatch;if(!1===o.result.filter)for(let t of o.result.options)a(new od(t,o.source,e?e(t):[],1e9-i.length));else{let i,s=t.sliceDoc(o.from,o.to),l=r.filterStrict?new hd(s):new ud(s);for(let t of o.result.options)if(i=l.match(t.label)){let r=t.displayLabel?e?e(t,i.matched):[]:i.matched,s=i.score+(t.boost||0);if(a(new od(t,o.source,r,s)),"object"==typeof t.section&&"dynamic"===t.section.rank){let{name:e}=t.section;n||(n=Object.create(null)),n[e]=Math.max(s,n[e]||-1e9)}}}}if(o){let e=Object.create(null),t=0,a=(e,t)=>("dynamic"===e.rank&&"dynamic"===t.rank?n[t.name]-n[e.name]:0)||("number"==typeof e.rank?e.rank:1e9)-("number"==typeof t.rank?t.rank:1e9)||(e.name<t.name?-1:1);for(let i of o.sort(a))t-=1e5,e[i.name]=t;for(let t of i){let{section:i}=t.completion;i&&(t.score+=e["string"==typeof i?i:i.name])}}let s=[],l=null,d=r.compareCompletions;for(let e of i.sort(((e,t)=>t.score-e.score||d(e.completion,t.completion)))){let t=e.completion;!l||l.label!=t.label||l.detail!=t.detail||null!=l.type&&null!=t.type&&l.type!=t.type||l.apply!=t.apply||l.boost!=t.boost?s.push(e):yd(e.completion)>yd(l)&&(s[s.length-1]=e),l=e.completion}return s}(e,t);if(!r.length)return o&&e.some((e=>e.isPending))?o.setDisabled():null;let s=t.facet(gd).selectOnOpen?0:-1;if(o&&o.selected!=s&&-1!=o.selected){let e=o.options[o.selected].completion;for(let t=0;t<r.length;t++)if(r[t].completion==e){s=t;break}}return new xd(r,Od(i,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:jd,above:n.aboveCursor},o?o.timestamp:Date.now(),s,!1)}map(e){return new xd(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new xd(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class kd{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new kd(Ad,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(gd),o=(i.override||t.languageDataAt("autocomplete",nd(t)).map(dd)).map((t=>(this.active.find((e=>e.source==t))||new $d(t,this.active.some((e=>0!=e.state))?1:0)).update(e,i)));o.length==this.active.length&&o.every(((e,t)=>e==this.active[t]))&&(o=this.active);let n=this.open,a=e.effects.some((e=>e.is(zd)));n&&e.docChanged&&(n=n.map(e.changes)),e.selection||o.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let i=0,o=0;;){for(;i<e.length&&!e[i].hasResult();)i++;for(;o<t.length&&!t[o].hasResult();)o++;let n=i==e.length,a=o==t.length;if(n||a)return n==a;if(e[i++].result!=t[o++].result)return!1}}(o,this.active)||a?n=xd.build(o,t,this.id,n,i,a):n&&n.disabled&&!o.some((e=>e.isPending))&&(n=null),!n&&o.every((e=>!e.isPending))&&o.some((e=>e.hasResult()))&&(o=o.map((e=>e.hasResult()?new $d(e.source,0):e)));for(let t of e.effects)t.is(Pd)&&(n=n&&n.setSelected(t.value,this.id));return o==this.active&&n==this.open?this:new kd(o,this.id,n)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?wd:Sd}}const wd={"aria-autocomplete":"list"},Sd={};function Od(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}const Ad=[];function Cd(e,t){if(e.isUserEvent("input.complete")){let i=e.annotation(rd);if(i&&t.activateOnCompletion(i))return 12}let i=e.isUserEvent("input.type");return i&&t.activateOnTyping?5:i?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class $d{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let i=Cd(e,t),o=this;(8&i||16&i&&this.touches(e))&&(o=new $d(o.source,0)),4&i&&0==o.state&&(o=new $d(this.source,1)),o=o.updateFor(e,i);for(let t of e.effects)if(t.is(cd))o=new $d(o.source,1,t.value);else if(t.is(pd))o=new $d(o.source,0);else if(t.is(zd))for(let e of t.value)e.source==o.source&&(o=e);return o}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(nd(e.state))}}class Td extends $d{constructor(e,t,i,o,n,a){super(e,3,t),this.limit=i,this.result=o,this.from=n,this.to=a}hasResult(){return!0}updateFor(e,t){var i;if(!(3&t))return this.map(e.changes);let o=this.result;o.map&&!e.changes.empty&&(o=o.map(o,e.changes));let n=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),r=nd(e.state);if(r>a||!o||2&t&&(nd(e.startState)==this.from||r<this.limit))return new $d(this.source,4&t?1:0);let s=e.changes.mapPos(this.limit);return function(e,t,i,o){if(!e)return!1;let n=t.sliceDoc(i,o);return"function"==typeof e?e(n,i,o,t):ad(e,!0).test(n)}(o.validFor,e.state,n,a)?new Td(this.source,this.explicit,s,o,n,a):o.update&&(o=o.update(o,n,a,new ed(e.state,r,!1)))?new Td(this.source,this.explicit,s,o,o.from,null!==(i=o.to)&&void 0!==i?i:nd(e.state)):new $d(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Td(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new $d(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}const zd=fe.define({map:(e,t)=>e.map((e=>e.map(t)))}),Pd=fe.define(),Ed=Y.define({create:()=>kd.start(),update:(e,t)=>e.update(t),provide:e=>[Ca.from(e,(e=>e.tooltip)),aa.contentAttributes.from(e,(e=>e.attrs))]});function Id(e,t){const i=t.completion.apply||t.completion.label;let o=e.state.field(Ed).active.find((e=>e.source==t.source));return o instanceof Td&&("string"==typeof i?e.dispatch({...sd(e.state,i,o.from,o.to),annotations:rd.of(t.completion)}):i(e,t.completion,o.from,o.to),!0)}const jd=bd(Ed,Id);function Md(e,t="option"){return i=>{let o=i.state.field(Ed,!1);if(!o||!o.open||o.open.disabled||Date.now()-o.open.timestamp<i.state.facet(gd).interactionDelay)return!1;let n,a=1;"page"==t&&(n=$a(i,o.open.tooltip))&&(a=Math.max(2,Math.floor(n.dom.offsetHeight/n.dom.querySelector("li").offsetHeight)-1));let{length:r}=o.open.options,s=o.open.selected>-1?o.open.selected+a*(e?1:-1):e?0:r-1;return s<0?s="page"==t?0:r-1:s>=r&&(s="page"==t?r-1:0),i.dispatch({effects:Pd.of(s)}),!0}}const Dd=e=>!!e.state.field(Ed,!1)&&(e.dispatch({effects:cd.of(!0)}),!0);class Bd{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Rd=to.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(Ed).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(Ed),i=e.state.facet(gd);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Ed)==t)return;let o=e.transactions.some((e=>{let t=Cd(e,i);return 8&t||(e.selection||e.docChanged)&&!(3&t)}));for(let t=0;t<this.running.length;t++){let i=this.running[t];if(o||i.context.abortOnDocChange&&e.docChanged||i.updates.length+e.transactions.length>50&&Date.now()-i.time>1e3){for(let e of i.context.abortListeners)try{e()}catch(e){Yi(this.view.state,e)}i.context.abortListeners=null,this.running.splice(t--,1)}else i.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some((e=>e.effects.some((e=>e.is(cd)))))&&(this.pendingStart=!0);let n=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=t.active.some((e=>e.isPending&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),n):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(Ed);for(let e of t.active)e.isPending&&!this.running.some((t=>t.active.source==e.source))&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(gd).updateSyncTime))}startQuery(e){let{state:t}=this.view,i=nd(t),o=new ed(t,i,e.explicit,this.view),n=new Bd(e,o);this.running.push(n),Promise.resolve(e.source(o)).then((e=>{n.context.aborted||(n.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:pd.of(null)}),Yi(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(gd).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(gd),o=this.view.state.field(Ed);for(let n=0;n<this.running.length;n++){let a=this.running[n];if(void 0===a.done)continue;if(this.running.splice(n--,1),a.done){let o=nd(a.updates.length?a.updates[0].startState:this.view.state),n=Math.min(o,a.done.from+(a.active.explicit?0:1)),r=new Td(a.active.source,a.active.explicit,n,a.done,a.done.from,null!==(e=a.done.to)&&void 0!==e?e:o);for(let e of a.updates)r=r.update(e,i);if(r.hasResult()){t.push(r);continue}}let r=o.active.find((e=>e.source==a.active.source));if(r&&r.isPending)if(null==a.done){let e=new $d(a.active.source,0);for(let t of a.updates)e=e.update(t,i);e.isPending||t.push(e)}else this.startQuery(r)}(t.length||o.open&&o.open.disabled)&&this.view.dispatch({effects:zd.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(Ed,!1);if(t&&t.tooltip&&this.view.state.facet(gd).closeOnBlur){let i=t.open&&$a(this.view,t.open.tooltip);i&&i.dom.contains(e.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:pd.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:cd.of(!1)})),20),this.composing=0}}}),Ud="object"==typeof navigator&&/Win/.test(navigator.platform),Hd=X.highest(aa.domEventHandlers({keydown(e,t){let i=t.state.field(Ed,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||e.key.length>1||e.ctrlKey&&(!Ud||!e.altKey)||e.metaKey)return!1;let o=i.open.options[i.open.selected],n=i.active.find((e=>e.source==o.source)),a=o.completion.commitCharacters||n.result.commitCharacters;return a&&a.indexOf(e.key)>-1&&Id(t,o),!1}})),Jd=aa.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Qd{constructor(e,t,i,o){this.field=e,this.line=t,this.from=i,this.to=o}}class Nd{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,P.TrackDel),i=e.mapPos(this.to,1,P.TrackDel);return null==t||null==i?null:new Nd(this.field,t,i)}}class Ld{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],o=[t],n=e.doc.lineAt(t),a=/^\s*/.exec(n.text)[0];for(let n of this.lines){if(i.length){let i=a,r=/^\t*/.exec(n)[0].length;for(let t=0;t<r;t++)i+=e.facet(Wr);o.push(t+i.length-r),n=i+n.slice(r)}i.push(n),t+=n.length+1}let r=this.fieldPositions.map((e=>new Nd(e.field,o[e.line]+e.from,o[e.line]+e.to)));return{text:i,ranges:r}}static parse(e){let t,i=[],o=[],n=[];for(let a of e.split(/\r\n?|\n/)){for(;t=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(a);){let e=t[1]?+t[1]:null,r=t[2]||t[3]||"",s=-1,l=r.replace(/\\[{}]/g,(e=>e[1]));for(let t=0;t<i.length;t++)(null!=e?i[t].seq==e:l&&i[t].name==l)&&(s=t);if(s<0){let t=0;for(;t<i.length&&(null==e||null!=i[t].seq&&i[t].seq<e);)t++;i.splice(t,0,{seq:e,name:l}),s=t;for(let e of n)e.field>=s&&e.field++}for(let e of n)if(e.line==o.length&&e.from>t.index){let i=t[2]?3+(t[1]||"").length:2;e.from-=i,e.to-=i}n.push(new Qd(s,o.length,t.index,t.index+l.length)),a=a.slice(0,t.index)+r+a.slice(t.index+t[0].length)}a=a.replace(/\\([{}])/g,((e,t,i)=>{for(let e of n)e.line==o.length&&e.from>i&&(e.from--,e.to--);return t})),o.push(a)}return new Ld(o,n)}}let Fd=ai.widget({widget:new class extends oi{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),qd=ai.mark({class:"cm-snippetField"});class Vd{constructor(e,t){this.ranges=e,this.active=t,this.deco=ai.set(e.map((e=>(e.from==e.to?Fd:qd).range(e.from,e.to))),!0)}map(e){let t=[];for(let i of this.ranges){let o=i.map(e);if(!o)return null;t.push(o)}return new Vd(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const Kd=fe.define({map:(e,t)=>e&&e.map(t)}),Gd=fe.define(),Zd=Y.define({create:()=>null,update(e,t){for(let i of t.effects){if(i.is(Kd))return i.value;if(i.is(Gd)&&e)return new Vd(e.ranges,i.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>aa.decorations.from(e,(e=>e?e.deco:ai.none))});function Yd(e,t){return J.create(e.filter((e=>e.field==t)).map((e=>J.range(e.from,e.to))))}function Wd(e){let t=Ld.parse(e);return(e,i,o,n)=>{let{text:a,ranges:r}=t.instantiate(e.state,o),{main:s}=e.state.selection,l={changes:{from:o,to:n==s.from?s.to:n,insert:f.of(a)},scrollIntoView:!0,annotations:i?[rd.of(i),_e.userEvent.of("input.complete")]:void 0};if(r.length&&(l.selection=Yd(r,0)),r.some((e=>e.field>0))){let t=new Vd(r,0),i=l.effects=[Kd.of(t)];void 0===e.state.field(Zd,!1)&&i.push(fe.appendConfig.of([Zd,ic,nc,Jd]))}e.dispatch(e.state.update(l))}}function Xd(e){return({state:t,dispatch:i})=>{let o=t.field(Zd,!1);if(!o||e<0&&0==o.active)return!1;let n=o.active+e,a=e>0&&!o.ranges.some((t=>t.field==n+e));return i(t.update({selection:Yd(o.ranges,n),effects:Kd.of(a?null:new Vd(o.ranges,n)),scrollIntoView:!0})),!0}}const ec=[{key:"Tab",run:Xd(1),shift:Xd(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(Zd,!1)&&(t(e.update({effects:Kd.of(null)})),!0)}],tc=L.define({combine:e=>e.length?e[0]:ec}),ic=X.highest(ha.compute([tc],(e=>e.facet(tc))));function oc(e,t){return{...t,apply:Wd(e)}}const nc=aa.domEventHandlers({mousedown(e,t){let i,o=t.state.field(Zd,!1);if(!o||null==(i=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let n=o.ranges.find((e=>e.from<=i&&e.to>=i));return!(!n||n.field==o.active||(t.dispatch({selection:Yd(o.ranges,n.field),effects:Kd.of(o.ranges.some((e=>e.field>n.field))?new Vd(o.ranges,n.field):null),scrollIntoView:!0}),0))}}),ac=new class extends $e{};function rc(e={}){return[Hd,Ed,gd.of(e),Rd,lc,Jd]}ac.startSide=1,ac.endSide=-1,"object"==typeof navigator&&navigator.userAgent;const sc=[{key:"Ctrl-Space",run:Dd},{mac:"Alt-`",run:Dd},{mac:"Alt-i",run:Dd},{key:"Escape",run:e=>{let t=e.state.field(Ed,!1);return!(!t||!t.active.some((e=>0!=e.state))||(e.dispatch({effects:pd.of(null)}),0))}},{key:"ArrowDown",run:Md(!0)},{key:"ArrowUp",run:Md(!1)},{key:"PageDown",run:Md(!0,"page")},{key:"PageUp",run:Md(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(Ed,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(gd).interactionDelay)&&Id(e,t.open.options[t.open.selected])}}],lc=X.highest(ha.computeN([gd],(e=>e.facet(gd).defaultKeymap?[sc]:[])));class dc{constructor(e,t,i,o,n,a,r,s,l,d=0,c){this.p=e,this.stack=t,this.state=i,this.reducePos=o,this.pos=n,this.score=a,this.buffer=r,this.bufferBase=s,this.curContext=l,this.lookAhead=d,this.parent=c}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let o=e.parser.context;return new dc(e,[],t,i,i,0,[],0,o?new cc(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,o=65535&e,{parser:n}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let r=n.dynamicPrecedence(o);if(r&&(this.score+=r),0==i)return this.pushState(n.getGoto(this.state,o,!0),this.reducePos),o<n.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,a?8:4,!0),void this.reduceContext(o,this.reducePos);let s=this.stack.length-3*(i-1)-(262144&e?6:0),l=s?this.stack[s-2]:this.p.ranges[0].from,d=this.reducePos-l;d>=2e3&&!(null===(t=this.p.parser.nodeSet.types[o])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=d));let c=s?this.stack[s-1]:0,p=this.bufferBase+this.buffer.length-c;if(o<n.minRepeatTerm||131072&e){let e=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,l,e,p+4,!0)}if(262144&e)this.state=this.stack[s];else{let e=this.stack[s-3];this.state=n.getGoto(e,o,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(o,l)}storeNode(e,t,i,o=4,n=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,o=this.buffer.length;if(0==o&&e.parent&&(o=e.bufferBase-e.parent.bufferBase,e=e.parent),o>0&&0==e.buffer[o-4]&&e.buffer[o-1]>-1){if(t==i)return;if(e.buffer[o-2]>=t)return void(e.buffer[o-2]=i)}}if(n&&this.pos!=i){let n=this.buffer.length;if(n>0&&0!=this.buffer[n-4]){let e=!1;for(let t=n;t>0&&this.buffer[t-2]>i;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;n>0&&this.buffer[n-2]>i;)this.buffer[n]=this.buffer[n-4],this.buffer[n+1]=this.buffer[n-3],this.buffer[n+2]=this.buffer[n-2],this.buffer[n+3]=this.buffer[n-1],n-=4,o>4&&(o-=4)}this.buffer[n]=e,this.buffer[n+1]=t,this.buffer[n+2]=i,this.buffer[n+3]=o}else this.buffer.push(e,t,i,o)}shift(e,t,i,o){if(131072&e)this.pushState(65535&e,this.pos);else if(262144&e)this.pos=o,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,o,4);else{let n=e,{parser:a}=this.p;(o>this.pos||t<=a.maxNode)&&(this.pos=o,a.stateFlag(n,1)||(this.reducePos=o)),this.pushState(n,i),this.shiftContext(t,i),t<=a.maxNode&&this.buffer.push(t,i,o,4)}}apply(e,t,i,o){65536&e?this.reduce(e):this.shift(e,t,i,o)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let o=this.pos;this.reducePos=this.pos=o+e.length,this.pushState(t,o),this.buffer.push(i,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),o=e.bufferBase+t;for(;e&&o==e.bufferBase;)e=e.parent;return new dc(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,o,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new pc(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==i)return!1;if(!(65536&i))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let o,n=0;n<t.length;n+=2)(o=t[n+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[n],o);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let o=t[e+1];i.some(((e,t)=>1&t&&e==o))||i.push(t[e],o)}t=i}let i=[];for(let e=0;e<t.length&&i.length<4;e+=2){let o=t[e+1];if(o==this.state)continue;let n=this.split();n.pushState(o,this.pos),n.storeNode(0,n.pos,n.pos,4,!0),n.shiftContext(t[e],this.pos),n.reducePos=this.pos,n.score-=200,i.push(n)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(65536&t))return!1;if(!e.validAction(this.state,t)){let i=t>>19,o=65535&t,n=this.stack.length-3*i;if(n<0||e.getGoto(this.stack[n],o,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(o,n)=>{if(!t.includes(o))return t.push(o),e.allActions(o,(t=>{if(393216&t);else if(65536&t){let i=(t>>19)-n;if(i>1){let o=65535&t,n=this.stack.length-3*i;if(n>=0&&e.getGoto(this.stack[n],o,!1)>=0)return i<<19|65536|o}}else{let e=i(t,n+1);if(null!=e)return e}}))};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new cc(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class cc{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class pc{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let o=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=o}}class uc{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new uc(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new uc(this.stack,this.pos,this.index)}}function hc(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let o=0,n=0;o<e.length;){let a=0;for(;;){let t=e.charCodeAt(o++),i=!1;if(126==t){a=65535;break}t>=92&&t--,t>=34&&t--;let n=t-32;if(n>=46&&(n-=46,i=!0),a+=n,i)break;a*=46}i?i[n++]=a:i=new t(a)}return i}class gc{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const mc=new gc;class fc{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=mc,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,o=this.rangeIndex,n=this.pos+e;for(;n<i.from;){if(!o)return null;let e=this.ranges[--o];n-=i.from-e.to,i=e}for(;t<0?n>i.to:n>=i.to;){if(o==this.ranges.length-1)return null;let e=this.ranges[++o];n+=e.from-i.to,i=e}return n}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,i,o=this.chunkOff+e;if(o>=0&&o<this.chunk.length)t=this.pos+e,i=this.chunk.charCodeAt(o);else{let o=this.resolveOffset(e,1);if(null==o)return-1;if(t=o,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,o=this.range;for(;o.to<=t;)o=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-t)),i=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),i}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=mc,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let o of this.ranges){if(o.from>=t)break;o.to>e&&(i+=this.input.read(Math.max(o.from,e),Math.min(o.to,t)))}return i}}class _c{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;yc(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}_c.prototype.contextual=_c.prototype.fallback=_c.prototype.extend=!1;class vc{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data="string"==typeof e?hc(e):e}token(e,t){let i=e.pos,o=0;for(;;){let i=e.next<0,n=e.resolveOffset(1,1);if(yc(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(i||o++,null==n)break;e.reset(n,e.token)}o&&(e.reset(i,e.token),e.acceptToken(this.elseToken,o))}}vc.prototype.contextual=_c.prototype.fallback=_c.prototype.extend=!1;class bc{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function yc(e,t,i,o,n,a){let r=0,s=1<<o,{dialect:l}=i.p.parser;e:for(;s&e[r];){let i=e[r+1];for(let o=r+3;o<i;o+=2)if((e[o+1]&s)>0){let i=e[o];if(l.allows(i)&&(-1==t.token.value||t.token.value==i||kc(i,t.token.value,n,a))){t.acceptToken(i);break}}let o=t.next,d=0,c=e[r+2];if(!(t.next<0&&c>d&&65535==e[i+3*c-3])){for(;d<c;){let n=d+c>>1,a=i+n+(n<<1),s=e[a],l=e[a+1]||65536;if(o<s)c=n;else{if(!(o>=l)){r=e[a+2],t.advance();continue e}d=n+1}}break}r=e[i+3*c-1]}}function xc(e,t,i){for(let o,n=t;65535!=(o=e[n]);n++)if(o==i)return n-t;return-1}function kc(e,t,i,o){let n=xc(i,o,t);return n<0||xc(i,o,e)<n}const wc="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let Sc=null;function Oc(e,t,i){let o=e.cursor(Ha.IncludeAnonymous);for(o.moveTo(t);;)if(!(i<0?o.childBefore(t):o.childAfter(t)))for(;;){if((i<0?o.to<t:o.from>t)&&!o.type.isError)return i<0?Math.max(0,Math.min(o.to-1,t-25)):Math.min(e.length,Math.max(o.from+1,t+25));if(i<0?o.prevSibling():o.nextSibling())break;if(!o.parent())return i<0?0:e.length}}class Ac{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Oc(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Oc(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],o=this.index[t];if(o==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let n=i.children[o],a=this.start[t]+i.positions[o];if(a>e)return this.nextStart=a,null;if(n instanceof Ja){if(a==e){if(a<this.safeFrom)return null;let e=a+n.length;if(e<=this.safeTo){let t=n.prop(Ia.lookAhead);if(!t||e+t<this.fragment.to)return n}}this.index[t]++,a+n.length>=Math.max(this.safeFrom,e)&&(this.trees.push(n),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+n.length}}}class Cc{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new gc))}getActions(e){let t=0,i=null,{parser:o}=e.p,{tokenizers:n}=o,a=o.stateSlot(e.state,3),r=e.curContext?e.curContext.hash:0,s=0;for(let o=0;o<n.length;o++){if(!(1<<o&a))continue;let l=n[o],d=this.tokens[o];if((!i||l.fallback)&&((l.contextual||d.start!=e.pos||d.mask!=a||d.context!=r)&&(this.updateCachedToken(d,l,e),d.mask=a,d.context=r),d.lookAhead>d.end+25&&(s=Math.max(d.lookAhead,s)),0!=d.value)){let o=t;if(d.extended>-1&&(t=this.addActions(e,d.extended,d.end,t)),t=this.addActions(e,d.value,d.end,t),!l.extend&&(i=d,t>o))break}}for(;this.actions.length>t;)this.actions.pop();return s&&e.setLookAhead(s),i||e.pos!=this.stream.end||(i=new gc,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new gc,{pos:i,p:o}=e;return t.start=i,t.end=Math.min(i+1,o.stream.end),t.value=i==o.stream.end?o.parser.eofTerm:0,t}updateCachedToken(e,t,i){let o=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(o,e),i),e.value>-1){let{parser:t}=i.p;for(let o=0;o<t.specialized.length;o++)if(t.specialized[o]==e.value){let n=t.specializers[o](this.stream.read(e.start,e.end),i);if(n>=0&&i.p.parser.dialect.allows(n>>1)){1&n?e.extended=n>>1:e.value=n>>1;break}}}else e.value=0,e.end=this.stream.clipPos(o+1)}putAction(e,t,i,o){for(let t=0;t<o;t+=3)if(this.actions[t]==e)return o;return this.actions[o++]=e,this.actions[o++]=t,this.actions[o++]=i,o}addActions(e,t,i,o){let{state:n}=e,{parser:a}=e.p,{data:r}=a;for(let e=0;e<2;e++)for(let s=a.stateSlot(n,e?2:1);;s+=3){if(65535==r[s]){if(1!=r[s+1]){0==o&&2==r[s+1]&&(o=this.putAction(Ic(r,s+2),t,i,o));break}s=Ic(r,s+2)}r[s]==t&&(o=this.putAction(Ic(r,s+1),t,i,o))}return o}}class $c{constructor(e,t,i,o){this.parser=e,this.input=t,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new fc(t,o),this.tokens=new Cc(e,this.stream),this.topTerm=e.top[1];let{from:n}=o[0];this.stacks=[dc.start(this,e.top[0],n)],this.fragments=i.length&&this.stream.end-n>4*e.bufferLength?new Ac(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,o=this.minStackPos,n=this.stacks=[];if(this.bigReductionCount>300&&1==i.length){let[e]=i;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<i.length;a++){let r=i[a];for(;;){if(this.tokens.mainToken=null,r.pos>o)n.push(r);else{if(this.advanceStack(r,n,i))continue;{e||(e=[],t=[]),e.push(r);let i=this.tokens.getMainToken(r);t.push(i.value,i.end)}}break}}if(!n.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return wc&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw wc&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+o);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,n);if(i)return wc&&console.log("Force-finish "+this.stackID(i)),this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(n.length>e)for(n.sort(((e,t)=>t.score-e.score));n.length>e;)n.pop();n.some((e=>e.reducePos>o))&&this.recovering--}else if(n.length>1){e:for(let e=0;e<n.length-1;e++){let t=n[e];for(let i=e+1;i<n.length;i++){let o=n[i];if(t.sameState(o)||t.buffer.length>500&&o.buffer.length>500){if(!((t.score-o.score||t.buffer.length-o.buffer.length)>0)){n.splice(e--,1);continue e}n.splice(i--,1)}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let e=1;e<n.length;e++)n[e].pos<this.minStackPos&&(this.minStackPos=n[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let o=e.pos,{parser:n}=this,a=wc?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&o>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let r=this.fragments.nodeAt(o);r;){let o=this.parser.nodeSet.types[r.type.id]==r.type?n.getGoto(e.state,r.type.id):-1;if(o>-1&&r.length&&(!t||(r.prop(Ia.contextHash)||0)==i))return e.useNode(r,o),wc&&console.log(a+this.stackID(e)+` (via reuse of ${n.getName(r.type.id)})`),!0;if(!(r instanceof Ja)||0==r.children.length||r.positions[0]>0)break;let s=r.children[0];if(!(s instanceof Ja&&0==r.positions[0]))break;r=s}}let r=n.stateSlot(e.state,4);if(r>0)return e.reduce(r),wc&&console.log(a+this.stackID(e)+` (via always-reduce ${n.getName(65535&r)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let s=this.tokens.getActions(e);for(let r=0;r<s.length;){let l=s[r++],d=s[r++],c=s[r++],p=r==s.length||!i,u=p?e:e.split(),h=this.tokens.mainToken;if(u.apply(l,d,h?h.start:u.pos,c),wc&&console.log(a+this.stackID(u)+` (via ${65536&l?`reduce of ${n.getName(65535&l)}`:"shift"} for ${n.getName(d)} @ ${o}${u==e?"":", split"})`),p)return!0;u.pos>o?t.push(u):i.push(u)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Tc(e,t),!0}}runRecovery(e,t,i){let o=null,n=!1;for(let a=0;a<e.length;a++){let r=e[a],s=t[a<<1],l=t[1+(a<<1)],d=wc?this.stackID(r)+" -> ":"";if(r.deadEnd){if(n)continue;if(n=!0,r.restart(),wc&&console.log(d+this.stackID(r)+" (restarted)"),this.advanceFully(r,i))continue}let c=r.split(),p=d;for(let e=0;c.forceReduce()&&e<10&&(wc&&console.log(p+this.stackID(c)+" (via force-reduce)"),!this.advanceFully(c,i));e++)wc&&(p=this.stackID(c)+" -> ");for(let e of r.recoverByInsert(s))wc&&console.log(d+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.stream.end>r.pos?(l==r.pos&&(l++,s=0),r.recoverByDelete(s,l),wc&&console.log(d+this.stackID(r)+` (via recover-delete ${this.parser.getName(s)})`),Tc(r,i)):(!o||o.score<r.score)&&(o=r)}return o}stackToTree(e){return e.close(),Ja.build({buffer:uc.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Sc||(Sc=new WeakMap)).get(e);return t||Sc.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Tc(e,t){for(let i=0;i<t.length;i++){let o=t[i];if(o.pos==e.pos&&o.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class zc{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}const Pc=e=>e;class Ec extends sr{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let i=0;i<e.repeatNodeCount;i++)t.push("");let i=Object.keys(e.topRules).map((t=>e.topRules[t][1])),o=[];for(let e=0;e<t.length;e++)o.push([]);function n(e,t,i){o[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=Ia[e]);for(let i=1;i<t.length;){let o=t[i++];if(o>=0)n(o,e,t[i++]);else{let a=t[i+-o];for(let r=-o;r>0;r--)n(t[i++],e,a);i++}}}this.nodeSet=new Ba(t.map(((t,n)=>Da.define({name:n>=this.minRepeatTerm?void 0:t,id:n,props:o[n],top:i.indexOf(n)>-1,error:0==n,skipped:e.skippedNodes&&e.skippedNodes.indexOf(n)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=za;let a=hc(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(jc),this.states=hc(e.states,Uint32Array),this.data=hc(e.stateData),this.goto=hc(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new _c(a,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let o=new $c(this,e,t,i);for(let n of this.wrappers)o=n(o,e,t,i);return o}getGoto(e,t,i=!1){let o=this.goto;if(t>=o[0])return-1;for(let n=o[t+1];;){let t=o[n++],a=1&t,r=o[n++];if(a&&i)return r;for(let i=n+(t>>1);n<i;n++)if(o[n]==e)return r;if(a)return-1}}hasAction(e,t){let i=this.data;for(let o=0;o<2;o++)for(let n,a=this.stateSlot(e,o?2:1);;a+=3){if(65535==(n=i[a])){if(1!=i[a+1]){if(2==i[a+1])return Ic(i,a+2);break}n=i[a=Ic(i,a+2)]}if(n==t||0==n)return Ic(i,a+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let i=this.stateSlot(e,4),o=i?t(i):void 0;for(let i=this.stateSlot(e,1);null==o;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Ic(this.data,i+2)}o=t(Ic(this.data,i+1))}return o}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Ic(this.data,i+2)}if(!(1&this.data[i+2])){let e=this.data[i+1];t.some(((t,i)=>1&i&&t==e))||t.push(this.data[i],e)}}return t}configure(e){let t=Object.assign(Object.create(Ec.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let i=e.tokenizers.find((e=>e.from==t));return i?i.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((i,o)=>{let n=e.specializers.find((e=>e.from==i.external));if(!n)return i;let a=Object.assign(Object.assign({},i),{external:n.to});return t.specializers[o]=jc(a),a}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map((()=>!1));if(e)for(let o of e.split(" ")){let e=t.indexOf(o);e>=0&&(i[e]=!0)}let o=null;for(let e=0;e<t.length;e++)if(!i[e])for(let i,n=this.dialects[t[e]];65535!=(i=this.data[n++]);)(o||(o=new Uint8Array(this.maxTerm+1)))[i]=1;return new zc(e,i,o)}static deserialize(e){return new Ec(e)}}function Ic(e,t){return e[t]|e[t+1]<<16}function jc(e){if(e.external){let t=e.extend?1:0;return(i,o)=>e.external(i,o)<<1|t}return e.get}const Mc=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Dc=new class{constructor(e){this.start=e.start,this.shift=e.shift||Pc,this.reduce=e.reduce||Pc,this.reuse=e.reuse||Pc,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:!1,shift:(e,t)=>5==t||6==t||320==t?e:321==t,strict:!1}),Bc=new bc(((e,t)=>{let{next:i}=e;(125==i||-1==i||t.context)&&e.acceptToken(318)}),{contextual:!0,fallback:!0}),Rc=new bc(((e,t)=>{let i,{next:o}=e;Mc.indexOf(o)>-1||(47!=o||47!=(i=e.peek(1))&&42!=i)&&(125==o||59==o||-1==o||t.context||e.acceptToken(316))}),{contextual:!0}),Uc=new bc(((e,t)=>{91!=e.next||t.context||e.acceptToken(317)}),{contextual:!0}),Hc=new bc(((e,t)=>{let{next:i}=e;if(43==i||45==i){if(e.advance(),i==e.next){e.advance();let i=!t.context&&t.canShift(1);e.acceptToken(i?1:2)}}else 63==i&&46==e.peek(1)&&(e.advance(),e.advance(),(e.next<48||e.next>57)&&e.acceptToken(3))}),{contextual:!0});function Jc(e,t){return e>=65&&e<=90||e>=97&&e<=122||95==e||e>=192||!t&&e>=48&&e<=57}const Qc=new bc(((e,t)=>{if(60!=e.next||!t.dialectEnabled(0))return;if(e.advance(),47==e.next)return;let i=0;for(;Mc.indexOf(e.next)>-1;)e.advance(),i++;if(Jc(e.next,!0)){for(e.advance(),i++;Jc(e.next,!1);)e.advance(),i++;for(;Mc.indexOf(e.next)>-1;)e.advance(),i++;if(44==e.next)return;for(let t=0;;t++){if(7==t){if(!Jc(e.next,!0))return;break}if(e.next!="extends".charCodeAt(t))break;e.advance(),i++}}e.acceptToken(4,-i)})),Nc=hr({"get set async static":Er.modifier,"for while do if else switch try catch finally return throw break continue default case defer":Er.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":Er.operatorKeyword,"let var const using function class extends":Er.definitionKeyword,"import export from":Er.moduleKeyword,"with debugger new":Er.keyword,TemplateString:Er.special(Er.string),super:Er.atom,BooleanLiteral:Er.bool,this:Er.self,null:Er.null,Star:Er.modifier,VariableName:Er.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Er.function(Er.variableName),VariableDefinition:Er.definition(Er.variableName),Label:Er.labelName,PropertyName:Er.propertyName,PrivatePropertyName:Er.special(Er.propertyName),"CallExpression/MemberExpression/PropertyName":Er.function(Er.propertyName),"FunctionDeclaration/VariableDefinition":Er.function(Er.definition(Er.variableName)),"ClassDeclaration/VariableDefinition":Er.definition(Er.className),"NewExpression/VariableName":Er.className,PropertyDefinition:Er.definition(Er.propertyName),PrivatePropertyDefinition:Er.definition(Er.special(Er.propertyName)),UpdateOp:Er.updateOperator,"LineComment Hashbang":Er.lineComment,BlockComment:Er.blockComment,Number:Er.number,String:Er.string,Escape:Er.escape,ArithOp:Er.arithmeticOperator,LogicOp:Er.logicOperator,BitOp:Er.bitwiseOperator,CompareOp:Er.compareOperator,RegExp:Er.regexp,Equals:Er.definitionOperator,Arrow:Er.function(Er.punctuation),": Spread":Er.punctuation,"( )":Er.paren,"[ ]":Er.squareBracket,"{ }":Er.brace,"InterpolationStart InterpolationEnd":Er.special(Er.brace),".":Er.derefOperator,", ;":Er.separator,"@":Er.meta,TypeName:Er.typeName,TypeDefinition:Er.definition(Er.typeName),"type enum interface implements namespace module declare":Er.definitionKeyword,"abstract global Privacy readonly override":Er.modifier,"is keyof unique infer asserts":Er.operatorKeyword,JSXAttributeValue:Er.attributeValue,JSXText:Er.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Er.angleBracket,"JSXIdentifier JSXNameSpacedName":Er.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Er.attributeName,"JSXBuiltin/JSXIdentifier":Er.standard(Er.tagName)}),Lc={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},Fc={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},qc={__proto__:null,"<":193},Vc=Ec.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:"⚠ ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:Dc,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[Nc],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[Rc,Uc,Hc,Qc,2,3,4,5,6,7,8,9,10,11,12,13,14,Bc,new vc("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new vc("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:e=>Lc[e]||-1},{term:343,get:e=>Fc[e]||-1},{term:95,get:e=>qc[e]||-1}],tokenPrec:15201}),Kc=[oc("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),oc("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),oc("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),oc("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),oc("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),oc("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),oc("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),oc("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),oc("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),oc('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),oc('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],Gc=Kc.concat([oc("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),oc("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),oc("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Zc=new ar,Yc=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Wc(e){return(t,i)=>{let o=t.node.getChild("VariableDefinition");return o&&i(o,e),!0}}const Xc=["FunctionDeclaration"],ep={FunctionDeclaration:Wc("function"),ClassDeclaration:Wc("class"),ClassExpression:()=>!0,EnumDeclaration:Wc("constant"),TypeAliasDeclaration:Wc("type"),NamespaceDeclaration:Wc("namespace"),VariableDefinition(e,t){e.matchContext(Xc)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function tp(e,t){let i=Zc.get(t);if(i)return i;let o=[],n=!0;function a(t,i){let n=e.sliceString(t.from,t.to);o.push({label:n,type:i})}return t.cursor(Ha.IncludeAnonymous).iterate((t=>{if(n)n=!1;else if(t.name){let e=ep[t.name];if(e&&e(t,a)||Yc.has(t.name))return!1}else if(t.to-t.from>8192){for(let i of tp(e,t.node))o.push(i);return!1}})),Zc.set(t,o),o}const ip=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,op=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function np(e){let t=Hr(e.state).resolveInner(e.pos,-1);if(op.indexOf(t.name)>-1)return null;let i="VariableName"==t.name||t.to-t.from<20&&ip.test(e.state.sliceDoc(t.from,t.to));if(!i&&!e.explicit)return null;let o=[];for(let i=t;i;i=i.parent)Yc.has(i.name)&&(o=o.concat(tp(e.state.doc,i)));return{options:o,from:i?t.from:e.pos,validFor:ip}}const ap=Ur.define({name:"javascript",parser:Vc.configure({props:[os.add({IfStatement:ps({except:/^\s*({|else\b)/}),TryStatement:ps({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:e=>e.baseIndent,SwitchBody:e=>{let t=e.textAfter,i=/^\s*\}/.test(t),o=/^\s*(case|default)\b/.test(t);return e.baseIndent+(i?0:o?1:2)*e.unit},Block:ds({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":ps({except:/^\s*{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag":e=>e.column(e.node.from)+e.unit}),us.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":function(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null},BlockComment:e=>({from:e.from+2,to:e.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),rp={test:e=>/^JSX/.test(e.name),facet:Mr({commentTokens:{block:{open:"{/*",close:"*/}"}}})},sp=ap.configure({dialect:"ts"},"typescript"),lp=ap.configure({dialect:"jsx",props:[Dr.add((e=>e.isTop?[rp]:void 0))]}),dp=ap.configure({dialect:"jsx ts",props:[Dr.add((e=>e.isTop?[rp]:void 0))]},"typescript");let cp=e=>({label:e,type:"keyword"});const pp="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(cp),up=pp.concat(["declare","implements","private","protected","public"].map(cp));function hp(e={}){let t=e.jsx?e.typescript?dp:lp:e.typescript?sp:ap,i=e.typescript?Gc.concat(up):Kc.concat(pp);return new Zr(t,[ap.data.of({autocomplete:(o=op,n=id(i),e=>{for(let t=Hr(e.state).resolveInner(e.pos,-1);t;t=t.parent){if(o.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return n(e)})}),ap.data.of({autocomplete:np}),e.jsx?fp:[]]);var o,n}function gp(e,t,i=e.length){for(let o=null==t?void 0:t.firstChild;o;o=o.nextSibling)if("JSXIdentifier"==o.name||"JSXBuiltin"==o.name||"JSXNamespacedName"==o.name||"JSXMemberExpression"==o.name)return e.sliceString(o.from,Math.min(o.to,i));return""}const mp="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),fp=aa.inputHandler.of(((e,t,i,o,n)=>{if((mp?e.composing:e.compositionStarted)||e.state.readOnly||t!=i||">"!=o&&"/"!=o||!ap.isActiveAt(e.state,t,-1))return!1;let a=n(),{state:r}=a,s=r.changeByRange((e=>{var t;let i,{head:n}=e,a=Hr(r).resolveInner(n-1,-1);if("JSXStartTag"==a.name&&(a=a.parent),r.doc.sliceString(n-1,n)!=o||"JSXAttributeValue"==a.name&&a.to>n);else{if(">"==o&&"JSXFragmentTag"==a.name)return{range:e,changes:{from:n,insert:"</>"}};if("/"==o&&"JSXStartCloseTag"==a.name){let e=a.parent,o=e.parent;if(o&&e.from==n-2&&((i=gp(r.doc,o.firstChild,n))||"JSXFragmentTag"==(null===(t=o.firstChild)||void 0===t?void 0:t.name))){let e=`${i}>`;return{range:J.cursor(n+e.length,-1),changes:{from:n,insert:e}}}}else if(">"==o){let t=function(e){for(;;){if("JSXOpenTag"==e.name||"JSXSelfClosingTag"==e.name||"JSXFragmentTag"==e.name)return e;if("JSXEscape"==e.name||!e.parent)return null;e=e.parent}}(a);if(t&&"JSXOpenTag"==t.name&&!/^\/?>|^<\//.test(r.doc.sliceString(n,n+2))&&(i=gp(r.doc,t,n)))return{range:e,changes:{from:n,insert:`</${i}>`}}}}return{range:e}}));return!s.changes.empty&&(e.dispatch([a,r.update(s,{userEvent:"input.complete",scrollIntoView:!0})]),!0)})),_p=["if","elif","else","endif","for","endfor","in","is","not","and","or","true","false","none","True","False","None","set","endset","block","endblock","macro","endmacro","call","endcall","filter","endfilter"],vp=["abs","attr","batch","capitalize","center","default","dictsort","escape","filesizeformat","first","float","forceescape","format","groupby","indent","int","join","last","length","list","lower","map","max","min","pprint","random","reject","rejectattr","replace","reverse","round","safe","select","selectattr","slice","sort","string","striptags","sum","title","tojson","trim","truncate","unique","upper","urlencode","urlize","wordcount","wordwrap","xmlattr","as_timestamp","timestamp_custom","timestamp_local","timestamp_utc","is_defined","regex_match","regex_replace","regex_search","regex_findall","distance","closest","expand","device_entities","integration_entities","area_entities","area_devices","slugify"],bp=["states","state_attr","is_state","is_state_attr","has_value","states.domain","now","today_at","utcnow","as_datetime","as_local","as_timestamp","device_id","device_attr","is_device_attr","area_id","area_name","area_entities","area_devices","integration_entities","device_entities","closest","distance","expand","log","sin","cos","tan","sqrt","e","pi","max","min","float","int","bool","round"];function yp(e){return e&&e.states?Object.keys(e.states).map((t=>({label:t,type:"variable",detail:e.states[t].attributes.friendly_name||"entity",info:`State: ${e.states[t].state}`}))):[]}function xp(){return vp.map((e=>({label:e,type:"function",detail:"filter",apply:e})))}id([..._p.map((e=>({label:e,type:"keyword"}))),...vp.map((e=>({label:e,type:"function",detail:"filter"}))),...bp.map((e=>({label:e,type:"function",detail:"HA function",apply:e.endsWith(")")?e:`${e}()`})))]),ks.define({startState:()=>({inBlock:!1,inVariable:!1}),token:(e,t)=>{if(e.match("{{"))return t.inVariable=!0,"bracket";if(e.match("}}"))return t.inVariable=!1,"bracket";if(e.match("{%"))return t.inBlock=!0,"bracket";if(e.match("%}"))return t.inBlock=!1,"bracket";if(e.match("{#"))return e.skipToEnd(),"comment";if(t.inBlock||t.inVariable){if(e.match(/\b(if|elif|else|endif|for|endfor|in|is|not|and|or|true|false|none)\b/i))return"keyword";if(e.match(/\b(states|state_attr|is_state|now|as_timestamp)\b/))return"function";if(e.match(/"([^"\\]|\\.)*"/)||e.match(/'([^'\\]|\\.)*'/))return"string";if(e.match(/\b\d+(\.\d+)?\b/))return"number";if(e.match("|"))return"operator"}return e.next(),null}});var kp=i(2314),wp=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let Sp=class extends o.WF{constructor(){super(...arguments),this.value="",this.placeholder="",this.minHeight=100,this.maxHeight=400,this._isUpdating=!1,this._userIsTyping=!1}static get styles(){return o.AH`
      :host {
        display: block;
        width: 100%;
      }

      .editor-container {
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        overflow: hidden;
        background: var(--code-editor-background-color, var(--card-background-color));
      }

      .cm-editor {
        font-family: 'Courier New', Consolas, Monaco, monospace;
        font-size: 13px;
      }

      .cm-scroller {
        overflow: auto;
      }

      .cm-content {
        padding: 8px 0;
      }

      .cm-line {
        padding: 0 8px;
      }

      /* Theme integration with Home Assistant */
      .cm-editor.cm-focused {
        outline: 2px solid var(--primary-color);
        outline-offset: -1px;
      }

      /* Autocomplete styling - force proper z-index and colors */
      .cm-tooltip-autocomplete {
        background: var(--card-background-color) !important;
        border: 1px solid var(--divider-color) !important;
        border-radius: 4px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2) !important;
        z-index: ${kp.Mu.AUTOCOMPLETE} !important;
      }

      .cm-tooltip.cm-tooltip-autocomplete > ul {
        background: var(--card-background-color) !important;
      }

      .cm-tooltip.cm-tooltip-autocomplete > ul > li {
        color: var(--primary-text-color) !important;
        background: transparent !important;
      }

      .cm-tooltip.cm-tooltip-autocomplete > ul > li[aria-selected] {
        background: var(--primary-color) !important;
        color: var(--text-primary-color, white) !important;
      }

      .cm-completionLabel {
        color: var(--primary-text-color) !important;
      }

      .cm-completionDetail {
        color: var(--secondary-text-color) !important;
        font-style: italic;
        opacity: 0.8;
      }

      .cm-completionInfo {
        background: var(--secondary-background-color) !important;
        border: 1px solid var(--divider-color) !important;
        color: var(--primary-text-color) !important;
      }

      /* Syntax highlighting for light theme */
      :host-context([data-theme='light']) .cm-editor,
      .cm-editor {
        --cm-keyword: #0000ff;
        --cm-function: #795e26;
        --cm-variable: #001080;
        --cm-string: #a31515;
        --cm-number: #098658;
        --cm-comment: #008000;
        --cm-operator: #000000;
        --cm-bracket: #0431fa;
        --cm-property: #001080;
        --cm-atom: #0000ff;
        color: var(--primary-text-color);
      }

      /* Syntax highlighting for dark theme */
      :host-context([data-theme='dark']) .cm-editor,
      :host([theme='dark']) .cm-editor {
        --cm-keyword: #569cd6;
        --cm-function: #dcdcaa;
        --cm-variable: #9cdcfe;
        --cm-string: #ce9178;
        --cm-number: #b5cea8;
        --cm-comment: #6a9955;
        --cm-operator: #d4d4d4;
        --cm-bracket: #ffd700;
        --cm-property: #9cdcfe;
        --cm-atom: #569cd6;
        color: var(--primary-text-color);
      }

      .cm-keyword {
        color: var(--cm-keyword);
        font-weight: bold;
      }

      .cm-function {
        color: var(--cm-function);
      }

      .cm-variableName {
        color: var(--cm-variable);
      }

      .cm-string {
        color: var(--cm-string);
      }

      .cm-number {
        color: var(--cm-number);
      }

      .cm-comment {
        color: var(--cm-comment);
        font-style: italic;
      }

      .cm-operator {
        color: var(--cm-operator);
      }

      .cm-bracket {
        color: var(--cm-bracket);
      }

      .cm-propertyName {
        color: var(--cm-property);
      }

      .cm-atom {
        color: var(--cm-atom);
      }

      /* Placeholder styling */
      .cm-placeholder {
        color: var(--secondary-text-color);
        opacity: 0.6;
      }

      /* Selection */
      .cm-selectionBackground {
        background: var(--primary-color) !important;
        opacity: 0.3;
      }

      .cm-focused .cm-selectionBackground {
        background: var(--primary-color) !important;
        opacity: 0.3;
      }

      /* Cursor - make it highly visible */
      .cm-cursor,
      .cm-cursor-primary {
        border-left: 2px solid var(--primary-text-color) !important;
        border-left-color: var(--primary-text-color) !important;
        margin-left: -1px;
      }

      .cm-focused .cm-cursor,
      .cm-focused .cm-cursor-primary {
        border-left: 2px solid var(--primary-color) !important;
        border-left-color: var(--primary-color) !important;
      }

      /* Active line */
      .cm-activeLine {
        background: var(--secondary-background-color);
      }

      /* Gutters */
      .cm-gutters {
        background: var(--secondary-background-color);
        border-right: 1px solid var(--divider-color);
        color: var(--secondary-text-color);
      }

      .cm-lineNumbers .cm-gutterElement {
        padding: 0 8px;
      }
    `}firstUpdated(e){super.firstUpdated(e),this._initializeEditor()}updated(e){if(super.updated(e),!this._isUpdating&&!this._userIsTyping){if(e.has("value")&&this._editor){const e=this._editor.state.doc.toString(),t=this._editor.hasFocus;if(e!==this.value&&!t&&!this._userIsTyping){this._isUpdating=!0;const t=this._editor.state.selection.main;this._editor.dispatch({changes:{from:0,to:e.length,insert:this.value},selection:t.from<=this.value.length?t:void 0}),this._isUpdating=!1}}if(e.has("hass")&&this._editor&&this.hass){const t=e.get("hass");if(!(t&&Object.keys(t.states||{}).length===Object.keys(this.hass.states||{}).length||this._editor.hasFocus||this._userIsTyping)){const e=this._editor.hasFocus,t=this._editor.state.selection.main;this._reinitializeEditor(),e&&t&&requestAnimationFrame((()=>{this._editor&&t.from<=this._editor.state.doc.length&&(this._editor.focus(),this._editor.dispatch({selection:{anchor:t.from,head:t.to}}))}))}}}}disconnectedCallback(){super.disconnectedCallback(),this._destroyEditor()}_initializeEditor(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".editor-container");if(!t)return;const i=[aa.lineWrapping,ha.of([...Wl,Xl]),hp(),rc({override:this.hass?[(n=this.hass,e=>{const t=e.matchBefore(/[\w.]+/);if(!t)return null;const i=e.state.doc.toString(),o=e.pos,a=i.substring(0,o),r=(i.substring(o),a.lastIndexOf("{{")>a.lastIndexOf("}}")),s=a.lastIndexOf("{%")>a.lastIndexOf("%}");if(!r&&!s&&t.from===t.to)return null;const l=[],d=t.text;if(/states\(['"]?$/.test(a)||/is_state\(['"]?$/.test(a))l.push(...yp(n));else if(/state_attr\(['"][^'"]*['"],\s*['"]?$/.test(a)){const e=a.match(/state_attr\(['"]([^'"]+)['"]/);e&&e[1]&&l.push(...function(e,t){if(!e||!e.states||!e.states[t])return[];const i=e.states[t];return Object.keys(i.attributes||{}).map((e=>({label:e,type:"property",detail:"attribute",info:`${String(i.attributes[e])}`})))}(n,e[1]))}else/\|\s*\w*$/.test(a)?l.push(...xp()):/states\.\w*$/.test(a)?l.push(...function(e){if(!e||!e.states)return[];const t=new Set;return Object.keys(e.states).forEach((e=>{const i=e.split(".")[0];t.add(i)})),Array.from(t).map((e=>({label:e,type:"namespace",detail:"domain"})))}(n)):/^[\w]+\.[\w]*$/.test(d)||/['"][\w]+\.[\w]*$/.test(a)?l.push(...yp(n)):(s&&l.push(..._p.map((e=>({label:e,type:"keyword"})))),l.push(...bp.map((e=>({label:e,type:"function",detail:"HA function",apply:e.includes("(")?e:`${e}()`}))),...yp(n),...xp()));const c=Array.from(new Map(l.map((e=>[e.label,e]))).values());return{from:t.from,to:t.to,options:c,validFor:/^[\w.]*$/}})]:[],activateOnTyping:!0,maxRenderedOptions:20,closeOnBlur:!1}),aa.contentAttributes.of({"aria-placeholder":this.placeholder}),aa.updateListener.of((e=>{if(e.docChanged){this._userIsTyping=!0;const t=e.state.doc.toString();t===this.value||this._isUpdating||(this.value=t,requestAnimationFrame((()=>{this._dispatchValueChanged(t),setTimeout((()=>{this._userIsTyping=!1}),150)})))}})),aa.focusChangeEffect.of(((e,t)=>(t&&(this._userIsTyping=!0),null))),aa.theme({"&":{minHeight:`${this.minHeight}px`,maxHeight:`${this.maxHeight}px`},".cm-scroller":{overflow:"auto"},".cm-content":{caretColor:"var(--primary-color)"},".cm-cursor, .cm-dropCursor":{borderLeftColor:"var(--primary-color)"}}),aa.domEventHandlers({keydown:e=>(e.stopPropagation(),e.stopImmediatePropagation(),!1),keypress:e=>(e.stopPropagation(),e.stopImmediatePropagation(),!1)})],o=Ce.create({doc:this.value,extensions:i});var n;this._editor=new aa({state:o,parent:t})}_reinitializeEditor(){this._destroyEditor(),this._initializeEditor()}_destroyEditor(){this._editor&&(this._editor.destroy(),this._editor=void 0)}_dispatchValueChanged(e){var t;!(null===(t=this._editor)||void 0===t?void 0:t.hasFocus)&&e.trim()&&e.includes("{{")&&!e.includes("}}")||e.includes("}}")&&!e.includes("{{")||this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:e},bubbles:!0,composed:!0}))}focus(){this._editor&&this._editor.focus()}_handleKeyDown(e){e.stopPropagation(),e.stopImmediatePropagation()}_handleKeyPress(e){e.stopPropagation(),e.stopImmediatePropagation()}render(){return o.qy`
      <div
        class="editor-container"
        @keydown=${this._handleKeyDown}
        @keypress=${this._handleKeyPress}
      ></div>
    `}};wp([(0,n.MZ)({attribute:!1})],Sp.prototype,"hass",void 0),wp([(0,n.MZ)({type:String})],Sp.prototype,"value",void 0),wp([(0,n.MZ)({type:String})],Sp.prototype,"placeholder",void 0),wp([(0,n.MZ)({type:Number})],Sp.prototype,"minHeight",void 0),wp([(0,n.MZ)({type:Number})],Sp.prototype,"maxHeight",void 0),wp([(0,n.wk)()],Sp.prototype,"_editor",void 0),Sp=wp([(0,n.EM)("ultra-template-editor")],Sp)},7593:(e,t,i)=>{i.d(t,{oD:()=>E});var o=i(4504),n=i(278),a=i(884),r=i(5649),s=i(4260),l=i(794),d=i(1866),c=i(4790),p=i(6256),u=i(2701),h=i(6101),g=i(5863),m=i(5183),f=i(866),_=i(796),v=i(2371),b=i(1397);class y{static getCurrentSlide(e){return this.states.get(e)||0}static setCurrentSlide(e,t){const i=Date.now();this.states.set(e,t),this.lastSlideChange.set(e,i),"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent("ultra-card-slider-update"))}static getTimer(e){return this.timers.get(e)}static setTimer(e,t){this.timers.set(e,t)}static clearTimer(e){const t=this.timers.get(e);t&&(clearInterval(t),this.timers.delete(e))}static isInitialized(e){return this.initialized.get(e)||!1}static setInitialized(e,t){this.initialized.set(e,t)}static incrementRenderCount(e){const t=(this.renderCount.get(e)||0)+1;return this.renderCount.set(e,t),t}static getCurrentDelay(e){return this.currentDelay.get(e)}static setCurrentDelay(e,t){this.currentDelay.set(e,t)}static cleanup(e){this.clearTimer(e),this.states.delete(e),this.initialized.delete(e),this.renderCount.delete(e),this.lastSlideChange.delete(e),this.currentDelay.delete(e)}}y.states=new Map,y.timers=new Map,y.initialized=new Map,y.renderCount=new Map,y.lastSlideChange=new Map,y.currentDelay=new Map;class x extends f.m{constructor(){super(...arguments),this.metadata={type:"slider",title:"Slider Layout",description:"Create interactive slideshows with multiple pages of modules",author:"WJD Designs",version:"1.0.0",icon:"mdi:view-carousel",category:"layout",tags:["layout","slider","carousel","slideshow","pages","swipe"]}}createDefault(e,t){const i=E().getModule("pagebreak"),o=(null==i?void 0:i.createDefault(this.generateId("pagebreak"),t))||{id:this.generateId("pagebreak"),type:"pagebreak",display_mode:"always",display_conditions:[]};return{id:e||this.generateId("slider"),type:"slider",modules:[o],show_pagination:!0,pagination_style:"dots",pagination_position:"bottom",pagination_color:"var(--primary-text-color)",pagination_active_color:"var(--primary-color)",pagination_size:12,show_arrows:!0,arrow_position:"inside",arrow_style:"circle",arrow_size:40,arrow_color:"var(--primary-text-color)",arrow_background_color:"rgba(0, 0, 0, 0.3)",prev_arrow_icon:"mdi:chevron-left",next_arrow_icon:"mdi:chevron-right",arrows_always_visible:!1,transition_effect:"slide-left",transition_speed:300,transition_easing:"ease-in-out",auto_play:!1,auto_play_delay:3e3,pause_on_hover:!0,loop:!0,allow_swipe:!0,allow_keyboard:!0,allow_mousewheel:!1,slider_height:300,slider_width:"100%",gap:0,slides_per_view:1,space_between:0,vertical_alignment:"top",mobile_slides_per_view:1,mobile_space_between:0,tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,o){var n,a,r,s,l,d,c;const p=e;return null===(n=null==t?void 0:t.locale)||void 0===n||n.language,p.modules.filter((e=>"pagebreak"===e.type)).length,p.modules.filter((e=>"pagebreak"!==e.type)).length,m.qy`
      <div class="slider-general-tab">
        ${this.injectUcFormStyles()}
        <style>
          .slider-general-tab {
            padding: 8px;
          }
          .inline-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 0;
            border-bottom: none;
          }
          .inline-toggle .section-title {
            font-size: 18px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--primary-color);
            letter-spacing: 0.5px;
            margin-bottom: 0;
          }
          .preview-note {
            background: var(--info-color, #2196f3);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 24px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            font-size: 14px;
            line-height: 1.5;
          }
          .preview-note ha-icon {
            flex-shrink: 0;
            margin-top: 2px;
          }
        </style>

        <!-- Preview Note -->
        <div class="preview-note">
          <ha-icon icon="mdi:information-outline"></ha-icon>
          <div>
            <strong>Note:</strong> Slider transitions may not appear in the Home Assistant
            Configuration Preview Window. To see transitions, check the
            <strong>Live Preview</strong> popup in the editor or view the card on your dashboard.
          </div>
        </div>

        <!-- SLIDER LAYOUT -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            SLIDER LAYOUT
          </div>

          ${this.renderFieldSection("Slider Width","Width of the slider container (e.g., 100%, 400px)",t,{slider_width:p.slider_width||"100%"},[this.textField("slider_width")],(e=>o({slider_width:e.detail.value.slider_width})))}
          ${this.renderFieldSection("Slider Height","Height of the slider in pixels",t,{slider_height:p.slider_height||300},[this.numberField("slider_height",50,1e3,10)],(e=>o({slider_height:e.detail.value.slider_height})))}
          ${this.renderFieldSection("Slides Per View","Number of slides visible at once",t,{slides_per_view:p.slides_per_view||1},[this.numberField("slides_per_view",1,5,1)],(e=>o({slides_per_view:e.detail.value.slides_per_view})))}
          ${this.renderFieldSection("Space Between","Space between slides in pixels",t,{space_between:p.space_between||0},[this.numberField("space_between",0,100,5)],(e=>o({space_between:e.detail.value.space_between})))}
          ${this.renderFieldSection("Vertical Alignment","Vertical alignment of content within slides",t,{vertical_alignment:p.vertical_alignment||"top"},[this.selectField("vertical_alignment",[{value:"top",label:"Top"},{value:"center",label:"Center"},{value:"bottom",label:"Bottom"},{value:"stretch",label:"Stretch"}])],(e=>o({vertical_alignment:e.detail.value.vertical_alignment})))}
        </div>

        <!-- PAGINATION -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div class="inline-toggle">
            <div class="section-title">PAGINATION</div>
            <ha-switch
              .checked=${null===(a=p.show_pagination)||void 0===a||a}
              @change=${e=>{const t=e.target;o({show_pagination:t.checked})}}
            ></ha-switch>
          </div>

          ${p.show_pagination?m.qy`
                ${this.renderFieldSection("Pagination Style","How pagination indicators are displayed",t,{pagination_style:p.pagination_style||"dots"},[this.selectField("pagination_style",[{value:"dots",label:"Dots"},{value:"numbers",label:"Numbers"},{value:"fraction",label:"Fraction (1/5)"},{value:"progressbar",label:"Progress Bar"}])],(e=>o({pagination_style:e.detail.value.pagination_style})))}
                ${this.renderFieldSection("Pagination Position","Where to show pagination indicators",t,{pagination_position:p.pagination_position||"bottom"},[this.selectField("pagination_position",[{value:"top",label:"Top"},{value:"bottom",label:"Bottom"},{value:"left",label:"Left"},{value:"right",label:"Right"}])],(e=>o({pagination_position:e.detail.value.pagination_position})))}
                ${this.renderFieldSection("Pagination Size","Size of pagination indicators in pixels",t,{pagination_size:p.pagination_size||12},[this.numberField("pagination_size",6,30,1)],(e=>o({pagination_size:e.detail.value.pagination_size})))}
                ${this.renderFieldSection("Pagination Color","Color of inactive pagination indicators",t,{pagination_color:p.pagination_color||"var(--primary-text-color)"},[this.textField("pagination_color")],(e=>o({pagination_color:e.detail.value.pagination_color})))}
                ${this.renderFieldSection("Active Pagination Color","Color of the active pagination indicator",t,{pagination_active_color:p.pagination_active_color||"var(--primary-color)"},[this.textField("pagination_active_color")],(e=>o({pagination_active_color:e.detail.value.pagination_active_color})))}
              `:""}
        </div>

        <!-- NAVIGATION ARROWS -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div class="inline-toggle">
            <div class="section-title">NAVIGATION ARROWS</div>
            <ha-switch
              .checked=${null===(r=p.show_arrows)||void 0===r||r}
              @change=${e=>{const t=e.target;o({show_arrows:t.checked})}}
            ></ha-switch>
          </div>

          ${p.show_arrows?m.qy`
                ${this.renderFieldSection("Arrow Position","Position arrows inside or outside the slider",t,{arrow_position:p.arrow_position||"inside"},[this.selectField("arrow_position",[{value:"inside",label:"Inside"},{value:"outside",label:"Outside"}])],(e=>o({arrow_position:e.detail.value.arrow_position})))}
                ${this.renderFieldSection("Arrow Style","Visual style of the arrows",t,{arrow_style:p.arrow_style||"circle"},[this.selectField("arrow_style",[{value:"default",label:"Default"},{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"minimal",label:"Minimal"}])],(e=>o({arrow_style:e.detail.value.arrow_style})))}
                ${this.renderFieldSection("Arrow Size","Size of navigation arrows in pixels",t,{arrow_size:p.arrow_size||40},[this.numberField("arrow_size",20,80,5)],(e=>o({arrow_size:e.detail.value.arrow_size})))}
                <div
                  style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
                >
                  <div style="flex: 1;">
                    <div style="font-weight: 600; margin-bottom: 4px;">Arrows Always Visible</div>
                    <div style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8;">
                      Keep arrows visible (otherwise show on hover)
                    </div>
                  </div>
                  <ha-switch
                    .checked=${p.arrows_always_visible||!1}
                    @change=${e=>{const t=e.target;o({arrows_always_visible:t.checked})}}
                  ></ha-switch>
                </div>
                ${this.renderFieldSection("Previous Arrow Icon","Icon for the previous arrow",t,{prev_arrow_icon:p.prev_arrow_icon||"mdi:chevron-left"},[this.iconField("prev_arrow_icon")],(e=>o({prev_arrow_icon:e.detail.value.prev_arrow_icon})))}
                ${this.renderFieldSection("Next Arrow Icon","Icon for the next arrow",t,{next_arrow_icon:p.next_arrow_icon||"mdi:chevron-right"},[this.iconField("next_arrow_icon")],(e=>o({next_arrow_icon:e.detail.value.next_arrow_icon})))}
              `:""}
        </div>

        <!-- TRANSITION & ANIMATION -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            TRANSITION & ANIMATION
          </div>

          ${this.renderFieldSection("Transition Effect","Animation style between slides",t,{transition_effect:p.transition_effect||"slide-left"},[this.selectField("transition_effect",[{value:"slide-left",label:"Slide Left"},{value:"slide-right",label:"Slide Right"},{value:"slide-top",label:"Slide Top"},{value:"slide-bottom",label:"Slide Bottom"},{value:"fade",label:"Fade"},{value:"zoom-in",label:"Zoom In"},{value:"zoom-out",label:"Zoom Out"},{value:"circle",label:"Circle"}])],(e=>o({transition_effect:e.detail.value.transition_effect})))}
          ${this.renderFieldSection("Transition Speed","Transition duration in milliseconds",t,{transition_speed:p.transition_speed||300},[this.numberField("transition_speed",100,2e3,50)],(e=>o({transition_speed:e.detail.value.transition_speed})))}
          ${this.renderFieldSection("Transition Easing","Timing function for the transition",t,{transition_easing:p.transition_easing||"ease-in-out"},[this.selectField("transition_easing",[{value:"linear",label:"Linear"},{value:"ease",label:"Ease"},{value:"ease-in",label:"Ease In"},{value:"ease-out",label:"Ease Out"},{value:"ease-in-out",label:"Ease In Out"}])],(e=>o({transition_easing:e.detail.value.transition_easing})))}
        </div>

        <!-- AUTO-PLAY -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div class="inline-toggle">
            <div class="section-title">AUTO-PLAY</div>
            <ha-switch
              .checked=${p.auto_play||!1}
              @change=${e=>{const t=e.target;o({auto_play:t.checked})}}
            ></ha-switch>
          </div>

          ${p.auto_play?m.qy`
                ${this.renderFieldSection("Auto-play Delay","Time between slides in milliseconds",t,{auto_play_delay:p.auto_play_delay||3e3},[this.numberField("auto_play_delay",1e3,1e4,500)],(e=>o({auto_play_delay:e.detail.value.auto_play_delay})))}
                <div
                  style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
                >
                  <div style="flex: 1;">
                    <div style="font-weight: 600; margin-bottom: 4px;">Pause on Hover</div>
                    <div style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8;">
                      Pause auto-play when hovering over slider
                    </div>
                  </div>
                  <ha-switch
                    .checked=${null===(s=p.pause_on_hover)||void 0===s||s}
                    @change=${e=>{const t=e.target;o({pause_on_hover:t.checked})}}
                  ></ha-switch>
                </div>
              `:""}
          <div
            style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
          >
            <div style="flex: 1;">
              <div style="font-weight: 600; margin-bottom: 4px;">Loop</div>
              <div style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8;">
                Return to first slide after the last
              </div>
            </div>
            <ha-switch
              .checked=${null===(l=p.loop)||void 0===l||l}
              @change=${e=>{const t=e.target;o({loop:t.checked})}}
            ></ha-switch>
          </div>
        </div>

        <!-- INTERACTION -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            INTERACTION
          </div>

          <div
            style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
          >
            <div style="flex: 1;">
              <div style="font-weight: 600; margin-bottom: 4px;">Allow Swipe</div>
              <div style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8;">
                Enable touch/swipe gestures
              </div>
            </div>
            <ha-switch
              .checked=${null===(d=p.allow_swipe)||void 0===d||d}
              @change=${e=>{const t=e.target;o({allow_swipe:t.checked})}}
            ></ha-switch>
          </div>
          <div
            style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
          >
            <div style="flex: 1;">
              <div style="font-weight: 600; margin-bottom: 4px;">Allow Keyboard</div>
              <div style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8;">
                Navigate with arrow keys
              </div>
            </div>
            <ha-switch
              .checked=${null===(c=p.allow_keyboard)||void 0===c||c}
              @change=${e=>{const t=e.target;o({allow_keyboard:t.checked})}}
            ></ha-switch>
          </div>
          <div
            style="display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 16px;"
          >
            <div style="flex: 1;">
              <div style="font-weight: 600; margin-bottom: 4px;">Allow Mousewheel</div>
              <div style="font-size: 13px; color: var(--secondary-text-color); opacity: 0.8;">
                Navigate with mouse wheel
              </div>
            </div>
            <ha-switch
              .checked=${p.allow_mousewheel||!1}
              @change=${e=>{const t=e.target;o({allow_mousewheel:t.checked})}}
            ></ha-switch>
          </div>
        </div>

        <!-- MOBILE RESPONSIVE -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            MOBILE RESPONSIVE
          </div>

          ${this.renderFieldSection("Mobile Slides Per View","Number of slides visible on mobile devices",t,{mobile_slides_per_view:p.mobile_slides_per_view||1},[this.numberField("mobile_slides_per_view",1,3,1)],(e=>o({mobile_slides_per_view:e.detail.value.mobile_slides_per_view})))}
          ${this.renderFieldSection("Mobile Space Between","Space between slides on mobile in pixels",t,{mobile_space_between:p.mobile_space_between||0},[this.numberField("mobile_space_between",0,50,5)],(e=>o({mobile_space_between:e.detail.value.mobile_space_between})))}
        </div>
      </div>
    `}renderLogicTab(e,t,i,o){return v.X.render(e,t,o)}renderActionsTab(e,t,i,o){const n=e;return m.qy`
      <div class="actions-tab">
        ${this.injectUcFormStyles()}
        <style>
          .actions-tab {
            padding: 8px;
          }
        </style>

        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
          >
            LINK CONFIGURATION
          </div>

          ${_.K.render(t,{tap_action:n.tap_action||{action:"nothing"},hold_action:n.hold_action||{action:"nothing"},double_tap_action:n.double_tap_action||{action:"nothing"}},(e=>{const t={};e.tap_action&&(t.tap_action=e.tap_action),e.hold_action&&(t.hold_action=e.hold_action),e.double_tap_action&&(t.double_tap_action=e.double_tap_action),o(t)}),"Link Configuration")}
        </div>
      </div>
    `}renderSplitPreview(e,t){return this.renderPreview(e,t,{layout:{rows:[]}},!0)}renderPreview(e,t,i,o){const n=e,a=E();y.incrementRenderCount(n.id);const r=[];let s=[];for(const e of n.modules)"pagebreak"===e.type?(r.push([...s]),s=[]):s.push(e);if((s.length>0||0===r.length)&&r.push(s),0===r.length||1===r.length&&0===r[0].length)return m.qy`
        <div style="padding: 40px 20px; text-align: center; color: var(--secondary-text-color);">
          <ha-icon
            icon="mdi:view-carousel"
            style="font-size: 48px; opacity: 0.3; margin-bottom: 16px;"
          ></ha-icon>
          <div style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Slider is empty</div>
          <div style="font-size: 14px; opacity: 0.8;">
            Drag modules here to add content.<br />
            Use <strong>Page Break</strong> modules to separate slides.
          </div>
        </div>
      `;y.getCurrentSlide(n.id)>=r.length&&y.setCurrentSlide(n.id,0);const l=window.innerWidth<768,d=l?n.mobile_slides_per_view||1:n.slides_per_view||1,c=l?n.mobile_space_between||0:n.space_between||0,p=n.vertical_alignment||"top",u=(e,t)=>{if(e<0||e>=r.length){if(!n.loop)return;y.setCurrentSlide(n.id,e<0?r.length-1:0)}else y.setCurrentSlide(n.id,e);n.auto_play&&t&&S();const i=(null==t?void 0:t.target)||document.querySelector(`[data-slider-id="${n.id}"]`);if(i){const t=new CustomEvent("slider-state-changed",{bubbles:!0,composed:!0,detail:{sliderId:n.id,index:e}});i.dispatchEvent(t)}else window.dispatchEvent(new CustomEvent("slider-state-changed",{bubbles:!0,composed:!0,detail:{sliderId:n.id,index:e}}))},h=e=>{const t=y.getCurrentSlide(n.id);u(t+1,e)},g=e=>{const t=y.getCurrentSlide(n.id);u(t-1,e)};let f=0,_=0,v=!1,x=0,k=0,w=!1;const S=()=>{if(!n.auto_play)return;if(y.getTimer(n.id))return;const e=setInterval((()=>{h()}),n.auto_play_delay||3e3);y.setTimer(n.id,e)};!n.auto_play&&y.isInitialized(n.id)&&(y.clearTimer(n.id),y.setInitialized(n.id,!1));const O=y.getCurrentDelay(n.id),A=n.auto_play_delay||3e3;void 0!==O&&O!==A&&n.auto_play&&(y.clearTimer(n.id),y.setInitialized(n.id,!1));const C=y.getTimer(n.id),$=y.isInitialized(n.id);!n.auto_play||C||$||(y.setInitialized(n.id,!0),y.setCurrentDelay(n.id,A),setTimeout((()=>S()),100));const T=()=>{if(!n.show_pagination)return"";const e=n.pagination_style||"dots",t=n.pagination_position||"bottom",i=n.pagination_size||12,o=y.getCurrentSlide(n.id);if("dots"===e)return m.qy`
          <div
            class="slider-pagination pagination-${t}"
            style="
              display: flex;
              gap: 8px;
              justify-content: center;
              align-items: center;
            "
          >
            ${r.map(((e,t)=>m.qy`
                <div
                  class="pagination-dot ${t===o?"active":""}"
                  @click=${e=>u(t,e)}
                  style="
                    width: ${i}px;
                    height: ${i}px;
                    border-radius: 50%;
                    background: ${t===o?n.pagination_active_color||"var(--primary-color)":n.pagination_color||"var(--primary-text-color)"};
                    opacity: ${t===o?"1":"0.5"};
                    cursor: pointer;
                    transition: all 0.3s;
                  "
                ></div>
              `))}
          </div>
        `;if("numbers"===e)return m.qy`
          <div
            class="slider-pagination pagination-${t}"
            style="
              display: flex;
              gap: 4px;
              justify-content: center;
              align-items: center;
            "
          >
            ${r.map(((e,t)=>m.qy`
                <div
                  class="pagination-number ${t===o?"active":""}"
                  @click=${e=>u(t,e)}
                  style="
                    min-width: ${2*i}px;
                    height: ${2*i}px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 4px;
                    background: ${t===o?n.pagination_active_color||"var(--primary-color)":"transparent"};
                    border: 2px solid ${t===o?n.pagination_active_color||"var(--primary-color)":n.pagination_color||"var(--primary-text-color)"};
                    color: ${t===o?"white":n.pagination_color||"var(--primary-text-color)"};
                    font-size: ${i}px;
                    font-weight: ${t===o?"600":"400"};
                    cursor: pointer;
                    transition: all 0.3s;
                  "
                >
                  ${t+1}
                </div>
              `))}
          </div>
        `;if("fraction"===e)return m.qy`
          <div
            class="slider-pagination pagination-${t}"
            style="
              display: flex;
              justify-content: center;
              align-items: center;
              font-size: ${i+4}px;
              font-weight: 600;
              color: ${n.pagination_active_color||"var(--primary-color)"};
            "
          >
            ${o+1} / ${r.length}
          </div>
        `;if("progressbar"===e){const e=(o+1)/r.length*100;return m.qy`
          <div
            class="slider-pagination pagination-${t}"
            style="
              width: 100%;
              height: ${i/2}px;
              background: ${n.pagination_color||"rgba(0, 0, 0, 0.2)"};
              border-radius: ${i/4}px;
              overflow: hidden;
            "
          >
            <div
              class="progress-bar"
              style="
                height: 100%;
                width: ${e}%;
                background: ${n.pagination_active_color||"var(--primary-color)"};
                transition: width ${n.transition_speed||300}ms ${n.transition_easing||"ease-in-out"};
              "
            ></div>
          </div>
        `}return""},z=y.getCurrentSlide(n.id),P=n.transition_effect||"slide-left",I=n.transition_speed||300,j=n.transition_easing||"ease-in-out";return P.startsWith("slide-"),["fade","zoom-in","zoom-out","circle"].includes(P),m.qy`
      <style>
        .slider-container {
          position: relative;
          width: ${n.slider_width||"100%"};
          height: ${n.slider_height||300}px;
          overflow: hidden;
          margin: 0 auto;
          user-select: none;
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          cursor: ${n.allow_swipe?"grab":"default"};
        }
        .slider-container * {
          -webkit-user-drag: none;
          -khtml-user-drag: none;
          -moz-user-drag: none;
          -o-user-drag: none;
          user-drag: none;
        }
        .slider-container:active {
          cursor: ${n.allow_swipe?"grabbing":"default"};
        }
        .slider-container:hover .slider-arrow {
          opacity: 1 !important;
        }
        .slider-wrapper {
          position: relative;
          width: 100%;
          height: 100%;
        }

        /* Horizontal slide effects */
        .slider-wrapper.effect-slide-left,
        .slider-wrapper.effect-slide-right {
          display: flex;
          transition: transform ${I}ms ${j};
        }

        /* Vertical slide effects */
        .slider-wrapper.effect-slide-top,
        .slider-wrapper.effect-slide-bottom {
          display: flex;
          flex-direction: column;
          transition: transform ${I}ms ${j};
        }

        .slider-slide {
          flex-shrink: 0;
          display: flex;
          flex-direction: column;
          justify-content: ${{top:"flex-start",center:"center",bottom:"flex-end",stretch:"stretch"}[p]};
          align-items: stretch;
          padding: ${n.gap||0}px;
          box-sizing: border-box;
        }

        /* Slide effects - flex items */
        .slider-wrapper.effect-slide-left .slider-slide,
        .slider-wrapper.effect-slide-right .slider-slide {
          width: calc((100% - ${(d-1)*c}px) / ${d});
          height: 100%;
        }
        .slider-wrapper.effect-slide-top .slider-slide,
        .slider-wrapper.effect-slide-bottom .slider-slide {
          width: 100%;
          height: 100%;
        }

        /* Fade, Zoom, Circle effects - absolute positioning */
        .slider-wrapper.effect-fade .slider-slide,
        .slider-wrapper.effect-zoom-in .slider-slide,
        .slider-wrapper.effect-zoom-out .slider-slide,
        .slider-wrapper.effect-circle .slider-slide {
          position: absolute;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          opacity: 0;
          pointer-events: none;
          transition:
            opacity ${I}ms ${j},
            transform ${I}ms ${j},
            clip-path ${I}ms ${j};
        }

        /* Fade effect */
        .slider-wrapper.effect-fade .slider-slide.active {
          opacity: 1;
          pointer-events: auto;
        }

        /* Zoom In effect - starts small, grows to normal */
        .slider-wrapper.effect-zoom-in .slider-slide {
          transform: scale(0.8);
        }
        .slider-wrapper.effect-zoom-in .slider-slide.active {
          opacity: 1;
          transform: scale(1);
          pointer-events: auto;
        }

        /* Zoom Out effect - starts large, shrinks to normal */
        .slider-wrapper.effect-zoom-out .slider-slide {
          transform: scale(1.2);
        }
        .slider-wrapper.effect-zoom-out .slider-slide.active {
          opacity: 1;
          transform: scale(1);
          pointer-events: auto;
        }

        /* Circle effect - circular reveal */
        .slider-wrapper.effect-circle .slider-slide {
          clip-path: circle(0% at 50% 50%);
        }
        .slider-wrapper.effect-circle .slider-slide.active {
          opacity: 1;
          clip-path: circle(100% at 50% 50%);
          pointer-events: auto;
        }
        .slide-content {
          width: 100%;
          display: flex;
          flex-direction: column;
          gap: 8px;
          overflow: hidden;
        }
        .slide-content > * {
          flex-shrink: 1;
          min-height: 0;
        }
        .slider-pagination {
          padding: 12px;
        }
        .pagination-top {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          z-index: 10;
        }
        .pagination-bottom {
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          z-index: 10;
        }
        .pagination-left {
          position: absolute;
          left: 0;
          top: 50%;
          transform: translateY(-50%);
          z-index: 10;
          flex-direction: column;
        }
        .pagination-right {
          position: absolute;
          right: 0;
          top: 50%;
          transform: translateY(-50%);
          z-index: 10;
          flex-direction: column;
        }
        .slider-arrow {
          transition:
            opacity 0.3s,
            transform 0.2s;
        }
        .slider-arrow:hover {
          transform: translateY(-50%) scale(1.1);
        }
      </style>

      <div
        class="slider-container uc-module-container effect-${P}"
        data-slider-id="${n.id}"
        tabindex="0"
        @touchstart=${e=>{n.allow_swipe&&(f=e.touches[0].clientX,_=e.touches[0].clientY,v=!1,y.clearTimer(n.id))}}
        @touchmove=${e=>{if(!n.allow_swipe||!f)return;const t=e.touches[0].clientX,i=e.touches[0].clientY,o=Math.abs(f-t);o>Math.abs(_-i)&&o>10&&(e.preventDefault(),e.stopPropagation(),v=!0)}}
        @touchend=${e=>{if(!n.allow_swipe)return;const t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY,o=f-t,a=_-i;Math.abs(o)>Math.abs(a)&&Math.abs(o)>50?(e.preventDefault(),e.stopPropagation(),o>0?h(e):g(e)):n.auto_play&&S(),f=0,_=0,v=!1}}
        @mousedown=${e=>{if(!n.allow_swipe)return;const t=e.target;"BUTTON"===t.tagName||"A"===t.tagName||t.closest("button")||t.closest("a")||t.closest(".slider-arrow")||t.closest(".pagination-dot")||t.closest(".pagination-number")||(x=e.clientX,k=e.clientY,w=!0,y.clearTimer(n.id))}}
        @mousemove=${e=>{if(!n.allow_swipe||!w||!x)return;const t=Math.abs(x-e.clientX);t>Math.abs(k-e.clientY)&&t>10&&e.preventDefault()}}
        @mouseup=${e=>{if(!n.allow_swipe||!w)return;const t=e.clientX,i=e.clientY,o=x-t,a=k-i;Math.abs(o)>Math.abs(a)&&Math.abs(o)>50?(e.preventDefault(),o>0?h(e):g(e)):n.auto_play&&S(),x=0,k=0,w=!1}}
        @mouseleave=${e=>{w&&(w=!1,x=0,k=0,n.auto_play&&S()),n.pause_on_hover&&n.auto_play&&!w&&S()}}
        @mouseenter=${()=>n.pause_on_hover&&void y.clearTimer(n.id)}
        @keydown=${e=>{n.allow_keyboard&&("ArrowLeft"===e.key?(e.preventDefault(),g(e)):"ArrowRight"===e.key&&(e.preventDefault(),h(e)))}}
        @wheel=${e=>{n.allow_mousewheel&&(e.preventDefault(),e.deltaY>0?h(e):e.deltaY<0&&g(e))}}
      >
        ${n.show_pagination&&"top"===n.pagination_position?T():""}

        <div
          class="slider-wrapper effect-${P}"
          style="${"slide-left"===P?`transform: translateX(-${z*(100/d+c)}%)`:"slide-right"===P?`transform: translateX(${z*(100/d+c)}%)`:"slide-top"===P?`transform: translateY(-${100*z}%)`:"slide-bottom"===P?`transform: translateY(${100*z}%)`:""}"
        >
          ${r.map(((e,n)=>{const r=n===z;return m.qy`
              <div class="slider-slide ${r?"active":""}">
                <div class="slide-content">
                  ${e.map((e=>{const n=a.getModule(e.type);return n?b.S.evaluateModuleVisibility(e)?n.renderPreview(e,t,i,o):"":m.qy`<div>Unknown module type: ${e.type}</div>`}))}
                </div>
              </div>
            `}))}
        </div>

        ${(()=>{if(!n.show_arrows)return"";const e=n.arrow_size||40,t=n.arrow_style||"circle",i=n.arrow_position||"inside",o=n.arrows_always_visible||!1,a=`\n        width: ${e}px;\n        height: ${e}px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        border: none;\n        transition: all 0.3s;\n        background: ${"minimal"!==t?n.arrow_background_color||"rgba(0, 0, 0, 0.5)":"transparent"};\n        color: ${n.arrow_color||"white"};\n        border: ${"square"===t||"minimal"===t?"2px solid "+(n.arrow_color||"white"):"none"};\n        border-radius: ${"circle"===t?"50%":"square"===t?"4px":"0"};\n        opacity: ${o?"1":"0"};\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        z-index: 10;\n      `;return m.qy`
        <button
          class="slider-arrow slider-arrow-prev"
          @click=${e=>{e.stopPropagation(),g(e)}}
          style="${a} left: ${"outside"===i?`-${e+10}px`:"10px"};"
        >
          <ha-icon icon="${n.prev_arrow_icon||"mdi:chevron-left"}"></ha-icon>
        </button>
        <button
          class="slider-arrow slider-arrow-next"
          @click=${e=>{e.stopPropagation(),h(e)}}
          style="${a} right: ${"outside"===i?`-${e+10}px`:"10px"};"
        >
          <ha-icon icon="${n.next_arrow_icon||"mdi:chevron-right"}"></ha-icon>
        </button>
      `})()}
        ${n.show_pagination&&"bottom"===n.pagination_position?T():""}
        ${n.show_pagination&&"left"===n.pagination_position?T():""}
        ${n.show_pagination&&"right"===n.pagination_position?T():""}
      </div>
    `}validate(e){const t=e,i=[...super.validate(e).errors];return t.modules||i.push("Slider must have a modules array"),t.slider_height&&(t.slider_height<50||t.slider_height>1e3)&&i.push("Slider height must be between 50 and 1000 pixels"),t.slides_per_view&&(t.slides_per_view<1||t.slides_per_view>5)&&i.push("Slides per view must be between 1 and 5"),{valid:0===i.length,errors:i}}getStyles(){return""}}class k extends f.m{constructor(){super(...arguments),this.metadata={type:"pagebreak",title:"Page Break",description:"Separates slider content into pages",author:"WJD Designs",version:"1.0.0",icon:"mdi:format-page-break",category:"layout",tags:["slider","page","break","separator","divider"]}}createDefault(e,t){return{id:e||this.generateId("pagebreak"),type:"pagebreak",display_mode:"always",display_conditions:[]}}renderGeneralTab(e,t,i,o){var n;return null===(n=null==t?void 0:t.locale)||void 0===n||n.language,m.qy`
      ${this.injectUcFormStyles()}
      <div class="module-general-settings">
        <!-- Info Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div style="display: flex; align-items: flex-start; gap: 12px;">
            <ha-icon
              icon="mdi:information"
              style="color: var(--info-color); margin-top: 2px; flex-shrink: 0; font-size: 24px;"
            ></ha-icon>
            <div style="font-size: 14px; line-height: 1.5; color: var(--primary-text-color);">
              <strong>How Page Breaks Work:</strong><br />
              Page breaks are only visible in the editor. When used inside a Slider Layout, they
              separate content into different slides. All modules before a page break belong to one
              page, and modules after it belong to the next page.
            </div>
          </div>
        </div>
      </div>
    `}renderPreview(e,t,i,o){return m.qy``}validate(e){return super.validate(e)}getStyles(){return"\n      .pagebreak-module-container {\n        user-select: none;\n      }\n    "}}var w=i(9477),S=i(1394),O=i(1522),A=i(2929),C=i(3587),$=i(1371),T=i(1867),z=i(1986);class P{constructor(){this.modules=new Map,this.modulesByCategory=new Map,this.registerCoreModules()}static getInstance(){return P.instance||(P.instance=new P),P.instance}registerCoreModules(){this.registerModule(new o.o),this.registerModule(new n.O),this.registerModule(new a.Y),this.registerModule(new r.f),this.registerModule(new s.Q),this.registerModule(new l.m),this.registerModule(new d.k),this.registerModule(new c.R),this.registerModule(new p.W),this.registerModule(new u.s),this.registerModule(new h.b),this.registerModule(new g.j),this.registerModule(new x),this.registerModule(new k),this.registerModule(new w.w),this.registerModule(new S.w),this.registerModule(new O.E),this.registerModule(new A.X),this.registerModule(new C.S),this.registerModule(new $.U),this.registerModule(new T.p),this.registerModule(new z.UltraExternalCardModule)}registerModule(e){const t=e.metadata.type;this.modules.has(t)&&console.warn(`Module with type "${t}" is already registered. Overriding...`),this.modules.set(t,e),this.updateCategoryMap(e)}unregisterModule(e){return!!this.modules.get(e)&&(this.modules.delete(e),this.updateCategoryMaps(),!0)}getModule(e){return this.modules.get(e)}getAllModules(){return Array.from(this.modules.values())}getModulesByCategory(e){return this.modulesByCategory.get(e)||[]}getCategories(){return Array.from(this.modulesByCategory.keys())}getAllModuleMetadata(){return this.getAllModules().map((e=>e.metadata))}searchModules(e){const t=e.toLowerCase();return this.getAllModules().filter((e=>{const i=e.metadata;return i.title.toLowerCase().includes(t)||i.description.toLowerCase().includes(t)||i.tags.some((e=>e.toLowerCase().includes(t)))||i.type.toLowerCase().includes(t)}))}createDefaultModule(e,t,i){const o=this.getModule(e);if(!o)return console.error(`Module type "${e}" not found in registry`),null;try{return o.createDefault(t,i)}catch(t){return console.error(`Error creating default module for type "${e}":`,t),null}}validateModule(e){const t=this.getModule(e.type);return t?t.validate(e):{valid:!1,errors:[`Unknown module type: ${e.type}`]}}getAllModuleStyles(){let e="";for(const t of this.getAllModules())t.getStyles&&(e+=`\n/* Styles for ${t.metadata.title} */\n`,e+=t.getStyles(),e+="\n");return e+=this.getCommonFormStyles(),e}isModuleRegistered(e){return this.modules.has(e)}getRegistryStats(){const e=this.getAllModules(),t={},i=new Set;return e.forEach((e=>{const o=e.metadata.category;t[o]=(t[o]||0)+1,i.add(e.metadata.author)})),{totalModules:e.length,modulesByCategory:t,authors:Array.from(i)}}updateCategoryMap(e){const t=e.metadata.category;this.modulesByCategory.has(t)||this.modulesByCategory.set(t,[]);const i=this.modulesByCategory.get(t),o=i.findIndex((t=>t.metadata.type===e.metadata.type));o>=0?i[o]=e:i.push(e)}updateCategoryMaps(){this.modulesByCategory.clear(),this.getAllModules().forEach((e=>this.updateCategoryMap(e)))}getCommonFormStyles(){return'\n      /* Common form styles for all modules */\n      .module-general-settings {\n        padding: 0;\n      }\n      \n      .form-field {\n        margin-bottom: 16px;\n      }\n      \n      .form-label {\n        display: block;\n        font-weight: 500;\n        margin-bottom: 4px;\n        font-size: 14px;\n        color: var(--primary-text-color);\n      }\n      \n      .form-description {\n        font-size: 12px;\n        color: var(--secondary-text-color);\n        margin-top: 4px;\n        line-height: 1.3;\n      }\n\n      /* Container Module Global Styles */\n      .container-module {\n        --container-drag-handle-opacity: 0.8;\n        --container-badge-opacity: 0.9;\n      }\n\n      .container-module:hover {\n        --container-drag-handle-opacity: 1;\n        --container-badge-opacity: 1;\n      }\n\n      /* Container-specific colors that can be overridden by individual modules */\n      .horizontal-module-preview.container-module {\n        --container-primary-color: #9c27b0; /* Purple for horizontal */\n        --container-secondary-color: #e1bee7;\n        --container-accent-color: #7b1fa2;\n        --container-border-color: #ba68c8;\n      }\n\n      .vertical-module-preview.container-module {\n        --container-primary-color: #3f51b5; /* Indigo for vertical */\n        --container-secondary-color: #c5cae9;\n        --container-accent-color: #303f9f;\n        --container-border-color: #7986cb;\n      }\n\n      .slider-module-preview.container-module {\n        --container-primary-color: #00bcd4; /* Cyan for slider */\n        --container-secondary-color: #b2ebf2;\n        --container-accent-color: #0097a7;\n        --container-border-color: #4dd0e1;\n      }\n      \n      .form-field input[type="text"],\n      .form-field input[type="number"],\n      .form-field select,\n      .form-field textarea {\n        width: 100%;\n        padding: 8px 12px;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 14px;\n        font-family: inherit;\n        box-sizing: border-box;\n      }\n      \n      .form-field input[type="color"] {\n        width: 60px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        cursor: pointer;\n        background: none;\n      }\n      \n      .form-field input:focus,\n      .form-field select:focus,\n      .form-field textarea:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 1px var(--primary-color);\n      }\n      \n      .form-field textarea {\n        resize: vertical;\n        min-height: 60px;\n        font-family: monospace;\n      }\n      \n      .checkbox-wrapper {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 14px;\n        cursor: pointer;\n        color: var(--primary-text-color);\n      }\n      \n      .checkbox-wrapper input[type="checkbox"] {\n        margin: 0;\n        cursor: pointer;\n      }\n      \n      .checkbox-group {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n        gap: 8px;\n        margin-top: 8px;\n      }\n    '}}const E=()=>P.getInstance()},7987:(e,t,i)=>{i.d(t,{k:()=>o});class o{static getHoverEffectClass(e){if(!e||!e.effect||"none"===e.effect)return"";const t=e.intensity||"normal";return`uc-hover-${e.effect}-${t}`}static generateHoverEffectStyles(e){if(!e||!e.effect||"none"===e.effect)return"";const t=e.duration||300,i=e.timing||"ease",o=e.intensity||"normal",n=this.getHoverEffectClass(e);let a=`\n      .${n} {\n        transition: all ${t}ms ${i};\n        cursor: pointer;\n      }\n      .${n}:hover {\n    `;switch(e.effect){case"highlight":a+=`\n          background-color: ${e.highlight_color||"rgba(var(--rgb-primary-color), 0.2)"} !important;\n        `;break;case"outline":const n=e.outline_color||"var(--primary-color)";a+=`\n          outline: ${e.outline_width||2}px solid ${n};\n          outline-offset: 2px;\n        `;break;case"grow":a+=`\n          transform: scale(${this.getScaleValue("grow",o)});\n        `;break;case"shrink":a+=`\n          transform: scale(${this.getScaleValue("shrink",o)});\n        `;break;case"pulse":a+=`\n          animation: uc-pulse-${o} ${t}ms ${i} infinite;\n        `;break;case"bounce":a+=`\n          animation: uc-bounce-${o} ${t}ms ${i};\n        `;break;case"float":a+=`\n          transform: translateY(-${this.getFloatDistance(o)}px);\n        `;break;case"glow":const r=e.glow_color||"var(--primary-color)";a+=`\n          box-shadow: 0 0 ${this.getGlowIntensity(o)}px ${r};\n        `;break;case"shadow":const s=e.shadow_color||"rgba(0, 0, 0, 0.3)",l=this.getShadowIntensity(o);a+=`\n          box-shadow: 0 ${l}px ${2*l}px ${s};\n        `;break;case"rotate":a+=`\n          transform: rotate(${e.rotate_degrees||this.getRotateDegrees(o)}deg);\n        `;break;case"skew":const d=this.getSkewValue(o);a+=`\n          transform: skew(${d}deg, ${d}deg);\n        `;break;case"wobble":a+=`\n          animation: uc-wobble-${o} ${t}ms ${i};\n        `;break;case"buzz":a+=`\n          animation: uc-buzz-${o} ${t}ms ${i};\n        `;break;case"fade":a+=`\n          opacity: ${this.getFadeOpacity(o)};\n        `}return a+="\n      }\n    ",a}static generateAllHoverEffectStyles(){const e=["subtle","normal","strong"];let t="";return t+=this.generateAllKeyframes(),["highlight","outline","grow","shrink","pulse","bounce","float","glow","shadow","rotate","skew","wobble","buzz","fade"].forEach((i=>{e.forEach((e=>{const o={effect:i,intensity:e,duration:300,timing:"ease"};t+=this.generateHoverEffectStyles(o)}))})),t}static generateAllKeyframes(){let e="";return["subtle","normal","strong"].forEach((t=>{e+=this.generatePulseKeyframes(`uc-pulse-${t}`,t),e+=this.generateBounceKeyframes(`uc-bounce-${t}`,t),e+=this.generateWobbleKeyframes(`uc-wobble-${t}`,t),e+=this.generateBuzzKeyframes(`uc-buzz-${t}`,t)})),e}static getScaleValue(e,t){const i={grow:{subtle:1.02,normal:1.05,strong:1.1},shrink:{subtle:.98,normal:.95,strong:.9}};return i[e][t]||i[e].normal}static getBounceDistance(e){const t={subtle:2,normal:4,strong:8};return t[e]||t.normal}static getFloatDistance(e){const t={subtle:2,normal:4,strong:8};return t[e]||t.normal}static getGlowIntensity(e){const t={subtle:5,normal:10,strong:20};return t[e]||t.normal}static getShadowIntensity(e){const t={subtle:2,normal:4,strong:8};return t[e]||t.normal}static getRotateDegrees(e){const t={subtle:2,normal:5,strong:10};return t[e]||t.normal}static getSkewValue(e){const t={subtle:1,normal:2,strong:4};return t[e]||t.normal}static getFadeOpacity(e){const t={subtle:.8,normal:.6,strong:.4};return t[e]||t.normal}static generatePulseKeyframes(e,t){return`\n      @keyframes ${e} {\n        0% { transform: scale(1); }\n        50% { transform: scale(${this.getScaleValue("grow",t)}); }\n        100% { transform: scale(1); }\n      }\n    `}static generateBounceKeyframes(e,t){const i=this.getBounceDistance(t);return`\n      @keyframes ${e} {\n        0%, 20%, 53%, 80%, 100% { transform: translateY(0); }\n        40%, 43% { transform: translateY(-${i}px); }\n        70% { transform: translateY(-${i/2}px); }\n        90% { transform: translateY(-${i/4}px); }\n      }\n    `}static generateWobbleKeyframes(e,t){const i=this.getSkewValue(t);return`\n      @keyframes ${e} {\n        16.65% { transform: translateX(-${i}px) rotate(-${i}deg); }\n        33.3% { transform: translateX(${i/2}px) rotate(${i/2}deg); }\n        49.95% { transform: translateX(-${i/3}px) rotate(-${i/3}deg); }\n        66.6% { transform: translateX(${i/4}px) rotate(${i/4}deg); }\n        83.25% { transform: translateX(-${i/5}px) rotate(-${i/5}deg); }\n        100% { transform: translateX(0) rotate(0); }\n      }\n    `}static generateBuzzKeyframes(e,t){const i=this.getSkewValue(t);return`\n      @keyframes ${e} {\n        10% { transform: translateX(-${i}px) rotate(-${i}deg); }\n        20% { transform: translateX(${i}px) rotate(${i}deg); }\n        30% { transform: translateX(-${i}px) rotate(-${i}deg); }\n        40% { transform: translateX(${i}px) rotate(${i}deg); }\n        50% { transform: translateX(-${i}px) rotate(-${i}deg); }\n        60% { transform: translateX(${i}px) rotate(${i}deg); }\n        70% { transform: translateX(-${i}px) rotate(-${i}deg); }\n        80% { transform: translateX(${i}px) rotate(${i}deg); }\n        90% { transform: translateX(-${i}px) rotate(-${i}deg); }\n        100% { transform: translateX(0) rotate(0); }\n      }\n    `}static injectHoverEffectStyles(e,t){const i="uc-hover-effects-styles";if(e){let o=e.querySelector(`#${i}`);o||(o=document.createElement("style"),o.id=i,e.appendChild(o)),t&&t.length>0?o.textContent=this.generateDynamicHoverEffectStyles(t):o.textContent=this.generateAllHoverEffectStyles()}else{let e=document.getElementById(i);e||(e=document.createElement("style"),e.id=i,document.head.appendChild(e)),t&&t.length>0?e.textContent=this.generateDynamicHoverEffectStyles(t):e.textContent=this.generateAllHoverEffectStyles()}}static generateDynamicHoverEffectStyles(e){let t="";return t+=this.generateAllKeyframes(),e.forEach((e=>{e&&e.effect&&"none"!==e.effect&&(t+=this.generateHoverEffectStyles(e))})),t+=this.generateAllHoverEffectStyles(),t}static updateHoverEffectStyles(e,t){const i="uc-hover-effects-styles";let o=e.querySelector(`#${i}`);o||(o=document.createElement("style"),o.id=i,e.appendChild(o)),o.textContent=this.generateDynamicHoverEffectStyles(t)}static removeHoverEffectStyles(e){const t="uc-hover-effects-styles";if(e){const i=e.querySelector(`#${t}`);i&&i.remove()}else{const e=document.getElementById(t);e&&e.remove()}}}},8287:(e,t,i)=>{var o=i(5183),n=i(4276),a=i(2314),r=i(927),s=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let l=class extends o.WF{constructor(){super(...arguments),this.open=!1,this._name="",this._description="",this._tags=""}render(){return this.open?o.qy`
      <div class="dialog-overlay" @click=${this._handleOverlayClick}>
        <div class="dialog-content" @click=${e=>e.stopPropagation()}>
          <div class="dialog-header">
            <h3>Save as Favorite</h3>
            <button class="close-btn" @click=${this._close}>
              <ha-icon icon="mdi:close"></ha-icon>
            </button>
          </div>

          <div class="dialog-body">
            <div class="field">
              <label>Name *</label>
              <input
                type="text"
                .value=${this._name}
                @input=${e=>this._name=e.target.value}
                placeholder="Enter a name for this favorite"
                required
              />
            </div>

            <div class="field">
              <label>Description</label>
              <textarea
                .value=${this._description}
                @input=${e=>this._description=e.target.value}
                placeholder="Optional description"
                rows="3"
              ></textarea>
            </div>

            <div class="field">
              <label>Tags</label>
              <input
                type="text"
                .value=${this._tags}
                @input=${e=>this._tags=e.target.value}
                placeholder="Comma-separated tags (e.g., lights, bedroom, automation)"
              />
              <small>Use tags to organize and search your favorites</small>
            </div>
          </div>

          <div class="dialog-footer">
            <button class="cancel-btn" @click=${this._close}>Cancel</button>
            <button class="save-btn" @click=${this._save} ?disabled=${!this._name.trim()}>
              Save Favorite
            </button>
          </div>
        </div>
      </div>
    `:o.qy``}_handleOverlayClick(e){e.target===e.currentTarget&&this._close()}_close(){this.open=!1,this._reset(),this.dispatchEvent(new CustomEvent("close"))}_save(){if(!this._name.trim())return;const e=this._tags.split(",").map((e=>e.trim().toLowerCase())).filter(Boolean);r.B.addFavorite(this.row,this._name.trim(),this._description.trim()||void 0,e),this.dispatchEvent(new CustomEvent("saved",{detail:{name:this._name.trim()}})),this._close()}_reset(){this._name="",this._description="",this._tags=""}};l.styles=o.AH`
    :host {
      display: contents;
    }

    .dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: ${a.Mu.DIALOG_OVERLAY};
      padding: 20px;
    }

    .dialog-content {
      background: var(--card-background-color);
      border-radius: 12px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow: auto;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .dialog-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 1px solid var(--divider-color);
    }

    .dialog-header h3 {
      margin: 0;
      color: var(--primary-text-color);
      font-size: 18px;
      font-weight: 600;
    }

    .close-btn {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      border: none;
      border-radius: 6px;
      color: var(--secondary-text-color);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .close-btn:hover {
      background: var(--secondary-background-color);
      color: var(--primary-text-color);
    }

    .dialog-body {
      padding: 24px;
    }

    .field {
      margin-bottom: 20px;
    }

    .field:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 500;
      color: var(--primary-text-color);
      font-size: 14px;
    }

    input,
    textarea {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--divider-color);
      border-radius: 6px;
      background: var(--secondary-background-color);
      color: var(--primary-text-color);
      font-size: 14px;
      font-family: inherit;
      transition: border-color 0.2s ease;
      box-sizing: border-box;
    }

    input:focus,
    textarea:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    small {
      display: block;
      margin-top: 4px;
      font-size: 12px;
      color: var(--secondary-text-color);
    }

    .dialog-footer {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 12px;
      padding: 20px 24px;
      border-top: 1px solid var(--divider-color);
    }

    .cancel-btn,
    .save-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cancel-btn {
      background: var(--secondary-background-color);
      color: var(--secondary-text-color);
      border: 1px solid var(--divider-color);
    }

    .cancel-btn:hover {
      background: var(--divider-color);
      color: var(--primary-text-color);
    }

    .save-btn {
      background: var(--primary-color);
      color: white;
    }

    .save-btn:hover:not(:disabled) {
      background: var(--primary-color-dark);
    }

    .save-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    @media (max-width: 600px) {
      .dialog-content {
        margin: 0;
        border-radius: 0;
        height: 100vh;
        max-height: none;
      }

      .dialog-footer {
        flex-direction: column-reverse;
        gap: 8px;
      }

      .cancel-btn,
      .save-btn {
        width: 100%;
      }
    }
  `,s([(0,n.MZ)({attribute:!1})],l.prototype,"row",void 0),s([(0,n.MZ)({type:Boolean})],l.prototype,"open",void 0),s([(0,n.wk)()],l.prototype,"_name",void 0),s([(0,n.wk)()],l.prototype,"_description",void 0),s([(0,n.wk)()],l.prototype,"_tags",void 0),l=s([(0,n.EM)("uc-favorite-dialog")],l)},8460:(e,t,i)=>{i.d(t,{x:()=>r});class o{constructor(){this._sessionId=null,this._isEnabled=!1,this._listeners=new Set,this._deviceId=this._getOrCreateDeviceId(),this._sessionId=this._loadSessionId()}isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0,console.log("✅ Cloud session sync enabled")}disable(){this._isEnabled=!1,this.stopPolling(),console.log("📴 Cloud session sync disabled")}async createSession(e,t){if(!this._isEnabled)return console.log("📝 Cloud session sync disabled, skipping session creation"),null;try{console.log("🔄 Creating cloud session...");const i=await fetch(`${o.API_BASE}/ultra-card/v1/session/create`,{method:"POST",headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"application/json"},body:JSON.stringify({device_id:this._deviceId,device_name:this._getDeviceName(),user_id:e.id,ha_user_id:t})});if(!i.ok)throw new Error(`Session creation failed: ${i.status}`);const n=await i.json();if(n.success&&n.session_id)return this._sessionId=n.session_id,this._saveSessionId(n.session_id),console.log("✅ Cloud session created:",n.session_id),n.session_id;throw new Error("Invalid session response")}catch(e){return console.warn("⚠️ Failed to create cloud session, using local-only mode:",e),null}}async getCurrentSession(e,t){var i;if(!this._isEnabled)return null;try{console.log("🔄 Checking for active cloud session...");const n={"Content-Type":"application/json"};t&&(n.Authorization=`Bearer ${t}`);let a=`${o.API_BASE}/ultra-card/v1/session/current`;e&&(a+=`?ha_user_id=${encodeURIComponent(e)}`);const r=await fetch(a,{method:"GET",headers:n,credentials:"include"});if(!r.ok){if(404===r.status)return console.log("📭 No active cloud session found"),null;if(401===r.status)return console.log("🔐 Not authenticated, cannot retrieve session"),null;throw new Error(`Session fetch failed: ${r.status}`)}const s=await r.json();return s.success&&(null===(i=s.session)||void 0===i?void 0:i.user)?(this._sessionId=s.session.session_id,this._saveSessionId(s.session.session_id),console.log("✅ Retrieved active cloud session"),s.session.user):null}catch(e){return console.warn("⚠️ Failed to fetch cloud session:",e),null}}async validateSession(e){if(!this._isEnabled||!this._sessionId)return!0;try{const t=await fetch(`${o.API_BASE}/ultra-card/v1/session/validate`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({session_id:this._sessionId})});if(!t.ok)return!1;const i=await t.json();return i.success&&!0===i.valid}catch(e){return console.warn("⚠️ Session validation failed:",e),!0}}async invalidateSession(e){if(this._isEnabled)try{console.log("🔄 Invalidating cloud session..."),await fetch(`${o.API_BASE}/ultra-card/v1/session/logout`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),this._clearSessionId(),console.log("✅ Cloud session invalidated")}catch(e){console.warn("⚠️ Failed to invalidate cloud session:",e)}}startPolling(e,t){this._isEnabled&&(this.stopPolling(),console.log("🔄 Starting session validation polling"),this._pollTimer=window.setInterval((async()=>{await this.validateSession(e)||(console.warn("⚠️ Session invalidated remotely, logging out"),this.stopPolling(),t())}),o.POLL_INTERVAL))}stopPolling(){this._pollTimer&&(clearInterval(this._pollTimer),this._pollTimer=void 0,console.log("✅ Stopped session validation polling"))}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}_getOrCreateDeviceId(){try{let e=localStorage.getItem(o.DEVICE_ID_KEY);return e||(e=`device_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem(o.DEVICE_ID_KEY,e)),e}catch(e){return`device_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}_getDeviceName(){const e=navigator.userAgent;let t="Unknown Browser",i="Unknown OS";return e.includes("Chrome")?t="Chrome":e.includes("Safari")?t="Safari":e.includes("Firefox")?t="Firefox":e.includes("Edge")&&(t="Edge"),e.includes("Windows")?i="Windows":e.includes("Mac")?i="macOS":e.includes("Linux")?i="Linux":e.includes("Android")?i="Android":e.includes("iOS")&&(i="iOS"),`${t} on ${i}`}_loadSessionId(){try{return localStorage.getItem(o.SESSION_ID_KEY)}catch(e){return null}}_saveSessionId(e){try{localStorage.setItem(o.SESSION_ID_KEY,e)}catch(e){console.error("Failed to save session ID:",e)}}_clearSessionId(){try{localStorage.removeItem(o.SESSION_ID_KEY),this._sessionId=null}catch(e){console.error("Failed to clear session ID:",e)}}}o.API_BASE="https://ultracard.io/wp-json",o.SESSION_ID_KEY="ultra-card-session-id",o.POLL_INTERVAL=3e4,o.DEVICE_ID_KEY="ultra-card-device-id";const n=new o;class a{constructor(){this._currentUser=null,this._listeners=new Set,this._loadFromStorage(),this._setupAutoRefresh()}checkIntegrationAuth(e){var t,i;try{const o="sensor.ultra_card_pro_cloud_authentication_status",n=null===(t=null==e?void 0:e.states)||void 0===t?void 0:t[o];if(!n)return null;if("connected"!==n.state||!(null===(i=n.attributes)||void 0===i?void 0:i.authenticated))return console.log("📝 Integration installed but not authenticated"),null;const a=n.attributes;return{id:a.user_id,username:a.username||"",email:a.email||"",displayName:a.display_name||a.username||"",token:a.token||"",expiresAt:0,subscription:{tier:a.subscription_tier||"free",status:a.subscription_status||"expired",expires:a.subscription_expires,features:a.features||{auto_backups:"pro"===a.subscription_tier,snapshots_enabled:"pro"===a.subscription_tier,snapshot_limit:"pro"===a.subscription_tier?10:0,backup_retention_days:90},snapshot_count:0,snapshot_limit:"pro"===a.subscription_tier?10:0}}}catch(e){return console.debug("No Ultra Card Pro Cloud integration found:",e),null}}isIntegrationInstalled(e){var t;try{const i="sensor.ultra_card_pro_cloud_authentication_status";return!!(null===(t=null==e?void 0:e.states)||void 0===t?void 0:t[i])}catch(e){return!1}}_getHassUserId(){var e;try{let t=window.hass;if(!t){const e=document.querySelectorAll("ultra-card");for(const i of Array.from(e)){const e=i.hass;if(e&&e.user){t=e;break}}}if(!t){const e=document.querySelector("home-assistant");e&&(t=e.hass)}const i=(null===(e=null==t?void 0:t.user)||void 0===e?void 0:e.id)||null;return i?console.log("✅ HA user ID found:",i):console.log("📝 HA user ID not available yet, hass object:",t?"exists":"missing","user:",(null==t?void 0:t.user)?"exists":"missing"),i}catch(e){return console.warn("Failed to get HA user ID:",e),null}}_retryCloudSessionCheck(){let e=0;const t=()=>{e++,this._getHassUserId()&&!this._currentUser?(console.log("🔄 Retrying cloud session check with now-available HA user ID (attempt",e,")"),this._checkCloudSession()):e<10?setTimeout(t,500):console.log("📝 Max retries reached, HA user ID still not available")};setTimeout(t,500)}async _checkCloudSession(){if(!n.isEnabled())return;console.log("🔄 Checking for active cloud session...");const e=this._getFromLocalStorage(),t=this._getHassUserId(),i=await n.getCurrentSession(t,null==e?void 0:e.token);if(i)return console.log("✅ Found active cloud session, syncing authentication"),this._setCurrentUser(i),this._saveToStorage(),this._setupAutoRefresh(),void n.startPolling(i.token,(()=>{this.logout()}));this._currentUser&&(await n.validateSession(this._currentUser.token)?n.startPolling(this._currentUser.token,(()=>{this.logout()})):(console.warn("⚠️ Local session invalidated remotely"),await this.logout()))}getCurrentUser(){return this._currentUser}setIntegrationUser(e){this._setCurrentUser(e),this._saveToStorage()}isAuthenticated(){return!!this._currentUser&&(!this._currentUser.token||""===this._currentUser.token||this._isTokenValid())}shouldRefreshToken(){return this._shouldRefreshToken()}async login(e){try{const t=await fetch(`${a.API_BASE}${a.JWT_ENDPOINT}/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,password:e.password})});if(!t.ok){const e=await t.json().catch((()=>({message:"Login failed"})));throw new Error(e.message||`HTTP ${t.status}: ${t.statusText}`)}const i=await t.json(),o=this._createUserFromAuth(i);if(await this._fetchSubscriptionData(o),this._setCurrentUser(o),this._saveToStorage(),this._setupAutoRefresh(),n.isEnabled()){const e=this._getHassUserId();e?(await n.createSession(o,e),n.startPolling(o.token,(()=>{this.logout()}))):console.warn("⚠️ HA user ID not available, cloud session sync disabled")}return o}catch(e){throw console.error("❌ Login failed:",e),e}}async register(e){try{const t=await fetch(`${a.API_BASE}/wp/v2/users/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,email:e.email,password:e.password,first_name:e.firstName||"",last_name:e.lastName||""})});if(!t.ok){const e=await t.json().catch((()=>({message:"Registration failed"})));throw new Error(e.message||`Registration failed: ${t.statusText}`)}return await this.login({username:e.username,password:e.password})}catch(e){throw console.error("❌ Registration failed:",e),e}}async refreshToken(e=0){var t;if(!(null===(t=this._currentUser)||void 0===t?void 0:t.refreshToken))throw new Error("No refresh token available");try{const e=await fetch(`${a.API_BASE}${a.JWT_ENDPOINT}/token/refresh`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:this._currentUser.refreshToken})});if(!e.ok){if(e.status>=400&&e.status<500)throw new Error(`Invalid refresh token (${e.status})`);throw new Error(`Token refresh failed: ${e.statusText}`)}const t=await e.json();return this._currentUser=Object.assign(Object.assign({},this._currentUser),{token:t.token,expiresAt:Date.now()+1e3*(t.expires_in||3600)}),this._saveToStorage(),this._notifyListeners(),t.token}catch(t){if((t instanceof Error?t.message:"Unknown error").includes("Invalid refresh token"))throw console.error("❌ Refresh token invalid, logging out"),await this.logout(),t;if(e<3){const t=1e3*Math.pow(2,e);return console.warn(`⚠️ Token refresh failed (attempt ${e+1}/3), retrying in ${t}ms...`),await new Promise((e=>setTimeout(e,t))),this.refreshToken(e+1)}throw this._isTokenValid()?console.warn("⚠️ Refresh failed but token still valid, keeping session"):(console.error("❌ All refresh attempts failed and token expired, logging out"),await this.logout()),t}}async logout(){var e,t;try{(null===(e=this._currentUser)||void 0===e?void 0:e.token)&&n.isEnabled()&&(await n.invalidateSession(this._currentUser.token),n.stopPolling()),(null===(t=this._currentUser)||void 0===t?void 0:t.token)&&await fetch(`${a.API_BASE}${a.JWT_ENDPOINT}/token/invalidate`,{method:"POST",headers:{Authorization:`Bearer ${this._currentUser.token}`}}).catch((()=>{}))}finally{this._setCurrentUser(null),this._clearStorage(),this._clearAutoRefresh()}}getAuthHeader(){return this.isAuthenticated()?`Bearer ${this._currentUser.token}`:null}async authenticatedFetch(e,t={}){var i;const o=this.getAuthHeader();if(!o)throw new Error("Not authenticated");const n=await fetch(e,Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers),{Authorization:o,"Content-Type":"application/json"})}));if(401===n.status&&(null===(i=this._currentUser)||void 0===i?void 0:i.refreshToken))try{await this.refreshToken();const i=this.getAuthHeader();if(i)return fetch(e,Object.assign(Object.assign({},t),{headers:Object.assign(Object.assign({},t.headers),{Authorization:i,"Content-Type":"application/json"})}))}catch(e){throw new Error("Authentication expired. Please login again.")}return n}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}_createUserFromAuth(e){return{id:e.user_id,username:e.user_nicename,email:e.user_email,displayName:e.user_display_name,avatar:e.avatar_url,token:e.token,refreshToken:e.refresh_token,expiresAt:Date.now()+1e3*(e.expires_in||3600)}}_setCurrentUser(e){this._currentUser=e,this._notifyListeners()}_notifyListeners(){this._listeners.forEach((e=>{try{e(this._currentUser)}catch(e){console.error("Error in auth listener:",e)}}))}_isTokenValid(){return!!this._currentUser&&(!this._currentUser.expiresAt||0===this._currentUser.expiresAt||Date.now()<this._currentUser.expiresAt)}_shouldRefreshToken(){return!!this._currentUser&&Date.now()>=this._currentUser.expiresAt-a.REFRESH_THRESHOLD}_setupAutoRefresh(){if(this._clearAutoRefresh(),!this._currentUser)return;const e=this._currentUser.expiresAt-Date.now()-a.REFRESH_THRESHOLD;e>0&&(this._refreshTimer=window.setTimeout((async()=>{try{await this.refreshToken(),this._setupAutoRefresh()}catch(e){console.error("Auto-refresh failed:",e)}}),e))}_clearAutoRefresh(){this._refreshTimer&&(clearTimeout(this._refreshTimer),this._refreshTimer=void 0)}async _fetchSubscriptionData(e){try{const t=await fetch(`${a.API_BASE}/ultra-card/v1/subscription`,{method:"GET",headers:{Authorization:`Bearer ${e.token}`,"Content-Type":"application/json"}});if(t.ok){const i=await t.json();e.subscription=i}else console.warn("⚠️ Failed to fetch subscription, defaulting to free tier"),e.subscription={tier:"free",status:"active",features:{auto_backups:!0,snapshots_enabled:!1,snapshot_limit:0,backup_retention_days:30},snapshot_count:0,snapshot_limit:0}}catch(t){console.error("❌ Error fetching subscription:",t),e.subscription={tier:"free",status:"active",features:{auto_backups:!0,snapshots_enabled:!1,snapshot_limit:0,backup_retention_days:30},snapshot_count:0,snapshot_limit:0}}}_loadFromStorage(){try{const e=localStorage.getItem(a.STORAGE_KEY);if(e){const t=JSON.parse(e);this._isValidStoredUser(t)?this._currentUser=t:this._clearStorage()}}catch(e){console.error("❌ Failed to load auth from storage:",e),this._clearStorage()}}_saveToStorage(){try{if(this._currentUser){const e=JSON.stringify(this._currentUser);localStorage.setItem(a.STORAGE_KEY,e)}else this._clearStorage()}catch(e){console.error("❌ Failed to save auth to storage:",e)}}_clearStorage(){try{localStorage.removeItem(a.STORAGE_KEY)}catch(e){console.error("❌ Failed to clear auth storage:",e)}}_getFromLocalStorage(){try{const e=localStorage.getItem(a.STORAGE_KEY);if(e)return JSON.parse(e)}catch(e){console.error("❌ Failed to read from storage:",e)}return null}_isValidStoredUser(e){if(!e)return console.warn("❌ Validation failed: user is null/undefined"),!1;const t={"user exists":!!e,"id is number":"number"==typeof e.id,"username is string":"string"==typeof e.username,"email is string":"string"==typeof e.email,"displayName is string":"string"==typeof e.displayName},i=Object.entries(t).filter((([e,t])=>!t)).map((([e])=>e));return i.length>0?(console.warn("❌ Validation failed. Failed checks:",i),console.warn("   User data:",JSON.stringify(e,null,2)),!1):void 0!==e.token&&"string"!=typeof e.token?(console.warn("❌ Validation failed: token exists but is not a string"),!1):void 0===e.expiresAt||"number"==typeof e.expiresAt||(console.warn("❌ Validation failed: expiresAt exists but is not a number"),!1)}}a.API_BASE="https://ultracard.io/wp-json",a.JWT_ENDPOINT="/jwt-auth/v1",a.STORAGE_KEY="ultra-card-cloud-auth",a.REFRESH_THRESHOLD=3e5;const r=new a},8525:(e,t,i)=>{i.d(t,{M:()=>o});const o=new class{getAvailableCards(){const e=window;return e.customCards&&Array.isArray(e.customCards)?[...e.customCards].filter((e=>"ultra-card"!==e.type)).sort(((e,t)=>(e.name||e.type).localeCompare(t.name||t.type))):[]}isCardAvailable(e){if(!e)return!1;try{if(void 0!==customElements.get(e))return!0}catch(e){}return!(!window.customCards||!Array.isArray(window.customCards))&&window.customCards.some((t=>t.type===e))}getCardInfo(e){const t=window;return t.customCards&&Array.isArray(t.customCards)&&t.customCards.find((t=>t.type===e))||null}getCardEditor(e){return new Promise((t=>{try{const i=`${e}-editor`;void 0!==customElements.get(i)?t(document.createElement(i)):t(null)}catch(i){console.warn(`Failed to create editor for ${e}:`,i),t(null)}}))}validateCardConfig(e,t){const i=[];return e&&"string"==typeof e||i.push("Card type is required and must be a string"),t&&"object"==typeof t||i.push("Card configuration is required and must be an object"),e&&!this.isCardAvailable(e)&&i.push(`Card type "${e}" is not installed or not available`),{valid:0===i.length,errors:i}}createCardElement(e,t,i){try{let o=e;if(o.startsWith("custom:")&&(o=o.substring(7)),!this.isCardAvailable(o))return null;const n=document.createElement(o);if(t)if("function"==typeof n.setConfig)try{n.setConfig(t)}catch(e){throw console.error(`[External Card] Failed to set config for ${o}:`,e),e}else n.config=t;return i&&(n.hass=i),n}catch(t){return console.error(`[External Card] Failed to create ${e}:`,t),null}}getPopularCards(){return[{type:"mushroom-entity-card",name:"Mushroom Entity Card",description:"Beautiful minimalist entity card"},{type:"mini-graph-card",name:"Mini Graph Card",description:"Compact history graph card"},{type:"button-card",name:"Button Card",description:"Highly customizable button card"},{type:"weather-card",name:"Weather Card",description:"Animated weather card"},{type:"spotify-card",name:"Spotify Card",description:"Spotify media player card"}]}hasCardEditor(e){if(!e)return!1;try{const t=`${e}-editor`,i=customElements.get(t);return void 0!==i&&!(i.prototype instanceof HTMLUnknownElement)}catch(e){return!1}}getHACSUrl(e){return{"mushroom-entity-card":"https://github.com/piitaya/lovelace-mushroom","mini-graph-card":"https://github.com/kalkih/mini-graph-card","button-card":"https://github.com/custom-cards/button-card","weather-card":"https://github.com/bramkragten/weather-card","spotify-card":"https://github.com/custom-cards/spotify-card"}[e]||null}}},8791:(e,t,i)=>{i.d(t,{_:()=>h,K:()=>f});var o=i(9247),n=i(2593),a=i(5201);const r=(e,t)=>{const i=e._$AN;if(void 0===i)return!1;for(const e of i)e._$AO?.(t,!1),r(e,t);return!0},s=e=>{let t,i;do{if(void 0===(t=e._$AM))break;i=t._$AN,i.delete(e),e=t}while(0===i?.size)},l=e=>{for(let t;t=e._$AM;e=t){let i=t._$AN;if(void 0===i)t._$AN=i=new Set;else if(i.has(e))break;i.add(e),p(t)}};function d(e){void 0!==this._$AN?(s(this),this._$AM=e,l(this)):this._$AM=e}function c(e,t=!1,i=0){const o=this._$AH,n=this._$AN;if(void 0!==n&&0!==n.size)if(t)if(Array.isArray(o))for(let e=i;e<o.length;e++)r(o[e],!1),s(o[e]);else null!=o&&(r(o,!1),s(o));else r(this,e)}const p=e=>{e.type==a.OA.CHILD&&(e._$AP??=c,e._$AQ??=d)};class u extends a.WL{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,i){super._$AT(e,t,i),l(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(r(this,e),s(this))}setValue(e){if((0,n.Rt)(this._$Ct))this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}const h=()=>new g;class g{}const m=new WeakMap,f=(0,a.u$)(class extends u{render(e){return o.s6}update(e,[t]){const i=t!==this.Y;return i&&void 0!==this.Y&&this.rt(void 0),(i||this.lt!==this.ct)&&(this.Y=t,this.ht=e.options?.host,this.rt(this.ct=e.element)),o.s6}rt(e){if(this.isConnected||(e=void 0),"function"==typeof this.Y){const t=this.ht??globalThis;let i=m.get(t);void 0===i&&(i=new WeakMap,m.set(t,i)),void 0!==i.get(this.Y)&&this.Y.call(this.ht,void 0),i.set(this.Y,e),void 0!==e&&this.Y.call(this.ht,e)}else this.Y.value=e}get lt(){return"function"==typeof this.Y?m.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}})},8914:(e,t,i)=>{i.d(t,{Q:()=>a});var o=i(5183);let n=!1;class a{static renderCleanForm(e,t,i,r){const s=`clean-form-${Math.random().toString(36).substr(2,9)}`;return setTimeout((()=>{const e=document.getElementById(s);e&&(a.setupFormObserver(e,s),a.aggressiveCleanup(e))}),0),setTimeout((()=>{const e=document.getElementById(s);e&&a.aggressiveCleanup(e)}),100),o.qy`
      <div class="ultra-clean-form" id="${s}">
        <ha-form
          .hass=${e}
          .data=${t}
          .schema=${i}
          .computeLabel=${()=>""}
          .computeDescription=${()=>""}
          @value-changed=${e=>{n||(n=!0,requestAnimationFrame((()=>{n=!1})),r(e),requestAnimationFrame((()=>{const e=document.getElementById(s);e&&a.aggressiveCleanup(e)})))}}
        ></ha-form>
      </div>
    `}static setupFormObserver(e,t){var i;a.activeObservers.has(t)&&(null===(i=a.activeObservers.get(t))||void 0===i||i.disconnect());const o=new MutationObserver((i=>{let o=!1;i.forEach((e=>{"childList"===e.type&&e.addedNodes.forEach((e=>{e.nodeType===Node.ELEMENT_NODE&&(o=!0)}))})),o&&!a.cleanupQueue.has(t)&&(a.cleanupQueue.add(t),setTimeout((()=>{a.aggressiveCleanup(e),a.cleanupQueue.delete(t)}),10))}));o.observe(e,{childList:!0,subtree:!0,characterData:!0}),a.activeObservers.set(t,o),setTimeout((()=>{document.contains(e)||(o.disconnect(),a.activeObservers.delete(t))}),3e4)}static aggressiveCleanup(e){var t;if(!e)return;const i=["action","entity","template_mode","icon","name","value","text","url","path","attribute","state","condition","enabled","disabled","template","mode","type","size","color","style","width","height","radius","opacity","service","data","latitude","longitude","navigation_path","show_icon","label","button"],o=e.querySelector("ha-form");if(!o)return;const n=document.createTreeWalker(o,NodeFilter.SHOW_TEXT,null),a=[];let r;for(;r=n.nextNode();){const e=null===(t=r.textContent)||void 0===t?void 0:t.trim().toLowerCase();e&&i.includes(e)&&a.push(r)}a.forEach((e=>{var t;const i=e.parentElement;if(i){const o=i.querySelector("input, select, ha-entity-picker, ha-selector, mwc-select, mwc-textfield");e.textContent&&e.textContent.trim().length<30&&(o||(null===(t=i.parentElement)||void 0===t?void 0:t.querySelector("input, select, ha-entity-picker, ha-selector")))&&e.remove()}})),o.querySelectorAll("*").forEach((e=>{var t,o;const n=null===(t=e.textContent)||void 0===t?void 0:t.trim().toLowerCase();n&&i.includes(n)&&0===e.children.length&&(null===(o=e.parentElement)||void 0===o?void 0:o.querySelector("input, select, ha-entity-picker, ha-selector"))&&(e.style.cssText="display: none !important; visibility: hidden !important; opacity: 0 !important; height: 0 !important; width: 0 !important; margin: 0 !important; padding: 0 !important;")})),['div[role="group"] > div:first-child:not([class])','div[role="group"] > span:first-child:not([class])',".mdc-form-field__label",".mdc-text-field__label",".mdc-select__label","label:not([for])","div:not([class]):not([id])","span:not([class]):not([id])"].forEach((e=>{try{o.querySelectorAll(e).forEach((e=>{var t;const o=null===(t=e.textContent)||void 0===t?void 0:t.trim().toLowerCase();o&&i.includes(o)&&(e.style.cssText="display: none !important;")}))}catch(e){}})),o.querySelectorAll('[class*="mdc-"]').forEach((e=>{var t;const o=null===(t=e.textContent)||void 0===t?void 0:t.trim().toLowerCase();o&&i.includes(o)&&0===e.children.length&&(e.classList.contains("mdc-floating-label")||e.classList.contains("mdc-form-field__label")||e.classList.contains("mdc-text-field__label"))&&(e.style.cssText="display: none !important;")})),setTimeout((()=>{var e;const t=document.createTreeWalker(o,NodeFilter.SHOW_TEXT,null),n=[];let a;for(;a=t.nextNode();){const t=null===(e=a.textContent)||void 0===e?void 0:e.trim().toLowerCase();t&&i.includes(t)&&n.push(a)}n.forEach((e=>{e.parentNode&&(e.textContent="")}))}),50)}static getCleanFormStyles(){return"\n      /* Ultra-aggressive label hiding */\n      .ultra-clean-form ha-form label,\n      .ultra-clean-form ha-form .label,\n      .ultra-clean-form ha-form .mdc-floating-label,\n      .ultra-clean-form ha-form .mdc-text-field__label,\n      .ultra-clean-form ha-form .mdc-select__label,\n      .ultra-clean-form ha-form .mdc-form-field__label,\n      .ultra-clean-form ha-form .ha-form-label,\n      .ultra-clean-form ha-form .mdc-notched-outline__leading,\n      .ultra-clean-form ha-form .mdc-notched-outline__notch,\n      .ultra-clean-form ha-form .mdc-notched-outline__trailing,\n      .ultra-clean-form ha-form .mdc-line-ripple {\n        display: none !important;\n        visibility: hidden !important;\n        opacity: 0 !important;\n        height: 0 !important;\n        width: 0 !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        font-size: 0 !important;\n        line-height: 0 !important;\n      }\n\n      /* Override any existing label styles completely */\n      .ultra-clean-form label,\n      .ultra-clean-form .ultra-clean-form label *,\n      .ultra-clean-form ha-form label,\n      .ultra-clean-form ha-form label * {\n        display: none !important;\n        visibility: hidden !important;\n        opacity: 0 !important;\n        height: 0 !important;\n        width: 0 !important;\n        margin: 0 !important;\n        padding: 0 !important;\n        border: none !important;\n        outline: none !important;\n        background: none !important;\n        font-size: 0 !important;\n        line-height: 0 !important;\n        position: absolute !important;\n        left: -9999px !important;\n        top: -9999px !important;\n        z-index: -1 !important;\n        pointer-events: none !important;\n      }\n\n      /* Hide any text that could be a redundant label */\n      .ultra-clean-form ha-form div:not([class]):not([id]),\n      .ultra-clean-form ha-form span:not([class]):not([id]),\n      .ultra-clean-form ha-form p:not([class]):not([id]) {\n        font-size: 0 !important;\n        line-height: 0 !important;\n        color: transparent !important;\n        height: 0 !important;\n        overflow: hidden !important;\n      }\n\n      /* Make sure form inputs still work */\n      .ultra-clean-form ha-form input,\n      .ultra-clean-form ha-form select,\n      .ultra-clean-form ha-form textarea,\n      .ultra-clean-form ha-form ha-entity-picker,\n      .ultra-clean-form ha-form ha-icon-picker,\n      .ultra-clean-form ha-form ha-selector,\n      .ultra-clean-form ha-form .mdc-text-field,\n      .ultra-clean-form ha-form .mdc-select,\n      .ultra-clean-form ha-form .mdc-switch {\n        font-size: 14px !important;\n        line-height: normal !important;\n        color: var(--primary-text-color) !important;\n        height: auto !important;\n        width: auto !important;\n        margin-top: 0 !important;\n        border-radius: 8px !important;\n      }\n\n      /* Ensure dropdowns work */\n      .ultra-clean-form ha-form .mdc-select__selected-text,\n      .ultra-clean-form ha-form .mdc-select__dropdown-icon {\n        font-size: 14px !important;\n        color: var(--primary-text-color) !important;\n        opacity: 1 !important;\n        height: auto !important;\n        width: auto !important;\n      }\n\n      /* Style field titles and descriptions consistently */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n       \n        margin-bottom: 4px !important;\n        display: block !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        display: block !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n    "}static cleanupRedundantLabels(e){a.aggressiveCleanup(e)}static renderField(e,t,i,n,r,s){return o.qy`
      <div class="form-field-container">
        <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
          ${e}
        </div>
        <div
          class="field-description"
          style="font-size: 13px; font-weight: 400; margin-bottom: 12px; color: var(--secondary-text-color);"
        >
          ${t}
        </div>
        ${a.renderCleanForm(i,n,r,s)}
      </div>
    `}static createSchemaItem(e,t){return{name:e,selector:t}}static renderSection(e,t,i){return o.qy`
      <div
        class="settings-section"
        style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 32px;"
      >
        <div
          class="section-title"
          style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; padding-bottom: 0; border-bottom: none; letter-spacing: 0.5px;"
        >
          ${e}
        </div>
        ${t?o.qy`
              <div
                class="field-description"
                style="font-size: 13px; font-weight: 400; margin-bottom: 16px; color: var(--secondary-text-color);"
              >
                ${t}
              </div>
            `:""}
        ${i.map((e=>o.qy`
            <div style="margin-bottom: 16px;">
              ${a.renderField(e.title,e.description,e.hass,e.data,e.schema,e.onChange)}
            </div>
          `))}
      </div>
    `}static injectCleanFormStyles(){return o.qy`
      <style>
        ${a.getCleanFormStyles()}
      </style>
    `}}a.activeObservers=new Map,a.cleanupQueue=new Set},9247:(e,t,i)=>{i.d(t,{JW:()=>O,XX:()=>N,c0:()=>A,ge:()=>J,qy:()=>S,s6:()=>C});const o=globalThis,n=o.trustedTypes,a=n?n.createPolicy("lit-html",{createHTML:e=>e}):void 0,r="$lit$",s=`lit$${Math.random().toFixed(9).slice(2)}$`,l="?"+s,d=`<${l}>`,c=document,p=()=>c.createComment(""),u=e=>null===e||"object"!=typeof e&&"function"!=typeof e,h=Array.isArray,g=e=>h(e)||"function"==typeof e?.[Symbol.iterator],m="[ \t\n\f\r]",f=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,_=/-->/g,v=/>/g,b=RegExp(`>|${m}(?:([^\\s"'>=/]+)(${m}*=${m}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),y=/'/g,x=/"/g,k=/^(?:script|style|textarea|title)$/i,w=e=>(t,...i)=>({_$litType$:e,strings:t,values:i}),S=w(1),O=w(2),A=(w(3),Symbol.for("lit-noChange")),C=Symbol.for("lit-nothing"),$=new WeakMap,T=c.createTreeWalker(c,129);function z(e,t){if(!h(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==a?a.createHTML(t):t}const P=(e,t)=>{const i=e.length-1,o=[];let n,a=2===t?"<svg>":3===t?"<math>":"",l=f;for(let t=0;t<i;t++){const i=e[t];let c,p,u=-1,h=0;for(;h<i.length&&(l.lastIndex=h,p=l.exec(i),null!==p);)h=l.lastIndex,l===f?"!--"===p[1]?l=_:void 0!==p[1]?l=v:void 0!==p[2]?(k.test(p[2])&&(n=RegExp("</"+p[2],"g")),l=b):void 0!==p[3]&&(l=b):l===b?">"===p[0]?(l=n??f,u=-1):void 0===p[1]?u=-2:(u=l.lastIndex-p[2].length,c=p[1],l=void 0===p[3]?b:'"'===p[3]?x:y):l===x||l===y?l=b:l===_||l===v?l=f:(l=b,n=void 0);const g=l===b&&e[t+1].startsWith("/>")?" ":"";a+=l===f?i+d:u>=0?(o.push(c),i.slice(0,u)+r+i.slice(u)+s+g):i+s+(-2===u?t:g)}return[z(e,a+(e[i]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),o]};class E{constructor({strings:e,_$litType$:t},i){let o;this.parts=[];let a=0,d=0;const c=e.length-1,u=this.parts,[h,g]=P(e,t);if(this.el=E.createElement(h,i),T.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(o=T.nextNode())&&u.length<c;){if(1===o.nodeType){if(o.hasAttributes())for(const e of o.getAttributeNames())if(e.endsWith(r)){const t=g[d++],i=o.getAttribute(e).split(s),n=/([.?@])?(.*)/.exec(t);u.push({type:1,index:a,name:n[2],strings:i,ctor:"."===n[1]?B:"?"===n[1]?R:"@"===n[1]?U:D}),o.removeAttribute(e)}else e.startsWith(s)&&(u.push({type:6,index:a}),o.removeAttribute(e));if(k.test(o.tagName)){const e=o.textContent.split(s),t=e.length-1;if(t>0){o.textContent=n?n.emptyScript:"";for(let i=0;i<t;i++)o.append(e[i],p()),T.nextNode(),u.push({type:2,index:++a});o.append(e[t],p())}}}else if(8===o.nodeType)if(o.data===l)u.push({type:2,index:a});else{let e=-1;for(;-1!==(e=o.data.indexOf(s,e+1));)u.push({type:7,index:a}),e+=s.length-1}a++}}static createElement(e,t){const i=c.createElement("template");return i.innerHTML=e,i}}function I(e,t,i=e,o){if(t===A)return t;let n=void 0!==o?i._$Co?.[o]:i._$Cl;const a=u(t)?void 0:t._$litDirective$;return n?.constructor!==a&&(n?._$AO?.(!1),void 0===a?n=void 0:(n=new a(e),n._$AT(e,i,o)),void 0!==o?(i._$Co??=[])[o]=n:i._$Cl=n),void 0!==n&&(t=I(e,n._$AS(e,t.values),n,o)),t}class j{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:i}=this._$AD,o=(e?.creationScope??c).importNode(t,!0);T.currentNode=o;let n=T.nextNode(),a=0,r=0,s=i[0];for(;void 0!==s;){if(a===s.index){let t;2===s.type?t=new M(n,n.nextSibling,this,e):1===s.type?t=new s.ctor(n,s.name,s.strings,this,e):6===s.type&&(t=new H(n,this,e)),this._$AV.push(t),s=i[++r]}a!==s?.index&&(n=T.nextNode(),a++)}return T.currentNode=c,o}p(e){let t=0;for(const i of this._$AV)void 0!==i&&(void 0!==i.strings?(i._$AI(e,i,t),t+=i.strings.length-2):i._$AI(e[t])),t++}}class M{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,i,o){this.type=2,this._$AH=C,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=i,this.options=o,this._$Cv=o?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=I(this,e,t),u(e)?e===C||null==e||""===e?(this._$AH!==C&&this._$AR(),this._$AH=C):e!==this._$AH&&e!==A&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):g(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==C&&u(this._$AH)?this._$AA.nextSibling.data=e:this.T(c.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:i}=e,o="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=E.createElement(z(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===o)this._$AH.p(t);else{const e=new j(o,this),i=e.u(this.options);e.p(t),this.T(i),this._$AH=e}}_$AC(e){let t=$.get(e.strings);return void 0===t&&$.set(e.strings,t=new E(e)),t}k(e){h(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let i,o=0;for(const n of e)o===t.length?t.push(i=new M(this.O(p()),this.O(p()),this,this.options)):i=t[o],i._$AI(n),o++;o<t.length&&(this._$AR(i&&i._$AB.nextSibling,o),t.length=o)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class D{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,i,o,n){this.type=1,this._$AH=C,this._$AN=void 0,this.element=e,this.name=t,this._$AM=o,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=C}_$AI(e,t=this,i,o){const n=this.strings;let a=!1;if(void 0===n)e=I(this,e,t,0),a=!u(e)||e!==this._$AH&&e!==A,a&&(this._$AH=e);else{const o=e;let r,s;for(e=n[0],r=0;r<n.length-1;r++)s=I(this,o[i+r],t,r),s===A&&(s=this._$AH[r]),a||=!u(s)||s!==this._$AH[r],s===C?e=C:e!==C&&(e+=(s??"")+n[r+1]),this._$AH[r]=s}a&&!o&&this.j(e)}j(e){e===C?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class B extends D{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===C?void 0:e}}class R extends D{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==C)}}class U extends D{constructor(e,t,i,o,n){super(e,t,i,o,n),this.type=5}_$AI(e,t=this){if((e=I(this,e,t,0)??C)===A)return;const i=this._$AH,o=e===C&&i!==C||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,n=e!==C&&(i===C||o);o&&this.element.removeEventListener(this.name,this,i),n&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class H{constructor(e,t,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){I(this,e)}}const J={M:r,P:s,A:l,C:1,L:P,R:j,D:g,V:I,I:M,H:D,N:R,U,B,F:H},Q=o.litHtmlPolyfillSupport;Q?.(E,M),(o.litHtmlVersions??=[]).push("3.2.1");const N=(e,t,i)=>{const o=i?.renderBefore??t;let n=o._$litPart$;if(void 0===n){const e=i?.renderBefore??null;o._$litPart$=n=new M(t.insertBefore(p(),e),e,void 0,i??{})}return n._$AI(e),n}},9477:(e,t,i)=>{i.d(t,{w:()=>v});var o=i(5183),n=i(9247),a=i(5201),r=i(2593);const s=e=>(0,r.ps)(e)?e._$litType$.h:e.strings,l=(0,a.u$)(class extends a.WL{constructor(e){super(e),this.et=new WeakMap}render(e){return[e]}update(e,[t]){const i=(0,r.qb)(this.it)?s(this.it):null,o=(0,r.qb)(t)?s(t):null;if(null!==i&&(null===o||i!==o)){const t=(0,r.cN)(e).pop();let o=this.et.get(i);if(void 0===o){const e=document.createDocumentFragment();o=(0,n.XX)(n.s6,e),o.setConnected(!1),this.et.set(i,o)}(0,r.mY)(o,[t]),(0,r.Dx)(o,void 0,t)}if(null!==o){if(null===i||i!==o){const t=this.et.get(o);if(void 0!==t){const i=(0,r.cN)(t).pop();(0,r.Jz)(e),(0,r.Dx)(e,void 0,i),(0,r.mY)(e,[i])}}this.it=t}else this.it=void 0;return this.render(t)}});var d=i(8791),c=i(866),p=i(8914),u=i(9662),h=i(2371),g=i(796),m=i(7987),f=i(456),_=i(2314);i(7487);class v extends c.m{constructor(){super(...arguments),this._templateInputDebounce=null,this._lastRenderedEntity=null,this._renderDebounce=null,this._webrtcUpdateTimer=null,this._huiImageRef=(0,d._)(),this._cameraStableKeys=new Map,this.metadata={type:"camera",title:"Camera Module",description:"Display live camera feeds with comprehensive control options",author:"WJD Designs",version:"1.0.0",icon:"mdi:camera",category:"content",tags:["camera","live","feed","security","surveillance"]},this.clickTimeout=null,this.holdTimeout=null,this.isHolding=!1}createDefault(e,t){return{id:e||this.generateId("camera"),type:"camera",entity:"",camera_name:"",show_name:!0,name_position:"top-left",tap_opens_fullscreen:!1,aspect_ratio_linked:!0,aspect_ratio_value:1.778,image_fit:"cover",crop_left:0,crop_top:0,crop_right:0,crop_bottom:0,show_controls:!1,live_view:!0,auto_refresh:!0,refresh_interval:30,audio_enabled:!1,image_quality:"high",rotation:0,show_unavailable:!0,fallback_image:"",tap_action:{action:"nothing"},hold_action:{action:"nothing"},double_tap_action:{action:"nothing"},template_mode:!1,template:"",design:{width:"100%",max_width:"500px",border_radius:"20px"},display_mode:"always",display_conditions:[],smart_scaling:!0}}renderGeneralTab(e,t,i,n){var a;const r=e,s=(null===(a=t.locale)||void 0===a?void 0:a.language)||"en";return o.qy`
      ${this.injectUcFormStyles()}
      <div class="camera-module-settings">
        <!-- Camera Configuration Section -->
        ${this.renderSettingsSection((0,f.kg)("editor.camera.config.title",s,"Camera Configuration"),(0,f.kg)("editor.camera.config.desc",s,"Configure the camera entity and display settings."),[{title:(0,f.kg)("editor.camera.entity",s,"Camera Entity"),description:(0,f.kg)("editor.camera.entity_desc",s,"Select the camera entity to display. This should be a camera or mjpeg entity from Home Assistant."),hass:t,data:r,schema:[this.entityField("entity",["camera"])],onChange:e=>n(e.detail.value)}])}

        <!-- Camera Name Settings with toggle in header -->
        <div class="settings-section">
          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
          >
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px;"
            >
              ${(0,f.kg)("editor.camera.show_name",s,"Show Camera Name")}
            </div>
            <ha-switch
              .checked=${!1!==r.show_name}
              @change=${e=>{const t=e.target;n({show_name:t.checked})}}
            ></ha-switch>
          </div>

          ${!1!==r.show_name?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,f.kg)("editor.camera.name",s,"Camera Name"),(0,f.kg)("editor.camera.name_desc",s,"Custom name for the camera. Leave empty to use entity name."),t,{camera_name:r.camera_name||""},[this.textField("camera_name")],(e=>n(e.detail.value)))}
                </div>

                <div class="field-group" style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,f.kg)("editor.camera.name_position.title",s,"Name Position"),(0,f.kg)("editor.camera.name_position.desc",s,"Choose where the camera name appears as an overlay on the camera image."),t,{name_position:r.name_position||"top-left"},[this.selectField("name_position",[{value:"top-left",label:(0,f.kg)("editor.camera.name_position.options.top_left",s,"Top Left")},{value:"top-right",label:(0,f.kg)("editor.camera.name_position.options.top_right",s,"Top Right")},{value:"center",label:(0,f.kg)("editor.camera.name_position.options.center",s,"Center")},{value:"bottom-left",label:(0,f.kg)("editor.camera.name_position.options.bottom_left",s,"Bottom Left")},{value:"bottom-right",label:(0,f.kg)("editor.camera.name_position.options.bottom_right",s,"Bottom Right")},{value:"top-middle",label:(0,f.kg)("editor.camera.name_position.options.top_middle",s,"Top Middle")},{value:"bottom-middle",label:(0,f.kg)("editor.camera.name_position.options.bottom_middle",s,"Bottom Middle")}])],(e=>{e.detail.value.name_position!==(r.name_position||"top-left")&&n(e.detail.value)}))}
                </div>
              `:o.qy`
                <div
                  style="text-align: center; padding: 20px; color: var(--secondary-text-color); font-style: italic;"
                >
                  ${(0,f.kg)("editor.camera.show_name_toggle.enable_toggle_desc",s,"Enable the toggle above to configure camera name display")}
                </div>
              `}
        </div>

        <!-- Tap to Open Fullscreen Settings -->
        <div class="settings-section">
          <div
            style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding-bottom: 0; border-bottom: none;"
          >
            <div
              class="section-title"
              style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); letter-spacing: 0.5px;"
            >
              ${(0,f.kg)("editor.camera.tap_opens_fullscreen",s,"Tap Camera Opens Fullscreen")}
            </div>
            <ha-switch
              .checked=${!0===r.tap_opens_fullscreen}
              @change=${e=>{const t=e.target;n({tap_opens_fullscreen:t.checked})}}
            ></ha-switch>
          </div>

          <div
            class="field-description"
            style="margin-bottom: 16px; color: var(--secondary-text-color); font-style: italic; padding: 12px; background: rgba(var(--rgb-primary-color), 0.1); border-radius: 6px; border-left: 4px solid var(--primary-color);"
          >
            <ha-icon icon="mdi:information" style="font-size: 14px; margin-right: 6px;"></ha-icon>
            ${(0,f.kg)("editor.camera.tap_opens_fullscreen_desc",s,"When enabled, tapping anywhere on the camera will open it in fullscreen mode.")}
          </div>
        </div>

        <!-- Display Settings Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 32px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,f.kg)("editor.camera.display.title",s,"Display Settings")}
          </div>

          <div style="margin-bottom: 16px;">
            ${this.renderFieldSection((0,f.kg)("editor.camera.live_view.title",s,"Live View"),(0,f.kg)("editor.camera.live_view.desc",s,"Enable to show live camera stream (requires stream integration). When disabled, shows still image snapshots."),t,{live_view:!1!==r.live_view},[this.booleanField("live_view")],(e=>n(e.detail.value)))}
          </div>

          ${!1!==r.live_view?o.qy`
                <div style="margin-bottom: 16px;">
                  ${this.renderFieldSection((0,f.kg)("editor.camera.audio_enabled.title",s,"Enable Audio"),(0,f.kg)("editor.camera.audio_enabled.desc",s,"Enable audio for live camera streams. Audio is only available when Live View is enabled."),t,{audio_enabled:!0===r.audio_enabled},[this.booleanField("audio_enabled")],(e=>n(e.detail.value)))}
                </div>
              `:""}
          ${!1===r.live_view?o.qy`
                <div style="margin-top: 24px;">
                  ${this.renderConditionalFieldsGroup((0,f.kg)("editor.camera.auto_refresh.section_title",s,"Auto Refresh Settings"),o.qy`
                      <div style="margin-bottom: 16px;">
                        ${p.Q.renderField((0,f.kg)("editor.camera.auto_refresh.title",s,"Auto Refresh"),(0,f.kg)("editor.camera.auto_refresh.desc",s,"Automatically refresh the camera image at regular intervals"),t,{auto_refresh:!1!==r.auto_refresh},[p.Q.createSchemaItem("auto_refresh",{boolean:{}})],(e=>n({auto_refresh:e.detail.value.auto_refresh})))}
                      </div>

                      ${!1!==r.auto_refresh?o.qy`
                            ${p.Q.renderField((0,f.kg)("editor.camera.refresh_interval.title",s,"Refresh Interval (seconds)"),(0,f.kg)("editor.camera.refresh_interval.desc",s,"How often to refresh the camera image automatically."),t,{refresh_interval:r.refresh_interval||30},[p.Q.createSchemaItem("refresh_interval",{number:{min:5,max:300,mode:"box"}})],(e=>n({refresh_interval:e.detail.value.refresh_interval})))}
                          `:""}
                    `)}
                </div>
              `:""}

          <!-- Dimensions Section -->
          <div style="margin-bottom: 32px;">
            <div
              class="field-title"
              style="font-size: 18px; font-weight: 700; margin-bottom: 8px; color: var(--primary-color);"
            >
              ${(0,f.kg)("editor.camera.dimensions.title",s,"Dimensions")}
            </div>
            <div
              class="field-description"
              style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 16px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.1); border-radius: 6px; border-left: 4px solid var(--primary-color);"
            >
              <ha-icon icon="mdi:information" style="font-size: 14px; margin-right: 6px;"></ha-icon>
              ${(0,f.kg)("editor.camera.dimensions.responsive_note",s,"Camera now uses responsive sizing by default (100% width). Use the Design tab for full control over dimensions, or adjust these fallback pixel dimensions for specific use cases.")}
            </div>

            <style>
              .number-range-control {
                display: flex;
                gap: 8px;
                align-items: center;
              }

              .range-slider {
                flex: 0 0 65%;
                height: 6px;
                background: var(--divider-color);
                border-radius: 3px;
                outline: none;
                appearance: none;
                -webkit-appearance: none;
                cursor: pointer;
                transition: all 0.2s ease;
                min-width: 0;
              }

              .range-slider::-webkit-slider-thumb {
                appearance: none;
                -webkit-appearance: none;
                width: 18px;
                height: 18px;
                background: var(--primary-color);
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
              }

              .range-slider::-moz-range-thumb {
                width: 18px;
                height: 18px;
                background: var(--primary-color);
                border-radius: 50%;
                cursor: pointer;
                border: none;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
              }

              .range-slider:hover {
                background: var(--primary-color);
                opacity: 0.7;
              }

              .range-slider:hover::-webkit-slider-thumb {
                transform: scale(1.1);
              }

              .range-slider:hover::-moz-range-thumb {
                transform: scale(1.1);
              }

              .range-input {
                flex: 0 0 20%;
                padding: 6px 8px !important;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                background: var(--secondary-background-color);
                color: var(--primary-text-color);
                font-size: 13px;
                text-align: center;
                transition: all 0.2s ease;
                box-sizing: border-box;
              }

              .range-input:focus {
                outline: none;
                border-color: var(--primary-color);
                box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
              }

              .range-reset-btn {
                width: 32px;
                height: 32px;
                padding: 0;
                border: 1px solid var(--divider-color);
                border-radius: 4px;
                background: var(--secondary-background-color);
                color: var(--primary-text-color);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s ease;
                flex-shrink: 0;
              }

              .range-reset-btn:hover {
                background: var(--primary-color);
                color: var(--text-primary-color);
                border-color: var(--primary-color);
              }

              .range-reset-btn ha-icon {
                font-size: 14px;
              }

              .aspect-ratio-link-btn {
                width: 40px;
                height: 40px;
                padding: 0;
                border: 2px solid var(--divider-color);
                border-radius: 50%;
                background: var(--secondary-background-color);
                color: var(--primary-text-color);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
                flex-shrink: 0;
                margin: 0 auto;
                position: relative;
              }

              .aspect-ratio-link-btn.linked {
                border-color: var(--primary-color);
                background: var(--primary-color);
                color: white;
                transform: scale(1.05);
              }

              .aspect-ratio-link-btn:hover {
                transform: scale(1.1);
                border-color: var(--primary-color);
              }

              .aspect-ratio-link-btn.linked:hover {
                background: var(--primary-color);
                opacity: 0.9;
              }

              .aspect-ratio-link-btn ha-icon {
                font-size: 20px;
                transition: transform 0.2s ease;
              }

              .dimensions-container {
                display: flex;
                flex-direction: column;
                gap: 16px;
              }

              .dimension-group {
                display: flex;
                flex-direction: column;
                gap: 8px;
              }
            </style>

            <div class="dimensions-container">
              <div class="dimension-group">
                <div class="field-title">
                  ${(0,f.kg)("editor.camera.width",s,"Width (px)")}
                </div>
                <div class="field-description">
                  ${(0,f.kg)("editor.camera.width_desc",s,"Set the width of the camera display. Range: 100-1000px")}
                </div>
                <div
                  class="gap-control-container"
                  style="display: flex; align-items: center; gap: 12px;"
                >
                  <input
                    type="range"
                    class="gap-slider"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${r.width||320}"
                    @input=${e=>{const t=e.target,i=parseInt(t.value);this._handleDimensionChange(r,"width",i,n)}}
                  />
                  <input
                    type="number"
                    class="gap-input"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${r.width||320}"
                    @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||this._handleDimensionChange(r,"width",i,n)}}
                    @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||320,o="ArrowUp"===e.key?1:-1,a=Math.max(100,Math.min(1e3,i+o));this._handleDimensionChange(r,"width",a,n)}}}
                  />
                  <button
                    class="reset-btn"
                    @click=${()=>this._handleDimensionChange(r,"width",320,n)}
                    title=${(0,f.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","320")}
                  >
                    <ha-icon icon="mdi:refresh"></ha-icon>
                  </button>
                </div>
              </div>

              <!-- Link/Unlink Button -->
              <div style="display: flex; justify-content: center; margin: 8px 0;">
                <button
                  class="aspect-ratio-link-btn ${!1!==r.aspect_ratio_linked?"linked":""}"
                  @click=${()=>{const e=!r.aspect_ratio_linked,t={aspect_ratio_linked:e};if(e){const e=r.width||320,i=r.height||180;t.aspect_ratio_value=e/i}n(t)}}
                  title="${!1!==r.aspect_ratio_linked?(0,f.kg)("editor.camera.unlink_aspect",s,"Unlink aspect ratio"):(0,f.kg)("editor.camera.link_aspect",s,"Link aspect ratio")}"
                >
                  <ha-icon
                    icon="${!1!==r.aspect_ratio_linked?"mdi:link-variant":"mdi:link-variant-off"}"
                  ></ha-icon>
                </button>
              </div>

              <div class="dimension-group">
                <div class="field-title">
                  ${(0,f.kg)("editor.camera.height",s,"Height (px)")}
                </div>
                <div class="field-description">
                  ${(0,f.kg)("editor.camera.height_desc",s,"Set the height of the camera display. Range: 100-1000px")}
                </div>
                <div
                  class="gap-control-container"
                  style="display: flex; align-items: center; gap: 12px;"
                >
                  <input
                    type="range"
                    class="gap-slider"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${r.height||180}"
                    @input=${e=>{const t=e.target,i=parseInt(t.value);this._handleDimensionChange(r,"height",i,n)}}
                  />
                  <input
                    type="number"
                    class="gap-input"
                    min="100"
                    max="1000"
                    step="1"
                    .value="${r.height||180}"
                    @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||this._handleDimensionChange(r,"height",i,n)}}
                    @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||180,o="ArrowUp"===e.key?1:-1,a=Math.max(100,Math.min(1e3,i+o));this._handleDimensionChange(r,"height",a,n)}}}
                  />
                  <button
                    class="reset-btn"
                    @click=${()=>this._handleDimensionChange(r,"height",180,n)}
                    title=${(0,f.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","180")}
                  >
                    <ha-icon icon="mdi:refresh"></ha-icon>
                  </button>
                </div>
              </div>
            </div>

            ${!1!==r.aspect_ratio_linked?o.qy`
                  <div
                    style="margin-top: 12px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.1); border-radius: 8px; border-left: 4px solid var(--primary-color);"
                  >
                    <div
                      style="font-size: 13px; color: var(--primary-color); font-weight: 500; margin-bottom: 4px;"
                    >
                      <ha-icon
                        icon="mdi:link-variant"
                        style="font-size: 14px; margin-right: 6px;"
                      ></ha-icon>
                      ${(0,f.kg)("editor.camera.aspect_linked.title",s,"Aspect Ratio Linked")}
                    </div>
                    <div
                      style="font-size: 12px; color: var(--secondary-text-color); line-height: 1.4;"
                    >
                      ${(0,f.kg)("editor.camera.aspect_linked.desc",s,"Dimensions maintain {ratio}:1 ratio. Adjusting one dimension automatically updates the other to maintain proportions.").replace("{ratio}",`${(1*(r.aspect_ratio_value||1.778)).toFixed(2)}`)}
                    </div>
                  </div>
                `:o.qy`
                  <div
                    style="margin-top: 12px; padding: 12px; background: rgba(var(--rgb-secondary-text-color), 0.1); border-radius: 8px; border-left: 4px solid var(--secondary-text-color);"
                  >
                    <div
                      style="font-size: 13px; color: var(--secondary-text-color); font-weight: 500; margin-bottom: 4px;"
                    >
                      <ha-icon
                        icon="mdi:link-variant-off"
                        style="font-size: 14px; margin-right: 6px;"
                      ></ha-icon>
                      ${(0,f.kg)("editor.camera.aspect_independent.title",s,"Independent Dimensions")}
                    </div>
                    <div
                      style="font-size: 12px; color: var(--secondary-text-color); line-height: 1.4;"
                    >
                      ${(0,f.kg)("editor.camera.aspect_independent.desc",s,"Width and height can be adjusted independently. Click the link button above to maintain aspect ratio.")}
                    </div>
                  </div>
                `}
          </div>

          <!-- Rotation Field -->
          <div class="dimension-group" style="margin-top: 16px;">
            <div class="field-title">
              ${(0,f.kg)("editor.camera.rotation",s,"Rotation (°)")}
            </div>
            <div class="field-description">
              ${(0,f.kg)("editor.camera.rotation_desc",s,"Rotate the camera image clockwise (0-360 degrees).")}
            </div>
            <div class="number-range-control">
              <input
                type="range"
                class="range-slider"
                min="0"
                max="360"
                step="1"
                .value="${r.rotation||0}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);n({rotation:i})}}
              />
              <input
                type="number"
                class="range-input"
                min="0"
                max="360"
                step="1"
                .value="${r.rotation||0}"
                @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({rotation:i})}}
                @keydown=${e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key){e.preventDefault();const t=e.target,i=parseInt(t.value)||0,o="ArrowUp"===e.key?1:-1,a=Math.max(0,Math.min(360,i+o));n({rotation:a})}}}
              />
              <button
                class="range-reset-btn"
                @click=${()=>n({rotation:0})}
                title=${(0,f.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","0")}
              >
                <ha-icon icon="mdi:refresh"></ha-icon>
              </button>
            </div>
          </div>
        </div>

        <!-- Crop & Position Section -->
        <div
          class="settings-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-bottom: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px; font-weight: 700; text-transform: uppercase; color: var(--primary-color); margin-bottom: 16px; letter-spacing: 0.5px;"
          >
            ${(0,f.kg)("editor.camera.crop.title",s,"Crop & Position")}
          </div>
          <div
            class="field-description"
            style="margin-bottom: 20px; color: var(--secondary-text-color); font-style: italic;"
          >
            ${(0,f.kg)("editor.camera.crop.desc",s,"Adjust the crop and position of the camera view. Useful for focusing on specific areas or removing unwanted edges.")}
          </div>

          <div style="display: flex; flex-direction: column; gap: 20px;">
            <!-- Left Crop -->
            <div class="field-container">
              <div class="field-title">
                ${(0,f.kg)("editor.camera.crop.left_title",s,"Left Crop (%)")}
              </div>
              <div class="field-description">
                ${(0,f.kg)("editor.camera.crop.left_desc",s,"Crop from the left edge. Higher values show less of the left side.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_left||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);n({crop_left:i})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_left||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({crop_left:i})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>n({crop_left:0})}
                  title=${(0,f.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Right Crop -->
            <div class="field-container">
              <div class="field-title">
                ${(0,f.kg)("editor.camera.crop.right_title",s,"Right Crop (%)")}
              </div>
              <div class="field-description">
                ${(0,f.kg)("editor.camera.crop.right_desc",s,"Crop from the right edge. Higher values show less of the right side.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_right||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);n({crop_right:i})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_right||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({crop_right:i})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>n({crop_right:0})}
                  title=${(0,f.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Top Crop -->
            <div class="field-container">
              <div class="field-title">
                ${(0,f.kg)("editor.camera.crop.top_title",s,"Top Crop (%)")}
              </div>
              <div class="field-description">
                ${(0,f.kg)("editor.camera.crop.top_desc",s,"Crop from the top edge. Higher values show less of the top area.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_top||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);n({crop_top:i})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_top||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({crop_top:i})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>n({crop_top:0})}
                  title=${(0,f.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>

            <!-- Bottom Crop -->
            <div class="field-container">
              <div class="field-title">
                ${(0,f.kg)("editor.camera.crop.bottom_title",s,"Bottom Crop (%)")}
              </div>
              <div class="field-description">
                ${(0,f.kg)("editor.camera.crop.bottom_desc",s,"Crop from the bottom edge. Higher values show less of the bottom area.")}
              </div>
              <div class="number-range-control">
                <input
                  type="range"
                  class="range-slider"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_bottom||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);n({crop_bottom:i})}}
                />
                <input
                  type="number"
                  class="range-input"
                  min="0"
                  max="50"
                  step="1"
                  .value="${r.crop_bottom||0}"
                  @input=${e=>{const t=e.target,i=parseInt(t.value);isNaN(i)||n({crop_bottom:i})}}
                />
                <button
                  class="range-reset-btn"
                  @click=${()=>n({crop_bottom:0})}
                  title=${(0,f.kg)("editor.fields.reset_default_value",s,"Reset to default ({value})").replace("{value}","0")}
                >
                  <ha-icon icon="mdi:refresh"></ha-icon>
                </button>
              </div>
            </div>
          </div>

          <!-- Crop Status -->
          ${(r.crop_left||0)+(r.crop_top||0)+(r.crop_right||0)+(r.crop_bottom||0)>0?o.qy`
                <div
                  style="margin-top: 16px; padding: 12px; background: rgba(var(--rgb-primary-color), 0.1); border-radius: 8px; border-left: 4px solid var(--primary-color);"
                >
                  <div
                    style="font-size: 13px; color: var(--primary-color); font-weight: 500; margin-bottom: 4px;"
                  >
                    <ha-icon icon="mdi:crop" style="font-size: 14px; margin-right: 6px;"></ha-icon>
                    ${(0,f.kg)("editor.camera.crop.active_applied",s,"Active Crops Applied")}
                  </div>
                  <div
                    style="font-size: 12px; color: var(--secondary-text-color); line-height: 1.4;"
                  >
                    L: ${r.crop_left||0}% | T: ${r.crop_top||0}% | R:
                    ${r.crop_right||0}% | B: ${r.crop_bottom||0}%
                  </div>
                </div>
              `:""}

          <!-- Reset All Crops Button -->
          <div style="margin-top: 20px; text-align: center;">
            <button
              style="
                padding: 8px 16px;
                border: 1px solid var(--primary-color);
                border-radius: 6px;
                background: transparent;
                color: var(--primary-color);
                cursor: pointer;
                font-size: 13px;
                font-weight: 500;
                transition: all 0.2s ease;
              "
              @click=${()=>n({crop_left:0,crop_top:0,crop_right:0,crop_bottom:0})}
              @mouseover=${e=>{const t=e.target;t.style.background="var(--primary-color)",t.style.color="white"}}
              @mouseout=${e=>{const t=e.target;t.style.background="transparent",t.style.color="var(--primary-color)"}}
            >
              <ha-icon icon="mdi:crop-free" style="margin-right: 6px; font-size: 14px;"></ha-icon>
              ${(0,f.kg)("editor.camera.crop.reset_all",s,"Reset All Crops")}
            </button>
          </div>
        </div>

        <!-- Link configuration intentionally omitted for Camera module per design guidelines -->

        <!-- Template Mode Section -->
        <div
          class="settings-section template-mode-section"
          style="background: var(--secondary-background-color); border-radius: 8px; padding: 16px; margin-top: 24px;"
        >
          <div
            class="section-title"
            style="font-size: 18px !important; font-weight: 700 !important; text-transform: uppercase !important; color: var(--primary-color); margin-bottom: 16px; border-bottom: 2px solid var(--primary-color); padding-bottom: 8px;"
          >
            ${(0,f.kg)("editor.camera.template.title",s,"Template Mode")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px !important; font-weight: 400 !important; margin-bottom: 16px;"
          >
            ${(0,f.kg)("editor.camera.template.desc",s,"Use a template to dynamically set the camera entity. Templates allow you to use Home Assistant templating syntax for conditional camera selection.")}
          </div>

          <div class="field-group" style="margin-bottom: 16px;">
            <ha-form
              .hass=${t}
              .data=${{template_mode:r.template_mode||!1}}
              .schema=${[{name:"template_mode",label:(0,f.kg)("editor.camera.template.mode_label",s,"Template Mode"),description:(0,f.kg)("editor.camera.template.mode_desc",s,"Use Home Assistant templating syntax to dynamically select camera entity"),selector:{boolean:{}}}]}
              .computeLabel=${e=>e.label||e.name}
              .computeDescription=${e=>e.description||""}
              @value-changed=${e=>n({template_mode:e.detail.value.template_mode})}
            ></ha-form>
          </div>

          ${r.template_mode?o.qy`
                <div class="field-group" style="margin-bottom: 16px;">
                  <div
                    class="field-title"
                    style="font-size: 14px; font-weight: 600; margin-bottom: 8px;"
                  >
                    ${(0,f.kg)("editor.camera.template.camera_template_label",s,"Camera Template")}
                  </div>
                  <div
                    class="field-description"
                    style="font-size: 12px; margin-bottom: 8px; color: var(--secondary-text-color);"
                  >
                    ${(0,f.kg)("editor.camera.template.camera_template_desc",s,"Template to dynamically set the camera entity using Jinja2 syntax")}
                  </div>
                  <ultra-template-editor
                    .hass=${t}
                    .value=${r.template||""}
                    .placeholder=${"{{ 'camera.outdoor' if is_state('weather.home', 'sunny') else 'camera.indoor' }}"}
                    .minHeight=${100}
                    .maxHeight=${300}
                    @value-changed=${e=>{n({template:e.detail.value})}}
                  ></ultra-template-editor>
                </div>

                <div class="template-examples">
                  <div
                    class="field-title"
                    style="font-size: 16px !important; font-weight: 600 !important; margin-bottom: 12px;"
                  >
                    ${(0,f.kg)("editor.camera.template.examples_title",s,"Common Examples:")}
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      'camera.outdoor' if is_state('weather.home', 'sunny') else ''
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,f.kg)("editor.camera.template.example1_desc",s,"Show camera when weather is sunny")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      'camera.front_door' if is_state('input_boolean.show_front', 'on') else
                      'camera.back_yard'
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,f.kg)("editor.camera.template.example2_desc",s,"Switch between cameras based on input boolean")}
                    </div>
                  </div>

                  <div class="example-item" style="margin-bottom: 16px;">
                    <div
                      class="example-code"
                      style="background: var(--code-editor-background-color, #1e1e1e); padding: 12px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 12px; color: #d4d4d4; margin-bottom: 8px;"
                    >
                      states('input_select.active_camera')
                    </div>
                    <div
                      class="example-description"
                      style="font-size: 12px; color: var(--secondary-text-color);"
                    >
                      ${(0,f.kg)("editor.camera.template.example3_desc",s,"Use input select to choose camera entity")}
                    </div>
                  </div>
                </div>
              `:""}
        </div>
      </div>
    `}renderActionsTab(e,t,i,o){return u.A.render(e,t,(e=>o(e)))}renderPreview(e,t,i,n){var a,r,s;const c=e,p=c,u=p.design||{};let h=c.entity;if(c.template_mode&&c.template)try{let e=c.template;const i=e.match(/states\(['"]([^'"]+)['"]\)/g);i&&i.forEach((i=>{const o=i.match(/states\(['"]([^'"]+)['"]\)/)[1],n=null==t?void 0:t.states[o],a=n?n.state:"unknown";e=e.replace(i,`'${a}'`)}));const o=e.match(/is_state\(['"]([^'"]+)['"],\s*['"]([^'"]+)['"]\)/g);o&&o.forEach((i=>{const[,o,n]=i.match(/is_state\(['"]([^'"]+)['"],\s*['"]([^'"]+)['"]\)/),a=null==t?void 0:t.states[o],r=a&&a.state===n;e=e.replace(i,r?"True":"False")}));const n=e.match(/['"]([^'"]+)['"] if (.+?) else ['"]([^'"]+)['"]/);if(n){const[,e,t,i]=n;h=t.includes("True")?e:i}else{const t=e.match(/['"]([^'"]+)['"]/);t&&(h=t[1])}}catch(e){console.error("Template evaluation error:",e),h=c.entity}const g=!1!==c.live_view;if(this._isEditorOpen()){const e=null!==(a=this._lastAppliedEntity)&&void 0!==a?a:h,i=null!==(r=this._lastAppliedLive)&&void 0!==r?r:g;h&&this._scheduleCameraUpdate(h,g,c,t),h=e||"",this._lastAppliedLive=i}else{const e=!!h&&this._isValidCameraEntity(t,h);this._lastAppliedEntity=e?h:this._lastAppliedEntity,this._lastAppliedLive=g}const f=h?t.states[h]:null,_=!f||"unavailable"===f.state;let v;c.template_mode&&h===this._lastRenderedEntity&&h?v=`camera_${c.id}_${h}`:(this._lastRenderedEntity=h,v=`camera_${c.id}_${h||"none"}_${Date.now()}`),this._cameraStableKeys.set(c.id,v);const b=c.camera_name||(f?f.attributes.friendly_name||f.entity_id:"Camera"),y={width:"100%",maxWidth:"100%",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"left"===u.alignment?"flex-start":"right"===u.alignment?"flex-end":"center",justifyContent:"center",color:u.color||this.getTextColor(p),fontFamily:u.font_family||this.getTextFont(p),fontSize:u.font_size?"number"==typeof u.font_size?`${u.font_size}px`:u.font_size:this.getTextSize(p),fontWeight:u.font_weight||this.getTextWeight(p),textTransform:u.text_transform||void 0,letterSpacing:u.letter_spacing||void 0,lineHeight:u.line_height||void 0,textShadow:u.text_shadow||void 0},x=c.crop_left||0,k=c.crop_right||0,w=c.crop_top||0,S=c.crop_bottom||0,O=u.width&&""!==u.width,A=u.height&&""!==u.height,C=c.width||320,$=c.height||180,T=C*(100-x-k)/100,z=$*(100-w-S)/100,P=x>0||k>0||w>0||S>0,E=P?-C*x/100:0,I=P?-$*w/100:0,j=c.rotation||0,M={objectFit:"cover",width:P?`${C}px`:"100%",height:P?`${$}px`:"100%",display:"block",position:P?"absolute":"static",left:P?`${E}px`:"auto",top:P?`${I}px`:"auto",transform:0!==j?`rotate(${j}deg)`:"",transition:"all 0.3s ease",borderRadius:u.border_radius||"0px"},D={width:u.width||(O?"100%":`${Math.max(50,T)}px`),height:u.height||(A?"auto":`${Math.max(50,z)}px`),maxWidth:u.max_width||void 0,minWidth:u.min_width||void 0,maxHeight:u.max_height||void 0,minHeight:u.min_height||void 0,position:"relative",overflow:u.overflow||"hidden",borderRadius:u.border_radius||"0px",background:u.background_color||"transparent",backgroundImage:this.getBackgroundImageWithDesign(u,p,t)||void 0,border:this.getBorderWithDesign(u,p)||void 0,padding:"0",margin:this.getMarginWithDesign(u,p),boxShadow:u.box_shadow||void 0,backdropFilter:u.backdrop_filter||void 0,clipPath:u.clip_path||void 0},B=c.name_position||"top-left",R=this.getCameraNamePositionStyles(B,p,u),U=o.qy`
      <div
        class="camera-module-container"
        data-uc-camera-id="${c.id}"
        style=${this.styleObjectToCss(y)}
      >
        <div class="camera-image-container" style=${this.styleObjectToCss(D)}>
          ${h?_?o.qy`
                  <div
                    class="camera-unavailable"
                    style=${this.styleObjectToCss(Object.assign(Object.assign({},M),{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"var(--error-color, #f44336)",color:u.color||this.getTextColor(p),position:"static",left:"auto",top:"auto",fontFamily:u.font_family||this.getTextFont(p)}))}
                  >
                    ${c.fallback_image?o.qy`
                          <img
                            src=${c.fallback_image}
                            alt="Fallback"
                            style="max-width: 100%; max-height: 100%; object-fit: cover;"
                          />
                        `:o.qy`
                          <ha-icon
                            icon="mdi:camera-off"
                            style="font-size: 48px; margin-bottom: 8px;"
                          ></ha-icon>
                          <span
                            style="font-weight: ${u.font_weight||this.getTextWeight(p)}; font-size: ${u.font_size?"number"==typeof u.font_size?`${u.font_size}px`:u.font_size:this.getTextSize(p)};"
                            >Camera Unavailable</span
                          >
                          <span
                            style="font-size: ${u.font_size&&"number"==typeof u.font_size?`${Math.max(10,u.font_size-2)}px`:this.getSmallTextSize(p)}; margin-top: 4px; opacity: 0.9;"
                            >Entity: ${h}</span
                          >
                        `}
                  </div>
                  ${!1!==c.show_name?o.qy`
                        <div
                          class="camera-name-overlay"
                          style=${this.styleObjectToCss(R)}
                        >
                          ${b}
                        </div>
                      `:""}
                `:l(o.qy`
                  <!-- Use HA's native camera image component - same as picture-glance card -->
                  <!-- Cache directive prevents WebRTC re-initialization during template editing -->
                  <hui-image
                    ${(0,d.K)(this._huiImageRef)}
                    data-camera-key=${this._cameraStableKeys.get(c.id)||h}
                    .hass=${t}
                    .cameraImage=${h}
                    .cameraView=${this._lastAppliedLive?"live":"auto"}
                    .muted=${!0!==c.audio_enabled}
                    style=${this.styleObjectToCss(M)}
                    class="camera-image"
                    @error=${()=>{}}
                    @load=${e=>{const t=e.target,i=t.closest(".camera-image-container");if(i){const e=i.querySelector(".camera-name-overlay"),o=i.querySelector(".camera-fullscreen-icon");setTimeout((()=>{this.repositionPreviewOverlays(t,e,o,i)}),100)}}}
                  ></hui-image>
                  ${!1!==c.show_name?o.qy`
                        <div
                          class="camera-name-overlay"
                          style=${this.styleObjectToCss(R)}
                        >
                          ${b}
                        </div>
                      `:""}
                `):o.qy`
                <div
                  class="camera-unavailable"
                  style=${this.styleObjectToCss(Object.assign(Object.assign({},M),{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"var(--warning-color, #ff9800)",color:u.color||this.getTextColor(p),position:"static",left:"auto",top:"auto",fontFamily:u.font_family||this.getTextFont(p)}))}
                >
                  <ha-icon
                    icon="mdi:camera-plus"
                    style="font-size: 48px; margin-bottom: 8px;"
                  ></ha-icon>
                  <span
                    style="font-weight: ${u.font_weight||this.getTextWeight(p)}; font-size: ${u.font_size?"number"==typeof u.font_size?`${u.font_size}px`:u.font_size:this.getTextSize(p)};"
                    >No Camera Selected</span
                  >
                  <span
                    style="font-size: ${u.font_size&&"number"==typeof u.font_size?`${Math.max(10,u.font_size-2)}px`:this.getSmallTextSize(p)}; margin-top: 4px; opacity: 0.9;"
                    >Choose a camera entity below</span
                  >
                </div>
                ${!1!==c.show_name?o.qy`
                      <div
                        class="camera-name-overlay"
                        style=${this.styleObjectToCss(R)}
                      >
                        ${b}
                      </div>
                    `:""}
              `}
        </div>
      </div>
    `,H=null===(s=c.design)||void 0===s?void 0:s.hover_effect,J=m.k.getHoverEffectClass(H);return this.hasActiveLink(c)?o.qy`<div
          class="camera-module-clickable ${J}"
          @click=${e=>this.handleClick(e,c,t)}
          @dblclick=${e=>this.handleDoubleClick(e,c,t)}
          @mousedown=${e=>this.handleMouseDown(e,c,t)}
          @mouseup=${e=>this.handleMouseUp(e,c,t)}
          @mouseleave=${e=>this.handleMouseLeave(e,c,t)}
          @touchstart=${e=>this.handleTouchStart(e,c,t)}
          @touchend=${e=>this.handleTouchEnd(e,c,t)}
        >
          ${U}
        </div>`:J?o.qy`<div class="camera-module-container ${J}">${U}</div>`:U}renderLogicTab(e,t,i,o){return h.X.render(e,t,(e=>o(e)))}validate(e){const t=e,i=[...super.validate(e).errors];return t.template_mode||t.entity&&""!==t.entity.trim()||i.push("Camera entity is required when not using template mode"),!t.template_mode||t.template&&""!==t.template.trim()||i.push("Template code is required when template mode is enabled"),!1!==t.auto_refresh&&t.refresh_interval&&(t.refresh_interval<5||t.refresh_interval>300)&&i.push("Refresh interval must be between 5 and 300 seconds"),t.border_radius&&isNaN(Number(t.border_radius))&&i.push("Border radius must be a number"),void 0!==t.rotation&&null!==t.rotation&&(isNaN(Number(t.rotation))||t.rotation<0||t.rotation>360)&&i.push("Rotation must be a number between 0 and 360 degrees"),t.tap_action&&t.tap_action.action&&i.push(...this.validateAction(t.tap_action)),t.hold_action&&t.hold_action.action&&i.push(...this.validateAction(t.hold_action)),t.double_tap_action&&t.double_tap_action.action&&i.push(...this.validateAction(t.double_tap_action)),{valid:0===i.length,errors:i}}handleClick(e,t,i,o){e.preventDefault(),this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout((()=>{this.handleTapAction(e,t,i,o)}),300)}handleDoubleClick(e,t,i,o){e.preventDefault(),this.clickTimeout&&(clearTimeout(this.clickTimeout),this.clickTimeout=null),this.handleDoubleAction(e,t,i,o)}handleMouseDown(e,t,i,o){this.isHolding=!1,this.holdTimeout=setTimeout((()=>{this.isHolding=!0,this.handleHoldAction(e,t,i,o)}),500)}handleMouseUp(e,t,i){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null)}handleMouseLeave(e,t,i){this.holdTimeout&&(clearTimeout(this.holdTimeout),this.holdTimeout=null),this.isHolding=!1}handleTouchStart(e,t,i,o){this.handleMouseDown(e,t,i,o)}handleTouchEnd(e,t,i){this.handleMouseUp(e,t,i)}handleTapAction(e,t,i,o){if(!this.isHolding)if(!0!==t.tap_opens_fullscreen)if(t.tap_action){const n="default"===t.tap_action.action?{action:"more-info",entity:t.entity}:t.tap_action;g.K.handleAction(n,i,e.target,o)}else t.entity&&g.K.handleAction({action:"more-info",entity:t.entity},i,e.target,o);else this.handleFullscreenClick(e,t,o)}handleHoldAction(e,t,i,o){t.hold_action&&"nothing"!==t.hold_action.action&&g.K.handleAction(t.hold_action,i,e.target,o)}handleDoubleAction(e,t,i,o){t.double_tap_action&&"nothing"!==t.double_tap_action.action&&g.K.handleAction(t.double_tap_action,i,e.target,o)}handleFullscreenClick(e,t,o){e.stopPropagation(),e.preventDefault(),!1!==(null==o?void 0:o.haptic_feedback)&&Promise.resolve().then(i.bind(i,9811)).then((({forwardHaptic:e})=>{e("medium")})),this.createFullscreenModal(t)}createFullscreenModal(e){var t;document.querySelectorAll('[id^="ultra-camera-fullscreen-"]').forEach((e=>e.remove()));let i=e.entity;if(e.template_mode&&e.template)try{if(null===(t=document.querySelector("home-assistant"))||void 0===t?void 0:t.hass){const t=e.template.match(/['"]([^'"]+)['"]/);t&&(i=t[1])}}catch(e){}if(!i)return void alert("No camera entity available");const o="ultra-camera-fullscreen-"+Date.now(),n=document.createElement("div");n.id=o,n.style.cssText=`\n      position: fixed !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100vw !important;\n      height: 100vh !important;\n      background: rgba(0,0,0,0.95) !important;\n      z-index: ${_.Mu.CAMERA_FULLSCREEN_OVERLAY} !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      backdrop-filter: blur(10px) !important;\n      touch-action: none !important;\n      user-select: none !important;\n      -webkit-user-select: none !important;\n      -webkit-touch-callout: none !important;\n    `;const a=document.createElement("div");a.style.cssText="\n      position: relative !important;\n      width: 100vw !important;\n      height: 100vh !important;\n      overflow: hidden !important;\n      background: black !important;\n    ";const r=document.createElement("div");r.id=o+"-camera-container",r.style.cssText="\n      width: 100% !important;\n      height: 100% !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      min-height: 300px !important;\n      touch-action: none !important;\n      user-select: none !important;\n    ";const s=document.createElement("button");if(s.innerHTML="✕",s.style.cssText=`\n      position: absolute !important;\n      top: 20px !important;\n      right: 20px !important;\n      width: 50px !important;\n      height: 50px !important;\n      border: 3px solid rgba(255,255,255,0.7) !important;\n      background: rgba(0,0,0,0.8) !important;\n      color: white !important;\n      font-size: 30px !important;\n      font-weight: bold !important;\n      cursor: pointer !important;\n      border-radius: 50% !important;\n      display: flex !important;\n      align-items: center !important;\n      justify-content: center !important;\n      z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n      backdrop-filter: blur(4px) !important;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.6) !important;\n      font-family: Arial, sans-serif !important;\n      line-height: 1 !important;\n      transition: all 0.2s ease !important;\n    `,!1!==e.show_name){const t=document.createElement("div");t.style.cssText="\n        position: absolute !important;\n        top: 20px !important;\n        left: 20px !important;\n        padding: 10px 16px !important;\n        background: rgba(0,0,0,0.8) !important;\n        color: white !important;\n        border-radius: 8px !important;\n        font-size: 16px !important;\n        font-weight: 500 !important;\n        backdrop-filter: blur(4px) !important;\n        text-shadow: 0 1px 2px rgba(0,0,0,0.8) !important;\n        border: 1px solid rgba(255,255,255,0.2) !important;\n        box-shadow: 0 2px 8px rgba(0,0,0,0.4) !important;\n      ",t.textContent=e.camera_name||i,a.appendChild(t)}a.appendChild(r),a.appendChild(s),n.appendChild(a),document.body.appendChild(n);const l=()=>{const e=n._restoreViewport;e&&e(),n.remove(),document.removeEventListener("keydown",p),document.body.style.overflow=""},d=()=>{n.removeAttribute("inert"),s.removeAttribute("inert"),n.style.pointerEvents="auto",s.style.pointerEvents="auto",s.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),console.log("X button clicked"),l()}),!0),n.addEventListener("click",(e=>{console.log("Modal clicked",e.target===n),e.target===n&&(e.stopPropagation(),e.preventDefault(),l())}),!0)};d(),setTimeout(d,100);const c=new MutationObserver((e=>{e.forEach((e=>{if("attributes"===e.type&&"inert"===e.attributeName){const t=e.target;t!==n&&t!==s||(t.removeAttribute("inert"),t.style.pointerEvents="auto")}}))}));c.observe(n,{attributes:!0}),c.observe(s,{attributes:!0}),setTimeout((()=>{var t;const n=document.getElementById(o),a=document.getElementById(o+"-camera-container");if(n&&a){const o=null===(t=document.querySelector("home-assistant"))||void 0===t?void 0:t.hass;if(o){const t=document.createElement("hui-image");t.setAttribute("data-camera-fullscreen",i||""),t.hass=o,t.cameraImage=i,t.cameraView=e.live_view?"live":"auto",t.muted=!0!==e.audio_enabled,t.style.cssText="\n            width: 100vw !important;\n            height: 100vh !important;\n            display: block !important;\n            object-fit: contain !important;\n            transition: transform 0.2s ease !important;\n            cursor: grab !important;\n            touch-action: none !important;\n          ",a.innerHTML="",a.appendChild(t),this.addPinchZoomToCamera(t,a)}else{const e=document.createElement("img");e.src=`/api/camera_proxy/${i}?t=${Date.now()}`,e.style.cssText="\n            width: 100vw !important;\n            height: 100vh !important;\n            display: block !important;\n            object-fit: contain !important;\n            cursor: grab !important;\n            touch-action: none !important;\n          ",a.innerHTML="",a.appendChild(e),this.addPinchZoomToCamera(e,a)}}}),50);const p=e=>{"Escape"===e.key&&l()};document.addEventListener("keydown",p),document.body.style.overflow="hidden";const u=document.querySelector('meta[name="viewport"]'),h=(null==u?void 0:u.content)||"";u&&(u.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),n._restoreViewport=()=>{u&&(u.content=h)}}addPinchZoomToCamera(e,t){let i=1,o=0,n=0,a=0,r=!1,s=!1,l=0,d=0,c=0,p=0;const u=()=>{e.style.transform=`translate(${o}px, ${n}px) scale(${i})`,e.style.transformOrigin="center center",e.style.transition=r||s?"none":"transform 0.2s ease"},h=(e,t)=>{const i=e.clientX-t.clientX,o=e.clientY-t.clientY;return Math.sqrt(i*i+o*o)};t.addEventListener("touchstart",(e=>{e.touches.length>1&&e.preventDefault()}),{passive:!1}),t.addEventListener("touchmove",(e=>{e.touches.length>1&&e.preventDefault()}),{passive:!1});const g=()=>{if(i>1){const{maxX:t,maxY:a}=(()=>{const t=e.getBoundingClientRect(),o=t.width*i,n=t.height*i;return{maxX:Math.max(0,(o-window.innerWidth)/2),maxY:Math.max(0,(n-window.innerHeight)/2)}})();o=Math.max(-t,Math.min(t,o)),n=Math.max(-a,Math.min(a,n))}};e.addEventListener("touchstart",(e=>{2===e.touches.length?(e.preventDefault(),e.stopPropagation(),r=!0,a=h(e.touches[0],e.touches[1])):1===e.touches.length&&i>1&&(c=e.touches[0].clientX,p=e.touches[0].clientY)}),{passive:!1}),e.addEventListener("touchmove",(e=>{if(r&&2===e.touches.length){e.preventDefault(),e.stopPropagation();const t=h(e.touches[0],e.touches[1]);a>0&&(i*=t/a,i=Math.max(1,Math.min(6,i)),i>1&&g(),u()),a=t}else if(1===e.touches.length&&i>1){e.preventDefault();const t=e.touches[0].clientX-c,i=e.touches[0].clientY-p;o+=t,n+=i,g(),u(),c=e.touches[0].clientX,p=e.touches[0].clientY}}),{passive:!1}),e.addEventListener("touchend",(t=>{0===t.touches.length?(r=!1,i<1.02&&(i=1,o=0,n=0),u(),e.style.cursor=i>1?"grab":"default"):1===t.touches.length&&r&&(r=!1,i<1.02&&(i=1,o=0,n=0),u())})),e.addEventListener("touchcancel",(()=>{r=!1,i<1.02&&(i=1,o=0,n=0),u(),e.style.cursor=i>1?"grab":"default"})),e.addEventListener("mousedown",(t=>{i>1&&(t.preventDefault(),s=!0,l=t.clientX,d=t.clientY,e.style.cursor="grabbing")})),document.addEventListener("mousemove",(e=>{if(s&&i>1){e.preventDefault();const t=e.clientX-l,i=e.clientY-d;o+=t,n+=i,g(),u(),l=e.clientX,d=e.clientY}})),document.addEventListener("mouseup",(()=>{s&&(s=!1,i<1.02&&(i=1,o=0,n=0,u()),e.style.cursor=i>1?"grab":"default")})),e.addEventListener("wheel",(t=>{t.preventDefault();const a=t.deltaY>0?-.15:.15;i=Math.max(1,Math.min(6,i+a)),i<1.02?(i=1,o=0,n=0):i>1&&g(),u(),e.style.cursor=i>1?"grab":"default"}),{passive:!1});let m=0,f=0,_=0;e.addEventListener("touchend",(t=>{const a=Date.now(),r=a-m;if(r<300&&r>0&&0===t.touches.length)if(i>1)i=1,o=0,n=0,u(),e.style.cursor="default";else{const a=t.changedTouches[0],r=e.getBoundingClientRect(),s=a.clientX-r.left-r.width/2,l=a.clientY-r.top-r.height/2;i=2.5,o=-s*(i-1),n=-l*(i-1),g(),u(),e.style.cursor="grab"}t.changedTouches.length>0&&(f=t.changedTouches[0].clientX,_=t.changedTouches[0].clientY),m=a}))}trySimpleModal(e,t){var i;try{let e=t.entity;if(t.template_mode&&t.template)try{if(null===(i=document.querySelector("home-assistant"))||void 0===i?void 0:i.hass){const i=t.template.match(/['"]([^'"]+)['"]/);i&&(e=i[1])}}catch(e){}if(!e)return!1;const o="camera-fullscreen-"+Date.now(),n=t.camera_name||e,a=`\n        <div id="${o}" style="\n          position: fixed !important;\n          top: 0 !important;\n          left: 0 !important;\n          right: 0 !important;\n          bottom: 0 !important;\n          background: rgba(0,0,0,0.95) !important;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n          backdrop-filter: blur(10px) !important;\n        " onclick="if(event.target === this) this.remove()">\n          <div style="\n            position: relative !important;\n            max-width: 95vw !important;\n            max-height: 95vh !important;\n            background: black !important;\n            border-radius: 12px !important;\n            overflow: hidden !important;\n            box-shadow: 0 20px 60px rgba(0,0,0,0.5) !important;\n          ">\n            <img src="/api/camera_proxy/${e}?t=${Date.now()}" style="\n              max-width: 95vw !important;\n              max-height: 95vh !important;\n              width: auto !important;\n              height: auto !important;\n              display: block !important;\n              object-fit: contain !important;\n              border-radius: 12px !important;\n            " />\n            <button onclick="document.getElementById('${o}').remove()" style="\n              position: absolute !important;\n              top: 16px !important;\n              right: 16px !important;\n              width: 48px !important;\n              height: 48px !important;\n              border: 2px solid rgba(255,255,255,0.5) !important;\n              background: rgba(0,0,0,0.8) !important;\n              color: white !important;\n              font-size: 28px !important;\n              cursor: pointer !important;\n              border-radius: 50% !important;\n              display: flex !important;\n              align-items: center !important;\n              justify-content: center !important;\n              z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n              backdrop-filter: blur(4px) !important;\n              box-shadow: 0 2px 8px rgba(0,0,0,0.5) !important;\n              font-family: monospace !important;\n              line-height: 1 !important;\n            " onmouseover="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='scale(1.1)'" onmouseout="this.style.background='rgba(0,0,0,0.8)'; this.style.transform='scale(1)'">\n              ✕\n            </button>\n            ${!1!==t.show_name?`\n              <div style="\n                position: absolute !important;\n                top: 16px !important;\n                left: 16px !important;\n                padding: 8px 16px !important;\n                background: rgba(0,0,0,0.7) !important;\n                color: white !important;\n                border-radius: 6px !important;\n                font-size: 16px !important;\n                font-weight: 500 !important;\n                backdrop-filter: blur(4px) !important;\n                text-shadow: 0 1px 2px rgba(0,0,0,0.8) !important;\n                z-index: 10 !important;\n              ">\n                ${n}\n              </div>\n            `:""}\n          </div>\n        </div>\n      `;document.body.insertAdjacentHTML("beforeend",a);const r=e=>{if("Escape"===e.key){const e=document.getElementById(o);e&&(e.remove(),document.removeEventListener("keydown",r))}};return document.addEventListener("keydown",r),!0}catch(e){return console.warn("Simple modal failed:",e),!1}}tryNativeFullscreen(e,t){try{const t=document.createElement("div");t.style.cssText="\n        width: 100vw;\n        height: 100vh;\n        background: black;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        position: relative;\n      ";const i=e.cloneNode(!0);i.style.cssText="\n        max-width: 100vw;\n        max-height: 100vh;\n        width: auto;\n        height: auto;\n        object-fit: contain;\n      ";const o=document.createElement("button");o.innerHTML="✕",o.style.cssText=`\n        position: absolute;\n        top: 20px;\n        right: 20px;\n        background: rgba(0,0,0,0.7);\n        color: white;\n        border: none;\n        padding: 10px 15px;\n        border-radius: 50%;\n        cursor: pointer;\n        font-size: 20px;\n        z-index: ${_.Mu.DIALOG_CONTENT};\n      `,o.onclick=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},t.appendChild(i),t.appendChild(o),document.body.appendChild(t);const n=t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen;if(n){n.call(t);const e=()=>{t.parentNode&&t.parentNode.removeChild(t),document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),!0}}catch(e){console.warn("Native fullscreen failed:",e)}return!1}enterFullscreen(e,t){var i,o,n,a;const r=document.createElement("div");r.className="camera-fullscreen-overlay",r.style.cssText=`\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.95);\n      z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT};\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      backdrop-filter: blur(10px);\n      animation: fadeIn 0.3s ease;\n      pointer-events: auto;\n    `;const s=document.createElement("div");s.className="camera-fullscreen-container",s.style.cssText="\n      max-width: 95vw;\n      max-height: 95vh;\n      width: auto;\n      height: auto;\n      border-radius: 12px;\n      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n      position: relative;\n      animation: scaleIn 0.3s ease;\n      background: transparent;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      pointer-events: none;\n    ";let l=t.entity;if(t.template_mode&&t.template)try{const e=null===(i=document.querySelector("home-assistant"))||void 0===i?void 0:i.hass;if(e){let i=t.template;const o=i.match(/states\(['"]([^'"]+)['"]\)/g);o&&o.forEach((t=>{const o=t.match(/states\(['"]([^'"]+)['"]\)/)[1],n=null==e?void 0:e.states[o],a=n?n.state:"unknown";i=i.replace(t,`'${a}'`)}));const n=i.match(/is_state\(['"]([^'"]+)['"],\s*['"]([^'"]+)['"]\)/g);n&&n.forEach((t=>{const[,o,n]=t.match(/is_state\(['"]([^'"]+)['"],\s*['"]([^'"]+)['"]\)/),a=null==e?void 0:e.states[o],r=a&&a.state===n;i=i.replace(t,r?"True":"False")}));const a=i.match(/['"]([^'"]+)['"] if (.+?) else ['"]([^'"]+)['"]/);if(a){const[,e,t,i]=a;l=t.includes("True")?e:i}else{const e=i.match(/['"]([^'"]+)['"]/);e&&(l=e[1])}}}catch(e){console.error("Template evaluation error:",e),l=t.entity}if(l){const e=null===(o=document.querySelector("home-assistant"))||void 0===o?void 0:o.hass;if(e){const i=document.createElement("hui-image");if(i.hass=e,i.cameraImage=l,i.cameraView=t.live_view?"live":"auto",i.muted=!0!==t.audio_enabled,i.style.cssText="\n          width: 100%;\n          height: 100%;\n          max-width: 95vw;\n          max-height: 95vh;\n          object-fit: contain;\n          border-radius: 12px;\n          pointer-events: auto;\n        ",s.appendChild(i),!1!==t.show_name){const o=t.camera_name||(null===(a=null===(n=e.states[l])||void 0===n?void 0:n.attributes)||void 0===a?void 0:a.friendly_name)||l,r=document.createElement("div");r.className="camera-name-overlay-fullscreen",r.style.cssText="\n              position: absolute;\n              top: 16px;\n              left: 16px;\n              padding: 8px 16px;\n              background: rgba(0, 0, 0, 0.7);\n              color: white;\n              border-radius: 6px;\n              font-size: 16px;\n              font-weight: 500;\n              backdrop-filter: blur(4px);\n              text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n              z-index: 10;\n            ",r.textContent=o,i.addEventListener("load",(()=>{this.repositionOverlaysToVideoArea(i,r,s)})),s.appendChild(r)}}else{const e=document.createElement("div");e.style.cssText="\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-direction: column;\n          color: white;\n          font-size: 20px;\n          text-align: center;\n          padding: 40px;\n        ",e.innerHTML='\n          <ha-icon icon="mdi:camera-off" style="font-size: 64px; margin-bottom: 16px;"></ha-icon>\n          <div>Home Assistant not available</div>\n        ',s.appendChild(e)}}else{const e=document.createElement("div");e.style.cssText="\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n        color: white;\n        font-size: 20px;\n        text-align: center;\n        padding: 40px;\n      ",e.innerHTML='\n        <ha-icon icon="mdi:camera-off" style="font-size: 64px; margin-bottom: 16px;"></ha-icon>\n        <div>No Camera Available</div>\n      ',s.appendChild(e)}const d=document.createElement("div");d.className="camera-minimize-icon",d.style.cssText=`\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      padding: 6px;\n      background: transparent;\n      color: white;\n      font-size: 32px;\n      cursor: pointer;\n      z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT};\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      transition: all 0.2s ease;\n      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8), 0 0 8px rgba(0, 0, 0, 0.6);\n      filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.8));\n      pointer-events: auto;\n    `,d.innerHTML='<ha-icon icon="mdi:close" style="pointer-events: none;"></ha-icon>',d.title="Exit fullscreen",d.addEventListener("mouseenter",(()=>{d.style.transform="scale(1.15)",d.style.textShadow="0 1px 4px rgba(0, 0, 0, 0.9), 0 0 12px rgba(0, 0, 0, 0.7)",d.style.filter="drop-shadow(0 2px 4px rgba(0, 0, 0, 0.9))"})),d.addEventListener("mouseleave",(()=>{d.style.transform="scale(1)",d.style.textShadow="0 1px 3px rgba(0, 0, 0, 0.8), 0 0 8px rgba(0, 0, 0, 0.6)",d.style.filter="drop-shadow(0 1px 2px rgba(0, 0, 0, 0.8))"})),d.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.exitFullscreen(r)}));const c=e=>{"Escape"===e.key&&(this.exitFullscreen(r),document.removeEventListener("keydown",c))};document.addEventListener("keydown",c),r.addEventListener("click",(e=>{e.target===r&&(this.exitFullscreen(r),document.removeEventListener("keydown",c))})),r.appendChild(s),document.body.appendChild(r),document.body.appendChild(d),document.body.style.overflow="hidden";const p=e=>(e.preventDefault(),e.stopPropagation(),!1);document.addEventListener("contextmenu",p,!0),document.body.classList.add("camera-fullscreen-active"),r._escHandler=c,r._minimizeButton=d,r._contextMenuHandler=p}exitFullscreen(e){document.body.style.overflow="",document.body.classList.remove("camera-fullscreen-active");const t=e._escHandler;t&&document.removeEventListener("keydown",t);const i=e._contextMenuHandler;i&&document.removeEventListener("contextmenu",i,!0);const o=e._minimizeButton;o&&o.parentNode&&o.parentNode.removeChild(o),e.style.animation="fadeOut 0.2s ease",setTimeout((()=>{e.parentNode&&e.parentNode.removeChild(e)}),200)}repositionPreviewOverlays(e,t,i,o){try{const n=o.getBoundingClientRect(),a=e.querySelector("img")||e;if(!a||!a.naturalWidth)return;const r=a.naturalWidth/a.naturalHeight,s=n.width/n.height;let l=n.width,d=n.height,c=0,p=0;if(r>s?(d=n.width/r,p=(n.height-d)/2):r<s&&(l=n.height*r,c=(n.width-l)/2),c>5||p>5){const e=8;t&&this.repositionOverlayElement(t,c,p,l,d,e),i&&this.repositionOverlayElement(i,c,p,l,d,e)}}catch(e){console.warn("Failed to calculate video area for preview overlay positioning:",e)}}repositionOverlayElement(e,t,i,o,n,a){var r;const s=e.getBoundingClientRect();if(!(null===(r=e.parentElement)||void 0===r?void 0:r.getBoundingClientRect()))return;const l=t+o-s.width-a,d=i+n-s.height-a,c=t+o-s.width-a,p=i+n-s.height-a;if(e.style.left&&""!==e.style.left){const i=parseInt(e.style.left);e.style.left=`${Math.min(Math.max(t+a,i),l)}px`}if(e.style.right&&""!==e.style.right){const i=parseInt(e.style.right);e.style.right=`${Math.min(Math.max(t+a,i),c)}px`}if(e.style.top&&""!==e.style.top){const t=parseInt(e.style.top);e.style.top=`${Math.min(Math.max(i+a,t),d)}px`}if(e.style.bottom&&""!==e.style.bottom){const t=parseInt(e.style.bottom);e.style.bottom=`${Math.min(Math.max(i+a,t),p)}px`}}repositionOverlaysToVideoArea(e,t,i){try{const o=i.getBoundingClientRect(),n=e.getBoundingClientRect(),a=o.width/o.height;let r=n.width,s=n.height;const l=e.querySelector("img")||e;if(l&&l.naturalWidth){const e=l.naturalWidth/l.naturalHeight;e>a?(r=o.width,s=o.width/e):(s=o.height,r=o.height*e)}const d=(o.width-r)/2,c=(o.height-s)/2;if(d>20||c>20){t.style.left=`${d+16}px`,t.style.top=`${c+16}px`;const e=i.querySelector(".camera-fullscreen-icon");if(e){const t=e;t.style.right=`${d+16}px`,t.style.top=`${c+16}px`}}}catch(e){console.warn("Failed to calculate video area for overlay positioning:",e)}}_handleDimensionChange(e,t,i,o){const n={};if(!1!==e.aspect_ratio_linked){const o=e.aspect_ratio_value||1.778;"width"===t?(n.width=i,n.height=Math.round(i/o)):(n.height=i,n.width=Math.round(i*o)),n.width&&(n.width<100||n.width>1e3)&&(n.width=Math.max(100,Math.min(1e3,n.width)),n.height=Math.round(n.width/o)),n.height&&(n.height<100||n.height>1e3)&&(n.height=Math.max(100,Math.min(1e3,n.height)),n.width=Math.round(n.height*o))}else n[t]=i;o(n)}getFullscreenIconPositionStyles(e,t,i={},o){const n={position:"absolute",padding:"6px",background:"transparent",color:"white",fontSize:"22px",cursor:"pointer",zIndex:"5",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",textShadow:"0 1px 3px rgba(0, 0, 0, 0.8), 0 0 8px rgba(0, 0, 0, 0.6)",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.8))"},a=o===e,r=a?"40px":"8px";switch(this.getAdjustedPositionForCollision(e,o)){case"top-left":return Object.assign(Object.assign({},n),{top:a?r:"8px",left:"8px"});case"top-middle":return Object.assign(Object.assign({},n),{top:a?r:"8px",left:"50%",transform:"translateX(-50%)"});case"top-right":return Object.assign(Object.assign({},n),{top:a?r:"8px",right:"8px"});case"center":return Object.assign(Object.assign({},n),{top:a?"calc(50% + 20px)":"50%",left:"50%",transform:"translate(-50%, -50%)"});case"bottom-left":return Object.assign(Object.assign({},n),{bottom:a?r:"8px",left:"8px"});case"bottom-middle":return Object.assign(Object.assign({},n),{bottom:a?r:"8px",left:"50%",transform:"translateX(-50%)"});case"bottom-right":return Object.assign(Object.assign({},n),{bottom:a?r:"8px",right:"8px"});default:return Object.assign(Object.assign({},n),{top:"8px",right:"8px"})}}getAdjustedPositionForCollision(e,t){return e}getCameraNamePositionStyles(e,t,i={}){const o={position:"absolute",padding:"6px 12px",background:"rgba(0, 0, 0, 0.7)",color:i.color||this.getTextColor(t),fontSize:i.font_size?"number"==typeof i.font_size?`${i.font_size}px`:i.font_size:this.getTextSize(t),fontWeight:i.font_weight||this.getTextWeight(t),fontFamily:i.font_family||this.getTextFont(t),borderRadius:"4px",textTransform:i.text_transform||void 0,letterSpacing:i.letter_spacing||void 0,lineHeight:i.line_height||void 0,zIndex:"10",pointerEvents:"none",backdropFilter:"blur(4px)",maxWidth:"calc(100% - 20px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textShadow:i.text_shadow||"0 1px 2px rgba(0, 0, 0, 0.8)",transition:"all 0.2s ease"};switch(e){case"top-left":default:return Object.assign(Object.assign({},o),{top:"8px",left:"8px"});case"top-right":return Object.assign(Object.assign({},o),{top:"8px",right:"8px"});case"top-middle":return Object.assign(Object.assign({},o),{top:"8px",left:"50%",transform:"translateX(-50%)",textAlign:"center"});case"center":return Object.assign(Object.assign({},o),{top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"});case"bottom-left":return Object.assign(Object.assign({},o),{bottom:"8px",left:"8px"});case"bottom-middle":return Object.assign(Object.assign({},o),{bottom:"8px",left:"50%",transform:"translateX(-50%)",textAlign:"center"});case"bottom-right":return Object.assign(Object.assign({},o),{bottom:"8px",right:"8px"})}}hasActiveLink(e){const t=e.tap_action&&"nothing"!==e.tap_action.action,i=e.hold_action&&"nothing"!==e.hold_action.action,o=e.double_tap_action&&"nothing"!==e.double_tap_action.action,n=!0===e.tap_opens_fullscreen;return t||i||o||n||!!e.entity}refreshCamera(e,t){document.querySelectorAll('hui-image[class*="camera-image"]').forEach((i=>{i.cameraImage===e&&i.hass===t&&(i.hass=Object.assign({},t),i.requestUpdate())}))}getCameraImageUrl(e,t,i){if(!e||!t)return"";let o;try{o=t.hassUrl?`${t.hassUrl()}/api/camera_proxy/${e}`:`/api/camera_proxy/${e}`;const i=o.includes("?")?"&":"?";o+=`${i}token=${Date.now()}`}catch(t){o=`/api/camera_proxy/${e}?token=${Date.now()}`}return o}async getCameraImageBlob(e,t,i){try{const i=`/api/camera_proxy/${e}?t=${Date.now()}`,o=await fetch(i,{method:"GET",credentials:"include",headers:{Accept:"image/*","Cache-Control":"no-cache",Pragma:"no-cache"}});if(!o.ok)return await this.getCameraImageViaWebSocket(e,t);const n=await o.blob();return URL.createObjectURL(n)}catch(i){return await this.getCameraImageViaWebSocket(e,t)}}async getCameraImageViaWebSocket(e,t){try{const i=t.connection;if(!i)throw new Error("No WebSocket connection available");const o=await i.sendMessagePromise({type:"camera_thumbnail",entity_id:e});if(o&&o.content){const e=atob(o.content),t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);const i=new Uint8Array(t),n=new Blob([i],{type:"image/jpeg"});return URL.createObjectURL(n)}throw new Error("No image content received from WebSocket")}catch(e){return""}}async handleImageError(e,t){var i,o,n,a,r,s,l,d,c,p;const u=e.target;if(!u.dataset.triedBlob&&t.entity){u.dataset.triedBlob="true";try{const e=(null===(i=document.querySelector("home-assistant"))||void 0===i?void 0:i.hass)||(null===(o=document.querySelector("ha-panel-lovelace"))||void 0===o?void 0:o.hass)||(null===(n=window.hassConnection)||void 0===n?void 0:n.hass);if(e){const i=await this.getCameraImageBlob(t.entity,e,t.image_quality);if(i)return void(u.src=i)}}catch(e){}}if(t.fallback_image)u.src=t.fallback_image;else{u.style.display="none";const e=u.closest(".camera-image-container");if(e){const i=t.entity?null===(s=null===(r=null===(a=document.querySelector("home-assistant"))||void 0===a?void 0:a.hass)||void 0===r?void 0:r.states)||void 0===s?void 0:s[t.entity]:null,o=(null===(l=null==i?void 0:i.attributes)||void 0===l?void 0:l.brand)||(null===(d=null==i?void 0:i.attributes)||void 0===d?void 0:d.model)||"Unknown",n=(null===(c=document.querySelector("home-assistant"))||void 0===c||c.hass,t);if(e.innerHTML=`\n          <div style="\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            background-color: var(--warning-color, #ff9800);\n            color: ${this.getTextColor(n)};\n            padding: 20px;\n            border-radius: 8px;\n            text-align: center;\n            min-height: 150px;\n            border: 1px solid rgba(255,255,255,0.2);\n            font-family: ${this.getTextFont(n)};\n          ">\n            <ha-icon icon="mdi:camera-off" style="font-size: 48px; margin-bottom: 12px; opacity: 0.9;"></ha-icon>\n            <span style="font-weight: ${this.getTextWeight(n)}; font-size: ${this.getTextSize(n)}; margin-bottom: 8px;">Camera Load Failed</span>\n            <span style="font-size: ${this.getSmallTextSize(n)}; margin-bottom: 8px; opacity: 0.9;">Entity: ${t.entity}</span>\n            <span style="font-size: ${this.getSmallTextSize(n)}; margin-bottom: 12px; opacity: 0.8;">Camera Type: ${o}</span>\n            <div style="font-size: ${this.getSmallTextSize(n)}; opacity: 0.8; line-height: 1.4; margin-bottom: 12px;">\n              <div style="margin-bottom: 6px;">• Check camera entity is working in HA</div>\n              <div style="margin-bottom: 6px;">• Verify RTSP credentials in HA config</div>\n              <div>• Try refreshing the browser</div>\n            </div>\n            <button \n              onclick="window.retryCamera_${null===(p=t.entity)||void 0===p?void 0:p.replace(/\./g,"_")}"\n              style="\n                background: rgba(255,255,255,0.2);\n                border: 1px solid rgba(255,255,255,0.3);\n                color: white;\n                padding: 8px 16px;\n                border-radius: 4px;\n                cursor: pointer;\n                font-size: ${this.getSmallTextSize(n)};\n                font-family: ${this.getTextFont(n)};\n                transition: all 0.2s ease;\n              "\n              onmouseover="this.style.background='rgba(255,255,255,0.3)'"\n              onmouseout="this.style.background='rgba(255,255,255,0.2)'"\n            >\n              🔄 Retry Camera Load\n            </button>\n          </div>\n        `,t.entity){const i=`retryCamera_${t.entity.replace(/\./g,"_")}`;window[i]=async()=>{var i;if(null===(i=document.querySelector("home-assistant"))||void 0===i?void 0:i.hass)try{const i=Date.now(),o=`/api/camera_proxy/${t.entity}?t=${i}`,a=document.createElement("img");a.className="camera-image",a.style.cssText=`\n                  position: absolute;\n                  top: 0;\n                  left: 0;\n                  width: 100%;\n                  height: 100%;\n                  object-fit: ${t.image_fit||"cover"};\n                  border-radius: inherit;\n                `,a.onerror=e=>{"string"!=typeof e&&this.handleImageError(e,t)},a.onload=()=>{e&&(e.innerHTML="",e.appendChild(a))},a.src=o,e&&(e.innerHTML=`\n                    <div style="\n                      display: flex;\n                      align-items: center;\n                      justify-content: center;\n                      flex-direction: column;\n                      background-color: var(--primary-color);\n                      color: ${this.getTextColor(n)};\n                      padding: 20px;\n                      border-radius: 8px;\n                      text-align: center;\n                      min-height: 150px;\n                      font-family: ${this.getTextFont(n)};\n                    ">\n                      <div style="\n                        width: 32px;\n                        height: 32px;\n                        border: 3px solid rgba(255,255,255,0.3);\n                        border-top: 3px solid white;\n                        border-radius: 50%;\n                        animation: spin 1s linear infinite;\n                        margin-bottom: 12px;\n                      "></div>\n                      <span style="font-weight: ${this.getTextWeight(n)}; font-size: ${this.getTextSize(n)};">Retrying Camera Load...</span>\n                      <style>\n                        @keyframes spin {\n                          0% { transform: rotate(0deg); }\n                          100% { transform: rotate(360deg); }\n                        }\n                      </style>\n                    </div>\n                  `)}catch(e){console.error("🎥 Retry failed:",e)}}}}}}renderConditionalFieldsGroup(e,t){return o.qy`
      <div
        class="conditional-fields-group"
        style="margin-top: 16px; padding: 16px; border-left: 4px solid var(--primary-color); background: rgba(var(--rgb-primary-color), 0.08); border-radius: 0 8px 8px 0;"
      >
        <div
          style="font-weight: 600; color: var(--primary-color); margin-bottom: 12px; font-size: 14px;"
        >
          ${e}
        </div>
        ${t}
      </div>
    `}getTextColor(e){return e.text_color||"white"}getTextSize(e){const t=e.text_size||14;return"number"==typeof t?`${t}px`:t}getSmallTextSize(e){const t=e.text_size||14;return`${"number"==typeof t?Math.max(10,t-2):12}px`}getTextWeight(e){return e.text_weight||"500"}getTextFont(e){return e.text_font||'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'}styleObjectToCss(e){return Object.entries(e).filter((([e,t])=>null!=t&&""!==t)).map((([e,t])=>`${this.camelToKebab(e)}: ${t}`)).join("; ")}camelToKebab(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}addPixelUnit(e){return e&&/^\d+$/.test(e)?`${e}px`:e}getPaddingWithDesign(e,t){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${e.padding_top||"0px"} ${e.padding_right||"0px"} ${e.padding_bottom||"0px"} ${e.padding_left||"0px"}`:this.getPaddingCSS(t)}getMarginWithDesign(e,t){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${e.margin_top||"8px"} ${e.margin_right||"0px"} ${e.margin_bottom||"8px"} ${e.margin_left||"0px"}`:this.getMarginCSS(t)}getBorderWithDesign(e,t){return e.border_width&&e.border_style&&e.border_color?`${e.border_width} ${e.border_style} ${e.border_color}`:this.getBorderCSS(t)}getBackgroundImageWithDesign(e,t,i){return"url"===e.background_image_type&&e.background_image?`url('${e.background_image}')`:"entity"===e.background_image_type&&e.background_image_entity&&i.states[e.background_image_entity]?`url('/api/camera_proxy/${e.background_image_entity}')`:this.getBackgroundImageCSS(t,i)}getPaddingCSS(e){return e.padding_top||e.padding_bottom||e.padding_left||e.padding_right?`${this.addPixelUnit(e.padding_top)||"0px"} ${this.addPixelUnit(e.padding_right)||"0px"} ${this.addPixelUnit(e.padding_bottom)||"0px"} ${this.addPixelUnit(e.padding_left)||"0px"}`:"0"}getMarginCSS(e){return e.margin_top||e.margin_bottom||e.margin_left||e.margin_right?`${this.addPixelUnit(e.margin_top)||"8px"} ${this.addPixelUnit(e.margin_right)||"0px"} ${this.addPixelUnit(e.margin_bottom)||"8px"} ${this.addPixelUnit(e.margin_left)||"0px"}`:"8px 0"}getBackgroundCSS(e){return e.background_color||"transparent"}getBackgroundImageCSS(e,t){return"url"===e.background_image_type&&e.background_image?`url('${e.background_image}')`:"entity"===e.background_image_type&&e.background_image_entity&&t.states[e.background_image_entity]?`url('/api/camera_proxy/${e.background_image_entity}')`:""}getBorderCSS(e){return e.border_width&&e.border_style&&e.border_color?`${e.border_width} ${e.border_style} ${e.border_color}`:""}validateAction(e){const t=[];return"navigate"!==e.action||e.navigation_path||t.push("Navigation path is required for navigate action"),"call-service"!==e.action||e.service&&e.service_data||t.push("Service and service data are required for call-service action"),t}getStyles(){return`\n      .camera-module-container {\n        width: 100%;\n        box-sizing: border-box;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-name-overlay {\n        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);\n        backdrop-filter: blur(4px);\n        -webkit-backdrop-filter: blur(4px);\n        transition: all 0.2s ease;\n      }\n      \n      .camera-image-container {\n        position: relative;\n        overflow: hidden;\n        margin: 0 auto;\n        flex-shrink: 0;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-image {\n        width: 100%;\n        height: 100%;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-unavailable {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-direction: column;\n        background-color: var(--disabled-color, #f5f5f5);\n        color: var(--secondary-text-color);\n        min-height: 150px;\n        transition: all 0.3s ease;\n      }\n      \n      .camera-module-clickable {\n        cursor: pointer;\n        transition: transform 0.2s ease;\n      }\n      \n      .camera-module-clickable:hover {\n        transform: scale(1.02);\n      }\n      \n      .camera-module-clickable:active {\n        transform: scale(0.98);\n      }\n\n      /* Standard field styling */\n      .field-title {\n        font-size: 16px !important;\n        font-weight: 600 !important;\n     \n        margin-bottom: 4px !important;\n      }\n\n      .field-description {\n        font-size: 13px !important;\n        color: var(--secondary-text-color) !important;\n        margin-bottom: 12px !important;\n        opacity: 0.8 !important;\n        line-height: 1.4 !important;\n      }\n\n      .section-title {\n        font-size: 18px !important;\n        font-weight: 700 !important;\n        color: var(--primary-color) !important;\n        text-transform: uppercase !important;\n        letter-spacing: 0.5px !important;\n      }\n\n      /* Conditional fields grouping */\n      .conditional-fields-group {\n        margin-top: 16px;\n        border-left: 4px solid var(--primary-color);\n        background: rgba(var(--rgb-primary-color), 0.08);\n        border-radius: 0 8px 8px 0;\n        overflow: hidden;\n        transition: all 0.2s ease;\n        animation: slideInFromLeft 0.3s ease-out;\n      }\n\n      @keyframes slideInFromLeft {\n        from {\n          opacity: 0;\n          transform: translateX(-10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateX(0);\n        }\n      }\n\n      /* Global design responsive text */\n      .camera-module-container * {\n        transition: font-size 0.3s ease, color 0.3s ease, font-weight 0.3s ease;\n      }\n\n      /* Enhanced animations for global design changes */\n      @keyframes textSizeChange {\n        0% { transform: scale(1); }\n        50% { transform: scale(1.02); }\n        100% { transform: scale(1); }\n      }\n\n      .camera-module-container.design-updating {\n        animation: textSizeChange 0.3s ease;\n      }\n\n      /* Fullscreen icon styling */\n      .camera-fullscreen-icon {\n        transition: all 0.2s ease;\n        user-select: none;\n      }\n\n      .camera-fullscreen-icon:hover {\n        transform: scale(1.15);\n        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 12px rgba(0, 0, 0, 0.7);\n        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.9));\n      }\n\n      .camera-fullscreen-icon:active {\n        transform: scale(1.05);\n      }\n\n      /* Fullscreen overlay animations */\n      @keyframes fadeIn {\n        from {\n          opacity: 0;\n        }\n        to {\n          opacity: 1;\n        }\n      }\n\n      @keyframes fadeOut {\n        from {\n          opacity: 1;\n        }\n        to {\n          opacity: 0;\n        }\n      }\n\n      @keyframes scaleIn {\n        from {\n          opacity: 0;\n          transform: scale(0.8);\n        }\n        to {\n          opacity: 1;\n          transform: scale(1);\n        }\n      }\n\n      /* Fullscreen overlay global styles */\n      .camera-fullscreen-overlay {\n        -webkit-backdrop-filter: blur(10px);\n        backdrop-filter: blur(10px);\n        z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n        position: fixed !important;\n      }\n\n      .camera-fullscreen-overlay .camera-image-container {\n        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n      }\n\n      /* Override HA context menus and modals */\n      .camera-minimize-icon {\n        z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n        position: fixed !important;\n        pointer-events: auto !important;\n      }\n\n      /* Ensure fullscreen is above all HA elements */\n      body .camera-fullscreen-overlay {\n        z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n      }\n\n      body .camera-minimize-icon {\n        z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n      }\n\n      /* When fullscreen is active, ensure our elements are always on top */\n      body.camera-fullscreen-active .camera-fullscreen-overlay,\n      body.camera-fullscreen-active .camera-minimize-icon {\n        z-index: ${_.Mu.CAMERA_FULLSCREEN_CONTENT} !important;\n        position: fixed !important;\n      }\n\n      /* Hide HA overlays during fullscreen */\n      body.camera-fullscreen-active ha-dialog,\n      body.camera-fullscreen-active ha-more-info-dialog,\n      body.camera-fullscreen-active .mdc-dialog,\n      body.camera-fullscreen-active .dialog-container {\n        z-index: ${_.Mu.CAMERA_FULLSCREEN_OVERLAY} !important;\n      }\n\n      .camera-minimize-icon:hover {\n        transform: scale(1.15) !important;\n        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.9), 0 0 12px rgba(0, 0, 0, 0.7) !important;\n        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.9)) !important;\n      }\n\n      .camera-minimize-icon:active {\n        transform: scale(1.05) !important;\n      }\n\n      /* Gap control styles - Standardized Slider Pattern */\n      .gap-control-container {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .gap-slider {\n        flex: 1;\n        height: 6px;\n        background: var(--divider-color);\n        border-radius: 3px;\n        outline: none;\n        appearance: none;\n        -webkit-appearance: none;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      }\n\n      .gap-slider::-webkit-slider-thumb {\n        appearance: none;\n        -webkit-appearance: none;\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider::-moz-range-thumb {\n        width: 20px;\n        height: 20px;\n        background: var(--primary-color);\n        border-radius: 50%;\n        cursor: pointer;\n        border: none;\n        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n      }\n\n      .gap-slider:hover {\n        background: var(--primary-color);\n        opacity: 0.7;\n      }\n\n      .gap-slider:hover::-webkit-slider-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-slider:hover::-moz-range-thumb {\n        transform: scale(1.1);\n      }\n\n      .gap-input {\n        width: 48px !important;\n        max-width: 48px !important;\n        min-width: 48px !important;\n        padding: 4px 6px !important;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        font-size: 13px;\n        text-align: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n        box-sizing: border-box;\n      }\n\n      .gap-input:focus {\n        outline: none;\n        border-color: var(--primary-color);\n        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);\n      }\n\n      .reset-btn {\n        width: 36px;\n        height: 36px;\n        padding: 0;\n        border: 1px solid var(--divider-color);\n        border-radius: 4px;\n        background: var(--secondary-background-color);\n        color: var(--primary-text-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s ease;\n        flex-shrink: 0;\n      }\n\n      .reset-btn:hover {\n        background: var(--primary-color);\n        color: var(--text-primary-color);\n        border-color: var(--primary-color);\n      }\n\n      .reset-btn ha-icon {\n        font-size: 16px;\n      }\n    `}}v.prototype._isEditorOpen=function(){try{return!!document.querySelector("hui-dialog-edit-card, hui-card-edit-mode")}catch(e){return!1}},v.prototype._isValidCameraEntity=function(e,t){var i;if(!e||!t)return!1;const o=null===(i=e.states)||void 0===i?void 0:i[t];return!!o&&("camera"===t.split(".")[0]&&"unavailable"!==o.state&&"unknown"!==o.state)},v.prototype._scheduleCameraUpdate=function(e,t,i,o){this._lastAppliedEntity===e&&this._lastAppliedLive===t||(this._pendingCameraProps={entity:e,live:t},this._webrtcUpdateTimer&&clearTimeout(this._webrtcUpdateTimer),this._webrtcUpdateTimer=setTimeout((()=>{var e;const t=this._pendingCameraProps;if(!t)return;if(!this._isValidCameraEntity(o,t.entity))return;const n=(this.renderRoot||this.shadowRoot||this).querySelector(`.camera-module-container[data-uc-camera-id="${i.id}"] .camera-image-container`);if(n){const i=Array.from(n.querySelectorAll("hui-image"));for(let e=1;e<i.length;e++)i[e].remove();const o=(null===(e=this._huiImageRef)||void 0===e?void 0:e.value)||i[0];o?(this._isEditorOpen()&&this._lastAppliedEntity!==t.entity&&(o.cameraView="auto"),o.cameraImage=t.entity,queueMicrotask((()=>{o.cameraView=t.live?"live":"auto"})),this._lastAppliedEntity=t.entity,this._lastAppliedLive=t.live,this._lastRenderedEntity=t.entity):(this._lastAppliedEntity=t.entity,this._lastAppliedLive=t.live,this.requestUpdate())}}),200))}},9643:(e,t,i)=>{i.d(t,{D:()=>a});var o=i(5672);const n=new class{constructor(){this.privacyRules=[{pattern:/(?:(?:192[\._]168|10[\._]|172[\._](?:1[6-9]|2[0-9]|3[01]))[\._]\d{1,3}[\._]\d{1,3}|\d{1,3}[\._]\d{1,3}[\._]\d{1,3}[\._]\d{1,3})/g,replacement:"192_168_1_100",description:"IP addresses (with dots or underscores)",category:"ip"},{pattern:/\b[0-9A-Fa-f]{2}[:-][0-9A-Fa-f]{2}[:-][0-9A-Fa-f]{2}[:-][0-9A-Fa-f]{2}[:-][0-9A-Fa-f]{2}[:-][0-9A-Fa-f]{2}\b/g,replacement:"00:11:22:33:44:55",description:"MAC addresses",category:"network"}],this.contextualPrivacyRules=[{rule:{pattern:/\bperson\.[a-zA-Z0-9_]+/g,replacement:"person.person",description:"Person entity IDs (any name)",category:"personal"},fieldPatterns:[/entity/i,/template/i,/name/i,/custom.*text/i]},{rule:{pattern:/\b(device_tracker\.|sensor\.|switch\.|light\.|climate\.|binary_sensor\.|input_boolean\.|input_text\.|input_select\.)?(emily|emma|olivia|ava|sophia|isabella|charlotte|mia|amelia|harper|evelyn|abigail|ella|elizabeth|camila|luna|sofia|avery|mila|aria|scarlett|penelope|layla|chloe|victoria|madison|eleanor|grace|nora|riley|zoey|hannah|hazel|lily|ellie|violet|lillian|zoe|stella|aurora|natalie|emilia|evelyn|leah|aubrey|willow|addison|lucy|audrey|bella|nova|brooklyn|alice|jasmine|anna|liam|noah|oliver|elijah|william|james|benjamin|lucas|henry|alexander|mason|michael|ethan|daniel|jacob|logan|jackson|levi|sebastian|mateo|jack|owen|theodore|aiden|samuel|joseph|john|david|wyatt|matthew|luke|asher|carter|julian|grayson|leo|jayden|gabriel|isaac|lincoln|anthony|hudson|dylan|ezra|thomas|charles|christopher|jaxon|maverick|josiah|isaiah|andrew|elias|joshua|nathan|caleb|ryan|adrian|miles|eli|nolan|christian|aaron|cameron|ezekiel|colton|luca|landon|hunter|jonathan|santiago|axel|easton|cooper|jeremiah|angel|roman|connor|jameson|robert|greyson|jordan|ian|carson|jaxson|leonardo|nicholas|dominic|austin|everett|brooks|xavier|kai|jose|parker|adam|jace|wesley|kayden|silas)(_\w+)?\b/gi,replacement:"person",description:"Personal names in non-person entity IDs",category:"personal"},fieldPatterns:[/entity/i,/template/i,/name/i,/custom.*text/i]},{rule:{pattern:/\b(sensor\.|switch\.|light\.|climate\.|binary_sensor\.)?(master_bedroom|kids_room|bedroom|kitchen|bathroom|garage|basement|attic|office|nursery|playroom|den|study|workshop|shed|patio|deck|porch|driveway|backyard|frontyard|living_room|dining_room|family_room|guest_room|laundry_room|utility_room|pantry|closet|hallway|stairway|foyer|entryway|mudroom)(_\w+)?\b/gi,replacement:"room",description:"Room/location identifiers",category:"location"},fieldPatterns:[/entity/i,/template/i,/name/i,/custom.*text/i]},{rule:{pattern:/\b(device_tracker\.|sensor\.)?(\w*)(phone|ipad|tablet|laptop|desktop|macbook|iphone|android|samsung|pixel|watch|airpods|headphones)(\w*)\b/gi,replacement:"device",description:"Personal device identifiers",category:"device"},fieldPatterns:[/entity/i,/template/i,/device/i,/tracker/i]},{rule:{pattern:/\b(sensor\.|switch\.|device_tracker\.)?(wifi|network|router|modem|access_point|ap)(_\w+)?\b/gi,replacement:"network_device",description:"Network device identifiers",category:"network"},fieldPatterns:[/entity/i,/template/i,/network/i]},{rule:{pattern:/\b(device_tracker\.|sensor\.)?(car|vehicle|truck|suv|van|motorcycle|bike|tesla|bmw|audi|honda|toyota|ford|chevy|chevrolet|nissan|hyundai|kia|mazda|subaru|volkswagen|vw|volvo|mercedes|benz|lexus|acura|infiniti|cadillac|buick|gmc|jeep|ram|dodge|chrysler|fiat|mini|porsche|ferrari|lamborghini|maserati|jaguar|land_rover|range_rover)(_\w+)?\b/gi,replacement:"vehicle",description:"Vehicle identifiers",category:"device"},fieldPatterns:[/entity/i,/template/i,/vehicle/i,/car/i,/tracker/i]},{rule:{pattern:/\b\d{1,5}\s+[A-Za-z\s]+(street|st|avenue|ave|road|rd|lane|ln|drive|dr|court|ct|place|pl|way|circle|cir|boulevard|blvd)\b/gi,replacement:"123 Main Street",description:"Street addresses",category:"location"},fieldPatterns:[/address/i,/location/i,/street/i,/template/i]}]}scanAndSanitize(e,t=""){const i=[];return{found:i,sanitizedData:this._deepSanitize(JSON.parse(JSON.stringify(e)),i,t)}}_deepSanitize(e,t,i){if("string"==typeof e)return this._sanitizeString(e,t,i);if(Array.isArray(e))return e.map(((e,o)=>this._deepSanitize(e,t,`${i}[${o}]`)));if(e&&"object"==typeof e){const o={};for(const[n,a]of Object.entries(e)){const e=i?`${i}.${n}`:n;o[n]=this._deepSanitize(a,t,e)}return o}return e}_sanitizeString(e,t,i){let o=e;for(const n of this.privacyRules){const a=e.match(n.pattern);if(a){for(const e of a)t.find((t=>t.original===e&&t.field===i))||t.push({original:e,replacement:n.replacement,category:n.category,description:n.description,field:i});o=o.replace(n.pattern,n.replacement)}}for(const n of this.contextualPrivacyRules)if(n.fieldPatterns.some((e=>e.test(i)))){const a=e.match(n.rule.pattern);if(a){for(const e of a)t.find((t=>t.original===e&&t.field===i))||t.push({original:e,replacement:n.rule.replacement,category:n.rule.category,description:n.rule.description,field:i});o=o.replace(n.rule.pattern,n.rule.replacement)}}return o}async showPrivacyDialog(e){return e.found.length>0&&console.log(`🔒 Privacy Protection: Automatically sanitized ${e.found.length} items`),!0}generateWarningMessage(e){if(0===e.found.length)return"No sensitive information detected. Safe to export!";const t=[...new Set(e.found.map((e=>e.category)))],i={ip:"IP addresses",personal:"Personal names",location:"Location info",device:"Device names",network:"Network info"},o=t.map((e=>i[e])).join(", "),n=e.found.length;return`🔒 Privacy Protection: Found ${n} sensitive item${n>1?"s":""} (${o}) that will be replaced with generic placeholders.`}generateDetailedReport(e){if(0===e.found.length)return"✅ No sensitive information found - safe to export!";const t=e.found.reduce(((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e)),{});let i="🔒 Privacy Protection Report:\n\n";for(const[e,o]of Object.entries(t))i+=`${{ip:"🌐",personal:"👤",location:"📍",device:"📱",network:"🔗"}[e]} ${o[0].description}:\n`,o.forEach((e=>{i+=`  "${e.original}" → "${e.replacement}" (in ${e.field})\n`})),i+="\n";return i}_generateDialogMessage(e){const t=e.found.length;let i="🔒 PRIVACY PROTECTION\n\n";i+=`Found ${t} potentially sensitive item${t>1?"s":""} that will be replaced:\n\n`;const o=e.found.reduce(((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e)),{});for(const[e,t]of Object.entries(o))i+=`${{ip:"🌐",personal:"👤",location:"📍",device:"📱",network:"🔗"}[e]} ${t[0].description}:\n`,t.slice(0,3).forEach((e=>{i+=`  "${e.original}" → "${e.replacement}"\n`})),t.length>3&&(i+=`  ... and ${t.length-3} more\n`),i+="\n";return i+="This protects your privacy when sharing presets.\n\n",i+="Continue with export?",i}},a=new class{async exportRowToClipboard(e,t){const i=n.scanAndSanitize(e);if(!await n.showPrivacyDialog(i))throw new Error("Export cancelled by user");const a={type:"ultra-card-row",version:o.x,data:i.sanitizedData,metadata:{exported:(new Date).toISOString(),name:t||"Exported Row",privacyProtected:i.found.length>0}},r=this._generateShortcode(a);await this._copyToClipboard(r)}async exportLayoutToClipboard(e,t){const i=n.scanAndSanitize(e);if(!await n.showPrivacyDialog(i))throw new Error("Export cancelled by user");const a={type:"ultra-card-layout",version:o.x,data:i.sanitizedData,metadata:{exported:(new Date).toISOString(),name:t||"Exported Layout",privacyProtected:i.found.length>0}},r=this._generateShortcode(a);await this._copyToClipboard(r)}async exportModuleToClipboard(e,t){const i=n.scanAndSanitize(e);if(!await n.showPrivacyDialog(i))throw new Error("Export cancelled by user");const a={type:"ultra-card-module",version:o.x,data:i.sanitizedData,metadata:{exported:(new Date).toISOString(),name:t||"Exported Module",privacyProtected:i.found.length>0}},r=this._generateShortcode(a);await this._copyToClipboard(r)}importFromShortcode(e){try{const t=e.trim().match(/\[ultra_card\]([\s\S]*?)\[\/ultra_card\]/);if(!t)throw new Error("Invalid Ultra Card shortcode format");const i=t[1].trim();if(!i||0===i.length)throw new Error("Empty shortcode data");let o;try{o=atob(i)}catch(e){throw new Error("Invalid base64 encoding in shortcode")}const n=o.trim();if(!n||0===n.length)throw new Error("Empty JSON data in shortcode");let a;try{a=JSON.parse(n)}catch(e){const t=this._attemptJsonFix(n);if(!t)throw new Error(`Invalid JSON in shortcode: ${e instanceof Error?e.message:"Unknown error"}`);a=JSON.parse(t)}if(!this._isValidExportData(a))throw new Error("Invalid export data structure");return a.data=this._regenerateIds(a.data,a.type),a}catch(e){return console.error("Failed to import from shortcode:",e),null}}async importFromClipboard(){try{if(navigator.clipboard&&navigator.clipboard.readText){const e=await navigator.clipboard.readText();return e&&0!==e.trim().length?this.importFromShortcode(e):(console.warn("Clipboard is empty"),null)}{const e=prompt("Paste your Ultra Card shortcode here:");return e&&0!==e.trim().length?this.importFromShortcode(e):null}}catch(e){console.error("Failed to read from clipboard:",e);try{const e=prompt("Clipboard access failed. Please paste your Ultra Card shortcode here:");return e&&0!==e.trim().length?this.importFromShortcode(e):null}catch(e){return console.error("Fallback paste also failed:",e),null}}}async exportToFile(e,t,i){const a=n.scanAndSanitize(e);if(!await n.showPrivacyDialog(a))throw new Error("Export cancelled by user");const r={type:t,version:o.x,data:a.sanitizedData,metadata:{exported:(new Date).toISOString(),name:i,privacyProtected:a.found.length>0}},s=JSON.stringify(r,null,2),l=new Blob([s],{type:"application/json"}),d=URL.createObjectURL(l),c=document.createElement("a");c.href=d,c.download=`${i.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.ultracard`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(d)}async importFromFile(e){try{const t=await e.text(),i=JSON.parse(t);if(!this._isValidExportData(i))throw new Error("Invalid file format");return i.data=this._regenerateIds(i.data,i.type),i}catch(e){return console.error("Failed to import from file:",e),null}}_generateShortcode(e){const t=JSON.stringify(e);return`[ultra_card]${btoa(t)}[/ultra_card]`}async _copyToClipboard(e){try{await navigator.clipboard.writeText(e)}catch(t){const i=document.createElement("textarea");i.value=e,i.style.position="fixed",i.style.left="-999999px",i.style.top="-999999px",document.body.appendChild(i),i.focus(),i.select(),document.execCommand("copy"),document.body.removeChild(i)}}_isValidExportData(e){return e&&"string"==typeof e.type&&["ultra-card-row","ultra-card-layout","ultra-card-module"].includes(e.type)&&"string"==typeof e.version&&e.data&&e.metadata&&"string"==typeof e.metadata.exported}_attemptJsonFix(e){try{let t=e.replace(/,\s*([}\]])/g,"$1");t=t.replace(/[^}\]]*$/,"");const i=t.lastIndexOf("}"),o=t.lastIndexOf("]"),n=Math.max(i,o);return n>0&&(t=t.substring(0,n+1)),JSON.parse(t),t}catch(e){return null}}_regenerateIds(e,t){const i=JSON.parse(JSON.stringify(e));switch(t){case"ultra-card-row":return this._regenerateRowIds(i);case"ultra-card-layout":return this._regenerateLayoutIds(i);case"ultra-card-module":return this._regenerateModuleIds(i);default:return i}}_regenerateRowIds(e){return e.id=`row-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,e.columns=e.columns.map(((e,t)=>Object.assign(Object.assign({},e),{id:`col-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`,modules:e.modules.map(((e,t)=>Object.assign(Object.assign({},e),{id:`${e.type}-${Date.now()}-${t}-${Math.random().toString(36).substr(2,9)}`})))}))),e}_regenerateLayoutIds(e){return e.rows=e.rows.map((e=>this._regenerateRowIds(e))),e}_regenerateModuleIds(e){return e.id=`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,e}}},9662:(e,t,i)=>{i.d(t,{A:()=>l});var o=i(5183),n=i(4276),a=i(456),r=i(5575),s=(i(6768),function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r});let l=class extends o.WF{constructor(){super(...arguments),this._config={}}willUpdate(e){e.has("module")&&(this._config={tap_action:this.module.tap_action,hold_action:this.module.hold_action,double_tap_action:this.module.double_tap_action})}_valueChanged(e){e.stopPropagation(),this._config=Object.assign({},e.detail.value);const t=e=>{if(!e)return e;let t=this.module.entity;if(!t&&"icon"===this.module.type){const e=this.module;e.icons&&e.icons.length>0&&e.icons[0].entity&&(t=e.icons[0].entity)}if(!t&&"info"===this.module.type){const e=this.module;e.info_entities&&e.info_entities.length>0&&e.info_entities[0].entity&&(t=e.info_entities[0].entity)}return"more-info"===e.action&&!e.entity&&t?Object.assign(Object.assign({},e),{entity:t}):"toggle"!==e.action||e.entity||e.target||!t?e:Object.assign(Object.assign({},e),{entity:t})};this.dispatchEvent(new CustomEvent("module-changed",{detail:{updates:{tap_action:t(e.detail.value.tap_action),hold_action:t(e.detail.value.hold_action),double_tap_action:t(e.detail.value.double_tap_action)}},bubbles:!0,composed:!0})),this._triggerPreviewUpdate()}_triggerPreviewUpdate(){window._ultraCardUpdateTimer||(window._ultraCardUpdateTimer=setTimeout((()=>{const e=new CustomEvent("ultra-card-template-update",{bubbles:!0,composed:!0});window.dispatchEvent(e),window._ultraCardUpdateTimer=null}),50))}render(){var e;if(!this.hass||!this.module)return o.qy``;const t=(null===(e=this.hass.locale)||void 0===e?void 0:e.language)||"en",i=this.tabTitle||(0,a.kg)("editor.actions.title",t,"Actions Configuration");return o.qy`
      <div class="actions-section">
        <div class="section-header">
          <h4>
            <ha-icon icon="mdi:gesture-tap"></ha-icon>
            ${i}
          </h4>
          <p>
            ${(0,a.kg)("editor.actions.description",t,"Configure how this module responds to user interactions. Uses Home Assistant's native action system for consistent behavior across your dashboard.")}
          </p>
        </div>

        <ha-form
          .hass=${this.hass}
          .data=${this._config}
          .schema=${[{name:"tap_action",selector:{ui_action:{}}},{name:"hold_action",selector:{ui_action:{}}},{name:"double_tap_action",selector:{ui_action:{}}}]}
          .computeLabel=${e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${e.name}`)}
          @value-changed=${this._valueChanged}
        ></ha-form>
      </div>

      <!-- Hover Effects Section -->
      ${this._renderHoverEffectsSection()}
    `}_renderHoverEffectsSection(){var e,t;const i=this.module.design||{},n=i.hover_effect||{effect:"none"},s=e=>{const t=Object.assign(Object.assign({},n),e);let o;Object.keys(t).forEach((e=>{const i=t[e];""!==i&&null!=i||delete t[e]})),"none"===t.effect?(o=Object.assign({},i),delete o.hover_effect):o=Object.assign(Object.assign({},i),{hover_effect:t}),this.dispatchEvent(new CustomEvent("module-changed",{detail:{updates:{design:o}},bubbles:!0,composed:!0}))},l=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en",d=[{value:"none",label:(0,a.kg)("editor.hover_effects.effects.none",l,"None")},{value:"highlight",label:(0,a.kg)("editor.hover_effects.effects.highlight",l,"Highlight")},{value:"outline",label:(0,a.kg)("editor.hover_effects.effects.outline",l,"Outline")},{value:"grow",label:(0,a.kg)("editor.hover_effects.effects.grow",l,"Grow")},{value:"shrink",label:(0,a.kg)("editor.hover_effects.effects.shrink",l,"Shrink")},{value:"pulse",label:(0,a.kg)("editor.hover_effects.effects.pulse",l,"Pulse")},{value:"bounce",label:(0,a.kg)("editor.hover_effects.effects.bounce",l,"Bounce")},{value:"float",label:(0,a.kg)("editor.hover_effects.effects.float",l,"Float")},{value:"glow",label:(0,a.kg)("editor.hover_effects.effects.glow",l,"Glow")},{value:"shadow",label:(0,a.kg)("editor.hover_effects.effects.shadow",l,"Shadow")},{value:"rotate",label:(0,a.kg)("editor.hover_effects.effects.rotate",l,"Rotate")},{value:"skew",label:(0,a.kg)("editor.hover_effects.effects.skew",l,"Skew")},{value:"wobble",label:(0,a.kg)("editor.hover_effects.effects.wobble",l,"Wobble")},{value:"buzz",label:(0,a.kg)("editor.hover_effects.effects.buzz",l,"Buzz")},{value:"fade",label:(0,a.kg)("editor.hover_effects.effects.fade",l,"Fade")}];return o.qy`
      <div class="actions-section" style="margin-top: 20px;">
        <div class="section-header">
          <h4>
            <ha-icon icon="mdi:cursor-default-gesture"></ha-icon>
            ${(0,a.kg)("editor.hover_effects.title",l,"Hover Effects")}
          </h4>
          <p>
            ${(0,a.kg)("editor.hover_effects.description",l,"Configure visual effects that appear when hovering over this module, row, or column.")}
          </p>
        </div>

        <!-- Effect Type Selection -->
        <div class="action-form">
          <div class="field-title" style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">
            ${(0,a.kg)("editor.hover_effects.effect",l,"Hover Effect")}
          </div>
          <div
            class="field-description"
            style="font-size: 13px; color: var(--secondary-text-color); margin-bottom: 12px; opacity: 0.8; line-height: 1.4;"
          >
            ${(0,a.kg)("editor.hover_effects.effect_desc",l,"Select the visual effect to apply when hovering")}
          </div>
          ${r.U.renderForm(this.hass,{effect:n.effect||"none"},[r.U.select("effect",d)],(e=>{const t=e.detail.value.effect;t!==(n.effect||"none")&&(s({effect:t}),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}),!1)}
        </div>

        ${n.effect&&"none"!==n.effect?o.qy`
              <!-- Timing and Duration Settings -->
              <div
                class="conditional-fields-group"
                style="margin-top: 16px; border-left: 4px solid var(--primary-color); background: rgba(var(--rgb-primary-color), 0.08); border-radius: 0 8px 8px 0; overflow: hidden;"
              >
                <div
                  class="conditional-fields-header"
                  style="background: rgba(var(--rgb-primary-color), 0.15); padding: 12px 16px; font-size: 14px; font-weight: 600; color: var(--primary-color); border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2); text-transform: uppercase; letter-spacing: 0.5px;"
                >
                  ${(0,a.kg)("editor.hover_effects.animation_settings",l,"Animation Settings")}
                </div>
                <div class="conditional-fields-content" style="padding: 16px;">
                  <!-- Duration Field -->
                  <div style="margin-bottom: 16px;">
                    <div
                      class="field-title"
                      style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                    >
                      ${(0,a.kg)("editor.hover_effects.duration",l,"Duration (ms)")}
                    </div>
                    ${r.U.renderForm(this.hass,{duration:n.duration||300},[r.U.number("duration",100,2e3,50)],(e=>{const t=e.detail.value.duration;t!==(n.duration||300)&&(s({duration:t}),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}),!1)}
                  </div>

                  <!-- Timing Function Field -->
                  <div style="margin-bottom: 16px;">
                    <div
                      class="field-title"
                      style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                    >
                      ${(0,a.kg)("editor.hover_effects.timing",l,"Timing Function")}
                    </div>
                    ${r.U.renderForm(this.hass,{timing:n.timing||"ease"},[r.U.select("timing",[{value:"ease",label:"Ease"},{value:"ease-in",label:"Ease In"},{value:"ease-out",label:"Ease Out"},{value:"ease-in-out",label:"Ease In Out"},{value:"linear",label:"Linear"}])],(e=>{const t=e.detail.value.timing;t!==(n.timing||"ease")&&(s({timing:t}),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}),!1)}
                  </div>

                  <!-- Intensity Field -->
                  <div style="margin-bottom: 16px;">
                    <div
                      class="field-title"
                      style="font-size: 16px; font-weight: 600; margin-bottom: 4px;"
                    >
                      ${(0,a.kg)("editor.hover_effects.intensity",l,"Intensity")}
                    </div>
                    ${r.U.renderForm(this.hass,{intensity:n.intensity||"normal"},[r.U.select("intensity",[{value:"subtle",label:"Subtle"},{value:"normal",label:"Normal"},{value:"strong",label:"Strong"}])],(e=>{const t=e.detail.value.intensity;t!==(n.intensity||"normal")&&(s({intensity:t}),setTimeout((()=>{this._triggerPreviewUpdate()}),50))}),!1)}
                  </div>
                </div>
              </div>
            `:""}
      </div>
    `}static get styles(){return o.AH`
      :host {
        display: block;
        padding: 0;
      }

      .actions-section {
        background: var(--secondary-background-color);
        border: 2px solid var(--primary-color);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .section-header {
        margin-bottom: 16px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);
      }

      .section-header h4 {
        margin: 0;
        color: var(--primary-text-color);
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .section-header p {
        margin: 6px 0 0 0;
        color: var(--secondary-text-color);
        font-size: 13px;
        line-height: 1.4;
      }

      /* Allow native HA form styling to show through */
      ha-form {
        display: block;
        margin: 0;
        padding: 0;
      }

      .action-form {
        margin-bottom: 20px;
      }

      .field-title {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 4px;
        color: var(--primary-text-color);
      }

      .field-description {
        font-size: 13px;
        color: var(--secondary-text-color);
        margin-bottom: 12px;
        opacity: 0.8;
        line-height: 1.4;
      }

      .conditional-fields-group {
        margin-top: 16px;
        border-left: 4px solid var(--primary-color);
        background: rgba(var(--rgb-primary-color), 0.08);
        border-radius: 0 8px 8px 0;
        overflow: hidden;
      }

      .conditional-fields-header {
        background: rgba(var(--rgb-primary-color), 0.15);
        padding: 12px 16px;
        font-size: 14px;
        font-weight: 600;
        color: var(--primary-color);
        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .conditional-fields-content {
        padding: 16px;
      }

      .field-container {
        margin-bottom: 16px;
      }
    `}static render(e,t,i,n){return o.qy`
      <ultra-global-actions-tab
        .hass=${t}
        .module=${e}
        .tabTitle=${n}
        @module-changed=${e=>i(e.detail.updates)}
      ></ultra-global-actions-tab>
    `}static getClickableClass(e){return(null==e?void 0:e.tap_action)&&"none"!==e.tap_action.action||(null==e?void 0:e.hold_action)&&"none"!==e.hold_action.action||(null==e?void 0:e.double_tap_action)&&"none"!==e.double_tap_action.action?"graphs-module-clickable":""}static getClickableStyle(e){return""}static resolveAction(e,t){return e&&"default"===e.action?t?{action:"more-info",entity:t}:{action:"none"}:e}static getHoverStyles(){return""}};s([(0,n.MZ)({attribute:!1})],l.prototype,"hass",void 0),s([(0,n.MZ)({attribute:!1})],l.prototype,"module",void 0),s([(0,n.MZ)({attribute:!1})],l.prototype,"tabTitle",void 0),s([(0,n.wk)()],l.prototype,"_config",void 0),l=s([(0,n.EM)("ultra-global-actions-tab")],l)},9811:(e,t,i)=>{i.r(t),i.d(t,{DEFAULT_DOMAIN_ICON:()=>Y,DEFAULT_PANEL:()=>W,DEFAULT_VIEW_ENTITY_ID:()=>se,DOMAINS_HIDE_MORE_INFO:()=>te,DOMAINS_MORE_INFO_NO_HISTORY:()=>ie,DOMAINS_TOGGLE:()=>ne,DOMAINS_WITH_CARD:()=>X,DOMAINS_WITH_MORE_INFO:()=>ee,NumberFormat:()=>o,STATES_OFF:()=>oe,TimeFormat:()=>n,UNIT_C:()=>ae,UNIT_F:()=>re,applyThemesOnElement:()=>R,computeCardSize:()=>U,computeDomain:()=>H,computeEntity:()=>J,computeRTL:()=>Q,computeRTLDirection:()=>N,computeStateDisplay:()=>Z,computeStateDomain:()=>L,createThing:()=>pe,debounce:()=>ue,domainIcon:()=>ge,evaluateFilter:()=>me,fireEvent:()=>le,fixedIcons:()=>he,formatDate:()=>c,formatDateMonth:()=>v,formatDateMonthYear:()=>f,formatDateNumeric:()=>u,formatDateShort:()=>g,formatDateTime:()=>w,formatDateTimeNumeric:()=>C,formatDateTimeWithSeconds:()=>O,formatDateWeekday:()=>l,formatDateYear:()=>y,formatNumber:()=>K,formatTime:()=>T,formatTimeWeekday:()=>I,formatTimeWithSeconds:()=>P,forwardHaptic:()=>fe,getLovelace:()=>Ce,handleAction:()=>xe,handleActionConfig:()=>ye,handleClick:()=>ke,hasAction:()=>we,hasConfigOrEntityChanged:()=>Se,hasDoubleClick:()=>Oe,isNumericState:()=>F,navigate:()=>_e,numberFormatToLocale:()=>q,relativeTime:()=>M,round:()=>V,stateIcon:()=>ze,timerTimeRemaining:()=>D,toggleEntity:()=>be,turnOnOffEntities:()=>Ae,turnOnOffEntity:()=>ve});var o,n,a,r=function(){return r=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},r.apply(this,arguments)},s={second:45,minute:45,hour:22,day:5},l=function(e,t){return d(t).format(e)},d=function(e){return new Intl.DateTimeFormat(e.language,{weekday:"long",month:"long",day:"numeric"})},c=function(e,t){return p(t).format(e)},p=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric"})},u=function(e,t){return h(t).format(e)},h=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"numeric",day:"numeric"})},g=function(e,t){return m(t).format(e)},m=function(e){return new Intl.DateTimeFormat(e.language,{day:"numeric",month:"short"})},f=function(e,t){return _(t).format(e)},_=function(e){return new Intl.DateTimeFormat(e.language,{month:"long",year:"numeric"})},v=function(e,t){return b(t).format(e)},b=function(e){return new Intl.DateTimeFormat(e.language,{month:"long"})},y=function(e,t){return x(t).format(e)},x=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric"})};(a=o||(o={})).language="language",a.system="system",a.comma_decimal="comma_decimal",a.decimal_comma="decimal_comma",a.space_comma="space_comma",a.none="none",function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}(n||(n={}));var k=function(e){if(e.time_format===n.language||e.time_format===n.system){var t=e.time_format===n.language?e.language:void 0,i=(new Date).toLocaleString(t);return i.includes("AM")||i.includes("PM")}return e.time_format===n.am_pm},w=function(e,t){return S(t).format(e)},S=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:k(e)?"numeric":"2-digit",minute:"2-digit",hour12:k(e)})},O=function(e,t){return A(t).format(e)},A=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"long",day:"numeric",hour:k(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:k(e)})},C=function(e,t){return $(t).format(e)},$=function(e){return new Intl.DateTimeFormat(e.language,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",hour12:k(e)})},T=function(e,t){return z(t).format(e)},z=function(e){return new Intl.DateTimeFormat(e.language,{hour:"numeric",minute:"2-digit",hour12:k(e)})},P=function(e,t){return E(t).format(e)},E=function(e){return new Intl.DateTimeFormat(e.language,{hour:k(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:k(e)})},I=function(e,t){return j(t).format(e)},j=function(e){return new Intl.DateTimeFormat(e.language,{hour:k(e)?"numeric":"2-digit",minute:"2-digit",second:"2-digit",hour12:k(e)})},M=function(e,t,i,o){void 0===o&&(o=!0);var n=function(e,t,i){void 0===t&&(t=Date.now()),void 0===i&&(i={});var o=r(r({},s),i||{}),n=(+e-+t)/1e3;if(Math.abs(n)<o.second)return{value:Math.round(n),unit:"second"};var a=n/60;if(Math.abs(a)<o.minute)return{value:Math.round(a),unit:"minute"};var l=n/3600;if(Math.abs(l)<o.hour)return{value:Math.round(l),unit:"hour"};var d=n/86400;if(Math.abs(d)<o.day)return{value:Math.round(d),unit:"day"};var c=new Date(e),p=new Date(t),u=c.getFullYear()-p.getFullYear();if(Math.round(Math.abs(u))>0)return{value:Math.round(u),unit:"year"};var h=12*u+c.getMonth()-p.getMonth();if(Math.round(Math.abs(h))>0)return{value:Math.round(h),unit:"month"};var g=n/604800;return{value:Math.round(g),unit:"week"}}(e,i);return o?function(e){return new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})}(t).format(n.value,n.unit):Intl.NumberFormat(t.language,{style:"unit",unit:n.unit,unitDisplay:"long"}).format(Math.abs(n.value))};function D(e){var t,i=3600*(t=e.attributes.remaining.split(":").map(Number))[0]+60*t[1]+t[2];if("active"===e.state){var o=(new Date).getTime(),n=new Date(e.last_changed).getTime();i=Math.max(i-(o-n)/1e3,0)}return i}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e}).apply(this,arguments)}var R=function(e,t,i,o){void 0===o&&(o=!1),e._themes||(e._themes={});var n=t.default_theme;("default"===i||i&&t.themes[i])&&(n=i);var a=B({},e._themes);if("default"!==n){var r=t.themes[n];Object.keys(r).forEach((function(t){var i="--"+t;e._themes[i]="",a[i]=r[t]}))}if(e.updateStyles?e.updateStyles(a):window.ShadyCSS&&window.ShadyCSS.styleSubtree(e,a),o){var s=document.querySelector("meta[name=theme-color]");if(s){s.hasAttribute("default-content")||s.setAttribute("default-content",s.getAttribute("content"));var l=a["--primary-color"]||s.getAttribute("default-content");s.setAttribute("content",l)}}},U=function(e){return"function"==typeof e.getCardSize?e.getCardSize():4};function H(e){return e.substr(0,e.indexOf("."))}function J(e){return e.substr(e.indexOf(".")+1)}function Q(e){var t,i=(null==e||null==(t=e.locale)?void 0:t.language)||"en";return e.translationMetadata.translations[i]&&e.translationMetadata.translations[i].isRTL||!1}function N(e){return Q(e)?"rtl":"ltr"}function L(e){return H(e.entity_id)}var F=function(e){return!!e.attributes.unit_of_measurement||!!e.attributes.state_class},q=function(e){switch(e.number_format){case o.comma_decimal:return["en-US","en"];case o.decimal_comma:return["de","es","it"];case o.space_comma:return["fr","sv","cs"];case o.system:return;default:return e.language}},V=function(e,t){return void 0===t&&(t=2),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},K=function(e,t,i){var n=t?q(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==o.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(n,G(e,i)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,G(e,i)).format(Number(e))}return"string"==typeof e?e:V(e,null==i?void 0:i.maximumFractionDigits).toString()+("currency"===(null==i?void 0:i.style)?" "+i.currency:"")},G=function(e,t){var i=B({maximumFractionDigits:2},t);if("string"!=typeof e)return i;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var o=e.indexOf(".")>-1?e.split(".")[1].length:0;i.minimumFractionDigits=o,i.maximumFractionDigits=o}return i},Z=function(e,t,i,o){var n=void 0!==o?o:t.state;if("unknown"===n||"unavailable"===n)return e("state.default."+n);if(F(t)){if("monetary"===t.attributes.device_class)try{return K(n,i,{style:"currency",currency:t.attributes.unit_of_measurement})}catch(e){}return K(n,i)+(t.attributes.unit_of_measurement?" "+t.attributes.unit_of_measurement:"")}var a=L(t);if("input_datetime"===a){var r;if(void 0===o)return t.attributes.has_date&&t.attributes.has_time?(r=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),w(r,i)):t.attributes.has_date?(r=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),c(r,i)):t.attributes.has_time?((r=new Date).setHours(t.attributes.hour,t.attributes.minute),T(r,i)):t.state;try{var s=o.split(" ");if(2===s.length)return w(new Date(s.join("T")),i);if(1===s.length){if(o.includes("-"))return c(new Date(o+"T00:00"),i);if(o.includes(":")){var l=new Date;return T(new Date(l.toISOString().split("T")[0]+"T"+o),i)}}return o}catch(e){return o}}return"humidifier"===a&&"on"===n&&t.attributes.humidity?t.attributes.humidity+" %":"counter"===a||"number"===a||"input_number"===a?K(n,i):t.attributes.device_class&&e("component."+a+".state."+t.attributes.device_class+"."+n)||e("component."+a+".state._."+n)||n},Y="mdi:bookmark",W="lovelace",X=["climate","cover","configurator","input_select","input_number","input_text","lock","media_player","scene","script","timer","vacuum","water_heater","weblink"],ee=["alarm_control_panel","automation","camera","climate","configurator","cover","fan","group","history_graph","input_datetime","light","lock","media_player","script","sun","updater","vacuum","water_heater","weather"],te=["input_number","input_select","input_text","scene","weblink"],ie=["camera","configurator","history_graph","scene"],oe=["closed","locked","off"],ne=new Set(["fan","input_boolean","light","switch","group","automation"]),ae="°C",re="°F",se="group.default_view",le=function(e,t,i,o){o=o||{},i=null==i?{}:i;var n=new Event(t,{bubbles:void 0===o.bubbles||o.bubbles,cancelable:Boolean(o.cancelable),composed:void 0===o.composed||o.composed});return n.detail=i,e.dispatchEvent(n),n},de=new Set(["call-service","divider","section","weblink","cast","select"]),ce={alert:"toggle",automation:"toggle",climate:"climate",cover:"cover",fan:"toggle",group:"group",input_boolean:"toggle",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",remote:"toggle",scene:"scene",script:"script",sensor:"sensor",timer:"timer",switch:"toggle",vacuum:"toggle",water_heater:"climate",input_datetime:"input-datetime"},pe=function(e,t){void 0===t&&(t=!1);var i=function(e,t){return o("hui-error-card",{type:"error",error:e,config:t})},o=function(e,t){var o=window.document.createElement(e);try{if(!o.setConfig)return;o.setConfig(t)}catch(o){return console.error(e,o),i(o.message,t)}return o};if(!e||"object"!=typeof e||!t&&!e.type)return i("No type defined",e);var n=e.type;if(n&&n.startsWith("custom:"))n=n.substr(7);else if(t)if(de.has(n))n="hui-"+n+"-row";else{if(!e.entity)return i("Invalid config given.",e);var a=e.entity.split(".",1)[0];n="hui-"+(ce[a]||"text")+"-entity-row"}else n="hui-"+n+"-card";if(customElements.get(n))return o(n,e);var r=i("Custom element doesn't exist: "+e.type+".",e);r.style.display="None";var s=setTimeout((function(){r.style.display=""}),2e3);return customElements.whenDefined(e.type).then((function(){clearTimeout(s),le(r,"ll-rebuild",{},r)})),r},ue=function(e,t,i){var o;return void 0===i&&(i=!1),function(){var n=[].slice.call(arguments),a=this,r=i&&!o;clearTimeout(o),o=setTimeout((function(){o=null,i||e.apply(a,n)}),t),r&&e.apply(a,n)}},he={alert:"mdi:alert",automation:"mdi:playlist-play",calendar:"mdi:calendar",camera:"mdi:video",climate:"mdi:thermostat",configurator:"mdi:settings",conversation:"mdi:text-to-speech",device_tracker:"mdi:account",fan:"mdi:fan",group:"mdi:google-circles-communities",history_graph:"mdi:chart-line",homeassistant:"mdi:home-assistant",homekit:"mdi:home-automation",image_processing:"mdi:image-filter-frames",input_boolean:"mdi:drawing",input_datetime:"mdi:calendar-clock",input_number:"mdi:ray-vertex",input_select:"mdi:format-list-bulleted",input_text:"mdi:textbox",light:"mdi:lightbulb",mailbox:"mdi:mailbox",notify:"mdi:comment-alert",person:"mdi:account",plant:"mdi:flower",proximity:"mdi:apple-safari",remote:"mdi:remote",scene:"mdi:google-pages",script:"mdi:file-document",sensor:"mdi:eye",simple_alarm:"mdi:bell",sun:"mdi:white-balance-sunny",switch:"mdi:flash",timer:"mdi:timer",updater:"mdi:cloud-upload",vacuum:"mdi:robot-vacuum",water_heater:"mdi:thermometer",weblink:"mdi:open-in-new"};function ge(e,t){if(e in he)return he[e];switch(e){case"alarm_control_panel":switch(t){case"armed_home":return"mdi:bell-plus";case"armed_night":return"mdi:bell-sleep";case"disarmed":return"mdi:bell-outline";case"triggered":return"mdi:bell-ring";default:return"mdi:bell"}case"binary_sensor":return t&&"off"===t?"mdi:radiobox-blank":"mdi:checkbox-marked-circle";case"cover":return"closed"===t?"mdi:window-closed":"mdi:window-open";case"lock":return t&&"unlocked"===t?"mdi:lock-open":"mdi:lock";case"media_player":return t&&"off"!==t&&"idle"!==t?"mdi:cast-connected":"mdi:cast";case"zwave":switch(t){case"dead":return"mdi:emoticon-dead";case"sleeping":return"mdi:sleep";case"initializing":return"mdi:timer-sand";default:return"mdi:z-wave"}default:return console.warn("Unable to find icon for domain "+e+" ("+t+")"),"mdi:bookmark"}}var me=function(e,t){var i=t.value||t,o=t.attribute?e.attributes[t.attribute]:e.state;switch(t.operator||"=="){case"==":return o===i;case"<=":return o<=i;case"<":return o<i;case">=":return o>=i;case">":return o>i;case"!=":return o!==i;case"regex":return o.match(i);default:return!1}},fe=function(e){le(window,"haptic",e)},_e=function(e,t,i){void 0===i&&(i=!1),i?history.replaceState(null,"",t):history.pushState(null,"",t),le(window,"location-changed",{replace:i})},ve=function(e,t,i){void 0===i&&(i=!0);var o,n=H(t),a="group"===n?"homeassistant":n;switch(n){case"lock":o=i?"unlock":"lock";break;case"cover":o=i?"open_cover":"close_cover";break;default:o=i?"turn_on":"turn_off"}return e.callService(a,o,{entity_id:t})},be=function(e,t){var i=oe.includes(e.states[t].state);return ve(e,t,i)},ye=function(e,t,i,o){if(o||(o={action:"more-info"}),!o.confirmation||o.confirmation.exemptions&&o.confirmation.exemptions.some((function(e){return e.user===t.user.id}))||(fe("warning"),confirm(o.confirmation.text||"Are you sure you want to "+o.action+"?")))switch(o.action){case"more-info":(i.entity||i.camera_image)&&le(e,"hass-more-info",{entityId:i.entity?i.entity:i.camera_image});break;case"navigate":o.navigation_path&&_e(0,o.navigation_path);break;case"url":o.url_path&&window.open(o.url_path);break;case"toggle":i.entity&&(be(t,i.entity),fe("success"));break;case"call-service":if(!o.service)return void fe("failure");var n=o.service.split(".",2);t.callService(n[0],n[1],o.service_data,o.target),fe("success");break;case"fire-dom-event":le(e,"ll-custom",o)}},xe=function(e,t,i,o){var n;"double_tap"===o&&i.double_tap_action?n=i.double_tap_action:"hold"===o&&i.hold_action?n=i.hold_action:"tap"===o&&i.tap_action&&(n=i.tap_action),ye(e,t,i,n)},ke=function(e,t,i,o,n){var a;if(n&&i.double_tap_action?a=i.double_tap_action:o&&i.hold_action?a=i.hold_action:!o&&i.tap_action&&(a=i.tap_action),a||(a={action:"more-info"}),!a.confirmation||a.confirmation.exemptions&&a.confirmation.exemptions.some((function(e){return e.user===t.user.id}))||confirm(a.confirmation.text||"Are you sure you want to "+a.action+"?"))switch(a.action){case"more-info":(a.entity||i.entity||i.camera_image)&&(le(e,"hass-more-info",{entityId:a.entity?a.entity:i.entity?i.entity:i.camera_image}),a.haptic&&fe(a.haptic));break;case"navigate":a.navigation_path&&(_e(0,a.navigation_path),a.haptic&&fe(a.haptic));break;case"url":a.url_path&&window.open(a.url_path),a.haptic&&fe(a.haptic);break;case"toggle":i.entity&&(be(t,i.entity),a.haptic&&fe(a.haptic));break;case"call-service":if(!a.service)return;var r=a.service.split(".",2),s=r[0],l=r[1],d=B({},a.service_data);"entity"===d.entity_id&&(d.entity_id=i.entity),t.callService(s,l,d,a.target),a.haptic&&fe(a.haptic);break;case"fire-dom-event":le(e,"ll-custom",a),a.haptic&&fe(a.haptic)}};function we(e){return void 0!==e&&"none"!==e.action}function Se(e,t,i){if(t.has("config")||i)return!0;if(e.config.entity){var o=t.get("hass");return!o||o.states[e.config.entity]!==e.hass.states[e.config.entity]}return!1}function Oe(e){return void 0!==e&&"none"!==e.action}var Ae=function(e,t,i){void 0===i&&(i=!0);var o={};t.forEach((function(t){if(oe.includes(e.states[t].state)===i){var n=H(t),a=["cover","lock"].includes(n)?n:"homeassistant";a in o||(o[a]=[]),o[a].push(t)}})),Object.keys(o).forEach((function(t){var n;switch(t){case"lock":n=i?"unlock":"lock";break;case"cover":n=i?"open_cover":"close_cover";break;default:n=i?"turn_on":"turn_off"}e.callService(t,n,{entity_id:o[t]})}))},Ce=function(){var e=document.querySelector("home-assistant");if(e=(e=(e=(e=(e=(e=(e=(e=e&&e.shadowRoot)&&e.querySelector("home-assistant-main"))&&e.shadowRoot)&&e.querySelector("app-drawer-layout partial-panel-resolver"))&&e.shadowRoot||e)&&e.querySelector("ha-panel-lovelace"))&&e.shadowRoot)&&e.querySelector("hui-root")){var t=e.lovelace;return t.current_view=e.___curView,t}return null},$e={humidity:"mdi:water-percent",illuminance:"mdi:brightness-5",temperature:"mdi:thermometer",pressure:"mdi:gauge",power:"mdi:flash",signal_strength:"mdi:wifi"},Te={binary_sensor:function(e,t){var i="off"===e;switch(null==t?void 0:t.attributes.device_class){case"battery":return i?"mdi:battery":"mdi:battery-outline";case"battery_charging":return i?"mdi:battery":"mdi:battery-charging";case"cold":return i?"mdi:thermometer":"mdi:snowflake";case"connectivity":return i?"mdi:server-network-off":"mdi:server-network";case"door":return i?"mdi:door-closed":"mdi:door-open";case"garage_door":return i?"mdi:garage":"mdi:garage-open";case"power":case"plug":return i?"mdi:power-plug-off":"mdi:power-plug";case"gas":case"problem":case"safety":case"tamper":return i?"mdi:check-circle":"mdi:alert-circle";case"smoke":return i?"mdi:check-circle":"mdi:smoke";case"heat":return i?"mdi:thermometer":"mdi:fire";case"light":return i?"mdi:brightness-5":"mdi:brightness-7";case"lock":return i?"mdi:lock":"mdi:lock-open";case"moisture":return i?"mdi:water-off":"mdi:water";case"motion":return i?"mdi:walk":"mdi:run";case"occupancy":case"presence":return i?"mdi:home-outline":"mdi:home";case"opening":return i?"mdi:square":"mdi:square-outline";case"running":return i?"mdi:stop":"mdi:play";case"sound":return i?"mdi:music-note-off":"mdi:music-note";case"update":return i?"mdi:package":"mdi:package-up";case"vibration":return i?"mdi:crop-portrait":"mdi:vibrate";case"window":return i?"mdi:window-closed":"mdi:window-open";default:return i?"mdi:radiobox-blank":"mdi:checkbox-marked-circle"}},cover:function(e){var t="closed"!==e.state;switch(e.attributes.device_class){case"garage":return t?"mdi:garage-open":"mdi:garage";case"door":return t?"mdi:door-open":"mdi:door-closed";case"shutter":return t?"mdi:window-shutter-open":"mdi:window-shutter";case"blind":return t?"mdi:blinds-open":"mdi:blinds";case"window":return t?"mdi:window-open":"mdi:window-closed";default:return ge("cover",e.state)}},sensor:function(e){var t=e.attributes.device_class;if(t&&t in $e)return $e[t];if("battery"===t){var i=Number(e.state);if(isNaN(i))return"mdi:battery-unknown";var o=10*Math.round(i/10);return o>=100?"mdi:battery":o<=0?"mdi:battery-alert":"hass:battery-"+o}var n=e.attributes.unit_of_measurement;return"°C"===n||"°F"===n?"mdi:thermometer":ge("sensor")},input_datetime:function(e){return e.attributes.has_date?e.attributes.has_time?ge("input_datetime"):"mdi:calendar":"mdi:clock"}},ze=function(e){if(!e)return"mdi:bookmark";if(e.attributes.icon)return e.attributes.icon;var t=H(e.entity_id);return t in Te?Te[t](e):ge(t,e.state)}},9956:(e,t,i)=>{var o=i(5183),n=i(4276),a=i(2314),r=i(9643),s=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let l=class extends o.WF{constructor(){super(...arguments),this.open=!1,this._importText="",this._isProcessing=!1,this._error="",this._previewData=null}render(){return this.open?o.qy`
      <div class="dialog-overlay" @click=${this._handleOverlayClick}>
        <div class="dialog-content" @click=${e=>e.stopPropagation()}>
          <div class="dialog-header">
            <h3>Import Ultra Card Configuration</h3>
            <button class="close-btn" @click=${this._close}>
              <ha-icon icon="mdi:close"></ha-icon>
            </button>
          </div>

          <div class="dialog-body">
            <div class="import-methods">
              <h4>Import Methods</h4>
              <div class="method-buttons">
                <button class="method-btn" @click=${this._importFromClipboard}>
                  <ha-icon icon="mdi:clipboard-text"></ha-icon>
                  <span>From Clipboard</span>
                </button>
                <button class="method-btn" @click=${this._triggerFileInput}>
                  <ha-icon icon="mdi:file-upload"></ha-icon>
                  <span>From File</span>
                </button>
              </div>
            </div>

            <div class="manual-input">
              <label>Or paste shortcode manually:</label>
              <textarea
                .value=${this._importText}
                @input=${this._handleTextInput}
                placeholder="Paste your Ultra Card shortcode here: [ultra_card]...[/ultra_card]"
                rows="6"
              ></textarea>
            </div>

            ${this._error?o.qy`
                  <div class="error-message">
                    <ha-icon icon="mdi:alert-circle"></ha-icon>
                    <span>${this._error}</span>
                  </div>
                `:""}
            ${this._previewData?o.qy`
                  <div class="preview-section">
                    <h4>Preview</h4>
                    <div class="preview-card">
                      <div class="preview-header">
                        <ha-icon icon="${this._getTypeIcon(this._previewData.type)}"></ha-icon>
                        <div class="preview-info">
                          <strong
                            >${this._previewData.metadata.name||"Imported Configuration"}</strong
                          >
                          <small>Type: ${this._formatType(this._previewData.type)}</small>
                          <small>Version: ${this._previewData.version}</small>
                        </div>
                      </div>
                      ${this._previewData.metadata.description?o.qy`
                            <p class="preview-description">
                              ${this._previewData.metadata.description}
                            </p>
                          `:""}
                    </div>
                  </div>
                `:""}
          </div>

          <div class="dialog-footer">
            <button class="cancel-btn" @click=${this._close}>Cancel</button>
            <button
              class="import-btn"
              @click=${this._confirmImport}
              ?disabled=${!this._previewData||this._isProcessing}
            >
              ${this._isProcessing?"Processing...":"Import"}
            </button>
          </div>

          <input
            type="file"
            accept=".ultracard,.json"
            @change=${this._handleFileSelect}
            style="display: none;"
            id="file-input"
          />
        </div>
      </div>
    `:o.qy``}_handleOverlayClick(e){e.target===e.currentTarget&&this._close()}_close(){this.open=!1,this._reset(),this.dispatchEvent(new CustomEvent("close"))}_reset(){this._importText="",this._error="",this._previewData=null,this._isProcessing=!1}_handleTextInput(e){this._importText=e.target.value,this._error="",this._previewData=null,this._importText.trim()&&this._processImportText()}_processImportText(){try{const e=r.D.importFromShortcode(this._importText);e?(this._previewData=e,this._error=""):this._error="Invalid shortcode format. Please check your input."}catch(e){this._error=`Import error: ${e instanceof Error?e.message:"Unknown error"}`,this._previewData=null}}async _importFromClipboard(){this._isProcessing=!0,this._error="";try{const e=await r.D.importFromClipboard();e?(this._previewData=e,this._importText=""):this._error="No valid Ultra Card shortcode found in clipboard."}catch(e){this._error=`Clipboard error: ${e instanceof Error?e.message:"Failed to read clipboard"}`}finally{this._isProcessing=!1}}_triggerFileInput(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("file-input");null==t||t.click()}async _handleFileSelect(e){var t;const i=e.target,o=null===(t=i.files)||void 0===t?void 0:t[0];if(o){this._isProcessing=!0,this._error="";try{const e=await r.D.importFromFile(o);e?(this._previewData=e,this._importText=""):this._error="Invalid file format. Please select a valid Ultra Card export file."}catch(e){this._error=`File import error: ${e instanceof Error?e.message:"Failed to read file"}`}finally{this._isProcessing=!1,i.value=""}}}_confirmImport(){this._previewData&&(this.dispatchEvent(new CustomEvent("import",{detail:this._previewData})),this._close())}_getTypeIcon(e){switch(e){case"ultra-card-row":return"mdi:table-row";case"ultra-card-layout":return"mdi:view-dashboard";case"ultra-card-module":return"mdi:puzzle";default:return"mdi:file-import"}}_formatType(e){switch(e){case"ultra-card-row":return"Row";case"ultra-card-layout":return"Layout";case"ultra-card-module":return"Module";default:return"Unknown"}}};l.styles=o.AH`
    :host {
      display: contents;
    }

    .dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: ${a.Mu.DIALOG_OVERLAY};
      padding: 20px;
    }

    .dialog-content {
      background: var(--card-background-color);
      border-radius: 12px;
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow: auto;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .dialog-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 1px solid var(--divider-color);
    }

    .dialog-header h3 {
      margin: 0;
      color: var(--primary-text-color);
      font-size: 18px;
      font-weight: 600;
    }

    .close-btn {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      border: none;
      border-radius: 6px;
      color: var(--secondary-text-color);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .close-btn:hover {
      background: var(--secondary-background-color);
      color: var(--primary-text-color);
    }

    .dialog-body {
      padding: 24px;
    }

    .import-methods {
      margin-bottom: 24px;
    }

    .import-methods h4 {
      margin: 0 0 12px 0;
      color: var(--primary-text-color);
      font-size: 14px;
      font-weight: 600;
    }

    .method-buttons {
      display: flex;
      gap: 12px;
    }

    .method-btn {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      padding: 16px 12px;
      background: var(--secondary-background-color);
      border: 1px solid var(--divider-color);
      border-radius: 8px;
      color: var(--secondary-text-color);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .method-btn:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    .method-btn ha-icon {
      --mdc-icon-size: 24px;
    }

    .method-btn span {
      font-size: 12px;
      font-weight: 500;
    }

    .manual-input {
      margin-bottom: 20px;
    }

    .manual-input label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--primary-text-color);
      font-size: 14px;
    }

    textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid var(--divider-color);
      border-radius: 6px;
      background: var(--secondary-background-color);
      color: var(--primary-text-color);
      font-size: 13px;
      font-family: 'Courier New', monospace;
      resize: vertical;
      box-sizing: border-box;
      transition: border-color 0.2s ease;
    }

    textarea:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .error-message {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px;
      background: var(--error-color-10);
      border: 1px solid var(--error-color);
      border-radius: 6px;
      color: var(--error-color);
      font-size: 14px;
      margin-bottom: 20px;
    }

    .error-message ha-icon {
      --mdc-icon-size: 18px;
      flex-shrink: 0;
    }

    .preview-section {
      margin-bottom: 20px;
    }

    .preview-section h4 {
      margin: 0 0 12px 0;
      color: var(--primary-text-color);
      font-size: 14px;
      font-weight: 600;
    }

    .preview-card {
      padding: 16px;
      background: var(--success-color-10);
      border: 1px solid var(--success-color);
      border-radius: 8px;
    }

    .preview-header {
      display: flex;
      align-items: flex-start;
      gap: 12px;
    }

    .preview-header ha-icon {
      --mdc-icon-size: 20px;
      color: var(--success-color);
      flex-shrink: 0;
      margin-top: 2px;
    }

    .preview-info {
      flex: 1;
    }

    .preview-info strong {
      display: block;
      color: var(--primary-text-color);
      font-size: 14px;
      margin-bottom: 4px;
    }

    .preview-info small {
      display: block;
      color: var(--secondary-text-color);
      font-size: 12px;
      margin-bottom: 2px;
    }

    .preview-description {
      margin: 8px 0 0 0;
      padding-top: 8px;
      border-top: 1px solid var(--success-color-20);
      color: var(--secondary-text-color);
      font-size: 13px;
      line-height: 1.4;
    }

    .dialog-footer {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 12px;
      padding: 20px 24px;
      border-top: 1px solid var(--divider-color);
    }

    .cancel-btn,
    .import-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .cancel-btn {
      background: var(--secondary-background-color);
      color: var(--secondary-text-color);
      border: 1px solid var(--divider-color);
    }

    .cancel-btn:hover {
      background: var(--divider-color);
      color: var(--primary-text-color);
    }

    .import-btn {
      background: var(--primary-color);
      color: white;
    }

    .import-btn:hover:not(:disabled) {
      background: var(--primary-color-dark);
    }

    .import-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    @media (max-width: 600px) {
      .dialog-content {
        margin: 0;
        border-radius: 0;
        height: 100vh;
        max-height: none;
      }

      .method-buttons {
        flex-direction: column;
      }

      .dialog-footer {
        flex-direction: column-reverse;
        gap: 8px;
      }

      .cancel-btn,
      .import-btn {
        width: 100%;
      }
    }
  `,s([(0,n.MZ)({type:Boolean})],l.prototype,"open",void 0),s([(0,n.wk)()],l.prototype,"_importText",void 0),s([(0,n.wk)()],l.prototype,"_isProcessing",void 0),s([(0,n.wk)()],l.prototype,"_error",void 0),s([(0,n.wk)()],l.prototype,"_previewData",void 0),l=s([(0,n.EM)("uc-import-dialog")],l)}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={id:e,loaded:!1,exports:{}};return i[e](a,a.exports,n),a.loaded=!0,a.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,n.t=function(i,o){if(1&o&&(i=this(i)),8&o)return i;if("object"==typeof i&&i){if(4&o&&i.__esModule)return i;if(16&o&&"function"==typeof i.then)return i}var a=Object.create(null);n.r(a);var r={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>r[e]=()=>i[e]));return r.default=()=>i,n.d(a,r),a},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a=n(5183),r=n(4276),s=n(4002),l=n(2381),d=n(1397),c=n(7593);class p{static getInstance(){return p.instance||(p.instance=new p),p.instance}validateAndCorrectConfig(e){const t=[],i=[];let o;try{o=JSON.parse(JSON.stringify(e))}catch(e){return{valid:!1,errors:["Invalid JSON structure"],warnings:[]}}return o.type||(o.type="custom:ultra-card",i.push("Added missing card type")),"custom:ultra-card"!==o.type&&t.push(`Invalid card type: ${o.type}`),o.layout||(o.layout={rows:[]},i.push("Added missing layout structure")),o.layout.rows||(o.layout.rows=[],i.push("Added missing rows array")),o.layout.rows=o.layout.rows.map(((e,o)=>{const n=this.validateAndCorrectRow(e,o);return t.push(...n.errors),i.push(...n.warnings),n.correctedRow})),o.layout.rows=o.layout.rows.filter((e=>null!==e)),{valid:0===t.length,errors:t,warnings:i,correctedConfig:o}}validateAndCorrectRow(e,t){const i=[],o=[];return e.id||(e.id=`row-${Date.now()}-${t}`,o.push(`Row ${t}: Added missing ID`)),e.columns&&Array.isArray(e.columns)||(e.columns=[{id:`col-${Date.now()}-0`,modules:[]}],o.push(`Row ${t}: Added missing columns array`)),e.columns=e.columns.map(((e,n)=>{const a=this.validateAndCorrectColumn(e,t,n);return i.push(...a.errors),o.push(...a.warnings),a.correctedColumn})).filter((e=>null!==e)),0===e.columns.length&&(e.columns=[{id:`col-${Date.now()}-fallback`,modules:[]}],o.push(`Row ${t}: Added fallback column`)),{correctedRow:e,errors:i,warnings:o}}validateAndCorrectColumn(e,t,i){const o=[],n=[];return e.id||(e.id=`col-${Date.now()}-${t}-${i}`,n.push(`Row ${t}, Column ${i}: Added missing ID`)),e.modules&&Array.isArray(e.modules)||(e.modules=[],n.push(`Row ${t}, Column ${i}: Added missing modules array`)),e.modules=e.modules.map(((e,a)=>{const r=this.validateAndCorrectModule(e,t,i,a);return r.valid?r.correctedModule?(n.push(...r.warnings||[]),r.correctedModule):e:(o.push(...r.errors),null)})).filter((e=>null!==e)),{correctedColumn:e,errors:o,warnings:n}}validateAndCorrectModule(e,t,i,o){const n=[],a=[],r=(0,c.oD)();if(e.id||(e.id=`${e.type||"unknown"}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a.push("Module: Added missing ID")),!e.type)return n.push(`Module ${e.id}: Missing type`),{valid:!1,errors:n,warnings:a};if(!r.isModuleRegistered(e.type))return n.push(`Module ${e.id}: Unknown module type "${e.type}"`),{valid:!1,errors:n,warnings:a};const s=r.getModule(e.type);if(s){const t=s.validate(e);if(!t.valid)return n.push(...t.errors.map((t=>`Module ${e.id}: ${t}`))),{valid:!1,errors:n,warnings:a};const i=s.createDefault(e.id);return{valid:!0,errors:[],warnings:a,correctedModule:this.mergeWithDefaults(e,i)}}return{valid:!1,errors:[`Module ${e.id}: No handler found for type "${e.type}"`],warnings:a}}mergeWithDefaults(e,t){const i=Object.assign({},t);return Object.keys(e).forEach((o=>{void 0!==e[o]&&null!==e[o]&&("object"!=typeof e[o]||Array.isArray(e[o])||"object"!=typeof t[o]?i[o]=e[o]:i[o]=Object.assign(Object.assign({},t[o]),e[o]))})),i}countTotalModules(e){return e.layout.rows.reduce(((e,t)=>e+t.columns.reduce(((e,t)=>e+t.modules.length),0)),0)}validateUniqueModuleIds(e){const t=new Set,i=[];for(const o of e.layout.rows)for(const e of o.columns)for(const o of e.modules)t.has(o.id)?i.push(o.id):t.add(o.id);return{valid:0===i.length,duplicates:i}}fixDuplicateModuleIds(e){const t=new Set,i=JSON.parse(JSON.stringify(e));for(const e of i.layout.rows)for(const i of e.columns)for(const e of i.modules){if(t.has(e.id)){let i=`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;for(;t.has(i);)i=`${e.type}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e.id=i}t.add(e.id)}return i}}const u=p.getInstance();var h=n(7987),g=n(7073),m=n(4367),f=n(8460),_=n(2314),v=n(4866),b=n(5728),y=n(1338);class x{constructor(){this._syncStatus={isEnabled:!1,lastSync:null,isSyncing:!1,pendingChanges:0,conflicts:[]},this._listeners=new Set,this._pendingChanges=new Map,this._loadSyncStatus(),this._loadPendingChanges(),this._setupAuthListener()}getSyncStatus(){return Object.assign({},this._syncStatus)}async setSyncEnabled(e){this._syncStatus.isEnabled=e,this._saveSyncStatus(),this._notifyListeners(),e&&f.x.isAuthenticated()&&await this.syncAll()}async syncAll(){if(!this._canSync())throw new Error("Cannot sync: not authenticated or sync disabled");this._syncStatus.isSyncing=!0,this._notifyListeners();try{const e=await this.syncReviews(),t={success:!0,synced:0,conflicts:0,errors:[],lastSync:(new Date).toISOString()},i={success:!0,synced:0,conflicts:0,errors:[],lastSync:(new Date).toISOString()};return this._syncStatus.lastSync=new Date,this._syncStatus.pendingChanges=0,this._clearPendingChanges(),{favorites:t,colors:i,reviews:e}}finally{this._syncStatus.isSyncing=!1,this._saveSyncStatus(),this._notifyListeners()}}async syncFavorites(){if(!this._canSync())throw new Error("Cannot sync favorites: not authenticated");const e={success:!1,synced:0,conflicts:0,errors:[],lastSync:(new Date).toISOString()};try{const t=this._getLocalFavorites(),i=await this._fetchRemoteFavorites(),{merged:o,conflicts:n}=await this._mergeFavorites(t,i),a=await this._uploadFavorites(o.filter((e=>e._needsUpload))),r=await this._downloadFavorites(o.filter((e=>e._needsDownload)));e.success=!0,e.synced=a.length+r.length,e.conflicts=n.length,this._syncStatus.conflicts=[...this._syncStatus.conflicts,...n],console.log(`✅ Favorites sync completed: ${e.synced} synced, ${e.conflicts} conflicts`)}catch(t){console.error("❌ Favorites sync failed:",t),e.errors.push(t instanceof Error?t.message:"Unknown error")}return e}async syncFavoriteColors(){if(!this._canSync())throw new Error("Cannot sync colors: not authenticated");const e={success:!1,synced:0,conflicts:0,errors:[],lastSync:(new Date).toISOString()};try{const t=this._getLocalColors(),i=await this._fetchRemoteColors(),{merged:o,conflicts:n}=await this._mergeColors(t,i),a=await this._uploadColors(o.filter((e=>e._needsUpload))),r=await this._downloadColors(o.filter((e=>e._needsDownload)));e.success=!0,e.synced=a.length+r.length,e.conflicts=n.length,console.log(`✅ Colors sync completed: ${e.synced} synced, ${e.conflicts} conflicts`)}catch(t){console.error("❌ Colors sync failed:",t),e.errors.push(t instanceof Error?t.message:"Unknown error")}return e}async syncReviews(){if(!this._canSync())throw new Error("Cannot sync reviews: not authenticated");const e={success:!1,synced:0,conflicts:0,errors:[],lastSync:(new Date).toISOString()};try{const t=this._getLocalReviews(),i=await this._fetchRemoteReviews(),{merged:o,conflicts:n}=await this._mergeReviews(t,i),a=await this._uploadReviews(o.filter((e=>e._needsUpload))),r=await this._downloadReviews(o.filter((e=>e._needsDownload)));e.success=!0,e.synced=a.length+r.length,e.conflicts=n.length}catch(t){console.error("❌ Reviews sync failed:",t),e.errors.push(t instanceof Error?t.message:"Unknown error")}return e}queueChange(e,t,i){const o=`${e}-${t}-${Date.now()}`;this._pendingChanges.set(o,{type:e,action:t,data:i,timestamp:Date.now()}),this._syncStatus.pendingChanges=this._pendingChanges.size,this._savePendingChanges(),this._notifyListeners(),this._canSync()&&navigator.onLine&&this._processPendingChanges().catch(console.error)}async resolveConflict(e,t){switch(this._syncStatus.conflicts=this._syncStatus.conflicts.filter((t=>t!==e)),t){case"local":await this._uploadConflictResolution(e,e.local);break;case"remote":await this._downloadConflictResolution(e,e.remote);break;case"merge":const t=await this._mergeConflictData(e);await this._uploadConflictResolution(e,t)}this._saveSyncStatus(),this._notifyListeners()}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}_canSync(){return this._syncStatus.isEnabled&&f.x.isAuthenticated()}_setupAuthListener(){f.x.addListener((e=>{e||(this._syncStatus.isEnabled=!1,this._syncStatus.conflicts=[],this._clearPendingChanges()),this._notifyListeners()}))}_notifyListeners(){this._listeners.forEach((e=>{try{e(this._syncStatus)}catch(e){console.error("Error in sync listener:",e)}}))}_getLocalFavorites(){try{const e=localStorage.getItem("ultra-card-favorites");return e?JSON.parse(e):[]}catch(e){return[]}}async _fetchRemoteFavorites(){const e=await f.x.authenticatedFetch(`${x.API_BASE}/favorites`);if(!e.ok)throw new Error(`Failed to fetch favorites: ${e.statusText}`);return e.json()}async _uploadFavorites(e){const t=[];for(const i of e)try{const e=await f.x.authenticatedFetch(`${x.API_BASE}/favorites`,{method:"POST",body:JSON.stringify({name:i.name,description:i.description,row_data:JSON.stringify(i.row),tags:i.tags})});e.ok&&t.push(await e.json())}catch(e){console.error("Failed to upload favorite:",e)}return t}async _downloadFavorites(e){const t=e.map((e=>({id:e.id,name:e.name,description:e.description,row:JSON.parse(e.row_data),created:e.created,tags:e.tags})));return localStorage.setItem("ultra-card-favorites",JSON.stringify(t)),t}async _mergeFavorites(e,t){const i=[],o=[],n=new Map(t.map((e=>[e.id,e]))),a=new Map(e.map((e=>[e.id,e])));for(const t of e){const e=n.get(t.id);if(e){const n=new Date(t.created||0).getTime(),a=new Date(e.updated).getTime();Math.abs(n-a)>1e3&&o.push({type:"favorite",local:t,remote:e,field:"updated"}),i.push(n>a?t:Object.assign(Object.assign({},this._convertCloudFavorite(e)),{_needsDownload:n<a}))}else i.push(Object.assign(Object.assign({},t),{_needsUpload:!0}))}for(const e of t)a.has(e.id)||i.push(Object.assign(Object.assign({},this._convertCloudFavorite(e)),{_needsDownload:!0}));return{merged:i,conflicts:o}}_convertCloudFavorite(e){return{id:e.id,name:e.name,description:e.description,row:JSON.parse(e.row_data),created:e.created,tags:e.tags}}_getLocalColors(){try{const e=localStorage.getItem("ultra-card-favorite-colors");return e?JSON.parse(e):[]}catch(e){return[]}}async _fetchRemoteColors(){const e=await f.x.authenticatedFetch(`${x.API_BASE}/colors`);if(!e.ok)throw new Error(`Failed to fetch colors: ${e.statusText}`);return e.json()}async _uploadColors(e){return[]}async _downloadColors(e){return[]}async _mergeColors(e,t){return{merged:[],conflicts:[]}}_getLocalReviews(){try{const e=localStorage.getItem("ultra-card-reviews");return e?JSON.parse(e):[]}catch(e){return[]}}async _fetchRemoteReviews(){const e=await f.x.authenticatedFetch(`${x.API_BASE}/reviews`);if(!e.ok)throw new Error(`Failed to fetch reviews: ${e.statusText}`);return e.json()}async _uploadReviews(e){return[]}async _downloadReviews(e){return[]}async _mergeReviews(e,t){return{merged:[],conflicts:[]}}async _uploadConflictResolution(e,t){}async _downloadConflictResolution(e,t){}async _mergeConflictData(e){return e.local}async _processPendingChanges(){if(0!==this._pendingChanges.size){for(const[e,t]of this._pendingChanges)try{await this._processChange(t),this._pendingChanges.delete(e)}catch(t){console.error(`Failed to process change ${e}:`,t)}this._syncStatus.pendingChanges=this._pendingChanges.size,this._savePendingChanges(),this._notifyListeners()}}async _processChange(e){switch(e.type){case"favorite":"create"===e.action&&await this._uploadFavorites([e.data]);break;case"color":"create"===e.action&&await this._uploadColors([e.data]);break;case"review":"create"===e.action&&await this._uploadReviews([e.data])}}_loadSyncStatus(){try{const e=localStorage.getItem(x.SYNC_STATUS_KEY);if(e){const t=JSON.parse(e);this._syncStatus=Object.assign(Object.assign(Object.assign({},this._syncStatus),t),{lastSync:t.lastSync?new Date(t.lastSync):null,isSyncing:!1})}}catch(e){console.error("Failed to load sync status:",e)}}_saveSyncStatus(){var e;try{localStorage.setItem(x.SYNC_STATUS_KEY,JSON.stringify(Object.assign(Object.assign({},this._syncStatus),{lastSync:null===(e=this._syncStatus.lastSync)||void 0===e?void 0:e.toISOString()})))}catch(e){console.error("Failed to save sync status:",e)}}_loadPendingChanges(){try{const e=localStorage.getItem(x.PENDING_CHANGES_KEY);if(e){const t=JSON.parse(e);this._pendingChanges=new Map(Object.entries(t)),this._syncStatus.pendingChanges=this._pendingChanges.size}}catch(e){console.error("Failed to load pending changes:",e)}}_savePendingChanges(){try{const e=Object.fromEntries(this._pendingChanges);localStorage.setItem(x.PENDING_CHANGES_KEY,JSON.stringify(e))}catch(e){console.error("Failed to save pending changes:",e)}}_clearPendingChanges(){this._pendingChanges.clear();try{localStorage.removeItem(x.PENDING_CHANGES_KEY)}catch(e){console.error("Failed to clear pending changes:",e)}}}x.API_BASE="https://ultracard.io/wp-json/ultra-card/v1",x.SYNC_STATUS_KEY="ultra-card-sync-status",x.PENDING_CHANGES_KEY="ultra-card-pending-changes";const k=new x;class w{constructor(){this._status={lastBackup:null,isSaving:!1,pendingBackup:!1,error:null},this._listeners=new Set,this._loadLastBackupTime(),this._loadPendingBackup()}getStatus(){return Object.assign({},this._status)}async autoSave(e){f.x.isAuthenticated()?(this._pendingConfig=e,this._status.pendingBackup=!0,this._savePendingBackup(e),this._notifyListeners(),this._autoSaveTimer&&clearTimeout(this._autoSaveTimer),this._autoSaveTimer=window.setTimeout((async()=>{this._pendingConfig&&(await this._executeSave(this._pendingConfig,"auto"),this._pendingConfig=void 0,this._clearPendingBackup())}),w.AUTO_SAVE_DEBOUNCE)):console.log("Auto-save skipped: not authenticated")}async createSnapshot(e,t,i){var o;if(!f.x.isAuthenticated())throw new Error("Authentication required to create snapshots");const n=f.x.getCurrentUser();if(!(null===(o=null==n?void 0:n.subscription)||void 0===o?void 0:o.features.snapshots_enabled))throw new Error("Pro subscription required to create snapshots");if(n.subscription.snapshot_count>=n.subscription.snapshot_limit)throw new Error(`Maximum ${n.subscription.snapshot_limit} snapshots reached. Delete old snapshots first.`);this._status.isSaving=!0,this._notifyListeners();try{const o=await f.x.authenticatedFetch(`${w.API_BASE}/backups`,{method:"POST",body:JSON.stringify({type:"snapshot",config:e,snapshot_name:t,snapshot_description:i,device_info:this._getDeviceInfo()})});if(!o.ok){const e=await o.json().catch((()=>({message:"Create snapshot failed"})));throw new Error(e.message||`HTTP ${o.status}`)}const n=await o.json();return console.log(`✅ Snapshot created: ${t}`),this._status.lastBackup=new Date,this._saveLastBackupTime(),n}catch(e){throw console.error("❌ Create snapshot failed:",e),this._status.error=e instanceof Error?e.message:"Create snapshot failed",e}finally{this._status.isSaving=!1,this._notifyListeners()}}async listBackups(e=1,t=50,i){if(!f.x.isAuthenticated())throw new Error("Authentication required to list backups");const o=new URLSearchParams({page:e.toString(),per_page:t.toString()});i&&o.append("type",i);const n=await f.x.authenticatedFetch(`${w.API_BASE}/backups?${o.toString()}`);if(!n.ok)throw new Error(`Failed to fetch backups: ${n.statusText}`);return n.json()}async getBackup(e){if(!f.x.isAuthenticated())throw new Error("Authentication required");const t=await f.x.authenticatedFetch(`${w.API_BASE}/backups/${e}`);if(!t.ok)throw new Error(`Failed to fetch backup: ${t.statusText}`);return t.json()}async restoreBackup(e){const t=await this.getBackup(e);try{await f.x.authenticatedFetch(`${w.API_BASE}/backups/${e}/restore`,{method:"POST"})}catch(e){console.warn("Failed to track restore:",e)}return console.log(`✅ Backup restored: ${t.snapshot_name||`v${t.version_number}`}`),t.config}async updateSnapshot(e,t,i){if(!f.x.isAuthenticated())throw new Error("Authentication required");const o=await f.x.authenticatedFetch(`${w.API_BASE}/backups/${e}`,{method:"PUT",body:JSON.stringify({snapshot_name:t,snapshot_description:i})});if(!o.ok)throw new Error(`Failed to update snapshot: ${o.statusText}`);console.log(`✅ Snapshot updated: ${t}`)}async deleteSnapshot(e){if(!f.x.isAuthenticated())throw new Error("Authentication required");const t=await f.x.authenticatedFetch(`${w.API_BASE}/backups/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete snapshot: ${t.statusText}`);console.log("✅ Snapshot deleted")}async getSubscription(){if(!f.x.isAuthenticated())throw new Error("Authentication required");const e=await f.x.authenticatedFetch(`${w.API_BASE}/subscription`);if(!e.ok)throw new Error(`Failed to fetch subscription: ${e.statusText}`);return e.json()}async checkForUpdates(){if(!f.x.isAuthenticated())return null;try{const e=await this.listBackups(1,1);if(0===e.backups.length)return null;const t=e.backups[0],i=this._status.lastBackup;if(!i)return this.getBackup(t.id);return new Date(t.created).getTime()>i.getTime()?this.getBackup(t.id):null}catch(e){return console.error("Failed to check for updates:",e),null}}addListener(e){this._listeners.add(e)}removeListener(e){this._listeners.delete(e)}async _executeSave(e,t){this._status.isSaving=!0,this._status.pendingBackup=!1,this._status.error=null,this._notifyListeners();try{const i=await f.x.authenticatedFetch(`${w.API_BASE}/backups`,{method:"POST",body:JSON.stringify({type:t,config:e,device_info:this._getDeviceInfo()})});if(!i.ok){const e=await i.json().catch((()=>({message:"Auto-save failed"})));throw new Error(e.message||`HTTP ${i.status}`)}const o=await i.json();this._status.lastBackup=new Date(o.created),this._saveLastBackupTime(),console.log(`✅ Auto-backup saved: v${o.version_number}`)}catch(t){console.error("❌ Auto-save failed:",t),this._status.error=t instanceof Error?t.message:"Auto-save failed",this._pendingConfig=e,this._status.pendingBackup=!0,this._savePendingBackup(e)}finally{this._status.isSaving=!1,this._notifyListeners()}}_getDeviceInfo(){const e=navigator.userAgent;let t="Unknown";return e.includes("Chrome")?t="Chrome":e.includes("Safari")?t="Safari":e.includes("Firefox")?t="Firefox":e.includes("Edge")&&(t="Edge"),`${t} on ${navigator.platform}`}_notifyListeners(){this._listeners.forEach((e=>{try{e(this._status)}catch(e){console.error("Error in backup listener:",e)}}))}_loadLastBackupTime(){try{const e=localStorage.getItem(w.STORAGE_KEY_LAST_BACKUP);e&&(this._status.lastBackup=new Date(e))}catch(e){console.error("Failed to load last backup time:",e)}}_saveLastBackupTime(){try{this._status.lastBackup&&localStorage.setItem(w.STORAGE_KEY_LAST_BACKUP,this._status.lastBackup.toISOString())}catch(e){console.error("Failed to save last backup time:",e)}}_loadPendingBackup(){try{const e=localStorage.getItem(w.STORAGE_KEY_PENDING);e&&(this._pendingConfig=JSON.parse(e),this._status.pendingBackup=!0,f.x.isAuthenticated()&&this._pendingConfig&&(console.log("Found pending backup, attempting to save..."),this._executeSave(this._pendingConfig,"auto").then((()=>{this._pendingConfig=void 0,this._clearPendingBackup()}))))}catch(e){console.error("Failed to load pending backup:",e)}}_savePendingBackup(e){try{localStorage.setItem(w.STORAGE_KEY_PENDING,JSON.stringify(e))}catch(e){console.error("Failed to save pending backup:",e)}}_clearPendingBackup(){try{localStorage.removeItem(w.STORAGE_KEY_PENDING)}catch(e){console.error("Failed to clear pending backup:",e)}}}w.API_BASE="https://ultracard.io/wp-json/ultra-card/v1",w.AUTO_SAVE_DEBOUNCE=5e3,w.STORAGE_KEY_LAST_BACKUP="ultra-card-last-backup",w.STORAGE_KEY_PENDING="ultra-card-pending-backup";const S=new w;var O=n(933);const A=new class{constructor(){this.hass=null,this.apiBase=""}initialize(e,t){this.hass=e,this.apiBase=`${t}/wp-json/ultra-card/v1`,O.ucDashboardScannerService.initialize(e)}async createSnapshot(){var e;if(!f.x.isAuthenticated())throw new Error("Must be logged in to create snapshots");const t=f.x.getCurrentUser();if(!t||"pro"!==(null===(e=t.subscription)||void 0===e?void 0:e.tier))throw new Error("Pro subscription required to create manual snapshots");console.log("📸 Creating manual dashboard snapshot...");try{const e=await O.ucDashboardScannerService.scanDashboard();if(0===e.card_count)throw new Error("No Ultra Cards found in dashboard");console.log(`📦 Captured ${e.card_count} Ultra Cards from ${e.views.length} views`);const t=await this.apiCall("/snapshots",{method:"POST",body:JSON.stringify({type:"manual",snapshot_data:e})});return console.log("✅ Manual snapshot created successfully:",t),{id:t.snapshot_id,type:"manual",date:(new Date).toISOString().split("T")[0],created:(new Date).toISOString(),snapshot_data:e}}catch(e){throw console.error("❌ Failed to create snapshot:",e),e}}async createAutoSnapshot(){var e;const t=f.x.getCurrentUser();if(t&&"pro"===(null===(e=t.subscription)||void 0===e?void 0:e.tier))try{console.log("🤖 Creating automatic daily snapshot...");const e=await O.ucDashboardScannerService.scanDashboard();if(0===e.card_count)return void console.log("⚠️ No Ultra Cards found, skipping auto snapshot");await this.apiCall("/snapshots",{method:"POST",body:JSON.stringify({type:"auto",snapshot_data:e})}),console.log(`✅ Auto snapshot created: ${e.card_count} cards backed up`)}catch(e){console.error("❌ Auto snapshot failed:",e)}else console.log("⏭️ Skipping auto snapshot - not authenticated or not a Pro user")}async listSnapshots(e=30){if(!f.x.isAuthenticated())throw new Error("Must be logged in to view snapshots");try{const t=Date.now();console.log(`📋 Fetching snapshot list with cache-busting timestamp: ${t}`);const i=await this.apiCall(`/snapshots?limit=${e}&_=${t}`,{method:"GET"});return console.log("✅ Snapshot list received:",i),i}catch(e){throw console.error("❌ Failed to list snapshots:",e),e}}async getSnapshot(e){if(!f.x.isAuthenticated())throw new Error("Must be logged in to view snapshots");try{return await this.apiCall(`/snapshots/${e}`,{method:"GET"})}catch(t){throw console.error(`Failed to get snapshot ${e}:`,t),t}}async restoreSnapshot(e){if(!f.x.isAuthenticated())throw new Error("Must be logged in to restore snapshots");console.log(`🔄 Restoring snapshot ${e}...`);try{const t=(await this.apiCall(`/snapshots/${e}/restore`,{method:"POST"})).snapshot_data,i={};return t.cards.forEach((e=>{i[e.view_title]||(i[e.view_title]=[]),i[e.view_title].push(e)})),Object.keys(i).forEach((e=>{i[e].sort(((e,t)=>e.card_index-t.card_index))})),console.log(`✅ Snapshot restored: ${t.card_count} cards across ${Object.keys(i).length} views`),{snapshot_data:t,instructions:this.generateRestoreInstructions(t,i),cards_by_view:i}}catch(t){throw console.error(`Failed to restore snapshot ${e}:`,t),t}}async deleteSnapshot(e){if(!f.x.isAuthenticated())throw new Error("Must be logged in to delete snapshots");try{await this.apiCall(`/snapshots/${e}`,{method:"DELETE"}),console.log(`🗑️ Snapshot ${e} deleted`)}catch(t){throw console.error(`Failed to delete snapshot ${e}:`,t),t}}async getSettings(){if(!f.x.isAuthenticated())throw new Error("Must be logged in to view settings");try{return await this.apiCall("/snapshot-settings",{method:"GET"})}catch(e){throw console.error("Failed to get snapshot settings:",e),e}}async updateSettings(e){if(!f.x.isAuthenticated())throw new Error("Must be logged in to update settings");try{await this.apiCall("/snapshot-settings",{method:"PUT",body:JSON.stringify(e)}),console.log("✅ Snapshot settings updated:",e)}catch(e){throw console.error("Failed to update snapshot settings:",e),e}}canCreateSnapshots(){var e;const t=f.x.getCurrentUser();return"pro"===(null===(e=null==t?void 0:t.subscription)||void 0===e?void 0:e.tier)}async getDashboardPreview(){try{if(!await O.ucDashboardScannerService.canScan())return{can_scan:!1,ultra_card_count:0,view_count:0,estimated_size_kb:0};const e=await O.ucDashboardScannerService.getDashboardStats(),t=15*e.ultra_cards;return{can_scan:!0,ultra_card_count:e.ultra_cards,view_count:e.total_views,estimated_size_kb:t}}catch(e){return console.error("Failed to get dashboard preview:",e),{can_scan:!1,ultra_card_count:0,view_count:0,estimated_size_kb:0}}}generateRestoreInstructions(e,t){const i=Object.keys(t).length,o=e.card_count;let n=`This snapshot contains ${o} Ultra Card${o>1?"s":""} across ${i} view${i>1?"s":""}.\n\n`;return n+="**Restoration Instructions:**\n\n",Object.keys(t).forEach(((e,i)=>{const o=t[e];n+=`**${i+1}. ${e}** (${o.length} card${o.length>1?"s":""})\n`,o.forEach(((e,t)=>{n+=`   - Position ${e.card_index+1}: ${e.card_name||"Ultra Card"}\n`})),n+="\n"})),n+="\n**To restore:**\n",n+="1. Open each view in your Home Assistant dashboard\n",n+='2. Click "Edit Dashboard" (top right)\n',n+="3. Add or replace Ultra Cards in the positions shown above\n",n+="4. Paste the config for each card (available in detailed view)\n",n+="5. Save your changes\n",n}async apiCall(e,t={}){const i=f.x.getAuthHeader();if(!i)throw new Error("Not authenticated");const o=`${this.apiBase}${e}`,n=await fetch(o,Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json",Authorization:i},t.headers||{})}));if(!n.ok){const e=await n.json().catch((()=>({message:"Unknown error"})));throw new Error(e.message||`API call failed: ${n.status}`)}return n.json()}},C=new class{constructor(){this.apiBase=""}initialize(e){this.apiBase=`${e}/wp-json/ultra-card/v1`}async createBackup(e,t,i){var o;if(!f.x.isAuthenticated())throw new Error("Must be logged in to create backups");const n=f.x.getCurrentUser();if(!n||"pro"!==(null===(o=n.subscription)||void 0===o?void 0:o.tier))throw new Error("Pro subscription required to create card backups");const a=t||this.generateCardName(e);console.log(`💾 Creating card backup: "${a}"...`);try{const t=await this.apiCall("/card-backups",{method:"POST",body:JSON.stringify({config:e,card_name:a,view_info:i||{}})});return console.log("✅ Card backup created successfully"),{id:t.backup_id,card_name:a,stats:this.calculateStats(e),size_kb:this.estimateSize(e),created:(new Date).toISOString(),created_timestamp:Date.now()}}catch(e){throw console.error("❌ Failed to create card backup:",e),e}}async listBackups(e=30){if(!f.x.isAuthenticated())throw new Error("Must be logged in to view backups");try{return await this.apiCall(`/card-backups?limit=${e}`,{method:"GET"})}catch(e){throw console.error("Failed to list card backups:",e),e}}async getBackup(e){if(!f.x.isAuthenticated())throw new Error("Must be logged in to view backups");try{return await this.apiCall(`/card-backups/${e}`,{method:"GET"})}catch(t){throw console.error(`Failed to get backup ${e}:`,t),t}}async restoreBackup(e){if(!f.x.isAuthenticated())throw new Error("Must be logged in to restore backups");console.log(`🔄 Restoring card backup ${e}...`);try{const t=await this.apiCall(`/card-backups/${e}/restore`,{method:"POST"});return console.log("✅ Card backup restored"),t.config}catch(t){throw console.error(`Failed to restore backup ${e}:`,t),t}}async deleteBackup(e){if(!f.x.isAuthenticated())throw new Error("Must be logged in to delete backups");try{await this.apiCall(`/card-backups/${e}`,{method:"DELETE"}),console.log(`🗑️ Card backup ${e} deleted`)}catch(t){throw console.error(`Failed to delete backup ${e}:`,t),t}}async renameBackup(e,t){if(!f.x.isAuthenticated())throw new Error("Must be logged in to rename backups");if(!t||""===t.trim())throw new Error("Backup name cannot be empty");try{await this.apiCall(`/card-backups/${e}`,{method:"PUT",body:JSON.stringify({card_name:t.trim()})}),console.log(`✏️ Card backup ${e} renamed to "${t}"`)}catch(t){throw console.error(`Failed to rename backup ${e}:`,t),t}}canCreateBackups(){var e;const t=f.x.getCurrentUser();return"pro"===(null===(e=null==t?void 0:t.subscription)||void 0===e?void 0:e.tier)}async getBackupInfo(){if(!f.x.isAuthenticated())return{current:0,limit:30,remaining:30};try{const e=await this.listBackups(),t=30,i=e.length;return{current:i,limit:t,remaining:Math.max(0,t-i)}}catch(e){return console.error("Failed to get backup info:",e),{current:0,limit:30,remaining:30}}}downloadBackup(e){const t=JSON.stringify(e.config,null,2),i=new Blob([t],{type:"application/json"}),o=URL.createObjectURL(i),n=document.createElement("a");n.href=o,n.download=`${e.card_name.replace(/[^a-z0-9]/gi,"_")}_backup.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o),console.log(`⬇️ Downloaded backup: ${e.card_name}`)}generateCardName(e){return e.card_name?e.card_name:`Ultra Card - ${(new Date).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}`}calculateStats(e){var t;const i=(null===(t=e.layout)||void 0===t?void 0:t.rows)||[];let o=0,n=0;return i.forEach((e=>{const t=e.columns||[];o+=t.length,t.forEach((e=>{const t=e.modules||[];n+=t.length}))})),{row_count:i.length,column_count:o,module_count:n}}estimateSize(e){const t=JSON.stringify(e);return Math.round(t.length/1024*100)/100}titleCase(e){return e.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}async apiCall(e,t={}){const i=f.x.getAuthHeader();if(!i)throw new Error("Not authenticated");const o=`${this.apiBase}${e}`,n=await fetch(o,Object.assign(Object.assign({},t),{headers:Object.assign({"Content-Type":"application/json",Authorization:i},t.headers||{})}));if(!n.ok){const e=await n.json().catch((()=>({message:"Unknown error"})));throw new Error(e.message||`API call failed: ${n.status}`)}return n.json()}},$="ultra_card_last_auto_snapshot",T=new class{constructor(){this._checkInterval=null,this._isRunning=!1,this._listeners=new Set,this._loadLastSnapshotTime()}start(){this._checkInterval||(this._checkAndTriggerSnapshot(),this._checkInterval=window.setInterval((()=>{this._checkAndTriggerSnapshot()}),6e4),this._notifyListeners())}stop(){this._checkInterval&&(clearInterval(this._checkInterval),this._checkInterval=null,this._notifyListeners())}async _checkAndTriggerSnapshot(){var e;if(this._isRunning)return;const t=f.x.getCurrentUser();if(t&&"pro"===(null===(e=t.subscription)||void 0===e?void 0:e.tier))try{const e=await A.getSettings();if(!e.enabled)return;if(this._shouldRunSnapshot(e.time,e.timezone)){this._isRunning=!0,this._notifyListeners();try{await A.createAutoSnapshot(),this._saveLastSnapshotTime()}catch(e){console.error("❌ Auto-snapshot failed:",e)}finally{this._isRunning=!1,this._notifyListeners()}}}catch(e){console.error("❌ Error checking snapshot schedule:",e)}}_shouldRunSnapshot(e,t){const i=this._getLastSnapshotTime(),o=new Date,[n,a]=e.split(":").map(Number),r=new Date(o);if(r.setHours(n,a,0,0),!i)return o>=r;const s=new Date(i);return!(s.getFullYear()===o.getFullYear()&&s.getMonth()===o.getMonth()&&s.getDate()===o.getDate())&&o>=r}_getLastSnapshotTime(){try{return localStorage.getItem($)}catch(e){return console.error("Failed to read last snapshot time:",e),null}}_saveLastSnapshotTime(){try{const e=(new Date).toISOString();localStorage.setItem($,e)}catch(e){console.error("Failed to save last snapshot time:",e)}}updateLastSnapshotTime(){this._saveLastSnapshotTime(),this._notifyListeners()}_loadLastSnapshotTime(){this._getLastSnapshotTime()}async triggerManualSnapshot(){try{await A.createSnapshot(),this._saveLastSnapshotTime(),this._notifyListeners()}catch(e){throw console.error("❌ Manual snapshot failed:",e),e}}async getStatus(){const e=this._getLastSnapshotTime();let t=null;try{const i=await A.getSettings();i.enabled&&(t=this._calculateNextSnapshotTime(i.time,i.timezone,e))}catch(e){console.error("Failed to get snapshot settings:",e)}return{enabled:!!this._checkInterval,nextSnapshotTime:t,lastSnapshotTime:e?new Date(e):null,isRunning:this._isRunning}}_calculateNextSnapshotTime(e,t,i){const[o,n]=e.split(":").map(Number),a=new Date,r=new Date(a);if(r.setHours(o,n,0,0),r<=a&&r.setDate(r.getDate()+1),i){const e=new Date(i);e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth()&&e.getDate()===a.getDate()&&r.getDate()===a.getDate()&&r.setDate(r.getDate()+1)}return r}subscribe(e){return this._listeners.add(e),this.getStatus().then((t=>e(t))),()=>{this._listeners.delete(e)}}_notifyListeners(){this.getStatus().then((e=>{this._listeners.forEach((t=>t(e)))}))}};function z(e){let t=e.length;for(;--t>=0;)e[t]=0}const P=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),E=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),I=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),M=new Array(576);z(M);const D=new Array(60);z(D);const B=new Array(512);z(B);const R=new Array(256);z(R);const U=new Array(29);z(U);const H=new Array(30);function J(e,t,i,o,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=o,this.max_length=n,this.has_stree=e&&e.length}let Q,N,L;function F(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}z(H);const q=e=>e<256?B[e]:B[256+(e>>>7)],V=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},K=(e,t,i)=>{e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,V(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},G=(e,t,i)=>{K(e,i[2*t],i[2*t+1])},Z=(e,t)=>{let i=0;do{i|=1&e,e>>>=1,i<<=1}while(--t>0);return i>>>1},Y=(e,t,i)=>{const o=new Array(16);let n,a,r=0;for(n=1;n<=15;n++)r=r+i[n-1]<<1,o[n]=r;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=Z(o[t]++,t))}},W=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},X=e=>{e.bi_valid>8?V(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ee=(e,t,i,o)=>{const n=2*t,a=2*i;return e[n]<e[a]||e[n]===e[a]&&o[t]<=o[i]},te=(e,t,i)=>{const o=e.heap[i];let n=i<<1;for(;n<=e.heap_len&&(n<e.heap_len&&ee(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!ee(t,o,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=o},ie=(e,t,i)=>{let o,n,a,r,s=0;if(0!==e.sym_next)do{o=255&e.pending_buf[e.sym_buf+s++],o+=(255&e.pending_buf[e.sym_buf+s++])<<8,n=e.pending_buf[e.sym_buf+s++],0===o?G(e,n,t):(a=R[n],G(e,a+256+1,t),r=P[a],0!==r&&(n-=U[a],K(e,n,r)),o--,a=q(o),G(e,a,i),r=E[a],0!==r&&(o-=H[a],K(e,o,r)))}while(s<e.sym_next);G(e,256,t)},oe=(e,t)=>{const i=t.dyn_tree,o=t.stat_desc.static_tree,n=t.stat_desc.has_stree,a=t.stat_desc.elems;let r,s,l,d=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<a;r++)0!==i[2*r]?(e.heap[++e.heap_len]=d=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,i[2*l]=1,e.depth[l]=0,e.opt_len--,n&&(e.static_len-=o[2*l+1]);for(t.max_code=d,r=e.heap_len>>1;r>=1;r--)te(e,i,r);l=a;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],te(e,i,1),s=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=s,i[2*l]=i[2*r]+i[2*s],e.depth[l]=(e.depth[r]>=e.depth[s]?e.depth[r]:e.depth[s])+1,i[2*r+1]=i[2*s+1]=l,e.heap[1]=l++,te(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const i=t.dyn_tree,o=t.max_code,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,r=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let d,c,p,u,h,g,m=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(i[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)c=e.heap[d],u=i[2*i[2*c+1]+1]+1,u>l&&(u=l,m++),i[2*c+1]=u,c>o||(e.bl_count[u]++,h=0,c>=s&&(h=r[c-s]),g=i[2*c],e.opt_len+=g*(u+h),a&&(e.static_len+=g*(n[2*c+1]+h)));if(0!==m){do{for(u=l-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(u=l;0!==u;u--)for(c=e.bl_count[u];0!==c;)p=e.heap[--d],p>o||(i[2*p+1]!==u&&(e.opt_len+=(u-i[2*p+1])*i[2*p],i[2*p+1]=u),c--)}})(e,t),Y(i,d,e.bl_count)},ne=(e,t,i)=>{let o,n,a=-1,r=t[1],s=0,l=7,d=4;for(0===r&&(l=138,d=3),t[2*(i+1)+1]=65535,o=0;o<=i;o++)n=r,r=t[2*(o+1)+1],++s<l&&n===r||(s<d?e.bl_tree[2*n]+=s:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=n,0===r?(l=138,d=3):n===r?(l=6,d=3):(l=7,d=4))},ae=(e,t,i)=>{let o,n,a=-1,r=t[1],s=0,l=7,d=4;for(0===r&&(l=138,d=3),o=0;o<=i;o++)if(n=r,r=t[2*(o+1)+1],!(++s<l&&n===r)){if(s<d)do{G(e,n,e.bl_tree)}while(0!=--s);else 0!==n?(n!==a&&(G(e,n,e.bl_tree),s--),G(e,16,e.bl_tree),K(e,s-3,2)):s<=10?(G(e,17,e.bl_tree),K(e,s-3,3)):(G(e,18,e.bl_tree),K(e,s-11,7));s=0,a=n,0===r?(l=138,d=3):n===r?(l=6,d=3):(l=7,d=4)}};let re=!1;const se=(e,t,i,o)=>{K(e,0+(o?1:0),3),X(e),V(e,i),V(e,~i),i&&e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i};var le={_tr_init:e=>{re||((()=>{let e,t,i,o,n;const a=new Array(16);for(i=0,o=0;o<28;o++)for(U[o]=i,e=0;e<1<<P[o];e++)R[i++]=o;for(R[i-1]=o,n=0,o=0;o<16;o++)for(H[o]=n,e=0;e<1<<E[o];e++)B[n++]=o;for(n>>=7;o<30;o++)for(H[o]=n<<7,e=0;e<1<<E[o]-7;e++)B[256+n++]=o;for(t=0;t<=15;t++)a[t]=0;for(e=0;e<=143;)M[2*e+1]=8,e++,a[8]++;for(;e<=255;)M[2*e+1]=9,e++,a[9]++;for(;e<=279;)M[2*e+1]=7,e++,a[7]++;for(;e<=287;)M[2*e+1]=8,e++,a[8]++;for(Y(M,287,a),e=0;e<30;e++)D[2*e+1]=5,D[2*e]=Z(e,5);Q=new J(M,P,257,286,15),N=new J(D,E,0,30,15),L=new J(new Array(0),I,0,19,7)})(),re=!0),e.l_desc=new F(e.dyn_ltree,Q),e.d_desc=new F(e.dyn_dtree,N),e.bl_desc=new F(e.bl_tree,L),e.bi_buf=0,e.bi_valid=0,W(e)},_tr_stored_block:se,_tr_flush_block:(e,t,i,o)=>{let n,a,r=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),oe(e,e.l_desc),oe(e,e.d_desc),r=(e=>{let t;for(ne(e,e.dyn_ltree,e.l_desc.max_code),ne(e,e.dyn_dtree,e.d_desc.max_code),oe(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*j[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),n=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=n&&(n=a)):n=a=i+5,i+4<=n&&-1!==t?se(e,t,i,o):4===e.strategy||a===n?(K(e,2+(o?1:0),3),ie(e,M,D)):(K(e,4+(o?1:0),3),((e,t,i,o)=>{let n;for(K(e,t-257,5),K(e,i-1,5),K(e,o-4,4),n=0;n<o;n++)K(e,e.bl_tree[2*j[n]+1],3);ae(e,e.dyn_ltree,t-1),ae(e,e.dyn_dtree,i-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,r+1),ie(e,e.dyn_ltree,e.dyn_dtree)),W(e),o&&X(e)},_tr_tally:(e,t,i)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(R[i]+256+1)]++,e.dyn_dtree[2*q(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{K(e,2,3),G(e,256,M),(e=>{16===e.bi_valid?(V(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},de=(e,t,i,o)=>{let n=65535&e,a=e>>>16&65535,r=0;for(;0!==i;){r=i>2e3?2e3:i,i-=r;do{n=n+t[o++]|0,a=a+n|0}while(--r);n%=65521,a%=65521}return n|a<<16};const ce=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var o=0;o<8;o++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var pe=(e,t,i,o)=>{const n=ce,a=o+i;e^=-1;for(let i=o;i<a;i++)e=e>>>8^n[255&(e^t[i])];return~e},ue={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},he={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ge,_tr_stored_block:me,_tr_flush_block:fe,_tr_tally:_e,_tr_align:ve}=le,{Z_NO_FLUSH:be,Z_PARTIAL_FLUSH:ye,Z_FULL_FLUSH:xe,Z_FINISH:ke,Z_BLOCK:we,Z_OK:Se,Z_STREAM_END:Oe,Z_STREAM_ERROR:Ae,Z_DATA_ERROR:Ce,Z_BUF_ERROR:$e,Z_DEFAULT_COMPRESSION:Te,Z_FILTERED:ze,Z_HUFFMAN_ONLY:Pe,Z_RLE:Ee,Z_FIXED:Ie,Z_DEFAULT_STRATEGY:je,Z_UNKNOWN:Me,Z_DEFLATED:De}=he,Be=258,Re=262,Ue=42,He=113,Je=666,Qe=(e,t)=>(e.msg=ue[t],t),Ne=e=>2*e-(e>4?9:0),Le=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Fe=e=>{let t,i,o,n=e.w_size;t=e.hash_size,o=t;do{i=e.head[--o],e.head[o]=i>=n?i-n:0}while(--t);t=n,o=t;do{i=e.prev[--o],e.prev[o]=i>=n?i-n:0}while(--t)};let qe=(e,t,i)=>(t<<e.hash_shift^i)&e.hash_mask;const Ve=e=>{const t=e.state;let i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},Ke=(e,t)=>{fe(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ve(e.strm)},Ge=(e,t)=>{e.pending_buf[e.pending++]=t},Ze=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ye=(e,t,i,o)=>{let n=e.avail_in;return n>o&&(n=o),0===n?0:(e.avail_in-=n,t.set(e.input.subarray(e.next_in,e.next_in+n),i),1===e.state.wrap?e.adler=de(e.adler,t,n,i):2===e.state.wrap&&(e.adler=pe(e.adler,t,n,i)),e.next_in+=n,e.total_in+=n,n)},We=(e,t)=>{let i,o,n=e.max_chain_length,a=e.strstart,r=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-Re?e.strstart-(e.w_size-Re):0,d=e.window,c=e.w_mask,p=e.prev,u=e.strstart+Be;let h=d[a+r-1],g=d[a+r];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(i=t,d[i+r]===g&&d[i+r-1]===h&&d[i]===d[a]&&d[++i]===d[a+1]){a+=2,i++;do{}while(d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&d[++a]===d[++i]&&a<u);if(o=Be-(u-a),a=u-Be,o>r){if(e.match_start=t,r=o,o>=s)break;h=d[a+r-1],g=d[a+r]}}}while((t=p[t&c])>l&&0!=--n);return r<=e.lookahead?r:e.lookahead},Xe=e=>{const t=e.w_size;let i,o,n;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Re)&&(e.window.set(e.window.subarray(t,t+t-o),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Fe(e),o+=t),0===e.strm.avail_in)break;if(i=Ye(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=qe(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=qe(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Re&&0!==e.strm.avail_in)},et=(e,t)=>{let i,o,n,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r=0,s=e.strm.avail_in;do{if(i=65535,n=e.bi_valid+42>>3,e.strm.avail_out<n)break;if(n=e.strm.avail_out-n,o=e.strstart-e.block_start,i>o+e.strm.avail_in&&(i=o+e.strm.avail_in),i>n&&(i=n),i<a&&(0===i&&t!==ke||t===be||i!==o+e.strm.avail_in))break;r=t===ke&&i===o+e.strm.avail_in?1:0,me(e,0,0,r),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,Ve(e.strm),o&&(o>i&&(o=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+o),e.strm.next_out),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o,e.block_start+=o,i-=o),i&&(Ye(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===r);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),r?4:t!==be&&t!==ke&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(n=e.window_size-e.strstart,e.strm.avail_in>n&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,n+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),n>e.strm.avail_in&&(n=e.strm.avail_in),n&&(Ye(e.strm,e.window,e.strstart,n),e.strstart+=n,e.insert+=n>e.w_size-e.insert?e.w_size-e.insert:n),e.high_water<e.strstart&&(e.high_water=e.strstart),n=e.bi_valid+42>>3,n=e.pending_buf_size-n>65535?65535:e.pending_buf_size-n,a=n>e.w_size?e.w_size:n,o=e.strstart-e.block_start,(o>=a||(o||t===ke)&&t!==be&&0===e.strm.avail_in&&o<=n)&&(i=o>n?n:o,r=t===ke&&0===e.strm.avail_in&&i===o?1:0,me(e,e.block_start,i,r),e.block_start+=i,Ve(e.strm)),r?3:1)},tt=(e,t)=>{let i,o;for(;;){if(e.lookahead<Re){if(Xe(e),e.lookahead<Re&&t===be)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=qe(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-Re&&(e.match_length=We(e,i)),e.match_length>=3)if(o=_e(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=qe(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=qe(e,e.ins_h,e.window[e.strstart+1]);else o=_e(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(Ke(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ke?(Ke(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ke(e,!1),0===e.strm.avail_out)?1:2},it=(e,t)=>{let i,o,n;for(;;){if(e.lookahead<Re){if(Xe(e),e.lookahead<Re&&t===be)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=qe(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-Re&&(e.match_length=We(e,i),e.match_length<=5&&(e.strategy===ze||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,o=_e(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=qe(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,o&&(Ke(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(o=_e(e,0,e.window[e.strstart-1]),o&&Ke(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=_e(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ke?(Ke(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ke(e,!1),0===e.strm.avail_out)?1:2};function ot(e,t,i,o,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=o,this.func=n}const nt=[new ot(0,0,0,0,et),new ot(4,4,8,4,tt),new ot(4,5,16,8,tt),new ot(4,6,32,32,tt),new ot(4,4,16,16,it),new ot(8,16,32,32,it),new ot(8,16,128,128,it),new ot(8,32,128,256,it),new ot(32,128,258,1024,it),new ot(32,258,258,4096,it)];function at(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=De,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Le(this.dyn_ltree),Le(this.dyn_dtree),Le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Le(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const rt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Ue&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==He&&t.status!==Je?1:0},st=e=>{if(rt(e))return Qe(e,Ae);e.total_in=e.total_out=0,e.data_type=Me;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Ue:He,e.adler=2===t.wrap?0:1,t.last_flush=-2,ge(t),Se},lt=e=>{const t=st(e);var i;return t===Se&&((i=e.state).window_size=2*i.w_size,Le(i.head),i.max_lazy_match=nt[i.level].max_lazy,i.good_match=nt[i.level].good_length,i.nice_match=nt[i.level].nice_length,i.max_chain_length=nt[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=2,i.match_available=0,i.ins_h=0),t},dt=(e,t,i,o,n,a)=>{if(!e)return Ae;let r=1;if(t===Te&&(t=6),o<0?(r=0,o=-o):o>15&&(r=2,o-=16),n<1||n>9||i!==De||o<8||o>15||t<0||t>9||a<0||a>Ie||8===o&&1!==r)return Qe(e,Ae);8===o&&(o=9);const s=new at;return e.state=s,s.strm=e,s.status=Ue,s.wrap=r,s.gzhead=null,s.w_bits=o,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=n+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<n+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=i,lt(e)};var ct=dt,pt=(e,t)=>rt(e)||2!==e.state.wrap?Ae:(e.state.gzhead=t,Se),ut=(e,t)=>{if(rt(e)||t>we||t<0)return e?Qe(e,Ae):Ae;const i=e.state;if(!e.output||0!==e.avail_in&&!e.input||i.status===Je&&t!==ke)return Qe(e,0===e.avail_out?$e:Ae);const o=i.last_flush;if(i.last_flush=t,0!==i.pending){if(Ve(e),0===e.avail_out)return i.last_flush=-1,Se}else if(0===e.avail_in&&Ne(t)<=Ne(o)&&t!==ke)return Qe(e,$e);if(i.status===Je&&0!==e.avail_in)return Qe(e,$e);if(i.status===Ue&&0===i.wrap&&(i.status=He),i.status===Ue){let t=De+(i.w_bits-8<<4)<<8,o=-1;if(o=i.strategy>=Pe||i.level<2?0:i.level<6?1:6===i.level?2:3,t|=o<<6,0!==i.strstart&&(t|=32),t+=31-t%31,Ze(i,t),0!==i.strstart&&(Ze(i,e.adler>>>16),Ze(i,65535&e.adler)),e.adler=1,i.status=He,Ve(e),0!==i.pending)return i.last_flush=-1,Se}if(57===i.status)if(e.adler=0,Ge(i,31),Ge(i,139),Ge(i,8),i.gzhead)Ge(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Ge(i,255&i.gzhead.time),Ge(i,i.gzhead.time>>8&255),Ge(i,i.gzhead.time>>16&255),Ge(i,i.gzhead.time>>24&255),Ge(i,9===i.level?2:i.strategy>=Pe||i.level<2?4:0),Ge(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(Ge(i,255&i.gzhead.extra.length),Ge(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=pe(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(Ge(i,0),Ge(i,0),Ge(i,0),Ge(i,0),Ge(i,0),Ge(i,9===i.level?2:i.strategy>=Pe||i.level<2?4:0),Ge(i,3),i.status=He,Ve(e),0!==i.pending)return i.last_flush=-1,Se;if(69===i.status){if(i.gzhead.extra){let t=i.pending,o=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+o>i.pending_buf_size;){let n=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>t&&(e.adler=pe(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex+=n,Ve(e),0!==i.pending)return i.last_flush=-1,Se;t=0,o-=n}let n=new Uint8Array(i.gzhead.extra);i.pending_buf.set(n.subarray(i.gzindex,i.gzindex+o),i.pending),i.pending+=o,i.gzhead.hcrc&&i.pending>t&&(e.adler=pe(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let t,o=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>o&&(e.adler=pe(e.adler,i.pending_buf,i.pending-o,o)),Ve(e),0!==i.pending)return i.last_flush=-1,Se;o=0}t=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,Ge(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>o&&(e.adler=pe(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let t,o=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>o&&(e.adler=pe(e.adler,i.pending_buf,i.pending-o,o)),Ve(e),0!==i.pending)return i.last_flush=-1,Se;o=0}t=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,Ge(i,t)}while(0!==t);i.gzhead.hcrc&&i.pending>o&&(e.adler=pe(e.adler,i.pending_buf,i.pending-o,o))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(Ve(e),0!==i.pending))return i.last_flush=-1,Se;Ge(i,255&e.adler),Ge(i,e.adler>>8&255),e.adler=0}if(i.status=He,Ve(e),0!==i.pending)return i.last_flush=-1,Se}if(0!==e.avail_in||0!==i.lookahead||t!==be&&i.status!==Je){let o=0===i.level?et(i,t):i.strategy===Pe?((e,t)=>{let i;for(;;){if(0===e.lookahead&&(Xe(e),0===e.lookahead)){if(t===be)return 1;break}if(e.match_length=0,i=_e(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(Ke(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ke?(Ke(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ke(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===Ee?((e,t)=>{let i,o,n,a;const r=e.window;for(;;){if(e.lookahead<=Be){if(Xe(e),e.lookahead<=Be&&t===be)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=e.strstart-1,o=r[n],o===r[++n]&&o===r[++n]&&o===r[++n])){a=e.strstart+Be;do{}while(o===r[++n]&&o===r[++n]&&o===r[++n]&&o===r[++n]&&o===r[++n]&&o===r[++n]&&o===r[++n]&&o===r[++n]&&n<a);e.match_length=Be-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=_e(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=_e(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(Ke(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ke?(Ke(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ke(e,!1),0===e.strm.avail_out)?1:2})(i,t):nt[i.level].func(i,t);if(3!==o&&4!==o||(i.status=Je),1===o||3===o)return 0===e.avail_out&&(i.last_flush=-1),Se;if(2===o&&(t===ye?ve(i):t!==we&&(me(i,0,0,!1),t===xe&&(Le(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Ve(e),0===e.avail_out))return i.last_flush=-1,Se}return t!==ke?Se:i.wrap<=0?Oe:(2===i.wrap?(Ge(i,255&e.adler),Ge(i,e.adler>>8&255),Ge(i,e.adler>>16&255),Ge(i,e.adler>>24&255),Ge(i,255&e.total_in),Ge(i,e.total_in>>8&255),Ge(i,e.total_in>>16&255),Ge(i,e.total_in>>24&255)):(Ze(i,e.adler>>>16),Ze(i,65535&e.adler)),Ve(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?Se:Oe)},ht=e=>{if(rt(e))return Ae;const t=e.state.status;return e.state=null,t===He?Qe(e,Ce):Se},gt=(e,t)=>{let i=t.length;if(rt(e))return Ae;const o=e.state,n=o.wrap;if(2===n||1===n&&o.status!==Ue||o.lookahead)return Ae;if(1===n&&(e.adler=de(e.adler,t,i,0)),o.wrap=0,i>=o.w_size){0===n&&(Le(o.head),o.strstart=0,o.block_start=0,o.insert=0);let e=new Uint8Array(o.w_size);e.set(t.subarray(i-o.w_size,i),0),t=e,i=o.w_size}const a=e.avail_in,r=e.next_in,s=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,Xe(o);o.lookahead>=3;){let e=o.strstart,t=o.lookahead-2;do{o.ins_h=qe(o,o.ins_h,o.window[e+3-1]),o.prev[e&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=e,e++}while(--t);o.strstart=e,o.lookahead=2,Xe(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=2,o.match_available=0,e.next_in=r,e.input=s,e.avail_in=a,o.wrap=n,Se};const mt=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ft=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const t in i)mt(i,t)&&(e[t]=i[t])}}return e},_t=e=>{let t=0;for(let i=0,o=e.length;i<o;i++)t+=e[i].length;const i=new Uint8Array(t);for(let t=0,o=0,n=e.length;t<n;t++){let n=e[t];i.set(n,o),o+=n.length}return i};let vt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){vt=!1}const bt=new Uint8Array(256);for(let e=0;e<256;e++)bt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;bt[254]=bt[254]=1;var yt=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,o,n,a,r=e.length,s=0;for(n=0;n<r;n++)i=e.charCodeAt(n),55296==(64512&i)&&n+1<r&&(o=e.charCodeAt(n+1),56320==(64512&o)&&(i=65536+(i-55296<<10)+(o-56320),n++)),s+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(s),a=0,n=0;a<s;n++)i=e.charCodeAt(n),55296==(64512&i)&&n+1<r&&(o=e.charCodeAt(n+1),56320==(64512&o)&&(i=65536+(i-55296<<10)+(o-56320),n++)),i<128?t[a++]=i:i<2048?(t[a++]=192|i>>>6,t[a++]=128|63&i):i<65536?(t[a++]=224|i>>>12,t[a++]=128|i>>>6&63,t[a++]=128|63&i):(t[a++]=240|i>>>18,t[a++]=128|i>>>12&63,t[a++]=128|i>>>6&63,t[a++]=128|63&i);return t},xt=(e,t)=>{const i=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let o,n;const a=new Array(2*i);for(n=0,o=0;o<i;){let t=e[o++];if(t<128){a[n++]=t;continue}let r=bt[t];if(r>4)a[n++]=65533,o+=r-1;else{for(t&=2===r?31:3===r?15:7;r>1&&o<i;)t=t<<6|63&e[o++],r--;r>1?a[n++]=65533:t<65536?a[n++]=t:(t-=65536,a[n++]=55296|t>>10&1023,a[n++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&vt)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i="";for(let o=0;o<t;o++)i+=String.fromCharCode(e[o]);return i})(a,n)},kt=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+bt[e[i]]>t?i:t},wt=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const St=Object.prototype.toString,{Z_NO_FLUSH:Ot,Z_SYNC_FLUSH:At,Z_FULL_FLUSH:Ct,Z_FINISH:$t,Z_OK:Tt,Z_STREAM_END:zt,Z_DEFAULT_COMPRESSION:Pt,Z_DEFAULT_STRATEGY:Et,Z_DEFLATED:It}=he;function jt(e){this.options=ft({level:Pt,method:It,chunkSize:16384,windowBits:15,memLevel:8,strategy:Et},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wt,this.strm.avail_out=0;let i=ct(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==Tt)throw new Error(ue[i]);if(t.header&&pt(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?yt(t.dictionary):"[object ArrayBuffer]"===St.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,i=gt(this.strm,e),i!==Tt)throw new Error(ue[i]);this._dict_set=!0}}function Mt(e,t){const i=new jt(t);if(i.push(e,!0),i.err)throw i.msg||ue[i.err];return i.result}jt.prototype.push=function(e,t){const i=this.strm,o=this.options.chunkSize;let n,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?$t:Ot,"string"==typeof e?i.input=yt(e):"[object ArrayBuffer]"===St.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;)if(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(a===At||a===Ct)&&i.avail_out<=6)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else{if(n=ut(i,a),n===zt)return i.next_out>0&&this.onData(i.output.subarray(0,i.next_out)),n=ht(this.strm),this.onEnd(n),this.ended=!0,n===Tt;if(0!==i.avail_out){if(a>0&&i.next_out>0)this.onData(i.output.subarray(0,i.next_out)),i.avail_out=0;else if(0===i.avail_in)break}else this.onData(i.output)}return!0},jt.prototype.onData=function(e){this.chunks.push(e)},jt.prototype.onEnd=function(e){e===Tt&&(this.result=_t(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Dt={Deflate:jt,deflate:Mt,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Mt(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Mt(e,t)},constants:he};const Bt=16209;var Rt=function(e,t){let i,o,n,a,r,s,l,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S,O;const A=e.state;i=e.next_in,S=e.input,o=i+(e.avail_in-5),n=e.next_out,O=e.output,a=n-(t-e.avail_out),r=n+(e.avail_out-257),s=A.dmax,l=A.wsize,d=A.whave,c=A.wnext,p=A.window,u=A.hold,h=A.bits,g=A.lencode,m=A.distcode,f=(1<<A.lenbits)-1,_=(1<<A.distbits)-1;e:do{h<15&&(u+=S[i++]<<h,h+=8,u+=S[i++]<<h,h+=8),v=g[u&f];t:for(;;){if(b=v>>>24,u>>>=b,h-=b,b=v>>>16&255,0===b)O[n++]=65535&v;else{if(!(16&b)){if(64&b){if(32&b){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=Bt;break e}v=g[(65535&v)+(u&(1<<b)-1)];continue t}for(y=65535&v,b&=15,b&&(h<b&&(u+=S[i++]<<h,h+=8),y+=u&(1<<b)-1,u>>>=b,h-=b),h<15&&(u+=S[i++]<<h,h+=8,u+=S[i++]<<h,h+=8),v=m[u&_];;){if(b=v>>>24,u>>>=b,h-=b,b=v>>>16&255,16&b){if(x=65535&v,b&=15,h<b&&(u+=S[i++]<<h,h+=8,h<b&&(u+=S[i++]<<h,h+=8)),x+=u&(1<<b)-1,x>s){e.msg="invalid distance too far back",A.mode=Bt;break e}if(u>>>=b,h-=b,b=n-a,x>b){if(b=x-b,b>d&&A.sane){e.msg="invalid distance too far back",A.mode=Bt;break e}if(k=0,w=p,0===c){if(k+=l-b,b<y){y-=b;do{O[n++]=p[k++]}while(--b);k=n-x,w=O}}else if(c<b){if(k+=l+c-b,b-=c,b<y){y-=b;do{O[n++]=p[k++]}while(--b);if(k=0,c<y){b=c,y-=b;do{O[n++]=p[k++]}while(--b);k=n-x,w=O}}}else if(k+=c-b,b<y){y-=b;do{O[n++]=p[k++]}while(--b);k=n-x,w=O}for(;y>2;)O[n++]=w[k++],O[n++]=w[k++],O[n++]=w[k++],y-=3;y&&(O[n++]=w[k++],y>1&&(O[n++]=w[k++]))}else{k=n-x;do{O[n++]=O[k++],O[n++]=O[k++],O[n++]=O[k++],y-=3}while(y>2);y&&(O[n++]=O[k++],y>1&&(O[n++]=O[k++]))}break}if(64&b){e.msg="invalid distance code",A.mode=Bt;break e}v=m[(65535&v)+(u&(1<<b)-1)]}}break}}while(i<o&&n<r);y=h>>3,i-=y,h-=y<<3,u&=(1<<h)-1,e.next_in=i,e.next_out=n,e.avail_in=i<o?o-i+5:5-(i-o),e.avail_out=n<r?r-n+257:257-(n-r),A.hold=u,A.bits=h};const Ut=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Jt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Qt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Nt=(e,t,i,o,n,a,r,s)=>{const l=s.bits;let d,c,p,u,h,g,m=0,f=0,_=0,v=0,b=0,y=0,x=0,k=0,w=0,S=0,O=null;const A=new Uint16Array(16),C=new Uint16Array(16);let $,T,z,P=null;for(m=0;m<=15;m++)A[m]=0;for(f=0;f<o;f++)A[t[i+f]]++;for(b=l,v=15;v>=1&&0===A[v];v--);if(b>v&&(b=v),0===v)return n[a++]=20971520,n[a++]=20971520,s.bits=1,0;for(_=1;_<v&&0===A[_];_++);for(b<_&&(b=_),k=1,m=1;m<=15;m++)if(k<<=1,k-=A[m],k<0)return-1;if(k>0&&(0===e||1!==v))return-1;for(C[1]=0,m=1;m<15;m++)C[m+1]=C[m]+A[m];for(f=0;f<o;f++)0!==t[i+f]&&(r[C[t[i+f]]++]=f);if(0===e?(O=P=r,g=20):1===e?(O=Ut,P=Ht,g=257):(O=Jt,P=Qt,g=0),S=0,f=0,m=_,h=a,y=b,x=0,p=-1,w=1<<b,u=w-1,1===e&&w>852||2===e&&w>592)return 1;for(;;){$=m-x,r[f]+1<g?(T=0,z=r[f]):r[f]>=g?(T=P[r[f]-g],z=O[r[f]-g]):(T=96,z=0),d=1<<m-x,c=1<<y,_=c;do{c-=d,n[h+(S>>x)+c]=$<<24|T<<16|z}while(0!==c);for(d=1<<m-1;S&d;)d>>=1;if(0!==d?(S&=d-1,S+=d):S=0,f++,0==--A[m]){if(m===v)break;m=t[i+r[f]]}if(m>b&&(S&u)!==p){for(0===x&&(x=b),h+=_,y=m-x,k=1<<y;y+x<v&&(k-=A[y+x],!(k<=0));)y++,k<<=1;if(w+=1<<y,1===e&&w>852||2===e&&w>592)return 1;p=S&u,n[p]=b<<24|y<<16|h-a}}return 0!==S&&(n[h+S]=m-x<<24|64<<16),s.bits=b,0};const{Z_FINISH:Lt,Z_BLOCK:Ft,Z_TREES:qt,Z_OK:Vt,Z_STREAM_END:Kt,Z_NEED_DICT:Gt,Z_STREAM_ERROR:Zt,Z_DATA_ERROR:Yt,Z_MEM_ERROR:Wt,Z_BUF_ERROR:Xt,Z_DEFLATED:ei}=he,ti=16180,ii=16190,oi=16191,ni=16192,ai=16194,ri=16199,si=16200,li=16206,di=16209,ci=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function pi(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ui=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ti||t.mode>16211?1:0},hi=e=>{if(ui(e))return Zt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=ti,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Vt},gi=e=>{if(ui(e))return Zt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,hi(e)},mi=(e,t)=>{let i;if(ui(e))return Zt;const o=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Zt:(null!==o.window&&o.wbits!==t&&(o.window=null),o.wrap=i,o.wbits=t,gi(e))},fi=(e,t)=>{if(!e)return Zt;const i=new pi;e.state=i,i.strm=e,i.window=null,i.mode=ti;const o=mi(e,t);return o!==Vt&&(e.state=null),o};let _i,vi,bi=!0;const yi=e=>{if(bi){_i=new Int32Array(512),vi=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Nt(1,e.lens,0,288,_i,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Nt(2,e.lens,0,32,vi,0,e.work,{bits:5}),bi=!1}e.lencode=_i,e.lenbits=9,e.distcode=vi,e.distbits=5},xi=(e,t,i,o)=>{let n;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),o>=a.wsize?(a.window.set(t.subarray(i-a.wsize,i),0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>o&&(n=o),a.window.set(t.subarray(i-o,i-o+n),a.wnext),(o-=n)?(a.window.set(t.subarray(i-o,i),0),a.wnext=o,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0};var ki=gi,wi=fi,Si=(e,t)=>{let i,o,n,a,r,s,l,d,c,p,u,h,g,m,f,_,v,b,y,x,k,w,S=0;const O=new Uint8Array(4);let A,C;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ui(e)||!e.output||!e.input&&0!==e.avail_in)return Zt;i=e.state,i.mode===oi&&(i.mode=ni),r=e.next_out,n=e.output,l=e.avail_out,a=e.next_in,o=e.input,s=e.avail_in,d=i.hold,c=i.bits,p=s,u=l,w=Vt;e:for(;;)switch(i.mode){case ti:if(0===i.wrap){i.mode=ni;break}for(;c<16;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(2&i.wrap&&35615===d){0===i.wbits&&(i.wbits=15),i.check=0,O[0]=255&d,O[1]=d>>>8&255,i.check=pe(i.check,O,2,0),d=0,c=0,i.mode=16181;break}if(i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",i.mode=di;break}if((15&d)!==ei){e.msg="unknown compression method",i.mode=di;break}if(d>>>=4,c-=4,k=8+(15&d),0===i.wbits&&(i.wbits=k),k>15||k>i.wbits){e.msg="invalid window size",i.mode=di;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=512&d?16189:oi,d=0,c=0;break;case 16181:for(;c<16;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(i.flags=d,(255&i.flags)!==ei){e.msg="unknown compression method",i.mode=di;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=di;break}i.head&&(i.head.text=d>>8&1),512&i.flags&&4&i.wrap&&(O[0]=255&d,O[1]=d>>>8&255,i.check=pe(i.check,O,2,0)),d=0,c=0,i.mode=16182;case 16182:for(;c<32;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}i.head&&(i.head.time=d),512&i.flags&&4&i.wrap&&(O[0]=255&d,O[1]=d>>>8&255,O[2]=d>>>16&255,O[3]=d>>>24&255,i.check=pe(i.check,O,4,0)),d=0,c=0,i.mode=16183;case 16183:for(;c<16;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}i.head&&(i.head.xflags=255&d,i.head.os=d>>8),512&i.flags&&4&i.wrap&&(O[0]=255&d,O[1]=d>>>8&255,i.check=pe(i.check,O,2,0)),d=0,c=0,i.mode=16184;case 16184:if(1024&i.flags){for(;c<16;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}i.length=d,i.head&&(i.head.extra_len=d),512&i.flags&&4&i.wrap&&(O[0]=255&d,O[1]=d>>>8&255,i.check=pe(i.check,O,2,0)),d=0,c=0}else i.head&&(i.head.extra=null);i.mode=16185;case 16185:if(1024&i.flags&&(h=i.length,h>s&&(h=s),h&&(i.head&&(k=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(o.subarray(a,a+h),k)),512&i.flags&&4&i.wrap&&(i.check=pe(i.check,o,h,a)),s-=h,a+=h,i.length-=h),i.length))break e;i.length=0,i.mode=16186;case 16186:if(2048&i.flags){if(0===s)break e;h=0;do{k=o[a+h++],i.head&&k&&i.length<65536&&(i.head.name+=String.fromCharCode(k))}while(k&&h<s);if(512&i.flags&&4&i.wrap&&(i.check=pe(i.check,o,h,a)),s-=h,a+=h,k)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=16187;case 16187:if(4096&i.flags){if(0===s)break e;h=0;do{k=o[a+h++],i.head&&k&&i.length<65536&&(i.head.comment+=String.fromCharCode(k))}while(k&&h<s);if(512&i.flags&&4&i.wrap&&(i.check=pe(i.check,o,h,a)),s-=h,a+=h,k)break e}else i.head&&(i.head.comment=null);i.mode=16188;case 16188:if(512&i.flags){for(;c<16;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(4&i.wrap&&d!==(65535&i.check)){e.msg="header crc mismatch",i.mode=di;break}d=0,c=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=oi;break;case 16189:for(;c<32;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}e.adler=i.check=ci(d),d=0,c=0,i.mode=ii;case ii:if(0===i.havedict)return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=s,i.hold=d,i.bits=c,Gt;e.adler=i.check=1,i.mode=oi;case oi:if(t===Ft||t===qt)break e;case ni:if(i.last){d>>>=7&c,c-=7&c,i.mode=li;break}for(;c<3;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}switch(i.last=1&d,d>>>=1,c-=1,3&d){case 0:i.mode=16193;break;case 1:if(yi(i),i.mode=ri,t===qt){d>>>=2,c-=2;break e}break;case 2:i.mode=16196;break;case 3:e.msg="invalid block type",i.mode=di}d>>>=2,c-=2;break;case 16193:for(d>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",i.mode=di;break}if(i.length=65535&d,d=0,c=0,i.mode=ai,t===qt)break e;case ai:i.mode=16195;case 16195:if(h=i.length,h){if(h>s&&(h=s),h>l&&(h=l),0===h)break e;n.set(o.subarray(a,a+h),r),s-=h,a+=h,l-=h,r+=h,i.length-=h;break}i.mode=oi;break;case 16196:for(;c<14;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(i.nlen=257+(31&d),d>>>=5,c-=5,i.ndist=1+(31&d),d>>>=5,c-=5,i.ncode=4+(15&d),d>>>=4,c-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=di;break}i.have=0,i.mode=16197;case 16197:for(;i.have<i.ncode;){for(;c<3;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}i.lens[$[i.have++]]=7&d,d>>>=3,c-=3}for(;i.have<19;)i.lens[$[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,A={bits:i.lenbits},w=Nt(0,i.lens,0,19,i.lencode,0,i.work,A),i.lenbits=A.bits,w){e.msg="invalid code lengths set",i.mode=di;break}i.have=0,i.mode=16198;case 16198:for(;i.have<i.nlen+i.ndist;){for(;S=i.lencode[d&(1<<i.lenbits)-1],f=S>>>24,_=S>>>16&255,v=65535&S,!(f<=c);){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(v<16)d>>>=f,c-=f,i.lens[i.have++]=v;else{if(16===v){for(C=f+2;c<C;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(d>>>=f,c-=f,0===i.have){e.msg="invalid bit length repeat",i.mode=di;break}k=i.lens[i.have-1],h=3+(3&d),d>>>=2,c-=2}else if(17===v){for(C=f+3;c<C;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}d>>>=f,c-=f,k=0,h=3+(7&d),d>>>=3,c-=3}else{for(C=f+7;c<C;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}d>>>=f,c-=f,k=0,h=11+(127&d),d>>>=7,c-=7}if(i.have+h>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=di;break}for(;h--;)i.lens[i.have++]=k}}if(i.mode===di)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=di;break}if(i.lenbits=9,A={bits:i.lenbits},w=Nt(1,i.lens,0,i.nlen,i.lencode,0,i.work,A),i.lenbits=A.bits,w){e.msg="invalid literal/lengths set",i.mode=di;break}if(i.distbits=6,i.distcode=i.distdyn,A={bits:i.distbits},w=Nt(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,A),i.distbits=A.bits,w){e.msg="invalid distances set",i.mode=di;break}if(i.mode=ri,t===qt)break e;case ri:i.mode=si;case si:if(s>=6&&l>=258){e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=s,i.hold=d,i.bits=c,Rt(e,u),r=e.next_out,n=e.output,l=e.avail_out,a=e.next_in,o=e.input,s=e.avail_in,d=i.hold,c=i.bits,i.mode===oi&&(i.back=-1);break}for(i.back=0;S=i.lencode[d&(1<<i.lenbits)-1],f=S>>>24,_=S>>>16&255,v=65535&S,!(f<=c);){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(_&&!(240&_)){for(b=f,y=_,x=v;S=i.lencode[x+((d&(1<<b+y)-1)>>b)],f=S>>>24,_=S>>>16&255,v=65535&S,!(b+f<=c);){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}d>>>=b,c-=b,i.back+=b}if(d>>>=f,c-=f,i.back+=f,i.length=v,0===_){i.mode=16205;break}if(32&_){i.back=-1,i.mode=oi;break}if(64&_){e.msg="invalid literal/length code",i.mode=di;break}i.extra=15&_,i.mode=16201;case 16201:if(i.extra){for(C=i.extra;c<C;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}i.length+=d&(1<<i.extra)-1,d>>>=i.extra,c-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=16202;case 16202:for(;S=i.distcode[d&(1<<i.distbits)-1],f=S>>>24,_=S>>>16&255,v=65535&S,!(f<=c);){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(!(240&_)){for(b=f,y=_,x=v;S=i.distcode[x+((d&(1<<b+y)-1)>>b)],f=S>>>24,_=S>>>16&255,v=65535&S,!(b+f<=c);){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}d>>>=b,c-=b,i.back+=b}if(d>>>=f,c-=f,i.back+=f,64&_){e.msg="invalid distance code",i.mode=di;break}i.offset=v,i.extra=15&_,i.mode=16203;case 16203:if(i.extra){for(C=i.extra;c<C;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}i.offset+=d&(1<<i.extra)-1,d>>>=i.extra,c-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=di;break}i.mode=16204;case 16204:if(0===l)break e;if(h=u-l,i.offset>h){if(h=i.offset-h,h>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=di;break}h>i.wnext?(h-=i.wnext,g=i.wsize-h):g=i.wnext-h,h>i.length&&(h=i.length),m=i.window}else m=n,g=r-i.offset,h=i.length;h>l&&(h=l),l-=h,i.length-=h;do{n[r++]=m[g++]}while(--h);0===i.length&&(i.mode=si);break;case 16205:if(0===l)break e;n[r++]=i.length,l--,i.mode=si;break;case li:if(i.wrap){for(;c<32;){if(0===s)break e;s--,d|=o[a++]<<c,c+=8}if(u-=l,e.total_out+=u,i.total+=u,4&i.wrap&&u&&(e.adler=i.check=i.flags?pe(i.check,n,u,r-u):de(i.check,n,u,r-u)),u=l,4&i.wrap&&(i.flags?d:ci(d))!==i.check){e.msg="incorrect data check",i.mode=di;break}d=0,c=0}i.mode=16207;case 16207:if(i.wrap&&i.flags){for(;c<32;){if(0===s)break e;s--,d+=o[a++]<<c,c+=8}if(4&i.wrap&&d!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=di;break}d=0,c=0}i.mode=16208;case 16208:w=Kt;break e;case di:w=Yt;break e;case 16210:return Wt;default:return Zt}return e.next_out=r,e.avail_out=l,e.next_in=a,e.avail_in=s,i.hold=d,i.bits=c,(i.wsize||u!==e.avail_out&&i.mode<di&&(i.mode<li||t!==Lt))&&xi(e,e.output,e.next_out,u-e.avail_out),p-=e.avail_in,u-=e.avail_out,e.total_in+=p,e.total_out+=u,i.total+=u,4&i.wrap&&u&&(e.adler=i.check=i.flags?pe(i.check,n,u,e.next_out-u):de(i.check,n,u,e.next_out-u)),e.data_type=i.bits+(i.last?64:0)+(i.mode===oi?128:0)+(i.mode===ri||i.mode===ai?256:0),(0===p&&0===u||t===Lt)&&w===Vt&&(w=Xt),w},Oi=e=>{if(ui(e))return Zt;let t=e.state;return t.window&&(t.window=null),e.state=null,Vt},Ai=(e,t)=>{if(ui(e))return Zt;const i=e.state;return 2&i.wrap?(i.head=t,t.done=!1,Vt):Zt},Ci=(e,t)=>{const i=t.length;let o,n,a;return ui(e)?Zt:(o=e.state,0!==o.wrap&&o.mode!==ii?Zt:o.mode===ii&&(n=1,n=de(n,t,i,0),n!==o.check)?Yt:(a=xi(e,t,i,i),a?(o.mode=16210,Wt):(o.havedict=1,Vt)))},$i=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ti=Object.prototype.toString,{Z_NO_FLUSH:zi,Z_FINISH:Pi,Z_OK:Ei,Z_STREAM_END:Ii,Z_NEED_DICT:ji,Z_STREAM_ERROR:Mi,Z_DATA_ERROR:Di,Z_MEM_ERROR:Bi}=he;function Ri(e){this.options=ft({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wt,this.strm.avail_out=0;let i=wi(this.strm,t.windowBits);if(i!==Ei)throw new Error(ue[i]);if(this.header=new $i,Ai(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=yt(t.dictionary):"[object ArrayBuffer]"===Ti.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=Ci(this.strm,t.dictionary),i!==Ei)))throw new Error(ue[i])}function Ui(e,t){const i=new Ri(t);if(i.push(e),i.err)throw i.msg||ue[i.err];return i.result}Ri.prototype.push=function(e,t){const i=this.strm,o=this.options.chunkSize,n=this.options.dictionary;let a,r,s;if(this.ended)return!1;for(r=t===~~t?t:!0===t?Pi:zi,"[object ArrayBuffer]"===Ti.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),a=Si(i,r),a===ji&&n&&(a=Ci(i,n),a===Ei?a=Si(i,r):a===Di&&(a=ji));i.avail_in>0&&a===Ii&&i.state.wrap>0&&0!==e[i.next_in];)ki(i),a=Si(i,r);switch(a){case Mi:case Di:case ji:case Bi:return this.onEnd(a),this.ended=!0,!1}if(s=i.avail_out,i.next_out&&(0===i.avail_out||a===Ii))if("string"===this.options.to){let e=kt(i.output,i.next_out),t=i.next_out-e,n=xt(i.output,e);i.next_out=t,i.avail_out=o-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(n)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(a!==Ei||0!==s){if(a===Ii)return a=Oi(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},Ri.prototype.onData=function(e){this.chunks.push(e)},Ri.prototype.onEnd=function(e){e===Ei&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=_t(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Hi={Inflate:Ri,inflate:Ui,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Ui(e,t)},ungzip:Ui,constants:he};const{Deflate:Ji,deflate:Qi,deflateRaw:Ni,gzip:Li}=Dt,{Inflate:Fi,inflate:qi,inflateRaw:Vi,ungzip:Ki}=Hi;var Gi={Deflate:Ji,deflate:Qi,deflateRaw:Ni,gzip:Li,Inflate:Fi,inflate:qi,inflateRaw:Vi,ungzip:Ki,constants:he};const Zi="UC_CONFIG_V1:";class Yi{static encode(e){try{const t=JSON.stringify(e),i=Gi.deflate(t),o=btoa(String.fromCharCode.apply(null,Array.from(i)));return`${Zi}${o}`}catch(e){throw console.error("Failed to encode config:",e),new Error("Failed to encode config")}}static decode(e){try{if(!e.startsWith(Zi))throw new Error("Invalid encoded config format");const t=e.substring(13),i=atob(t),o=new Uint8Array(i.length);for(let e=0;e<i.length;e++)o[e]=i.charCodeAt(e);const n=Gi.inflate(o,{to:"string"});return JSON.parse(n)}catch(e){throw console.error("Failed to decode config:",e),new Error("Failed to decode config - invalid or corrupted data")}}static isValidEncoded(e){if(!e||"string"!=typeof e)return!1;if(!e.startsWith(Zi))return!1;try{return this.decode(e),!0}catch(e){return!1}}static getSizeInfo(e){try{const t=this.decode(e),i=JSON.stringify(t),o=new Blob([e]).size/1024,n=new Blob([i]).size/1024,a=Math.round(100*(1-o/n));return{encoded_kb:Math.round(100*o)/100,original_kb:Math.round(100*n)/100,compression_ratio:a}}catch(e){return{encoded_kb:0,original_kb:0,compression_ratio:0}}}static exportToFile(e,t){try{const i=this.encode(e),o=new Blob([i],{type:"text/plain"}),n=URL.createObjectURL(o),a=document.createElement("a");a.href=n,a.download=t||`ultra-card-export-${Date.now()}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n),console.log("✅ Config exported to file")}catch(e){throw console.error("Failed to export config:",e),new Error("Failed to export config to file")}}static async importFromFile(e){return new Promise(((t,i)=>{const o=new FileReader;o.onload=e=>{var o;try{const n=null===(o=e.target)||void 0===o?void 0:o.result;if(!n)return void i(new Error("File is empty"));if(n.startsWith(Zi)){const e=this.decode(n);return console.log("✅ Imported encoded config from file"),void t(e)}try{const e=JSON.parse(n);return console.log("✅ Imported plain JSON config from file"),void t(e)}catch(e){i(new Error("File does not contain valid config data"))}}catch(e){i(e)}},o.onerror=()=>{i(new Error("Failed to read file"))},o.readAsText(e)}))}static async copyToClipboard(e){try{const t=this.encode(e);await navigator.clipboard.writeText(t),console.log("✅ Encoded config copied to clipboard")}catch(e){throw console.error("Failed to copy to clipboard:",e),new Error("Failed to copy config to clipboard")}}static async pasteFromClipboard(){try{const e=await navigator.clipboard.readText();if(!e)throw new Error("Clipboard is empty");if(e.startsWith(Zi)){const t=this.decode(e);return console.log("✅ Pasted encoded config from clipboard"),t}try{const t=JSON.parse(e);return console.log("✅ Pasted plain JSON config from clipboard"),t}catch(e){throw new Error("Clipboard does not contain valid config data")}}catch(e){throw console.error("Failed to paste from clipboard:",e),e}}}Yi.encode.bind(Yi),Yi.decode.bind(Yi),Yi.isValidEncoded.bind(Yi);var Wi=n(456),Xi=n(5672),eo=n(1281),to=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let io=class extends a.WF{render(){var e,t;const i=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en";return a.qy`
      <div class="about-tab">
        <div class="about-logo-container">
          <img
            src="${eo.P2}"
            alt="Ultra Card"
            class="about-logo"
            @error=${e=>{const t=e.currentTarget;t&&t.src!==eo.aR&&(t.src=eo.aR)}}
          />
        </div>

        <div class="about-developed-by">
          ${(0,Wi.kg)("editor.about.developed_by",i,"Developed by")}
          <a href="https://wjddesigns.com" target="_blank" rel="noopener">WJD Designs</a>
        </div>

        <div class="about-description">
          <p>
            ${(0,Wi.kg)("editor.about.desc1",i,"A powerful modular card builder for Home Assistant")}
          </p>
          <p>
            ${(0,Wi.kg)("editor.about.desc2",i,"Create custom layouts with a professional page-builder interface")}
          </p>
          <p>
            ${(0,Wi.kg)("editor.about.desc3",i,"Modular layout system with conditional logic and professional design tools")}
          </p>
        </div>

        <div class="about-buttons">
          <a
            href="https://discord.gg/6xVgHxzzBV"
            target="_blank"
            rel="noopener"
            class="about-button discord"
          >
            <svg viewBox="0 0 24 24" width="24" height="24" class="about-button-icon">
              <path
                fill="currentColor"
                d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0189 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"
              />
            </svg>
            ${(0,Wi.kg)("editor.about.join_discord",i,"Join Our Discord")}
          </a>

          <a
            href="https://github.com/WJDDesigns/Ultra-Card"
            target="_blank"
            rel="noopener"
            class="about-button github"
          >
            <svg viewBox="0 0 24 24" width="24" height="24" class="about-button-icon">
              <path
                fill="currentColor"
                d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
              />
            </svg>
            ${(0,Wi.kg)("editor.about.github_repo",i,"Check Out Our Github")}
          </a>
        </div>

        <div class="support-section">
          <h3>${(0,Wi.kg)("editor.about.support_title",i,"Support Ultra Card")}</h3>
          <p>
            ${(0,Wi.kg)("editor.about.support_desc",i,"Your generous tips fuel the development of amazing features for this card! Without support from users like you, continued innovation wouldn't be possible.")}
          </p>

          <a
            href="https://www.paypal.com/ncp/payment/NLHALFSPA7PUS"
            target="_blank"
            rel="noopener"
            class="about-button paypal"
          >
            <svg viewBox="0 0 24 24" width="24" height="24" class="about-button-icon">
              <path
                fill="currentColor"
                d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a3.35 3.35 0 0 0-.607-.541c-.013.076-.026.175-.041.26-.93 4.778-4.005 7.201-9.138 7.201h-2.19a.563.563 0 0 0-.555.493l-1.07 6.781a.382.382 0 0 0 .378.44h3.613a.896.896 0 0 0 .884-.764l.035-.234.65-4.135.041-.29a.896.896 0 0 1 .884-.763h.557c3.748 0 6.68-1.526 7.534-5.942.356-1.846.174-3.388-.777-4.471z"
              />
            </svg>
            ${(0,Wi.kg)("editor.about.leave_tip",i,"LEAVE A TIP (PAYPAL)")}
          </a>
        </div>

        <div class="version-info">
          <p>${(0,Wi.kg)("editor.about.version",i,"Version")} ${Xi.x}</p>
        </div>
      </div>
    `}};io.styles=a.AH`
    .about-tab {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px;
      max-width: 600px;
      margin: 0 auto;
      color: var(--primary-text-color);
    }

    .about-logo-container {
      margin-bottom: 24px;
    }

    .about-logo {
      max-width: 300px;
      width: 100%;
      height: auto;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }

    .about-developed-by {
      font-size: 1.2em;
      margin-bottom: 24px;
      color: var(--secondary-text-color);
      text-align: center;
    }

    .about-developed-by a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: bold;
    }

    .about-developed-by a:hover {
      text-decoration: underline;
    }

    .about-description {
      text-align: center;
      margin-bottom: 32px;
    }

    .about-description p {
      margin: 8px 0;
      color: var(--secondary-text-color);
      line-height: 1.5;
    }

    .about-buttons {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      max-width: 300px;
      margin-bottom: 32px;
    }

    .about-button {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px 20px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s ease;
      color: white;
      border: none;
      font-size: 14px;
    }

    .about-button svg {
      margin-right: 8px;
      fill: currentColor;
    }

    .about-button.discord {
      background-color: #5865f2;
    }

    .about-button.github {
      background-color: #24292e;
    }

    .about-button.paypal {
      background-color: #0070ba;
    }

    .about-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .support-section {
      text-align: center;
      margin-bottom: 32px;
      padding: 24px;
      background: var(--secondary-background-color);
      border-radius: 12px;
      width: 100%;
      max-width: 500px;
    }

    .support-section h3 {
      color: var(--primary-color);
      margin: 0 0 16px 0;
      font-size: 1.5em;
    }

    .support-section p {
      color: var(--secondary-text-color);
      line-height: 1.5;
      margin-bottom: 20px;
    }

    .version-info {
      text-align: center;
      color: var(--secondary-text-color);
      font-size: 0.9em;
    }

    .version-info p {
      margin: 4px 0;
    }
  `,to([(0,r.MZ)({attribute:!1})],io.prototype,"hass",void 0),io=to([(0,r.EM)("ultra-about-tab")],io),n(6693),n(6768);var oo=n(4513),no=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let ao=class extends a.WF{constructor(){super(...arguments),this._favoriteColors=[],this._editingName="",this._editingColor="",this._showAddForm=!1,this._newColorName="",this._newColorValue="#ffffff"}connectedCallback(){super.connectedCallback(),this._favoritesUnsubscribe=oo.m.subscribe((e=>{this._favoriteColors=e}))}disconnectedCallback(){super.disconnectedCallback(),this._favoritesUnsubscribe&&(this._favoritesUnsubscribe(),this._favoritesUnsubscribe=void 0)}_handleDragStart(e,t){this._draggedItem=t,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.id))}_handleDragOver(e,t){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),this._dragOverIndex=t}_handleDragLeave(){this._dragOverIndex=void 0}_handleDrop(e,t){if(e.preventDefault(),this._dragOverIndex=void 0,!this._draggedItem)return;const i=this._favoriteColors.findIndex((e=>e.id===this._draggedItem.id));if(-1===i||i===t)return;const o=[...this._favoriteColors],[n]=o.splice(i,1);o.splice(t,0,n);const a=o.map((e=>e.id));oo.m.reorderFavorites(a),this._draggedItem=void 0}_startEdit(e){this._editingId=e.id,this._editingName=e.name,this._editingColor=e.color}_cancelEdit(){this._editingId=void 0,this._editingName="",this._editingColor=""}_saveEdit(){this._editingId&&this._editingName.trim()&&(oo.m.updateFavorite(this._editingId,{name:this._editingName.trim(),color:this._editingColor}),this._cancelEdit())}_deleteFavorite(e){confirm("Are you sure you want to delete this favorite color?")&&oo.m.deleteFavorite(e)}_showAddNewForm(){this._showAddForm=!0,this._newColorName="",this._newColorValue="#ffffff"}_cancelAdd(){this._showAddForm=!1,this._newColorName="",this._newColorValue="#ffffff"}_addNewFavorite(){this._newColorName.trim()&&(oo.m.addFavorite(this._newColorName.trim(),this._newColorValue),this._cancelAdd())}_clearAllFavorites(){confirm("Are you sure you want to delete ALL favorite colors? This cannot be undone.")&&oo.m.clearAll()}render(){return a.qy`
      <div class="favorites-manager">
        <div class="manager-header">
          <h3>Favorite Colors</h3>
          <div class="header-actions">
            <button
              class="add-btn"
              @click=${this._showAddNewForm}
              ?disabled=${this._showAddForm}
              title="Add new favorite color"
            >
              <ha-icon icon="mdi:plus"></ha-icon>
              Add Color
            </button>
            ${this._favoriteColors.length>0?a.qy`
                  <button
                    class="clear-btn"
                    @click=${this._clearAllFavorites}
                    title="Clear all favorite colors"
                  >
                    <ha-icon icon="mdi:delete-sweep"></ha-icon>
                    Clear All
                  </button>
                `:""}
          </div>
        </div>

        <div class="manager-description">
          <p>
            Manage your favorite colors that appear in all Ultra Card color pickers. Drag and drop
            to reorder.
          </p>
        </div>

        ${this._showAddForm?a.qy`
              <div class="add-form">
                <h4>Add New Favorite Color</h4>
                <div class="form-row">
                  <div class="form-field">
                    <label>Color Name</label>
                    <input
                      type="text"
                      .value=${this._newColorName}
                      @input=${e=>{this._newColorName=e.target.value}}
                      placeholder="Enter color name..."
                      maxlength="50"
                    />
                  </div>
                  <div class="form-field">
                    <label>Color Value</label>
                    <ultra-color-picker
                      .hass=${this.hass}
                      .value=${this._newColorValue}
                      .defaultValue=${"#ffffff"}
                      @value-changed=${e=>{this._newColorValue=e.detail.value}}
                    ></ultra-color-picker>
                  </div>
                </div>
                <div class="form-actions">
                  <button
                    class="save-btn"
                    @click=${this._addNewFavorite}
                    ?disabled=${!this._newColorName.trim()}
                  >
                    <ha-icon icon="mdi:check"></ha-icon>
                    Add
                  </button>
                  <button class="cancel-btn" @click=${this._cancelAdd}>
                    <ha-icon icon="mdi:close"></ha-icon>
                    Cancel
                  </button>
                </div>
              </div>
            `:""}
        ${0!==this._favoriteColors.length||this._showAddForm?"":a.qy`
              <div class="empty-state">
                <ha-icon icon="mdi:palette-outline"></ha-icon>
                <h4>No Favorite Colors</h4>
                <p>
                  Add your first favorite color to get started. These colors will appear in all
                  Ultra Card color pickers.
                </p>
              </div>
            `}
        ${this._favoriteColors.length>0?a.qy`
              <div class="favorites-list">
                ${this._favoriteColors.map(((e,t)=>a.qy`
                    <div
                      class="favorite-item ${this._dragOverIndex===t?"drag-over":""}"
                      draggable="true"
                      @dragstart=${t=>this._handleDragStart(t,e)}
                      @dragover=${e=>this._handleDragOver(e,t)}
                      @dragleave=${this._handleDragLeave}
                      @drop=${e=>this._handleDrop(e,t)}
                    >
                      <div class="drag-handle">
                        <ha-icon icon="mdi:drag-vertical"></ha-icon>
                      </div>

                      <div class="color-preview" style="background-color: ${e.color}"></div>

                      ${this._editingId===e.id?a.qy`
                            <div class="edit-form">
                              <input
                                type="text"
                                .value=${this._editingName}
                                @input=${e=>{this._editingName=e.target.value}}
                                placeholder="Color name..."
                                maxlength="50"
                              />
                              <ultra-color-picker
                                .hass=${this.hass}
                                .value=${this._editingColor}
                                .defaultValue=${e.color}
                                @value-changed=${e=>{this._editingColor=e.detail.value}}
                              ></ultra-color-picker>
                              <div class="edit-actions">
                                <button
                                  class="save-btn"
                                  @click=${this._saveEdit}
                                  ?disabled=${!this._editingName.trim()}
                                >
                                  <ha-icon icon="mdi:check"></ha-icon>
                                </button>
                                <button class="cancel-btn" @click=${this._cancelEdit}>
                                  <ha-icon icon="mdi:close"></ha-icon>
                                </button>
                              </div>
                            </div>
                          `:a.qy`
                            <div class="favorite-info">
                              <div class="favorite-name">${e.name}</div>
                              <div class="favorite-color-value">${e.color}</div>
                            </div>

                            <div class="favorite-actions">
                              <button
                                class="edit-btn"
                                @click=${()=>this._startEdit(e)}
                                title="Edit color"
                              >
                                <ha-icon icon="mdi:pencil"></ha-icon>
                              </button>
                              <button
                                class="delete-btn"
                                @click=${()=>this._deleteFavorite(e.id)}
                                title="Delete color"
                              >
                                <ha-icon icon="mdi:delete"></ha-icon>
                              </button>
                            </div>
                          `}
                    </div>
                  `))}
              </div>
            `:""}
      </div>
    `}static get styles(){return a.AH`
      .favorites-manager {
        width: 100%;
        max-width: 600px;
      }

      .manager-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
        flex-wrap: wrap;
        gap: 12px;
      }

      .manager-header h3 {
        margin: 0;
        color: var(--primary-text-color);
        font-size: 18px;
        font-weight: 500;
      }

      .header-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }

      .add-btn,
      .clear-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 12px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s ease;
      }

      .add-btn {
        background: var(--primary-color);
        color: white;
      }

      .add-btn:hover:not(:disabled) {
        background: var(--primary-color-dark, var(--primary-color));
        transform: translateY(-1px);
      }

      .add-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .clear-btn {
        background: var(--error-color);
        color: white;
      }

      .clear-btn:hover {
        background: var(--error-color-dark, var(--error-color));
        transform: translateY(-1px);
      }

      .manager-description {
        margin-bottom: 24px;
        padding: 12px 16px;
        background: var(--card-background-color, #f5f5f5);
        border-radius: 8px;
        border-left: 4px solid var(--primary-color);
      }

      .manager-description p {
        margin: 0;
        color: var(--secondary-text-color);
        font-size: 14px;
        line-height: 1.4;
      }

      .add-form {
        background: var(--card-background-color, white);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 24px;
      }

      .add-form h4 {
        margin: 0 0 16px 0;
        color: var(--primary-text-color);
        font-size: 16px;
        font-weight: 500;
      }

      .form-row {
        display: flex;
        gap: 16px;
        margin-bottom: 16px;
        flex-wrap: wrap;
      }

      .form-field {
        flex: 1;
        min-width: 200px;
      }

      .form-field label {
        display: block;
        margin-bottom: 6px;
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      .form-field input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        box-sizing: border-box;
      }

      .form-field input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb, 33, 150, 243), 0.2);
      }

      .form-actions {
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      }

      .save-btn,
      .cancel-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 16px;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.2s ease;
      }

      .save-btn {
        background: var(--success-color, #4caf50);
        color: white;
      }

      .save-btn:hover:not(:disabled) {
        background: var(--success-color-dark, #45a049);
      }

      .save-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .cancel-btn {
        background: var(--secondary-background-color, #f5f5f5);
        color: var(--primary-text-color);
        border: 1px solid var(--divider-color);
      }

      .cancel-btn:hover {
        background: var(--primary-background-color);
        border-color: var(--primary-color);
        color: var(--primary-color);
      }

      .empty-state {
        text-align: center;
        padding: 40px 20px;
        color: var(--secondary-text-color);
      }

      .empty-state ha-icon {
        --mdc-icon-size: 48px;
        margin-bottom: 16px;
        opacity: 0.5;
      }

      .empty-state h4 {
        margin: 0 0 8px 0;
        font-size: 18px;
        font-weight: 500;
      }

      .empty-state p {
        margin: 0;
        font-size: 14px;
        line-height: 1.4;
      }

      .favorites-list {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .favorite-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: var(--card-background-color, white);
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        transition: all 0.2s ease;
        cursor: move;
      }

      .favorite-item:hover {
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .favorite-item.drag-over {
        border-color: var(--primary-color);
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.05);
      }

      .drag-handle {
        color: var(--secondary-text-color);
        cursor: grab;
      }

      .drag-handle:active {
        cursor: grabbing;
      }

      .drag-handle ha-icon {
        --mdc-icon-size: 18px;
      }

      .color-preview {
        width: 32px;
        height: 32px;
        border-radius: 6px;
        border: 2px solid var(--divider-color);
        flex-shrink: 0;
      }

      .favorite-info {
        flex: 1;
        min-width: 0;
      }

      .favorite-name {
        font-weight: 500;
        color: var(--primary-text-color);
        margin-bottom: 2px;
        word-break: break-word;
      }

      .favorite-color-value {
        font-size: 12px;
        color: var(--secondary-text-color);
        font-family: var(--code-font-family, monospace);
      }

      .favorite-actions {
        display: flex;
        gap: 4px;
      }

      .edit-btn,
      .delete-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 6px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        background: transparent;
      }

      .edit-btn {
        color: var(--primary-color);
      }

      .edit-btn:hover {
        background: rgba(var(--primary-color-rgb, 33, 150, 243), 0.1);
      }

      .delete-btn {
        color: var(--error-color);
      }

      .delete-btn:hover {
        background: rgba(var(--error-color-rgb, 244, 67, 54), 0.1);
      }

      .edit-btn ha-icon,
      .delete-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      .edit-form {
        display: flex;
        align-items: center;
        gap: 12px;
        flex: 1;
        min-width: 0;
      }

      .edit-form input {
        flex: 1;
        min-width: 120px;
        padding: 6px 8px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
      }

      .edit-form input:focus {
        outline: none;
        border-color: var(--primary-color);
      }

      .edit-actions {
        display: flex;
        gap: 4px;
      }

      .edit-actions .save-btn,
      .edit-actions .cancel-btn {
        padding: 6px;
        min-width: auto;
      }

      .edit-actions .save-btn ha-icon,
      .edit-actions .cancel-btn ha-icon {
        --mdc-icon-size: 16px;
      }

      @media (max-width: 768px) {
        .manager-header {
          flex-direction: column;
          align-items: stretch;
        }

        .header-actions {
          justify-content: center;
        }

        .form-row {
          flex-direction: column;
        }

        .form-field {
          min-width: auto;
        }

        .favorite-item {
          flex-wrap: wrap;
          gap: 8px;
        }

        .edit-form {
          flex-direction: column;
          align-items: stretch;
          gap: 8px;
        }

        .edit-actions {
          justify-content: center;
        }
      }
    `}};no([(0,r.MZ)({attribute:!1})],ao.prototype,"hass",void 0),no([(0,r.wk)()],ao.prototype,"_favoriteColors",void 0),no([(0,r.wk)()],ao.prototype,"_draggedItem",void 0),no([(0,r.wk)()],ao.prototype,"_dragOverIndex",void 0),no([(0,r.wk)()],ao.prototype,"_editingId",void 0),no([(0,r.wk)()],ao.prototype,"_editingName",void 0),no([(0,r.wk)()],ao.prototype,"_editingColor",void 0),no([(0,r.wk)()],ao.prototype,"_showAddForm",void 0),no([(0,r.wk)()],ao.prototype,"_newColorName",void 0),no([(0,r.wk)()],ao.prototype,"_newColorValue",void 0),ao=no([(0,r.EM)("uc-favorite-colors-manager")],ao),n(8287),n(9956);var ro=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let so=class extends a.WF{constructor(){super(...arguments),this.open=!1,this.cardCount=0,this.viewNames=[],this._selectedMethod=null}_handleMethodSelect(e){this._selectedMethod=e}_handleConfirm(){this._selectedMethod&&(this.dispatchEvent(new CustomEvent("method-selected",{detail:{method:this._selectedMethod},bubbles:!0,composed:!0})),this._close())}_close(){this.dispatchEvent(new CustomEvent("dialog-closed",{bubbles:!0,composed:!0}))}render(){return this.open?a.qy`
      <div class="backdrop" @click="${this._close}">
        <div class="dialog" @click="${e=>e.stopPropagation()}">
          <!-- Header -->
          <div class="header">
            <div class="header-icon">📸</div>
            <div class="header-content">
              <h2>Restore Dashboard Snapshot</h2>
              <p class="header-subtitle">
                ${this.cardCount} Ultra Cards • ${this.viewNames.length} Views
              </p>
            </div>
            <button class="close-btn" @click="${this._close}">✕</button>
          </div>

          <!-- Method Cards -->
          <div class="methods">
            <!-- Smart Replace Method -->
            <div
              class="method-card ${"smart"===this._selectedMethod?"selected":""}"
              @click="${()=>this._handleMethodSelect("smart")}"
            >
              <div class="method-header">
                <input
                  type="radio"
                  name="method"
                  .checked="${"smart"===this._selectedMethod}"
                  @click="${e=>e.stopPropagation()}"
                />
                <div class="method-icon smart">🧠</div>
                <div class="method-title">
                  <h3>Smart Replace</h3>
                  <span class="badge recommended">Recommended</span>
                </div>
              </div>
              <p class="method-description">
                Intelligently matches cards by custom name OR position, replacing them in-place
                without creating duplicates.
              </p>
              <ul class="method-features">
                <li>✅ Safe - no duplicates</li>
                <li>✅ Works with named or unnamed cards</li>
                <li>✅ Preserves non-matching cards</li>
                <li>✅ Can run multiple times</li>
              </ul>
            </div>

            <!-- Clean & Restore Method -->
            <div
              class="method-card ${"clean"===this._selectedMethod?"selected":""}"
              @click="${()=>this._handleMethodSelect("clean")}"
            >
              <div class="method-header">
                <input
                  type="radio"
                  name="method"
                  .checked="${"clean"===this._selectedMethod}"
                  @click="${e=>e.stopPropagation()}"
                />
                <div class="method-icon clean">🧹</div>
                <div class="method-title">
                  <h3>Clean & Restore</h3>
                  <span class="badge nuclear">Nuclear Option</span>
                </div>
              </div>
              <p class="method-description">
                Deletes ALL Ultra Cards first, then restores snapshot cards to their exact original
                positions and order.
              </p>
              <ul class="method-features">
                <li>✅ Fixes duplicated cards</li>
                <li>✅ Exact snapshot state</li>
                <li>✅ Perfect for messed up dashboards</li>
                <li>⚠️ Deletes all Ultra Cards first</li>
              </ul>
            </div>
          </div>

          <!-- Views Preview -->
          <div class="views-preview">
            <div class="preview-title">Affected Views:</div>
            <div class="view-chips">
              ${this.viewNames.map((e=>a.qy`<div class="view-chip">${e}</div>`))}
            </div>
          </div>

          <!-- Footer Actions -->
          <div class="footer">
            <button class="btn btn-secondary" @click="${this._close}">Cancel</button>
            <button
              class="btn btn-primary"
              ?disabled="${!this._selectedMethod}"
              @click="${this._handleConfirm}"
            >
              <span class="btn-icon">🔄</span>
              Restore ${this.cardCount} Cards
            </button>
          </div>
        </div>
      </div>
    `:a.qy``}};so.styles=a.AH`
    :host {
      --primary: #667eea;
      --primary-dark: #5568d3;
      --secondary: #764ba2;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --text-primary: #1a1a1a;
      --text-secondary: #666;
      --bg-primary: #fff;
      --bg-secondary: #f9fafb;
      --border: #e5e7eb;
      --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    * {
      box-sizing: border-box;
    }

    .backdrop {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: ${_.Mu.DIALOG_OVERLAY};
      padding: 20px;
      animation: fadeIn 0.2s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    .dialog {
      background: var(--bg-primary);
      border-radius: 16px;
      box-shadow: var(--shadow);
      max-width: 800px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    /* Header */
    .header {
      display: flex;
      align-items: center;
      gap: 16px;
      padding: 24px;
      border-bottom: 2px solid var(--border);
    }

    .header-icon {
      font-size: 48px;
      line-height: 1;
    }

    .header-content {
      flex: 1;
    }

    .header h2 {
      margin: 0;
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .header-subtitle {
      margin: 4px 0 0 0;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      color: var(--text-secondary);
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .close-btn:hover {
      background: var(--bg-secondary);
      color: var(--text-primary);
    }

    /* Methods */
    .methods {
      padding: 24px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
    }

    @media (max-width: 768px) {
      .methods {
        grid-template-columns: 1fr;
      }
    }

    .method-card {
      border: 2px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.2s;
      background: var(--bg-primary);
    }

    .method-card:hover {
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
    }

    .method-card.selected {
      border-color: var(--primary);
      background: linear-gradient(
        135deg,
        rgba(102, 126, 234, 0.05) 0%,
        rgba(118, 75, 162, 0.05) 100%
      );
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
    }

    .method-header {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-bottom: 12px;
    }

    .method-header input[type='radio'] {
      margin-top: 4px;
      width: 20px;
      height: 20px;
      cursor: pointer;
      accent-color: var(--primary);
    }

    .method-icon {
      font-size: 32px;
      line-height: 1;
    }

    .method-title {
      flex: 1;
    }

    .method-title h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .badge {
      display: inline-block;
      margin-top: 4px;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .badge.recommended {
      background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
      color: white;
    }

    .badge.nuclear {
      background: linear-gradient(135deg, var(--warning) 0%, #d97706 100%);
      color: white;
    }

    .method-description {
      margin: 12px 0;
      font-size: 14px;
      line-height: 1.6;
      color: var(--text-secondary);
    }

    .method-features {
      list-style: none;
      padding: 0;
      margin: 12px 0 0 0;
    }

    .method-features li {
      font-size: 13px;
      padding: 6px 0;
      color: var(--text-secondary);
    }

    /* Views Preview */
    .views-preview {
      padding: 20px 24px;
      background: var(--bg-secondary);
      border-top: 2px solid var(--border);
    }

    .preview-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 12px;
    }

    .view-chips {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .view-chip {
      background: var(--bg-primary);
      border: 1px solid var(--border);
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
      color: var(--text-primary);
    }

    /* Footer */
    .footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: 20px 24px;
      border-top: 2px solid var(--border);
    }

    .btn {
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: var(--bg-secondary);
      color: var(--text-primary);
      border: 2px solid var(--border);
    }

    .btn-secondary:hover:not(:disabled) {
      background: #e5e7eb;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      border: none;
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .btn-icon {
      font-size: 18px;
    }
  `,ro([(0,r.MZ)({type:Boolean})],so.prototype,"open",void 0),ro([(0,r.MZ)({type:Number})],so.prototype,"cardCount",void 0),ro([(0,r.MZ)({type:Array})],so.prototype,"viewNames",void 0),ro([(0,r.wk)()],so.prototype,"_selectedMethod",void 0),so=ro([(0,r.EM)("uc-snapshot-restore-dialog")],so);var lo=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let co=class extends a.WF{constructor(){super(...arguments),this.open=!1,this._activeTab="snapshots",this._snapshots=[],this._cardBackups=[],this._loading=!1,this._error=null,this._expandedSnapshotId=null,this._showRestoreDialog=!1,this._pendingRestoreSnapshot=null}connectedCallback(){super.connectedCallback(),this.open&&this._loadData()}updated(e){e.has("open")&&this.open&&this._loadData()}async _loadData(){console.log(`🔄 Modal _loadData() called - Active tab: ${this._activeTab}`),this._loading=!0,this._error=null;try{"snapshots"===this._activeTab?(console.log("📋 Requesting snapshot list..."),this._snapshots=await A.listSnapshots(30),console.log(`✅ Loaded ${this._snapshots.length} snapshots`)):(console.log("💾 Requesting card backups..."),this._cardBackups=await C.listBackups(30),console.log(`✅ Loaded ${this._cardBackups.length} card backups`))}catch(e){console.error("❌ Failed to load data:",e),this._error=e instanceof Error?e.message:"Failed to load data"}finally{this._loading=!1}}_handleTabChange(e){this._activeTab=e,this._expandedSnapshotId=null,this._loadData()}async _handleRestoreSnapshot(e){this._pendingRestoreSnapshot=e,this._showRestoreDialog=!0}async _handleMethodSelected(e){const{method:t}=e.detail,i=this._pendingRestoreSnapshot;if(t&&i){this._showRestoreDialog=!1,this._pendingRestoreSnapshot=null;try{const e=await A.restoreSnapshot(i.id),o="smart"===t?await this._performSmartRestore(e.snapshot_data):await this._performCleanRestore(e.snapshot_data);alert(`✅ Snapshot Restored Successfully!\n\n${o.restored} Ultra Cards restored\n`+(o.deleted>0?`${o.deleted} cards deleted\n`:"")+(o.skipped>0?`${o.skipped} cards skipped (no match)\n`:"")+"\nRefreshing page..."),this.dispatchEvent(new CustomEvent("snapshot-restored",{detail:{snapshot:i,result:e,stats:o},bubbles:!0,composed:!0})),setTimeout((()=>{window.location.reload()}),2e3)}catch(e){console.error("Failed to restore snapshot:",e),alert(`❌ Snapshot Restore Failed\n\nError: ${e instanceof Error?e.message:"Unknown error"}\n\nYour dashboard has not been modified.`)}}}async _performDashboardRestore(e){console.log("🔄 Starting dashboard restore...");const t=await this._getLovelaceConfig();if(!t)throw new Error("Could not access dashboard configuration");console.log("📋 Current dashboard config loaded");const i=t.views||[];let o=0;const n={};if(e.cards.forEach((e=>{const t=e.view_path||e.view_id;n[t]||(n[t]=[]),n[t].push(e)})),i.forEach(((e,t)=>{const i=e.path||`view-${t}`,a=e.id||i,r=n[i]||n[a]||[];0!==r.length&&(console.log(`  📝 Restoring ${r.length} cards in view: ${e.title||i}`),r.sort(((e,t)=>e.card_index-t.card_index)),"sections"===e.type&&e.sections?e.sections.forEach((e=>{e.cards&&(e.cards=e.cards.map(((e,t)=>{if("custom:ultra-card"===e.type){const e=r.find((e=>e.card_index===t));if(e&&e.config)return console.log(`    ✅ Restored card at index ${t}`),o++,e.config}return e})))})):e.cards&&(e.cards=e.cards.map(((e,t)=>{if("custom:ultra-card"===e.type){const e=r.find((e=>e.card_index===t));if(e&&e.config)return console.log(`    ✅ Restored card at index ${t}`),o++,e.config}return e}))))})),console.log(`✅ Total cards restored: ${o}`),0===o)throw new Error("No Ultra Cards were found to restore. Dashboard may have changed since snapshot was taken.");await this._saveLovelaceConfig(t),console.log("💾 Dashboard configuration saved successfully")}async _performSmartRestore(e){console.log("🧠 Starting SMART REPLACE restore...");const t=await this._getLovelaceConfig();if(!t)throw new Error("Could not access dashboard configuration");const i=t.views||[];let o=0,n=0;const a={},r={};if(e.cards.forEach((e=>{var t;const i=e.view_path||e.view_id,o=e.card_name||(null===(t=e.config)||void 0===t?void 0:t.card_name)||"";if(o&&!o.startsWith("Ultra Card "))a[`${i}::${o}`]=e;else{const t=`${i}::${e.card_index}`;r[t]=e}})),console.log(`📋 Indexed ${Object.keys(a).length} custom-named cards and ${Object.keys(r).length} position-based cards`),i.forEach(((e,t)=>{const i=e.path||`view-${t}`,s=e.id||i;let l=0;"sections"===e.type&&e.sections?e.sections.forEach((t=>{t.cards&&(t.cards=t.cards.map((t=>{if("custom:ultra-card"===t.type){const d=t.card_name||"";let c=null;if(d&&!d.startsWith("Ultra Card ")?(c=a[`${i}::${d}`]||a[`${s}::${d}`],c&&console.log(`  ✅ Name match: "${d}" in ${e.title||i}`)):(c=r[`${i}::${l}`]||r[`${s}::${l}`],c&&console.log(`  ✅ Position match: card ${l} in ${e.title||i}`)),l++,c&&c.config)return o++,c.config;console.log(`  ⏭️ Skipped: "${d}" at position ${l-1} (no match)`),n++}return t})))})):e.cards&&(e.cards=e.cards.map((t=>{if("custom:ultra-card"===t.type){const d=t.card_name||"";let c=null;if(d&&!d.startsWith("Ultra Card ")?(c=a[`${i}::${d}`]||a[`${s}::${d}`],c&&console.log(`  ✅ Name match: "${d}" in ${e.title||i}`)):(c=r[`${i}::${l}`]||r[`${s}::${l}`],c&&console.log(`  ✅ Position match: card ${l} in ${e.title||i}`)),l++,c&&c.config)return o++,c.config;console.log(`  ⏭️ Skipped: "${d}" at position ${l-1} (no match)`),n++}return t})))})),console.log(`✅ Smart restore complete: ${o} replaced, ${n} skipped`),0===o)throw new Error("No matching cards found. Check that your dashboard structure matches.");return await this._saveLovelaceConfig(t),{restored:o,deleted:0,skipped:n}}async _performCleanRestore(e){console.log("🧹 Starting CLEAN & RESTORE...");const t=await this._getLovelaceConfig();if(!t)throw new Error("Could not access dashboard configuration");const i=t.views||[];let o=0,n=0;console.log("🗑️ Step 1: Deleting all existing Ultra Cards..."),i.forEach((e=>{if("sections"===e.type&&e.sections)e.sections.forEach((t=>{if(t.cards){const i=t.cards.length;t.cards=t.cards.filter((e=>"custom:ultra-card"!==e.type||(o++,!1))),console.log(`  🗑️ Deleted ${i-t.cards.length} Ultra Cards from section in ${e.title||"view"}`)}}));else if(e.cards){const t=e.cards.length;e.cards=e.cards.filter((e=>"custom:ultra-card"!==e.type||(o++,!1))),console.log(`  🗑️ Deleted ${t-e.cards.length} Ultra Cards from ${e.title||"view"}`)}})),console.log("📦 Step 2: Restoring snapshot cards...");const a={};return e.cards.forEach((e=>{const t=e.view_path||e.view_id;a[t]||(a[t]=[]),a[t].push(e)})),i.forEach(((e,t)=>{const i=e.path||`view-${t}`,o=e.id||i,r=a[i]||a[o]||[];if(0!==r.length)if(console.log(`  ➕ Restoring ${r.length} cards to ${e.title||i}`),"sections"===e.type&&e.sections)if(r.some((e=>void 0!==e.section_index))){console.log("    ✓ Using section info from snapshot (new format)");const t={};r.forEach((e=>{var i;const o=null!==(i=e.section_index)&&void 0!==i?i:0;t[o]||(t[o]=[]),t[o].push(e)})),Object.keys(t).forEach((t=>{const i=parseInt(t);for(;e.sections.length<=i;)e.sections.push({cards:[]});e.sections[i].cards||(e.sections[i].cards=[])})),Object.entries(t).forEach((([t,i])=>{const o=parseInt(t);i.sort(((e,t)=>{var i,o;return(null!==(i=e.card_index_in_section)&&void 0!==i?i:e.card_index)-(null!==(o=t.card_index_in_section)&&void 0!==o?o:t.card_index)})),i.forEach((t=>{e.sections[o].cards.push(t.config),n++}))}))}else{console.log("    ⚠️ No section info - distributing evenly across sections (old snapshot format)"),r.sort(((e,t)=>e.card_index-t.card_index));const t=e.sections.length,i=Math.ceil(r.length/t);r.forEach(((t,o)=>{const a=Math.floor(o/i);e.sections[a]||(e.sections[a]={cards:[]}),e.sections[a].cards||(e.sections[a].cards=[]),e.sections[a].cards.push(t.config),n++}))}else e.cards||(e.cards=[]),r.sort(((e,t)=>e.card_index-t.card_index)),r.forEach((t=>{e.cards.push(t.config),n++}))})),console.log(`✅ Clean restore complete: ${o} deleted, ${n} restored`),await this._saveLovelaceConfig(t),{restored:n,deleted:o,skipped:0}}async _getLovelaceConfig(){return this.hass.callWS({type:"lovelace/config"})}async _saveLovelaceConfig(e){await this.hass.callWS({type:"lovelace/config/save",config:e})}async _handleRestoreCardBackup(e){if(confirm(`Restore "${e.card_name}"? This will replace your current card configuration.`))try{const t=await C.restoreBackup(e.id);this.dispatchEvent(new CustomEvent("card-backup-restored",{detail:{config:t,backup:e},bubbles:!0,composed:!0})),this._close()}catch(e){console.error("Failed to restore backup:",e),alert(`Failed to restore backup: ${e instanceof Error?e.message:"Unknown error"}`)}}async _handleDeleteSnapshot(e){if("auto"!==e.type){if(confirm(`Delete snapshot from ${e.date}? This cannot be undone.`))try{await A.deleteSnapshot(e.id),this._loadData()}catch(e){console.error("Failed to delete snapshot:",e),alert(`Failed to delete snapshot: ${e instanceof Error?e.message:"Unknown error"}`)}}else alert("Auto snapshots cannot be deleted manually")}async _handleDeleteCardBackup(e){if(confirm(`Delete backup "${e.card_name}"? This cannot be undone.`))try{await C.deleteBackup(e.id),this._loadData()}catch(e){console.error("Failed to delete backup:",e),alert(`Failed to delete backup: ${e instanceof Error?e.message:"Unknown error"}`)}}async _handleRenameCardBackup(e){const t=prompt("Enter new name for backup:",e.card_name);if(t&&t!==e.card_name)try{await C.renameBackup(e.id,t),this._loadData()}catch(e){console.error("Failed to rename backup:",e),alert(`Failed to rename backup: ${e instanceof Error?e.message:"Unknown error"}`)}}async _handleDownloadCardBackup(e){try{const t=await C.getBackup(e.id);C.downloadBackup(t)}catch(e){console.error("Failed to download backup:",e),alert(`Failed to download backup: ${e instanceof Error?e.message:"Unknown error"}`)}}_toggleSnapshotExpand(e){this._expandedSnapshotId=this._expandedSnapshotId===e?null:e}_close(){this.dispatchEvent(new CustomEvent("close-modal",{bubbles:!0,composed:!0}))}_formatDate(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}_formatRelativeTime(e){const t=Date.now()-1e3*e,i=Math.floor(t/6e4),o=Math.floor(i/60),n=Math.floor(o/24);return i<1?"Just now":i<60?`${i}m ago`:o<24?`${o}h ago`:n<7?`${n}d ago`:this._formatDate(new Date(1e3*e).toISOString())}render(){return this.open?a.qy`
      <div class="modal-backdrop" @click="${this._close}">
        <div class="modal-container" @click="${e=>e.stopPropagation()}">
          <div class="modal-header">
            <h2>💾 Backup & Snapshot History</h2>
            <button class="close-btn" @click="${this._close}">✕</button>
          </div>

          <!-- TABS -->
          <div class="tabs">
            <button
              class="tab ${"snapshots"===this._activeTab?"active":""}"
              @click="${()=>this._handleTabChange("snapshots")}"
            >
              📸 Dashboard Snapshots
            </button>
            <button
              class="tab ${"card-backups"===this._activeTab?"active":""}"
              @click="${()=>this._handleTabChange("card-backups")}"
            >
              💾 Manual Card Backups
            </button>
          </div>

          <!-- CONTENT -->
          <div class="modal-body">
            ${this._loading?a.qy`<div class="loading">Loading...</div>`:this._error?a.qy`<div class="error">${this._error}</div>`:"snapshots"===this._activeTab?this._renderSnapshotsTab():this._renderCardBackupsTab()}
          </div>
        </div>
      </div>

      <!-- Restore Method Dialog -->
      ${this._showRestoreDialog&&this._pendingRestoreSnapshot?a.qy`
            <uc-snapshot-restore-dialog
              .open="${this._showRestoreDialog}"
              .cardCount="${this._pendingRestoreSnapshot.card_count}"
              .viewNames="${Object.keys(this._pendingRestoreSnapshot.views_breakdown)}"
              @method-selected="${this._handleMethodSelected}"
              @dialog-closed="${()=>{this._showRestoreDialog=!1,this._pendingRestoreSnapshot=null}}"
            ></uc-snapshot-restore-dialog>
          `:""}
    `:a.qy``}_renderSnapshotsTab(){return 0===this._snapshots.length?a.qy`
        <div class="empty-state">
          <div class="empty-icon">📸</div>
          <p>No dashboard snapshots yet</p>
          <p class="empty-hint">
            Dashboard snapshots capture all Ultra Cards across your entire dashboard
          </p>
        </div>
      `:a.qy`
      <div class="list">${this._snapshots.map((e=>this._renderSnapshotItem(e)))}</div>
    `}_renderSnapshotItem(e){const t=this._expandedSnapshotId===e.id,i=Object.entries(e.views_breakdown);return a.qy`
      <div class="list-item snapshot-item ${t?"expanded":""}">
        <div class="item-header" @click="${()=>this._toggleSnapshotExpand(e.id)}">
          <div class="item-main">
            <div class="item-title">
              <span class="item-icon">${"auto"===e.type?"🤖":"⭐"}</span>
              <span class="item-name">${e.date}</span>
              <span class="badge ${e.type}">${e.type}</span>
            </div>
            <div class="item-meta">
              <span class="meta-item">📦 ${e.card_count} cards</span>
              <span class="meta-item">📏 ${e.size_kb} KB</span>
              <span class="meta-item"
                >🕐 ${this._formatRelativeTime(e.created_timestamp)}</span
              >
            </div>
          </div>
          <div class="expand-icon">${t?"▼":"▶"}</div>
        </div>

        ${t?a.qy`
              <div class="item-details">
                <div class="details-section">
                  <h4>Views Breakdown:</h4>
                  <ul class="views-list">
                    ${i.map((([e,t])=>a.qy`
                        <li><strong>${e}:</strong> ${t} card${t>1?"s":""}</li>
                      `))}
                  </ul>
                </div>

                <div class="item-actions">
                  <button
                    class="btn btn-primary"
                    @click="${()=>this._handleRestoreSnapshot(e)}"
                  >
                    🔄 Restore All
                  </button>
                  ${"manual"===e.type?a.qy`
                        <button
                          class="btn btn-danger"
                          @click="${()=>this._handleDeleteSnapshot(e)}"
                        >
                          🗑️ Delete
                        </button>
                      `:""}
                </div>
              </div>
            `:""}
      </div>
    `}_renderCardBackupsTab(){return 0===this._cardBackups.length?a.qy`
        <div class="empty-state">
          <div class="empty-icon">💾</div>
          <p>No card backups yet</p>
          <p class="empty-hint">Card backups save individual Ultra Card configurations</p>
        </div>
      `:a.qy`
      <div class="list">${this._cardBackups.map((e=>this._renderCardBackupItem(e)))}</div>
      <div class="backup-info">
        <p>
          💡 You can have up to 30 card backups. Oldest backups are automatically removed when limit
          is reached.
        </p>
      </div>
    `}_renderCardBackupItem(e){return a.qy`
      <div class="list-item">
        <div class="item-main">
          <div class="item-title">
            <span class="item-icon">💾</span>
            <span class="item-name">${e.card_name}</span>
          </div>
          <div class="item-meta">
            <span class="meta-item">${e.stats.row_count} rows</span>
            <span class="meta-item">${e.stats.column_count} cols</span>
            <span class="meta-item">${e.stats.module_count} modules</span>
            <span class="meta-item">📏 ${e.size_kb} KB</span>
            <span class="meta-item">🕐 ${this._formatRelativeTime(e.created_timestamp)}</span>
          </div>
        </div>

        <div class="item-actions">
          <button class="btn btn-primary" @click="${()=>this._handleRestoreCardBackup(e)}">
            🔄 Restore
          </button>
          <button class="btn btn-secondary" @click="${()=>this._handleRenameCardBackup(e)}">
            ✏️ Rename
          </button>
          <button
            class="btn btn-secondary"
            @click="${()=>this._handleDownloadCardBackup(e)}"
          >
            ⬇️ Download
          </button>
          <button class="btn btn-danger" @click="${()=>this._handleDeleteCardBackup(e)}">
            🗑️ Delete
          </button>
        </div>
      </div>
    `}};co.styles=a.AH`
    :host {
      display: block;
    }

    .modal-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: ${_.Mu.DIALOG_OVERLAY};
      padding: 20px;
    }

    .modal-container {
      background: var(--card-background-color, #fff);
      border-radius: 12px;
      max-width: 900px;
      width: 100%;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 2px solid var(--divider-color, #e0e0e0);
    }

    .modal-header h2 {
      margin: 0;
      font-size: 22px;
      font-weight: 600;
      color: var(--primary-text-color, #000);
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      padding: 4px 8px;
      color: var(--secondary-text-color, #666);
      transition: color 0.2s;
    }

    .close-btn:hover {
      color: var(--primary-color, #03a9f4);
    }

    /* TABS */
    .tabs {
      display: flex;
      border-bottom: 2px solid var(--divider-color, #e0e0e0);
      padding: 0 24px;
      gap: 8px;
    }

    .tab {
      background: none;
      border: none;
      padding: 12px 20px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      color: var(--secondary-text-color, #666);
      border-bottom: 3px solid transparent;
      transition: all 0.2s;
    }

    .tab:hover {
      color: var(--primary-text-color, #000);
    }

    .tab.active {
      color: var(--primary-color, #03a9f4);
      border-bottom-color: var(--primary-color, #03a9f4);
    }

    /* BODY */
    .modal-body {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
    }

    .loading,
    .error {
      text-align: center;
      padding: 40px;
      color: var(--secondary-text-color, #666);
    }

    .error {
      color: var(--error-color, #f44336);
    }

    .empty-state {
      text-align: center;
      padding: 60px 20px;
    }

    .empty-icon {
      font-size: 64px;
      margin-bottom: 16px;
      opacity: 0.3;
    }

    .empty-state p {
      margin: 8px 0;
      color: var(--secondary-text-color, #666);
    }

    .empty-hint {
      font-size: 13px;
      opacity: 0.7;
    }

    /* LIST */
    .list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .list-item {
      background: var(--secondary-background-color, #f5f5f5);
      border-radius: 8px;
      padding: 16px;
      transition: all 0.2s;
      border: 2px solid transparent;
    }

    .list-item:hover {
      border-color: var(--primary-color, #03a9f4);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .snapshot-item .item-header {
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .item-main {
      flex: 1;
    }

    .item-title {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 15px;
      font-weight: 600;
      color: var(--primary-text-color, #000);
    }

    .item-icon {
      font-size: 18px;
    }

    .item-name {
      flex: 1;
    }

    .badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 12px;
      font-weight: 600;
      text-transform: uppercase;
      margin-right: 12px;
    }

    .badge.auto {
      background: #e0e0e0;
      color: #666;
    }

    .badge.manual {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }

    .item-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      font-size: 13px;
      color: var(--secondary-text-color, #666);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .expand-icon {
      font-size: 12px;
      color: var(--secondary-text-color, #666);
      transition: transform 0.2s;
    }

    .snapshot-item.expanded .expand-icon {
      transform: rotate(0deg);
    }

    /* DETAILS */
    .item-details {
      margin-top: 16px;
      padding-top: 16px;
      border-top: 1px solid var(--divider-color, #e0e0e0);
    }

    .details-section {
      margin-bottom: 16px;
    }

    .details-section h4 {
      margin: 0 0 8px 0;
      font-size: 14px;
      font-weight: 600;
      color: var(--primary-text-color, #000);
    }

    .views-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .views-list li {
      padding: 6px 0;
      font-size: 13px;
      color: var(--secondary-text-color, #666);
    }

    /* ACTIONS */
    .item-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: var(--primary-color, #03a9f4);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(3, 169, 244, 0.3);
    }

    .btn-secondary {
      background: var(--secondary-background-color, #e0e0e0);
      color: var(--primary-text-color, #000);
    }

    .btn-secondary:hover {
      background: var(--divider-color, #ccc);
    }

    .btn-danger {
      background: var(--error-color, #f44336);
      color: white;
    }

    .btn-danger:hover {
      background: #d32f2f;
    }

    .backup-info {
      margin-top: 16px;
      padding: 12px;
      background: var(--secondary-background-color, #f5f5f5);
      border-radius: 6px;
      font-size: 13px;
      color: var(--secondary-text-color, #666);
    }

    .backup-info p {
      margin: 0;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .modal-backdrop {
        padding: 0;
      }

      .modal-container {
        max-height: 100vh;
        border-radius: 0;
      }

      .item-actions {
        width: 100%;
      }

      .btn {
        flex: 1;
        min-width: 0;
      }
    }
  `,lo([(0,r.MZ)({attribute:!1})],co.prototype,"hass",void 0),lo([(0,r.MZ)({attribute:!1})],co.prototype,"subscription",void 0),lo([(0,r.MZ)({type:Boolean})],co.prototype,"open",void 0),lo([(0,r.wk)()],co.prototype,"_activeTab",void 0),lo([(0,r.wk)()],co.prototype,"_snapshots",void 0),lo([(0,r.wk)()],co.prototype,"_cardBackups",void 0),lo([(0,r.wk)()],co.prototype,"_loading",void 0),lo([(0,r.wk)()],co.prototype,"_error",void 0),lo([(0,r.wk)()],co.prototype,"_expandedSnapshotId",void 0),lo([(0,r.wk)()],co.prototype,"_showRestoreDialog",void 0),lo([(0,r.wk)()],co.prototype,"_pendingRestoreSnapshot",void 0),co=lo([(0,r.EM)("uc-snapshot-history-modal")],co);var po=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let uo=class extends a.WF{constructor(){super(...arguments),this.open=!1,this._settings={enabled:!0,time:"03:00",timezone:"UTC"},this._loading=!1,this._saving=!1,this._error=null}connectedCallback(){super.connectedCallback(),this.open&&this._loadSettings()}updated(e){e.has("open")&&this.open&&this._loadSettings()}async _loadSettings(){this._loading=!0,this._error=null;try{this._settings=await A.getSettings()}catch(e){console.error("Failed to load snapshot settings:",e),this._error=e instanceof Error?e.message:"Failed to load settings"}finally{this._loading=!1}}async _handleSave(){this._saving=!0,this._error=null;try{await A.updateSettings(this._settings),this.dispatchEvent(new CustomEvent("settings-saved",{detail:{settings:this._settings},bubbles:!0,composed:!0})),this._close()}catch(e){console.error("Failed to save settings:",e),this._error=e instanceof Error?e.message:"Failed to save settings"}finally{this._saving=!1}}_handleEnabledToggle(e){const t=e.target;this._settings=Object.assign(Object.assign({},this._settings),{enabled:t.checked})}_handleTimeChange(e){const t=e.target;this._settings=Object.assign(Object.assign({},this._settings),{time:t.value})}_handleTimezoneChange(e){const t=e.target;this._settings=Object.assign(Object.assign({},this._settings),{timezone:t.value})}_close(){this.dispatchEvent(new CustomEvent("dialog-closed",{bubbles:!0,composed:!0}))}_getNextSnapshotTime(){if(!this._settings.enabled)return"Disabled";const[e,t]=this._settings.time.split(":").map(Number),i=new Date,o=new Date(i);return o.setHours(e,t,0,0),o<=i&&o.setDate(o.getDate()+1),`${o.getDate()===i.getDate()?"Today":"Tomorrow"} at ${o.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`}render(){return this.open?a.qy`
      <div class="modal-backdrop" @click="${this._close}">
        <div class="modal-container" @click="${e=>e.stopPropagation()}">
          <div class="modal-header">
            <h2>⚙️ Snapshot Settings</h2>
            <button class="close-btn" @click="${this._close}">✕</button>
          </div>

          <div class="modal-body">
            ${this._loading?a.qy`<div class="loading">Loading settings...</div>`:this._error?a.qy`<div class="error">${this._error}</div>`:a.qy`
                    <div class="settings-form">
                      <!-- ENABLE/DISABLE AUTO SNAPSHOTS -->
                      <div class="form-group">
                        <label class="toggle-label">
                          <input
                            type="checkbox"
                            .checked="${this._settings.enabled}"
                            @change="${this._handleEnabledToggle}"
                          />
                          <span class="toggle-text">
                            <strong>Enable Daily Auto-Snapshots</strong>
                            <p class="help-text">
                              Automatically backup all Ultra Cards in your dashboard every day
                            </p>
                          </span>
                        </label>
                      </div>

                      ${this._settings.enabled?a.qy`
                            <!-- SNAPSHOT TIME -->
                            <div class="form-group">
                              <label for="snapshot-time">
                                <strong>Snapshot Time</strong>
                                <p class="help-text">
                                  What time should snapshots be created? (24-hour format)
                                </p>
                              </label>
                              <input
                                type="time"
                                id="snapshot-time"
                                .value="${this._settings.time}"
                                @change="${this._handleTimeChange}"
                              />
                            </div>

                            <!-- TIMEZONE -->
                            <div class="form-group">
                              <label for="timezone">
                                <strong>Timezone</strong>
                                <p class="help-text">Snapshot time will use this timezone</p>
                              </label>
                              <select
                                id="timezone"
                                .value="${this._settings.timezone}"
                                @change="${this._handleTimezoneChange}"
                              >
                                <option value="UTC">UTC</option>
                                <option value="America/New_York">Eastern Time (ET)</option>
                                <option value="America/Chicago">Central Time (CT)</option>
                                <option value="America/Denver">Mountain Time (MT)</option>
                                <option value="America/Los_Angeles">Pacific Time (PT)</option>
                                <option value="Europe/London">London</option>
                                <option value="Europe/Paris">Paris</option>
                                <option value="Europe/Berlin">Berlin</option>
                                <option value="Asia/Tokyo">Tokyo</option>
                                <option value="Asia/Shanghai">Shanghai</option>
                                <option value="Australia/Sydney">Sydney</option>
                              </select>
                            </div>

                            <!-- NEXT SNAPSHOT PREVIEW -->
                            <div class="info-box">
                              <div class="info-icon">📅</div>
                              <div class="info-content">
                                <strong>Next Snapshot:</strong>
                                <p>${this._getNextSnapshotTime()}</p>
                              </div>
                            </div>
                          `:a.qy`
                            <div class="info-box disabled">
                              <div class="info-icon">ℹ️</div>
                              <div class="info-content">
                                <p>
                                  Auto-snapshots are currently disabled. You can still create manual
                                  snapshots anytime.
                                </p>
                              </div>
                            </div>
                          `}

                      <!-- RETENTION INFO -->
                      <div class="info-box">
                        <div class="info-icon">💾</div>
                        <div class="info-content">
                          <strong>Storage Policy:</strong>
                          <ul>
                            <li>Auto-snapshots are kept for <strong>30 days</strong></li>
                            <li>Older snapshots are automatically deleted</li>
                            <li>Manual snapshots are never automatically deleted</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  `}
          </div>

          <div class="modal-footer">
            <button class="btn btn-secondary" @click="${this._close}" ?disabled="${this._saving}">
              Cancel
            </button>
            <button
              class="btn btn-primary"
              @click="${this._handleSave}"
              ?disabled="${this._loading||this._saving}"
            >
              ${this._saving?"Saving...":"💾 Save Settings"}
            </button>
          </div>
        </div>
      </div>
    `:a.qy``}};uo.styles=a.AH`
    :host {
      display: block;
    }

    .modal-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: ${_.Mu.DIALOG_OVERLAY};
      padding: 20px;
    }

    .modal-container {
      background: var(--card-background-color, #fff);
      border-radius: 12px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      border-bottom: 2px solid var(--divider-color, #e0e0e0);
    }

    .modal-header h2 {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
      color: var(--primary-text-color, #000);
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      padding: 4px 8px;
      color: var(--secondary-text-color, #666);
      transition: color 0.2s;
    }

    .close-btn:hover {
      color: var(--primary-color, #03a9f4);
    }

    .modal-body {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
    }

    .loading,
    .error {
      text-align: center;
      padding: 40px;
      color: var(--secondary-text-color, #666);
    }

    .error {
      color: var(--error-color, #f44336);
    }

    /* FORM */
    .settings-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .form-group label {
      font-size: 14px;
      color: var(--primary-text-color, #000);
    }

    .help-text {
      font-size: 12px;
      color: var(--secondary-text-color, #666);
      margin: 4px 0 0 0;
    }

    .toggle-label {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      cursor: pointer;
      padding: 16px;
      background: var(--secondary-background-color, #f5f5f5);
      border-radius: 8px;
      transition: all 0.2s;
    }

    .toggle-label:hover {
      background: var(--divider-color, #e0e0e0);
    }

    .toggle-label input[type='checkbox'] {
      width: 20px;
      height: 20px;
      cursor: pointer;
      margin-top: 2px;
    }

    .toggle-text {
      flex: 1;
    }

    .toggle-text strong {
      display: block;
      margin-bottom: 4px;
    }

    input[type='time'],
    select {
      width: 100%;
      padding: 10px 12px;
      border: 2px solid var(--divider-color, #e0e0e0);
      border-radius: 6px;
      font-size: 14px;
      background: var(--card-background-color, #fff);
      color: var(--primary-text-color, #000);
      transition: border-color 0.2s;
    }

    input[type='time']:focus,
    select:focus {
      outline: none;
      border-color: var(--primary-color, #03a9f4);
    }

    /* INFO BOX */
    .info-box {
      display: flex;
      gap: 12px;
      padding: 16px;
      background: var(--secondary-background-color, #f5f5f5);
      border-radius: 8px;
      border-left: 4px solid var(--primary-color, #03a9f4);
    }

    .info-box.disabled {
      border-left-color: var(--secondary-text-color, #666);
    }

    .info-icon {
      font-size: 24px;
    }

    .info-content {
      flex: 1;
    }

    .info-content strong {
      display: block;
      margin-bottom: 4px;
      color: var(--primary-text-color, #000);
    }

    .info-content p {
      margin: 4px 0 0 0;
      font-size: 13px;
      color: var(--secondary-text-color, #666);
    }

    .info-content ul {
      margin: 8px 0 0 0;
      padding-left: 20px;
      font-size: 13px;
      color: var(--secondary-text-color, #666);
    }

    .info-content li {
      margin: 4px 0;
    }

    /* FOOTER */
    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: 16px 24px;
      border-top: 2px solid var(--divider-color, #e0e0e0);
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: var(--secondary-background-color, #e0e0e0);
      color: var(--primary-text-color, #000);
    }

    .btn-secondary:hover:not(:disabled) {
      background: var(--divider-color, #ccc);
    }

    .btn-primary {
      background: var(--primary-color, #03a9f4);
      color: white;
    }

    .btn-primary:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(3, 169, 244, 0.3);
    }

    @media (max-width: 768px) {
      .modal-backdrop {
        padding: 0;
      }

      .modal-container {
        max-height: 100vh;
        border-radius: 0;
      }
    }
  `,po([(0,r.MZ)({type:Boolean})],uo.prototype,"open",void 0),po([(0,r.wk)()],uo.prototype,"_settings",void 0),po([(0,r.wk)()],uo.prototype,"_loading",void 0),po([(0,r.wk)()],uo.prototype,"_saving",void 0),po([(0,r.wk)()],uo.prototype,"_error",void 0),uo=po([(0,r.EM)("uc-snapshot-settings-dialog")],uo);var ho=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let go=class extends a.WF{constructor(){super(...arguments),this.open=!1,this._backupName="",this._isCreating=!1,this._error=""}render(){var e,t,i,o;if(!this.open)return a.qy``;const n="en",r=this.config.card_name||(0,Wi.kg)("editor.ultra_card_pro.card_name_placeholder",n,"My Ultra Card"),s=`${r} - ${(new Date).toLocaleString()}`,l=(null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows)||void 0===t?void 0:t.length)||0;let d=0,c=0;return null===(o=null===(i=this.config.layout)||void 0===i?void 0:i.rows)||void 0===o||o.forEach((e=>{var t,i;const o=(null===(t=e.columns)||void 0===t?void 0:t.length)||0;d+=o,null===(i=e.columns)||void 0===i||i.forEach((e=>{var t;c+=(null===(t=e.modules)||void 0===t?void 0:t.length)||0}))})),a.qy`
      <div class="dialog-overlay" @click="${this._handleOverlayClick}">
        <div class="dialog" @click="${e=>e.stopPropagation()}">
          <div class="dialog-header">
            <h3 class="dialog-title">
              <ha-icon icon="mdi:bookmark-plus"></ha-icon>
              ${(0,Wi.kg)("editor.ultra_card_pro.manual_backup_title",n,"Name Your Backup")}
            </h3>
            <button class="close-btn" @click="${this._handleClose}">
              <ha-icon icon="mdi:close"></ha-icon>
            </button>
          </div>

          <div class="dialog-content">
            ${this._error?a.qy`
                  <div class="error-message">
                    <ha-icon icon="mdi:alert-circle"></ha-icon>
                    ${this._error}
                  </div>
                `:""}

            <div class="card-info">
              <div class="card-info-title">
                <ha-icon icon="mdi:card-text"></ha-icon>
                Current Card: ${r}
              </div>
              <div class="card-stats">
                <div class="stat-item">
                  <ha-icon icon="mdi:view-grid"></ha-icon>
                  ${l} rows
                </div>
                <div class="stat-item">
                  <ha-icon icon="mdi:view-column"></ha-icon>
                  ${d} columns
                </div>
                <div class="stat-item">
                  <ha-icon icon="mdi:package-variant"></ha-icon>
                  ${c} modules
                </div>
              </div>
            </div>

            <div class="form-field">
              <label for="backup-name">Backup Name</label>
              <div class="description">
                ${(0,Wi.kg)("editor.ultra_card_pro.manual_backup_desc",n,"Create a manual backup that will be stored alongside backups from all your other Ultra Cards (max 30 total)")}
              </div>
              <ha-textfield
                id="backup-name"
                .value="${this._backupName||s}"
                @input="${this._handleNameInput}"
                placeholder="${s}"
                maxlength="100"
              ></ha-textfield>
            </div>
          </div>

          <div class="dialog-footer">
            <button
              class="cancel-btn"
              @click="${this._handleClose}"
              ?disabled="${this._isCreating}"
            >
              Cancel
            </button>
            <button
              class="create-btn"
              @click="${this._handleCreate}"
              ?disabled="${this._isCreating}"
            >
              ${this._isCreating?a.qy`
                    <span class="creating">
                      <ha-circular-progress active size="small"></ha-circular-progress>
                      Creating...
                    </span>
                  `:a.qy`
                    <ha-icon icon="mdi:check"></ha-icon>
                    Create Backup
                  `}
            </button>
          </div>
        </div>
      </div>
    `}_handleNameInput(e){const t=e.target;this._backupName=t.value}_handleOverlayClick(){this._isCreating||this._handleClose()}_handleClose(){this.open=!1,this._backupName="",this._error="",this.dispatchEvent(new CustomEvent("dialog-closed"))}async _handleCreate(){const e=this.config.card_name||(0,Wi.kg)("editor.ultra_card_pro.card_name_placeholder","en","My Ultra Card"),t=this._backupName||`${e} - ${(new Date).toLocaleString()}`;if(t.trim()){this._isCreating=!0,this._error="";try{await C.createBackup(this.config,t),this.dispatchEvent(new CustomEvent("backup-created",{detail:{name:t},bubbles:!0,composed:!0})),this._handleClose()}catch(e){console.error("Failed to create backup:",e),this._error=e instanceof Error?e.message:"Failed to create backup"}finally{this._isCreating=!1}}else this._error="Please enter a backup name"}};go.styles=a.AH`
    :host {
      display: block;
    }

    .dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: ${_.Mu.DIALOG_OVERLAY};
      backdrop-filter: blur(4px);
    }

    .dialog {
      background: var(--card-background-color, #fff);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .dialog-header {
      padding: 24px;
      border-bottom: 1px solid var(--divider-color, #e0e0e0);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(135deg, var(--primary-color, #03a9f4) 0%, #00796b 100%);
      color: white;
    }

    .dialog-title {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 0;
      font-size: 20px;
      font-weight: 600;
    }

    .dialog-title ha-icon {
      --mdc-icon-size: 28px;
    }

    .close-btn {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      border-radius: 50%;
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      transition: background 0.2s;
    }

    .close-btn:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    .dialog-content {
      padding: 24px;
      overflow-y: auto;
      flex: 1;
    }

    .form-field {
      margin-bottom: 24px;
    }

    .form-field label {
      display: block;
      font-weight: 500;
      margin-bottom: 8px;
      color: var(--primary-text-color, #000);
    }

    .form-field .description {
      font-size: 13px;
      color: var(--secondary-text-color, #666);
      margin-bottom: 12px;
      line-height: 1.5;
    }

    .form-field ha-textfield {
      width: 100%;
    }

    .card-info {
      background: var(--secondary-background-color, #f5f5f5);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 24px;
    }

    .card-info-title {
      font-weight: 600;
      margin-bottom: 12px;
      color: var(--primary-text-color, #000);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
      gap: 12px;
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .stat-item ha-icon {
      --mdc-icon-size: 18px;
      color: var(--primary-color, #03a9f4);
    }

    .error-message {
      background: #ffebee;
      color: #c62828;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .dialog-footer {
      padding: 16px 24px;
      border-top: 1px solid var(--divider-color, #e0e0e0);
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    .dialog-footer button {
      padding: 10px 20px;
      border-radius: 8px;
      border: none;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      font-size: 14px;
    }

    .cancel-btn {
      background: transparent;
      color: var(--primary-text-color, #000);
    }

    .cancel-btn:hover {
      background: var(--secondary-background-color, #f5f5f5);
    }

    .create-btn {
      background: linear-gradient(135deg, var(--primary-color, #03a9f4) 0%, #00796b 100%);
      color: white;
      box-shadow: 0 2px 8px rgba(3, 169, 244, 0.3);
    }

    .create-btn:hover:not(:disabled) {
      box-shadow: 0 4px 12px rgba(3, 169, 244, 0.4);
      transform: translateY(-1px);
    }

    .create-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .creating {
      display: flex;
      align-items: center;
      gap: 8px;
    }
  `,ho([(0,r.MZ)({attribute:!1})],go.prototype,"config",void 0),ho([(0,r.MZ)({type:Boolean})],go.prototype,"open",void 0),ho([(0,r.wk)()],go.prototype,"_backupName",void 0),ho([(0,r.wk)()],go.prototype,"_isCreating",void 0),ho([(0,r.wk)()],go.prototype,"_error",void 0),go=ho([(0,r.EM)("uc-manual-backup-dialog")],go);var mo=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let fo=class extends a.WF{constructor(){super(...arguments),this._activeTab="layout",this._isFullScreen=!1,this._isMobile=!1,this._cloudUser=null,this._syncStatus=null,this._backupStatus=null,this._showLoginForm=!1,this._loginError="",this._isLoggingIn=!1,this._showBackupHistory=!1,this._showCreateSnapshot=!1,this._showManualBackup=!1,this._showSnapshotSettings=!1,this._snapshotSchedulerStatus=null,this._newerBackupAvailable=null,this._showSyncNotification=!1,this._isCreatingManualSnapshot=!1,this._moduleStylesInjected=!1,this._hasInitializedAuth=!1}setConfig(e){this.config=e||{type:"custom:ultra-card",layout:{rows:[]}}}willUpdate(e){if(super.willUpdate(e),e.has("hass")&&this.hass){const e=f.x.checkIntegrationAuth(this.hass);e&&!f.x.getCurrentUser()&&(console.log("✅ Integration auth detected, updating PRO status"),this._cloudUser=e)}}connectedCallback(){super.connectedCallback();try{window.__UC_PREVIEW_SUPPRESS_LOCKS=!0,window.dispatchEvent(new CustomEvent("uc-preview-suppress-locks-changed",{detail:{suppressed:!0}}))}catch(e){}this.addEventListener("config-changed",this._handleConfigChanged),this.addEventListener("keydown",this._handleKeyDown),this._checkMobileDevice(),this._resizeListener=this._checkMobileDevice.bind(this),window.addEventListener("resize",this._resizeListener),this._injectModuleStyles(),h.k.injectHoverEffectStyles(this.shadowRoot),this._updateHoverEffectStyles(),this._setupCloudSyncListeners()}disconnectedCallback(){super.disconnectedCallback();try{window.__UC_PREVIEW_SUPPRESS_LOCKS=!1,window.dispatchEvent(new CustomEvent("uc-preview-suppress-locks-changed",{detail:{suppressed:!1}}))}catch(e){}this.removeEventListener("config-changed",this._handleConfigChanged),this.removeEventListener("keydown",this._handleKeyDown),h.k.removeHoverEffectStyles(this.shadowRoot),this._resizeListener&&window.removeEventListener("resize",this._resizeListener),document.body.classList.remove("ultra-card-fullscreen"),this._cleanupCloudSyncListeners()}_checkMobileDevice(){const e=window.innerWidth<=768,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),i=this._isMobile;this._isMobile=e||t,this._isMobile&&!i&&this._isFullScreen&&this._toggleFullScreen()}_handleConfigChanged(e){if(e.stopPropagation(),e.detail&&e.detail.config&&(this.config=e.detail.config,this._updateHoverEffectStyles(),!e.detail.isInternal)){const t=new CustomEvent("config-changed",{detail:{config:e.detail.config,isInternal:!0},bubbles:!0,composed:!0});this.dispatchEvent(t)}}_handleKeyDown(e){"Escape"===e.key&&this._isFullScreen&&(e.preventDefault(),this._toggleFullScreen())}_updateConfig(e){const t=Object.assign(Object.assign({},this.config),e);this._configDebounceTimeout&&clearTimeout(this._configDebounceTimeout),this._configDebounceTimeout=window.setTimeout((()=>{const e=u.validateAndCorrectConfig(t);if(!e.valid){const e=new CustomEvent("config-changed",{detail:{config:t,isInternal:!0},bubbles:!0,composed:!0});return void this.dispatchEvent(e)}const i=u.validateUniqueModuleIds(e.correctedConfig);let o=e.correctedConfig;i.valid||(o=u.fixDuplicateModuleIds(o));const n=new CustomEvent("config-changed",{detail:{config:o,isInternal:!0},bubbles:!0,composed:!0});this.dispatchEvent(n),f.x.isAuthenticated()&&S.autoSave(o)}),100)}_toggleFullScreen(){this._isFullScreen=!this._isFullScreen,this._isFullScreen?(document.body.classList.add("ultra-card-fullscreen"),"layout"!==this._activeTab&&(this._activeTab="layout")):document.body.classList.remove("ultra-card-fullscreen")}render(){var e;if(!this.hass||!this.config)return a.qy`<div>Loading...</div>`;const t=(null===(e=this.hass.locale)||void 0===e?void 0:e.language)||"en";return a.qy`
      <div class="card-config ${this._isFullScreen?"fullscreen":""}">
        <div class="tabs">
          <button
            class="tab ${"layout"===this._activeTab?"active":""}"
            @click=${()=>this._activeTab="layout"}
          >
            ${this._isFullScreen?"Ultra Card Layout Builder":(0,Wi.kg)("editor.tabs.layout",t,"Layout Builder")}
          </button>
          ${this._isFullScreen?"":a.qy`
                <button
                  class="tab ${"settings"===this._activeTab?"active":""}"
                  @click=${()=>this._activeTab="settings"}
                >
                  ${(0,Wi.kg)("editor.tabs.settings",t,"Settings")}
                </button>
                <button
                  class="tab ${"pro"===this._activeTab?"active":""}"
                  @click=${()=>this._activeTab="pro"}
                >
                  ${(0,Wi.kg)("editor.tabs.pro",t,"PRO")}
                </button>
                <button
                  class="tab ${"about"===this._activeTab?"active":""}"
                  @click=${()=>this._activeTab="about"}
                >
                  ${(0,Wi.kg)("editor.tabs.about",t,"About")}
                </button>
              `}
          ${this._isMobile?"":a.qy`
                <button
                  class="fullscreen-toggle"
                  @click=${this._toggleFullScreen}
                  title=${this._isFullScreen?(0,Wi.kg)("editor.tooltips.return_dashboard",t,"Return to Dashboard"):(0,Wi.kg)("editor.tooltips.enter_fullscreen",t,"Enter Full Screen")}
                >
                  ${this._isFullScreen?a.qy`
                        <svg viewBox="0 0 24 24" class="arrow-icon">
                          <path d="M15.41,7.41L14,6L8,12L14,18L15.41,16.59L10.83,12L15.41,7.41Z" />
                        </svg>
                        <span class="dashboard-text"
                          >${(0,Wi.kg)("editor.tooltips.dashboard",t,"Dashboard")}</span
                        >
                      `:a.qy`
                        <svg viewBox="0 0 24 24" class="arrow-icon">
                          <path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
                        </svg>
                      `}
                </button>
              `}
        </div>

        <div class="tab-content">
          ${"layout"===this._activeTab?a.qy`<ultra-layout-tab
                .hass=${this.hass}
                .config=${this.config}
                .isFullScreen=${this._isFullScreen}
                .cloudUser=${this._cloudUser}
                @switch-tab=${e=>this._activeTab=e.detail.tab}
              ></ultra-layout-tab>`:"settings"===this._activeTab?this._renderSettingsTab():"pro"===this._activeTab?this._renderProTab():a.qy`<ultra-about-tab .hass=${this.hass}></ultra-about-tab>`}
        </div>
      </div>
    `}_renderSettingsTab(){var e,t,i,o,n,r,s,l,d,c;const p=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en",u="var(--card-background-color)";return a.qy`
      <div class="settings-tab">
        <div class="settings-header">
          <h3>${(0,Wi.kg)("editor.settings.title",p,"Card Settings")}</h3>
          <p>
            ${(0,Wi.kg)("editor.settings.description",p,"Configure global card appearance and behavior.")}
          </p>
        </div>

        <div class="settings-container">
          <!-- Card Name Section -->
          <div class="settings-section">
            <div class="section-header">
              <h4>${(0,Wi.kg)("editor.ultra_card_pro.card_name",p,"Card Name")}</h4>
              <p>
                ${(0,Wi.kg)("editor.ultra_card_pro.card_name_desc",p,"Give this card a name to identify it in your backups")}
              </p>
            </div>

            <div class="setting-item">
              <label for="card-name">
                ${(0,Wi.kg)("editor.ultra_card_pro.card_name",p,"Card Name")}
              </label>
              <ha-textfield
                id="card-name"
                .value="${this.config.card_name||""}"
                @input="${this._handleCardNameChange}"
                placeholder="${(0,Wi.kg)("editor.ultra_card_pro.card_name_placeholder",p,"My Ultra Card")}"
                maxlength="100"
              ></ha-textfield>
            </div>
          </div>

          <!-- Appearance Section -->
          <div class="settings-section">
            <div class="section-header">
              <h4>${(0,Wi.kg)("editor.appearance.title",p,"Appearance")}</h4>
              <p>
                ${(0,Wi.kg)("editor.appearance.description",p,"Control the visual appearance of your card")}
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-item">
                <label>
                  ${(0,Wi.kg)("editor.fields.card_background_color",p,"Card Background Color")}
                </label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.card_background_color_desc",p,"The background color of the entire card")}
                </div>
                <ultra-color-picker
                  .label=${"Card Background Color"}
                  .value=${this.config.card_background||u}
                  .defaultValue=${u}
                  .hass=${this.hass}
                  @value-changed=${e=>this._updateConfig({card_background:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <!-- Card Background Image Settings -->
              <div class="setting-item" style="grid-column: 1 / -1;">
                <label>
                  ${(0,Wi.kg)("editor.fields.card_background_image_type",p,"Background Image Type")}
                </label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.card_background_image_type_desc",p,"Add a background image to your card")}
                </div>
                <select
                  .value=${this.config.card_background_image_type||"none"}
                  @change=${e=>{const t=e.target.value;this._updateConfig({card_background_image_type:t})}}
                  class="property-select"
                  style="width: 100%;"
                >
                  <option value="none">${(0,Wi.kg)("editor.design.bg_none",p,"None")}</option>
                  <option value="upload">
                    ${(0,Wi.kg)("editor.design.bg_upload",p,"Upload Image")}
                  </option>
                  <option value="entity">
                    ${(0,Wi.kg)("editor.design.bg_entity",p,"Entity Image")}
                  </option>
                  <option value="url">
                    ${(0,Wi.kg)("editor.design.bg_url",p,"Image URL")}
                  </option>
                </select>
              </div>

              ${"upload"===this.config.card_background_image_type?a.qy`
                    <div
                      class="conditional-fields-group"
                      style="grid-column: 1 / -1; padding: 16px; margin-top: 8px;"
                    >
                      <div class="settings-grid">
                        <div class="setting-item" style="grid-column: 1 / -1;">
                          <label>
                            ${(0,Wi.kg)("editor.design.upload_bg_image",p,"Upload Background Image")}
                          </label>
                          <div class="upload-container" style="margin-top: 8px;">
                            <div class="file-upload-row">
                              <label class="file-upload-button">
                                <div class="button-content">
                                  <ha-icon icon="mdi:upload"></ha-icon>
                                  <span class="button-label"
                                    >${(0,Wi.kg)("editor.design.choose_file",p,"Choose File")}</span
                                  >
                                </div>
                                <input
                                  type="file"
                                  accept="image/*"
                                  @change=${this._handleCardBackgroundImageUpload}
                                  style="display: none"
                                />
                              </label>
                              <div class="path-display">
                                ${this.config.card_background_image?a.qy`<span
                                      class="uploaded-path"
                                      title="${this.config.card_background_image}"
                                    >
                                      ${this._truncatePath(this.config.card_background_image)}
                                    </span>`:a.qy`<span class="no-file"
                                      >${(0,Wi.kg)("editor.design.no_file_chosen",p,"No file chosen")}</span
                                    >`}
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  `:""}
              ${"entity"===this.config.card_background_image_type?a.qy`
                    <div
                      class="conditional-fields-group"
                      style="grid-column: 1 / -1; padding: 16px; margin-top: 8px;"
                    >
                      <div class="settings-grid">
                        <div class="setting-item" style="grid-column: 1 / -1;">
                          <label>
                            ${(0,Wi.kg)("editor.design.bg_image_entity",p,"Background Image Entity")}
                          </label>
                          <ha-entity-picker
                            .hass=${this.hass}
                            .value=${this.config.card_background_image_entity||""}
                            @value-changed=${e=>this._updateConfig({card_background_image_entity:e.detail.value})}
                            .label=${"Select entity with image attribute"}
                            allow-custom-entity
                          ></ha-entity-picker>
                        </div>
                      </div>
                    </div>
                  `:""}
              ${"url"===this.config.card_background_image_type?a.qy`
                    <div
                      class="conditional-fields-group"
                      style="grid-column: 1 / -1; padding: 16px; margin-top: 8px;"
                    >
                      <div class="settings-grid">
                        <div class="setting-item" style="grid-column: 1 / -1;">
                          <label>
                            ${(0,Wi.kg)("editor.design.bg_image_url",p,"Background Image URL")}
                          </label>
                          <input
                            type="text"
                            .value=${this.config.card_background_image||""}
                            @input=${e=>{const t=e.target.value;this._updateConfig({card_background_image:t})}}
                            placeholder="https://example.com/image.jpg"
                            class="property-input"
                            style="width: 100%;"
                          />
                        </div>
                      </div>
                    </div>
                  `:""}
              ${this.config.card_background_image_type&&"none"!==this.config.card_background_image_type?a.qy`
                    <div
                      class="conditional-fields-group"
                      style="grid-column: 1 / -1; padding: 16px; margin-top: 8px;"
                    >
                      <div class="settings-grid">
                        <div class="setting-item">
                          <label>Background Size</label>
                          <div class="setting-description">How the image fills the card area</div>
                          <select
                            .value=${this._getBackgroundSizeDropdownValue(this.config.card_background_size)}
                            @change=${e=>{const t=e.target.value;this._updateConfig({card_background_size:t})}}
                            class="property-select"
                            style="width: 100%;"
                          >
                            <option value="cover">Cover</option>
                            <option value="contain">Contain</option>
                            <option value="auto">Auto</option>
                            <option value="custom">Custom</option>
                          </select>
                        </div>

                        ${"custom"===this._getBackgroundSizeDropdownValue(this.config.card_background_size)?a.qy`
                              <div class="setting-item">
                                <label>Custom Width</label>
                                <input
                                  type="text"
                                  .value=${this._getCustomSizeValue(this.config.card_background_size,"width")}
                                  @input=${e=>{const t=e.target.value,i=this._getCustomSizeValue(this.config.card_background_size,"height"),o=t&&i?`${t} ${i}`:t||i||"auto";this._updateConfig({card_background_size:o})}}
                                  placeholder="100px, 50%, auto"
                                  class="property-input"
                                  style="width: 100%;"
                                />
                              </div>
                              <div class="setting-item">
                                <label>Custom Height</label>
                                <input
                                  type="text"
                                  .value=${this._getCustomSizeValue(this.config.card_background_size,"height")}
                                  @input=${e=>{const t=e.target.value,i=this._getCustomSizeValue(this.config.card_background_size,"width"),o=i&&t?`${i} ${t}`:i||t||"auto";this._updateConfig({card_background_size:o})}}
                                  placeholder="100px, 50%, auto"
                                  class="property-input"
                                  style="width: 100%;"
                                />
                              </div>
                            `:""}

                        <div class="setting-item">
                          <label>Background Repeat</label>
                          <div class="setting-description">How the image repeats</div>
                          <select
                            .value=${this.config.card_background_repeat||"no-repeat"}
                            @change=${e=>{const t=e.target.value;this._updateConfig({card_background_repeat:t})}}
                            class="property-select"
                            style="width: 100%;"
                          >
                            <option value="no-repeat">No Repeat</option>
                            <option value="repeat">Repeat</option>
                            <option value="repeat-x">Repeat X</option>
                            <option value="repeat-y">Repeat Y</option>
                          </select>
                        </div>

                        <div class="setting-item">
                          <label>Background Position</label>
                          <div class="setting-description">Where the image is positioned</div>
                          <select
                            .value=${this.config.card_background_position||"center center"}
                            @change=${e=>{const t=e.target.value;this._updateConfig({card_background_position:t})}}
                            class="property-select"
                            style="width: 100%;"
                          >
                            <option value="left top">Left Top</option>
                            <option value="left center">Left Center</option>
                            <option value="left bottom">Left Bottom</option>
                            <option value="center top">Center Top</option>
                            <option value="center center">Center</option>
                            <option value="center bottom">Center Bottom</option>
                            <option value="right top">Right Top</option>
                            <option value="right center">Right Center</option>
                            <option value="right bottom">Right Bottom</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  `:""}

              <div class="setting-item">
                <label> ${(0,Wi.kg)("editor.fields.border_radius",p,"Border Radius")} </label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.border_radius_desc",p,"Rounded corners for the card (in pixels)")}
                </div>
                <div class="input-with-unit">
                  <input
                    type="number"
                    min="0"
                    max="50"
                    .value=${null!==(i=this.config.card_border_radius)&&void 0!==i?i:""}
                    placeholder="12"
                    @input=${e=>{const t=e.target.value.trim();this._updateConfig({card_border_radius:""===t?void 0:Number(t)})}}
                  />
                  <span class="unit">${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span>
                  <button
                    class="reset-btn"
                    @click=${()=>this._updateConfig({card_border_radius:12})}
                    title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","12px")}
                  >
                    ↺
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <label>
                  ${(0,Wi.kg)("editor.fields.card_border_color",p,"Border Color")}
                </label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.card_border_color_desc",p,"The border color of the card")}
                </div>
                <ultra-color-picker
                  .label=${"Card Border Color"}
                  .value=${this.config.card_border_color||"var(--divider-color)"}
                  .defaultValue=${"var(--divider-color)"}
                  .hass=${this.hass}
                  @value-changed=${e=>this._updateConfig({card_border_color:e.detail.value})}
                ></ultra-color-picker>
              </div>

              <div class="setting-item">
                <label>
                  ${(0,Wi.kg)("editor.fields.card_border_width",p,"Border Width")}
                </label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.card_border_width_desc",p,"The thickness of the card border (in pixels)")}
                </div>
                <div class="input-with-unit">
                  <input
                    type="number"
                    min="0"
                    max="10"
                    .value=${null!==(o=this.config.card_border_width)&&void 0!==o?o:""}
                    placeholder="1"
                    @input=${e=>{const t=e.target.value.trim();this._updateConfig({card_border_width:""===t?void 0:Number(t)})}}
                  />
                  <span class="unit">${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span>
                  <button
                    class="reset-btn"
                    @click=${()=>this._updateConfig({card_border_width:1})}
                    title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","1px")}
                  >
                    ↺
                  </button>
                </div>
              </div>

              <!-- Card Shadow Settings -->
              <div class="setting-item" style="grid-column: 1 / -1;">
                <div
                  style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;"
                >
                  <label style="margin: 0; font-weight: 500;">
                    ${(0,Wi.kg)("editor.fields.card_shadow_enabled",p,"Custom Drop Shadow")}
                  </label>
                  <ha-switch
                    .checked=${this.config.card_shadow_enabled||!1}
                    @change=${e=>{const t=e.target;this._updateConfig({card_shadow_enabled:t.checked})}}
                  ></ha-switch>
                </div>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.card_shadow_enabled_desc",p,"Enable custom shadow for the card")}
                </div>
              </div>

              ${this.config.card_shadow_enabled?a.qy`
                    <div
                      class="conditional-fields-group"
                      style="grid-column: 1 / -1; padding: 16px; margin-top: 8px;"
                    >
                      <div class="settings-grid">
                        <div class="setting-item">
                          <label>
                            ${(0,Wi.kg)("editor.fields.card_shadow_color",p,"Shadow Color")}
                          </label>
                          <div class="setting-description">
                            ${(0,Wi.kg)("editor.fields.card_shadow_color_desc",p,"The color of the card shadow")}
                          </div>
                          <ultra-color-picker
                            .label=${"Shadow Color"}
                            .value=${this.config.card_shadow_color||"rgba(0, 0, 0, 0.15)"}
                            .defaultValue=${"rgba(0, 0, 0, 0.15)"}
                            .hass=${this.hass}
                            @value-changed=${e=>this._updateConfig({card_shadow_color:e.detail.value})}
                          ></ultra-color-picker>
                        </div>

                        <div class="setting-item">
                          <label>
                            ${(0,Wi.kg)("editor.fields.card_shadow_horizontal",p,"Horizontal Offset")}
                          </label>
                          <div class="setting-description">
                            ${(0,Wi.kg)("editor.fields.card_shadow_horizontal_desc",p,"Horizontal position of the shadow (negative = left, positive = right)")}
                          </div>
                          <div class="input-with-unit">
                            <input
                              type="number"
                              min="-50"
                              max="50"
                              .value=${null!==(n=this.config.card_shadow_horizontal)&&void 0!==n?n:0}
                              @input=${e=>{const t=e.target;this._updateConfig({card_shadow_horizontal:Number(t.value)})}}
                            />
                            <span class="unit"
                              >${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span
                            >
                            <button
                              class="reset-btn"
                              @click=${()=>this._updateConfig({card_shadow_horizontal:0})}
                              title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","0px")}
                            >
                              ↺
                            </button>
                          </div>
                        </div>

                        <div class="setting-item">
                          <label>
                            ${(0,Wi.kg)("editor.fields.card_shadow_vertical",p,"Vertical Offset")}
                          </label>
                          <div class="setting-description">
                            ${(0,Wi.kg)("editor.fields.card_shadow_vertical_desc",p,"Vertical position of the shadow (negative = up, positive = down)")}
                          </div>
                          <div class="input-with-unit">
                            <input
                              type="number"
                              min="-50"
                              max="50"
                              .value=${null!==(r=this.config.card_shadow_vertical)&&void 0!==r?r:2}
                              @input=${e=>{const t=e.target;this._updateConfig({card_shadow_vertical:Number(t.value)})}}
                            />
                            <span class="unit"
                              >${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span
                            >
                            <button
                              class="reset-btn"
                              @click=${()=>this._updateConfig({card_shadow_vertical:2})}
                              title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","2px")}
                            >
                              ↺
                            </button>
                          </div>
                        </div>

                        <div class="setting-item">
                          <label>
                            ${(0,Wi.kg)("editor.fields.card_shadow_blur",p,"Blur Radius")}
                          </label>
                          <div class="setting-description">
                            ${(0,Wi.kg)("editor.fields.card_shadow_blur_desc",p,"How blurred the shadow appears")}
                          </div>
                          <div class="input-with-unit">
                            <input
                              type="number"
                              min="0"
                              max="100"
                              .value=${null!==(s=this.config.card_shadow_blur)&&void 0!==s?s:8}
                              @input=${e=>{const t=e.target;this._updateConfig({card_shadow_blur:Number(t.value)})}}
                            />
                            <span class="unit"
                              >${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span
                            >
                            <button
                              class="reset-btn"
                              @click=${()=>this._updateConfig({card_shadow_blur:8})}
                              title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","8px")}
                            >
                              ↺
                            </button>
                          </div>
                        </div>

                        <div class="setting-item">
                          <label>
                            ${(0,Wi.kg)("editor.fields.card_shadow_spread",p,"Spread Radius")}
                          </label>
                          <div class="setting-description">
                            ${(0,Wi.kg)("editor.fields.card_shadow_spread_desc",p,"How much the shadow expands or contracts")}
                          </div>
                          <div class="input-with-unit">
                            <input
                              type="number"
                              min="-50"
                              max="50"
                              .value=${null!==(l=this.config.card_shadow_spread)&&void 0!==l?l:0}
                              @input=${e=>{const t=e.target;this._updateConfig({card_shadow_spread:Number(t.value)})}}
                            />
                            <span class="unit"
                              >${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span
                            >
                            <button
                              class="reset-btn"
                              @click=${()=>this._updateConfig({card_shadow_spread:0})}
                              title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","0px")}
                            >
                              ↺
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  `:""}
            </div>
          </div>

          <!-- Spacing Section -->
          <div class="settings-section">
            <div class="section-header">
              <h4>${(0,Wi.kg)("editor.spacing.title",p,"Spacing")}</h4>
              <p>
                ${(0,Wi.kg)("editor.spacing.description",p,"Control the spacing and positioning of your card")}
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-item">
                <label>${(0,Wi.kg)("editor.fields.card_padding",p,"Card Padding")}</label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.card_padding_desc",p,"Internal spacing within the card")}
                </div>
                <div class="input-with-unit">
                  <input
                    type="number"
                    min="0"
                    max="100"
                    .value=${null!==(d=this.config.card_padding)&&void 0!==d?d:""}
                    placeholder="16"
                    @input=${e=>{const t=e.target.value.trim();this._updateConfig({card_padding:""===t?16:Number(t)})}}
                  />
                  <span class="unit">${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span>
                  <button
                    class="reset-btn"
                    @click=${()=>this._updateConfig({card_padding:16})}
                    title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","16px")}
                  >
                    ↺
                  </button>
                </div>
              </div>

              <div class="setting-item">
                <label>${(0,Wi.kg)("editor.fields.card_margin",p,"Card Margin")}</label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.fields.card_margin_desc",p,"External spacing around the card")}
                </div>
                <div class="input-with-unit">
                  <input
                    type="number"
                    min="0"
                    max="50"
                    .value=${null!==(c=this.config.card_margin)&&void 0!==c?c:""}
                    placeholder="0"
                    @input=${e=>{const t=e.target.value.trim();this._updateConfig({card_margin:""===t?0:Number(t)})}}
                  />
                  <span class="unit">${(0,Wi.kg)("editor.fields.unit_px",p,"px")}</span>
                  <button
                    class="reset-btn"
                    @click=${()=>this._updateConfig({card_margin:0})}
                    title=${(0,Wi.kg)("editor.fields.reset_default_value",p,"Reset to default ({value})").replace("{value}","0px")}
                  >
                    ↺
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Behavior Section -->
          <div class="settings-section">
            <div class="section-header">
              <h4>${(0,Wi.kg)("editor.behavior.title",p,"Behavior")}</h4>
              <p>
                ${(0,Wi.kg)("editor.behavior.description",p,"Configure how your card responds to user interactions")}
              </p>
            </div>

            <div class="settings-grid">
              <div class="setting-item setting-inline">
                <label>
                  ${(0,Wi.kg)("editor.actions.haptic_feedback",p,"Haptic Feedback")}
                </label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.actions.haptic_feedback_desc",p,"Provide tactile feedback when buttons are pressed on supported devices")}
                  <br /><small style="opacity: 0.7;"
                    >Uses Home Assistant's native haptic system. Respects OS-level haptic
                    settings.</small
                  >
                </div>
                <ha-form
                  .hass=${this.hass}
                  .data=${{haptic_feedback:!1!==this.config.haptic_feedback}}
                  .schema=${[{name:"haptic_feedback",label:"",selector:{boolean:{}}}]}
                  .computeLabel=${()=>""}
                  @value-changed=${e=>{var t,i;const o=null===(i=null===(t=e.detail)||void 0===t?void 0:t.value)||void 0===i?void 0:i.haptic_feedback;void 0!==o&&this._updateConfig({haptic_feedback:o})}}
                ></ha-form>
              </div>

              <div class="setting-item setting-inline">
                <label>
                  ${(0,Wi.kg)("editor.behavior.responsive_scaling",p,"Smart Scaling")}
                </label>
                <div class="setting-description">
                  ${(0,Wi.kg)("editor.behavior.responsive_scaling_desc",p,"Intelligently scales content to fit tighter columns or edit panels (experimental)")}
                  <br /><small style="opacity: 0.7;"
                    >⚠️ Experimental: Smart Scaling adapts the card when space is tight (edit mode,
                    small columns). Disable if you prefer fixed sizing.</small
                  >
                </div>
                <ha-form
                  .hass=${this.hass}
                  .data=${{responsive_scaling:!1!==this.config.responsive_scaling}}
                  .schema=${[{name:"responsive_scaling",label:"",selector:{boolean:{}}}]}
                  .computeLabel=${()=>""}
                  @value-changed=${e=>{var t,i;const o=null===(i=null===(t=e.detail)||void 0===t?void 0:t.value)||void 0===i?void 0:i.responsive_scaling;void 0!==o&&this._updateConfig({responsive_scaling:o})}}
                ></ha-form>
              </div>
            </div>
          </div>

          <!-- Favorite Colors Section -->
          <div class="settings-section">
            <div class="section-header">
              <h4>${(0,Wi.kg)("editor.favorite_colors.title",p,"Favorite Colors")}</h4>
              <p>
                ${(0,Wi.kg)("editor.favorite_colors.description",p,"Manage your favorite colors that appear in all Ultra Card color pickers. These colors sync across all your Ultra Cards.")}
              </p>
            </div>

            <uc-favorite-colors-manager .hass=${this.hass}></uc-favorite-colors-manager>
          </div>
        </div>
      </div>
    `}async _handleCardBackgroundImageUpload(e){var t;const i=e.target,o=null===(t=i.files)||void 0===t?void 0:t[0];if(o&&this.hass)try{const e=await(0,l.m)(this.hass,o);this._updateConfig({card_background_image:e,card_background_image_type:"upload"})}catch(e){console.error("Failed to upload card background image:",e),alert(`Failed to upload image: ${e instanceof Error?e.message:"Unknown error"}`)}finally{i.value=""}}_truncatePath(e){return e?e.length<=30?e:"..."+e.slice(-27):""}_getBackgroundSizeDropdownValue(e){return e?["cover","contain","auto"].includes(e)?e:"custom":"cover"}_getCustomSizeValue(e,t){if(!e||["cover","contain","auto"].includes(e))return"";if("custom"===e)return"";const i=e.split(" ");return"width"===t?i[0]||"":"height"===t&&(i[1]||i[0])||""}_injectModuleStyles(){if(this._moduleStylesInjected||!this.shadowRoot)return;const e=(0,s.oD)().getAllModuleStyles();if(e.trim().length){const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}this._moduleStylesInjected=!0}static get styles(){return a.AH`
      /* Global styles for hiding preview in full screen */
      :host {
        --ultra-editor-transition: all 0.3s ease;
      }

      .card-config {
        padding: 16px;
        max-width: 100%;
        margin: 0 auto;
        width: 100%;
        box-sizing: border-box;
        transition: var(--ultra-editor-transition);
      }

      /* Full screen mode styles */
      .card-config.fullscreen {
        max-width: none !important;
        width: 100vw !important;
        margin: 0 !important;
        padding: 20px !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        height: 100vh !important;
        z-index: ${_.Mu.FULLSCREEN_EDITOR} !important;
        background: var(--card-background-color) !important;
        overflow-y: auto !important;
        box-sizing: border-box !important;
      }

      /* Full screen mode tab content */
      .card-config.fullscreen .tab-content {
        min-height: calc(100vh - 120px) !important;
        width: 100% !important;
        max-width: none !important;
      }

      /* Full screen mode header adjustments */
      .card-config.fullscreen .tabs {
        border: none;
        background: var(--card-background-color);
        padding: 16px;
        position: sticky;
        top: 0;
        z-index: ${_.Mu.EDITOR_TABS};
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      /* Remove the gradient line in fullscreen */
      .card-config.fullscreen .tabs::before {
        display: none;
      }

      /* Center the single tab in fullscreen mode and remove borders */
      .card-config.fullscreen .tab {
        flex: none;
        min-width: auto;
        justify-content: center;
        border: none;
        border-radius: 12px;
        background: var(--primary-color);
        color: white;
        padding: 12px 24px;
        font-weight: 600;
        box-shadow: 0 2px 8px rgba(var(--rgb-primary-color), 0.3);
      }

      .card-config.fullscreen .tab:hover {
        background: var(--primary-color);
        opacity: 0.9;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(var(--rgb-primary-color), 0.4);
      }

      /* Hide Home Assistant preview when in full screen mode */
      :global(body.ultra-card-fullscreen) {
        overflow: hidden !important;
      }

      :global(body.ultra-card-fullscreen *) {
        .element-preview,
        .element-preview-container,
        .preview-container,
        .card-preview,
        .preview-pane,
        hui-card-preview,
        .card-config > div:last-child:not(.card-config),
        .card-config-row > div:last-child,
        .mdc-dialog .mdc-dialog__container .mdc-dialog__surface > div:last-child:not(.card-config) {
          display: none !important;
        }

        .card-config-container,
        .editor-container,
        .card-config-row,
        .mdc-dialog .mdc-dialog__container .mdc-dialog__surface {
          width: 100% !important;
          max-width: none !important;
        }

        /* Override HA dialog sizing */
        .mdc-dialog .mdc-dialog__container {
          max-width: 100vw !important;
          width: 100vw !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          bottom: 0 !important;
          z-index: ${_.Mu.DIALOG_CONTENT} !important;
        }

        .mdc-dialog .mdc-dialog__surface {
          max-width: 100vw !important;
          width: 100vw !important;
          max-height: 100vh !important;
          height: 100vh !important;
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          margin: 0 !important;
          border-radius: 0 !important;
        }

        /* Hide the backdrop */
        .mdc-dialog .mdc-dialog__scrim {
          display: none !important;
        }
      }

      /* Allow action forms to display all their elements properly */
      ha-form[data-action-form] *,
      ha-form[data-action-form] .mdc-form-field,
      ha-form[data-action-form] .mdc-text-field,
      ha-form[data-action-form] .mdc-floating-label,
      ha-form[data-action-form] .mdc-notched-outline__leading,
      ha-form[data-action-form] .mdc-notched-outline__notch,
      ha-form[data-action-form] .mdc-notched-outline__trailing,
      ha-form[data-action-form] .mdc-floating-label--float-above,
      ha-form[data-action-form] label,
      ha-form[data-action-form] .ha-form-label,
      ha-form[data-action-form] .form-label,
      ha-form[data-action-form] .mdc-text-field-character-counter,
      ha-form[data-action-form] .mdc-text-field-helper-text,
      ha-form[data-action-form] mwc-formfield,
      ha-form[data-action-form] .formfield {
        display: initial !important;
        visibility: visible !important;
      }

      /* Ensure action forms themselves are visible */
      ha-form[data-action-form] {
        display: block !important;
        visibility: visible !important;
      }

      /* Hide unwanted form labels with underscores - but only for non-action forms */
      ha-form:not([data-action-form]) .mdc-form-field > label,
      ha-form:not([data-action-form]) .mdc-text-field > label,
      ha-form:not([data-action-form]) .mdc-floating-label,
      ha-form:not([data-action-form]) .mdc-notched-outline__leading,
      ha-form:not([data-action-form]) .mdc-notched-outline__notch,
      ha-form:not([data-action-form]) .mdc-notched-outline__trailing,
      ha-form:not([data-action-form]) .mdc-floating-label--float-above,
      ha-form:not([data-action-form]) label[for],
      ha-form:not([data-action-form]) .ha-form-label,
      ha-form:not([data-action-form]) .form-label {
        display: none !important;
      }

      /* Hide labels containing underscores only for non-action forms */
      ha-form:not([data-action-form]) label[data-label*='_'],
      ha-form:not([data-action-form]) .label-text:contains('_'),
      :not([data-action-form]) label:contains('_') {
        display: none !important;
      }

      /* Additional safeguards for underscore labels in non-action forms */
      ha-form:not([data-action-form]) .mdc-text-field-character-counter,
      ha-form:not([data-action-form]) .mdc-text-field-helper-text,
      ha-form:not([data-action-form]) mwc-formfield,
      ha-form:not([data-action-form]) .formfield {
        display: none !important;
      }

      /* Mobile responsive adjustments */
      @media (max-width: 768px) {
        .card-config {
          padding: 8px;
        }

        /* Hide fullscreen toggle on mobile as additional safeguard */
        .fullscreen-toggle {
          display: none !important;
        }
      }

      .tabs {
        display: flex;
        border-bottom: 2px solid var(--divider-color);
        margin-bottom: 16px;
      }

      .tab {
        background: none;
        border: none;
        padding: 12px 16px;
        cursor: pointer;
        color: var(--secondary-text-color);
        font-size: 14px;
        border-bottom: 2px solid transparent;
        transition: all 0.2s ease;
        flex: 1;
        text-align: center;
      }

      .tab:hover {
        color: var(--primary-color);
      }

      .tab.active {
        color: var(--primary-color);
        border-bottom-color: var(--primary-color);
      }

      .fullscreen-toggle {
        background: none;
        border: none;
        padding: 8px 12px;
        cursor: pointer;
        color: var(--secondary-text-color);
        margin-left: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 6px;
        transition: var(--ultra-editor-transition);
        position: relative;
        min-width: 40px;
        height: 40px;
        gap: 6px;
      }

      .fullscreen-toggle:hover {
        background: var(--divider-color);
        color: var(--primary-color);
      }

      .fullscreen-toggle:active {
        transform: scale(0.95);
      }

      /* Active fullscreen state - Dashboard button styling */
      .card-config.fullscreen .fullscreen-toggle {
        background: rgba(var(--rgb-primary-color), 0.1);
        color: var(--primary-color);
        border: 1px solid rgba(var(--rgb-primary-color), 0.2);
        padding: 8px 16px;
        min-width: auto;
        height: auto;
      }

      .card-config.fullscreen .fullscreen-toggle:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        transform: translateX(-2px);
      }

      .arrow-icon {
        width: 20px;
        height: 20px;
        fill: currentColor;
        transition: var(--ultra-editor-transition);
        flex-shrink: 0;
      }

      .dashboard-text {
        font-size: 14px;
        font-weight: 500;
        white-space: nowrap;
      }

      .tab-content {
        min-height: 400px;
        transition: var(--ultra-editor-transition);
      }

      /* Full screen mode tab content */
      .card-config.fullscreen .tab-content {
        min-height: calc(100vh - 120px);
      }

      .settings-tab,
      .pro-tab-content {
        padding: 12px;
        background: var(--card-background-color);
        border-radius: 8px;
        width: 100%;
        max-width: 100%;
        box-sizing: border-box;
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      .settings-header {
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--divider-color);
      }

      .settings-header h3 {
        margin: 0 0 8px 0;
        color: var(--primary-text-color);
        font-size: 18px;
        font-weight: 600;
      }

      .settings-header p {
        margin: 0;
        color: var(--secondary-text-color);
        font-size: 14px;
        line-height: 1.4;
      }

      .settings-container {
        display: flex;
        flex-direction: column;
        gap: 24px;
        flex: 1;
      }

      .settings-section {
        background: var(--secondary-background-color);
        border: 2px solid var(--primary-color);
        border-radius: 8px;
        padding: 20px;
        box-sizing: border-box;
      }

      .section-header {
        margin-bottom: 20px;
        padding-bottom: 12px;
        border-bottom: 1px solid rgba(var(--rgb-primary-color), 0.2);
      }

      .section-header h4 {
        margin: 0 0 6px 0;
        color: var(--primary-text-color);
        font-size: 18px;
        font-weight: 700;
        letter-spacing: 0.2px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .section-header p {
        margin: 0;
        color: var(--secondary-text-color);
        font-size: 13px;
        line-height: 1.4;
      }

      .settings-grid {
        display: flex;
        flex-direction: column;
        gap: 20px;
        width: 100%;
      }

      .setting-item {
        display: flex;
        flex-direction: column;
        gap: 8px;
        width: 100%;
      }

      /* Inline layout: title (left), toggle (right), description below */
      .setting-inline {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap; /* allow description on its own row */
        gap: 12px;
        width: 100%;
      }
      .setting-inline > label {
        flex: 1 1 auto;
        margin-right: 12px;
      }
      .setting-inline ha-form {
        margin-left: auto; /* push toggle to right */
      }
      .setting-inline > .setting-description {
        order: 3;
        width: 100%; /* force onto next line below title+toggle */
        margin: 6px 0 0 0;
      }

      /* Conditional fields group styling */
      .conditional-fields-group {
        background: var(--secondary-background-color, rgba(0, 0, 0, 0.05));
        border-left: 3px solid var(--primary-color);
        border-radius: 4px;
      }

      /* Upload container styling */
      .upload-container {
        width: 100%;
      }

      .file-upload-row {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
      }

      .file-upload-button {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        cursor: pointer;
        transition: all 0.2s ease;
        min-width: 120px;
      }

      .file-upload-button:hover {
        border-color: var(--primary-color);
        background: var(--primary-color);
        color: white;
      }

      .button-content {
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .button-label {
        font-size: 14px;
        font-weight: 500;
      }

      .path-display {
        flex: 1;
        min-width: 0;
      }

      .uploaded-path {
        color: var(--primary-text-color);
        font-size: 12px;
        word-break: break-all;
      }

      .no-file {
        color: var(--secondary-text-color);
        font-size: 12px;
        font-style: italic;
      }

      .setting-item label {
        color: var(--primary-text-color);
        font-size: 14px;
        font-weight: 500;
        margin: 0;
      }

      .setting-description {
        color: var(--secondary-text-color);
        font-size: 12px;
        line-height: 1.3;
        margin-bottom: 4px;
      }

      .input-with-unit {
        display: flex;
        align-items: center;
        gap: 8px;
        max-width: 200px;
      }

      .input-with-unit input {
        flex: 1;
        padding: 10px 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        font-size: 14px;
        transition: all 0.2s ease;
        min-width: 0;
      }

      .input-with-unit input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px rgba(var(--rgb-primary-color), 0.2);
      }

      .input-with-unit .unit {
        color: var(--secondary-text-color);
        font-size: 12px;
        font-weight: 500;
        min-width: 20px;
        text-align: center;
      }

      .reset-btn {
        background: var(--secondary-background-color);
        border: 1px solid var(--divider-color);
        border-radius: 4px;
        color: var(--secondary-text-color);
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        padding: 0;
        flex-shrink: 0;
      }

      .reset-btn:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
        transform: scale(1.05);
      }

      .reset-btn:active {
        transform: scale(0.95);
      }

      .setting-item ultra-color-picker {
        width: 100%;
        max-width: none;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .settings-tab {
          padding: 16px 12px;
        }

        .settings-section {
          padding: 16px;
        }

        .settings-grid {
          gap: 16px;
        }
      }

      /* Full screen mode responsive behavior for builder columns */
      .card-config.fullscreen {
        /* Allow horizontal layout components to display side by side */
        ::slotted(ultra-layout-tab) {
          --layout-columns-display: flex;
          --layout-columns-direction: row;
          --layout-columns-gap: 16px;
        }

        /* Style for layout builder in full screen */
        ultra-layout-tab {
          --columns-layout: horizontal;
        }
      }

      /* Default preview mode - stack columns vertically */
      .card-config:not(.fullscreen) {
        ::slotted(ultra-layout-tab) {
          --layout-columns-display: flex;
          --layout-columns-direction: column;
          --layout-columns-gap: 12px;
        }

        ultra-layout-tab {
          --columns-layout: vertical;
        }
      }

      /* Enhanced mobile behavior */
      @media (max-width: 768px) {
        .card-config.fullscreen {
          width: 100vw;
          height: 100vh;
          padding: 12px;
          position: fixed;
          top: 0;
          left: 0;
          z-index: ${_.Mu.FULLSCREEN_EDITOR};
          background: var(--card-background-color);
        }

        .fullscreen-toggle {
          padding: 6px 10px;
          min-width: 36px;
          height: 36px;
        }

        .arrow-icon {
          width: 16px;
          height: 16px;
        }
      }

      /* Cloud Sync Styles */
      .cloud-sync-container {
        margin-top: 16px;
      }

      .login-section {
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        padding: 20px;
        background: var(--card-background-color);
      }

      .login-prompt {
        text-align: center;
      }

      .login-benefits {
        margin-bottom: 24px;
      }

      .login-benefits h5 {
        margin: 0 0 12px 0;
        color: var(--primary-text-color);
        font-size: 16px;
      }

      .login-benefits ul {
        list-style: none;
        padding: 0;
        margin: 0;
        text-align: left;
        display: inline-block;
      }

      .login-benefits li {
        margin: 8px 0;
        color: var(--secondary-text-color);
        font-size: 14px;
      }

      .login-actions {
        margin-top: 20px;
      }

      .login-btn {
        background: var(--primary-color);
        color: var(--text-primary-color);
        border: none;
        border-radius: 6px;
        padding: 12px 24px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .login-btn:hover {
        background: var(--primary-color);
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .login-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .login-note {
        margin-top: 16px;
        font-size: 13px;
        color: var(--secondary-text-color);
      }

      .login-note a {
        color: var(--primary-color);
        text-decoration: none;
      }

      .login-note a:hover {
        text-decoration: underline;
      }

      .login-form {
        max-width: 400px;
        margin: 0 auto;
      }

      .login-form h5 {
        margin: 0 0 20px 0;
        text-align: center;
        color: var(--primary-text-color);
      }

      .beta-badge {
        display: inline-block;
        background: var(--warning-color);
        color: white;
        font-size: 10px;
        font-weight: 700;
        padding: 2px 6px;
        border-radius: 4px;
        margin-left: 8px;
        vertical-align: middle;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }

      .error-message {
        background: var(--error-color);
        color: white;
        padding: 12px;
        border-radius: 6px;
        margin-bottom: 16px;
        font-size: 14px;
        text-align: center;
      }

      .form-group {
        margin-bottom: 16px;
      }

      .form-group label {
        display: block;
        margin-bottom: 6px;
        font-size: 14px;
        font-weight: 500;
        color: var(--primary-text-color);
      }

      .form-group input {
        width: 100%;
        padding: 12px;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        font-size: 14px;
        background: var(--card-background-color);
        color: var(--primary-text-color);
        box-sizing: border-box;
      }

      .form-group input:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 2px var(--primary-color) 20;
      }

      .form-group input:disabled {
        opacity: 0.6;
        cursor: not-allowed;
      }

      .form-actions {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
        margin-top: 24px;
      }

      .cancel-btn {
        background: transparent;
        color: var(--secondary-text-color);
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        padding: 12px 20px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .cancel-btn:hover {
        background: var(--divider-color);
      }

      .login-links {
        text-align: center;
        margin-top: 20px;
        font-size: 13px;
      }

      .login-links a {
        color: var(--primary-color);
        text-decoration: none;
      }

      .login-links a:hover {
        text-decoration: underline;
      }

      .login-links span {
        margin: 0 8px;
        color: var(--secondary-text-color);
      }

      .sync-controls {
        border: 1px solid var(--divider-color);
        border-radius: 8px;
        padding: 20px;
        background: var(--card-background-color);
      }

      .user-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--divider-color);
      }

      .user-details {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
      }

      .user-avatar-placeholder {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--primary-color);
        color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 18px;
      }

      .user-text {
        display: flex;
        flex-direction: column;
      }

      .user-text strong {
        color: var(--primary-text-color);
        font-size: 16px;
      }

      .user-email {
        color: var(--secondary-text-color);
        font-size: 13px;
      }

      .logout-btn {
        background: transparent;
        border: 1px solid var(--divider-color);
        border-radius: 6px;
        padding: 8px;
        cursor: pointer;
        color: var(--secondary-text-color);
        transition: all 0.2s ease;
      }

      .logout-btn:hover {
        background: var(--error-color);
        color: white;
        border-color: var(--error-color);
      }

      .sync-status {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .sync-info {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .sync-stat {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
      }

      .sync-stat.pending .stat-value {
        color: var(--warning-color);
        font-weight: 500;
      }

      .sync-stat.conflicts .stat-value {
        color: var(--error-color);
        font-weight: 500;
      }

      .stat-label {
        color: var(--secondary-text-color);
        min-width: 80px;
      }

      .stat-value {
        color: var(--primary-text-color);
        font-weight: 500;
      }

      .sync-btn {
        background: var(--primary-color);
        color: var(--text-primary-color);
        border: none;
        border-radius: 6px;
        padding: 10px 16px;
        font-size: 14px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.2s ease;
      }

      .sync-btn:hover:not(:disabled) {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      .sync-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .sync-btn ha-icon {
        --mdc-icon-size: 18px;
      }

      .sync-settings {
        border-top: 1px solid var(--divider-color);
        padding-top: 16px;
      }

      .sync-toggle {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .toggle-label {
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        font-size: 14px;
      }

      .toggle-label input[type='checkbox'] {
        width: 18px;
        height: 18px;
        cursor: pointer;
      }

      .toggle-text {
        color: var(--primary-text-color);
        font-weight: 500;
      }

      .toggle-description {
        margin: 0;
        font-size: 13px;
        color: var(--secondary-text-color);
        margin-left: 30px;
      }

      .sync-conflicts {
        margin-top: 20px;
        padding-top: 16px;
        border-top: 1px solid var(--divider-color);
      }

      .sync-conflicts h6 {
        margin: 0 0 8px 0;
        color: var(--error-color);
        font-size: 16px;
      }

      .sync-conflicts p {
        margin: 0 0 16px 0;
        font-size: 14px;
        color: var(--secondary-text-color);
      }

      .conflicts-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .conflict-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px;
        border: 1px solid var(--error-color);
        border-radius: 6px;
        background: var(--error-color) 10;
      }

      .conflict-info {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .conflict-info strong {
        color: var(--primary-text-color);
        font-size: 14px;
      }

      .conflict-field {
        color: var(--secondary-text-color);
        font-size: 12px;
      }

      .conflict-actions {
        display: flex;
        gap: 8px;
      }

      .resolve-btn {
        padding: 6px 12px;
        border: none;
        border-radius: 4px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .resolve-btn.local {
        background: var(--primary-color);
        color: var(--text-primary-color);
      }

      .resolve-btn.remote {
        background: var(--secondary-color, var(--divider-color));
        color: var(--primary-text-color);
      }

      .resolve-btn:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }

      /* Mobile responsive styles */
      @media (max-width: 768px) {
        .sync-status {
          flex-direction: column;
          align-items: flex-start;
          gap: 16px;
        }

        .user-info {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
        }

        .conflict-item {
          flex-direction: column;
          align-items: flex-start;
          gap: 12px;
        }

        .conflict-actions {
          width: 100%;
          justify-content: flex-end;
        }

        .form-actions {
          flex-direction: column;
        }

        .login-benefits ul {
          width: 100%;
        }
      }

      /* ============================================
         ULTRA CARD PRO STYLES
         ============================================ */

      /* Pro Banner */
      /* Integration Status Card Styles */
      .integration-status-card {
        padding: 20px;
        border-radius: 12px;
        margin-bottom: 20px;
        border: 2px solid;
        display: flex;
        align-items: flex-start;
        gap: 16px;
        animation: slideIn 0.3s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .integration-status-card .status-icon {
        flex-shrink: 0;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
      }

      .integration-status-card .status-content {
        flex: 1;
      }

      .integration-status-card .status-content h4 {
        margin: 0 0 8px 0;
        font-size: 18px;
        font-weight: 600;
      }

      .integration-status-card .status-content p {
        margin: 4px 0;
        font-size: 14px;
        opacity: 0.9;
      }

      .integration-status-card .status-note {
        margin-top: 12px;
        font-size: 13px;
        opacity: 0.8;
      }

      .integration-status-card .status-note-small {
        margin-top: 8px;
        font-size: 12px;
        opacity: 0.7;
      }

      .integration-status-card .status-actions {
        margin-top: 16px;
        display: flex;
        gap: 12px;
      }

      .integration-button {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.2s;
        cursor: pointer;
      }

      .integration-button ha-icon {
        font-size: 18px;
      }

      /* Authenticated State - Green */
      .integration-authenticated {
        background-color: rgba(76, 175, 80, 0.1);
        border-color: #4caf50;
        color: var(--primary-text-color);
      }

      .integration-authenticated .status-icon {
        background-color: #4caf50;
        color: white;
      }

      .integration-authenticated a {
        color: #4caf50;
        font-weight: 600;
      }

      /* Not Configured State - Orange/Yellow */
      .integration-not-configured {
        background-color: rgba(255, 152, 0, 0.1);
        border-color: #ff9800;
        color: var(--primary-text-color);
      }

      .integration-not-configured .status-icon {
        background-color: #ff9800;
        color: white;
      }

      .integration-not-configured .integration-button {
        background-color: #ff9800;
        color: white;
      }

      .integration-not-configured .integration-button:hover {
        background-color: #f57c00;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(255, 152, 0, 0.3);
      }

      /* Not Installed State - Blue */
      .integration-not-installed {
        background-color: rgba(33, 150, 243, 0.1);
        border-color: #2196f3;
        color: var(--primary-text-color);
      }

      .integration-not-installed .status-icon {
        background-color: #2196f3;
        color: white;
      }

      .integration-not-installed .integration-button {
        background-color: #f5f5f5;
        color: var(--primary-text-color);
        border: 1px solid var(--divider-color);
      }

      .integration-not-installed .integration-button-primary {
        background-color: #2196f3;
        color: white;
        border: none;
      }

      .integration-not-installed .integration-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .integration-not-installed .integration-button-primary:hover {
        background-color: #1976d2;
        box-shadow: 0 4px 12px rgba(33, 150, 243, 0.3);
      }

      /* Benefits List */
      .benefits-list {
        margin: 16px 0;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .benefit-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        font-size: 14px;
      }

      .benefit-item ha-icon {
        color: #4caf50;
        font-size: 20px;
        flex-shrink: 0;
        margin-top: 2px;
      }

      .benefit-item div {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .benefit-description {
        font-size: 12px;
        opacity: 0.7;
      }

      .integration-subtitle {
        font-size: 14px;
        line-height: 1.5;
        margin-bottom: 8px;
      }

      /* Install Steps */
      .install-steps {
        margin: 20px 0;
        padding: 16px;
        background-color: rgba(var(--rgb-primary-color), 0.05);
        border-radius: 8px;
        border-left: 3px solid var(--primary-color);
      }

      .install-steps h5 {
        margin: 0 0 12px 0;
        font-size: 14px;
        font-weight: 600;
        color: var(--primary-text-color);
      }

      .install-steps ol {
        margin: 0;
        padding-left: 20px;
      }

      .install-steps li {
        font-size: 13px;
        line-height: 1.6;
        margin-bottom: 6px;
        color: var(--primary-text-color);
      }

      .install-steps strong {
        color: var(--primary-color);
        font-weight: 600;
      }

      .ultra-pro-banner {
        position: relative;
        padding: 24px;
        border-radius: 16px;
        margin-bottom: 24px;
        overflow: hidden;
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .ultra-pro-banner-minimal {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .ultra-pro-banner-free {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 8px 24px rgba(102, 126, 234, 0.25);
      }

      .ultra-pro-banner-pro {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        box-shadow: 0 8px 24px rgba(245, 87, 108, 0.3);
        animation: proPulse 3s ease-in-out infinite;
      }

      @keyframes proPulse {
        0%,
        100% {
          box-shadow: 0 8px 24px rgba(245, 87, 108, 0.3);
        }
        50% {
          box-shadow: 0 12px 32px rgba(245, 87, 108, 0.5);
        }
      }

      .banner-gradient {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
        pointer-events: none;
      }

      .banner-icon {
        flex-shrink: 0;
        width: 56px;
        height: 56px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        backdrop-filter: blur(10px);
      }

      .banner-icon ha-icon {
        --mdc-icon-size: 32px;
      }

      .banner-content {
        flex: 1;
      }

      .banner-content h3 {
        margin: 0 0 6px 0;
        font-size: 22px;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .banner-content h3 ha-icon {
        --mdc-icon-size: 24px;
        animation: starRotate 4s linear infinite;
      }

      @keyframes starRotate {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .banner-content p {
        margin: 0;
        opacity: 0.95;
        font-size: 14px;
      }

      .pro-badge {
        flex-shrink: 0;
        padding: 8px 16px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        font-weight: 700;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 6px;
        backdrop-filter: blur(10px);
      }

      .pro-badge ha-icon {
        --mdc-icon-size: 18px;
      }

      .free-badge {
        flex-shrink: 0;
        padding: 6px 14px;
        background: rgba(255, 255, 255, 0.25);
        border-radius: 16px;
        font-weight: 600;
        font-size: 13px;
        backdrop-filter: blur(10px);
      }

      /* Auth Info Section (Integration-based authentication) */
      .auth-info-section {
        padding: 20px;
        background: var(--card-background-color);
        border: 2px solid var(--primary-color);
        border-radius: 12px;
        margin-bottom: 24px;
      }

      .auth-info-section ha-icon {
        font-size: 24px;
        color: var(--primary-color);
        margin-bottom: 12px;
        display: block;
      }

      .auth-info-section .info-content h4 {
        margin: 0 0 8px 0;
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-text-color);
      }

      .auth-info-section .info-content p {
        margin: 0 0 16px 0;
        font-size: 14px;
        line-height: 1.5;
        color: var(--secondary-text-color);
      }

      .install-integration-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin-top: 12px;
        padding: 10px 20px;
        background: var(--primary-color);
        color: white;
        text-decoration: none;
        border-radius: 8px;
        font-weight: 500;
        font-size: 14px;
        transition: background 0.2s;
      }

      .install-integration-link:hover {
        background: var(--primary-color-hover, var(--primary-color));
        filter: brightness(1.1);
      }

      .install-integration-link ha-icon {
        font-size: 18px;
        margin: 0;
        color: white;
      }

      .user-card {
        background: var(--card-background-color);
        border: 2px solid var(--divider-color);
        border-radius: 12px;
        padding: 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 16px;
        flex: 1;
      }

      .user-avatar {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        object-fit: cover;
      }

      .user-avatar-icon {
        --mdc-icon-size: 48px;
        color: var(--primary-color);
      }

      .user-details {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .user-name {
        font-weight: 600;
        font-size: 16px;
        color: var(--primary-text-color);
      }

      .user-email {
        font-size: 14px;
        color: var(--secondary-text-color);
      }

      /* Card Name Setting */
      .ultra-pro-card-name {
        background: var(--card-background-color);
        border: 2px solid var(--divider-color);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 24px;
      }

      .setting-header {
        margin-bottom: 12px;
      }

      .setting-header label {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        font-size: 15px;
        color: var(--primary-text-color);
        margin-bottom: 6px;
      }

      .setting-header label ha-icon {
        --mdc-icon-size: 20px;
        color: var(--primary-color);
      }

      .ultra-pro-card-name ha-textfield {
        width: 100%;
      }

      /* Pro Tools Sections */
      .pro-tools-section {
        background: var(--card-background-color);
        border: 2px solid var(--divider-color);
        border-radius: 12px;
        padding: 24px;
        margin-bottom: 24px;
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--divider-color);
      }

      .header-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .header-icon ha-icon {
        --mdc-icon-size: 24px;
        color: white;
      }

      .header-content h3 {
        margin: 0;
        font-size: 20px;
        font-weight: 600;
        color: var(--primary-text-color);
      }

      .header-content p {
        margin: 4px 0 0 0;
        font-size: 14px;
        color: var(--secondary-text-color);
      }

      /* Pro Actions (Legacy) */
      .ultra-pro-actions {
        background: var(--card-background-color);
        border: 2px solid var(--divider-color);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 24px;
      }

      .actions-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
      }

      .actions-header h4 {
        margin: 0;
        font-size: 16px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--primary-text-color);
      }

      .actions-header h4 ha-icon {
        --mdc-icon-size: 20px;
        color: var(--primary-color);
      }

      .backup-count {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 13px;
        color: var(--secondary-text-color);
        font-weight: 500;
      }

      .backup-count ha-icon {
        --mdc-icon-size: 16px;
        color: var(--primary-color);
      }

      .limit-warning {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 13px;
        color: #f44336;
        font-weight: 600;
      }

      .limit-warning ha-icon {
        --mdc-icon-size: 16px;
      }

      /* New Tools Grid */
      .tools-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 20px;
      }

      .tool-card {
        background: var(--secondary-background-color);
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        align-items: flex-start;
        gap: 16px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: left;
      }

      .tool-card:hover:not(:disabled) {
        transform: translateY(-4px);
        border-color: var(--primary-color);
        box-shadow: 0 8px 16px rgba(3, 169, 244, 0.2);
      }

      .tool-card:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .tool-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .tool-icon.export {
        background: linear-gradient(135deg, #4caf50, #66bb6a);
      }

      .tool-icon.import {
        background: linear-gradient(135deg, #2196f3, #42a5f5);
      }

      .tool-icon.backup {
        background: linear-gradient(135deg, #ff9800, #ffb74d);
      }

      .tool-icon.restore {
        background: linear-gradient(135deg, #9c27b0, #ba68c8);
      }

      .tool-icon.history {
        background: linear-gradient(135deg, #607d8b, #78909c);
      }

      .tool-icon.snapshot {
        background: linear-gradient(135deg, #f44336, #ef5350);
      }

      .tool-icon.settings {
        background: linear-gradient(135deg, #795548, #8d6e63);
      }

      .tool-icon ha-icon {
        --mdc-icon-size: 24px;
        color: white;
      }

      .tool-content h4 {
        margin: 0 0 4px 0;
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-text-color);
      }

      .tool-content p {
        margin: 0;
        font-size: 13px;
        color: var(--secondary-text-color);
        line-height: 1.4;
      }

      /* Legacy Actions Grid */
      .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 16px;
      }

      .action-card {
        background: var(--secondary-background-color);
        border: 2px solid transparent;
        border-radius: 12px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
      }

      .action-card:hover:not(:disabled) {
        transform: translateY(-4px);
        border-color: var(--primary-color);
        box-shadow: 0 8px 16px rgba(3, 169, 244, 0.2);
      }

      .action-card:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .action-icon {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
      }

      .action-icon.export {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .action-icon.import {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .action-icon.backup {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      }

      .action-icon ha-icon {
        --mdc-icon-size: 28px;
        color: white;
      }

      .action-card:hover:not(:disabled) .action-icon {
        transform: scale(1.1);
      }

      .action-label {
        font-weight: 600;
        font-size: 14px;
        color: var(--primary-text-color);
      }

      /* Status Sections */
      .backup-status,
      .snapshot-status {
        margin-top: 16px;
        padding: 16px;
        background: var(--secondary-background-color);
        border-radius: 8px;
        border-left: 4px solid var(--primary-color);
      }

      .status-warning {
        display: flex;
        align-items: center;
        gap: 8px;
        color: #ff9800;
        font-weight: 500;
      }

      .status-info {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--primary-text-color);
        font-weight: 500;
      }

      .status-warning ha-icon,
      .status-info ha-icon {
        --mdc-icon-size: 18px;
      }

      .status-card {
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .status-primary {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .status-icon {
        --mdc-icon-size: 24px;
      }

      .status-card.enabled .status-icon {
        color: #4caf50;
      }

      .status-card.paused .status-icon {
        color: #ff9800;
      }

      .status-text strong {
        display: block;
        font-size: 16px;
        margin-bottom: 2px;
      }

      .status-desc {
        font-size: 14px;
        color: var(--secondary-text-color);
      }

      .status-detail {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: var(--secondary-text-color);
        margin-left: 36px;
      }

      .status-detail ha-icon {
        --mdc-icon-size: 16px;
      }

      .status-loading {
        display: flex;
        align-items: center;
        gap: 8px;
        color: var(--secondary-text-color);
        font-style: italic;
      }

      .status-loading ha-icon {
        --mdc-icon-size: 18px;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      /* Upgrade Section */
      .ultra-pro-upgrade {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 12px;
        padding: 28px;
        margin-bottom: 24px;
        color: white;
      }

      .upgrade-content {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
      }

      .upgrade-content > ha-icon {
        flex-shrink: 0;
        --mdc-icon-size: 48px;
        opacity: 0.9;
      }

      .upgrade-text h4 {
        margin: 0 0 8px 0;
        font-size: 20px;
        font-weight: 700;
      }

      .upgrade-text p {
        margin: 0 0 16px 0;
        opacity: 0.95;
        font-size: 14px;
      }

      .upgrade-features {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .upgrade-features li {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 14px;
      }

      .upgrade-features li ha-icon {
        --mdc-icon-size: 18px;
        flex-shrink: 0;
      }

      /* View Backups Button */
      .ultra-pro-view-backups {
        margin-bottom: 24px;
      }

      /* Buttons */
      .ultra-btn {
        padding: 12px 24px;
        border-radius: 8px;
        border: none;
        font-weight: 600;
        font-size: 15px;
        cursor: pointer;
        transition: all 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        width: 100%;
        justify-content: center;
      }

      .ultra-btn ha-icon {
        --mdc-icon-size: 20px;
      }

      .ultra-btn-primary {
        background: linear-gradient(135deg, var(--primary-color) 0%, #00796b 100%);
        color: white;
        box-shadow: 0 4px 12px rgba(3, 169, 244, 0.3);
      }

      .ultra-btn-primary:hover {
        box-shadow: 0 6px 16px rgba(3, 169, 244, 0.4);
        transform: translateY(-2px);
      }

      .ultra-btn-secondary {
        background: transparent;
        color: var(--primary-text-color);
        border: 2px solid var(--divider-color);
      }

      .ultra-btn-secondary:hover {
        background: var(--secondary-background-color);
        border-color: var(--primary-color);
      }

      .ultra-btn-upgrade {
        background: rgba(255, 255, 255, 0.25);
        color: white;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .ultra-btn-upgrade:hover {
        background: rgba(255, 255, 255, 0.35);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
      }

      .ultra-btn-view-backups {
        background: var(--card-background-color);
        color: var(--primary-color);
        border: 2px solid var(--primary-color);
      }

      .ultra-btn-view-backups:hover {
        background: var(--primary-color);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(3, 169, 244, 0.3);
      }

      /* Responsive for Ultra Card Pro */
      @media (max-width: 600px) {
        .ultra-pro-banner {
          flex-direction: column;
          text-align: center;
        }

        .features-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .actions-grid {
          grid-template-columns: 1fr;
        }

        .tools-grid {
          grid-template-columns: 1fr;
        }

        .tool-card {
          flex-direction: column;
          text-align: center;
          gap: 12px;
        }

        .section-header {
          flex-direction: column;
          text-align: center;
          gap: 12px;
        }

        .upgrade-content {
          flex-direction: column;
          text-align: center;
        }

        .user-card {
          flex-direction: column;
        }
      }
    `}_collectHoverEffectConfigs(){var e,t;const i=[];return this.config?(null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows)||void 0===t||t.forEach((e=>{var t,o;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect),null===(o=e.columns)||void 0===o||o.forEach((e=>{var t,o;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect),null===(o=e.modules)||void 0===o||o.forEach((e=>{var t;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect)}))}))})),i):i}_updateHoverEffectStyles(){if(!this.shadowRoot)return;const e=this._collectHoverEffectConfigs();e.length>0&&h.k.updateHoverEffectStyles(this.shadowRoot,e)}async _setupCloudSyncListeners(){if(this._hasInitializedAuth)return;this._hasInitializedAuth=!0;const e=f.x.checkIntegrationAuth(this.hass);if(e?(console.log("✅ Using Ultra Card Pro Cloud integration for authentication"),this._cloudUser=e):this._cloudUser=f.x.getCurrentUser(),this._syncStatus=k.getSyncStatus(),this._backupStatus=S.getStatus(),this._cloudUser&&f.x.isAuthenticated())try{await this._initializeProServices(this._cloudUser)}catch(e){console.error("❌ Failed to restore Pro session:",e)}else if(this._cloudUser&&this._cloudUser.refreshToken)try{await f.x.refreshToken(),this._cloudUser=f.x.getCurrentUser(),this._cloudUser&&await this._initializeProServices(this._cloudUser)}catch(e){console.warn("⚠️ Session restore failed, please check your connection")}this._authListener=e=>{this._cloudUser=e,this._loginError="",this.requestUpdate()},f.x.addListener(this._authListener),this._syncListener=e=>{this._syncStatus=e,this.requestUpdate()},k.addListener(this._syncListener),this._backupListener=e=>{this._backupStatus=e,this.requestUpdate()},S.addListener(this._backupListener),this._cloudUser&&this._checkForNewerBackup()}async _checkForNewerBackup(){try{const e=await S.checkForUpdates();e&&(this._newerBackupAvailable=e,this._showSyncNotification=!0)}catch(e){console.error("Failed to check for updates:",e)}}_cleanupCloudSyncListeners(){this._authListener&&(f.x.removeListener(this._authListener),this._authListener=void 0),this._syncListener&&(k.removeListener(this._syncListener),this._syncListener=void 0),this._backupListener&&(S.removeListener(this._backupListener),this._backupListener=void 0)}_renderProTab(){var e,t,i;const o=(null===(t=null===(e=this.hass)||void 0===e?void 0:e.locale)||void 0===t?void 0:t.language)||"en",n=f.x.checkIntegrationAuth(this.hass),r=f.x.isIntegrationInstalled(this.hass),s="pro"===(null===(i=null==n?void 0:n.subscription)||void 0===i?void 0:i.tier),l=!!n;return a.qy`
      <div class="pro-tab-content">
        <!-- INTEGRATION STATUS (if installed) -->
        ${this._renderIntegrationStatus(o,n,r)}

        <!-- ULTRA CARD PRO BRANDED BANNER -->
        ${this._renderProBanner(o,s,l)}

        <!-- AUTHENTICATION INFO (show if not authenticated via integration) -->
        ${n?"":this._renderAuthInfo(r)}

        <!-- PRO TOOLS SECTIONS (integration auth only) -->
        ${l?this._renderCardProTools(o,s):""}
        ${l&&s?this._renderDashboardProTools(o):""}

        <!-- MODALS -->
        ${this._showBackupHistory&&this._cloudUser?a.qy`
              <uc-snapshot-history-modal
                .open="${this._showBackupHistory}"
                .hass="${this.hass}"
                .subscription="${this._cloudUser.subscription}"
                @close-modal="${()=>this._showBackupHistory=!1}"
                @snapshot-restored="${this._handleSnapshotRestored}"
                @card-backup-restored="${this._handleCardBackupRestored}"
              ></uc-snapshot-history-modal>
            `:""}
        ${this._showManualBackup&&this._cloudUser?a.qy`
              <uc-manual-backup-dialog
                .open="${this._showManualBackup}"
                .config="${this.config}"
                @dialog-closed="${()=>this._showManualBackup=!1}"
                @backup-created="${this._handleManualBackupCreated}"
              ></uc-manual-backup-dialog>
            `:""}
        ${this._showSnapshotSettings?a.qy`
              <uc-snapshot-settings-dialog
                .open="${this._showSnapshotSettings}"
                @dialog-closed="${()=>this._showSnapshotSettings=!1}"
                @settings-saved="${this._handleSnapshotSettingsSaved}"
              ></uc-snapshot-settings-dialog>
            `:""}
      </div>
    `}_renderCloudSyncSection(e){var t,i;const o=f.x.checkIntegrationAuth(this.hass),n=f.x.isIntegrationInstalled(this.hass),r="pro"===(null===(t=null==o?void 0:o.subscription)||void 0===t?void 0:t.tier)&&"active"===(null===(i=null==o?void 0:o.subscription)||void 0===i?void 0:i.status),s=!!o;return a.qy`
      <div class="settings-section ultra-card-pro-section">
        <!-- ULTRA CARD PRO BRANDED BANNER -->
        ${this._renderProBanner(e,r,s)}

        <!-- AUTHENTICATION INFO (integration only) -->
        ${o?"":this._renderAuthInfo(n)}

        <!-- CARD NAME SETTING (Always visible when logged in) -->
        ${s?this._renderCardNameSetting(e):""}

        <!-- PRO TOOLS SECTIONS (integration auth only) -->
        ${s?this._renderCardProTools(e,r):""}
        ${s&&r?this._renderDashboardProTools(e):""}

        <!-- MODALS (integration auth only) -->
        ${this._showBackupHistory&&o?a.qy`
              <uc-snapshot-history-modal
                .open="${this._showBackupHistory}"
                .hass="${this.hass}"
                .subscription="${o.subscription}"
                @close-modal="${()=>this._showBackupHistory=!1}"
                @snapshot-restored="${this._handleSnapshotRestored}"
                @card-backup-restored="${this._handleCardBackupRestored}"
              ></uc-snapshot-history-modal>
            `:""}
        ${this._showManualBackup&&o?a.qy`
              <uc-manual-backup-dialog
                .open="${this._showManualBackup}"
                .config="${this.config}"
                @dialog-closed="${()=>this._showManualBackup=!1}"
                @backup-created="${this._handleManualBackupCreated}"
              ></uc-manual-backup-dialog>
            `:""}
      </div>
    `}_renderIntegrationStatus(e,t,i){var o;if(t){const e="pro"===(null===(o=t.subscription)||void 0===o?void 0:o.tier);return a.qy`
        <div class="integration-status-card integration-authenticated">
          <div class="status-icon">
            <ha-icon icon="mdi:check-circle"></ha-icon>
          </div>
          <div class="status-content">
            <h4>✅ PRO Features Unlocked via Ultra Card Pro Cloud</h4>
            <p>
              <strong
                >${t.displayName}${t.email?` • ${t.email}`:""}</strong
              >
            </p>
            <p>
              Subscription: <strong>${e?"PRO":"Free"}</strong>
              ${e?"⭐":""}
            </p>
            <p class="status-note">
              All your devices are automatically unlocked. Manage this in Home Assistant Settings →
              <a href="/config/integrations/integration/ultra_card_pro_cloud" target="_top">
                Integrations
              </a>
            </p>
          </div>
        </div>
      `}return i?a.qy`
        <div class="integration-status-card integration-not-configured">
          <div class="status-icon">
            <ha-icon icon="mdi:alert-circle"></ha-icon>
          </div>
          <div class="status-content">
            <h4>🔧 Ultra Card Pro Cloud Integration Detected</h4>
            <p>The integration is installed but not configured.</p>
            <div class="status-actions">
              <a
                href="/config/integrations/integration/ultra_card_pro_cloud"
                target="_top"
                class="integration-button"
              >
                <ha-icon icon="mdi:cog"></ha-icon>
                Configure Now
              </a>
            </div>
            <p class="status-note">Takes 30 seconds to unlock all devices</p>
          </div>
        </div>
      `:i||this._cloudUser?a.qy``:a.qy`
        <div class="integration-status-card integration-not-installed">
          <div class="status-icon">
            <ha-icon icon="mdi:cloud-lock"></ha-icon>
          </div>
          <div class="status-content">
            <h4>⭐ Unlock PRO Features Across All Devices</h4>
            <p class="integration-subtitle">
              Install <strong>Ultra Card Pro Cloud</strong> integration once, and every device
              connected to this Home Assistant automatically gets PRO features.
            </p>
            <div class="benefits-list">
              <div class="benefit-item">
                <ha-icon icon="mdi:check-circle"></ha-icon>
                <div>
                  <strong>Login Once</strong>
                  <span class="benefit-description">Works on desktop, mobile, tablet, TV</span>
                </div>
              </div>
              <div class="benefit-item">
                <ha-icon icon="mdi:sync"></ha-icon>
                <div>
                  <strong>Auto-Sync</strong>
                  <span class="benefit-description">No per-device configuration needed</span>
                </div>
              </div>
              <div class="benefit-item">
                <ha-icon icon="mdi:shield-check"></ha-icon>
                <div>
                  <strong>Secure & Reliable</strong>
                  <span class="benefit-description">Server-side auth, automatic token refresh</span>
                </div>
              </div>
            </div>

            <div class="install-steps">
              <h5>📋 Quick Install (2 minutes):</h5>
              <ol>
                <li>Click <strong>"Install via HACS"</strong> below</li>
                <li>In HACS: Search "<strong>Ultra Card Pro Cloud</strong>"</li>
                <li>Click <strong>Download</strong></li>
                <li>Restart Home Assistant</li>
                <li>Go to Settings → Integrations → Add Integration</li>
                <li>Search and add "<strong>Ultra Card Pro Cloud</strong>"</li>
                <li>Enter your <strong>ultracard.io</strong> credentials</li>
              </ol>
            </div>

            <div class="status-actions">
              <a
                href="https://github.com/WJDDesigns/ultra-card-pro-cloud"
                target="_blank"
                class="integration-button integration-button-primary"
              >
                <ha-icon icon="mdi:cloud-download"></ha-icon>
                Install via HACS
              </a>
              <a href="https://ultracard.io" target="_blank" class="integration-button">
                <ha-icon icon="mdi:cart"></ha-icon>
                Get PRO Subscription
              </a>
            </div>
            <p class="status-note-small">
              💡 Prefer single-device? Use the card login below instead.
            </p>
          </div>
        </div>
      `}_renderProBanner(e,t,i){return i?t?a.qy`
        <div class="ultra-pro-banner ultra-pro-banner-pro">
          <div class="banner-gradient"></div>
          <div class="banner-icon">
            <ha-icon icon="mdi:star-circle"></ha-icon>
          </div>
          <div class="banner-content">
            <h3>
              <ha-icon icon="mdi:star"></ha-icon>
              ${(0,Wi.kg)("editor.ultra_card_pro.pro_banner_title",e,"Ultra Card Pro")}
            </h3>
            <p>
              ${(0,Wi.kg)("editor.ultra_card_pro.pro_banner_subtitle",e,"Thank you for being a Pro member!")}
            </p>
          </div>
          <div class="pro-badge">
            <ha-icon icon="mdi:check-decagram"></ha-icon>
            PRO
          </div>
        </div>
      `:a.qy`
      <div class="ultra-pro-banner ultra-pro-banner-free">
        <div class="banner-icon">
          <ha-icon icon="mdi:star-circle-outline"></ha-icon>
        </div>
        <div class="banner-content">
          <h3>${(0,Wi.kg)("editor.ultra_card_pro.free_banner_title",e,"Ultra Card Pro")}</h3>
          <p>
            ${(0,Wi.kg)("editor.ultra_card_pro.free_banner_subtitle",e,"Professional card management and cloud backups")}
          </p>
        </div>
        <div class="free-badge">FREE</div>
      </div>
    `:a.qy`
        <div class="ultra-pro-banner ultra-pro-banner-minimal">
          <div class="banner-icon">
            <ha-icon icon="mdi:star-circle"></ha-icon>
          </div>
          <div class="banner-content">
            <h3>${(0,Wi.kg)("editor.ultra_card_pro.title",e,"Ultra Card Pro")}</h3>
            <p>
              ${(0,Wi.kg)("editor.ultra_card_pro.free_banner_subtitle",e,"Professional card management and cloud backups")}
            </p>
          </div>
        </div>
      `}_renderAuthInfo(e){return a.qy`
      <div class="auth-info-section">
        <ha-icon icon="mdi:information-outline"></ha-icon>
        <div class="info-content">
          <h4>Ultra Card Pro Authentication</h4>
          <p>
            To unlock Pro features, install the <strong>Ultra Card Pro Cloud</strong> integration
            from HACS and sign in there. Authentication is managed through the integration for
            seamless cross-device sync.
          </p>
          ${e?"":a.qy`
                <a
                  href="https://github.com/WJDDesigns/ultra-card-pro-cloud"
                  target="_blank"
                  rel="noopener"
                  class="install-integration-link"
                >
                  <ha-icon icon="mdi:download"></ha-icon>
                  Install Integration
                </a>
              `}
        </div>
      </div>
    `}_renderCardNameSetting(e){return a.qy`
      <div class="ultra-pro-card-name">
        <div class="setting-header">
          <label for="card-name">
            <ha-icon icon="mdi:card-text"></ha-icon>
            ${(0,Wi.kg)("editor.ultra_card_pro.card_name",e,"Card Name")}
          </label>
          <p class="setting-description">
            ${(0,Wi.kg)("editor.ultra_card_pro.card_name_desc",e,"Give this card a name to identify it in your backups")}
          </p>
        </div>
        <ha-textfield
          id="card-name"
          .value="${this.config.card_name||""}"
          @input="${this._handleCardNameChange}"
          placeholder="${(0,Wi.kg)("editor.ultra_card_pro.card_name_placeholder",e,"My Ultra Card")}"
          maxlength="100"
        ></ha-textfield>
      </div>
    `}_renderCardProTools(e,t){if(!t)return a.qy`
        <div class="ultra-pro-upgrade">
          <div class="upgrade-content">
            <ha-icon icon="mdi:star-box"></ha-icon>
            <div class="upgrade-text">
              <h4>
                ${(0,Wi.kg)("editor.ultra_card_pro.upgrade_title",e,"Unlock Pro Features")}
              </h4>
              <p>
                ${(0,Wi.kg)("editor.ultra_card_pro.upgrade_subtitle",e,"Get export, import, and manual backups for all your cards")}
              </p>
              <ul class="upgrade-features">
                <li>
                  <ha-icon icon="mdi:check"></ha-icon>
                  ${(0,Wi.kg)("editor.ultra_card_pro.features.export",e,"Export full card configs")}
                </li>
                <li>
                  <ha-icon icon="mdi:check"></ha-icon>
                  ${(0,Wi.kg)("editor.ultra_card_pro.features.import",e,"Import card configs")}
                </li>
                <li>
                  <ha-icon icon="mdi:check"></ha-icon>
                  ${(0,Wi.kg)("editor.ultra_card_pro.features.backups",e,"30 manual backups across all cards")}
                </li>
                <li>
                  <ha-icon icon="mdi:check"></ha-icon>
                  ${(0,Wi.kg)("editor.ultra_card_pro.features.naming",e,"Name your cards and backups")}
                </li>
                <li>
                  <ha-icon icon="mdi:check"></ha-icon>
                  ${(0,Wi.kg)("editor.ultra_card_pro.features.support",e,"Priority support")}
                </li>
              </ul>
            </div>
          </div>
          <button
            class="ultra-btn ultra-btn-upgrade"
            @click="${()=>window.open("https://ultracard.io/pro","_blank")}"
          >
            <ha-icon icon="mdi:star"></ha-icon>
            ${(0,Wi.kg)("editor.ultra_card_pro.upgrade_button",e,"Upgrade to Pro - $4.99/month")}
          </button>
        </div>
      `;const i=this._cloudUser.subscription,o=i.snapshot_count||0,n=i.snapshot_limit||30,r=o<n;return a.qy`
      <div class="pro-tools-section">
        <div class="section-header">
          <div class="header-icon">
            <ha-icon icon="mdi:card"></ha-icon>
          </div>
          <div class="header-content">
            <h3>Card Pro Tools</h3>
            <p>Manage individual card configurations</p>
          </div>
        </div>

        <div class="tools-grid">
          <!-- Export Card -->
          <button class="tool-card" @click="${this._handleExport}">
            <div class="tool-icon export">
              <ha-icon icon="mdi:export"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Export Card</h4>
              <p>Download this card's configuration</p>
            </div>
          </button>

          <!-- Import Card -->
          <button class="tool-card" @click="${this._handleImport}">
            <div class="tool-icon import">
              <ha-icon icon="mdi:import"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Import Card</h4>
              <p>Load configuration from file</p>
            </div>
          </button>

          <!-- Backup Card -->
          <button
            class="tool-card"
            @click="${this._handleCreateBackup}"
            ?disabled="${!r}"
          >
            <div class="tool-icon backup">
              <ha-icon icon="mdi:bookmark-plus"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Backup Card</h4>
              <p>Save current card state</p>
            </div>
          </button>

          <!-- Restore Card -->
          <button class="tool-card" @click="${()=>this._showBackupHistory=!0}">
            <div class="tool-icon restore">
              <ha-icon icon="mdi:backup-restore"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Restore Card</h4>
              <p>Restore from saved backup</p>
            </div>
          </button>

          <!-- View All Backups -->
          <button class="tool-card" @click="${()=>this._showBackupHistory=!0}">
            <div class="tool-icon history">
              <ha-icon icon="mdi:history"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>View All Backups</h4>
              <p>Browse all card backups</p>
            </div>
          </button>
        </div>

        <!-- Backup Status -->
        <div class="backup-status">
          ${r?a.qy`
                <div class="status-info">
                  <ha-icon icon="mdi:bookmark-multiple"></ha-icon>
                  ${o} / ${n} backups used
                </div>
              `:a.qy`
                <div class="status-warning">
                  <ha-icon icon="mdi:alert"></ha-icon>
                  Backup limit reached (${o}/${n})
                </div>
              `}
        </div>
      </div>
    `}_renderDashboardProTools(e){const t=this._snapshotSchedulerStatus;return a.qy`
      <div class="pro-tools-section">
        <div class="section-header">
          <div class="header-icon">
            <ha-icon icon="mdi:view-dashboard"></ha-icon>
          </div>
          <div class="header-content">
            <h3>Dashboard Pro Tools</h3>
            <p>Manage entire dashboard snapshots</p>
          </div>
        </div>

        <div class="tools-grid">
          <!-- Export Dashboard -->
          <button class="tool-card" @click="${this._handleExportDashboard}">
            <div class="tool-icon export">
              <ha-icon icon="mdi:export"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Export Dashboard</h4>
              <p>Download entire dashboard config</p>
            </div>
          </button>

          <!-- Import Dashboard -->
          <button class="tool-card" @click="${this._handleImportDashboard}">
            <div class="tool-icon import">
              <ha-icon icon="mdi:import"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Import Dashboard</h4>
              <p>Load dashboard from file</p>
            </div>
          </button>

          <!-- Create Snapshot -->
          <button class="tool-card" @click="${this._handleCreateSnapshot}">
            <div class="tool-icon snapshot">
              <ha-icon icon="mdi:camera-plus"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Create Snapshot</h4>
              <p>Manual dashboard snapshot</p>
            </div>
          </button>

          <!-- Restore Snapshot -->
          <button class="tool-card" @click="${this._handleRestoreSnapshot}">
            <div class="tool-icon restore">
              <ha-icon icon="mdi:backup-restore"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Restore Snapshot</h4>
              <p>Restore dashboard state</p>
            </div>
          </button>

          <!-- View Snapshots -->
          <button class="tool-card" @click="${this._handleViewSnapshots}">
            <div class="tool-icon history">
              <ha-icon icon="mdi:history"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>View Snapshots</h4>
              <p>Browse dashboard snapshots</p>
            </div>
          </button>

          <!-- Snapshot Settings -->
          <button class="tool-card" @click="${()=>this._showSnapshotSettings=!0}">
            <div class="tool-icon settings">
              <ha-icon icon="mdi:cog"></ha-icon>
            </div>
            <div class="tool-content">
              <h4>Snapshot Settings</h4>
              <p>Configure auto-snapshots</p>
            </div>
          </button>
        </div>

        <!-- Snapshot Status -->
        <div class="snapshot-status">
          ${t?a.qy`
                <div class="status-card ${t.enabled?"enabled":"paused"}">
                  <div class="status-primary">
                    <ha-icon
                      icon="${t.enabled?"mdi:check-circle":"mdi:pause-circle"}"
                      class="status-icon"
                    ></ha-icon>
                    <div class="status-text">
                      <strong>Auto-snapshots: ${t.enabled?"Enabled":"Paused"}</strong>
                      <span class="status-desc">
                        ${t.enabled?"Daily snapshots are active":"Daily snapshots are paused"}
                      </span>
                    </div>
                  </div>

                  ${t.enabled&&t.nextSnapshotTime?a.qy`
                        <div class="status-detail">
                          <ha-icon icon="mdi:calendar-clock"></ha-icon>
                          <span
                            >Next: ${this._formatNextSnapshotTime(t.nextSnapshotTime)}</span
                          >
                        </div>
                      `:""}
                  ${t.lastSnapshotTime?a.qy`
                        <div class="status-detail">
                          <ha-icon icon="mdi:history"></ha-icon>
                          <span
                            >Last: ${this._formatLastSnapshotTime(t.lastSnapshotTime)}</span
                          >
                        </div>
                      `:""}
                </div>
              `:a.qy`
                <div class="status-loading">
                  <ha-icon icon="mdi:loading"></ha-icon>
                  Loading snapshot status...
                </div>
              `}
        </div>
      </div>
    `}_renderViewBackupsButton(e){return a.qy`
      <div class="ultra-pro-view-backups">
        <button
          class="ultra-btn ultra-btn-view-backups"
          @click="${()=>this._showBackupHistory=!0}"
        >
          <ha-icon icon="mdi:history"></ha-icon>
          ${(0,Wi.kg)("editor.ultra_card_pro.view_backups",e,"View All Backups")}
        </button>
      </div>
    `}_renderSnapshotStatusSection(e){const t=this._snapshotSchedulerStatus;return a.qy`
      <div class="ultra-pro-snapshot-section">
        <div class="snapshot-header">
          <div class="header-content">
            <div class="header-icon">
              <ha-icon icon="mdi:camera-timer"></ha-icon>
            </div>
            <div class="header-text">
              <h3>Auto Dashboard Snapshots</h3>
              <p>Automatic daily backups of your entire dashboard</p>
            </div>
          </div>
          <button
            class="snapshot-settings-btn"
            @click="${()=>this._showSnapshotSettings=!0}"
            title="Configure snapshot settings"
          >
            <ha-icon icon="mdi:cog"></ha-icon>
          </button>
        </div>

        <div class="snapshot-status-container">
          ${t?a.qy`
                <div class="status-card ${t.enabled?"enabled":"paused"}">
                  <div class="status-primary">
                    <ha-icon
                      icon="${t.enabled?"mdi:check-circle":"mdi:pause-circle"}"
                      class="status-icon"
                    ></ha-icon>
                    <div class="status-text">
                      <strong>${t.enabled?"Enabled":"Paused"}</strong>
                      <span class="status-desc">
                        ${t.enabled?"Daily snapshots are active":"Daily snapshots are paused"}
                      </span>
                    </div>
                  </div>

                  ${t.enabled&&t.nextSnapshotTime?a.qy`
                        <div class="status-detail">
                          <div class="detail-icon">
                            <ha-icon icon="mdi:calendar-clock"></ha-icon>
                          </div>
                          <div class="detail-content">
                            <span class="detail-label">Next Snapshot</span>
                            <span class="detail-value">
                              ${this._formatNextSnapshotTime(t.nextSnapshotTime)}
                            </span>
                          </div>
                        </div>
                      `:""}
                  ${t.lastSnapshotTime?a.qy`
                        <div class="status-detail">
                          <div class="detail-icon">
                            <ha-icon icon="mdi:history"></ha-icon>
                          </div>
                          <div class="detail-content">
                            <span class="detail-label">Last Snapshot</span>
                            <span class="detail-value">
                              ${this._formatLastSnapshotTime(t.lastSnapshotTime)}
                            </span>
                          </div>
                        </div>
                      `:""}
                  ${t.isRunning?a.qy`
                        <div class="status-detail running">
                          <div class="detail-icon">
                            <ha-icon icon="mdi:loading" class="spinning"></ha-icon>
                          </div>
                          <div class="detail-content">
                            <span class="detail-value">Creating snapshot...</span>
                          </div>
                        </div>
                      `:""}
                </div>
              `:a.qy`
                <div class="status-card loading">
                  <ha-icon icon="mdi:loading" class="spinning"></ha-icon>
                  <span>Loading snapshot status...</span>
                </div>
              `}

          <div class="manual-snapshot-action">
            <button
              class="ultra-btn ultra-btn-manual-snapshot"
              @click="${this._handleManualSnapshot}"
              ?disabled="${this._isCreatingManualSnapshot||(null==t?void 0:t.isRunning)}"
            >
              <ha-icon
                icon="${this._isCreatingManualSnapshot?"mdi:loading":"mdi:camera-plus"}"
                class="${this._isCreatingManualSnapshot?"spinning":""}"
              ></ha-icon>
              ${this._isCreatingManualSnapshot?"Creating Snapshot...":"Perform Manual Dashboard Snapshot"}
            </button>
            <p class="manual-snapshot-note">
              <ha-icon icon="mdi:information"></ha-icon>
              Manual snapshots count towards your 30-day snapshot history.
            </p>
          </div>

          <div class="snapshot-info-card">
            <div class="info-icon-container">
              <ha-icon icon="mdi:information-outline"></ha-icon>
            </div>
            <div class="info-content">
              <h4>What are Dashboard Snapshots?</h4>
              <p>
                Automatically backs up <strong>all</strong> your Ultra Cards across your entire
                dashboard once per day. Both auto and manual snapshots are kept for
                <strong>30 days</strong> and include card positions for easy restoration.
              </p>
            </div>
          </div>
        </div>

        <style>
          .ultra-pro-snapshot-section {
            margin: 16px 0;
            padding: 20px;
            background: var(--card-background-color);
            border-radius: 12px;
            border: 2px solid var(--primary-color, #03a9f4);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
          }

          .snapshot-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--divider-color, #e0e0e0);
          }

          .header-content {
            display: flex;
            align-items: center;
            gap: 16px;
          }

          .header-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color, #03a9f4) 0%, #0288d1 100%);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(3, 169, 244, 0.3);
          }

          .header-icon ha-icon {
            --mdc-icon-size: 28px;
            color: white;
          }

          .header-text h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-text-color);
          }

          .header-text p {
            margin: 4px 0 0 0;
            font-size: 13px;
            color: var(--secondary-text-color);
            opacity: 0.8;
          }

          .snapshot-settings-btn {
            padding: 10px;
            background: var(--secondary-background-color, #f5f5f5);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--primary-text-color);
          }

          .snapshot-settings-btn:hover {
            background: var(--divider-color, #e0e0e0);
            transform: rotate(90deg);
          }

          .snapshot-settings-btn ha-icon {
            --mdc-icon-size: 20px;
          }

          .snapshot-status-container {
            display: flex;
            flex-direction: column;
            gap: 16px;
          }

          .status-card {
            background: var(--secondary-background-color, #f5f5f5);
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
          }

          .status-card.enabled {
            border-left: 4px solid var(--success-color, #4caf50);
          }

          .status-card.paused {
            border-left: 4px solid var(--warning-color, #ff9800);
          }

          .status-card.loading {
            flex-direction: row;
            align-items: center;
            gap: 12px;
            justify-content: center;
            color: var(--secondary-text-color);
          }

          .status-primary {
            display: flex;
            align-items: center;
            gap: 16px;
          }

          .status-icon {
            --mdc-icon-size: 32px;
          }

          .status-card.enabled .status-icon {
            color: var(--success-color, #4caf50);
          }

          .status-card.paused .status-icon {
            color: var(--warning-color, #ff9800);
          }

          .status-text {
            display: flex;
            flex-direction: column;
            gap: 4px;
          }

          .status-text strong {
            font-size: 16px;
            color: var(--primary-text-color);
          }

          .status-desc {
            font-size: 13px;
            color: var(--secondary-text-color);
            opacity: 0.9;
          }

          .status-detail {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-background-color);
            border-radius: 8px;
          }

          .status-detail.running {
            background: var(--primary-color, #03a9f4);
            color: white;
          }

          .status-detail.running .detail-value {
            color: white;
          }

          .detail-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: var(--secondary-background-color, #f5f5f5);
            border-radius: 8px;
          }

          .status-detail.running .detail-icon {
            background: rgba(255, 255, 255, 0.2);
          }

          .detail-icon ha-icon {
            --mdc-icon-size: 20px;
            color: var(--primary-color, #03a9f4);
          }

          .status-detail.running .detail-icon ha-icon {
            color: white;
          }

          .detail-content {
            display: flex;
            flex-direction: column;
            gap: 2px;
          }

          .detail-label {
            font-size: 12px;
            color: var(--secondary-text-color);
            opacity: 0.8;
            text-transform: uppercase;
            font-weight: 500;
            letter-spacing: 0.5px;
          }

          .detail-value {
            font-size: 14px;
            color: var(--primary-text-color);
            font-weight: 500;
          }

          .manual-snapshot-action {
            margin: 20px 0;
            padding: 16px;
            background: linear-gradient(
              135deg,
              rgba(3, 169, 244, 0.05) 0%,
              rgba(2, 136, 209, 0.08) 100%
            );
            border-radius: 10px;
            border: 2px dashed var(--primary-color, #03a9f4);
          }

          .ultra-btn-manual-snapshot {
            width: 100%;
            padding: 14px 20px;
            font-size: 15px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary-color, #03a9f4) 0%, #0288d1 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 12px rgba(3, 169, 244, 0.3);
          }

          .ultra-btn-manual-snapshot:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(3, 169, 244, 0.4);
          }

          .ultra-btn-manual-snapshot:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
          }

          .ultra-btn-manual-snapshot ha-icon {
            --mdc-icon-size: 22px;
          }

          .manual-snapshot-note {
            margin: 12px 0 0 0;
            padding: 0;
            font-size: 13px;
            color: var(--secondary-text-color);
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
          }

          .manual-snapshot-note ha-icon {
            --mdc-icon-size: 16px;
            color: var(--primary-color, #03a9f4);
          }

          .snapshot-info-card {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: var(--secondary-background-color, #f5f5f5);
            border-radius: 10px;
            border-left: 4px solid var(--primary-color, #03a9f4);
          }

          .info-icon-container {
            display: flex;
            align-items: flex-start;
            padding-top: 2px;
          }

          .info-icon-container ha-icon {
            --mdc-icon-size: 24px;
            color: var(--primary-color, #03a9f4);
          }

          .info-content {
            flex: 1;
          }

          .info-content h4 {
            margin: 0 0 8px 0;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary-text-color);
          }

          .info-content p {
            margin: 0;
            font-size: 13px;
            line-height: 1.5;
            color: var(--secondary-text-color);
          }

          .info-content strong {
            color: var(--primary-text-color);
            font-weight: 600;
          }

          .spinning {
            animation: spin 1s linear infinite;
          }

          @keyframes spin {
            from {
              transform: rotate(0deg);
            }
            to {
              transform: rotate(360deg);
            }
          }

          @media (max-width: 768px) {
            .ultra-pro-snapshot-section {
              padding: 16px;
            }

            .header-content {
              gap: 12px;
            }

            .header-icon {
              width: 40px;
              height: 40px;
            }

            .header-icon ha-icon {
              --mdc-icon-size: 24px;
            }

            .header-text h3 {
              font-size: 16px;
            }

            .header-text p {
              font-size: 12px;
            }

            .status-primary {
              flex-direction: column;
              align-items: flex-start;
            }
          }
        </style>
      </div>
    `}_formatNextSnapshotTime(e){const t=new Date;return`${e.getDate()===t.getDate()?"Today":"Tomorrow"} at ${e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`}_formatLastSnapshotTime(e){const t=(new Date).getTime()-e.getTime(),i=Math.floor(t/6e4),o=Math.floor(i/60),n=Math.floor(o/24);return i<1?"Just now":i<60?`${i} minute${i>1?"s":""} ago`:o<24?`${o} hour${o>1?"s":""} ago`:1===n?"Yesterday":n<7?`${n} days ago`:e.toLocaleDateString()}_handleCardNameChange(e){const t=e.target,i=Object.assign(Object.assign({},this.config),{card_name:t.value});this._updateConfig(i)}_handleExport(){try{Yi.exportToFile(this.config,`${(this.config.card_name||"ultra-card").replace(/[^a-z0-9]/gi,"-").toLowerCase()}-${Date.now()}.txt`);const e="en";alert((0,Wi.kg)("editor.ultra_card_pro.export_success",e,"Card configuration exported!"))}catch(e){console.error("Export failed:",e),alert("Failed to export card configuration")}}_handleImport(){const e=document.createElement("input");e.type="file",e.accept=".txt,.json",e.onchange=async e=>{var t;try{const i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!i)return;const o=await i.text();let n;try{n=JSON.parse(o)}catch(e){n=await Yi.importFromFile(i)}if(n.cards&&Array.isArray(n.cards))return void this._handleSnapshotImport(n);const a=n.type?n:await Yi.importFromFile(i);if("custom:ultra-card"!==a.type||!a.layout)throw new Error("Invalid Ultra Card configuration file");if(confirm("Import this card configuration? Your current config will be replaced.")){this._updateConfig(a);const e="en";alert((0,Wi.kg)("editor.ultra_card_pro.import_success",e,"Card configuration imported!"))}}catch(e){console.error("Import failed:",e),alert("Failed to import card configuration: "+(e instanceof Error?e.message:"Unknown error"))}},e.click()}_handleSnapshotImport(e){const t=e.cards||[];if(0===t.length)return void alert("No cards found in snapshot file");let i="📸 Snapshot Import\n\n";i+=`Found ${t.length} cards in this snapshot.\n\n`,i+="Select a card to import:\n\n";const o={};t.forEach(((e,t)=>{const i=e.view_title||"Unknown View";o[i]||(o[i]=[]),o[i].push(Object.assign(Object.assign({},e),{originalIndex:t}))}));let n=0;const a=[];Object.entries(o).forEach((([e,t])=>{i+=`\n📋 ${e}:\n`,t.forEach((e=>{var t;n++;const o=e.card_name||(null===(t=e.config)||void 0===t?void 0:t.card_name)||`Card ${e.card_index+1}`;i+=`  ${n}. ${o}\n`,a.push(e)}))})),i+=`\n\nEnter the number of the card you want to import (1-${a.length}):`;const r=prompt(i);if(!r)return;const s=parseInt(r);if(isNaN(s)||s<1||s>a.length)return void alert("Invalid selection");const l=a[s-1],d=l.config;d&&"custom:ultra-card"===d.type?confirm(`Import "${l.card_name||"this card"}"?\n\nThis will replace your current card configuration.`)&&(this._updateConfig(d),alert("✅ Card imported successfully from snapshot!")):alert("Invalid card configuration in snapshot")}_handleCreateBackup(){this._showManualBackup=!0}_handleExportDashboard(){var e,t,i,o,n,a,r,s,l;try{const d={views:(null===(o=null===(i=null===(t=null===(e=this.hass)||void 0===e?void 0:e.panels)||void 0===t?void 0:t.lovelace)||void 0===i?void 0:i.config)||void 0===o?void 0:o.views)||[],dashboard_path:(null===(s=null===(r=null===(a=null===(n=this.hass)||void 0===n?void 0:n.panels)||void 0===a?void 0:a.lovelace)||void 0===r?void 0:r.config)||void 0===s?void 0:s.dashboard_path)||"default",exported_at:(new Date).toISOString(),exported_by:(null===(l=this._cloudUser)||void 0===l?void 0:l.username)||"Unknown"},c=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),p=URL.createObjectURL(c),u=document.createElement("a");u.href=p,u.download=`dashboard-export-${Date.now()}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(p),alert("Dashboard configuration exported successfully!")}catch(e){console.error("Dashboard export failed:",e),alert("Failed to export dashboard configuration")}}_handleImportDashboard(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{var t;try{const i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!i)return;const o=await i.text(),n=JSON.parse(o);if(!n.views||!Array.isArray(n.views))throw new Error("Invalid dashboard configuration file");confirm("Import this dashboard configuration? This will replace your current dashboard.")&&alert("Dashboard import functionality requires Home Assistant API integration.\nPlease use the Home Assistant UI to import dashboard configurations.")}catch(e){console.error("Dashboard import failed:",e),alert("Failed to import dashboard configuration: "+(e instanceof Error?e.message:"Unknown error"))}},e.click()}_handleCreateSnapshot(){this._handleManualSnapshot()}_handleRestoreSnapshot(){this._showBackupHistory=!0}_handleViewSnapshots(){this._showBackupHistory=!0}_handleManualBackupCreated(e){const{name:t}=e.detail;this._cloudUser&&S.getSubscription().then((e=>{this._cloudUser&&(this._cloudUser.subscription=e,this.requestUpdate())})),alert((0,Wi.kg)("editor.ultra_card_pro.backup_created","en","Backup created successfully!")+`\n\n"${t}"`)}_handleBackupRestored(e){const{config:t}=e.detail;this._updateConfig(t),alert("Backup restored successfully!")}_handleSnapshotCreated(e){this._cloudUser&&S.getSubscription().then((e=>{this._cloudUser&&(this._cloudUser.subscription=e,this.requestUpdate())})),alert("Snapshot created successfully!")}_handleSnapshotRestored(e){console.log("✅ Snapshot restored - page will reload")}_handleCardBackupRestored(e){const{config:t}=e.detail;this._updateConfig(t),alert("Card backup restored successfully!")}async _handleSnapshotSettingsSaved(){console.log("✅ Snapshot settings saved"),this._updateSnapshotSchedulerStatus()}async _updateSnapshotSchedulerStatus(){try{this._snapshotSchedulerStatus=await T.getStatus()}catch(e){console.error("Failed to get snapshot scheduler status:",e)}}async _handleManualSnapshot(){if(!this._isCreatingManualSnapshot)try{this._isCreatingManualSnapshot=!0,console.log("📸 Starting manual dashboard snapshot..."),await A.createSnapshot(),T.updateLastSnapshotTime(),await this._updateSnapshotSchedulerStatus();const e=new CustomEvent("hass-notification",{detail:{message:"✅ Manual dashboard snapshot created successfully!",duration:5e3},bubbles:!0,composed:!0});this.dispatchEvent(e),console.log("✅ Manual snapshot completed successfully")}catch(e){console.error("❌ Manual snapshot failed:",e);const t=e instanceof Error?e.message:"Unknown error";alert(`Failed to create manual snapshot: ${t}`)}finally{this._isCreatingManualSnapshot=!1}}async _handleLoadNewerBackup(){if(this._newerBackupAvailable&&confirm("Load the newer backup from another device? Your current unsaved changes will be lost."))try{const e=await S.restoreBackup(this._newerBackupAvailable.id);this._updateConfig(e),this._showSyncNotification=!1,this._newerBackupAvailable=null,alert("Newer backup loaded successfully!")}catch(e){console.error("Failed to load newer backup:",e),alert("Failed to load newer backup: "+(e instanceof Error?e.message:"Unknown error"))}}_handleDismissSyncNotification(){this._showSyncNotification=!1,this._newerBackupAvailable=null}_renderLoginSection(e){return a.qy`
      <div class="login-section">
        ${this._showLoginForm?this._renderLoginForm(e):a.qy`
              <div class="login-prompt">
                <div class="login-benefits">
                  <h5>Benefits of Cloud Sync:</h5>
                  <ul>
                    <li>✅ Access your favorites on any device</li>
                    <li>✅ Automatic backup of your custom colors</li>
                    <li>✅ Sync your preset reviews and ratings</li>
                    <li>✅ Never lose your configurations</li>
                  </ul>
                </div>

                <div class="login-actions">
                  <button class="login-btn primary" @click=${()=>this._showLoginForm=!0}>
                    Sign In to Ultra Card Cloud <span class="beta-badge">BETA</span>
                  </button>
                  <p class="login-note">
                    Don't have an account?
                    <a href="https://ultracard.io/register" target="_blank" rel="noopener">
                      Create one free at ultracard.io
                    </a>
                  </p>
                </div>
              </div>
            `}
      </div>
    `}_renderLoginForm(e){return a.qy`
      <div class="login-form">
        <h5>Sign In to Ultra Card Cloud <span class="beta-badge">BETA</span></h5>

        ${this._loginError?a.qy`<div class="error-message">${(0,y._)(this._loginError)}</div>`:""}

        <form @submit=${this._handleLogin}>
          <div class="form-group">
            <label for="username">Username or Email</label>
            <input
              type="text"
              id="username"
              name="username"
              required
              ?disabled=${this._isLoggingIn}
              placeholder="Enter your username or email"
            />
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              required
              ?disabled=${this._isLoggingIn}
              placeholder="Enter your password"
            />
          </div>

          <div class="form-actions">
            <button
              type="button"
              class="cancel-btn"
              @click=${()=>{this._showLoginForm=!1,this._loginError=""}}
              ?disabled=${this._isLoggingIn}
            >
              Cancel
            </button>
            <button type="submit" class="login-btn primary" ?disabled=${this._isLoggingIn}>
              ${this._isLoggingIn?"Signing In...":"Sign In"}
            </button>
          </div>
        </form>

        <div class="login-links">
          <a href="https://ultracard.io/forgot-password" target="_blank" rel="noopener">
            Forgot Password?
          </a>
          <span>•</span>
          <a href="https://ultracard.io/register" target="_blank" rel="noopener">
            Create Account
          </a>
        </div>
      </div>
    `}_renderSyncControls(e){var t,i,o,n,r,s,l,d,c,p;const u=null===(t=this._syncStatus)||void 0===t?void 0:t.lastSync,h=(null===(i=this._syncStatus)||void 0===i?void 0:i.isSyncing)||!1,g=(null===(o=this._syncStatus)||void 0===o?void 0:o.pendingChanges)||0,m=(null===(n=this._syncStatus)||void 0===n?void 0:n.conflicts)||[];return a.qy`
      <div class="sync-controls">
        <div class="user-info">
          <div class="user-details">
            ${(null===(r=this._cloudUser)||void 0===r?void 0:r.avatar)?a.qy`<img src="${this._cloudUser.avatar}" alt="Avatar" class="user-avatar" />`:a.qy`<div class="user-avatar-placeholder">
                  ${(null===(l=null===(s=this._cloudUser)||void 0===s?void 0:s.displayName)||void 0===l?void 0:l.charAt(0))||"?"}
                </div>`}
            <div class="user-text">
              <strong>${(null===(d=this._cloudUser)||void 0===d?void 0:d.displayName)||"Unknown User"}</strong>
              <span class="user-email">${null===(c=this._cloudUser)||void 0===c?void 0:c.email}</span>
            </div>
          </div>
          <button class="logout-btn" @click=${this._handleLogout} title="Sign Out">
            <ha-icon icon="mdi:logout"></ha-icon>
          </button>
        </div>

        <div class="sync-status">
          <div class="sync-info">
            <div class="sync-stat">
              <span class="stat-label">Last Sync:</span>
              <span class="stat-value">
                ${u?this._formatRelativeTime(u):"Never"}
              </span>
            </div>
            ${g>0?a.qy`
                  <div class="sync-stat pending">
                    <span class="stat-label">Pending:</span>
                    <span class="stat-value">${g} changes</span>
                  </div>
                `:""}
            ${m.length>0?a.qy`
                  <div class="sync-stat conflicts">
                    <span class="stat-label">Conflicts:</span>
                    <span class="stat-value">${m.length} items</span>
                  </div>
                `:""}
          </div>

          <div class="sync-actions">
            <button
              class="sync-btn"
              @click=${this._handleSyncNow}
              ?disabled=${h}
              title="Sync all data now"
            >
              <ha-icon icon="mdi:sync${h?" spin":""}"></ha-icon>
              ${h?"Syncing...":"Sync Now"}
            </button>
          </div>
        </div>

        <div class="sync-settings">
          <div class="sync-toggle">
            <label class="toggle-label">
              <input
                type="checkbox"
                ?checked=${null===(p=this._syncStatus)||void 0===p?void 0:p.isEnabled}
                @change=${this._handleSyncToggle}
                ?disabled=${h}
              />
              <span class="toggle-text">
                ${(0,Wi.kg)("editor.cloud_sync.auto_sync",e,"Automatic Sync")}
              </span>
            </label>
            <p class="toggle-description">
              ${(0,Wi.kg)("editor.cloud_sync.auto_sync_desc",e,"Automatically sync changes in the background")}
            </p>
          </div>
        </div>

        ${m.length>0?this._renderConflicts(m,e):""}
      </div>
    `}_renderConflicts(e,t){return a.qy`
      <div class="sync-conflicts">
        <h6>Sync Conflicts</h6>
        <p>The following items have conflicts that need to be resolved:</p>

        <div class="conflicts-list">
          ${e.map((e=>a.qy`
              <div class="conflict-item">
                <div class="conflict-info">
                  <strong>${e.type}: ${e.local.name||e.local.id}</strong>
                  <span class="conflict-field">Field: ${e.field}</span>
                </div>
                <div class="conflict-actions">
                  <button
                    class="resolve-btn local"
                    @click=${()=>this._resolveConflict(e,"local")}
                  >
                    Keep Local
                  </button>
                  <button
                    class="resolve-btn remote"
                    @click=${()=>this._resolveConflict(e,"remote")}
                  >
                    Keep Cloud
                  </button>
                </div>
              </div>
            `))}
        </div>
      </div>
    `}async _initializeProServices(e){var t;const i="https://ultracard.io";this.hass&&(A.initialize(this.hass,i),O.ucDashboardScannerService.initialize(this.hass)),C.initialize(i),await k.setSyncEnabled(!0),"pro"===(null===(t=null==e?void 0:e.subscription)||void 0===t?void 0:t.tier)&&(T.start(),T.subscribe((e=>{this._snapshotSchedulerStatus=e})),this._updateSnapshotSchedulerStatus())}async _handleLogin(e){e.preventDefault();const t=e.target,i=new FormData(t),o=i.get("username"),n=i.get("password");if(o&&n){this._isLoggingIn=!0,this._loginError="";try{const e=await f.x.login({username:o,password:n});this._showLoginForm=!1,await this._initializeProServices(e),console.log("✅ Successfully logged in and initialized all services")}catch(e){this._loginError=e instanceof Error?e.message:"Login failed",console.error("❌ Login failed:",e)}finally{this._isLoggingIn=!1}}else this._loginError="Please enter both username and password"}async _handleLogout(){try{T.stop(),this._snapshotSchedulerStatus=null,await f.x.logout(),this._showLoginForm=!1,console.log("✅ Successfully logged out")}catch(e){console.error("❌ Logout failed:",e)}}async _handleSyncNow(){try{const e=await k.syncAll();console.log("✅ Sync completed:",e);const t=e.favorites.synced+e.colors.synced+e.reviews.synced;t>0&&console.log(`Synced ${t} items successfully`)}catch(e){console.error("❌ Sync failed:",e)}}async _handleSyncToggle(e){const t=e.target,i=t.checked;try{await k.setSyncEnabled(i),console.log("✅ Sync "+(i?"enabled":"disabled"))}catch(e){console.error("❌ Failed to toggle sync:",e),t.checked=!i}}async _resolveConflict(e,t){try{await k.resolveConflict(e,t),console.log(`✅ Conflict resolved: ${t}`)}catch(e){console.error("❌ Failed to resolve conflict:",e)}}_formatRelativeTime(e){const t=(new Date).getTime()-e.getTime(),i=Math.floor(t/6e4),o=Math.floor(i/60),n=Math.floor(o/24);return i<1?"Just now":i<60?`${i}m ago`:o<24?`${o}h ago`:n<7?`${n}d ago`:e.toLocaleDateString()}};mo([(0,r.MZ)({attribute:!1})],fo.prototype,"hass",void 0),mo([(0,r.MZ)({attribute:!1})],fo.prototype,"config",void 0),mo([(0,r.wk)()],fo.prototype,"_activeTab",void 0),mo([(0,r.wk)()],fo.prototype,"_configDebounceTimeout",void 0),mo([(0,r.wk)()],fo.prototype,"_isFullScreen",void 0),mo([(0,r.wk)()],fo.prototype,"_isMobile",void 0),mo([(0,r.wk)()],fo.prototype,"_cloudUser",void 0),mo([(0,r.wk)()],fo.prototype,"_syncStatus",void 0),mo([(0,r.wk)()],fo.prototype,"_backupStatus",void 0),mo([(0,r.wk)()],fo.prototype,"_showLoginForm",void 0),mo([(0,r.wk)()],fo.prototype,"_loginError",void 0),mo([(0,r.wk)()],fo.prototype,"_isLoggingIn",void 0),mo([(0,r.wk)()],fo.prototype,"_showBackupHistory",void 0),mo([(0,r.wk)()],fo.prototype,"_showCreateSnapshot",void 0),mo([(0,r.wk)()],fo.prototype,"_showManualBackup",void 0),mo([(0,r.wk)()],fo.prototype,"_showSnapshotSettings",void 0),mo([(0,r.wk)()],fo.prototype,"_snapshotSchedulerStatus",void 0),mo([(0,r.wk)()],fo.prototype,"_newerBackupAvailable",void 0),mo([(0,r.wk)()],fo.prototype,"_showSyncNotification",void 0),mo([(0,r.wk)()],fo.prototype,"_isCreatingManualSnapshot",void 0),fo=mo([(0,r.EM)("ultra-card-editor")],fo);var _o=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let vo=class extends a.WF{constructor(){super(...arguments),this._moduleVisibilityState=new Map,this._animatingModules=new Set,this._rowVisibilityState=new Map,this._columnVisibilityState=new Map,this._animatingRows=new Set,this._animatingColumns=new Set,this._cloudUser=null,this._lastHassChangeTime=0,this._moduleStylesInjected=!1,this._instanceId="",this._isEditorPreviewCard=!1,this._renderFlip=!1,this._currentScale=1,this._lastMeasuredWidth=0,this._isScalingInProgress=!1}connectedCallback(){if(super.connectedCallback(),!this._instanceId){const e=(0,b.Vo)(),t=Array.from(document.querySelectorAll("ultra-card")),i=`uc_card_id_${e}:${Math.max(0,t.indexOf(this))}`;let o="";try{o=localStorage.getItem(i)||""}catch(e){}if(!o){o=`uc-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;try{localStorage.setItem(i,o)}catch(e){}}this._instanceId=o;try{this.dataset=this.dataset||{},this.dataset.ucInstanceId=this._instanceId}catch(e){}}try{this._limitUnsub=b.O.onChange((()=>{this._renderFlip=!this._renderFlip,this.requestUpdate()}))}catch(e){}this._injectModuleStyles(),h.k.injectHoverEffectStyles(this.shadowRoot),this._loadCloudUser(),m.D.setUpdateCallback((()=>{this.requestUpdate()})),this._templateUpdateListener=()=>{this.requestUpdate(),this._updateHoverEffectStyles()},window.addEventListener("ultra-card-template-update",this._templateUpdateListener);const e=e=>{(0,v.z)("card:preview-flag",null==e?void 0:e.detail),this.requestUpdate()};window.addEventListener("uc-preview-suppress-locks-changed",e),this._ucPreviewFlagListener=e;const t=e=>{var t;null===(t=e.stopPropagation)||void 0===t||t.call(e),this.requestUpdate()};this.addEventListener("slider-state-changed",t),window.addEventListener("slider-state-changed",t),this._cloudUser=f.x.getCurrentUser(),this._authListener=e=>{this._cloudUser=e,(0,v.z)("card:auth-changed"),this.requestUpdate()},f.x.addListener(this._authListener),this._setupResponsiveScaling(),this._isScalingEnabled()&&(this._visibilityChangeHandler=()=>{this._forceResetScale(),setTimeout((()=>{this._lastMeasuredWidth=0,this._scheduleScaleCheck()}),150)},document.addEventListener("visibilitychange",this._visibilityChangeHandler),this._windowResizeHandler=()=>{this._forceResetScale(),this._lastMeasuredWidth=0,this._scheduleScaleCheck()},window.addEventListener("resize",this._windowResizeHandler))}disconnectedCallback(){super.disconnectedCallback(),this._limitUnsub&&(this._limitUnsub(),this._limitUnsub=void 0),h.k.removeHoverEffectStyles(this.shadowRoot),m.D.clearAll(),d.S.cleanup(),this._templateUpdateListener&&window.removeEventListener("ultra-card-template-update",this._templateUpdateListener);try{const e=this._ucPreviewFlagListener;e&&window.removeEventListener("uc-preview-suppress-locks-changed",e),this._ucPreviewFlagListener=void 0}catch(e){}this._authListener&&f.x.removeListener(this._authListener),this._resizeObserver&&this._resizeObserver.disconnect(),this._visibilityChangeHandler&&document.removeEventListener("visibilitychange",this._visibilityChangeHandler),this._windowResizeHandler&&window.removeEventListener("resize",this._windowResizeHandler),this._scaleDebounceTimer&&clearTimeout(this._scaleDebounceTimer);try{this._instanceId&&b.O.unregister(this._instanceId)}catch(e){}}getGridOptions(){return{columns:"full",min_columns:6}}willUpdate(e){var t,i,o;if(e.has("hass")&&this.hass&&this._loadCloudUser(),e.has("config")){const t=e.get("config"),i=this.config;t&&JSON.stringify(t.layout)===JSON.stringify(null==i?void 0:i.layout)||(this._moduleVisibilityState.clear(),this._animatingModules.clear(),this._rowVisibilityState.clear(),this._columnVisibilityState.clear(),this._animatingRows.clear(),this._animatingColumns.clear()),this.requestUpdate();const o=null==i?void 0:i.card_border_radius;null!=o?this.style.setProperty("--ha-card-border-radius",`${o}px`):this.style.removeProperty("--ha-card-border-radius")}if(e.has("hass")){const e=Date.now(),a=null===(o=null===(i=null===(t=this.config)||void 0===t?void 0:t.layout)||void 0===i?void 0:i.rows)||void 0===o?void 0:o.some((e=>{var t;return null===(t=e.columns)||void 0===t?void 0:t.some((e=>{var t;return null===(t=e.modules)||void 0===t?void 0:t.some((e=>"external_card"===e.type))}))}));a&&this.hass&&Promise.resolve().then(n.bind(n,1986)).then((({UltraExternalCardModule:e})=>{e.updateAllCardHass(this.hass)}));const r=100;(a||e-this._lastHassChangeTime>r)&&(this._lastHassChangeTime=e,this.hass&&d.S.setHass(this.hass),this.requestUpdate())}}setConfig(e){if(!e)throw new Error("Invalid configuration");const t=u.validateAndCorrectConfig(e);if(!t.valid)throw new Error(`Invalid configuration: ${t.errors.join(", ")}`);const i=u.validateUniqueModuleIds(t.correctedConfig);let o=t.correctedConfig;i.valid||(o=u.fixDuplicateModuleIds(o)),this.config=Object.assign({},o);try{const e=(0,b.Vo)(),t=this._instanceId||`uc-${Date.now()}-${Math.random().toString(36).slice(2,8)}`;this._isEditorPreviewCard=this._detectEditorPreviewContext();try{Object.defineProperty(this.config,"__ucInstanceId",{value:t,enumerable:!1}),Object.defineProperty(this.config,"__ucIsEditorPreview",{value:this._isEditorPreviewCard,enumerable:!1})}catch(e){}this._isEditorPreviewCard||window.__UC_PREVIEW_SUPPRESS_LOCKS||b.O.register(t,e,this.config)}catch(e){}this.requestUpdate()}_detectEditorPreviewContext(){var e,t;try{if(null===(e=null==this?void 0:this.hass)||void 0===e?void 0:e.editMode)return!0;const i=e=>{var t,i;if(!e)return!1;const o=null===(i=null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase)||void 0===i?void 0:i.call(t);return"hui-card-preview"===o||"hui-dialog-edit-card"===o};let o=this,n=0;for(;o&&n<20;){if(i(o))return!0;const e=null===(t=o.getRootNode)||void 0===t?void 0:t.call(o);o=e&&e.host?e.host:o.parentElement,n++}}catch(e){}return!1}static getConfigElement(){return document.createElement("ultra-card-editor")}static getStubConfig(){return{type:"custom:ultra-card",card_background:"var(--card-background-color, var(--ha-card-background, white))",card_border_radius:12,card_border_color:"var(--divider-color)",card_border_width:1,card_padding:16,layout:{rows:[{id:"row1",columns:[{id:"col1",modules:[{type:"text",text:"Ultra Card",font_size:24,color:"#2196f3",alignment:"center"},{type:"image",image_type:"default",width:100,height:200,alignment:"center",border_radius:8,object_fit:"cover"}]}]}]}}}render(){if(!this.config||!this.hass)return a.qy`<div>Loading...</div>`;const e=this._getCardStyle();return this.config.layout&&this.config.layout.rows&&0!==this.config.layout.rows.length?a.qy`
      <div class="card-container" style="${e}">
        ${this.config.layout.rows.map((e=>this._renderRow(e)))}
      </div>
    `:a.qy`
        <div class="card-container" style="${e}">
          <div class="welcome-text">
            <h2>Ultra Card</h2>
            <p>Modular card builder for Home Assistant</p>
            <p>Configure using the visual editor</p>
          </div>
        </div>
      `}updated(e){super.updated(e),e.has("config")&&(this._forceResetScale(),this._setupResponsiveScaling()),(e.has("config")||e.has("hass"))&&this._isScalingEnabled()&&(this._forceResetScale(),this._scheduleScaleCheck())}_setupResponsiveScaling(){var e;if(this._resizeObserver&&this._resizeObserver.disconnect(),this._scaleDebounceTimer&&(clearTimeout(this._scaleDebounceTimer),this._scaleDebounceTimer=void 0),!this._isScalingEnabled()){const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".card-container");return t&&(t.style.transform="",t.style.transformOrigin="",t.style.width=""),void(this._currentScale=1)}this._resizeObserver=new ResizeObserver((e=>{for(const t of e)t.target===this&&this._scheduleScaleCheck()})),this._resizeObserver.observe(this),this._scheduleScaleCheck()}_scheduleScaleCheck(){this._scaleDebounceTimer&&clearTimeout(this._scaleDebounceTimer),this._scaleDebounceTimer=window.setTimeout((()=>{this._checkAndScaleContent()}),100)}_forceResetScale(){var e;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".card-container");t&&(t.style.transform="",t.style.transformOrigin="",t.style.width="",this._currentScale=1)}_isScalingEnabled(){var e;return!1!==(null===(e=this.config)||void 0===e?void 0:e.responsive_scaling)}_checkAndScaleContent(){var e;if(!this._isScalingEnabled())return;if(this._isScalingInProgress)return;this._isScalingInProgress=!0;const t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector(".card-container");if(!t)return void(this._isScalingInProgress=!1);const i=this.offsetWidth,o=0===this._lastMeasuredWidth,n=this._currentScale<1;if(!o&&!n){const e=Math.abs(i-this._lastMeasuredWidth)>=5,t=i>this._lastMeasuredWidth;if(!e&&!t)return void(this._isScalingInProgress=!1)}this._lastMeasuredWidth=i,this._resizeObserver&&this._resizeObserver.disconnect(),this._forceResetScale(),t.style.transformOrigin="top left",t.offsetHeight,requestAnimationFrame((()=>{const e=t.scrollWidth;let o=1;if(e>i+10&&i>0){const t=i/e;o=Math.max(.5,Math.min(1,t))}this._currentScale<1&&o<1&&Math.abs(o-this._currentScale)<.02&&(o=this._currentScale),i>=this._lastMeasuredWidth&&(o=1),this._currentScale=o,o<1?(t.style.transform=`scale(${o})`,t.style.transformOrigin="top left",t.style.width=100/o+"%"):(t.style.transform="",t.style.width="",t.style.transformOrigin=""),this._resizeObserver&&this._isScalingEnabled()?requestAnimationFrame((()=>{this._resizeObserver&&this._isScalingEnabled()&&this._resizeObserver.observe(this),this._isScalingInProgress=!1})):this._isScalingInProgress=!1}))}_getCardStyle(){var e,t,i,o;if(!this.config)return"";const n=[];if(this.config.card_background&&n.push(`background: ${this.config.card_background}`),this.config.card_background_image_type&&"none"!==this.config.card_background_image_type){const e=this._getCardBackgroundImageUrl();if(e){n.push(`background-image: url('${e}')`);const t=this.config.card_background_size||"cover";n.push(`background-size: ${t}`);const i=this.config.card_background_repeat||"no-repeat";n.push(`background-repeat: ${i}`);const o=this.config.card_background_position||"center center";n.push(`background-position: ${o}`)}}if(void 0!==this.config.card_border_radius&&n.push(`border-radius: ${this.config.card_border_radius}px`),this.config.card_border_color||void 0!==this.config.card_border_width){const e=void 0!==this.config.card_border_width?this.config.card_border_width:1,t=this.config.card_border_color||"var(--divider-color)";n.push(`border: ${e}px solid ${t}`)}if(void 0!==this.config.card_padding&&n.push(`padding: ${this.config.card_padding}px`),void 0!==this.config.card_margin&&n.push(`margin: ${this.config.card_margin}px`),this.config.card_shadow_enabled){const a=this.config.card_shadow_color||"rgba(0, 0, 0, 0.15)",r=null!==(e=this.config.card_shadow_horizontal)&&void 0!==e?e:0,s=null!==(t=this.config.card_shadow_vertical)&&void 0!==t?t:2,l=null!==(i=this.config.card_shadow_blur)&&void 0!==i?i:8,d=null!==(o=this.config.card_shadow_spread)&&void 0!==o?o:0;n.push(`box-shadow: ${r}px ${s}px ${l}px ${d}px ${a}`)}return n.join("; ")}_getCardBackgroundImageUrl(){if(!this.config||!this.hass)return"";switch(this.config.card_background_image_type){case"upload":return this.config.card_background_image?(0,l.V)(this.hass,this.config.card_background_image):"";case"url":return this.config.card_background_image||"";case"entity":const e=this.config.card_background_image_entity;if(e&&this.hass.states[e]){const t=this.hass.states[e],i=t.attributes.entity_picture||t.attributes.entity_picture_local||t.attributes.picture||"";if(i)return(0,l.V)(this.hass,i)}return"";default:return""}}_renderRow(e){var t,i,o,n,r,s,l,c,p,u,g;this.hass&&d.S.setHass(this.hass);const m=d.S.evaluateRowVisibility(e),f=e,_=d.S.evaluateLogicProperties({logic_entity:null===(t=f.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(i=f.design)||void 0===i?void 0:i.logic_attribute,logic_operator:null===(o=f.design)||void 0===o?void 0:o.logic_operator,logic_value:null===(n=f.design)||void 0===n?void 0:n.logic_value});if(!m||!_)return a.qy``;const v=e.id||`row-${Math.random()}`,b=this._rowVisibilityState.get(v),y=!0,x=(null===(r=e.design)||void 0===r?void 0:r.intro_animation)||"none",k=(null===(s=e.design)||void 0===s?void 0:s.outro_animation)||"none",w=(null===(l=e.design)||void 0===l?void 0:l.animation_duration)||"2s",S=(null===(c=e.design)||void 0===c?void 0:c.animation_delay)||"0s",O=(null===(p=e.design)||void 0===p?void 0:p.animation_timing)||"ease",A=this._getStateBasedAnimationClass(e.design);let C="",$=!1;const T=this._animatingRows.has(v);A?C=A:void 0!==b&&b!==y?"none"!==x&&(T?C=`animation-${x}`:(C=`animation-${x}`,$=!0,this._animatingRows.add(v),setTimeout((()=>{this._animatingRows.delete(v),this.requestUpdate()}),this._parseAnimationDuration(w)+this._parseAnimationDuration(S)))):void 0===b&&"none"!==x?(C=`animation-${x}`,$=!0,this._animatingRows.add(v),setTimeout((()=>{this._animatingRows.delete(v),this.requestUpdate()}),this._parseAnimationDuration(w)+this._parseAnimationDuration(S))):T&&"none"!==x&&(C=`animation-${x}`),this._rowVisibilityState.set(v,y);const z=this._generateRowStyles(e),P=null===(u=e.design)||void 0===u?void 0:u.hover_effect,E=h.k.getHoverEffectClass(P),I=(null===(g=e.design)||void 0===g?void 0:g.background_filter)&&"none"!==e.design.background_filter?"has-background-filter":"",j=a.qy`
      <div class="card-row ${E} ${I}" style=${z}>
        ${e.columns.map((e=>this._renderColumn(e)))}
      </div>
    `;return C||"none"!==x||"none"!==k||A?a.qy`
        <div
          class="row-animation-wrapper ${C}"
          style="
            --animation-duration: ${w};
            --animation-delay: ${S};
            --animation-timing: ${O};
          "
        >
          ${j}
        </div>
      `:j}_renderColumn(e){var t,i,o,n,r,s,l,c,p,u,g;const m=d.S.evaluateColumnVisibility(e),f=e,_=d.S.evaluateLogicProperties({logic_entity:null===(t=f.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(i=f.design)||void 0===i?void 0:i.logic_attribute,logic_operator:null===(o=f.design)||void 0===o?void 0:o.logic_operator,logic_value:null===(n=f.design)||void 0===n?void 0:n.logic_value});if(!m||!_)return a.qy``;const v=e.id||`column-${Math.random()}`,b=this._columnVisibilityState.get(v),y=!0,x=(null===(r=e.design)||void 0===r?void 0:r.intro_animation)||"none",k=(null===(s=e.design)||void 0===s?void 0:s.outro_animation)||"none",w=(null===(l=e.design)||void 0===l?void 0:l.animation_duration)||"2s",S=(null===(c=e.design)||void 0===c?void 0:c.animation_delay)||"0s",O=(null===(p=e.design)||void 0===p?void 0:p.animation_timing)||"ease",A=this._getStateBasedAnimationClass(e.design);let C="",$=!1;const T=this._animatingColumns.has(v);A?C=A:void 0!==b&&b!==y?"none"!==x&&(T?C=`animation-${x}`:(C=`animation-${x}`,$=!0,this._animatingColumns.add(v),setTimeout((()=>{this._animatingColumns.delete(v),this.requestUpdate()}),this._parseAnimationDuration(w)+this._parseAnimationDuration(S)))):void 0===b&&"none"!==x?(C=`animation-${x}`,$=!0,this._animatingColumns.add(v),setTimeout((()=>{this._animatingColumns.delete(v),this.requestUpdate()}),this._parseAnimationDuration(w)+this._parseAnimationDuration(S))):T&&"none"!==x&&(C=`animation-${x}`),this._columnVisibilityState.set(v,y);const z=this._generateColumnStyles(e),P=null===(u=e.design)||void 0===u?void 0:u.hover_effect,E=h.k.getHoverEffectClass(P),I=(null===(g=e.design)||void 0===g?void 0:g.background_filter)&&"none"!==e.design.background_filter?"has-background-filter":"",j=a.qy`
      <div class="card-column ${E} ${I}" style=${z}>
        ${e.modules.map((e=>this._renderModule(e)))}
      </div>
    `;return C||"none"!==x||"none"!==k||A?a.qy`
        <div
          class="column-animation-wrapper ${C}"
          style="
            --animation-duration: ${w};
            --animation-delay: ${S};
            --animation-timing: ${O};
          "
        >
          ${j}
        </div>
      `:j}_renderModule(e){var t,i,o,n,r,s,l,c,p,u,h,m,f,_;const v=this._isProModule(e),b=this._hasProAccess(),y=v&&!b,x=d.S.evaluateModuleVisibility(e),k=e,w=d.S.evaluateLogicProperties({logic_entity:null===(t=k.design)||void 0===t?void 0:t.logic_entity,logic_attribute:null===(i=k.design)||void 0===i?void 0:i.logic_attribute,logic_operator:null===(o=k.design)||void 0===o?void 0:o.logic_operator,logic_value:null===(n=k.design)||void 0===n?void 0:n.logic_value}),S=x&&w,O=e.id||`${e.type}-${Math.random()}`,A=this._moduleVisibilityState.get(O),C=this._animatingModules.has(O),$=k.intro_animation||(null===(r=k.design)||void 0===r?void 0:r.intro_animation)||"none",T=k.outro_animation||(null===(s=k.design)||void 0===s?void 0:s.outro_animation)||"none",z=k.animation_duration||(null===(l=k.design)||void 0===l?void 0:l.animation_duration)||"2s",P=k.animation_delay||(null===(c=k.design)||void 0===c?void 0:c.animation_delay)||"0s",E=k.animation_timing||(null===(p=k.design)||void 0===p?void 0:p.animation_timing)||"ease",I=k.animation_type||(null===(u=k.design)||void 0===u?void 0:u.animation_type),j=k.animation_entity||(null===(h=k.design)||void 0===h?void 0:h.animation_entity),M=k.animation_trigger_type||(null===(m=k.design)||void 0===m?void 0:m.animation_trigger_type)||"state",D=k.animation_attribute||(null===(f=k.design)||void 0===f?void 0:f.animation_attribute),B=k.animation_state||(null===(_=k.design)||void 0===_?void 0:_.animation_state);let R=!1;if(I&&"none"!==I)if(j){if(B&&this.hass){const e=this.hass.states[j];if(e)if("attribute"===M&&D){const t=e.attributes[D];R=String(t)===B}else R=e.state===B}}else R=!0;let U="",H=!1;if(R&&"none"!==I?U=`animation-${I}`:void 0!==A&&A!==S?S&&"none"!==$?C?U=`animation-${$}`:(U=`animation-${$}`,H=!0,this._animatingModules.add(O),setTimeout((()=>{this._animatingModules.delete(O),this.requestUpdate()}),this._parseAnimationDuration(z)+this._parseAnimationDuration(P))):S||"none"===T||(C?U=`animation-${T}`:(U=`animation-${T}`,H=!0,this._animatingModules.add(O),setTimeout((()=>{this._animatingModules.delete(O),this.requestUpdate()}),this._parseAnimationDuration(z)+this._parseAnimationDuration(P)))):void 0===A&&S&&"none"!==$?(U=`animation-${$}`,H=!0,this._animatingModules.add(O),setTimeout((()=>{this._animatingModules.delete(O),this.requestUpdate()}),this._parseAnimationDuration(z)+this._parseAnimationDuration(P))):C&&(S&&"none"!==$?U=`animation-${$}`:S||"none"===T||(U=`animation-${T}`)),this._moduleVisibilityState.set(O,S),!S&&!C&&!H)return a.qy``;if(!this.hass||!this.config)return a.qy``;const J=g.E.renderModuleContent(e,this.hass,this.config,{animationClass:U,animationDuration:z,animationDelay:P,animationTiming:E,introAnimation:$,outroAnimation:T,shouldTriggerStateAnimation:R});return y?a.qy`
        <div
          class="pro-module-locked"
          @contextmenu=${e=>{e.preventDefault(),e.stopPropagation()}}
          @click=${e=>{e.preventDefault(),e.stopPropagation()}}
        >
          ${J}
          <div
            class="pro-module-overlay"
            @contextmenu=${e=>{e.preventDefault(),e.stopPropagation()}}
            @click=${e=>{e.preventDefault(),e.stopPropagation()}}
          >
            <div class="pro-module-message">
              <ha-icon icon="mdi:lock"></ha-icon>
              <div class="pro-module-text">
                <strong>Pro Module</strong>
                <span>Please login to view this module</span>
              </div>
            </div>
          </div>
        </div>
      `:this._renderFlip?a.qy`<section class="uc-module-wrap">${J}</section>`:a.qy`<div class="uc-module-wrap">${J}</div>`}_parseAnimationDuration(e){const t=e.match(/^(\d*\.?\d+)(s|ms)?$/);if(!t)return 300;const i=parseFloat(t[1]),o=t[2];return o?"s"===o?1e3*i:i:1e3*i}_collectHoverEffectConfigs(){var e,t;const i=[];return this.config?(null===(t=null===(e=this.config.layout)||void 0===e?void 0:e.rows)||void 0===t||t.forEach((e=>{var t,o;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect),null===(o=e.columns)||void 0===o||o.forEach((e=>{var t,o;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect),null===(o=e.modules)||void 0===o||o.forEach((e=>{var t;(null===(t=e.design)||void 0===t?void 0:t.hover_effect)&&i.push(e.design.hover_effect)}))}))})),i):i}_updateHoverEffectStyles(){if(!this.shadowRoot)return;const e=this._collectHoverEffectConfigs();e.length>0&&h.k.updateHoverEffectStyles(this.shadowRoot,e)}_getStateBasedAnimationClass(e){if(!e)return"";const t=e.animation_type,i=e.animation_entity,o=e.animation_trigger_type||"state",n=e.animation_attribute,a=e.animation_state;if(!t||"none"===t)return"";if(!i)return`animation-${t}`;if(!a||!this.hass)return"";const r=this.hass.states[i];if(!r)return"";let s=!1;if("attribute"===o&&n){const e=r.attributes[n];s=String(e)===a}else s=r.state===a;return s?`animation-${t}`:""}_countTotalModules(e){return e.layout&&e.layout.rows?e.layout.rows.reduce(((e,t)=>e+t.columns.reduce(((e,t)=>e+t.modules.length),0)),0):0}_getGridTemplateColumns(e,t){return{"1-col":"1fr","1-2-1-2":"1fr 1fr","1-3-2-3":"1fr 2fr","2-3-1-3":"2fr 1fr","2-5-3-5":"2fr 3fr","3-5-2-5":"3fr 2fr","1-3-1-3-1-3":"1fr 1fr 1fr","1-4-1-2-1-4":"1fr 2fr 1fr","1-5-3-5-1-5":"1fr 3fr 1fr","1-6-2-3-1-6":"1fr 4fr 1fr","1-4-1-4-1-4-1-4":"1fr 1fr 1fr 1fr","1-5-1-5-1-5-1-5":"1fr 1fr 1fr 1fr","1-6-1-6-1-6-1-6":"1fr 1fr 1fr 1fr","1-8-1-4-1-4-1-8":"1fr 2fr 2fr 1fr","1-5-1-5-1-5-1-5-1-5":"1fr 1fr 1fr 1fr 1fr","1-6-1-6-1-3-1-6-1-6":"1fr 1fr 2fr 1fr 1fr","1-8-1-4-1-4-1-4-1-8":"1fr 2fr 2fr 2fr 1fr","1-6-1-6-1-6-1-6-1-6-1-6":"1fr 1fr 1fr 1fr 1fr 1fr","50-50":"1fr 1fr","30-70":"3fr 7fr","70-30":"7fr 3fr","40-60":"4fr 6fr","60-40":"6fr 4fr","33-33-33":"1fr 1fr 1fr","25-50-25":"1fr 2fr 1fr","20-60-20":"1fr 3fr 1fr","25-25-25-25":"1fr 1fr 1fr 1fr"}[e]||`repeat(${t}, 1fr)`}_addPixelUnit(e){return e?/^\d+$/.test(e)?`${e}px`:/^[\d\s]+$/.test(e)?e.split(" ").map((e=>e.trim()?`${e}px`:e)).join(" "):e:e}_generateRowStyles(e){var t;const i=e.design||{},o=(e=>{switch(e){case"top":return"start";case"bottom":return"end";case"middle":return"center";default:return}})(e.column_alignment),n=(e=>{switch(e){case"start":return"start";case"end":return"end";case"center":return"center";case"stretch":return"stretch";default:return}})(e.content_alignment),a={display:"grid",gridTemplateColumns:this._getGridTemplateColumns(e.column_layout||"1-col",e.columns.length),gap:`${null!==(t=e.gap)&&void 0!==t?t:16}px`,padding:"8px 0"};void 0!==o&&(a.alignItems=o),void 0!==n&&(a.justifyItems=n);const r=i.background_filter&&"none"!==i.background_filter,s={padding:i.padding_top||i.padding_bottom||i.padding_left||i.padding_right?`${i.padding_top||"0"} ${i.padding_right||"0"} ${i.padding_bottom||"0"} ${i.padding_left||"0"}`:e.padding?`${e.padding}px`:void 0,margin:i.margin_top||i.margin_bottom||i.margin_left||i.margin_right?`${i.margin_top||"0"} ${i.margin_right||"0"} ${i.margin_bottom||"0"} ${i.margin_left||"0"}`:e.margin?`${e.margin}px`:void 0,background:r?"transparent":i.background_color||e.background_color||"transparent",backgroundImage:r?"none":this._resolveBackgroundImageCSS(i),backgroundSize:r?void 0:i.background_size||(i.background_image?"cover":void 0),backgroundPosition:r?void 0:i.background_position||(i.background_image?"center":void 0),backgroundRepeat:r?void 0:i.background_repeat||(i.background_image?"no-repeat":void 0),border:i.border_style&&"none"!==i.border_style?`${i.border_width||"1px"} ${i.border_style} ${i.border_color||"var(--divider-color)"}`:"none",borderRadius:this._addPixelUnit(i.border_radius)||(e.border_radius?`${e.border_radius}px`:"0"),position:r?"relative":i.position||"inherit",top:i.top||"auto",bottom:i.bottom||"auto",left:i.left||"auto",right:i.right||"auto",zIndex:i.z_index||"auto",width:i.width||"100%",height:i.height||"auto",maxWidth:i.max_width||"none",maxHeight:i.max_height||"none",minWidth:i.min_width||"none",minHeight:i.min_height||"auto",overflow:i.overflow||"visible",clipPath:i.clip_path||"none",backdropFilter:i.backdrop_filter||"none",boxShadow:i.box_shadow_h&&i.box_shadow_v?`${i.box_shadow_h||"0"} ${i.box_shadow_v||"0"} ${i.box_shadow_blur||"0"} ${i.box_shadow_spread||"0"} ${i.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};r&&(s["--bg-image"]=this._resolveBackgroundImageCSS(i),s["--bg-size"]=i.background_size||(i.background_image?"cover":"auto"),s["--bg-position"]=i.background_position||(i.background_image,"center"),s["--bg-repeat"]=i.background_repeat||(i.background_image?"no-repeat":"repeat"),s["--bg-filter"]=i.background_filter,s.background=i.background_color||e.background_color||"transparent");const l=Object.assign(Object.assign({},a),s),d=Object.fromEntries(Object.entries(l).filter((([e,t])=>void 0!==t)));return this._styleObjectToCss(d)}_generateColumnStyles(e){const t=e.design||{},i={display:"flex",flexDirection:"column"};e.horizontal_alignment&&(i.alignItems="left"===e.horizontal_alignment?"flex-start":"right"===e.horizontal_alignment?"flex-end":"stretch"===e.horizontal_alignment?"stretch":"center"),e.vertical_alignment&&(i.justifyContent="top"===e.vertical_alignment?"flex-start":"bottom"===e.vertical_alignment?"flex-end":"stretch"===e.vertical_alignment?"stretch":"center");const o=t.background_filter&&"none"!==t.background_filter,n={padding:t.padding_top||t.padding_bottom||t.padding_left||t.padding_right?`${t.padding_top||"0"} ${t.padding_right||"0"} ${t.padding_bottom||"0"} ${t.padding_left||"0"}`:e.padding?`${e.padding}px`:void 0,margin:t.margin_top||t.margin_bottom||t.margin_left||t.margin_right?`${t.margin_top||"0"} ${t.margin_right||"0"} ${t.margin_bottom||"0"} ${t.margin_left||"0"}`:e.margin?`${e.margin}px`:void 0,background:o?"transparent":t.background_color||e.background_color||"transparent",backgroundImage:o?"none":this._resolveBackgroundImageCSS(t),backgroundSize:o?void 0:t.background_size||(t.background_image?"cover":void 0),backgroundPosition:o?void 0:t.background_position||(t.background_image?"center":void 0),backgroundRepeat:o?void 0:t.background_repeat||(t.background_image?"no-repeat":void 0),border:t.border_style&&"none"!==t.border_style?`${t.border_width||"1px"} ${t.border_style} ${t.border_color||"var(--divider-color)"}`:"none",borderRadius:this._addPixelUnit(t.border_radius)||(e.border_radius?`${e.border_radius}px`:"0"),position:o?"relative":t.position||"inherit",top:t.top||"auto",bottom:t.bottom||"auto",left:t.left||"auto",right:t.right||"auto",zIndex:t.z_index||"auto",width:t.width||"100%",height:t.height||"auto",maxWidth:t.max_width||"none",maxHeight:t.max_height||"none",minWidth:t.min_width||"none",minHeight:t.min_height||"auto",overflow:t.overflow||"visible",clipPath:t.clip_path||"none",backdropFilter:t.backdrop_filter||"none",boxShadow:t.box_shadow_h&&t.box_shadow_v?`${t.box_shadow_h||"0"} ${t.box_shadow_v||"0"} ${t.box_shadow_blur||"0"} ${t.box_shadow_spread||"0"} ${t.box_shadow_color||"rgba(0,0,0,0.1)"}`:"none",boxSizing:"border-box"};o&&(n["--bg-image"]=this._resolveBackgroundImageCSS(t),n["--bg-size"]=t.background_size||(t.background_image?"cover":"auto"),n["--bg-position"]=t.background_position||(t.background_image,"center"),n["--bg-repeat"]=t.background_repeat||(t.background_image?"no-repeat":"repeat"),n["--bg-filter"]=t.background_filter,n.background=t.background_color||e.background_color||"transparent");const a=Object.assign(Object.assign({},i),n),r=Object.fromEntries(Object.entries(a).filter((([e,t])=>void 0!==t)));return this._styleObjectToCss(r)}_resolveBackgroundImageCSS(e){var t,i;const o=this.hass,n=null==e?void 0:e.background_image_type,a=null==e?void 0:e.background_image;if("none"===n)return"none";if(!n&&a)return`url("${o?(0,l.V)(o,a):a}")`;if("upload"===n||"url"===n)return a?`url("${o?(0,l.V)(o,a):a}")`:"none";if("entity"===n){const n=null==e?void 0:e.background_image_entity;if(n&&o&&o.states[n]){const e=o.states[n];let a="";if((null===(t=e.attributes)||void 0===t?void 0:t.entity_picture)?a=e.attributes.entity_picture:(null===(i=e.attributes)||void 0===i?void 0:i.image)?a=e.attributes.image:"string"==typeof e.state&&(a=e.state),a)return`url("${(0,l.V)(o,a)}")`}return"none"}return"none"}_styleObjectToCss(e){return Object.entries(e).map((([e,t])=>`${e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}: ${t}`)).join("; ")}_isProModule(e){const t=(0,s.oD)().getModule(e.type);if(!t||!t.metadata)return!1;const i=t.metadata.tags||[];return i.includes("pro")||i.includes("premium")}_loadCloudUser(){var e,t;if(!this.hass)return;const i=null===(t=null===(e=this.hass)||void 0===e?void 0:e.states)||void 0===t?void 0:t["sensor.ultra_card_pro_cloud_authentication_status"];if(i&&("disconnected"===i.state||"error"===i.state))return f.x.logout(),void(this._cloudUser=null);const o=f.x.checkIntegrationAuth(this.hass);if(o)return this._cloudUser=o,void f.x.setIntegrationUser(o);const n=f.x.getCurrentUser();n&&(this._cloudUser=n)}_hasProAccess(){var e,t;const i=f.x.checkIntegrationAuth(this.hass);return"pro"===(null===(e=null==i?void 0:i.subscription)||void 0===e?void 0:e.tier)&&"active"===(null===(t=null==i?void 0:i.subscription)||void 0===t?void 0:t.status)}_injectModuleStyles(){if(this._moduleStylesInjected||!this.shadowRoot)return;const e=(0,s.oD)().getAllModuleStyles();if(e.trim().length>0){const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t),this._moduleStylesInjected=!0}}static get styles(){return a.AH`
      :host {
        display: block;
        /* Ensure card adapts to container size in sections view */
        container-type: inline-size;
        width: 100%;
        min-width: 0;
        overflow-anchor: none; /* Prevent scroll anchoring on mobile when 3rd party cards update */
      }

      .card-container {
        background: var(--card-background-color, var(--ha-card-background, white));
        border-radius: var(--ha-card-border-radius, 8px);
        box-shadow: var(--ha-card-box-shadow, 0 2px 4px rgba(0, 0, 0, 0.1));
        padding: 16px;
        transition: all 0.3s ease;
        /* Responsive sizing for sections view */
        width: 100%;
        box-sizing: border-box;
        overflow-anchor: none; /* Prevent scroll anchoring on mobile when 3rd party cards update */
      }

      .welcome-text {
        text-align: center;
        padding: 24px;
      }

      .welcome-text h2 {
        margin: 0 0 16px 0;
        color: var(--primary-text-color);
      }

      .welcome-text p {
        margin: 8px 0;
        color: var(--secondary-text-color);
      }

      .card-row {
        /* No default margins - spacing controlled by individual modules */
        min-width: 0; /* allow columns to shrink inside row */
        width: 100%;
        overflow-anchor: none; /* Prevent scroll anchoring on mobile when 3rd party cards update */
      }

      /* Background blur support - use pseudo-element to avoid blurring content */
      .card-row.has-background-filter,
      .card-column.has-background-filter {
        position: relative;
        isolation: isolate; /* Create new stacking context */
      }

      .card-row.has-background-filter::before,
      .card-column.has-background-filter::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: inherit;
        background-image: var(--bg-image);
        background-size: var(--bg-size);
        background-position: var(--bg-position);
        background-repeat: var(--bg-repeat);
        filter: var(--bg-filter);
        border-radius: inherit;
        z-index: -1; /* Place behind content */
        pointer-events: none;
      }

      .card-row:last-child {
        /* No default margins - spacing controlled by individual modules */
      }

      .card-column {
        display: flex;
        flex-direction: column;
        /* Gap is now controlled via inline styles from column.gap property */
        box-sizing: border-box;
        min-width: 0; /* critical: prevent overflow from long content */
        width: 100%;
        max-width: 100%;
        overflow: hidden; /* keep column from exceeding its card area */
        overflow-anchor: none; /* Prevent scroll anchoring on mobile when 3rd party cards update */
      }

      /* Ensure media inside columns never exceed the column width */
      .card-column img,
      .card-column svg {
        max-width: 100%;
        height: auto;
      }

      .unknown-module {
        padding: 16px;
        background: var(--error-color);
        color: white;
        border-radius: 4px;
        text-align: center;
        font-size: 14px;
      }

      /* Animation Wrappers */
      .module-animation-wrapper,
      .row-animation-wrapper,
      .column-animation-wrapper {
        animation-duration: var(--animation-duration, 2s);
        animation-delay: var(--animation-delay, 0s);
        animation-timing-function: var(--animation-timing, ease);
        animation-fill-mode: both;
        /* Inherit width from content */
        display: inherit;
        width: inherit;
        height: inherit;
        flex: inherit;
      }

      /* Intro Animations */
      .animation-fadeIn {
        animation-name: fadeIn;
      }

      .animation-slideInUp {
        animation-name: slideInUp;
      }

      .animation-slideInDown {
        animation-name: slideInDown;
      }

      .animation-slideInLeft {
        animation-name: slideInLeft;
      }

      .animation-slideInRight {
        animation-name: slideInRight;
      }

      .animation-zoomIn {
        animation-name: zoomIn;
      }

      .animation-bounceIn {
        animation-name: bounceIn;
      }

      .animation-flipInX {
        animation-name: flipInX;
      }

      .animation-flipInY {
        animation-name: flipInY;
      }

      .animation-rotateIn {
        animation-name: rotateIn;
      }

      /* Outro Animations */
      .animation-fadeOut {
        animation-name: fadeOut;
      }

      .animation-slideOutUp {
        animation-name: slideOutUp;
      }

      .animation-slideOutDown {
        animation-name: slideOutDown;
      }

      .animation-slideOutLeft {
        animation-name: slideOutLeft;
      }

      .animation-slideOutRight {
        animation-name: slideOutRight;
      }

      .animation-zoomOut {
        animation-name: zoomOut;
      }

      .animation-bounceOut {
        animation-name: bounceOut;
      }

      .animation-flipOutX {
        animation-name: flipOutX;
      }

      .animation-flipOutY {
        animation-name: flipOutY;
      }

      .animation-rotateOut {
        animation-name: rotateOut;
      }

      /* State-based Animations */
      .animation-pulse {
        animation-name: pulse;
        animation-iteration-count: infinite;
      }

      .animation-vibrate {
        animation-name: vibrate;
        animation-iteration-count: infinite;
      }

      .animation-rotate-left {
        animation-name: rotateLeft;
        animation-iteration-count: infinite;
      }

      .animation-rotate-right {
        animation-name: rotateRight;
        animation-iteration-count: infinite;
      }

      .animation-hover {
        animation-name: hover;
        animation-iteration-count: infinite;
      }

      .animation-fade {
        animation-name: fadeInOut;
        animation-iteration-count: infinite;
      }

      .animation-scale {
        animation-name: scale;
        animation-iteration-count: infinite;
      }

      .animation-bounce {
        animation-name: bounce;
        animation-iteration-count: infinite;
      }

      .animation-shake {
        animation-name: shake;
        animation-iteration-count: infinite;
      }

      .animation-tada {
        animation-name: tada;
        animation-iteration-count: infinite;
      }

      /* Animation Keyframes */
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
        }
      }

      @keyframes slideInUp {
        from {
          transform: translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideInDown {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes zoomIn {
        from {
          transform: scale(0);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes flipInX {
        from {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
        to {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
      }

      @keyframes flipInY {
        from {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
        to {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
      }

      @keyframes rotateIn {
        from {
          transform: rotate(-200deg);
          opacity: 0;
        }
        to {
          transform: rotate(0deg);
          opacity: 1;
        }
      }

      @keyframes slideOutUp {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(-100%);
          opacity: 0;
        }
      }

      @keyframes slideOutDown {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(100%);
          opacity: 0;
        }
      }

      @keyframes slideOutLeft {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      @keyframes zoomOut {
        from {
          transform: scale(1);
          opacity: 1;
        }
        to {
          transform: scale(0);
          opacity: 0;
        }
      }

      @keyframes bounceOut {
        0% {
          transform: scale(1);
          opacity: 1;
        }
        25% {
          transform: scale(0.95);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(0);
          opacity: 0;
        }
      }

      @keyframes flipOutX {
        from {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
      }

      @keyframes flipOutY {
        from {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
      }

      @keyframes rotateOut {
        from {
          transform: rotate(0deg);
          opacity: 1;
        }
        to {
          transform: rotate(200deg);
          opacity: 0;
        }
      }

      /* State-based Animation Keyframes */
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes vibrate {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-2px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(2px);
        }
      }

      @keyframes rotateLeft {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(-360deg);
        }
      }

      @keyframes rotateRight {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes hover {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      @keyframes fadeInOut {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      @keyframes scale {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
      }

      @keyframes bounce {
        0%,
        20%,
        53%,
        80%,
        100% {
          transform: translateY(0);
        }
        40%,
        43% {
          transform: translateY(-15px);
        }
        70% {
          transform: translateY(-7px);
        }
        90% {
          transform: translateY(-3px);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        10%,
        30%,
        50%,
        70%,
        90% {
          transform: translateX(-5px);
        }
        20%,
        40%,
        60%,
        80% {
          transform: translateX(5px);
        }
      }

      @keyframes tada {
        0% {
          transform: scale(1);
        }
        10%,
        20% {
          transform: scale(0.9) rotate(-3deg);
        }
        30%,
        50%,
        70%,
        90% {
          transform: scale(1.1) rotate(3deg);
        }
        40%,
        60%,
        80% {
          transform: scale(1.1) rotate(-3deg);
        }
        100% {
          transform: scale(1) rotate(0);
        }
      }

      @keyframes slideOutUp {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInDown {
        from {
          transform: translateY(-100%);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      @keyframes slideOutDown {
        from {
          transform: translateY(0);
          opacity: 1;
        }
        to {
          transform: translateY(100%);
          opacity: 0;
        }
      }

      @keyframes slideInLeft {
        from {
          transform: translateX(-100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutLeft {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(-100%);
          opacity: 0;
        }
      }

      @keyframes slideInRight {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      @keyframes zoomIn {
        from {
          transform: scale(0.3);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes zoomOut {
        from {
          transform: scale(1);
          opacity: 1;
        }
        to {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      @keyframes bounceOut {
        20% {
          transform: scale(0.9);
        }
        50%,
        55% {
          transform: scale(1.05);
          opacity: 1;
        }
        100% {
          transform: scale(0.3);
          opacity: 0;
        }
      }

      @keyframes flipInX {
        from {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateX(-20deg);
        }
        60% {
          transform: perspective(400px) rotateX(10deg);
        }
        80% {
          transform: perspective(400px) rotateX(-5deg);
        }
        to {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutX {
        from {
          transform: perspective(400px) rotateX(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateX(90deg);
          opacity: 0;
        }
      }

      @keyframes flipInY {
        from {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
        40% {
          transform: perspective(400px) rotateY(-20deg);
        }
        60% {
          transform: perspective(400px) rotateY(10deg);
        }
        80% {
          transform: perspective(400px) rotateY(-5deg);
        }
        to {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
      }

      @keyframes flipOutY {
        from {
          transform: perspective(400px) rotateY(0deg);
          opacity: 1;
        }
        to {
          transform: perspective(400px) rotateY(90deg);
          opacity: 0;
        }
      }

      @keyframes rotateIn {
        from {
          transform: rotate(-200deg);
          opacity: 0;
        }
        to {
          transform: rotate(0);
          opacity: 1;
        }
      }

      @keyframes rotateOut {
        from {
          transform: rotate(0);
          opacity: 1;
        }
        to {
          transform: rotate(200deg);
          opacity: 0;
        }
      }

      /* Container queries for responsive behavior in sections view */
      @container (max-width: 300px) {
        .card-row {
          margin-bottom: 8px;
        }

        .card-column {
          gap: 8px;
        }
      }

      @container (min-width: 500px) {
        .card-row {
          margin-bottom: 16px;
        }
      }

      /* Pro Module Locked Overlay */
      .pro-module-locked {
        position: relative;
        width: 100%;
        min-height: 200px;
        isolation: isolate;
        display: block !important;
      }

      .pro-module-locked > *:first-child {
        position: relative;
        z-index: 1;
        filter: blur(3px);
        opacity: 0.4;
        pointer-events: none;
        user-select: none;
      }

      .pro-module-overlay {
        position: absolute !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100% !important;
        height: 100% !important;
        background: rgba(20, 20, 20, 0.85) !important;
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        z-index: ${_.Mu.DIALOG_OVERLAY} !important;
        border-radius: 8px;
        cursor: not-allowed !important;
        pointer-events: all !important;
        user-select: none !important;
      }

      .pro-module-message {
        display: flex !important;
        align-items: center;
        gap: 8px;
        padding: 12px 16px;
        background: linear-gradient(
          135deg,
          rgba(var(--rgb-primary-color, 33, 150, 243), 0.95),
          rgba(var(--rgb-accent-color, 255, 152, 0), 0.85)
        );
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
        color: white !important;
        position: relative;
        z-index: ${_.Mu.DIALOG_CONTENT};
        pointer-events: none;
        user-select: none;
        max-width: 95%;
      }

      .pro-module-message ha-icon {
        --mdc-icon-size: 24px;
        color: white !important;
        flex-shrink: 0;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
      }

      .pro-module-text {
        display: flex;
        flex-direction: column;
        gap: 4px;
        user-select: none;
        min-width: 0;
        flex: 1;
      }

      .pro-module-text strong {
        font-size: 13px;
        font-weight: 700;
        line-height: 1.2;
        color: white !important;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .pro-module-text span {
        font-size: 11px;
        opacity: 0.95;
        line-height: 1.3;
        color: white !important;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      /* Compact view for smaller containers */
      @container (max-width: 250px) {
        .pro-module-message {
          padding: 8px 10px;
          gap: 6px;
          border-radius: 8px;
        }

        .pro-module-message ha-icon {
          --mdc-icon-size: 18px;
        }

        .pro-module-text strong {
          font-size: 11px;
        }

        .pro-module-text span {
          font-size: 9px;
        }
      }

      /* Extra compact for very small containers */
      @container (max-width: 180px) {
        .pro-module-message {
          flex-direction: column;
          padding: 6px;
          gap: 4px;
        }

        .pro-module-message ha-icon {
          --mdc-icon-size: 16px;
        }

        .pro-module-text {
          align-items: center;
          text-align: center;
          gap: 2px;
        }

        .pro-module-text strong {
          font-size: 10px;
        }

        .pro-module-text span {
          display: none;
        }
      }
    `}};_o([(0,r.MZ)({attribute:!1})],vo.prototype,"hass",void 0),_o([(0,r.MZ)({attribute:!1,type:Object})],vo.prototype,"config",void 0),_o([(0,r.wk)()],vo.prototype,"_moduleVisibilityState",void 0),_o([(0,r.wk)()],vo.prototype,"_animatingModules",void 0),_o([(0,r.wk)()],vo.prototype,"_rowVisibilityState",void 0),_o([(0,r.wk)()],vo.prototype,"_columnVisibilityState",void 0),_o([(0,r.wk)()],vo.prototype,"_animatingRows",void 0),_o([(0,r.wk)()],vo.prototype,"_animatingColumns",void 0),_o([(0,r.wk)()],vo.prototype,"_cloudUser",void 0),_o([(0,r.wk)()],vo.prototype,"_renderFlip",void 0),vo=_o([(0,r.EM)("ultra-card")],vo),setTimeout((()=>{if(!customElements.get("ultra-card"))try{customElements.define("ultra-card",vo)}catch(e){}}),0);var bo=function(e,t,i,o){var n,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(r=(a<3?n(r):a>3?n(t,i,r):n(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r};let yo=class extends a.WF{constructor(){super(...arguments),this.value="",this.label="Navigation Target",this.disabled=!1}_valueChanged(e){const t=e.detail.value;this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:t},bubbles:!0,composed:!0}))}render(){return a.qy`
      <div class="navigation-picker">
        ${this.label?a.qy`<label class="label">${this.label}</label>`:""}
        ${this.helper?a.qy`<div class="helper">${this.helper}</div>`:""}

        <ha-selector
          .hass=${this.hass}
          .selector=${{navigation:{}}}
          .value=${this.value}
          .disabled=${this.disabled}
          @value-changed=${this._valueChanged}
        ></ha-selector>
      </div>
    `}};yo.styles=a.AH`
    :host {
      display: block;
    }

    .navigation-picker {
      width: 100%;
    }

    .label {
      display: block;
      font-weight: 500;
      color: var(--primary-text-color);
      margin-bottom: 8px;
    }

    .helper {
      font-size: 12px;
      color: var(--secondary-text-color);
      margin-bottom: 8px;
    }

    ha-selector {
      width: 100%;
      display: block;
    }
  `,bo([(0,r.MZ)({attribute:!1})],yo.prototype,"hass",void 0),bo([(0,r.MZ)()],yo.prototype,"value",void 0),bo([(0,r.MZ)()],yo.prototype,"label",void 0),bo([(0,r.MZ)()],yo.prototype,"helper",void 0),bo([(0,r.MZ)({type:Boolean})],yo.prototype,"disabled",void 0),yo=bo([(0,r.EM)("ultra-navigation-picker")],yo);const xo=(0,s.oD)().getRegistryStats().totalModules;setTimeout((()=>{var e,t,i,o,n,a;try{const r=document.querySelectorAll("ultra-card");let s=null,l=!1;for(const a of Array.from(r)){const r=a.hass;if(r){l=!0,s=f.x.checkIntegrationAuth(r);const a=null===(e=r.states)||void 0===e?void 0:e["sensor.ultra_card_pro_cloud_authentication_status"];if(a&&console.log("🔍 Integration sensor found:",{state:a.state,tier:null===(t=a.attributes)||void 0===t?void 0:t.subscription_tier,authenticated:null===(i=a.attributes)||void 0===i?void 0:i.authenticated}),s){console.log("🔍 Integration user detected:",{tier:null===(o=s.subscription)||void 0===o?void 0:o.tier,status:null===(n=s.subscription)||void 0===n?void 0:n.status});break}}}l||console.log("⚠️ No hass found on ultra-card elements yet"),"pro"===(null===(a=null==s?void 0:s.subscription)||void 0===a?void 0:a.tier)?console.info(`%c 🚀 Ultra Card %c v${Xi.x} %c ${xo} modules %c ⭐ Pro User `,"color: #fff; background:#03a9f4; font-weight:700; padding:3px 8px; border-radius:14px 0 0 14px;","color: #fff; background:#555555; font-weight:700; padding:3px 8px;","color: #fff; background:#2e7d32; font-weight:700; padding:3px 8px;","color: #fff; background:#f59e0b; font-weight:700; padding:3px 10px; border-radius:0 14px 14px 0;"):console.info(`%c 🚀 Ultra Card %c v${Xi.x} %c ${xo} modules `,"color: #fff; background:#03a9f4; font-weight:700; padding:3px 8px; border-radius:14px 0 0 14px;","color: #fff; background:#555555; font-weight:700; padding:3px 8px;","color: #fff; background:#2e7d32; font-weight:700; padding:3px 10px; border-radius:0 14px 14px 0;")}catch(e){console.error("❌ Error checking Pro status:",e),console.info(`%c 🚀 Ultra Card %c v${Xi.x} %c ${xo} modules `,"color: #fff; background:#03a9f4; font-weight:700; padding:3px 8px; border-radius:14px 0 0 14px;","color: #fff; background:#555555; font-weight:700; padding:3px 8px;","color: #fff; background:#2e7d32; font-weight:700; padding:3px 10px; border-radius:0 14px 14px 0;")}}),3e3),window.customCards=window.customCards||[],window.customCards.push({type:"ultra-card",name:"Ultra Card",description:"A modular card system for Home Assistant with dynamic layouts and powerful customization options.",preview:!0,documentationURL:"https://github.com/WJDDesigns/Ultra-Card",version:Xi.x})})();